(window.webpackJsonp=window.webpackJsonp||[]).push([[2],[function(module,exports){module.exports=function(obj){return obj&&obj.__esModule?obj:{default:obj}}},function(module,exports){module.exports=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}},function(module,exports){function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}module.exports=function(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}},function(module,exports){function _getPrototypeOf(o){return module.exports=_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}module.exports=_getPrototypeOf},function(module,exports,__webpack_require__){var _typeof=__webpack_require__(27),assertThisInitialized=__webpack_require__(12);module.exports=function(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?assertThisInitialized(self):call}},function(module,exports,__webpack_require__){var setPrototypeOf=__webpack_require__(302);module.exports=function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&setPrototypeOf(subClass,superClass)}},function(module,exports){module.exports=function(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"isWebGL",{enumerable:!0,get:function(){return _webgl.isWebGL}}),Object.defineProperty(exports,"isWebGL2",{enumerable:!0,get:function(){return _webgl.isWebGL2}}),Object.defineProperty(exports,"lumaStats",{enumerable:!0,get:function(){return _webgl.lumaStats}}),Object.defineProperty(exports,"createGLContext",{enumerable:!0,get:function(){return _webgl.createGLContext}}),Object.defineProperty(exports,"destroyGLContext",{enumerable:!0,get:function(){return _webgl.destroyGLContext}}),Object.defineProperty(exports,"resizeGLContext",{enumerable:!0,get:function(){return _webgl.resizeGLContext}}),Object.defineProperty(exports,"setGLContextDefaults",{enumerable:!0,get:function(){return _webgl.setGLContextDefaults}}),Object.defineProperty(exports,"getContextInfo",{enumerable:!0,get:function(){return _webgl.getContextInfo}}),Object.defineProperty(exports,"getGLContextInfo",{enumerable:!0,get:function(){return _webgl.getGLContextInfo}}),Object.defineProperty(exports,"getContextLimits",{enumerable:!0,get:function(){return _webgl.getContextLimits}}),Object.defineProperty(exports,"FEATURES",{enumerable:!0,get:function(){return _webgl.FEATURES}}),Object.defineProperty(exports,"hasFeature",{enumerable:!0,get:function(){return _webgl.hasFeature}}),Object.defineProperty(exports,"hasFeatures",{enumerable:!0,get:function(){return _webgl.hasFeatures}}),Object.defineProperty(exports,"getFeatures",{enumerable:!0,get:function(){return _webgl.getFeatures}}),Object.defineProperty(exports,"canCompileGLGSExtension",{enumerable:!0,get:function(){return _webgl.canCompileGLGSExtension}}),Object.defineProperty(exports,"cloneTextureFrom",{enumerable:!0,get:function(){return _webgl.cloneTextureFrom}}),Object.defineProperty(exports,"getKeyValue",{enumerable:!0,get:function(){return _webgl.getKeyValue}}),Object.defineProperty(exports,"getKey",{enumerable:!0,get:function(){return _webgl.getKey}}),Object.defineProperty(exports,"setContextDefaults",{enumerable:!0,get:function(){return _webgl.setGLContextDefaults}}),Object.defineProperty(exports,"glGetDebugInfo",{enumerable:!0,get:function(){return _webgl.getContextDebugInfo}}),Object.defineProperty(exports,"Buffer",{enumerable:!0,get:function(){return _webgl.Buffer}}),Object.defineProperty(exports,"Shader",{enumerable:!0,get:function(){return _webgl.Shader}}),Object.defineProperty(exports,"VertexShader",{enumerable:!0,get:function(){return _webgl.VertexShader}}),Object.defineProperty(exports,"FragmentShader",{enumerable:!0,get:function(){return _webgl.FragmentShader}}),Object.defineProperty(exports,"Program",{enumerable:!0,get:function(){return _webgl.Program}}),Object.defineProperty(exports,"Framebuffer",{enumerable:!0,get:function(){return _webgl.Framebuffer}}),Object.defineProperty(exports,"Renderbuffer",{enumerable:!0,get:function(){return _webgl.Renderbuffer}}),Object.defineProperty(exports,"Texture2D",{enumerable:!0,get:function(){return _webgl.Texture2D}}),Object.defineProperty(exports,"TextureCube",{enumerable:!0,get:function(){return _webgl.TextureCube}}),Object.defineProperty(exports,"clear",{enumerable:!0,get:function(){return _webgl.clear}}),Object.defineProperty(exports,"clearBuffer",{enumerable:!0,get:function(){return _webgl.clearBuffer}}),Object.defineProperty(exports,"readPixelsToArray",{enumerable:!0,get:function(){return _webgl.readPixelsToArray}}),Object.defineProperty(exports,"readPixelsToBuffer",{enumerable:!0,get:function(){return _webgl.readPixelsToBuffer}}),Object.defineProperty(exports,"copyToDataUrl",{enumerable:!0,get:function(){return _webgl.copyToDataUrl}}),Object.defineProperty(exports,"copyToImage",{enumerable:!0,get:function(){return _webgl.copyToImage}}),Object.defineProperty(exports,"copyToTexture",{enumerable:!0,get:function(){return _webgl.copyToTexture}}),Object.defineProperty(exports,"blit",{enumerable:!0,get:function(){return _webgl.blit}}),Object.defineProperty(exports,"Query",{enumerable:!0,get:function(){return _webgl.Query}}),Object.defineProperty(exports,"Texture3D",{enumerable:!0,get:function(){return _webgl.Texture3D}}),Object.defineProperty(exports,"TransformFeedback",{enumerable:!0,get:function(){return _webgl.TransformFeedback}}),Object.defineProperty(exports,"VertexArrayObject",{enumerable:!0,get:function(){return _webgl.VertexArrayObject}}),Object.defineProperty(exports,"VertexArray",{enumerable:!0,get:function(){return _webgl.VertexArray}}),Object.defineProperty(exports,"UniformBufferLayout",{enumerable:!0,get:function(){return _webgl.UniformBufferLayout}}),Object.defineProperty(exports,"setPathPrefix",{enumerable:!0,get:function(){return _webgl.setPathPrefix}}),Object.defineProperty(exports,"loadFile",{enumerable:!0,get:function(){return _webgl.loadFile}}),Object.defineProperty(exports,"loadImage",{enumerable:!0,get:function(){return _webgl.loadImage}}),Object.defineProperty(exports,"_Accessor",{enumerable:!0,get:function(){return _webgl.Accessor}}),Object.defineProperty(exports,"_clearBuffer",{enumerable:!0,get:function(){return _webgl.clearBuffer}}),Object.defineProperty(exports,"log",{enumerable:!0,get:function(){return _webgl.log}}),Object.defineProperty(exports,"assert",{enumerable:!0,get:function(){return _webgl.assert}}),Object.defineProperty(exports,"uid",{enumerable:!0,get:function(){return _webgl.uid}}),Object.defineProperty(exports,"self",{enumerable:!0,get:function(){return _webgl.self}}),Object.defineProperty(exports,"window",{enumerable:!0,get:function(){return _webgl.window}}),Object.defineProperty(exports,"global",{enumerable:!0,get:function(){return _webgl.global}}),Object.defineProperty(exports,"document",{enumerable:!0,get:function(){return _webgl.document}}),Object.defineProperty(exports,"trackContextState",{enumerable:!0,get:function(){return _webglStateTracker.trackContextState}}),Object.defineProperty(exports,"resetParameters",{enumerable:!0,get:function(){return _webglStateTracker.resetParameters}}),Object.defineProperty(exports,"getParameter",{enumerable:!0,get:function(){return _webglStateTracker.getParameter}}),Object.defineProperty(exports,"getParameters",{enumerable:!0,get:function(){return _webglStateTracker.getParameters}}),Object.defineProperty(exports,"setParameter",{enumerable:!0,get:function(){return _webglStateTracker.setParameter}}),Object.defineProperty(exports,"setParameters",{enumerable:!0,get:function(){return _webglStateTracker.setParameters}}),Object.defineProperty(exports,"withParameters",{enumerable:!0,get:function(){return _webglStateTracker.withParameters}}),Object.defineProperty(exports,"getModifiedParameters",{enumerable:!0,get:function(){return _webglStateTracker.getModifiedParameters}}),Object.defineProperty(exports,"Geometry",{enumerable:!0,get:function(){return _geometry.default}}),Object.defineProperty(exports,"Material",{enumerable:!0,get:function(){return _material.default}}),Object.defineProperty(exports,"AmbientLight",{enumerable:!0,get:function(){return _lightSource.AmbientLight}}),Object.defineProperty(exports,"DirectionalLight",{enumerable:!0,get:function(){return _lightSource.DirectionalLight}}),Object.defineProperty(exports,"PointLight",{enumerable:!0,get:function(){return _lightSource.PointLight}}),Object.defineProperty(exports,"AnimationLoop",{enumerable:!0,get:function(){return _animationLoop.default}}),Object.defineProperty(exports,"encodePickingColor",{enumerable:!0,get:function(){return _pickingColors.encodePickingColor}}),Object.defineProperty(exports,"decodePickingColor",{enumerable:!0,get:function(){return _pickingColors.decodePickingColor}}),Object.defineProperty(exports,"getNullPickingColor",{enumerable:!0,get:function(){return _pickingColors.getNullPickingColor}}),Object.defineProperty(exports,"Model",{enumerable:!0,get:function(){return _model.default}}),Object.defineProperty(exports,"Transform",{enumerable:!0,get:function(){return _transform2.default}}),Object.defineProperty(exports,"ClipSpace",{enumerable:!0,get:function(){return _clipSpace.default}}),Object.defineProperty(exports,"_ShaderCache",{enumerable:!0,get:function(){return _shaderCache.default}}),Object.defineProperty(exports,"_AnimationLoopProxy",{enumerable:!0,get:function(){return _animationLoopProxy.default}}),Object.defineProperty(exports,"_MultiPassRenderer",{enumerable:!0,get:function(){return _multiPassRenderer.default}}),Object.defineProperty(exports,"_RenderState",{enumerable:!0,get:function(){return _renderState.default}}),Object.defineProperty(exports,"_Pass",{enumerable:!0,get:function(){return _pass.default}}),Object.defineProperty(exports,"_CompositePass",{enumerable:!0,get:function(){return _compositePass.default}}),Object.defineProperty(exports,"_ClearPass",{enumerable:!0,get:function(){return _clearPass.default}}),Object.defineProperty(exports,"_RenderPass",{enumerable:!0,get:function(){return _renderPass.default}}),Object.defineProperty(exports,"_CopyPass",{enumerable:!0,get:function(){return _copyPass.default}}),Object.defineProperty(exports,"_TexturePass",{enumerable:!0,get:function(){return _texturePass.default}}),Object.defineProperty(exports,"_ShaderModulePass",{enumerable:!0,get:function(){return _shaderModulePass.default}}),Object.defineProperty(exports,"ConeGeometry",{enumerable:!0,get:function(){return _coneGeometry.default}}),Object.defineProperty(exports,"CubeGeometry",{enumerable:!0,get:function(){return _cubeGeometry.default}}),Object.defineProperty(exports,"CylinderGeometry",{enumerable:!0,get:function(){return _cylinderGeometry.default}}),Object.defineProperty(exports,"IcoSphereGeometry",{enumerable:!0,get:function(){return _icoSphereGeometry.default}}),Object.defineProperty(exports,"PlaneGeometry",{enumerable:!0,get:function(){return _planeGeometry.default}}),Object.defineProperty(exports,"SphereGeometry",{enumerable:!0,get:function(){return _sphereGeometry.default}}),Object.defineProperty(exports,"TruncatedConeGeometry",{enumerable:!0,get:function(){return _truncatedConeGeometry.default}}),Object.defineProperty(exports,"PhongMaterial",{enumerable:!0,get:function(){return _phongMaterial.default}}),Object.defineProperty(exports,"PBRMaterial",{enumerable:!0,get:function(){return _pbrMaterial.default}}),Object.defineProperty(exports,"ScenegraphNode",{enumerable:!0,get:function(){return _scenegraphNode.default}}),Object.defineProperty(exports,"GroupNode",{enumerable:!0,get:function(){return _groupNode.default}}),Object.defineProperty(exports,"ModelNode",{enumerable:!0,get:function(){return _modelNode.default}}),Object.defineProperty(exports,"CameraNode",{enumerable:!0,get:function(){return _cameraNode.default}}),Object.defineProperty(exports,"registerShaderModules",{enumerable:!0,get:function(){return _shadertools.registerShaderModules}}),Object.defineProperty(exports,"setDefaultShaderModules",{enumerable:!0,get:function(){return _shadertools.setDefaultShaderModules}}),Object.defineProperty(exports,"assembleShaders",{enumerable:!0,get:function(){return _shadertools.assembleShaders}}),Object.defineProperty(exports,"combineInjects",{enumerable:!0,get:function(){return _shadertools.combineInjects}}),Object.defineProperty(exports,"normalizeShaderModule",{enumerable:!0,get:function(){return _shadertools.normalizeShaderModule}}),Object.defineProperty(exports,"fp32",{enumerable:!0,get:function(){return _shadertools.fp32}}),Object.defineProperty(exports,"fp64",{enumerable:!0,get:function(){return _shadertools.fp64}}),Object.defineProperty(exports,"project",{enumerable:!0,get:function(){return _shadertools.project}}),Object.defineProperty(exports,"lights",{enumerable:!0,get:function(){return _shadertools.lights}}),Object.defineProperty(exports,"dirlight",{enumerable:!0,get:function(){return _shadertools.dirlight}}),Object.defineProperty(exports,"picking",{enumerable:!0,get:function(){return _shadertools.picking}}),Object.defineProperty(exports,"diffuse",{enumerable:!0,get:function(){return _shadertools.diffuse}}),Object.defineProperty(exports,"gouraudlighting",{enumerable:!0,get:function(){return _shadertools.gouraudlighting}}),Object.defineProperty(exports,"phonglighting",{enumerable:!0,get:function(){return _shadertools.phonglighting}}),Object.defineProperty(exports,"pbr",{enumerable:!0,get:function(){return _shadertools.pbr}}),Object.defineProperty(exports,"_transform",{enumerable:!0,get:function(){return _shadertools._transform}}),Object.defineProperty(exports,"MODULAR_SHADERS",{enumerable:!0,get:function(){return _shadertools.MODULAR_SHADERS}}),Object.defineProperty(exports,"getQualifierDetails",{enumerable:!0,get:function(){return _shadertools.getQualifierDetails}}),Object.defineProperty(exports,"getPassthroughFS",{enumerable:!0,get:function(){return _shadertools.getPassthroughFS}}),Object.defineProperty(exports,"typeToChannelSuffix",{enumerable:!0,get:function(){return _shadertools.typeToChannelSuffix}}),Object.defineProperty(exports,"typeToChannelCount",{enumerable:!0,get:function(){return _shadertools.typeToChannelCount}}),Object.defineProperty(exports,"convertToVec4",{enumerable:!0,get:function(){return _shadertools.convertToVec4}});var _webgl=__webpack_require__(42),_webglStateTracker=__webpack_require__(130),_geometry=_interopRequireDefault(__webpack_require__(68)),_material=_interopRequireDefault(__webpack_require__(196)),_lightSource=__webpack_require__(660),_animationLoop=_interopRequireDefault(__webpack_require__(666)),_pickingColors=__webpack_require__(667),_model=_interopRequireDefault(__webpack_require__(136)),_transform2=_interopRequireDefault(__webpack_require__(701)),_clipSpace=_interopRequireDefault(__webpack_require__(137)),_shaderCache=_interopRequireDefault(__webpack_require__(703)),_animationLoopProxy=_interopRequireDefault(__webpack_require__(704)),_multiPassRenderer=_interopRequireDefault(__webpack_require__(705)),_renderState=_interopRequireDefault(__webpack_require__(328)),_pass=_interopRequireDefault(__webpack_require__(71)),_compositePass=_interopRequireDefault(__webpack_require__(202)),_clearPass=_interopRequireDefault(__webpack_require__(706)),_renderPass=_interopRequireDefault(__webpack_require__(707)),_copyPass=_interopRequireDefault(__webpack_require__(708)),_texturePass=_interopRequireDefault(__webpack_require__(709)),_shaderModulePass=_interopRequireDefault(__webpack_require__(710)),_coneGeometry=_interopRequireDefault(__webpack_require__(711)),_cubeGeometry=_interopRequireDefault(__webpack_require__(712)),_cylinderGeometry=_interopRequireDefault(__webpack_require__(713)),_icoSphereGeometry=_interopRequireDefault(__webpack_require__(714)),_planeGeometry=_interopRequireDefault(__webpack_require__(715)),_sphereGeometry=_interopRequireDefault(__webpack_require__(717)),_truncatedConeGeometry=_interopRequireDefault(__webpack_require__(203)),_phongMaterial=_interopRequireDefault(__webpack_require__(718)),_pbrMaterial=_interopRequireDefault(__webpack_require__(719)),_scenegraphNode=_interopRequireDefault(__webpack_require__(138)),_groupNode=_interopRequireDefault(__webpack_require__(720)),_modelNode=_interopRequireDefault(__webpack_require__(721)),_cameraNode=_interopRequireDefault(__webpack_require__(722)),_shadertools=__webpack_require__(110)},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(541)},function(module,exports){module.exports=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"assert",{enumerable:!0,get:function(){return _assert.default}}),Object.defineProperty(exports,"log",{enumerable:!0,get:function(){return _log.default}}),Object.defineProperty(exports,"isBrowser",{enumerable:!0,get:function(){return _isBrowser.default}}),Object.defineProperty(exports,"isOldIE",{enumerable:!0,get:function(){return _isOldIe.default}}),Object.defineProperty(exports,"uid",{enumerable:!0,get:function(){return _utils.uid}}),Object.defineProperty(exports,"isPowerOfTwo",{enumerable:!0,get:function(){return _utils.isPowerOfTwo}}),Object.defineProperty(exports,"isObjectEmpty",{enumerable:!0,get:function(){return _utils.isObjectEmpty}}),Object.defineProperty(exports,"formatValue",{enumerable:!0,get:function(){return _formatValue.formatValue}}),Object.defineProperty(exports,"stubRemovedMethods",{enumerable:!0,get:function(){return _stubMethods.stubRemovedMethods}}),Object.defineProperty(exports,"checkProps",{enumerable:!0,get:function(){return _checkProps.checkProps}});var _assert=_interopRequireDefault(__webpack_require__(190)),_log=_interopRequireDefault(__webpack_require__(105)),_isBrowser=_interopRequireDefault(__webpack_require__(129)),_isOldIe=_interopRequireDefault(__webpack_require__(636)),_utils=__webpack_require__(297),_formatValue=__webpack_require__(637),_stubMethods=__webpack_require__(638),_checkProps=__webpack_require__(639)},function(module,exports,__webpack_require__){var arrayWithHoles=__webpack_require__(628),iterableToArrayLimit=__webpack_require__(629),nonIterableRest=__webpack_require__(630);module.exports=function(arr,i){return arrayWithHoles(arr)||iterableToArrayLimit(arr,i)||nonIterableRest()}},function(module,exports){module.exports=function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}},function(module,exports,__webpack_require__){var $export=__webpack_require__(18);$export($export.S+$export.F*!__webpack_require__(31),"Object",{defineProperty:__webpack_require__(34).f})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Image",{enumerable:!0,get:function(){return _webglTypes.Image}}),Object.defineProperty(exports,"WebGLRenderingContext",{enumerable:!0,get:function(){return _webglTypes.WebGLRenderingContext}}),Object.defineProperty(exports,"WebGL2RenderingContext",{enumerable:!0,get:function(){return _webglTypes.WebGL2RenderingContext}}),Object.defineProperty(exports,"WebGLProgram",{enumerable:!0,get:function(){return _webglTypes.WebGLProgram}}),Object.defineProperty(exports,"WebGLShader",{enumerable:!0,get:function(){return _webglTypes.WebGLShader}}),Object.defineProperty(exports,"WebGLBuffer",{enumerable:!0,get:function(){return _webglTypes.WebGLBuffer}}),Object.defineProperty(exports,"WebGLFramebuffer",{enumerable:!0,get:function(){return _webglTypes.WebGLFramebuffer}}),Object.defineProperty(exports,"WebGLRenderbuffer",{enumerable:!0,get:function(){return _webglTypes.WebGLRenderbuffer}}),Object.defineProperty(exports,"WebGLTexture",{enumerable:!0,get:function(){return _webglTypes.WebGLTexture}}),Object.defineProperty(exports,"WebGLUniformLocation",{enumerable:!0,get:function(){return _webglTypes.WebGLUniformLocation}}),Object.defineProperty(exports,"WebGLActiveInfo",{enumerable:!0,get:function(){return _webglTypes.WebGLActiveInfo}}),Object.defineProperty(exports,"WebGLShaderPrecisionFormat",{enumerable:!0,get:function(){return _webglTypes.WebGLShaderPrecisionFormat}}),Object.defineProperty(exports,"webGLTypesAvailable",{enumerable:!0,get:function(){return _webglTypes.webGLTypesAvailable}}),Object.defineProperty(exports,"isWebGL",{enumerable:!0,get:function(){return _webglChecks.isWebGL}}),Object.defineProperty(exports,"isWebGL2",{enumerable:!0,get:function(){return _webglChecks.isWebGL2}}),Object.defineProperty(exports,"assertWebGLContext",{enumerable:!0,get:function(){return _webglChecks.assertWebGLContext}}),Object.defineProperty(exports,"assertWebGL2Context",{enumerable:!0,get:function(){return _webglChecks.assertWebGL2Context}}),Object.defineProperty(exports,"requestAnimationFrame",{enumerable:!0,get:function(){return _requestAnimationFrame.requestAnimationFrame}}),Object.defineProperty(exports,"cancelAnimationFrame",{enumerable:!0,get:function(){return _requestAnimationFrame.cancelAnimationFrame}}),Object.defineProperty(exports,"getGLTypeFromTypedArray",{enumerable:!0,get:function(){return _typedArrayUtils.getGLTypeFromTypedArray}}),Object.defineProperty(exports,"getTypedArrayFromGLType",{enumerable:!0,get:function(){return _typedArrayUtils.getTypedArrayFromGLType}}),Object.defineProperty(exports,"flipRows",{enumerable:!0,get:function(){return _typedArrayUtils.flipRows}}),Object.defineProperty(exports,"scalePixels",{enumerable:!0,get:function(){return _typedArrayUtils.scalePixels}}),Object.defineProperty(exports,"getKeyValue",{enumerable:!0,get:function(){return _constantsToKeys.getKeyValue}}),Object.defineProperty(exports,"getKey",{enumerable:!0,get:function(){return _constantsToKeys.getKey}}),Object.defineProperty(exports,"getKeyType",{enumerable:!0,get:function(){return _constantsToKeys.getKeyType}}),Object.defineProperty(exports,"cloneTextureFrom",{enumerable:!0,get:function(){return _textureUtils.cloneTextureFrom}});var _webglTypes=__webpack_require__(188),_webglChecks=__webpack_require__(298),_requestAnimationFrame=__webpack_require__(299),_typedArrayUtils=__webpack_require__(300),_constantsToKeys=__webpack_require__(301),_textureUtils=__webpack_require__(192)},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"COORDINATE_SYSTEM",{enumerable:!0,get:function(){return _constants.COORDINATE_SYSTEM}}),Object.defineProperty(exports,"LightingEffect",{enumerable:!0,get:function(){return _lightingEffect.default}}),Object.defineProperty(exports,"PointLight",{enumerable:!0,get:function(){return _pointLight.default}}),Object.defineProperty(exports,"DirectionalLight",{enumerable:!0,get:function(){return _directionalLight.default}}),Object.defineProperty(exports,"_CameraLight",{enumerable:!0,get:function(){return _cameraLight.default}}),Object.defineProperty(exports,"_SunLight",{enumerable:!0,get:function(){return _sunLight.default}}),Object.defineProperty(exports,"Deck",{enumerable:!0,get:function(){return _deck.default}}),Object.defineProperty(exports,"LayerManager",{enumerable:!0,get:function(){return _layerManager.default}}),Object.defineProperty(exports,"AttributeManager",{enumerable:!0,get:function(){return _attributeManager.default}}),Object.defineProperty(exports,"Layer",{enumerable:!0,get:function(){return _layer.default}}),Object.defineProperty(exports,"CompositeLayer",{enumerable:!0,get:function(){return _compositeLayer.default}}),Object.defineProperty(exports,"DeckRenderer",{enumerable:!0,get:function(){return _deckRenderer.default}}),Object.defineProperty(exports,"Viewport",{enumerable:!0,get:function(){return _viewport.default}}),Object.defineProperty(exports,"WebMercatorViewport",{enumerable:!0,get:function(){return _webMercatorViewport.default}}),Object.defineProperty(exports,"project",{enumerable:!0,get:function(){return _project.default}}),Object.defineProperty(exports,"project64",{enumerable:!0,get:function(){return _project2.default}}),Object.defineProperty(exports,"View",{enumerable:!0,get:function(){return _view.default}}),Object.defineProperty(exports,"MapView",{enumerable:!0,get:function(){return _mapView.default}}),Object.defineProperty(exports,"FirstPersonView",{enumerable:!0,get:function(){return _firstPersonView.default}}),Object.defineProperty(exports,"ThirdPersonView",{enumerable:!0,get:function(){return _thirdPersonView.default}}),Object.defineProperty(exports,"OrbitView",{enumerable:!0,get:function(){return _orbitView.default}}),Object.defineProperty(exports,"PerspectiveView",{enumerable:!0,get:function(){return _perspectiveView.default}}),Object.defineProperty(exports,"OrthographicView",{enumerable:!0,get:function(){return _orthographicView.default}}),Object.defineProperty(exports,"Controller",{enumerable:!0,get:function(){return _controller.default}}),Object.defineProperty(exports,"MapController",{enumerable:!0,get:function(){return _mapController.default}}),Object.defineProperty(exports,"_FirstPersonController",{enumerable:!0,get:function(){return _firstPersonController.default}}),Object.defineProperty(exports,"_OrbitController",{enumerable:!0,get:function(){return _orbitController.default}}),Object.defineProperty(exports,"_OrthographicController",{enumerable:!0,get:function(){return _orthographicController.default}}),Object.defineProperty(exports,"Effect",{enumerable:!0,get:function(){return _effect.default}}),Object.defineProperty(exports,"TRANSITION_EVENTS",{enumerable:!0,get:function(){return _transitionManager.TRANSITION_EVENTS}}),Object.defineProperty(exports,"LinearInterpolator",{enumerable:!0,get:function(){return _linearInterpolator.default}}),Object.defineProperty(exports,"FlyToInterpolator",{enumerable:!0,get:function(){return _viewportFlyToInterpolator.default}}),Object.defineProperty(exports,"log",{enumerable:!0,get:function(){return _log.default}}),Object.defineProperty(exports,"createIterable",{enumerable:!0,get:function(){return _iterableUtils.createIterable}}),Object.defineProperty(exports,"AmbientLight",{enumerable:!0,get:function(){return _core.AmbientLight}}),exports.experimental=void 0,__webpack_require__(284),__webpack_require__(619);var _constants=__webpack_require__(91),_lightingEffect=_interopRequireDefault(__webpack_require__(331)),_pointLight=_interopRequireDefault(__webpack_require__(333)),_directionalLight=_interopRequireDefault(__webpack_require__(332)),_cameraLight=_interopRequireDefault(__webpack_require__(739)),_sunLight=_interopRequireDefault(__webpack_require__(740)),_deck=_interopRequireDefault(__webpack_require__(744)),_layerManager=_interopRequireDefault(__webpack_require__(211)),_attributeManager=_interopRequireDefault(__webpack_require__(208)),_layer=_interopRequireDefault(__webpack_require__(142)),_compositeLayer=_interopRequireDefault(__webpack_require__(343)),_deckRenderer=_interopRequireDefault(__webpack_require__(348)),_viewport=_interopRequireDefault(__webpack_require__(47)),_webMercatorViewport=_interopRequireDefault(__webpack_require__(345)),_project=_interopRequireDefault(__webpack_require__(139)),_project2=_interopRequireDefault(__webpack_require__(330)),_view=_interopRequireDefault(__webpack_require__(62)),_mapView=_interopRequireDefault(__webpack_require__(344)),_firstPersonView=_interopRequireDefault(__webpack_require__(764)),_thirdPersonView=_interopRequireDefault(__webpack_require__(765)),_orbitView=_interopRequireDefault(__webpack_require__(766)),_perspectiveView=_interopRequireDefault(__webpack_require__(767)),_orthographicView=_interopRequireDefault(__webpack_require__(768)),_controller=_interopRequireDefault(__webpack_require__(113)),_mapController=_interopRequireDefault(__webpack_require__(346)),_firstPersonController=_interopRequireDefault(__webpack_require__(354)),_orbitController=_interopRequireDefault(__webpack_require__(214)),_orthographicController=_interopRequireDefault(__webpack_require__(355)),_effect=_interopRequireDefault(__webpack_require__(206)),_transitionManager=__webpack_require__(114),_linearInterpolator=_interopRequireDefault(__webpack_require__(115)),_viewportFlyToInterpolator=_interopRequireDefault(__webpack_require__(769)),_log=_interopRequireDefault(__webpack_require__(24)),_flatten=__webpack_require__(112),_iterableUtils=__webpack_require__(209),_tesselator=_interopRequireDefault(__webpack_require__(770)),_count=__webpack_require__(340),_memoize=_interopRequireDefault(__webpack_require__(205)),_core=__webpack_require__(7),experimental={Tesselator:_tesselator.default,flattenVertices:_flatten.flattenVertices,fillArray:_flatten.fillArray,count:_count.count,memoize:_memoize.default};exports.experimental=experimental},function(module,exports,__webpack_require__){__webpack_require__(3);var superPropBase=__webpack_require__(650);function _get(target,property,receiver){return"undefined"!=typeof Reflect&&Reflect.get?module.exports=_get=Reflect.get:module.exports=_get=function(target,property,receiver){var base=superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(receiver):desc.value}},_get(target,property,receiver||target)}module.exports=_get},function(module,exports){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){"object"==typeof window&&(g=window)}module.exports=g},function(module,exports,__webpack_require__){var global=__webpack_require__(26),core=__webpack_require__(55),hide=__webpack_require__(56),redefine=__webpack_require__(39),ctx=__webpack_require__(57),$export=function(type,name,source){var key,own,out,exp,IS_FORCED=type&$export.F,IS_GLOBAL=type&$export.G,IS_STATIC=type&$export.S,IS_PROTO=type&$export.P,IS_BIND=type&$export.B,target=IS_GLOBAL?global:IS_STATIC?global[name]||(global[name]={}):(global[name]||{}).prototype,exports=IS_GLOBAL?core:core[name]||(core[name]={}),expProto=exports.prototype||(exports.prototype={});for(key in IS_GLOBAL&&(source=name),source)out=((own=!IS_FORCED&&target&&void 0!==target[key])?target:source)[key],exp=IS_BIND&&own?ctx(out,global):IS_PROTO&&"function"==typeof out?ctx(Function.call,out):out,target&&redefine(target,key,out,type&$export.U),exports[key]!=out&&hide(exports,key,exp),IS_PROTO&&expProto[key]!=out&&(expProto[key]=out)};global.core=core,$export.F=1,$export.G=2,$export.S=4,$export.P=8,$export.B=16,$export.W=32,$export.U=64,$export.R=128,module.exports=$export},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"assert",{enumerable:!0,get:function(){return _webgl.assert}}),Object.defineProperty(exports,"log",{enumerable:!0,get:function(){return _webgl.log}}),Object.defineProperty(exports,"uid",{enumerable:!0,get:function(){return _webgl.uid}}),Object.defineProperty(exports,"isObjectEmpty",{enumerable:!0,get:function(){return _webgl.isObjectEmpty}}),Object.defineProperty(exports,"self",{enumerable:!0,get:function(){return _webgl.self}}),Object.defineProperty(exports,"window",{enumerable:!0,get:function(){return _webgl.window}}),Object.defineProperty(exports,"global",{enumerable:!0,get:function(){return _webgl.global}}),Object.defineProperty(exports,"document",{enumerable:!0,get:function(){return _webgl.document}});var _webgl=__webpack_require__(42)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(condition,message){if(!condition)throw new Error(message||"deck.gl: assertion failed.")}},function(module,exports){module.exports=function(obj){return obj&&obj.__esModule?obj:{default:obj}}},function(module,exports,__webpack_require__){var store=__webpack_require__(157)("wks"),uid=__webpack_require__(95),Symbol=__webpack_require__(26).Symbol,USE_SYMBOL="function"==typeof Symbol;(module.exports=function(name){return store[name]||(store[name]=USE_SYMBOL&&Symbol[name]||(USE_SYMBOL?Symbol:uid)("Symbol."+name))}).store=store},function(module,exports,__webpack_require__){"use strict";var keys=__webpack_require__(151),hasSymbols="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),toStr=Object.prototype.toString,concat=Array.prototype.concat,origDefineProperty=Object.defineProperty,supportsDescriptors=origDefineProperty&&function(){var obj={};try{for(var _ in origDefineProperty(obj,"x",{enumerable:!1,value:obj}),obj)return!1;return obj.x===obj}catch(e){return!1}}(),defineProperty=function(object,name,value,predicate){var fn;name in object&&("function"!=typeof(fn=predicate)||"[object Function]"!==toStr.call(fn)||!predicate())||(supportsDescriptors?origDefineProperty(object,name,{configurable:!0,enumerable:!1,value:value,writable:!0}):object[name]=value)},defineProperties=function(object,map){var predicates=arguments.length>2?arguments[2]:{},props=keys(map);hasSymbols&&(props=concat.call(props,Object.getOwnPropertySymbols(map)));for(var i=0;i<props.length;i+=1)defineProperty(object,props[i],map[props[i]],predicates[props[i]])};defineProperties.supportsDescriptors=!!supportsDescriptors,module.exports=defineProperties},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default=new(__webpack_require__(85).Log)({id:"deck"}).enable();exports.default=_default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Vector2",{enumerable:!0,get:function(){return _vector.default}}),Object.defineProperty(exports,"Vector3",{enumerable:!0,get:function(){return _vector2.default}}),Object.defineProperty(exports,"Vector4",{enumerable:!0,get:function(){return _vector3.default}}),Object.defineProperty(exports,"Matrix3",{enumerable:!0,get:function(){return _matrix.default}}),Object.defineProperty(exports,"Matrix4",{enumerable:!0,get:function(){return _matrix2.default}}),Object.defineProperty(exports,"Quaternion",{enumerable:!0,get:function(){return _quaternion.default}}),Object.defineProperty(exports,"config",{enumerable:!0,get:function(){return _common.config}}),Object.defineProperty(exports,"checkNumber",{enumerable:!0,get:function(){return _common.checkNumber}}),Object.defineProperty(exports,"configure",{enumerable:!0,get:function(){return _common.configure}}),Object.defineProperty(exports,"formatValue",{enumerable:!0,get:function(){return _common.formatValue}}),Object.defineProperty(exports,"isArray",{enumerable:!0,get:function(){return _common.isArray}}),Object.defineProperty(exports,"clone",{enumerable:!0,get:function(){return _common.clone}}),Object.defineProperty(exports,"radians",{enumerable:!0,get:function(){return _common.radians}}),Object.defineProperty(exports,"degrees",{enumerable:!0,get:function(){return _common.degrees}}),Object.defineProperty(exports,"sin",{enumerable:!0,get:function(){return _common.sin}}),Object.defineProperty(exports,"cos",{enumerable:!0,get:function(){return _common.cos}}),Object.defineProperty(exports,"tan",{enumerable:!0,get:function(){return _common.tan}}),Object.defineProperty(exports,"asin",{enumerable:!0,get:function(){return _common.asin}}),Object.defineProperty(exports,"acos",{enumerable:!0,get:function(){return _common.acos}}),Object.defineProperty(exports,"atan",{enumerable:!0,get:function(){return _common.atan}}),Object.defineProperty(exports,"clamp",{enumerable:!0,get:function(){return _common.clamp}}),Object.defineProperty(exports,"lerp",{enumerable:!0,get:function(){return _common.lerp}}),Object.defineProperty(exports,"equals",{enumerable:!0,get:function(){return _common.equals}}),Object.defineProperty(exports,"_SphericalCoordinates",{enumerable:!0,get:function(){return _sphericalCoordinates.default}}),Object.defineProperty(exports,"_Pose",{enumerable:!0,get:function(){return _pose.default}}),Object.defineProperty(exports,"_Euler",{enumerable:!0,get:function(){return _euler.default}}),Object.defineProperty(exports,"_Polygon",{enumerable:!0,get:function(){return _polygon.default}});var _vector=_interopRequireDefault(__webpack_require__(197)),_vector2=_interopRequireDefault(__webpack_require__(88)),_vector3=_interopRequireDefault(__webpack_require__(318)),_matrix=_interopRequireDefault(__webpack_require__(661)),_matrix2=_interopRequireDefault(__webpack_require__(199)),_quaternion=_interopRequireDefault(__webpack_require__(321)),_common=__webpack_require__(43),_sphericalCoordinates=_interopRequireDefault(__webpack_require__(663)),_pose=_interopRequireDefault(__webpack_require__(664)),_euler=_interopRequireDefault(__webpack_require__(322)),_polygon=_interopRequireDefault(__webpack_require__(665))},function(module,exports){var global=module.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=global)},function(module,exports){function _typeof2(obj){return(_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _typeof(obj){return"function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?module.exports=_typeof=function(obj){return _typeof2(obj)}:module.exports=_typeof=function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)},_typeof(obj)}module.exports=_typeof},function(module,exports){module.exports=function(it){return"object"==typeof it?null!==it:"function"==typeof it}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var obj,_TemplateTag=__webpack_require__(547),_TemplateTag2=(obj=_TemplateTag)&&obj.__esModule?obj:{default:obj};exports.default=_TemplateTag2.default,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var obj,_trimResultTransformer=__webpack_require__(548),_trimResultTransformer2=(obj=_trimResultTransformer)&&obj.__esModule?obj:{default:obj};exports.default=_trimResultTransformer2.default,module.exports=exports.default},function(module,exports,__webpack_require__){module.exports=!__webpack_require__(33)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(module,exports,__webpack_require__){module.exports=__webpack_require__(869)()},function(module,exports){module.exports=function(exec){try{return!!exec()}catch(e){return!0}}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(35),IE8_DOM_DEFINE=__webpack_require__(246),toPrimitive=__webpack_require__(120),dP=Object.defineProperty;exports.f=__webpack_require__(31)?Object.defineProperty:function(O,P,Attributes){if(anObject(O),P=toPrimitive(P,!0),anObject(Attributes),IE8_DOM_DEFINE)try{return dP(O,P,Attributes)}catch(e){}if("get"in Attributes||"set"in Attributes)throw TypeError("Accessors not supported!");return"value"in Attributes&&(O[P]=Attributes.value),O}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(28);module.exports=function(it){if(!isObject(it))throw TypeError(it+" is not an object!");return it}},function(module,exports,__webpack_require__){var defineProperty=__webpack_require__(6);module.exports=function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){defineProperty(target,key,source[key])})}return target}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return _webMercatorViewport.default}}),Object.defineProperty(exports,"WebMercatorViewport",{enumerable:!0,get:function(){return _webMercatorViewport.default}}),Object.defineProperty(exports,"PerspectiveMercatorViewport",{enumerable:!0,get:function(){return _webMercatorViewport.default}}),Object.defineProperty(exports,"fitBounds",{enumerable:!0,get:function(){return _fitBounds.default}}),Object.defineProperty(exports,"normalizeViewportProps",{enumerable:!0,get:function(){return _normalizeViewportProps.default}}),Object.defineProperty(exports,"flyToViewport",{enumerable:!0,get:function(){return _flyToViewport.default}}),Object.defineProperty(exports,"lngLatToWorld",{enumerable:!0,get:function(){return _webMercatorUtils.lngLatToWorld}}),Object.defineProperty(exports,"worldToLngLat",{enumerable:!0,get:function(){return _webMercatorUtils.worldToLngLat}}),Object.defineProperty(exports,"worldToPixels",{enumerable:!0,get:function(){return _webMercatorUtils.worldToPixels}}),Object.defineProperty(exports,"pixelsToWorld",{enumerable:!0,get:function(){return _webMercatorUtils.pixelsToWorld}}),Object.defineProperty(exports,"getMeterZoom",{enumerable:!0,get:function(){return _webMercatorUtils.getMeterZoom}}),Object.defineProperty(exports,"getDistanceScales",{enumerable:!0,get:function(){return _webMercatorUtils.getDistanceScales}}),Object.defineProperty(exports,"addMetersToLngLat",{enumerable:!0,get:function(){return _webMercatorUtils.addMetersToLngLat}}),Object.defineProperty(exports,"getViewMatrix",{enumerable:!0,get:function(){return _webMercatorUtils.getViewMatrix}}),Object.defineProperty(exports,"getProjectionMatrix",{enumerable:!0,get:function(){return _webMercatorUtils.getProjectionMatrix}}),Object.defineProperty(exports,"getProjectionParameters",{enumerable:!0,get:function(){return _webMercatorUtils.getProjectionParameters}}),Object.defineProperty(exports,"getUncenteredViewMatrix",{enumerable:!0,get:function(){return _webMercatorUtils.getViewMatrix}}),Object.defineProperty(exports,"projectFlat",{enumerable:!0,get:function(){return _webMercatorUtils.lngLatToWorld}}),Object.defineProperty(exports,"unprojectFlat",{enumerable:!0,get:function(){return _webMercatorUtils.worldToLngLat}});var _webMercatorViewport=_interopRequireDefault(__webpack_require__(207)),_fitBounds=_interopRequireDefault(__webpack_require__(336)),_normalizeViewportProps=_interopRequireDefault(__webpack_require__(727)),_flyToViewport=_interopRequireDefault(__webpack_require__(728)),_webMercatorUtils=__webpack_require__(141)},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(413);module.exports=Function.prototype.bind||implementation},function(module,exports,__webpack_require__){var global=__webpack_require__(26),hide=__webpack_require__(56),has=__webpack_require__(54),SRC=__webpack_require__(95)("src"),$toString=Function.toString,TPL=(""+$toString).split("toString");__webpack_require__(55).inspectSource=function(it){return $toString.call(it)},(module.exports=function(O,key,val,safe){var isFunction="function"==typeof val;isFunction&&(has(val,"name")||hide(val,"name",key)),O[key]!==val&&(isFunction&&(has(val,SRC)||hide(val,SRC,O[key]?""+O[key]:TPL.join(String(key)))),O===global?O[key]=val:safe?O[key]?O[key]=val:hide(O,key,val):(delete O[key],hide(O,key,val)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[SRC]||$toString.call(this)})},function(module,exports,__webpack_require__){for(var $iterators=__webpack_require__(46),getKeys=__webpack_require__(79),redefine=__webpack_require__(39),global=__webpack_require__(26),hide=__webpack_require__(56),Iterators=__webpack_require__(100),wks=__webpack_require__(22),ITERATOR=wks("iterator"),TO_STRING_TAG=wks("toStringTag"),ArrayValues=Iterators.Array,DOMIterables={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},collections=getKeys(DOMIterables),i=0;i<collections.length;i++){var key,NAME=collections[i],explicit=DOMIterables[NAME],Collection=global[NAME],proto=Collection&&Collection.prototype;if(proto&&(proto[ITERATOR]||hide(proto,ITERATOR,ArrayValues),proto[TO_STRING_TAG]||hide(proto,TO_STRING_TAG,NAME),Iterators[NAME]=ArrayValues,explicit))for(key in $iterators)proto[key]||redefine(proto,key,$iterators[key],!0)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var obj,_inlineArrayTransformer=__webpack_require__(554),_inlineArrayTransformer2=(obj=_inlineArrayTransformer)&&obj.__esModule?obj:{default:obj};exports.default=_inlineArrayTransformer2.default,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"lumaStats",{enumerable:!0,get:function(){return _init.lumaStats}}),Object.defineProperty(exports,"resetParameters",{enumerable:!0,get:function(){return _webglStateTracker.resetParameters}}),Object.defineProperty(exports,"getParameter",{enumerable:!0,get:function(){return _webglStateTracker.getParameter}}),Object.defineProperty(exports,"getParameters",{enumerable:!0,get:function(){return _webglStateTracker.getParameters}}),Object.defineProperty(exports,"setParameter",{enumerable:!0,get:function(){return _webglStateTracker.setParameter}}),Object.defineProperty(exports,"setParameters",{enumerable:!0,get:function(){return _webglStateTracker.setParameters}}),Object.defineProperty(exports,"withParameters",{enumerable:!0,get:function(){return _webglStateTracker.withParameters}}),Object.defineProperty(exports,"getModifiedParameters",{enumerable:!0,get:function(){return _webglStateTracker.getModifiedParameters}}),Object.defineProperty(exports,"Image",{enumerable:!0,get:function(){return _webglTypes.Image}}),Object.defineProperty(exports,"WebGLRenderingContext",{enumerable:!0,get:function(){return _webglTypes.WebGLRenderingContext}}),Object.defineProperty(exports,"WebGLProgram",{enumerable:!0,get:function(){return _webglTypes.WebGLProgram}}),Object.defineProperty(exports,"WebGLShader",{enumerable:!0,get:function(){return _webglTypes.WebGLShader}}),Object.defineProperty(exports,"WebGLBuffer",{enumerable:!0,get:function(){return _webglTypes.WebGLBuffer}}),Object.defineProperty(exports,"WebGLFramebuffer",{enumerable:!0,get:function(){return _webglTypes.WebGLFramebuffer}}),Object.defineProperty(exports,"WebGLRenderbuffer",{enumerable:!0,get:function(){return _webglTypes.WebGLRenderbuffer}}),Object.defineProperty(exports,"WebGLTexture",{enumerable:!0,get:function(){return _webglTypes.WebGLTexture}}),Object.defineProperty(exports,"WebGLUniformLocation",{enumerable:!0,get:function(){return _webglTypes.WebGLUniformLocation}}),Object.defineProperty(exports,"WebGLActiveInfo",{enumerable:!0,get:function(){return _webglTypes.WebGLActiveInfo}}),Object.defineProperty(exports,"WebGLShaderPrecisionFormat",{enumerable:!0,get:function(){return _webglTypes.WebGLShaderPrecisionFormat}}),Object.defineProperty(exports,"WebGL2RenderingContext",{enumerable:!0,get:function(){return _webglTypes.WebGL2RenderingContext}}),Object.defineProperty(exports,"webGLTypesAvailable",{enumerable:!0,get:function(){return _webglTypes.webGLTypesAvailable}}),Object.defineProperty(exports,"createGLContext",{enumerable:!0,get:function(){return _context.createGLContext}}),Object.defineProperty(exports,"destroyGLContext",{enumerable:!0,get:function(){return _context.destroyGLContext}}),Object.defineProperty(exports,"resizeGLContext",{enumerable:!0,get:function(){return _context.resizeGLContext}}),Object.defineProperty(exports,"instrumentGLContext",{enumerable:!0,get:function(){return _context.instrumentGLContext}}),Object.defineProperty(exports,"setGLContextDefaults",{enumerable:!0,get:function(){return _context.setGLContextDefaults}}),Object.defineProperty(exports,"getCanvas",{enumerable:!0,get:function(){return _createCanvas.getCanvas}}),Object.defineProperty(exports,"getPageLoadPromise",{enumerable:!0,get:function(){return _createCanvas.getPageLoadPromise}}),Object.defineProperty(exports,"requestAnimationFrame",{enumerable:!0,get:function(){return _requestAnimationFrame.requestAnimationFrame}}),Object.defineProperty(exports,"cancelAnimationFrame",{enumerable:!0,get:function(){return _requestAnimationFrame.cancelAnimationFrame}}),Object.defineProperty(exports,"isWebGL",{enumerable:!0,get:function(){return _webglChecks.isWebGL}}),Object.defineProperty(exports,"isWebGL2",{enumerable:!0,get:function(){return _webglChecks.isWebGL2}}),Object.defineProperty(exports,"cloneTextureFrom",{enumerable:!0,get:function(){return _textureUtils.cloneTextureFrom}}),Object.defineProperty(exports,"getKeyValue",{enumerable:!0,get:function(){return _constantsToKeys.getKeyValue}}),Object.defineProperty(exports,"getKey",{enumerable:!0,get:function(){return _constantsToKeys.getKey}}),Object.defineProperty(exports,"getContextInfo",{enumerable:!0,get:function(){return _limits.getContextInfo}}),Object.defineProperty(exports,"getGLContextInfo",{enumerable:!0,get:function(){return _limits.getGLContextInfo}}),Object.defineProperty(exports,"getContextLimits",{enumerable:!0,get:function(){return _limits.getContextLimits}}),Object.defineProperty(exports,"getContextDebugInfo",{enumerable:!0,get:function(){return _getContextDebugInfo.getContextDebugInfo}}),Object.defineProperty(exports,"FEATURES",{enumerable:!0,get:function(){return _webglFeaturesTable.FEATURES}}),Object.defineProperty(exports,"hasFeature",{enumerable:!0,get:function(){return _features.hasFeature}}),Object.defineProperty(exports,"hasFeatures",{enumerable:!0,get:function(){return _features.hasFeatures}}),Object.defineProperty(exports,"getFeatures",{enumerable:!0,get:function(){return _features.getFeatures}}),Object.defineProperty(exports,"canCompileGLGSExtension",{enumerable:!0,get:function(){return _checkGlslExtension.default}}),Object.defineProperty(exports,"Accessor",{enumerable:!0,get:function(){return _accessor.default}}),Object.defineProperty(exports,"Buffer",{enumerable:!0,get:function(){return _buffer.default}}),Object.defineProperty(exports,"Shader",{enumerable:!0,get:function(){return _shader.Shader}}),Object.defineProperty(exports,"VertexShader",{enumerable:!0,get:function(){return _shader.VertexShader}}),Object.defineProperty(exports,"FragmentShader",{enumerable:!0,get:function(){return _shader.FragmentShader}}),Object.defineProperty(exports,"Program",{enumerable:!0,get:function(){return _program.default}}),Object.defineProperty(exports,"Framebuffer",{enumerable:!0,get:function(){return _framebuffer.default}}),Object.defineProperty(exports,"Renderbuffer",{enumerable:!0,get:function(){return _renderbuffer.default}}),Object.defineProperty(exports,"Texture2D",{enumerable:!0,get:function(){return _texture2d.default}}),Object.defineProperty(exports,"TextureCube",{enumerable:!0,get:function(){return _textureCube.default}}),Object.defineProperty(exports,"clear",{enumerable:!0,get:function(){return _clear.clear}}),Object.defineProperty(exports,"clearBuffer",{enumerable:!0,get:function(){return _clear.clearBuffer}}),Object.defineProperty(exports,"readPixelsToArray",{enumerable:!0,get:function(){return _copyAndBlit.readPixelsToArray}}),Object.defineProperty(exports,"readPixelsToBuffer",{enumerable:!0,get:function(){return _copyAndBlit.readPixelsToBuffer}}),Object.defineProperty(exports,"copyToDataUrl",{enumerable:!0,get:function(){return _copyAndBlit.copyToDataUrl}}),Object.defineProperty(exports,"copyToImage",{enumerable:!0,get:function(){return _copyAndBlit.copyToImage}}),Object.defineProperty(exports,"copyToTexture",{enumerable:!0,get:function(){return _copyAndBlit.copyToTexture}}),Object.defineProperty(exports,"blit",{enumerable:!0,get:function(){return _copyAndBlit.blit}}),Object.defineProperty(exports,"Query",{enumerable:!0,get:function(){return _query.default}}),Object.defineProperty(exports,"Texture3D",{enumerable:!0,get:function(){return _texture3d.default}}),Object.defineProperty(exports,"TransformFeedback",{enumerable:!0,get:function(){return _transformFeedback.default}}),Object.defineProperty(exports,"VertexArrayObject",{enumerable:!0,get:function(){return _vertexArrayObject.default}}),Object.defineProperty(exports,"VertexArray",{enumerable:!0,get:function(){return _vertexArray.default}}),Object.defineProperty(exports,"UniformBufferLayout",{enumerable:!0,get:function(){return _uniformBufferLayout.default}}),Object.defineProperty(exports,"setPathPrefix",{enumerable:!0,get:function(){return _loadFile.setPathPrefix}}),Object.defineProperty(exports,"loadFile",{enumerable:!0,get:function(){return _loadFile.loadFile}}),Object.defineProperty(exports,"loadImage",{enumerable:!0,get:function(){return _loadFile.loadImage}}),Object.defineProperty(exports,"getShaderName",{enumerable:!0,get:function(){return _getShaderName.default}}),Object.defineProperty(exports,"getShaderVersion",{enumerable:!0,get:function(){return _getShaderVersion.default}}),Object.defineProperty(exports,"log",{enumerable:!0,get:function(){return _log.default}}),Object.defineProperty(exports,"assert",{enumerable:!0,get:function(){return _assert.default}}),Object.defineProperty(exports,"uid",{enumerable:!0,get:function(){return _utils.uid}}),Object.defineProperty(exports,"isObjectEmpty",{enumerable:!0,get:function(){return _utils.isObjectEmpty}}),Object.defineProperty(exports,"self",{enumerable:!0,get:function(){return _globals.self}}),Object.defineProperty(exports,"window",{enumerable:!0,get:function(){return _globals.window}}),Object.defineProperty(exports,"global",{enumerable:!0,get:function(){return _globals.global}}),Object.defineProperty(exports,"document",{enumerable:!0,get:function(){return _globals.document}}),Object.defineProperty(exports,"isBrowser",{enumerable:!0,get:function(){return _isBrowser.default}}),Object.defineProperty(exports,"parseUniformName",{enumerable:!0,get:function(){return _uniforms.parseUniformName}}),Object.defineProperty(exports,"getUniformSetter",{enumerable:!0,get:function(){return _uniforms.getUniformSetter}}),Object.defineProperty(exports,"getDebugTableForUniforms",{enumerable:!0,get:function(){return _debugUniforms.getDebugTableForUniforms}}),Object.defineProperty(exports,"getDebugTableForVertexArray",{enumerable:!0,get:function(){return _debugVertexArray.getDebugTableForVertexArray}}),Object.defineProperty(exports,"getDebugTableForProgramConfiguration",{enumerable:!0,get:function(){return _debugProgramConfiguration.getDebugTableForProgramConfiguration}});var _init=__webpack_require__(290),_webglStateTracker=__webpack_require__(130),_webglTypes=__webpack_require__(188),_context=__webpack_require__(296),_createCanvas=__webpack_require__(189),_requestAnimationFrame=__webpack_require__(299),_webglChecks=__webpack_require__(298),_textureUtils=__webpack_require__(192),_constantsToKeys=__webpack_require__(301),_limits=__webpack_require__(310),_getContextDebugInfo=__webpack_require__(191),_webglFeaturesTable=__webpack_require__(135),_features=__webpack_require__(311),_checkGlslExtension=_interopRequireDefault(__webpack_require__(312)),_accessor=_interopRequireDefault(__webpack_require__(132)),_buffer=_interopRequireDefault(__webpack_require__(61)),_shader=__webpack_require__(313),_program=_interopRequireDefault(__webpack_require__(649)),_framebuffer=_interopRequireDefault(__webpack_require__(107)),_renderbuffer=_interopRequireDefault(__webpack_require__(194)),_texture2d=_interopRequireDefault(__webpack_require__(193)),_textureCube=_interopRequireDefault(__webpack_require__(305)),_clear=__webpack_require__(307),_copyAndBlit=__webpack_require__(308),_query=_interopRequireDefault(__webpack_require__(652)),_texture3d=_interopRequireDefault(__webpack_require__(306)),_transformFeedback=_interopRequireDefault(__webpack_require__(653)),_vertexArrayObject=_interopRequireDefault(__webpack_require__(317)),_vertexArray=_interopRequireDefault(__webpack_require__(655)),_uniformBufferLayout=_interopRequireDefault(__webpack_require__(656)),_loadFile=__webpack_require__(304),_getShaderName=_interopRequireDefault(__webpack_require__(195)),_getShaderVersion=_interopRequireDefault(__webpack_require__(315)),_log=_interopRequireDefault(__webpack_require__(105)),_assert=_interopRequireDefault(__webpack_require__(190)),_utils=__webpack_require__(297),_globals=__webpack_require__(104),_isBrowser=_interopRequireDefault(__webpack_require__(129)),_uniforms=__webpack_require__(316),_debugUniforms=__webpack_require__(657),_debugVertexArray=__webpack_require__(658),_debugProgramConfiguration=__webpack_require__(659)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.configure=function(options){"epsilon"in options&&(config.EPSILON=options.epsilon);"debug"in options&&(config.debug=options.debug)},exports.checkNumber=function(value){if(!Number.isFinite(value))throw new Error("Invalid number ".concat(value));return value},exports.formatValue=function(value){var _ref$precision=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).precision,precision=void 0===_ref$precision?config.precision||4:_ref$precision;return value=round(value),parseFloat(value.toPrecision(precision))},exports.formatAngle=function(value){var _ref2=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref2$precision=_ref2.precision,precision=void 0===_ref2$precision?config.precision||4:_ref2$precision,_ref2$printDegrees=_ref2.printDegrees,printDegrees=void 0===_ref2$printDegrees?config.printAngles:_ref2$printDegrees;return value=round(value=printDegrees?degrees(value):value),"".concat(parseFloat(value.toPrecision(precision))).concat(printDegrees?"°":"")},exports.isArray=isArray,exports.clone=clone,exports.radians=function(degrees){return map(degrees,function(degrees){return degrees/180*Math.PI})},exports.degrees=degrees,exports.sin=function(radians){return map(radians,function(angle){return Math.sin(angle)})},exports.cos=function(radians){return map(radians,function(angle){return Math.cos(angle)})},exports.tan=function(radians){return map(radians,function(angle){return Math.tan(angle)})},exports.asin=function(radians){return map(radians,function(angle){return Math.asin(angle)})},exports.acos=function(radians){return map(radians,function(angle){return Math.acos(angle)})},exports.atan=function(radians){return map(radians,function(angle){return Math.atan(angle)})},exports.clamp=function(value,min,max){return map(value,function(value){return Math.max(min,Math.min(max,value))})},exports.lerp=function lerp(a,b,t){if(isArray(a))return a.map(function(ai,i){return lerp(ai,b[i],t)});return t*b+(1-t)*a},exports.equals=function equals(a,b){if(isArray(a)&&isArray(b)){if(a===b)return!0;if(a.length!==b.length)return!1;for(var i=0;i<a.length;++i)if(!equals(a[i],b[i]))return!1;return!0}return Math.abs(a-b)<=config.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))},exports.config=void 0;var config={};function round(value){return Math.round(value/config.EPSILON)*config.EPSILON}function isArray(value){return Array.isArray(value)||ArrayBuffer.isView(value)&&void 0!==value.length}function clone(array){return array.clone?array.clone():new Array(array)}function map(value,func){if(isArray(value)){for(var result=clone(value),i=0;i<result.length;++i)result[i]=func(result[i],i,result);return result}return func(value)}function degrees(radians){return map(radians,function(radians){return 180*radians/Math.PI})}exports.config=config,config.EPSILON=1e-12,config.debug=!0,config.precision=4,config.printTypes=!1,config.printDegrees=!1,config.printRowMajor=!0},function(module,exports){var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,function(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(name){return[]},process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(18),$forEach=__webpack_require__(166)(0),STRICT=__webpack_require__(83)([].forEach,!0);$export($export.P+$export.F*!STRICT,"Array",{forEach:function(callbackfn){return $forEach(this,callbackfn,arguments[1])}})},function(module,exports,__webpack_require__){"use strict";var addToUnscopables=__webpack_require__(495),step=__webpack_require__(252),Iterators=__webpack_require__(100),toIObject=__webpack_require__(80);module.exports=__webpack_require__(167)(Array,"Array",function(iterated,kind){this._t=toIObject(iterated),this._i=0,this._k=kind},function(){var O=this._t,kind=this._k,index=this._i++;return!O||index>=O.length?(this._t=void 0,step(1)):step(0,"keys"==kind?index:"values"==kind?O[index]:[index,O[index]])},"values"),Iterators.Arguments=Iterators.Array,addToUnscopables("keys"),addToUnscopables("values"),addToUnscopables("entries")},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(9),_interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _slicedToArray2=_interopRequireDefault(__webpack_require__(11)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_log=_interopRequireDefault(__webpack_require__(24)),_mathUtils=__webpack_require__(738),_math=__webpack_require__(25),mat4=_interopRequireWildcard(__webpack_require__(89)),_viewportMercatorProject=__webpack_require__(37),_assert=_interopRequireDefault(__webpack_require__(20)),DEGREES_TO_RADIANS=Math.PI/180,IDENTITY=(0,_mathUtils.createMat4)(),ZERO_VECTOR=[0,0,0],Viewport=function(){function Viewport(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,_classCallCheck2.default)(this,Viewport);var _opts$id=opts.id,id=void 0===_opts$id?null:_opts$id,_opts$x=opts.x,x=void 0===_opts$x?0:_opts$x,_opts$y=opts.y,y=void 0===_opts$y?0:_opts$y,_opts$width=opts.width,width=void 0===_opts$width?1:_opts$width,_opts$height=opts.height,height=void 0===_opts$height?1:_opts$height;this.id=id||this.constructor.displayName||"viewport",this.x=x,this.y=y,this.width=width||1,this.height=height||1,this._initViewMatrix(opts),this._initProjectionMatrix(opts),this._initPixelMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this),this.getMatrices=this.getMatrices.bind(this)}return(0,_createClass2.default)(Viewport,[{key:"equals",value:function(viewport){return viewport instanceof Viewport&&(viewport.width===this.width&&viewport.height===this.height&&viewport.scale===this.scale&&(0,_math.equals)(viewport.projectionMatrix,this.projectionMatrix)&&(0,_math.equals)(viewport.viewMatrix,this.viewMatrix))}},{key:"project",value:function(xyz){var _ref$topLeft=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,topLeft=void 0===_ref$topLeft||_ref$topLeft,worldPosition=this.projectPosition(xyz),coord=(0,_viewportMercatorProject.worldToPixels)(worldPosition,this.pixelProjectionMatrix),_coord=(0,_slicedToArray2.default)(coord,2),x=_coord[0],y=_coord[1],y2=topLeft?y:this.height-y;return 2===xyz.length?[x,y2]:[x,y2,coord[2]]}},{key:"unproject",value:function(xyz){var _ref2=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref2$topLeft=_ref2.topLeft,topLeft=void 0===_ref2$topLeft||_ref2$topLeft,targetZ=_ref2.targetZ,_xyz=(0,_slicedToArray2.default)(xyz,3),x=_xyz[0],y=_xyz[1],z=_xyz[2],y2=topLeft?y:this.height-y,targetZWorld=targetZ&&targetZ*this.distanceScales.pixelsPerMeter[2],coord=(0,_viewportMercatorProject.pixelsToWorld)([x,y2,z],this.pixelUnprojectionMatrix,targetZWorld),_this$unprojectPositi=this.unprojectPosition(coord),_this$unprojectPositi2=(0,_slicedToArray2.default)(_this$unprojectPositi,3),X=_this$unprojectPositi2[0],Y=_this$unprojectPositi2[1],Z=_this$unprojectPositi2[2];return Number.isFinite(z)?[X,Y,Z]:Number.isFinite(targetZ)?[X,Y,targetZ]:[X,Y]}},{key:"projectPosition",value:function(xyz){var _this$projectFlat=this.projectFlat(xyz),_this$projectFlat2=(0,_slicedToArray2.default)(_this$projectFlat,2);return[_this$projectFlat2[0],_this$projectFlat2[1],(xyz[2]||0)*this.distanceScales.pixelsPerMeter[2]]}},{key:"unprojectPosition",value:function(xyz){var _this$unprojectFlat=this.unprojectFlat(xyz),_this$unprojectFlat2=(0,_slicedToArray2.default)(_this$unprojectFlat,2);return[_this$unprojectFlat2[0],_this$unprojectFlat2[1],(xyz[2]||0)*this.distanceScales.metersPerPixel[2]]}},{key:"projectFlat",value:function(xyz){var scale=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;if(this.isGeospatial)return(0,_viewportMercatorProject.lngLatToWorld)(xyz,scale);var pixelsPerMeter=this.distanceScales.pixelsPerMeter;return[xyz[0]*pixelsPerMeter[0],xyz[1]*pixelsPerMeter[1]]}},{key:"unprojectFlat",value:function(xyz){var scale=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;if(this.isGeospatial)return(0,_viewportMercatorProject.worldToLngLat)(xyz,scale);var metersPerPixel=this.distanceScales.metersPerPixel;return[xyz[0]*metersPerPixel[0],xyz[1]*metersPerPixel[1]]}},{key:"getDistanceScales",value:function(){var coordinateOrigin=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return coordinateOrigin?(0,_viewportMercatorProject.getDistanceScales)({longitude:coordinateOrigin[0],latitude:coordinateOrigin[1],scale:this.scale,highPrecision:!0}):this.distanceScales}},{key:"getMatrices",value:function(){var _ref3$modelMatrix=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).modelMatrix,modelMatrix=void 0===_ref3$modelMatrix?null:_ref3$modelMatrix,modelViewProjectionMatrix=this.viewProjectionMatrix,pixelProjectionMatrix=this.pixelProjectionMatrix,pixelUnprojectionMatrix=this.pixelUnprojectionMatrix;return modelMatrix&&(modelViewProjectionMatrix=mat4.multiply([],this.viewProjectionMatrix,modelMatrix),pixelProjectionMatrix=mat4.multiply([],this.pixelProjectionMatrix,modelMatrix),pixelUnprojectionMatrix=mat4.invert([],pixelProjectionMatrix)),Object.assign({modelViewProjectionMatrix:modelViewProjectionMatrix,viewProjectionMatrix:this.viewProjectionMatrix,viewMatrix:this.viewMatrix,projectionMatrix:this.projectionMatrix,pixelProjectionMatrix:pixelProjectionMatrix,pixelUnprojectionMatrix:pixelUnprojectionMatrix,width:this.width,height:this.height,scale:this.scale})}},{key:"containsPixel",value:function(_ref4){var x=_ref4.x,y=_ref4.y,_ref4$width=_ref4.width,width=void 0===_ref4$width?1:_ref4$width,_ref4$height=_ref4.height,height=void 0===_ref4$height?1:_ref4$height;return x<this.x+this.width&&this.x<x+width&&y<this.y+this.height&&this.y<y+height}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"getCameraDirection",value:function(){return this.cameraDirection}},{key:"getCameraUp",value:function(){return this.cameraUp}},{key:"_addMetersToLngLat",value:function(lngLatZ,xyz){var _lngLatZ=(0,_slicedToArray2.default)(lngLatZ,3),lng=_lngLatZ[0],lat=_lngLatZ[1],_lngLatZ$=_lngLatZ[2],Z=void 0===_lngLatZ$?0:_lngLatZ$,_this$_metersToLngLat=this._metersToLngLatDelta(xyz),_this$_metersToLngLat2=(0,_slicedToArray2.default)(_this$_metersToLngLat,3),deltaLng=_this$_metersToLngLat2[0],deltaLat=_this$_metersToLngLat2[1],_this$_metersToLngLat3=_this$_metersToLngLat2[2],deltaZ=void 0===_this$_metersToLngLat3?0:_this$_metersToLngLat3;return 2===lngLatZ.length?[lng+deltaLng,lat+deltaLat]:[lng+deltaLng,lat+deltaLat,Z+deltaZ]}},{key:"_metersToLngLatDelta",value:function(xyz){var _xyz2=(0,_slicedToArray2.default)(xyz,3),x=_xyz2[0],y=_xyz2[1],_xyz2$=_xyz2[2],z=void 0===_xyz2$?0:_xyz2$;(0,_assert.default)(Number.isFinite(x)&&Number.isFinite(y)&&Number.isFinite(z),"Illegal argument to Viewport");var _this$distanceScales=this.distanceScales,pixelsPerMeter=_this$distanceScales.pixelsPerMeter,degreesPerPixel=_this$distanceScales.degreesPerPixel,deltaLng=x*pixelsPerMeter[0]*degreesPerPixel[0],deltaLat=y*pixelsPerMeter[1]*degreesPerPixel[1];return 2===xyz.length?[deltaLng,deltaLat]:[deltaLng,deltaLat,z]}},{key:"_createProjectionMatrix",value:function(_ref5){var orthographic=_ref5.orthographic,fovyRadians=_ref5.fovyRadians,aspect=_ref5.aspect,focalDistance=_ref5.focalDistance,near=_ref5.near,far=_ref5.far;return(0,_assert.default)(Number.isFinite(fovyRadians)),orthographic?(new _math.Matrix4).orthographic({fovy:fovyRadians,aspect:aspect,focalDistance:focalDistance,near:near,far:far}):(new _math.Matrix4).perspective({fovy:fovyRadians,aspect:aspect,near:near,far:far})}},{key:"_initViewMatrix",value:function(opts){var _opts$viewMatrix=opts.viewMatrix,viewMatrix=void 0===_opts$viewMatrix?IDENTITY:_opts$viewMatrix,_opts$longitude=opts.longitude,longitude=void 0===_opts$longitude?null:_opts$longitude,_opts$latitude=opts.latitude,latitude=void 0===_opts$latitude?null:_opts$latitude,_opts$zoom=opts.zoom,zoom=void 0===_opts$zoom?null:_opts$zoom,_opts$position=opts.position,position=void 0===_opts$position?null:_opts$position,_opts$modelMatrix=opts.modelMatrix,modelMatrix=void 0===_opts$modelMatrix?null:_opts$modelMatrix,_opts$focalDistance=opts.focalDistance,focalDistance=void 0===_opts$focalDistance?1:_opts$focalDistance,_opts$distanceScales=opts.distanceScales,distanceScales=void 0===_opts$distanceScales?null:_opts$distanceScales;this.isGeospatial=Number.isFinite(latitude)&&Number.isFinite(longitude),this.zoom=zoom,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?(0,_viewportMercatorProject.getMeterZoom)({latitude:latitude})+Math.log2(focalDistance):0);var scale=Math.pow(2,this.zoom);this.scale=scale,this.distanceScales=this.isGeospatial?(0,_viewportMercatorProject.getDistanceScales)({latitude:latitude,longitude:longitude,scale:this.scale}):distanceScales||{pixelsPerMeter:[scale,scale,scale],metersPerPixel:[1/scale,1/scale,1/scale]},this.focalDistance=focalDistance,this.distanceScales.metersPerPixel=new _math.Vector3(this.distanceScales.metersPerPixel),this.distanceScales.pixelsPerMeter=new _math.Vector3(this.distanceScales.pixelsPerMeter),this.position=ZERO_VECTOR,this.meterOffset=ZERO_VECTOR,position&&(this.position=position,this.modelMatrix=modelMatrix,this.meterOffset=modelMatrix?modelMatrix.transformVector(position):position),this.isGeospatial?(this.longitude=longitude,this.latitude=latitude,this.center=this._getCenterInWorld({longitude:longitude,latitude:latitude}),this.viewMatrixUncentered=mat4.scale([],viewMatrix,[1,-1,1])):(this.center=position?this.projectPosition(position):[0,0,0],this.viewMatrixUncentered=viewMatrix),this.viewMatrix=(new _math.Matrix4).multiplyRight(this.viewMatrixUncentered).translate(new _math.Vector3(this.center||ZERO_VECTOR).negate())}},{key:"_getCenterInWorld",value:function(_ref6){var longitude=_ref6.longitude,latitude=_ref6.latitude,meterOffset=this.meterOffset,scale=this.scale,distanceScales=this.distanceScales,center2d=this.projectFlat([longitude,latitude],scale),center=new _math.Vector3(center2d[0],center2d[1],0);if(meterOffset){var pixelPosition=new _math.Vector3(meterOffset).scale(distanceScales.pixelsPerMeter);center.add(pixelPosition)}return center}},{key:"_initProjectionMatrix",value:function(opts){var _opts$projectionMatri=opts.projectionMatrix,projectionMatrix=void 0===_opts$projectionMatri?null:_opts$projectionMatri,_opts$orthographic=opts.orthographic,orthographic=void 0!==_opts$orthographic&&_opts$orthographic,fovyRadians=opts.fovyRadians,fovyDegrees=opts.fovyDegrees,fovy=opts.fovy,_opts$near=opts.near,near=void 0===_opts$near?.1:_opts$near,_opts$far=opts.far,far=void 0===_opts$far?1e3:_opts$far,_opts$focalDistance2=opts.focalDistance,focalDistance=void 0===_opts$focalDistance2?1:_opts$focalDistance2,orthographicFocalDistance=opts.orthographicFocalDistance,radians=fovyRadians||(fovyDegrees||fovy||75)*DEGREES_TO_RADIANS;this.projectionMatrix=projectionMatrix||this._createProjectionMatrix({orthographic:orthographic,fovyRadians:radians,aspect:this.width/this.height,focalDistance:orthographicFocalDistance||focalDistance,near:near,far:far})}},{key:"_initPixelMatrices",value:function(){var vpm=(0,_mathUtils.createMat4)();mat4.multiply(vpm,vpm,this.projectionMatrix),mat4.multiply(vpm,vpm,this.viewMatrix),this.viewProjectionMatrix=vpm,this.viewMatrixInverse=mat4.invert([],this.viewMatrix)||this.viewMatrix;var _extractCameraVectors=(0,_mathUtils.extractCameraVectors)({viewMatrix:this.viewMatrix,viewMatrixInverse:this.viewMatrixInverse}),eye=_extractCameraVectors.eye,direction=_extractCameraVectors.direction,up=_extractCameraVectors.up;this.cameraPosition=eye,this.cameraDirection=direction,this.cameraUp=up;var viewportMatrix=(0,_mathUtils.createMat4)(),pixelProjectionMatrix=(0,_mathUtils.createMat4)();mat4.scale(viewportMatrix,viewportMatrix,[this.width/2,-this.height/2,1]),mat4.translate(viewportMatrix,viewportMatrix,[1,-1,0]),mat4.multiply(pixelProjectionMatrix,viewportMatrix,this.viewProjectionMatrix),this.pixelProjectionMatrix=pixelProjectionMatrix,this.viewportMatrix=viewportMatrix,this.pixelUnprojectionMatrix=mat4.invert((0,_mathUtils.createMat4)(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||_log.default.warn("Pixel project matrix not invertible")()}}]),Viewport}();exports.default=Viewport,Viewport.displayName="Viewport"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var obj,_stripIndentTransformer=__webpack_require__(549),_stripIndentTransformer2=(obj=_stripIndentTransformer)&&obj.__esModule?obj:{default:obj};exports.default=_stripIndentTransformer2.default,module.exports=exports.default},function(module,exports,__webpack_require__){var arrayWithoutHoles=__webpack_require__(615),iterableToArray=__webpack_require__(616),nonIterableSpread=__webpack_require__(617);module.exports=function(arr){return arrayWithoutHoles(arr)||iterableToArray(arr)||nonIterableSpread()}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_init=__webpack_require__(290),_webglUtils=__webpack_require__(14),_utils=__webpack_require__(10),ERR_RESOURCE_METHOD_UNDEFINED="Resource subclass must define virtual methods",Resource=function(){function Resource(gl){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,_classCallCheck2.default)(this,Resource),(0,_webglUtils.assertWebGLContext)(gl);var id=opts.id,_opts$userData=opts.userData,userData=void 0===_opts$userData?{}:_opts$userData;this.gl=gl,this.id=id||(0,_utils.uid)(this.constructor.name),this.userData=userData,this._bound=!1,this._handle=opts.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}return(0,_createClass2.default)(Resource,[{key:"toString",value:function(){return"".concat(this.constructor.name,"(").concat(this.id,")")}},{key:"delete",value:function(){var _ref$deleteChildren=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).deleteChildren,deleteChildren=void 0!==_ref$deleteChildren&&_ref$deleteChildren,children=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,children&&deleteChildren&&children.filter(Boolean).forEach(function(child){child.delete()}),this}},{key:"bind",value:function(){var value,funcOrHandle=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof funcOrHandle?(this._bindHandle(funcOrHandle),this):(this._bound?value=funcOrHandle():(this._bindHandle(this.handle),this._bound=!0,value=funcOrHandle(),this._bound=!1,this._bindHandle(null)),value)}},{key:"unbind",value:function(){this.bind(null)}},{key:"getParameter",value:function(pname){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};pname=(0,_webglUtils.getKeyValue)(this.gl,pname),(0,_utils.assert)(pname);var parameter=(this.constructor.PARAMETERS||{})[pname];if(parameter){var isWebgl2=(0,_webglUtils.isWebGL2)(this.gl);if(!((!("webgl2"in parameter)||isWebgl2)&&(!("extension"in parameter)||this.gl.getExtension(parameter.extension)))){var webgl1Default=parameter.webgl1,webgl2Default="webgl2"in parameter?parameter.webgl2:parameter.webgl1;return isWebgl2?webgl2Default:webgl1Default}}return this._getParameter(pname,opts)}},{key:"getParameters",value:function(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref2={},parameters=_ref2.parameters,keys=_ref2.keys,PARAMETERS=this.constructor.PARAMETERS||{},isWebgl2=(0,_webglUtils.isWebGL2)(this.gl),values={},parameterKeys=parameters||Object.keys(PARAMETERS),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=parameterKeys[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var pname=_step.value,parameter=PARAMETERS[pname];if(parameter&&(!("webgl2"in parameter)||isWebgl2)&&(!("extension"in parameter)||this.gl.getExtension(parameter.extension))){var key=keys?(0,_webglUtils.getKey)(this.gl,pname):pname;values[key]=this.getParameter(pname,opts),keys&&"GLenum"===parameter.type&&(values[key]=(0,_webglUtils.getKey)(this.gl,values[key]))}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return values}},{key:"setParameter",value:function(pname,value){pname=(0,_webglUtils.getKeyValue)(this.gl,pname),(0,_utils.assert)(pname);var parameter=(this.constructor.PARAMETERS||{})[pname];if(parameter){var isWebgl2=(0,_webglUtils.isWebGL2)(this.gl);if(!((!("webgl2"in parameter)||isWebgl2)&&(!("extension"in parameter)||this.gl.getExtension(parameter.extension))))throw new Error("Parameter not available on this platform");"GLenum"===parameter.type&&(value=(0,_webglUtils.getKeyValue)(value))}return this._setParameter(pname,value),this}},{key:"setParameters",value:function(parameters){for(var pname in parameters)this.setParameter(pname,parameters[pname]);return this}},{key:"stubRemovedMethods",value:function(className,version,methodNames){return(0,_utils.stubRemovedMethods)(this,className,version,methodNames)}},{key:"initialize",value:function(opts){}},{key:"_createHandle",value:function(){throw new Error(ERR_RESOURCE_METHOD_UNDEFINED)}},{key:"_deleteHandle",value:function(){throw new Error(ERR_RESOURCE_METHOD_UNDEFINED)}},{key:"_bindHandle",value:function(){throw new Error(ERR_RESOURCE_METHOD_UNDEFINED)}},{key:"_getOptsFromHandle",value:function(){throw new Error(ERR_RESOURCE_METHOD_UNDEFINED)}},{key:"_getParameter",value:function(pname,opts){throw new Error(ERR_RESOURCE_METHOD_UNDEFINED)}},{key:"_setParameter",value:function(pname,value){throw new Error(ERR_RESOURCE_METHOD_UNDEFINED)}},{key:"_context",value:function(){return this.gl.luma=this.gl.luma||{},this.gl.luma}},{key:"_addStats",value:function(){var name=this.constructor.name,stats=_init.lumaStats.get("Resource Counts");stats.get("Resources Created").incrementCount(),stats.get("".concat(name,"s Created")).incrementCount(),stats.get("".concat(name,"s Active")).incrementCount()}},{key:"_removeStats",value:function(){var name=this.constructor.name;_init.lumaStats.get("Resource Counts").get("".concat(name,"s Active")).decrementCount()}},{key:"_trackAllocatedMemory",value:function(bytes){var name=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.constructor.name,stats=_init.lumaStats.get("Memory Usage");stats.get("GPU Memory").addCount(bytes),stats.get("".concat(name," Memory")).addCount(bytes),this.byteLength=bytes}},{key:"_trackDeallocatedMemory",value:function(){var name=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.constructor.name,stats=_init.lumaStats.get("Memory Usage");stats.get("GPU Memory").subtractCount(this.byteLength),stats.get("".concat(name," Memory")).subtractCount(this.byteLength),this.byteLength=0}},{key:"handle",get:function(){return this._handle}}]),Resource}();exports.default=Resource},function(module,exports,__webpack_require__){module.exports=__webpack_require__(787)},function(module,exports){function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}module.exports=function(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf3=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_assertThisInitialized2=_interopRequireDefault(__webpack_require__(12)),_defineProperty2=_interopRequireDefault(__webpack_require__(6)),_react=__webpack_require__(8),_propTypes=_interopRequireDefault(__webpack_require__(32)),_mapContext=_interopRequireDefault(__webpack_require__(148)),propTypes={captureScroll:_propTypes.default.bool,captureDrag:_propTypes.default.bool,captureClick:_propTypes.default.bool,captureDoubleClick:_propTypes.default.bool},BaseControl=function(_PureComponent){function BaseControl(){var _getPrototypeOf2,_this;(0,_classCallCheck2.default)(this,BaseControl);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=(0,_possibleConstructorReturn2.default)(this,(_getPrototypeOf2=(0,_getPrototypeOf3.default)(BaseControl)).call.apply(_getPrototypeOf2,[this].concat(args))),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_context",{}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_events",null),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_containerRef",(0,_react.createRef)()),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_onScroll",function(evt){_this.props.captureScroll&&evt.stopPropagation()}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_onDragStart",function(evt){_this.props.captureDrag&&evt.stopPropagation()}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_onDblClick",function(evt){_this.props.captureDoubleClick&&evt.stopPropagation()}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_onClick",function(evt){_this.props.captureClick&&evt.stopPropagation()}),_this}return(0,_inherits2.default)(BaseControl,_PureComponent),(0,_createClass2.default)(BaseControl,[{key:"componentDidMount",value:function(){var ref=this._containerRef.current;if(ref){var eventManager=this._context.eventManager;eventManager&&(this._events={wheel:this._onScroll,panstart:this._onDragStart,anyclick:this._onClick,click:this._onClick,dblclick:this._onDblClick},eventManager.on(this._events,ref))}}},{key:"componentWillUnmount",value:function(){var eventManager=this._context.eventManager;eventManager&&this._events&&eventManager.off(this._events)}},{key:"_render",value:function(){throw new Error("_render() not implemented")}},{key:"render",value:function(){var _this2=this;return(0,_react.createElement)(_mapContext.default.Consumer,null,function(context){return _this2._context=context,_this2._render()})}}]),BaseControl}(_react.PureComponent);exports.default=BaseControl,(0,_defineProperty2.default)(BaseControl,"propTypes",propTypes),(0,_defineProperty2.default)(BaseControl,"defaultProps",{captureScroll:!1,captureDrag:!0,captureClick:!0,captureDoubleClick:!0})},function(module,exports){var hasOwnProperty={}.hasOwnProperty;module.exports=function(it,key){return hasOwnProperty.call(it,key)}},function(module,exports){var core=module.exports={version:"2.6.2"};"number"==typeof __e&&(__e=core)},function(module,exports,__webpack_require__){var dP=__webpack_require__(34),createDesc=__webpack_require__(94);module.exports=__webpack_require__(31)?function(object,key,value){return dP.f(object,key,createDesc(1,value))}:function(object,key,value){return object[key]=value,object}},function(module,exports,__webpack_require__){var aFunction=__webpack_require__(64);module.exports=function(fn,that,length){if(aFunction(fn),void 0===that)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},function(module,exports,__webpack_require__){(function(global){var win;win="undefined"!=typeof window?window:void 0!==global?global:"undefined"!=typeof self?self:{},module.exports=win}).call(this,__webpack_require__(17))},function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(18),$filter=__webpack_require__(166)(2);$export($export.P+$export.F*!__webpack_require__(83)([].filter,!0),"Array",{filter:function(callbackfn){return $filter(this,callbackfn,arguments[1])}})},function(module,exports,__webpack_require__){var toObject=__webpack_require__(66),$keys=__webpack_require__(79);__webpack_require__(253)("keys",function(){return function(it){return $keys(toObject(it))}})},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_assertThisInitialized2=_interopRequireDefault(__webpack_require__(12)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_resource=_interopRequireDefault(__webpack_require__(50)),_accessor=_interopRequireDefault(__webpack_require__(132)),_webglUtils=__webpack_require__(14),_utils=__webpack_require__(10),DEPRECATED_PROPS={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},PROP_CHECKS_INITIALIZE={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:DEPRECATED_PROPS},PROP_CHECKS_SET_PROPS={removedProps:DEPRECATED_PROPS},Buffer=function(_Resource){function Buffer(gl){var _this,props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,_classCallCheck2.default)(this,Buffer),(_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Buffer).call(this,gl,props))).stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),_this.target=props.target||(_this.gl.webgl2?36662:34962),_this.initialize(props),Object.seal((0,_assertThisInitialized2.default)(_this)),_this}return(0,_inherits2.default)(Buffer,_Resource),(0,_createClass2.default)(Buffer,[{key:"getElementCount",value:function(){var accessor=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/_accessor.default.getBytesPerElement(accessor))}},{key:"getVertexCount",value:function(){var accessor=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/_accessor.default.getBytesPerVertex(accessor))}},{key:"initialize",value:function(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(props)&&(props={data:props}),Number.isFinite(props)&&(props={byteLength:props}),props=(0,_utils.checkProps)("Buffer",props,PROP_CHECKS_INITIALIZE),this.usage=props.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},props,props.accessor)),props.data?this._setData(props.data):this._setByteLength(props.byteLength||0),this}},{key:"setProps",value:function(props){return"accessor"in(props=(0,_utils.checkProps)("Buffer",props,PROP_CHECKS_SET_PROPS))&&this.setAccessor(props.accessor),this}},{key:"setAccessor",value:function(accessor){return delete(accessor=Object.assign({},accessor)).buffer,this.accessor=new _accessor.default(accessor),this}},{key:"reallocate",value:function(byteLength){return byteLength>this.byteLength?(this._setByteLength(byteLength),!0):(this.bytesUsed=byteLength,!1)}},{key:"setData",value:function(props){return this.initialize(props)}},{key:"subData",value:function(props){ArrayBuffer.isView(props)&&(props={data:props});var _props=props,data=_props.data,_props$offset=_props.offset,offset=void 0===_props$offset?0:_props$offset,_props$srcOffset=_props.srcOffset,srcOffset=void 0===_props$srcOffset?0:_props$srcOffset,byteLength=props.byteLength||props.length;(0,_utils.assert)(data);var target=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(target,this.handle),0!==srcOffset||void 0!==byteLength?((0,_webglUtils.assertWebGL2Context)(this.gl),this.gl.bufferSubData(this.target,offset,data,srcOffset,byteLength)):this.gl.bufferSubData(target,offset,data),this.gl.bindBuffer(target,null),this.debugData=null,this._inferType(data),this}},{key:"copyData",value:function(_ref){var sourceBuffer=_ref.sourceBuffer,_ref$readOffset=_ref.readOffset,readOffset=void 0===_ref$readOffset?0:_ref$readOffset,_ref$writeOffset=_ref.writeOffset,writeOffset=void 0===_ref$writeOffset?0:_ref$writeOffset,size=_ref.size,gl=this.gl;return(0,_webglUtils.assertWebGL2Context)(gl),gl.bindBuffer(36662,sourceBuffer.handle),gl.bindBuffer(36663,this.handle),gl.copyBufferSubData(36662,36663,readOffset,writeOffset,size),gl.bindBuffer(36662,null),gl.bindBuffer(36663,null),this.debugData=null,this}},{key:"getData",value:function(){var _ref2=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref2$dstData=_ref2.dstData,dstData=void 0===_ref2$dstData?null:_ref2$dstData,_ref2$srcByteOffset=_ref2.srcByteOffset,srcByteOffset=void 0===_ref2$srcByteOffset?0:_ref2$srcByteOffset,_ref2$dstOffset=_ref2.dstOffset,dstOffset=void 0===_ref2$dstOffset?0:_ref2$dstOffset,_ref2$length=_ref2.length,length=void 0===_ref2$length?0:_ref2$length;(0,_webglUtils.assertWebGL2Context)(this.gl);var dstAvailableElementCount,dstElementCount,ArrayType=(0,_webglUtils.getTypedArrayFromGLType)(this.accessor.type||5126,{clamped:!1}),sourceAvailableElementCount=this._getAvailableElementCount(srcByteOffset),dstElementOffset=dstOffset;dstData?dstAvailableElementCount=(dstElementCount=dstData.length)-dstElementOffset:dstElementCount=dstElementOffset+(dstAvailableElementCount=Math.min(sourceAvailableElementCount,length||sourceAvailableElementCount));var copyElementCount=Math.min(sourceAvailableElementCount,dstAvailableElementCount);return length=length||copyElementCount,(0,_utils.assert)(length<=copyElementCount),dstData=dstData||new ArrayType(dstElementCount),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,srcByteOffset,dstData,dstOffset,length),this.gl.bindBuffer(36662,null),dstData}},{key:"bind",value:function(){var _ref3=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref3$target=_ref3.target,target=void 0===_ref3$target?this.target:_ref3$target,_ref3$index=_ref3.index,index=void 0===_ref3$index?this.accessor&&this.accessor.index:_ref3$index,_ref3$offset=_ref3.offset,offset=void 0===_ref3$offset?0:_ref3$offset,size=_ref3.size;return 35345===target||35982===target?void 0!==size?this.gl.bindBufferRange(target,index,this.handle,offset,size):((0,_utils.assert)(0===offset),this.gl.bindBufferBase(target,index,this.handle)):this.gl.bindBuffer(target,this.handle),this}},{key:"unbind",value:function(){var _ref4=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref4$target=_ref4.target,target=void 0===_ref4$target?this.target:_ref4$target,_ref4$index=_ref4.index,index=void 0===_ref4$index?this.accessor&&this.accessor.index:_ref4$index;return 35345===target||35982===target?this.gl.bindBufferBase(target,index,null):this.gl.bindBuffer(target,null),this}},{key:"getDebugData",value:function(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:10}),{data:this.debugData,changed:!0})}},{key:"invalidateDebugData",value:function(){this.debugData=null}},{key:"_setData",value:function(data){var usage=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;(0,_utils.assert)(ArrayBuffer.isView(data)),this._trackDeallocatedMemory();var target=this._getTarget();this.gl.bindBuffer(target,this.handle),this.gl.bufferData(target,data,usage),this.gl.bindBuffer(target,null),this.usage=usage,this.debugData=data.slice(0,10),this.bytesUsed=data.byteLength,this._trackAllocatedMemory(data.byteLength);var type=(0,_webglUtils.getGLTypeFromTypedArray)(data);return(0,_utils.assert)(type),this.setAccessor(new _accessor.default(this.accessor,{type:type})),this}},{key:"_setByteLength",value:function(byteLength){var usage=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;(0,_utils.assert)(byteLength>=0),this._trackDeallocatedMemory();var data=byteLength;0===byteLength&&(data=new Float32Array(0));var target=this._getTarget();return this.gl.bindBuffer(target,this.handle),this.gl.bufferData(target,data,usage),this.gl.bindBuffer(target,null),this.usage=usage,this.debugData=null,this.bytesUsed=byteLength,this._trackAllocatedMemory(byteLength),this}},{key:"_getTarget",value:function(){return this.gl.webgl2?36663:this.target}},{key:"_getAvailableElementCount",value:function(srcByteOffset){var sourceElementOffset=srcByteOffset/(0,_webglUtils.getTypedArrayFromGLType)(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-sourceElementOffset}},{key:"_inferType",value:function(data){this.accessor.type||this.setAccessor(new _accessor.default(this.accessor,{type:(0,_webglUtils.getGLTypeFromTypedArray)(data)}))}},{key:"_createHandle",value:function(){return this.gl.createBuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_getParameter",value:function(pname){this.gl.bindBuffer(this.target,this.handle);var value=this.gl.getBufferParameter(this.target,pname);return this.gl.bindBuffer(this.target,null),value}},{key:"setByteLength",value:function(byteLength){return _utils.log.deprecated("setByteLength","reallocate")(),this.reallocate(byteLength)}},{key:"updateAccessor",value:function(opts){return _utils.log.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new _accessor.default(this.accessor,opts),this}},{key:"type",get:function(){return _utils.log.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}},{key:"bytes",get:function(){return _utils.log.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}}]),Buffer}(_resource.default);exports.default=Buffer},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _typeof2=_interopRequireDefault(__webpack_require__(27)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_viewport=_interopRequireDefault(__webpack_require__(47)),_positions=__webpack_require__(746),_deepEqual=__webpack_require__(212),_assert=_interopRequireDefault(__webpack_require__(20)),View=function(){function View(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,_classCallCheck2.default)(this,View);var _props$id=props.id,id=void 0===_props$id?null:_props$id,_props$x=props.x,x=void 0===_props$x?0:_props$x,_props$y=props.y,y=void 0===_props$y?0:_props$y,_props$width=props.width,width=void 0===_props$width?"100%":_props$width,_props$height=props.height,height=void 0===_props$height?"100%":_props$height,_props$projectionMatr=props.projectionMatrix,projectionMatrix=void 0===_props$projectionMatr?null:_props$projectionMatr,_props$fovy=props.fovy,fovy=void 0===_props$fovy?50:_props$fovy,_props$near=props.near,near=void 0===_props$near?.1:_props$near,_props$far=props.far,far=void 0===_props$far?1e3:_props$far,_props$modelMatrix=props.modelMatrix,modelMatrix=void 0===_props$modelMatrix?null:_props$modelMatrix,_props$viewportInstan=props.viewportInstance,viewportInstance=void 0===_props$viewportInstan?null:_props$viewportInstan,_props$type=props.type,type=void 0===_props$type?_viewport.default:_props$type;(0,_assert.default)(!viewportInstance||viewportInstance instanceof _viewport.default),this.viewportInstance=viewportInstance,this.id=id||this.constructor.displayName||"view",this.type=type,this.props=Object.assign({},props,{projectionMatrix:projectionMatrix,fovy:fovy,near:near,far:far,modelMatrix:modelMatrix}),this._parseDimensions({x:x,y:y,width:width,height:height}),this.equals=this.equals.bind(this),Object.seal(this)}return(0,_createClass2.default)(View,[{key:"equals",value:function(view){return this===view||(this.viewportInstance?view.viewportInstance&&this.viewportInstance.equals(view.viewportInstance):(0,_deepEqual.deepEqual)(this.props,view.props))}},{key:"makeViewport",value:function(_ref){var width=_ref.width,height=_ref.height,viewState=_ref.viewState;if(this.viewportInstance)return this.viewportInstance;viewState=this.filterViewState(viewState);var viewportDimensions=this.getDimensions({width:width,height:height}),props=Object.assign({viewState:viewState},viewState,this.props,viewportDimensions);return this._getViewport(props)}},{key:"getViewStateId",value:function(){switch((0,_typeof2.default)(this.props.viewState)){case"string":return this.props.viewState;case"object":return this.props.viewState&&this.props.viewState.id;default:return this.id}}},{key:"filterViewState",value:function(viewState){if(this.props.viewState&&"object"===(0,_typeof2.default)(this.props.viewState)){if(!this.props.viewState.id)return this.props.viewState;var newViewState=Object.assign({},viewState);for(var key in this.props.viewState)"id"!==key&&(newViewState[key]=this.props.viewState[key]);return newViewState}return viewState}},{key:"getDimensions",value:function(_ref2){var width=_ref2.width,height=_ref2.height;return{x:(0,_positions.getPosition)(this._x,width),y:(0,_positions.getPosition)(this._y,height),width:(0,_positions.getPosition)(this._width,width),height:(0,_positions.getPosition)(this._height,height)}}},{key:"_getControllerProps",value:function(defaultOpts){var opts=this.props.controller;return opts?!0===opts?defaultOpts:("function"==typeof opts&&(opts={type:opts}),Object.assign({},defaultOpts,opts)):null}},{key:"_getViewport",value:function(props){return new(0,this.type)(props)}},{key:"_parseDimensions",value:function(_ref3){var x=_ref3.x,y=_ref3.y,width=_ref3.width,height=_ref3.height;this._x=(0,_positions.parsePosition)(x),this._y=(0,_positions.parsePosition)(y),this._width=(0,_positions.parsePosition)(width),this._height=(0,_positions.parsePosition)(height)}}]),View}();exports.default=View},function(module,exports,__webpack_require__){"use strict";(function(global){var origSymbol=global.Symbol,hasSymbolSham=__webpack_require__(423);module.exports=function(){return"function"==typeof origSymbol&&("function"==typeof Symbol&&("symbol"==typeof origSymbol("foo")&&("symbol"==typeof Symbol("bar")&&hasSymbolSham())))}}).call(this,__webpack_require__(17))},function(module,exports){module.exports=function(it){if("function"!=typeof it)throw TypeError(it+" is not a function!");return it}},function(module,exports){var toString={}.toString;module.exports=function(it){return toString.call(it).slice(8,-1)}},function(module,exports,__webpack_require__){var defined=__webpack_require__(98);module.exports=function(it){return Object(defined(it))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var obj,_replaceResultTransformer=__webpack_require__(550),_replaceResultTransformer2=(obj=_replaceResultTransformer)&&obj.__esModule?obj:{default:obj};exports.default=_replaceResultTransformer2.default,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.DRAW_MODE=void 0;var _objectSpread2=_interopRequireDefault(__webpack_require__(36)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_utils=__webpack_require__(19),DRAW_MODE={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};exports.DRAW_MODE=DRAW_MODE;var Geometry=function(){function Geometry(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,_classCallCheck2.default)(this,Geometry);var _props$id=props.id,id=void 0===_props$id?(0,_utils.uid)("geometry"):_props$id,_props$drawMode=props.drawMode,drawMode=void 0===_props$drawMode?DRAW_MODE.TRIANGLES:_props$drawMode,mode=props.mode,_props$attributes=props.attributes,attributes=void 0===_props$attributes?{}:_props$attributes,_props$indices=props.indices,indices=void 0===_props$indices?null:_props$indices,_props$vertexCount=props.vertexCount,vertexCount=void 0===_props$vertexCount?null:_props$vertexCount;this.id=id,this.drawMode=0|drawMode||0|mode,this.attributes={},this.userData={},this._setAttributes(attributes,indices),this.vertexCount=vertexCount||this._calculateVertexCount(this.attributes,this.indices)}return(0,_createClass2.default)(Geometry,null,[{key:"DRAW_MODE",get:function(){return DRAW_MODE}}]),(0,_createClass2.default)(Geometry,[{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getAttributes",value:function(){return this.indices?(0,_objectSpread2.default)({indices:this.indices},this.attributes):this.attributes}},{key:"_print",value:function(attributeName){return"Geometry ".concat(this.id," attribute ").concat(attributeName)}},{key:"_setAttributes",value:function(attributes,indices){for(var attributeName in indices&&(this.indices=ArrayBuffer.isView(indices)?{value:indices,size:1}:indices),attributes){var attribute=attributes[attributeName];attribute=ArrayBuffer.isView(attribute)?{value:attribute}:attribute,(0,_utils.assert)(ArrayBuffer.isView(attribute.value),"".concat(this._print(attributeName),": must be typed array or object with value as typed array")),"indices"===attributeName?((0,_utils.assert)(!this.indices),this.indices=attribute,void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed)):this.attributes[attributeName]=attribute}return this}},{key:"_calculateVertexCount",value:function(attributes,indices){if(indices)return indices.value.length;var vertexCount=1/0;for(var attributeName in attributes){var attribute=attributes[attributeName],value=attribute.value,size=attribute.size;!attribute.constant&&value&&size>=1&&(vertexCount=Math.min(vertexCount,value.length/size))}if(!Number.isFinite(vertexCount)){var _attribute=attributes.POSITION||attributes.positions;_attribute&&(vertexCount=_attribute.value&&_attribute.value.length/(_attribute.size||3))}return(0,_utils.assert)(Number.isFinite(vertexCount)),vertexCount}},{key:"mode",get:function(){return this.drawMode}}]),Geometry}();exports.default=Geometry},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=create,exports.clone=function(a){var out=new glMatrix.ARRAY_TYPE(2);return out[0]=a[0],out[1]=a[1],out},exports.fromValues=function(x,y){var out=new glMatrix.ARRAY_TYPE(2);return out[0]=x,out[1]=y,out},exports.copy=function(out,a){return out[0]=a[0],out[1]=a[1],out},exports.set=function(out,x,y){return out[0]=x,out[1]=y,out},exports.add=function(out,a,b){return out[0]=a[0]+b[0],out[1]=a[1]+b[1],out},exports.subtract=subtract,exports.multiply=multiply,exports.divide=divide,exports.ceil=function(out,a){return out[0]=Math.ceil(a[0]),out[1]=Math.ceil(a[1]),out},exports.floor=function(out,a){return out[0]=Math.floor(a[0]),out[1]=Math.floor(a[1]),out},exports.min=function(out,a,b){return out[0]=Math.min(a[0],b[0]),out[1]=Math.min(a[1],b[1]),out},exports.max=function(out,a,b){return out[0]=Math.max(a[0],b[0]),out[1]=Math.max(a[1],b[1]),out},exports.round=function(out,a){return out[0]=Math.round(a[0]),out[1]=Math.round(a[1]),out},exports.scale=function(out,a,b){return out[0]=a[0]*b,out[1]=a[1]*b,out},exports.scaleAndAdd=function(out,a,b,scale){return out[0]=a[0]+b[0]*scale,out[1]=a[1]+b[1]*scale,out},exports.distance=distance,exports.squaredDistance=squaredDistance,exports.length=length,exports.squaredLength=squaredLength,exports.negate=function(out,a){return out[0]=-a[0],out[1]=-a[1],out},exports.inverse=function(out,a){return out[0]=1/a[0],out[1]=1/a[1],out},exports.normalize=function(out,a){var x=a[0],y=a[1],len=x*x+y*y;len>0&&(len=1/Math.sqrt(len));return out[0]=a[0]*len,out[1]=a[1]*len,out},exports.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]},exports.cross=function(out,a,b){var z=a[0]*b[1]-a[1]*b[0];return out[0]=out[1]=0,out[2]=z,out},exports.lerp=function(out,a,b,t){var ax=a[0],ay=a[1];return out[0]=ax+t*(b[0]-ax),out[1]=ay+t*(b[1]-ay),out},exports.random=function(out,scale){scale=scale||1;var r=2*glMatrix.RANDOM()*Math.PI;return out[0]=Math.cos(r)*scale,out[1]=Math.sin(r)*scale,out},exports.transformMat2=function(out,a,m){var x=a[0],y=a[1];return out[0]=m[0]*x+m[2]*y,out[1]=m[1]*x+m[3]*y,out},exports.transformMat2d=function(out,a,m){var x=a[0],y=a[1];return out[0]=m[0]*x+m[2]*y+m[4],out[1]=m[1]*x+m[3]*y+m[5],out},exports.transformMat3=function(out,a,m){var x=a[0],y=a[1];return out[0]=m[0]*x+m[3]*y+m[6],out[1]=m[1]*x+m[4]*y+m[7],out},exports.transformMat4=function(out,a,m){var x=a[0],y=a[1];return out[0]=m[0]*x+m[4]*y+m[12],out[1]=m[1]*x+m[5]*y+m[13],out},exports.rotate=function(out,a,b,c){var p0=a[0]-b[0],p1=a[1]-b[1],sinC=Math.sin(c),cosC=Math.cos(c);return out[0]=p0*cosC-p1*sinC+b[0],out[1]=p0*sinC+p1*cosC+b[1],out},exports.angle=function(a,b){var x1=a[0],y1=a[1],x2=b[0],y2=b[1],len1=x1*x1+y1*y1;len1>0&&(len1=1/Math.sqrt(len1));var len2=x2*x2+y2*y2;len2>0&&(len2=1/Math.sqrt(len2));var cosine=(x1*x2+y1*y2)*len1*len2;return cosine>1?0:cosine<-1?Math.PI:Math.acos(cosine)},exports.zero=function(out){return out[0]=0,out[1]=0,out},exports.str=function(a){return"vec2("+a[0]+", "+a[1]+")"},exports.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]},exports.equals=function(a,b){var a0=a[0],a1=a[1],b0=b[0],b1=b[1];return Math.abs(a0-b0)<=glMatrix.EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=glMatrix.EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))},exports.forEach=exports.sqrLen=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=exports.len=void 0;var glMatrix=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}(__webpack_require__(87));function create(){var out=new glMatrix.ARRAY_TYPE(2);return glMatrix.ARRAY_TYPE!=Float32Array&&(out[0]=0,out[1]=0),out}function subtract(out,a,b){return out[0]=a[0]-b[0],out[1]=a[1]-b[1],out}function multiply(out,a,b){return out[0]=a[0]*b[0],out[1]=a[1]*b[1],out}function divide(out,a,b){return out[0]=a[0]/b[0],out[1]=a[1]/b[1],out}function distance(a,b){var x=b[0]-a[0],y=b[1]-a[1];return Math.sqrt(x*x+y*y)}function squaredDistance(a,b){var x=b[0]-a[0],y=b[1]-a[1];return x*x+y*y}function length(a){var x=a[0],y=a[1];return Math.sqrt(x*x+y*y)}function squaredLength(a){var x=a[0],y=a[1];return x*x+y*y}var len=length;exports.len=len;var sub=subtract;exports.sub=sub;var mul=multiply;exports.mul=mul;var div=divide;exports.div=div;var dist=distance;exports.dist=dist;var sqrDist=squaredDistance;exports.sqrDist=sqrDist;var sqrLen=squaredLength;exports.sqrLen=sqrLen;var vec,forEach=(vec=create(),function(a,stride,offset,count,fn,arg){var i,l;for(stride||(stride=2),offset||(offset=0),l=count?Math.min(count*stride+offset,a.length):a.length,i=offset;i<l;i+=stride)vec[0]=a[i],vec[1]=a[i+1],fn(vec,vec,arg),a[i]=vec[0],a[i+1]=vec[1];return a});exports.forEach=forEach},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=create,exports.clone=function(a){var out=new glMatrix.ARRAY_TYPE(3);return out[0]=a[0],out[1]=a[1],out[2]=a[2],out},exports.length=length,exports.fromValues=fromValues,exports.copy=function(out,a){return out[0]=a[0],out[1]=a[1],out[2]=a[2],out},exports.set=function(out,x,y,z){return out[0]=x,out[1]=y,out[2]=z,out},exports.add=function(out,a,b){return out[0]=a[0]+b[0],out[1]=a[1]+b[1],out[2]=a[2]+b[2],out},exports.subtract=subtract,exports.multiply=multiply,exports.divide=divide,exports.ceil=function(out,a){return out[0]=Math.ceil(a[0]),out[1]=Math.ceil(a[1]),out[2]=Math.ceil(a[2]),out},exports.floor=function(out,a){return out[0]=Math.floor(a[0]),out[1]=Math.floor(a[1]),out[2]=Math.floor(a[2]),out},exports.min=function(out,a,b){return out[0]=Math.min(a[0],b[0]),out[1]=Math.min(a[1],b[1]),out[2]=Math.min(a[2],b[2]),out},exports.max=function(out,a,b){return out[0]=Math.max(a[0],b[0]),out[1]=Math.max(a[1],b[1]),out[2]=Math.max(a[2],b[2]),out},exports.round=function(out,a){return out[0]=Math.round(a[0]),out[1]=Math.round(a[1]),out[2]=Math.round(a[2]),out},exports.scale=function(out,a,b){return out[0]=a[0]*b,out[1]=a[1]*b,out[2]=a[2]*b,out},exports.scaleAndAdd=function(out,a,b,scale){return out[0]=a[0]+b[0]*scale,out[1]=a[1]+b[1]*scale,out[2]=a[2]+b[2]*scale,out},exports.distance=distance,exports.squaredDistance=squaredDistance,exports.squaredLength=squaredLength,exports.negate=function(out,a){return out[0]=-a[0],out[1]=-a[1],out[2]=-a[2],out},exports.inverse=function(out,a){return out[0]=1/a[0],out[1]=1/a[1],out[2]=1/a[2],out},exports.normalize=normalize,exports.dot=dot,exports.cross=function(out,a,b){var ax=a[0],ay=a[1],az=a[2],bx=b[0],by=b[1],bz=b[2];return out[0]=ay*bz-az*by,out[1]=az*bx-ax*bz,out[2]=ax*by-ay*bx,out},exports.lerp=function(out,a,b,t){var ax=a[0],ay=a[1],az=a[2];return out[0]=ax+t*(b[0]-ax),out[1]=ay+t*(b[1]-ay),out[2]=az+t*(b[2]-az),out},exports.hermite=function(out,a,b,c,d,t){var factorTimes2=t*t,factor1=factorTimes2*(2*t-3)+1,factor2=factorTimes2*(t-2)+t,factor3=factorTimes2*(t-1),factor4=factorTimes2*(3-2*t);return out[0]=a[0]*factor1+b[0]*factor2+c[0]*factor3+d[0]*factor4,out[1]=a[1]*factor1+b[1]*factor2+c[1]*factor3+d[1]*factor4,out[2]=a[2]*factor1+b[2]*factor2+c[2]*factor3+d[2]*factor4,out},exports.bezier=function(out,a,b,c,d,t){var inverseFactor=1-t,inverseFactorTimesTwo=inverseFactor*inverseFactor,factorTimes2=t*t,factor1=inverseFactorTimesTwo*inverseFactor,factor2=3*t*inverseFactorTimesTwo,factor3=3*factorTimes2*inverseFactor,factor4=factorTimes2*t;return out[0]=a[0]*factor1+b[0]*factor2+c[0]*factor3+d[0]*factor4,out[1]=a[1]*factor1+b[1]*factor2+c[1]*factor3+d[1]*factor4,out[2]=a[2]*factor1+b[2]*factor2+c[2]*factor3+d[2]*factor4,out},exports.random=function(out,scale){scale=scale||1;var r=2*glMatrix.RANDOM()*Math.PI,z=2*glMatrix.RANDOM()-1,zScale=Math.sqrt(1-z*z)*scale;return out[0]=Math.cos(r)*zScale,out[1]=Math.sin(r)*zScale,out[2]=z*scale,out},exports.transformMat4=function(out,a,m){var x=a[0],y=a[1],z=a[2],w=m[3]*x+m[7]*y+m[11]*z+m[15];return w=w||1,out[0]=(m[0]*x+m[4]*y+m[8]*z+m[12])/w,out[1]=(m[1]*x+m[5]*y+m[9]*z+m[13])/w,out[2]=(m[2]*x+m[6]*y+m[10]*z+m[14])/w,out},exports.transformMat3=function(out,a,m){var x=a[0],y=a[1],z=a[2];return out[0]=x*m[0]+y*m[3]+z*m[6],out[1]=x*m[1]+y*m[4]+z*m[7],out[2]=x*m[2]+y*m[5]+z*m[8],out},exports.transformQuat=function(out,a,q){var qx=q[0],qy=q[1],qz=q[2],qw=q[3],x=a[0],y=a[1],z=a[2],uvx=qy*z-qz*y,uvy=qz*x-qx*z,uvz=qx*y-qy*x,uuvx=qy*uvz-qz*uvy,uuvy=qz*uvx-qx*uvz,uuvz=qx*uvy-qy*uvx,w2=2*qw;return uvx*=w2,uvy*=w2,uvz*=w2,uuvx*=2,uuvy*=2,uuvz*=2,out[0]=x+uvx+uuvx,out[1]=y+uvy+uuvy,out[2]=z+uvz+uuvz,out},exports.rotateX=function(out,a,b,c){var p=[],r=[];return p[0]=a[0]-b[0],p[1]=a[1]-b[1],p[2]=a[2]-b[2],r[0]=p[0],r[1]=p[1]*Math.cos(c)-p[2]*Math.sin(c),r[2]=p[1]*Math.sin(c)+p[2]*Math.cos(c),out[0]=r[0]+b[0],out[1]=r[1]+b[1],out[2]=r[2]+b[2],out},exports.rotateY=function(out,a,b,c){var p=[],r=[];return p[0]=a[0]-b[0],p[1]=a[1]-b[1],p[2]=a[2]-b[2],r[0]=p[2]*Math.sin(c)+p[0]*Math.cos(c),r[1]=p[1],r[2]=p[2]*Math.cos(c)-p[0]*Math.sin(c),out[0]=r[0]+b[0],out[1]=r[1]+b[1],out[2]=r[2]+b[2],out},exports.rotateZ=function(out,a,b,c){var p=[],r=[];return p[0]=a[0]-b[0],p[1]=a[1]-b[1],p[2]=a[2]-b[2],r[0]=p[0]*Math.cos(c)-p[1]*Math.sin(c),r[1]=p[0]*Math.sin(c)+p[1]*Math.cos(c),r[2]=p[2],out[0]=r[0]+b[0],out[1]=r[1]+b[1],out[2]=r[2]+b[2],out},exports.angle=function(a,b){var tempA=fromValues(a[0],a[1],a[2]),tempB=fromValues(b[0],b[1],b[2]);normalize(tempA,tempA),normalize(tempB,tempB);var cosine=dot(tempA,tempB);return cosine>1?0:cosine<-1?Math.PI:Math.acos(cosine)},exports.zero=function(out){return out[0]=0,out[1]=0,out[2]=0,out},exports.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"},exports.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]},exports.equals=function(a,b){var a0=a[0],a1=a[1],a2=a[2],b0=b[0],b1=b[1],b2=b[2];return Math.abs(a0-b0)<=glMatrix.EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=glMatrix.EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=glMatrix.EPSILON*Math.max(1,Math.abs(a2),Math.abs(b2))},exports.forEach=exports.sqrLen=exports.len=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=void 0;var glMatrix=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}(__webpack_require__(87));function create(){var out=new glMatrix.ARRAY_TYPE(3);return glMatrix.ARRAY_TYPE!=Float32Array&&(out[0]=0,out[1]=0,out[2]=0),out}function length(a){var x=a[0],y=a[1],z=a[2];return Math.sqrt(x*x+y*y+z*z)}function fromValues(x,y,z){var out=new glMatrix.ARRAY_TYPE(3);return out[0]=x,out[1]=y,out[2]=z,out}function subtract(out,a,b){return out[0]=a[0]-b[0],out[1]=a[1]-b[1],out[2]=a[2]-b[2],out}function multiply(out,a,b){return out[0]=a[0]*b[0],out[1]=a[1]*b[1],out[2]=a[2]*b[2],out}function divide(out,a,b){return out[0]=a[0]/b[0],out[1]=a[1]/b[1],out[2]=a[2]/b[2],out}function distance(a,b){var x=b[0]-a[0],y=b[1]-a[1],z=b[2]-a[2];return Math.sqrt(x*x+y*y+z*z)}function squaredDistance(a,b){var x=b[0]-a[0],y=b[1]-a[1],z=b[2]-a[2];return x*x+y*y+z*z}function squaredLength(a){var x=a[0],y=a[1],z=a[2];return x*x+y*y+z*z}function normalize(out,a){var x=a[0],y=a[1],z=a[2],len=x*x+y*y+z*z;return len>0&&(len=1/Math.sqrt(len)),out[0]=a[0]*len,out[1]=a[1]*len,out[2]=a[2]*len,out}function dot(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}var sub=subtract;exports.sub=sub;var mul=multiply;exports.mul=mul;var div=divide;exports.div=div;var dist=distance;exports.dist=dist;var sqrDist=squaredDistance;exports.sqrDist=sqrDist;var len=length;exports.len=len;var sqrLen=squaredLength;exports.sqrLen=sqrLen;var vec,forEach=(vec=create(),function(a,stride,offset,count,fn,arg){var i,l;for(stride||(stride=3),offset||(offset=0),l=count?Math.min(count*stride+offset,a.length):a.length,i=offset;i<l;i+=stride)vec[0]=a[i],vec[1]=a[i+1],vec[2]=a[i+2],fn(vec,vec,arg),a[i]=vec[0],a[i+1]=vec[1],a[i+2]=vec[2];return a});exports.forEach=forEach},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_webgl=__webpack_require__(42),Pass=function(){function Pass(gl,props){(0,_classCallCheck2.default)(this,Pass);var _props$id=props.id,id=void 0===_props$id?"pass":_props$id;this.id=id,this.gl=gl,this.props={enabled:!0,screen:!1,swap:!1},Object.assign(this.props,props)}return(0,_createClass2.default)(Pass,[{key:"setProps",value:function(props){Object.assign(this.props,props)}},{key:"render",value:function(renderState,animationProps){var _this=this;if(this.props.enabled){var gl=this.gl,renderParams={gl:gl,outputBuffer:renderState.writeBuffer,inputBuffer:renderState.readBuffer,animationProps:animationProps,swapBuffers:function(){return renderState._swapFramebuffers()}};this.props.screen?(renderParams.inputBuffer=renderParams.outputBuffer,renderParams.outputBuffer=_webgl.Framebuffer.getDefaultFramebuffer(gl)):this.props.swap&&(renderParams.inputBuffer=renderState.writeBuffer,renderParams.outputBuffer=renderState.readBuffer),(0,_webgl.withParameters)(gl,{framebuffer:renderParams.outputBuffer},function(){return _this._renderPass(renderParams)}),this.props.debug&&renderParams.outputBuffer.log(1,this.id),this.props.swap&&renderState._swapFramebuffers()}}},{key:"_renderPass",value:function(_ref){_ref.gl,_ref.inputBuffer,_ref.outputBuffer,_ref.animationProps}}]),Pass}();exports.default=Pass},function(module,exports,__webpack_require__){"use strict";(function(global){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var base64=__webpack_require__(779),ieee754=__webpack_require__(780),isArray=__webpack_require__(781);function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(that,length){if(kMaxLength()<length)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(that=new Uint8Array(length)).__proto__=Buffer.prototype:(null===that&&(that=new Buffer(length)),that.length=length),that}function Buffer(arg,encodingOrOffset,length){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(arg,encodingOrOffset,length);if("number"==typeof arg){if("string"==typeof encodingOrOffset)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,arg)}return from(this,arg,encodingOrOffset,length)}function from(that,value,encodingOrOffset,length){if("number"==typeof value)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&value instanceof ArrayBuffer?function(that,array,byteOffset,length){if(array.byteLength,byteOffset<0||array.byteLength<byteOffset)throw new RangeError("'offset' is out of bounds");if(array.byteLength<byteOffset+(length||0))throw new RangeError("'length' is out of bounds");array=void 0===byteOffset&&void 0===length?new Uint8Array(array):void 0===length?new Uint8Array(array,byteOffset):new Uint8Array(array,byteOffset,length);Buffer.TYPED_ARRAY_SUPPORT?(that=array).__proto__=Buffer.prototype:that=fromArrayLike(that,array);return that}(that,value,encodingOrOffset,length):"string"==typeof value?function(that,string,encoding){"string"==typeof encoding&&""!==encoding||(encoding="utf8");if(!Buffer.isEncoding(encoding))throw new TypeError('"encoding" must be a valid string encoding');var length=0|byteLength(string,encoding),actual=(that=createBuffer(that,length)).write(string,encoding);actual!==length&&(that=that.slice(0,actual));return that}(that,value,encodingOrOffset):function(that,obj){if(Buffer.isBuffer(obj)){var len=0|checked(obj.length);return 0===(that=createBuffer(that,len)).length?that:(obj.copy(that,0,0,len),that)}if(obj){if("undefined"!=typeof ArrayBuffer&&obj.buffer instanceof ArrayBuffer||"length"in obj)return"number"!=typeof obj.length||(val=obj.length)!=val?createBuffer(that,0):fromArrayLike(that,obj);if("Buffer"===obj.type&&isArray(obj.data))return fromArrayLike(that,obj.data)}var val;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(that,value)}function assertSize(size){if("number"!=typeof size)throw new TypeError('"size" argument must be a number');if(size<0)throw new RangeError('"size" argument must not be negative')}function allocUnsafe(that,size){if(assertSize(size),that=createBuffer(that,size<0?0:0|checked(size)),!Buffer.TYPED_ARRAY_SUPPORT)for(var i=0;i<size;++i)that[i]=0;return that}function fromArrayLike(that,array){var length=array.length<0?0:0|checked(array.length);that=createBuffer(that,length);for(var i=0;i<length;i+=1)that[i]=255&array[i];return that}function checked(length){if(length>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|length}function byteLength(string,encoding){if(Buffer.isBuffer(string))return string.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(string)||string instanceof ArrayBuffer))return string.byteLength;"string"!=typeof string&&(string=""+string);var len=string.length;if(0===len)return 0;for(var loweredCase=!1;;)switch(encoding){case"ascii":case"latin1":case"binary":return len;case"utf8":case"utf-8":case void 0:return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*len;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase)return utf8ToBytes(string).length;encoding=(""+encoding).toLowerCase(),loweredCase=!0}}function swap(b,n,m){var i=b[n];b[n]=b[m],b[m]=i}function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(0===buffer.length)return-1;if("string"==typeof byteOffset?(encoding=byteOffset,byteOffset=0):byteOffset>2147483647?byteOffset=2147483647:byteOffset<-2147483648&&(byteOffset=-2147483648),byteOffset=+byteOffset,isNaN(byteOffset)&&(byteOffset=dir?0:buffer.length-1),byteOffset<0&&(byteOffset=buffer.length+byteOffset),byteOffset>=buffer.length){if(dir)return-1;byteOffset=buffer.length-1}else if(byteOffset<0){if(!dir)return-1;byteOffset=0}if("string"==typeof val&&(val=Buffer.from(val,encoding)),Buffer.isBuffer(val))return 0===val.length?-1:arrayIndexOf(buffer,val,byteOffset,encoding,dir);if("number"==typeof val)return val&=255,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?dir?Uint8Array.prototype.indexOf.call(buffer,val,byteOffset):Uint8Array.prototype.lastIndexOf.call(buffer,val,byteOffset):arrayIndexOf(buffer,[val],byteOffset,encoding,dir);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(arr,val,byteOffset,encoding,dir){var i,indexSize=1,arrLength=arr.length,valLength=val.length;if(void 0!==encoding&&("ucs2"===(encoding=String(encoding).toLowerCase())||"ucs-2"===encoding||"utf16le"===encoding||"utf-16le"===encoding)){if(arr.length<2||val.length<2)return-1;indexSize=2,arrLength/=2,valLength/=2,byteOffset/=2}function read(buf,i){return 1===indexSize?buf[i]:buf.readUInt16BE(i*indexSize)}if(dir){var foundIndex=-1;for(i=byteOffset;i<arrLength;i++)if(read(arr,i)===read(val,-1===foundIndex?0:i-foundIndex)){if(-1===foundIndex&&(foundIndex=i),i-foundIndex+1===valLength)return foundIndex*indexSize}else-1!==foundIndex&&(i-=i-foundIndex),foundIndex=-1}else for(byteOffset+valLength>arrLength&&(byteOffset=arrLength-valLength),i=byteOffset;i>=0;i--){for(var found=!0,j=0;j<valLength;j++)if(read(arr,i+j)!==read(val,j)){found=!1;break}if(found)return i}return-1}function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;length?(length=Number(length))>remaining&&(length=remaining):length=remaining;var strLen=string.length;if(strLen%2!=0)throw new TypeError("Invalid hex string");length>strLen/2&&(length=strLen/2);for(var i=0;i<length;++i){var parsed=parseInt(string.substr(2*i,2),16);if(isNaN(parsed))return i;buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(function(str){for(var byteArray=[],i=0;i<str.length;++i)byteArray.push(255&str.charCodeAt(i));return byteArray}(string),buf,offset,length)}function latin1Write(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(function(str,units){for(var c,hi,lo,byteArray=[],i=0;i<str.length&&!((units-=2)<0);++i)c=str.charCodeAt(i),hi=c>>8,lo=c%256,byteArray.push(lo),byteArray.push(hi);return byteArray}(string,buf.length-offset),buf,offset,length)}function base64Slice(buf,start,end){return 0===start&&end===buf.length?base64.fromByteArray(buf):base64.fromByteArray(buf.slice(start,end))}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);for(var res=[],i=start;i<end;){var secondByte,thirdByte,fourthByte,tempCodePoint,firstByte=buf[i],codePoint=null,bytesPerSequence=firstByte>239?4:firstByte>223?3:firstByte>191?2:1;if(i+bytesPerSequence<=end)switch(bytesPerSequence){case 1:firstByte<128&&(codePoint=firstByte);break;case 2:128==(192&(secondByte=buf[i+1]))&&(tempCodePoint=(31&firstByte)<<6|63&secondByte)>127&&(codePoint=tempCodePoint);break;case 3:secondByte=buf[i+1],thirdByte=buf[i+2],128==(192&secondByte)&&128==(192&thirdByte)&&(tempCodePoint=(15&firstByte)<<12|(63&secondByte)<<6|63&thirdByte)>2047&&(tempCodePoint<55296||tempCodePoint>57343)&&(codePoint=tempCodePoint);break;case 4:secondByte=buf[i+1],thirdByte=buf[i+2],fourthByte=buf[i+3],128==(192&secondByte)&&128==(192&thirdByte)&&128==(192&fourthByte)&&(tempCodePoint=(15&firstByte)<<18|(63&secondByte)<<12|(63&thirdByte)<<6|63&fourthByte)>65535&&tempCodePoint<1114112&&(codePoint=tempCodePoint)}null===codePoint?(codePoint=65533,bytesPerSequence=1):codePoint>65535&&(codePoint-=65536,res.push(codePoint>>>10&1023|55296),codePoint=56320|1023&codePoint),res.push(codePoint),i+=bytesPerSequence}return function(codePoints){var len=codePoints.length;if(len<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,codePoints);var res="",i=0;for(;i<len;)res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=MAX_ARGUMENTS_LENGTH));return res}(res)}exports.Buffer=Buffer,exports.SlowBuffer=function(length){+length!=length&&(length=0);return Buffer.alloc(+length)},exports.INSPECT_MAX_BYTES=50,Buffer.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:function(){try{var arr=new Uint8Array(1);return arr.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===arr.foo()&&"function"==typeof arr.subarray&&0===arr.subarray(1,1).byteLength}catch(e){return!1}}(),exports.kMaxLength=kMaxLength(),Buffer.poolSize=8192,Buffer._augment=function(arr){return arr.__proto__=Buffer.prototype,arr},Buffer.from=function(value,encodingOrOffset,length){return from(null,value,encodingOrOffset,length)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0})),Buffer.alloc=function(size,fill,encoding){return function(that,size,fill,encoding){return assertSize(size),size<=0?createBuffer(that,size):void 0!==fill?"string"==typeof encoding?createBuffer(that,size).fill(fill,encoding):createBuffer(that,size).fill(fill):createBuffer(that,size)}(null,size,fill,encoding)},Buffer.allocUnsafe=function(size){return allocUnsafe(null,size)},Buffer.allocUnsafeSlow=function(size){return allocUnsafe(null,size)},Buffer.isBuffer=function(b){return!(null==b||!b._isBuffer)},Buffer.compare=function(a,b){if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var x=a.length,y=b.length,i=0,len=Math.min(x,y);i<len;++i)if(a[i]!==b[i]){x=a[i],y=b[i];break}return x<y?-1:y<x?1:0},Buffer.isEncoding=function(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(list,length){if(!isArray(list))throw new TypeError('"list" argument must be an Array of Buffers');if(0===list.length)return Buffer.alloc(0);var i;if(void 0===length)for(length=0,i=0;i<list.length;++i)length+=list[i].length;var buffer=Buffer.allocUnsafe(length),pos=0;for(i=0;i<list.length;++i){var buf=list[i];if(!Buffer.isBuffer(buf))throw new TypeError('"list" argument must be an Array of Buffers');buf.copy(buffer,pos),pos+=buf.length}return buffer},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var len=this.length;if(len%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<len;i+=2)swap(this,i,i+1);return this},Buffer.prototype.swap32=function(){var len=this.length;if(len%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<len;i+=4)swap(this,i,i+3),swap(this,i+1,i+2);return this},Buffer.prototype.swap64=function(){var len=this.length;if(len%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<len;i+=8)swap(this,i,i+7),swap(this,i+1,i+6),swap(this,i+2,i+5),swap(this,i+3,i+4);return this},Buffer.prototype.toString=function(){var length=0|this.length;return 0===length?"":0===arguments.length?utf8Slice(this,0,length):function(encoding,start,end){var loweredCase=!1;if((void 0===start||start<0)&&(start=0),start>this.length)return"";if((void 0===end||end>this.length)&&(end=this.length),end<=0)return"";if((end>>>=0)<=(start>>>=0))return"";for(encoding||(encoding="utf8");;)switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"latin1":case"binary":return latin1Slice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase(),loweredCase=!0}}.apply(this,arguments)},Buffer.prototype.equals=function(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b||0===Buffer.compare(this,b)},Buffer.prototype.inspect=function(){var str="",max=exports.INSPECT_MAX_BYTES;return this.length>0&&(str=this.toString("hex",0,max).match(/.{2}/g).join(" "),this.length>max&&(str+=" ... ")),"<Buffer "+str+">"},Buffer.prototype.compare=function(target,start,end,thisStart,thisEnd){if(!Buffer.isBuffer(target))throw new TypeError("Argument must be a Buffer");if(void 0===start&&(start=0),void 0===end&&(end=target?target.length:0),void 0===thisStart&&(thisStart=0),void 0===thisEnd&&(thisEnd=this.length),start<0||end>target.length||thisStart<0||thisEnd>this.length)throw new RangeError("out of range index");if(thisStart>=thisEnd&&start>=end)return 0;if(thisStart>=thisEnd)return-1;if(start>=end)return 1;if(this===target)return 0;for(var x=(thisEnd>>>=0)-(thisStart>>>=0),y=(end>>>=0)-(start>>>=0),len=Math.min(x,y),thisCopy=this.slice(thisStart,thisEnd),targetCopy=target.slice(start,end),i=0;i<len;++i)if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i],y=targetCopy[i];break}return x<y?-1:y<x?1:0},Buffer.prototype.includes=function(val,byteOffset,encoding){return-1!==this.indexOf(val,byteOffset,encoding)},Buffer.prototype.indexOf=function(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!0)},Buffer.prototype.lastIndexOf=function(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!1)},Buffer.prototype.write=function(string,offset,length,encoding){if(void 0===offset)encoding="utf8",length=this.length,offset=0;else if(void 0===length&&"string"==typeof offset)encoding=offset,length=this.length,offset=0;else{if(!isFinite(offset))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");offset|=0,isFinite(length)?(length|=0,void 0===encoding&&(encoding="utf8")):(encoding=length,length=void 0)}var remaining=this.length-offset;if((void 0===length||length>remaining)&&(length=remaining),string.length>0&&(length<0||offset<0)||offset>this.length)throw new RangeError("Attempt to write outside buffer bounds");encoding||(encoding="utf8");for(var loweredCase=!1;;)switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":return asciiWrite(this,string,offset,length);case"latin1":case"binary":return latin1Write(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase(),loweredCase=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i)ret+=String.fromCharCode(127&buf[i]);return ret}function latin1Slice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i)ret+=String.fromCharCode(buf[i]);return ret}function hexSlice(buf,start,end){var len=buf.length;(!start||start<0)&&(start=0),(!end||end<0||end>len)&&(end=len);for(var out="",i=start;i<end;++i)out+=toHex(buf[i]);return out}function utf16leSlice(buf,start,end){for(var bytes=buf.slice(start,end),res="",i=0;i<bytes.length;i+=2)res+=String.fromCharCode(bytes[i]+256*bytes[i+1]);return res}function checkOffset(offset,ext,length){if(offset%1!=0||offset<0)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError('"buffer" argument must be a Buffer instance');if(value>max||value<min)throw new RangeError('"value" argument is out of bounds');if(offset+ext>buf.length)throw new RangeError("Index out of range")}function objectWriteUInt16(buf,value,offset,littleEndian){value<0&&(value=65535+value+1);for(var i=0,j=Math.min(buf.length-offset,2);i<j;++i)buf[offset+i]=(value&255<<8*(littleEndian?i:1-i))>>>8*(littleEndian?i:1-i)}function objectWriteUInt32(buf,value,offset,littleEndian){value<0&&(value=4294967295+value+1);for(var i=0,j=Math.min(buf.length-offset,4);i<j;++i)buf[offset+i]=value>>>8*(littleEndian?i:3-i)&255}function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext>buf.length)throw new RangeError("Index out of range");if(offset<0)throw new RangeError("Index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){return noAssert||checkIEEE754(buf,0,offset,4),ieee754.write(buf,value,offset,littleEndian,23,4),offset+4}function writeDouble(buf,value,offset,littleEndian,noAssert){return noAssert||checkIEEE754(buf,0,offset,8),ieee754.write(buf,value,offset,littleEndian,52,8),offset+8}Buffer.prototype.slice=function(start,end){var newBuf,len=this.length;if((start=~~start)<0?(start+=len)<0&&(start=0):start>len&&(start=len),(end=void 0===end?len:~~end)<0?(end+=len)<0&&(end=0):end>len&&(end=len),end<start&&(end=start),Buffer.TYPED_ARRAY_SUPPORT)(newBuf=this.subarray(start,end)).__proto__=Buffer.prototype;else{var sliceLen=end-start;newBuf=new Buffer(sliceLen,void 0);for(var i=0;i<sliceLen;++i)newBuf[i]=this[i+start]}return newBuf},Buffer.prototype.readUIntLE=function(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return val},Buffer.prototype.readUIntBE=function(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset+--byteLength],mul=1;byteLength>0&&(mul*=256);)val+=this[offset+--byteLength]*mul;return val},Buffer.prototype.readUInt8=function(offset,noAssert){return noAssert||checkOffset(offset,1,this.length),this[offset]},Buffer.prototype.readUInt16LE=function(offset,noAssert){return noAssert||checkOffset(offset,2,this.length),this[offset]|this[offset+1]<<8},Buffer.prototype.readUInt16BE=function(offset,noAssert){return noAssert||checkOffset(offset,2,this.length),this[offset]<<8|this[offset+1]},Buffer.prototype.readUInt32LE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+16777216*this[offset+3]},Buffer.prototype.readUInt32BE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),16777216*this[offset]+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])},Buffer.prototype.readIntLE=function(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return val>=(mul*=128)&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readIntBE=function(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var i=byteLength,mul=1,val=this[offset+--i];i>0&&(mul*=256);)val+=this[offset+--i]*mul;return val>=(mul*=128)&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readInt8=function(offset,noAssert){return noAssert||checkOffset(offset,1,this.length),128&this[offset]?-1*(255-this[offset]+1):this[offset]},Buffer.prototype.readInt16LE=function(offset,noAssert){noAssert||checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt16BE=function(offset,noAssert){noAssert||checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt32LE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24},Buffer.prototype.readInt32BE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]},Buffer.prototype.readFloatLE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!0,23,4)},Buffer.prototype.readFloatBE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!1,23,4)},Buffer.prototype.readDoubleLE=function(offset,noAssert){return noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!0,52,8)},Buffer.prototype.readDoubleBE=function(offset,noAssert){return noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!1,52,8)},Buffer.prototype.writeUIntLE=function(value,offset,byteLength,noAssert){(value=+value,offset|=0,byteLength|=0,noAssert)||checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength)-1,0);var mul=1,i=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUIntBE=function(value,offset,byteLength,noAssert){(value=+value,offset|=0,byteLength|=0,noAssert)||checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength)-1,0);var i=byteLength-1,mul=1;for(this[offset+i]=255&value;--i>=0&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUInt8=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(value=Math.floor(value)),this[offset]=255&value,offset+1},Buffer.prototype.writeUInt16LE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8):objectWriteUInt16(this,value,offset,!0),offset+2},Buffer.prototype.writeUInt16BE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>8,this[offset+1]=255&value):objectWriteUInt16(this,value,offset,!1),offset+2},Buffer.prototype.writeUInt32LE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset+3]=value>>>24,this[offset+2]=value>>>16,this[offset+1]=value>>>8,this[offset]=255&value):objectWriteUInt32(this,value,offset,!0),offset+4},Buffer.prototype.writeUInt32BE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value):objectWriteUInt32(this,value,offset,!1),offset+4},Buffer.prototype.writeIntLE=function(value,offset,byteLength,noAssert){if(value=+value,offset|=0,!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=0,mul=1,sub=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)value<0&&0===sub&&0!==this[offset+i-1]&&(sub=1),this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer.prototype.writeIntBE=function(value,offset,byteLength,noAssert){if(value=+value,offset|=0,!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=byteLength-1,mul=1,sub=0;for(this[offset+i]=255&value;--i>=0&&(mul*=256);)value<0&&0===sub&&0!==this[offset+i+1]&&(sub=1),this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer.prototype.writeInt8=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(value=Math.floor(value)),value<0&&(value=255+value+1),this[offset]=255&value,offset+1},Buffer.prototype.writeInt16LE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8):objectWriteUInt16(this,value,offset,!0),offset+2},Buffer.prototype.writeInt16BE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>8,this[offset+1]=255&value):objectWriteUInt16(this,value,offset,!1),offset+2},Buffer.prototype.writeInt32LE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8,this[offset+2]=value>>>16,this[offset+3]=value>>>24):objectWriteUInt32(this,value,offset,!0),offset+4},Buffer.prototype.writeInt32BE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),value<0&&(value=4294967295+value+1),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value):objectWriteUInt32(this,value,offset,!1),offset+4},Buffer.prototype.writeFloatLE=function(value,offset,noAssert){return writeFloat(this,value,offset,!0,noAssert)},Buffer.prototype.writeFloatBE=function(value,offset,noAssert){return writeFloat(this,value,offset,!1,noAssert)},Buffer.prototype.writeDoubleLE=function(value,offset,noAssert){return writeDouble(this,value,offset,!0,noAssert)},Buffer.prototype.writeDoubleBE=function(value,offset,noAssert){return writeDouble(this,value,offset,!1,noAssert)},Buffer.prototype.copy=function(target,targetStart,start,end){if(start||(start=0),end||0===end||(end=this.length),targetStart>=target.length&&(targetStart=target.length),targetStart||(targetStart=0),end>0&&end<start&&(end=start),end===start)return 0;if(0===target.length||0===this.length)return 0;if(targetStart<0)throw new RangeError("targetStart out of bounds");if(start<0||start>=this.length)throw new RangeError("sourceStart out of bounds");if(end<0)throw new RangeError("sourceEnd out of bounds");end>this.length&&(end=this.length),target.length-targetStart<end-start&&(end=target.length-targetStart+start);var i,len=end-start;if(this===target&&start<targetStart&&targetStart<end)for(i=len-1;i>=0;--i)target[i+targetStart]=this[i+start];else if(len<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(i=0;i<len;++i)target[i+targetStart]=this[i+start];else Uint8Array.prototype.set.call(target,this.subarray(start,start+len),targetStart);return len},Buffer.prototype.fill=function(val,start,end,encoding){if("string"==typeof val){if("string"==typeof start?(encoding=start,start=0,end=this.length):"string"==typeof end&&(encoding=end,end=this.length),1===val.length){var code=val.charCodeAt(0);code<256&&(val=code)}if(void 0!==encoding&&"string"!=typeof encoding)throw new TypeError("encoding must be a string");if("string"==typeof encoding&&!Buffer.isEncoding(encoding))throw new TypeError("Unknown encoding: "+encoding)}else"number"==typeof val&&(val&=255);if(start<0||this.length<start||this.length<end)throw new RangeError("Out of range index");if(end<=start)return this;var i;if(start>>>=0,end=void 0===end?this.length:end>>>0,val||(val=0),"number"==typeof val)for(i=start;i<end;++i)this[i]=val;else{var bytes=Buffer.isBuffer(val)?val:utf8ToBytes(new Buffer(val,encoding).toString()),len=bytes.length;for(i=0;i<end-start;++i)this[i+start]=bytes[i%len]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function toHex(n){return n<16?"0"+n.toString(16):n.toString(16)}function utf8ToBytes(string,units){var codePoint;units=units||1/0;for(var length=string.length,leadSurrogate=null,bytes=[],i=0;i<length;++i){if((codePoint=string.charCodeAt(i))>55295&&codePoint<57344){if(!leadSurrogate){if(codePoint>56319){(units-=3)>-1&&bytes.push(239,191,189);continue}if(i+1===length){(units-=3)>-1&&bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(codePoint<56320){(units-=3)>-1&&bytes.push(239,191,189),leadSurrogate=codePoint;continue}codePoint=65536+(leadSurrogate-55296<<10|codePoint-56320)}else leadSurrogate&&(units-=3)>-1&&bytes.push(239,191,189);if(leadSurrogate=null,codePoint<128){if((units-=1)<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,63&codePoint|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,63&codePoint|128)}else{if(!(codePoint<1114112))throw new Error("Invalid code point");if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,63&codePoint|128)}}return bytes}function base64ToBytes(str){return base64.toByteArray(function(str){if((str=function(str){return str.trim?str.trim():str.replace(/^\s+|\s+$/g,"")}(str).replace(INVALID_BASE64_RE,"")).length<2)return"";for(;str.length%4!=0;)str+="=";return str}(str))}function blitBuffer(src,dst,offset,length){for(var i=0;i<length&&!(i+offset>=dst.length||i>=src.length);++i)dst[i+offset]=src[i];return i}}).call(this,__webpack_require__(17))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(condition,message){if(!condition)throw new Error(message||"loader assertion failed.")}},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(9),_interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.MAPBOX_LIMITS=void 0;var _slicedToArray2=_interopRequireDefault(__webpack_require__(11)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_defineProperty2=_interopRequireDefault(__webpack_require__(6)),_viewportMercatorProject=_interopRequireWildcard(__webpack_require__(37)),_mathUtils=(__webpack_require__(146),__webpack_require__(147)),_assert=_interopRequireDefault(__webpack_require__(117)),MAPBOX_LIMITS={minZoom:0,maxZoom:24,minPitch:0,maxPitch:60};exports.MAPBOX_LIMITS=MAPBOX_LIMITS;var DEFAULT_STATE={pitch:0,bearing:0,altitude:1.5},MapState=function(){function MapState(_ref){var width=_ref.width,height=_ref.height,latitude=_ref.latitude,longitude=_ref.longitude,zoom=_ref.zoom,_ref$bearing=_ref.bearing,bearing=void 0===_ref$bearing?DEFAULT_STATE.bearing:_ref$bearing,_ref$pitch=_ref.pitch,pitch=void 0===_ref$pitch?DEFAULT_STATE.pitch:_ref$pitch,_ref$altitude=_ref.altitude,altitude=void 0===_ref$altitude?DEFAULT_STATE.altitude:_ref$altitude,_ref$maxZoom=_ref.maxZoom,maxZoom=void 0===_ref$maxZoom?MAPBOX_LIMITS.maxZoom:_ref$maxZoom,_ref$minZoom=_ref.minZoom,minZoom=void 0===_ref$minZoom?MAPBOX_LIMITS.minZoom:_ref$minZoom,_ref$maxPitch=_ref.maxPitch,maxPitch=void 0===_ref$maxPitch?MAPBOX_LIMITS.maxPitch:_ref$maxPitch,_ref$minPitch=_ref.minPitch,minPitch=void 0===_ref$minPitch?MAPBOX_LIMITS.minPitch:_ref$minPitch,transitionDuration=_ref.transitionDuration,transitionEasing=_ref.transitionEasing,transitionInterpolator=_ref.transitionInterpolator,transitionInterruption=_ref.transitionInterruption,startPanLngLat=_ref.startPanLngLat,startZoomLngLat=_ref.startZoomLngLat,startBearing=_ref.startBearing,startPitch=_ref.startPitch,startZoom=_ref.startZoom;(0,_classCallCheck2.default)(this,MapState),(0,_defineProperty2.default)(this,"_viewportProps",void 0),(0,_defineProperty2.default)(this,"_interactiveState",void 0),(0,_assert.default)(Number.isFinite(width),"`width` must be supplied"),(0,_assert.default)(Number.isFinite(height),"`height` must be supplied"),(0,_assert.default)(Number.isFinite(longitude),"`longitude` must be supplied"),(0,_assert.default)(Number.isFinite(latitude),"`latitude` must be supplied"),(0,_assert.default)(Number.isFinite(zoom),"`zoom` must be supplied"),this._viewportProps=this._applyConstraints({width:width,height:height,latitude:latitude,longitude:longitude,zoom:zoom,bearing:bearing,pitch:pitch,altitude:altitude,maxZoom:maxZoom,minZoom:minZoom,maxPitch:maxPitch,minPitch:minPitch,transitionDuration:transitionDuration,transitionEasing:transitionEasing,transitionInterpolator:transitionInterpolator,transitionInterruption:transitionInterruption}),this._interactiveState={startPanLngLat:startPanLngLat,startZoomLngLat:startZoomLngLat,startBearing:startBearing,startPitch:startPitch,startZoom:startZoom}}return(0,_createClass2.default)(MapState,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(_ref2){var pos=_ref2.pos;return this._getUpdatedMapState({startPanLngLat:this._unproject(pos)})}},{key:"pan",value:function(_ref3){var pos=_ref3.pos,startPos=_ref3.startPos,startPanLngLat=this._interactiveState.startPanLngLat||this._unproject(startPos);if(!startPanLngLat)return this;var _this$_calculateNewLn=this._calculateNewLngLat({startPanLngLat:startPanLngLat,pos:pos}),_this$_calculateNewLn2=(0,_slicedToArray2.default)(_this$_calculateNewLn,2),longitude=_this$_calculateNewLn2[0],latitude=_this$_calculateNewLn2[1];return this._getUpdatedMapState({longitude:longitude,latitude:latitude})}},{key:"panEnd",value:function(){return this._getUpdatedMapState({startPanLngLat:null})}},{key:"rotateStart",value:function(_ref4){_ref4.pos;return this._getUpdatedMapState({startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(_ref5){var _ref5$deltaScaleX=_ref5.deltaScaleX,deltaScaleX=void 0===_ref5$deltaScaleX?0:_ref5$deltaScaleX,_ref5$deltaScaleY=_ref5.deltaScaleY,deltaScaleY=void 0===_ref5$deltaScaleY?0:_ref5$deltaScaleY,_this$_interactiveSta=this._interactiveState,startBearing=_this$_interactiveSta.startBearing,startPitch=_this$_interactiveSta.startPitch;if(!Number.isFinite(startBearing)||!Number.isFinite(startPitch))return this;var _this$_calculateNewPi=this._calculateNewPitchAndBearing({deltaScaleX:deltaScaleX,deltaScaleY:deltaScaleY,startBearing:startBearing||0,startPitch:startPitch||0}),pitch=_this$_calculateNewPi.pitch,bearing=_this$_calculateNewPi.bearing;return this._getUpdatedMapState({bearing:bearing,pitch:pitch})}},{key:"rotateEnd",value:function(){return this._getUpdatedMapState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(_ref6){var pos=_ref6.pos;return this._getUpdatedMapState({startZoomLngLat:this._unproject(pos),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(_ref7){var pos=_ref7.pos,startPos=_ref7.startPos,scale=_ref7.scale;(0,_assert.default)(scale>0,"`scale` must be a positive number");var _this$_interactiveSta2=this._interactiveState,startZoom=_this$_interactiveSta2.startZoom,startZoomLngLat=_this$_interactiveSta2.startZoomLngLat;Number.isFinite(startZoom)||(startZoom=this._viewportProps.zoom,startZoomLngLat=this._unproject(startPos)||this._unproject(pos)),(0,_assert.default)(startZoomLngLat,"`startZoomLngLat` prop is required for zoom behavior to calculate where to position the map.");var zoom=this._calculateNewZoom({scale:scale,startZoom:startZoom||0}),_zoomedViewport$getMa=new _viewportMercatorProject.default(Object.assign({},this._viewportProps,{zoom:zoom})).getMapCenterByLngLatPosition({lngLat:startZoomLngLat,pos:pos}),_zoomedViewport$getMa2=(0,_slicedToArray2.default)(_zoomedViewport$getMa,2),longitude=_zoomedViewport$getMa2[0],latitude=_zoomedViewport$getMa2[1];return this._getUpdatedMapState({zoom:zoom,longitude:longitude,latitude:latitude})}},{key:"zoomEnd",value:function(){return this._getUpdatedMapState({startZoomLngLat:null,startZoom:null})}},{key:"_getUpdatedMapState",value:function(newProps){return new MapState(Object.assign({},this._viewportProps,this._interactiveState,newProps))}},{key:"_applyConstraints",value:function(props){var maxZoom=props.maxZoom,minZoom=props.minZoom,zoom=props.zoom;props.zoom=(0,_mathUtils.clamp)(zoom,minZoom,maxZoom);var maxPitch=props.maxPitch,minPitch=props.minPitch,pitch=props.pitch;return props.pitch=(0,_mathUtils.clamp)(pitch,minPitch,maxPitch),Object.assign(props,(0,_viewportMercatorProject.normalizeViewportProps)(props)),props}},{key:"_unproject",value:function(pos){var viewport=new _viewportMercatorProject.default(this._viewportProps);return pos&&viewport.unproject(pos)}},{key:"_calculateNewLngLat",value:function(_ref8){var startPanLngLat=_ref8.startPanLngLat,pos=_ref8.pos;return new _viewportMercatorProject.default(this._viewportProps).getMapCenterByLngLatPosition({lngLat:startPanLngLat,pos:pos})}},{key:"_calculateNewZoom",value:function(_ref9){var scale=_ref9.scale,startZoom=_ref9.startZoom,_this$_viewportProps=this._viewportProps,maxZoom=_this$_viewportProps.maxZoom,minZoom=_this$_viewportProps.minZoom,zoom=startZoom+Math.log2(scale);return(0,_mathUtils.clamp)(zoom,minZoom,maxZoom)}},{key:"_calculateNewPitchAndBearing",value:function(_ref10){var deltaScaleX=_ref10.deltaScaleX,deltaScaleY=_ref10.deltaScaleY,startBearing=_ref10.startBearing,startPitch=_ref10.startPitch;deltaScaleY=(0,_mathUtils.clamp)(deltaScaleY,-1,1);var _this$_viewportProps2=this._viewportProps,minPitch=_this$_viewportProps2.minPitch,maxPitch=_this$_viewportProps2.maxPitch,pitch=startPitch;return deltaScaleY>0?pitch=startPitch+deltaScaleY*(maxPitch-startPitch):deltaScaleY<0&&(pitch=startPitch-deltaScaleY*(minPitch-startPitch)),{pitch:pitch,bearing:startBearing+180*deltaScaleX}}}]),MapState}();exports.default=MapState},function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(38);module.exports=bind.call(Function.call,Object.prototype.hasOwnProperty)},function(module,exports,__webpack_require__){"use strict";var ThrowTypeError=Object.getOwnPropertyDescriptor?function(){return Object.getOwnPropertyDescriptor(arguments,"callee").get}():function(){throw new TypeError},hasSymbols="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,getProto=Object.getPrototypeOf||function(x){return x.__proto__},asyncGenIterator=void 0,TypedArray="undefined"==typeof Uint8Array?void 0:getProto(Uint8Array),INTRINSICS={"$ %Array%":Array,"$ %ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"$ %ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"$ %ArrayIteratorPrototype%":hasSymbols?getProto([][Symbol.iterator]()):void 0,"$ %ArrayPrototype%":Array.prototype,"$ %ArrayProto_entries%":Array.prototype.entries,"$ %ArrayProto_forEach%":Array.prototype.forEach,"$ %ArrayProto_keys%":Array.prototype.keys,"$ %ArrayProto_values%":Array.prototype.values,"$ %AsyncFromSyncIteratorPrototype%":void 0,"$ %AsyncFunction%":void 0,"$ %AsyncFunctionPrototype%":void 0,"$ %AsyncGenerator%":void 0,"$ %AsyncGeneratorFunction%":void 0,"$ %AsyncGeneratorPrototype%":void 0,"$ %AsyncIteratorPrototype%":asyncGenIterator&&hasSymbols&&Symbol.asyncIterator?asyncGenIterator[Symbol.asyncIterator]():void 0,"$ %Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"$ %Boolean%":Boolean,"$ %BooleanPrototype%":Boolean.prototype,"$ %DataView%":"undefined"==typeof DataView?void 0:DataView,"$ %DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"$ %Date%":Date,"$ %DatePrototype%":Date.prototype,"$ %decodeURI%":decodeURI,"$ %decodeURIComponent%":decodeURIComponent,"$ %encodeURI%":encodeURI,"$ %encodeURIComponent%":encodeURIComponent,"$ %Error%":Error,"$ %ErrorPrototype%":Error.prototype,"$ %eval%":eval,"$ %EvalError%":EvalError,"$ %EvalErrorPrototype%":EvalError.prototype,"$ %Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"$ %Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"$ %Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"$ %Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"$ %Function%":Function,"$ %FunctionPrototype%":Function.prototype,"$ %Generator%":void 0,"$ %GeneratorFunction%":void 0,"$ %GeneratorPrototype%":void 0,"$ %Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"$ %Int8ArrayPrototype%":"undefined"==typeof Int8Array?void 0:Int8Array.prototype,"$ %Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"$ %Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"$ %Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"$ %Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"$ %isFinite%":isFinite,"$ %isNaN%":isNaN,"$ %IteratorPrototype%":hasSymbols?getProto(getProto([][Symbol.iterator]())):void 0,"$ %JSON%":JSON,"$ %JSONParse%":JSON.parse,"$ %Map%":"undefined"==typeof Map?void 0:Map,"$ %MapIteratorPrototype%":"undefined"!=typeof Map&&hasSymbols?getProto((new Map)[Symbol.iterator]()):void 0,"$ %MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"$ %Math%":Math,"$ %Number%":Number,"$ %NumberPrototype%":Number.prototype,"$ %Object%":Object,"$ %ObjectPrototype%":Object.prototype,"$ %ObjProto_toString%":Object.prototype.toString,"$ %ObjProto_valueOf%":Object.prototype.valueOf,"$ %parseFloat%":parseFloat,"$ %parseInt%":parseInt,"$ %Promise%":"undefined"==typeof Promise?void 0:Promise,"$ %PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"$ %PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"$ %Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"$ %Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"$ %Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,"$ %Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"$ %RangeError%":RangeError,"$ %RangeErrorPrototype%":RangeError.prototype,"$ %ReferenceError%":ReferenceError,"$ %ReferenceErrorPrototype%":ReferenceError.prototype,"$ %Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"$ %RegExp%":RegExp,"$ %RegExpPrototype%":RegExp.prototype,"$ %Set%":"undefined"==typeof Set?void 0:Set,"$ %SetIteratorPrototype%":"undefined"!=typeof Set&&hasSymbols?getProto((new Set)[Symbol.iterator]()):void 0,"$ %SetPrototype%":"undefined"==typeof Set?void 0:Set.prototype,"$ %SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"$ %SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"$ %String%":String,"$ %StringIteratorPrototype%":hasSymbols?getProto(""[Symbol.iterator]()):void 0,"$ %StringPrototype%":String.prototype,"$ %Symbol%":hasSymbols?Symbol:void 0,"$ %SymbolPrototype%":hasSymbols?Symbol.prototype:void 0,"$ %SyntaxError%":SyntaxError,"$ %SyntaxErrorPrototype%":SyntaxError.prototype,"$ %ThrowTypeError%":ThrowTypeError,"$ %TypedArray%":TypedArray,"$ %TypedArrayPrototype%":TypedArray?TypedArray.prototype:void 0,"$ %TypeError%":TypeError,"$ %TypeErrorPrototype%":TypeError.prototype,"$ %Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"$ %Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"$ %Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"$ %Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"$ %Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"$ %Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"$ %Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"$ %Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"$ %URIError%":URIError,"$ %URIErrorPrototype%":URIError.prototype,"$ %WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"$ %WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"$ %WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"$ %WeakSetPrototype%":"undefined"==typeof WeakSet?void 0:WeakSet.prototype};module.exports=function(name,allowMissing){if(arguments.length>1&&"boolean"!=typeof allowMissing)throw new TypeError('"allowMissing" argument must be a boolean');var key="$ "+name;if(!(key in INTRINSICS))throw new SyntaxError("intrinsic "+name+" does not exist!");if(void 0===INTRINSICS[key]&&!allowMissing)throw new TypeError("intrinsic "+name+" exists, but is not available. Please file an issue!");return INTRINSICS[key]}},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(153)},function(module,exports,__webpack_require__){"use strict";var global=__webpack_require__(26),has=__webpack_require__(54),DESCRIPTORS=__webpack_require__(31),$export=__webpack_require__(18),redefine=__webpack_require__(39),META=__webpack_require__(121).KEY,$fails=__webpack_require__(33),shared=__webpack_require__(157),setToStringTag=__webpack_require__(97),uid=__webpack_require__(95),wks=__webpack_require__(22),wksExt=__webpack_require__(247),wksDefine=__webpack_require__(158),enumKeys=__webpack_require__(475),isArray=__webpack_require__(163),anObject=__webpack_require__(35),isObject=__webpack_require__(28),toIObject=__webpack_require__(80),toPrimitive=__webpack_require__(120),createDesc=__webpack_require__(94),_create=__webpack_require__(99),gOPNExt=__webpack_require__(477),$GOPD=__webpack_require__(165),$DP=__webpack_require__(34),$keys=__webpack_require__(79),gOPD=$GOPD.f,dP=$DP.f,gOPN=gOPNExt.f,$Symbol=global.Symbol,$JSON=global.JSON,_stringify=$JSON&&$JSON.stringify,HIDDEN=wks("_hidden"),TO_PRIMITIVE=wks("toPrimitive"),isEnum={}.propertyIsEnumerable,SymbolRegistry=shared("symbol-registry"),AllSymbols=shared("symbols"),OPSymbols=shared("op-symbols"),ObjectProto=Object.prototype,USE_NATIVE="function"==typeof $Symbol,QObject=global.QObject,setter=!QObject||!QObject.prototype||!QObject.prototype.findChild,setSymbolDesc=DESCRIPTORS&&$fails(function(){return 7!=_create(dP({},"a",{get:function(){return dP(this,"a",{value:7}).a}})).a})?function(it,key,D){var protoDesc=gOPD(ObjectProto,key);protoDesc&&delete ObjectProto[key],dP(it,key,D),protoDesc&&it!==ObjectProto&&dP(ObjectProto,key,protoDesc)}:dP,wrap=function(tag){var sym=AllSymbols[tag]=_create($Symbol.prototype);return sym._k=tag,sym},isSymbol=USE_NATIVE&&"symbol"==typeof $Symbol.iterator?function(it){return"symbol"==typeof it}:function(it){return it instanceof $Symbol},$defineProperty=function(it,key,D){return it===ObjectProto&&$defineProperty(OPSymbols,key,D),anObject(it),key=toPrimitive(key,!0),anObject(D),has(AllSymbols,key)?(D.enumerable?(has(it,HIDDEN)&&it[HIDDEN][key]&&(it[HIDDEN][key]=!1),D=_create(D,{enumerable:createDesc(0,!1)})):(has(it,HIDDEN)||dP(it,HIDDEN,createDesc(1,{})),it[HIDDEN][key]=!0),setSymbolDesc(it,key,D)):dP(it,key,D)},$defineProperties=function(it,P){anObject(it);for(var key,keys=enumKeys(P=toIObject(P)),i=0,l=keys.length;l>i;)$defineProperty(it,key=keys[i++],P[key]);return it},$propertyIsEnumerable=function(key){var E=isEnum.call(this,key=toPrimitive(key,!0));return!(this===ObjectProto&&has(AllSymbols,key)&&!has(OPSymbols,key))&&(!(E||!has(this,key)||!has(AllSymbols,key)||has(this,HIDDEN)&&this[HIDDEN][key])||E)},$getOwnPropertyDescriptor=function(it,key){if(it=toIObject(it),key=toPrimitive(key,!0),it!==ObjectProto||!has(AllSymbols,key)||has(OPSymbols,key)){var D=gOPD(it,key);return!D||!has(AllSymbols,key)||has(it,HIDDEN)&&it[HIDDEN][key]||(D.enumerable=!0),D}},$getOwnPropertyNames=function(it){for(var key,names=gOPN(toIObject(it)),result=[],i=0;names.length>i;)has(AllSymbols,key=names[i++])||key==HIDDEN||key==META||result.push(key);return result},$getOwnPropertySymbols=function(it){for(var key,IS_OP=it===ObjectProto,names=gOPN(IS_OP?OPSymbols:toIObject(it)),result=[],i=0;names.length>i;)!has(AllSymbols,key=names[i++])||IS_OP&&!has(ObjectProto,key)||result.push(AllSymbols[key]);return result};USE_NATIVE||(redefine(($Symbol=function(){if(this instanceof $Symbol)throw TypeError("Symbol is not a constructor!");var tag=uid(arguments.length>0?arguments[0]:void 0),$set=function(value){this===ObjectProto&&$set.call(OPSymbols,value),has(this,HIDDEN)&&has(this[HIDDEN],tag)&&(this[HIDDEN][tag]=!1),setSymbolDesc(this,tag,createDesc(1,value))};return DESCRIPTORS&&setter&&setSymbolDesc(ObjectProto,tag,{configurable:!0,set:$set}),wrap(tag)}).prototype,"toString",function(){return this._k}),$GOPD.f=$getOwnPropertyDescriptor,$DP.f=$defineProperty,__webpack_require__(164).f=gOPNExt.f=$getOwnPropertyNames,__webpack_require__(123).f=$propertyIsEnumerable,__webpack_require__(162).f=$getOwnPropertySymbols,DESCRIPTORS&&!__webpack_require__(96)&&redefine(ObjectProto,"propertyIsEnumerable",$propertyIsEnumerable,!0),wksExt.f=function(name){return wrap(wks(name))}),$export($export.G+$export.W+$export.F*!USE_NATIVE,{Symbol:$Symbol});for(var es6Symbols="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),j=0;es6Symbols.length>j;)wks(es6Symbols[j++]);for(var wellKnownSymbols=$keys(wks.store),k=0;wellKnownSymbols.length>k;)wksDefine(wellKnownSymbols[k++]);$export($export.S+$export.F*!USE_NATIVE,"Symbol",{for:function(key){return has(SymbolRegistry,key+="")?SymbolRegistry[key]:SymbolRegistry[key]=$Symbol(key)},keyFor:function(sym){if(!isSymbol(sym))throw TypeError(sym+" is not a symbol!");for(var key in SymbolRegistry)if(SymbolRegistry[key]===sym)return key},useSetter:function(){setter=!0},useSimple:function(){setter=!1}}),$export($export.S+$export.F*!USE_NATIVE,"Object",{create:function(it,P){return void 0===P?_create(it):$defineProperties(_create(it),P)},defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor,getOwnPropertyNames:$getOwnPropertyNames,getOwnPropertySymbols:$getOwnPropertySymbols}),$JSON&&$export($export.S+$export.F*(!USE_NATIVE||$fails(function(){var S=$Symbol();return"[null]"!=_stringify([S])||"{}"!=_stringify({a:S})||"{}"!=_stringify(Object(S))})),"JSON",{stringify:function(it){for(var replacer,$replacer,args=[it],i=1;arguments.length>i;)args.push(arguments[i++]);if($replacer=replacer=args[1],(isObject(replacer)||void 0!==it)&&!isSymbol(it))return isArray(replacer)||(replacer=function(key,value){if("function"==typeof $replacer&&(value=$replacer.call(this,key,value)),!isSymbol(value))return value}),args[1]=replacer,_stringify.apply($JSON,args)}}),$Symbol.prototype[TO_PRIMITIVE]||__webpack_require__(56)($Symbol.prototype,TO_PRIMITIVE,$Symbol.prototype.valueOf),setToStringTag($Symbol,"Symbol"),setToStringTag(Math,"Math",!0),setToStringTag(global.JSON,"JSON",!0)},function(module,exports,__webpack_require__){var $keys=__webpack_require__(248),enumBugKeys=__webpack_require__(161);module.exports=Object.keys||function(O){return $keys(O,enumBugKeys)}},function(module,exports,__webpack_require__){var IObject=__webpack_require__(122),defined=__webpack_require__(98);module.exports=function(it){return IObject(defined(it))}},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(159),min=Math.min;module.exports=function(it){return it>0?min(toInteger(it),9007199254740991):0}},function(module,exports,__webpack_require__){__webpack_require__(158)("asyncIterator")},function(module,exports,__webpack_require__){"use strict";var fails=__webpack_require__(33);module.exports=function(method,arg){return!!method&&fails(function(){arg?method.call(null,function(){},1):method.call(null)})}},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var FlowMapLayer_1=__importDefault(__webpack_require__(283));__export(__webpack_require__(283)),__export(__webpack_require__(225));var colors_1=__webpack_require__(385);exports.getColorsRGBA=colors_1.getColorsRGBA,exports.getDiffColorsRGBA=colors_1.getDiffColorsRGBA,exports.isDiffColorsRGBA=colors_1.isDiffColorsRGBA,exports.rgbaAsString=colors_1.rgbaAsString,exports.default=FlowMapLayer_1.default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0),_interopRequireWildcard=__webpack_require__(9);Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"VERSION",{enumerable:!0,get:function(){return _globals.VERSION}}),Object.defineProperty(exports,"self",{enumerable:!0,get:function(){return _globals2.self}}),Object.defineProperty(exports,"window",{enumerable:!0,get:function(){return _globals2.window}}),Object.defineProperty(exports,"global",{enumerable:!0,get:function(){return _globals2.global}}),Object.defineProperty(exports,"document",{enumerable:!0,get:function(){return _globals2.document}}),Object.defineProperty(exports,"process",{enumerable:!0,get:function(){return _globals2.process}}),Object.defineProperty(exports,"console",{enumerable:!0,get:function(){return _globals2.console}}),Object.defineProperty(exports,"isBrowser",{enumerable:!0,get:function(){return _isBrowser.default}}),Object.defineProperty(exports,"isBrowserMainThread",{enumerable:!0,get:function(){return _isBrowser.isBrowserMainThread}}),Object.defineProperty(exports,"getBrowser",{enumerable:!0,get:function(){return _getBrowser.default}}),Object.defineProperty(exports,"isMobile",{enumerable:!0,get:function(){return _getBrowser.isMobile}}),Object.defineProperty(exports,"isElectron",{enumerable:!0,get:function(){return _isElectron.default}}),Object.defineProperty(exports,"assert",{enumerable:!0,get:function(){return _assert.default}}),Object.defineProperty(exports,"Stats",{enumerable:!0,get:function(){return _stats.default}}),Object.defineProperty(exports,"Log",{enumerable:!0,get:function(){return _log.default}}),Object.defineProperty(exports,"COLOR",{enumerable:!0,get:function(){return _color.COLOR}}),Object.defineProperty(exports,"addColor",{enumerable:!0,get:function(){return _color.addColor}}),Object.defineProperty(exports,"leftPad",{enumerable:!0,get:function(){return _formatters.leftPad}}),Object.defineProperty(exports,"rightPad",{enumerable:!0,get:function(){return _formatters.rightPad}}),Object.defineProperty(exports,"autobind",{enumerable:!0,get:function(){return _autobind.autobind}}),Object.defineProperty(exports,"LocalStorage",{enumerable:!0,get:function(){return _localStorage.default}}),Object.defineProperty(exports,"getHiResTimestamp",{enumerable:!0,get:function(){return _hiResTimestamp.default}}),exports.default=void 0,__webpack_require__(610);var _globals=__webpack_require__(103),_globals2=__webpack_require__(185),_isBrowser=_interopRequireWildcard(__webpack_require__(183)),_getBrowser=_interopRequireWildcard(__webpack_require__(611)),_isElectron=_interopRequireDefault(__webpack_require__(184)),_assert=_interopRequireDefault(__webpack_require__(285)),_stats=_interopRequireDefault(__webpack_require__(612)),_log=_interopRequireDefault(__webpack_require__(614)),_color=__webpack_require__(288),_formatters=__webpack_require__(287),_autobind=__webpack_require__(289),_localStorage=_interopRequireDefault(__webpack_require__(286)),_hiResTimestamp=_interopRequireDefault(__webpack_require__(186)),_default=new _log.default({id:"probe.gl"});exports.default=_default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(6)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_resource=_interopRequireDefault(__webpack_require__(50)),_buffer=_interopRequireDefault(__webpack_require__(61)),_textureFormats=__webpack_require__(303),_context=__webpack_require__(106),_webglUtils=__webpack_require__(14),_utils=__webpack_require__(10),NPOT_MIN_FILTERS=[9729,9728],Texture=function(_Resource){function Texture(gl,props){var _this;(0,_classCallCheck2.default)(this,Texture);var _props$id=props.id,id=void 0===_props$id?(0,_utils.uid)("texture"):_props$id,handle=props.handle,target=props.target;return(_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Texture).call(this,gl,{id:id,handle:handle}))).target=target,_this.hasFloatTexture=gl.getExtension("OES_texture_float"),_this.textureUnit=void 0,_this.loaded=!1,_this.width=void 0,_this.height=void 0,_this.depth=void 0,_this.format=void 0,_this.type=void 0,_this.dataFormat=void 0,_this.border=void 0,_this.textureUnit=void 0,_this.mipmaps=void 0,_this}return(0,_inherits2.default)(Texture,_Resource),(0,_createClass2.default)(Texture,null,[{key:"isSupported",value:function(gl){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},format=_ref.format,linearFiltering=_ref.linearFiltering,supported=!0;return format&&(supported=(supported=supported&&(0,_textureFormats.isFormatSupported)(gl,format))&&(!linearFiltering||(0,_textureFormats.isLinearFilteringSupported)(gl,format))),supported}}]),(0,_createClass2.default)(Texture,[{key:"toString",value:function(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}},{key:"initialize",value:function(){var _this2=this,props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},data=props.data;if(data instanceof Promise)return data.then(function(resolvedImageData){return _this2.initialize(Object.assign({},props,{pixels:resolvedImageData,data:resolvedImageData}))}),this;var _props$pixels=props.pixels,pixels=void 0===_props$pixels?null:_props$pixels,_props$format=props.format,format=void 0===_props$format?6408:_props$format,_props$type=props.type,type=void 0===_props$type?5121:_props$type,_props$border=props.border,border=void 0===_props$border?0:_props$border,_props$recreate=props.recreate,recreate=void 0!==_props$recreate&&_props$recreate,_props$parameters=props.parameters,parameters=void 0===_props$parameters?{}:_props$parameters,_props$pixelStore=props.pixelStore,pixelStore=void 0===_props$pixelStore?{}:_props$pixelStore,_props$textureUnit=props.textureUnit,textureUnit=void 0===_props$textureUnit?void 0:_props$textureUnit,_props$unpackFlipY=props.unpackFlipY,unpackFlipY=void 0===_props$unpackFlipY||_props$unpackFlipY,_props$mipmaps=props.mipmaps,mipmaps=void 0===_props$mipmaps||_props$mipmaps;data||(data=pixels);var width=props.width,height=props.height,dataFormat=props.dataFormat,_props$depth=props.depth,depth=void 0===_props$depth?0:_props$depth,_this$_deduceParamete=this._deduceParameters({format:format,type:type,dataFormat:dataFormat,compressed:!1,data:data,width:width,height:height});width=_this$_deduceParamete.width,height=_this$_deduceParamete.height,dataFormat=_this$_deduceParamete.dataFormat,this.width=width,this.height=height,this.depth=depth,this.format=format,this.type=type,this.dataFormat=dataFormat,this.border=border,this.textureUnit=textureUnit,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle));var DEFAULT_TEXTURE_SETTINGS=(0,_defineProperty2.default)({},37440,unpackFlipY),glSettings=Object.assign({},DEFAULT_TEXTURE_SETTINGS,pixelStore);return mipmaps&&this._isNPOT()&&(_utils.log.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),mipmaps=!1,this._updateForNPOT(parameters)),this.mipmaps=mipmaps,this.setImageData({data:data,width:width,height:height,depth:depth,format:format,type:type,dataFormat:dataFormat,border:border,mipmaps:mipmaps,parameters:glSettings}),mipmaps&&this.generateMipmap(),this.setParameters(parameters),recreate&&(this.data=data),this}},{key:"resize",value:function(_ref2){var width=_ref2.width,height=_ref2.height;return width!==this.width||height!==this.height?this.initialize({width:width,height:height,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:!1}):this}},{key:"generateMipmap",value:function(){var _this3=this,params=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindTexture(this.target,this.handle),(0,_context.withParameters)(this.gl,params,function(){_this3.gl.generateMipmap(_this3.target)}),this.gl.bindTexture(this.target,null),this}},{key:"setImageData",value:function(options){this._trackDeallocatedMemory("Texture");var _options$target=options.target,target=void 0===_options$target?this.target:_options$target,_options$pixels=options.pixels,pixels=void 0===_options$pixels?null:_options$pixels,_options$level=options.level,level=void 0===_options$level?0:_options$level,_options$format=options.format,format=void 0===_options$format?this.format:_options$format,_options$border=options.border,border=void 0===_options$border?this.border:_options$border,_options$offset=options.offset,offset=void 0===_options$offset?0:_options$offset,_options$parameters=options.parameters,parameters=void 0===_options$parameters?{}:_options$parameters,_options$data=options.data,data=void 0===_options$data?null:_options$data,_options$type=options.type,type=void 0===_options$type?this.type:_options$type,_options$width=options.width,width=void 0===_options$width?this.width:_options$width,_options$height=options.height,height=void 0===_options$height?this.height:_options$height,_options$dataFormat=options.dataFormat,dataFormat=void 0===_options$dataFormat?this.dataFormat:_options$dataFormat,_options$compressed=options.compressed,compressed=void 0!==_options$compressed&&_options$compressed;data||(data=pixels);var _this$_deduceParamete2=this._deduceParameters({format:format,type:type,dataFormat:dataFormat,compressed:compressed,data:data,width:width,height:height});type=_this$_deduceParamete2.type,dataFormat=_this$_deduceParamete2.dataFormat,compressed=_this$_deduceParamete2.compressed,width=_this$_deduceParamete2.width,height=_this$_deduceParamete2.height;var gl=this.gl;gl.bindTexture(this.target,this.handle);var dataType,_this$_getDataType=this._getDataType({data:data,compressed:compressed});if(data=_this$_getDataType.data,dataType=_this$_getDataType.dataType,(0,_context.withParameters)(this.gl,parameters,function(){switch(dataType){case"null":gl.texImage2D(target,level,format,width,height,border,dataFormat,type,data);break;case"typed-array":gl.texImage2D(target,level,format,width,height,border,dataFormat,type,data,offset);break;case"buffer":(0,_webglUtils.assertWebGL2Context)(gl),gl.bindBuffer(35052,data.handle||data),gl.texImage2D(target,level,format,width,height,border,dataFormat,type,offset),gl.bindBuffer(35052,null);break;case"browser-object":(0,_webglUtils.isWebGL2)(gl)?gl.texImage2D(target,level,format,width,height,border,dataFormat,type,data):gl.texImage2D(target,level,format,dataFormat,type,data);break;case"compressed":gl.compressedTexImage2D(target,level,format,width,height,border,data);break;default:(0,_utils.assert)(!1,"Unknown image data type")}}),data&&data.byteLength)this._trackAllocatedMemory(data.byteLength,"Texture");else{var channels=_textureFormats.DATA_FORMAT_CHANNELS[this.dataFormat]||4,channelSize=_textureFormats.TYPE_SIZES[this.type]||1;this._trackAllocatedMemory(this.width*this.height*channels*channelSize,"Texture")}return this.loaded=!0,this}},{key:"setSubImageData",value:function(_ref3){var _this4=this,_ref3$target=_ref3.target,target=void 0===_ref3$target?this.target:_ref3$target,_ref3$pixels=_ref3.pixels,pixels=void 0===_ref3$pixels?null:_ref3$pixels,_ref3$data=_ref3.data,data=void 0===_ref3$data?null:_ref3$data,_ref3$x=_ref3.x,x=void 0===_ref3$x?0:_ref3$x,_ref3$y=_ref3.y,y=void 0===_ref3$y?0:_ref3$y,_ref3$width=_ref3.width,width=void 0===_ref3$width?this.width:_ref3$width,_ref3$height=_ref3.height,height=void 0===_ref3$height?this.height:_ref3$height,_ref3$level=_ref3.level,level=void 0===_ref3$level?0:_ref3$level,_ref3$format=_ref3.format,format=void 0===_ref3$format?this.format:_ref3$format,_ref3$type=_ref3.type,type=void 0===_ref3$type?this.type:_ref3$type,_ref3$dataFormat=_ref3.dataFormat,dataFormat=void 0===_ref3$dataFormat?this.dataFormat:_ref3$dataFormat,_ref3$compressed=_ref3.compressed,compressed=void 0!==_ref3$compressed&&_ref3$compressed,_ref3$offset=_ref3.offset,offset=void 0===_ref3$offset?0:_ref3$offset,_ref3$border=_ref3.border,_ref3$parameters=(void 0===_ref3$border&&this.border,_ref3.parameters),parameters=void 0===_ref3$parameters?{}:_ref3$parameters,_this$_deduceParamete3=this._deduceParameters({format:format,type:type,dataFormat:dataFormat,compressed:compressed,data:data,width:width,height:height});if(type=_this$_deduceParamete3.type,dataFormat=_this$_deduceParamete3.dataFormat,compressed=_this$_deduceParamete3.compressed,width=_this$_deduceParamete3.width,height=_this$_deduceParamete3.height,(0,_utils.assert)(0===this.depth,"texSubImage not supported for 3D textures"),data||(data=pixels),data&&data.data){var ndarray=data;data=ndarray.data,width=ndarray.shape[0],height=ndarray.shape[1]}data instanceof _buffer.default&&(data=data.handle),this.gl.bindTexture(this.target,this.handle),(0,_context.withParameters)(this.gl,parameters,function(){compressed?_this4.gl.compressedTexSubImage2D(target,level,x,y,width,height,format,data):null===data?_this4.gl.texSubImage2D(target,level,x,y,width,height,dataFormat,type,null):ArrayBuffer.isView(data)?_this4.gl.texSubImage2D(target,level,x,y,width,height,dataFormat,type,data,offset):data instanceof _webglUtils.WebGLBuffer?((0,_webglUtils.assertWebGL2Context)(_this4.gl),_this4.gl.bindBuffer(35052,data),_this4.gl.texSubImage2D(target,level,x,y,width,height,dataFormat,type,offset),_this4.gl.bindBuffer(35052,null)):(0,_webglUtils.isWebGL2)(_this4.gl)?_this4.gl.texSubImage2D(target,level,x,y,width,height,dataFormat,type,data):_this4.gl.texSubImage2D(target,level,x,y,dataFormat,type,data)}),this.gl.bindTexture(this.target,null)}},{key:"copyFramebuffer",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _utils.log.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(34016)-33984}},{key:"bind",value:function(){var textureUnit=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,gl=this.gl;return void 0!==textureUnit&&(this.textureUnit=textureUnit,gl.activeTexture(33984+textureUnit)),gl.bindTexture(this.target,this.handle),textureUnit}},{key:"unbind",value:function(){var textureUnit=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,gl=this.gl;return void 0!==textureUnit&&(this.textureUnit=textureUnit,gl.activeTexture(33984+textureUnit)),gl.bindTexture(this.target,null),textureUnit}},{key:"_getDataType",value:function(_ref4){var data=_ref4.data,_ref4$compressed=_ref4.compressed;return void 0!==_ref4$compressed&&_ref4$compressed?{data:data,dataType:"compressed"}:null===data?{data:data,dataType:"null"}:ArrayBuffer.isView(data)?{data:data,dataType:"typed-array"}:data instanceof _buffer.default?{data:data.handle,dataType:"buffer"}:data instanceof _webglUtils.WebGLBuffer?{data:data,dataType:"buffer"}:{data:data,dataType:"browser-object"}}},{key:"_deduceParameters",value:function(opts){var format=opts.format,data=opts.data,width=opts.width,height=opts.height,dataFormat=opts.dataFormat,type=opts.type,compressed=opts.compressed,textureFormat=_textureFormats.TEXTURE_FORMATS[format];dataFormat=dataFormat||textureFormat&&textureFormat.dataFormat,type=type||textureFormat&&textureFormat.types[0],compressed=compressed||textureFormat&&textureFormat.compressed;var _this$_deduceImageSiz=this._deduceImageSize(data,width,height);return{dataFormat:dataFormat,type:type,compressed:compressed,width:width=_this$_deduceImageSiz.width,height:height=_this$_deduceImageSiz.height,format:format,data:data}}},{key:"_deduceImageSize",value:function(data,width,height){var size;return size="undefined"!=typeof ImageData&&data instanceof ImageData?{width:data.width,height:data.height}:"undefined"!=typeof HTMLImageElement&&data instanceof HTMLImageElement?{width:data.naturalWidth,height:data.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&data instanceof HTMLCanvasElement?{width:data.width,height:data.height}:"undefined"!=typeof HTMLVideoElement&&data instanceof HTMLVideoElement?{width:data.videoWidth,height:data.videoHeight}:data?{width:width,height:height}:{width:width>=0?width:1,height:height>=0?height:1},(0,_utils.assert)(size,"Could not deduced texture size"),(0,_utils.assert)(void 0===width||size.width===width,"Deduced texture width does not match supplied width"),(0,_utils.assert)(void 0===height||size.height===height,"Deduced texture height does not match supplied height"),size}},{key:"_createHandle",value:function(){return this.gl.createTexture()}},{key:"_deleteHandle",value:function(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}},{key:"_getParameter",value:function(pname){switch(pname){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);var value=this.gl.getTexParameter(this.target,pname);return this.gl.bindTexture(this.target,null),value}}},{key:"_setParameter",value:function(pname,param){switch(this.gl.bindTexture(this.target,this.handle),param=this._getNPOTParam(pname,param),pname){case 33082:case 33083:this.gl.texParameterf(this.handle,pname,param);break;case 4096:case 4097:(0,_utils.assert)(!1);break;default:this.gl.texParameteri(this.target,pname,param)}return this.gl.bindTexture(this.target,null),this}},{key:"_isNPOT",value:function(){return!(0,_webglUtils.isWebGL2)(this.gl)&&(!(!this.width||!this.height)&&(!(0,_utils.isPowerOfTwo)(this.width)||!(0,_utils.isPowerOfTwo)(this.height)))}},{key:"_updateForNPOT",value:function(parameters){void 0===parameters[this.gl.TEXTURE_MIN_FILTER]&&(parameters[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===parameters[this.gl.TEXTURE_WRAP_S]&&(parameters[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===parameters[this.gl.TEXTURE_WRAP_T]&&(parameters[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}},{key:"_getNPOTParam",value:function(pname,param){if(this._isNPOT())switch(pname){case 10241:-1===NPOT_MIN_FILTERS.indexOf(param)&&(param=9729);break;case 10242:case 10243:33071!==param&&(param=33071)}return param}}]),Texture}(_resource.default);exports.default=Texture},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setMatrixArrayType=function(type){exports.ARRAY_TYPE=ARRAY_TYPE=type},exports.toRadian=function(a){return a*degree},exports.equals=function(a,b){return Math.abs(a-b)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(b))},exports.RANDOM=exports.ARRAY_TYPE=exports.EPSILON=void 0;var EPSILON=1e-6;exports.EPSILON=EPSILON;var ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array;exports.ARRAY_TYPE=ARRAY_TYPE;var RANDOM=Math.random;exports.RANDOM=RANDOM;var degree=Math.PI/180},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(9),_interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_vector=_interopRequireDefault(__webpack_require__(198)),_common=__webpack_require__(43),vec3=_interopRequireWildcard(__webpack_require__(70)),ORIGIN=[0,0,0],Vector3=function(_Vector){function Vector3(){var _this,x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,_classCallCheck2.default)(this,Vector3),_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Vector3).call(this)),Array.isArray(x)&&1===arguments.length?_this.copy(x):_this.set(x,y,z),_this}return(0,_inherits2.default)(Vector3,_Vector),(0,_createClass2.default)(Vector3,[{key:"angle",value:function(vector){return vec3.angle(this,vector)}},{key:"cross",value:function(vector){return vec3.cross(this,this,vector),this.check()}},{key:"rotateX",value:function(_ref){var radians=_ref.radians,_ref$origin=_ref.origin,origin=void 0===_ref$origin?ORIGIN:_ref$origin;return vec3.rotateX(this,this,origin,radians),this.check()}},{key:"rotateY",value:function(_ref2){var radians=_ref2.radians,_ref2$origin=_ref2.origin,origin=void 0===_ref2$origin?ORIGIN:_ref2$origin;return vec3.rotateY(this,this,origin,radians),this.check()}},{key:"rotateZ",value:function(_ref3){var radians=_ref3.radians,_ref3$origin=_ref3.origin,origin=void 0===_ref3$origin?ORIGIN:_ref3$origin;return vec3.rotateZ(this,this,origin,radians),this.check()}},{key:"operation",value:function(_operation){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];return _operation.apply(void 0,[this,this].concat(args)),this.check()}},{key:"ELEMENTS",get:function(){return 3}},{key:"z",get:function(){return this[2]},set:function(value){return this[2]=(0,_common.checkNumber)(value)}}]),Vector3}(_vector.default);exports.default=Vector3},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=function(){var out=new glMatrix.ARRAY_TYPE(16);glMatrix.ARRAY_TYPE!=Float32Array&&(out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[11]=0,out[12]=0,out[13]=0,out[14]=0);return out[0]=1,out[5]=1,out[10]=1,out[15]=1,out},exports.clone=function(a){var out=new glMatrix.ARRAY_TYPE(16);return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out[4]=a[4],out[5]=a[5],out[6]=a[6],out[7]=a[7],out[8]=a[8],out[9]=a[9],out[10]=a[10],out[11]=a[11],out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15],out},exports.copy=function(out,a){return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out[4]=a[4],out[5]=a[5],out[6]=a[6],out[7]=a[7],out[8]=a[8],out[9]=a[9],out[10]=a[10],out[11]=a[11],out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15],out},exports.fromValues=function(m00,m01,m02,m03,m10,m11,m12,m13,m20,m21,m22,m23,m30,m31,m32,m33){var out=new glMatrix.ARRAY_TYPE(16);return out[0]=m00,out[1]=m01,out[2]=m02,out[3]=m03,out[4]=m10,out[5]=m11,out[6]=m12,out[7]=m13,out[8]=m20,out[9]=m21,out[10]=m22,out[11]=m23,out[12]=m30,out[13]=m31,out[14]=m32,out[15]=m33,out},exports.set=function(out,m00,m01,m02,m03,m10,m11,m12,m13,m20,m21,m22,m23,m30,m31,m32,m33){return out[0]=m00,out[1]=m01,out[2]=m02,out[3]=m03,out[4]=m10,out[5]=m11,out[6]=m12,out[7]=m13,out[8]=m20,out[9]=m21,out[10]=m22,out[11]=m23,out[12]=m30,out[13]=m31,out[14]=m32,out[15]=m33,out},exports.identity=identity,exports.transpose=function(out,a){if(out===a){var a01=a[1],a02=a[2],a03=a[3],a12=a[6],a13=a[7],a23=a[11];out[1]=a[4],out[2]=a[8],out[3]=a[12],out[4]=a01,out[6]=a[9],out[7]=a[13],out[8]=a02,out[9]=a12,out[11]=a[14],out[12]=a03,out[13]=a13,out[14]=a23}else out[0]=a[0],out[1]=a[4],out[2]=a[8],out[3]=a[12],out[4]=a[1],out[5]=a[5],out[6]=a[9],out[7]=a[13],out[8]=a[2],out[9]=a[6],out[10]=a[10],out[11]=a[14],out[12]=a[3],out[13]=a[7],out[14]=a[11],out[15]=a[15];return out},exports.invert=function(out,a){var a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15],b00=a00*a11-a01*a10,b01=a00*a12-a02*a10,b02=a00*a13-a03*a10,b03=a01*a12-a02*a11,b04=a01*a13-a03*a11,b05=a02*a13-a03*a12,b06=a20*a31-a21*a30,b07=a20*a32-a22*a30,b08=a20*a33-a23*a30,b09=a21*a32-a22*a31,b10=a21*a33-a23*a31,b11=a22*a33-a23*a32,det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(!det)return null;return det=1/det,out[0]=(a11*b11-a12*b10+a13*b09)*det,out[1]=(a02*b10-a01*b11-a03*b09)*det,out[2]=(a31*b05-a32*b04+a33*b03)*det,out[3]=(a22*b04-a21*b05-a23*b03)*det,out[4]=(a12*b08-a10*b11-a13*b07)*det,out[5]=(a00*b11-a02*b08+a03*b07)*det,out[6]=(a32*b02-a30*b05-a33*b01)*det,out[7]=(a20*b05-a22*b02+a23*b01)*det,out[8]=(a10*b10-a11*b08+a13*b06)*det,out[9]=(a01*b08-a00*b10-a03*b06)*det,out[10]=(a30*b04-a31*b02+a33*b00)*det,out[11]=(a21*b02-a20*b04-a23*b00)*det,out[12]=(a11*b07-a10*b09-a12*b06)*det,out[13]=(a00*b09-a01*b07+a02*b06)*det,out[14]=(a31*b01-a30*b03-a32*b00)*det,out[15]=(a20*b03-a21*b01+a22*b00)*det,out},exports.adjoint=function(out,a){var a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15];return out[0]=a11*(a22*a33-a23*a32)-a21*(a12*a33-a13*a32)+a31*(a12*a23-a13*a22),out[1]=-(a01*(a22*a33-a23*a32)-a21*(a02*a33-a03*a32)+a31*(a02*a23-a03*a22)),out[2]=a01*(a12*a33-a13*a32)-a11*(a02*a33-a03*a32)+a31*(a02*a13-a03*a12),out[3]=-(a01*(a12*a23-a13*a22)-a11*(a02*a23-a03*a22)+a21*(a02*a13-a03*a12)),out[4]=-(a10*(a22*a33-a23*a32)-a20*(a12*a33-a13*a32)+a30*(a12*a23-a13*a22)),out[5]=a00*(a22*a33-a23*a32)-a20*(a02*a33-a03*a32)+a30*(a02*a23-a03*a22),out[6]=-(a00*(a12*a33-a13*a32)-a10*(a02*a33-a03*a32)+a30*(a02*a13-a03*a12)),out[7]=a00*(a12*a23-a13*a22)-a10*(a02*a23-a03*a22)+a20*(a02*a13-a03*a12),out[8]=a10*(a21*a33-a23*a31)-a20*(a11*a33-a13*a31)+a30*(a11*a23-a13*a21),out[9]=-(a00*(a21*a33-a23*a31)-a20*(a01*a33-a03*a31)+a30*(a01*a23-a03*a21)),out[10]=a00*(a11*a33-a13*a31)-a10*(a01*a33-a03*a31)+a30*(a01*a13-a03*a11),out[11]=-(a00*(a11*a23-a13*a21)-a10*(a01*a23-a03*a21)+a20*(a01*a13-a03*a11)),out[12]=-(a10*(a21*a32-a22*a31)-a20*(a11*a32-a12*a31)+a30*(a11*a22-a12*a21)),out[13]=a00*(a21*a32-a22*a31)-a20*(a01*a32-a02*a31)+a30*(a01*a22-a02*a21),out[14]=-(a00*(a11*a32-a12*a31)-a10*(a01*a32-a02*a31)+a30*(a01*a12-a02*a11)),out[15]=a00*(a11*a22-a12*a21)-a10*(a01*a22-a02*a21)+a20*(a01*a12-a02*a11),out},exports.determinant=function(a){var a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15];return(a00*a11-a01*a10)*(a22*a33-a23*a32)-(a00*a12-a02*a10)*(a21*a33-a23*a31)+(a00*a13-a03*a10)*(a21*a32-a22*a31)+(a01*a12-a02*a11)*(a20*a33-a23*a30)-(a01*a13-a03*a11)*(a20*a32-a22*a30)+(a02*a13-a03*a12)*(a20*a31-a21*a30)},exports.multiply=multiply,exports.translate=function(out,a,v){var a00,a01,a02,a03,a10,a11,a12,a13,a20,a21,a22,a23,x=v[0],y=v[1],z=v[2];a===out?(out[12]=a[0]*x+a[4]*y+a[8]*z+a[12],out[13]=a[1]*x+a[5]*y+a[9]*z+a[13],out[14]=a[2]*x+a[6]*y+a[10]*z+a[14],out[15]=a[3]*x+a[7]*y+a[11]*z+a[15]):(a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],out[0]=a00,out[1]=a01,out[2]=a02,out[3]=a03,out[4]=a10,out[5]=a11,out[6]=a12,out[7]=a13,out[8]=a20,out[9]=a21,out[10]=a22,out[11]=a23,out[12]=a00*x+a10*y+a20*z+a[12],out[13]=a01*x+a11*y+a21*z+a[13],out[14]=a02*x+a12*y+a22*z+a[14],out[15]=a03*x+a13*y+a23*z+a[15]);return out},exports.scale=function(out,a,v){var x=v[0],y=v[1],z=v[2];return out[0]=a[0]*x,out[1]=a[1]*x,out[2]=a[2]*x,out[3]=a[3]*x,out[4]=a[4]*y,out[5]=a[5]*y,out[6]=a[6]*y,out[7]=a[7]*y,out[8]=a[8]*z,out[9]=a[9]*z,out[10]=a[10]*z,out[11]=a[11]*z,out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15],out},exports.rotate=function(out,a,rad,axis){var s,c,t,a00,a01,a02,a03,a10,a11,a12,a13,a20,a21,a22,a23,b00,b01,b02,b10,b11,b12,b20,b21,b22,x=axis[0],y=axis[1],z=axis[2],len=Math.sqrt(x*x+y*y+z*z);if(len<glMatrix.EPSILON)return null;x*=len=1/len,y*=len,z*=len,s=Math.sin(rad),c=Math.cos(rad),t=1-c,a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],b00=x*x*t+c,b01=y*x*t+z*s,b02=z*x*t-y*s,b10=x*y*t-z*s,b11=y*y*t+c,b12=z*y*t+x*s,b20=x*z*t+y*s,b21=y*z*t-x*s,b22=z*z*t+c,out[0]=a00*b00+a10*b01+a20*b02,out[1]=a01*b00+a11*b01+a21*b02,out[2]=a02*b00+a12*b01+a22*b02,out[3]=a03*b00+a13*b01+a23*b02,out[4]=a00*b10+a10*b11+a20*b12,out[5]=a01*b10+a11*b11+a21*b12,out[6]=a02*b10+a12*b11+a22*b12,out[7]=a03*b10+a13*b11+a23*b12,out[8]=a00*b20+a10*b21+a20*b22,out[9]=a01*b20+a11*b21+a21*b22,out[10]=a02*b20+a12*b21+a22*b22,out[11]=a03*b20+a13*b21+a23*b22,a!==out&&(out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15]);return out},exports.rotateX=function(out,a,rad){var s=Math.sin(rad),c=Math.cos(rad),a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11];a!==out&&(out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15]);return out[4]=a10*c+a20*s,out[5]=a11*c+a21*s,out[6]=a12*c+a22*s,out[7]=a13*c+a23*s,out[8]=a20*c-a10*s,out[9]=a21*c-a11*s,out[10]=a22*c-a12*s,out[11]=a23*c-a13*s,out},exports.rotateY=function(out,a,rad){var s=Math.sin(rad),c=Math.cos(rad),a00=a[0],a01=a[1],a02=a[2],a03=a[3],a20=a[8],a21=a[9],a22=a[10],a23=a[11];a!==out&&(out[4]=a[4],out[5]=a[5],out[6]=a[6],out[7]=a[7],out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15]);return out[0]=a00*c-a20*s,out[1]=a01*c-a21*s,out[2]=a02*c-a22*s,out[3]=a03*c-a23*s,out[8]=a00*s+a20*c,out[9]=a01*s+a21*c,out[10]=a02*s+a22*c,out[11]=a03*s+a23*c,out},exports.rotateZ=function(out,a,rad){var s=Math.sin(rad),c=Math.cos(rad),a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7];a!==out&&(out[8]=a[8],out[9]=a[9],out[10]=a[10],out[11]=a[11],out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15]);return out[0]=a00*c+a10*s,out[1]=a01*c+a11*s,out[2]=a02*c+a12*s,out[3]=a03*c+a13*s,out[4]=a10*c-a00*s,out[5]=a11*c-a01*s,out[6]=a12*c-a02*s,out[7]=a13*c-a03*s,out},exports.fromTranslation=function(out,v){return out[0]=1,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=1,out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[10]=1,out[11]=0,out[12]=v[0],out[13]=v[1],out[14]=v[2],out[15]=1,out},exports.fromScaling=function(out,v){return out[0]=v[0],out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=v[1],out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[10]=v[2],out[11]=0,out[12]=0,out[13]=0,out[14]=0,out[15]=1,out},exports.fromRotation=function(out,rad,axis){var s,c,t,x=axis[0],y=axis[1],z=axis[2],len=Math.sqrt(x*x+y*y+z*z);if(len<glMatrix.EPSILON)return null;return x*=len=1/len,y*=len,z*=len,s=Math.sin(rad),c=Math.cos(rad),t=1-c,out[0]=x*x*t+c,out[1]=y*x*t+z*s,out[2]=z*x*t-y*s,out[3]=0,out[4]=x*y*t-z*s,out[5]=y*y*t+c,out[6]=z*y*t+x*s,out[7]=0,out[8]=x*z*t+y*s,out[9]=y*z*t-x*s,out[10]=z*z*t+c,out[11]=0,out[12]=0,out[13]=0,out[14]=0,out[15]=1,out},exports.fromXRotation=function(out,rad){var s=Math.sin(rad),c=Math.cos(rad);return out[0]=1,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=c,out[6]=s,out[7]=0,out[8]=0,out[9]=-s,out[10]=c,out[11]=0,out[12]=0,out[13]=0,out[14]=0,out[15]=1,out},exports.fromYRotation=function(out,rad){var s=Math.sin(rad),c=Math.cos(rad);return out[0]=c,out[1]=0,out[2]=-s,out[3]=0,out[4]=0,out[5]=1,out[6]=0,out[7]=0,out[8]=s,out[9]=0,out[10]=c,out[11]=0,out[12]=0,out[13]=0,out[14]=0,out[15]=1,out},exports.fromZRotation=function(out,rad){var s=Math.sin(rad),c=Math.cos(rad);return out[0]=c,out[1]=s,out[2]=0,out[3]=0,out[4]=-s,out[5]=c,out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[10]=1,out[11]=0,out[12]=0,out[13]=0,out[14]=0,out[15]=1,out},exports.fromRotationTranslation=fromRotationTranslation,exports.fromQuat2=function(out,a){var translation=new glMatrix.ARRAY_TYPE(3),bx=-a[0],by=-a[1],bz=-a[2],bw=a[3],ax=a[4],ay=a[5],az=a[6],aw=a[7],magnitude=bx*bx+by*by+bz*bz+bw*bw;magnitude>0?(translation[0]=2*(ax*bw+aw*bx+ay*bz-az*by)/magnitude,translation[1]=2*(ay*bw+aw*by+az*bx-ax*bz)/magnitude,translation[2]=2*(az*bw+aw*bz+ax*by-ay*bx)/magnitude):(translation[0]=2*(ax*bw+aw*bx+ay*bz-az*by),translation[1]=2*(ay*bw+aw*by+az*bx-ax*bz),translation[2]=2*(az*bw+aw*bz+ax*by-ay*bx));return fromRotationTranslation(out,a,translation),out},exports.getTranslation=function(out,mat){return out[0]=mat[12],out[1]=mat[13],out[2]=mat[14],out},exports.getScaling=function(out,mat){var m11=mat[0],m12=mat[1],m13=mat[2],m21=mat[4],m22=mat[5],m23=mat[6],m31=mat[8],m32=mat[9],m33=mat[10];return out[0]=Math.sqrt(m11*m11+m12*m12+m13*m13),out[1]=Math.sqrt(m21*m21+m22*m22+m23*m23),out[2]=Math.sqrt(m31*m31+m32*m32+m33*m33),out},exports.getRotation=function(out,mat){var trace=mat[0]+mat[5]+mat[10],S=0;trace>0?(S=2*Math.sqrt(trace+1),out[3]=.25*S,out[0]=(mat[6]-mat[9])/S,out[1]=(mat[8]-mat[2])/S,out[2]=(mat[1]-mat[4])/S):mat[0]>mat[5]&&mat[0]>mat[10]?(S=2*Math.sqrt(1+mat[0]-mat[5]-mat[10]),out[3]=(mat[6]-mat[9])/S,out[0]=.25*S,out[1]=(mat[1]+mat[4])/S,out[2]=(mat[8]+mat[2])/S):mat[5]>mat[10]?(S=2*Math.sqrt(1+mat[5]-mat[0]-mat[10]),out[3]=(mat[8]-mat[2])/S,out[0]=(mat[1]+mat[4])/S,out[1]=.25*S,out[2]=(mat[6]+mat[9])/S):(S=2*Math.sqrt(1+mat[10]-mat[0]-mat[5]),out[3]=(mat[1]-mat[4])/S,out[0]=(mat[8]+mat[2])/S,out[1]=(mat[6]+mat[9])/S,out[2]=.25*S);return out},exports.fromRotationTranslationScale=function(out,q,v,s){var x=q[0],y=q[1],z=q[2],w=q[3],x2=x+x,y2=y+y,z2=z+z,xx=x*x2,xy=x*y2,xz=x*z2,yy=y*y2,yz=y*z2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2,sx=s[0],sy=s[1],sz=s[2];return out[0]=(1-(yy+zz))*sx,out[1]=(xy+wz)*sx,out[2]=(xz-wy)*sx,out[3]=0,out[4]=(xy-wz)*sy,out[5]=(1-(xx+zz))*sy,out[6]=(yz+wx)*sy,out[7]=0,out[8]=(xz+wy)*sz,out[9]=(yz-wx)*sz,out[10]=(1-(xx+yy))*sz,out[11]=0,out[12]=v[0],out[13]=v[1],out[14]=v[2],out[15]=1,out},exports.fromRotationTranslationScaleOrigin=function(out,q,v,s,o){var x=q[0],y=q[1],z=q[2],w=q[3],x2=x+x,y2=y+y,z2=z+z,xx=x*x2,xy=x*y2,xz=x*z2,yy=y*y2,yz=y*z2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2,sx=s[0],sy=s[1],sz=s[2],ox=o[0],oy=o[1],oz=o[2],out0=(1-(yy+zz))*sx,out1=(xy+wz)*sx,out2=(xz-wy)*sx,out4=(xy-wz)*sy,out5=(1-(xx+zz))*sy,out6=(yz+wx)*sy,out8=(xz+wy)*sz,out9=(yz-wx)*sz,out10=(1-(xx+yy))*sz;return out[0]=out0,out[1]=out1,out[2]=out2,out[3]=0,out[4]=out4,out[5]=out5,out[6]=out6,out[7]=0,out[8]=out8,out[9]=out9,out[10]=out10,out[11]=0,out[12]=v[0]+ox-(out0*ox+out4*oy+out8*oz),out[13]=v[1]+oy-(out1*ox+out5*oy+out9*oz),out[14]=v[2]+oz-(out2*ox+out6*oy+out10*oz),out[15]=1,out},exports.fromQuat=function(out,q){var x=q[0],y=q[1],z=q[2],w=q[3],x2=x+x,y2=y+y,z2=z+z,xx=x*x2,yx=y*x2,yy=y*y2,zx=z*x2,zy=z*y2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2;return out[0]=1-yy-zz,out[1]=yx+wz,out[2]=zx-wy,out[3]=0,out[4]=yx-wz,out[5]=1-xx-zz,out[6]=zy+wx,out[7]=0,out[8]=zx+wy,out[9]=zy-wx,out[10]=1-xx-yy,out[11]=0,out[12]=0,out[13]=0,out[14]=0,out[15]=1,out},exports.frustum=function(out,left,right,bottom,top,near,far){var rl=1/(right-left),tb=1/(top-bottom),nf=1/(near-far);return out[0]=2*near*rl,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=2*near*tb,out[6]=0,out[7]=0,out[8]=(right+left)*rl,out[9]=(top+bottom)*tb,out[10]=(far+near)*nf,out[11]=-1,out[12]=0,out[13]=0,out[14]=far*near*2*nf,out[15]=0,out},exports.perspective=function(out,fovy,aspect,near,far){var nf,f=1/Math.tan(fovy/2);out[0]=f/aspect,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=f,out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[11]=-1,out[12]=0,out[13]=0,out[15]=0,null!=far&&far!==1/0?(nf=1/(near-far),out[10]=(far+near)*nf,out[14]=2*far*near*nf):(out[10]=-1,out[14]=-2*near);return out},exports.perspectiveFromFieldOfView=function(out,fov,near,far){var upTan=Math.tan(fov.upDegrees*Math.PI/180),downTan=Math.tan(fov.downDegrees*Math.PI/180),leftTan=Math.tan(fov.leftDegrees*Math.PI/180),rightTan=Math.tan(fov.rightDegrees*Math.PI/180),xScale=2/(leftTan+rightTan),yScale=2/(upTan+downTan);return out[0]=xScale,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=yScale,out[6]=0,out[7]=0,out[8]=-(leftTan-rightTan)*xScale*.5,out[9]=(upTan-downTan)*yScale*.5,out[10]=far/(near-far),out[11]=-1,out[12]=0,out[13]=0,out[14]=far*near/(near-far),out[15]=0,out},exports.ortho=function(out,left,right,bottom,top,near,far){var lr=1/(left-right),bt=1/(bottom-top),nf=1/(near-far);return out[0]=-2*lr,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=-2*bt,out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[10]=2*nf,out[11]=0,out[12]=(left+right)*lr,out[13]=(top+bottom)*bt,out[14]=(far+near)*nf,out[15]=1,out},exports.lookAt=function(out,eye,center,up){var x0,x1,x2,y0,y1,y2,z0,z1,z2,len,eyex=eye[0],eyey=eye[1],eyez=eye[2],upx=up[0],upy=up[1],upz=up[2],centerx=center[0],centery=center[1],centerz=center[2];if(Math.abs(eyex-centerx)<glMatrix.EPSILON&&Math.abs(eyey-centery)<glMatrix.EPSILON&&Math.abs(eyez-centerz)<glMatrix.EPSILON)return identity(out);z0=eyex-centerx,z1=eyey-centery,z2=eyez-centerz,len=1/Math.sqrt(z0*z0+z1*z1+z2*z2),x0=upy*(z2*=len)-upz*(z1*=len),x1=upz*(z0*=len)-upx*z2,x2=upx*z1-upy*z0,(len=Math.sqrt(x0*x0+x1*x1+x2*x2))?(x0*=len=1/len,x1*=len,x2*=len):(x0=0,x1=0,x2=0);y0=z1*x2-z2*x1,y1=z2*x0-z0*x2,y2=z0*x1-z1*x0,(len=Math.sqrt(y0*y0+y1*y1+y2*y2))?(y0*=len=1/len,y1*=len,y2*=len):(y0=0,y1=0,y2=0);return out[0]=x0,out[1]=y0,out[2]=z0,out[3]=0,out[4]=x1,out[5]=y1,out[6]=z1,out[7]=0,out[8]=x2,out[9]=y2,out[10]=z2,out[11]=0,out[12]=-(x0*eyex+x1*eyey+x2*eyez),out[13]=-(y0*eyex+y1*eyey+y2*eyez),out[14]=-(z0*eyex+z1*eyey+z2*eyez),out[15]=1,out},exports.targetTo=function(out,eye,target,up){var eyex=eye[0],eyey=eye[1],eyez=eye[2],upx=up[0],upy=up[1],upz=up[2],z0=eyex-target[0],z1=eyey-target[1],z2=eyez-target[2],len=z0*z0+z1*z1+z2*z2;len>0&&(len=1/Math.sqrt(len),z0*=len,z1*=len,z2*=len);var x0=upy*z2-upz*z1,x1=upz*z0-upx*z2,x2=upx*z1-upy*z0;(len=x0*x0+x1*x1+x2*x2)>0&&(len=1/Math.sqrt(len),x0*=len,x1*=len,x2*=len);return out[0]=x0,out[1]=x1,out[2]=x2,out[3]=0,out[4]=z1*x2-z2*x1,out[5]=z2*x0-z0*x2,out[6]=z0*x1-z1*x0,out[7]=0,out[8]=z0,out[9]=z1,out[10]=z2,out[11]=0,out[12]=eyex,out[13]=eyey,out[14]=eyez,out[15]=1,out},exports.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"},exports.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))},exports.add=function(out,a,b){return out[0]=a[0]+b[0],out[1]=a[1]+b[1],out[2]=a[2]+b[2],out[3]=a[3]+b[3],out[4]=a[4]+b[4],out[5]=a[5]+b[5],out[6]=a[6]+b[6],out[7]=a[7]+b[7],out[8]=a[8]+b[8],out[9]=a[9]+b[9],out[10]=a[10]+b[10],out[11]=a[11]+b[11],out[12]=a[12]+b[12],out[13]=a[13]+b[13],out[14]=a[14]+b[14],out[15]=a[15]+b[15],out},exports.subtract=subtract,exports.multiplyScalar=function(out,a,b){return out[0]=a[0]*b,out[1]=a[1]*b,out[2]=a[2]*b,out[3]=a[3]*b,out[4]=a[4]*b,out[5]=a[5]*b,out[6]=a[6]*b,out[7]=a[7]*b,out[8]=a[8]*b,out[9]=a[9]*b,out[10]=a[10]*b,out[11]=a[11]*b,out[12]=a[12]*b,out[13]=a[13]*b,out[14]=a[14]*b,out[15]=a[15]*b,out},exports.multiplyScalarAndAdd=function(out,a,b,scale){return out[0]=a[0]+b[0]*scale,out[1]=a[1]+b[1]*scale,out[2]=a[2]+b[2]*scale,out[3]=a[3]+b[3]*scale,out[4]=a[4]+b[4]*scale,out[5]=a[5]+b[5]*scale,out[6]=a[6]+b[6]*scale,out[7]=a[7]+b[7]*scale,out[8]=a[8]+b[8]*scale,out[9]=a[9]+b[9]*scale,out[10]=a[10]+b[10]*scale,out[11]=a[11]+b[11]*scale,out[12]=a[12]+b[12]*scale,out[13]=a[13]+b[13]*scale,out[14]=a[14]+b[14]*scale,out[15]=a[15]+b[15]*scale,out},exports.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]},exports.equals=function(a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5],a6=a[6],a7=a[7],a8=a[8],a9=a[9],a10=a[10],a11=a[11],a12=a[12],a13=a[13],a14=a[14],a15=a[15],b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5],b6=b[6],b7=b[7],b8=b[8],b9=b[9],b10=b[10],b11=b[11],b12=b[12],b13=b[13],b14=b[14],b15=b[15];return Math.abs(a0-b0)<=glMatrix.EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=glMatrix.EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=glMatrix.EPSILON*Math.max(1,Math.abs(a2),Math.abs(b2))&&Math.abs(a3-b3)<=glMatrix.EPSILON*Math.max(1,Math.abs(a3),Math.abs(b3))&&Math.abs(a4-b4)<=glMatrix.EPSILON*Math.max(1,Math.abs(a4),Math.abs(b4))&&Math.abs(a5-b5)<=glMatrix.EPSILON*Math.max(1,Math.abs(a5),Math.abs(b5))&&Math.abs(a6-b6)<=glMatrix.EPSILON*Math.max(1,Math.abs(a6),Math.abs(b6))&&Math.abs(a7-b7)<=glMatrix.EPSILON*Math.max(1,Math.abs(a7),Math.abs(b7))&&Math.abs(a8-b8)<=glMatrix.EPSILON*Math.max(1,Math.abs(a8),Math.abs(b8))&&Math.abs(a9-b9)<=glMatrix.EPSILON*Math.max(1,Math.abs(a9),Math.abs(b9))&&Math.abs(a10-b10)<=glMatrix.EPSILON*Math.max(1,Math.abs(a10),Math.abs(b10))&&Math.abs(a11-b11)<=glMatrix.EPSILON*Math.max(1,Math.abs(a11),Math.abs(b11))&&Math.abs(a12-b12)<=glMatrix.EPSILON*Math.max(1,Math.abs(a12),Math.abs(b12))&&Math.abs(a13-b13)<=glMatrix.EPSILON*Math.max(1,Math.abs(a13),Math.abs(b13))&&Math.abs(a14-b14)<=glMatrix.EPSILON*Math.max(1,Math.abs(a14),Math.abs(b14))&&Math.abs(a15-b15)<=glMatrix.EPSILON*Math.max(1,Math.abs(a15),Math.abs(b15))},exports.sub=exports.mul=void 0;var glMatrix=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}(__webpack_require__(87));function identity(out){return out[0]=1,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=1,out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[10]=1,out[11]=0,out[12]=0,out[13]=0,out[14]=0,out[15]=1,out}function multiply(out,a,b){var a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15],b0=b[0],b1=b[1],b2=b[2],b3=b[3];return out[0]=b0*a00+b1*a10+b2*a20+b3*a30,out[1]=b0*a01+b1*a11+b2*a21+b3*a31,out[2]=b0*a02+b1*a12+b2*a22+b3*a32,out[3]=b0*a03+b1*a13+b2*a23+b3*a33,b0=b[4],b1=b[5],b2=b[6],b3=b[7],out[4]=b0*a00+b1*a10+b2*a20+b3*a30,out[5]=b0*a01+b1*a11+b2*a21+b3*a31,out[6]=b0*a02+b1*a12+b2*a22+b3*a32,out[7]=b0*a03+b1*a13+b2*a23+b3*a33,b0=b[8],b1=b[9],b2=b[10],b3=b[11],out[8]=b0*a00+b1*a10+b2*a20+b3*a30,out[9]=b0*a01+b1*a11+b2*a21+b3*a31,out[10]=b0*a02+b1*a12+b2*a22+b3*a32,out[11]=b0*a03+b1*a13+b2*a23+b3*a33,b0=b[12],b1=b[13],b2=b[14],b3=b[15],out[12]=b0*a00+b1*a10+b2*a20+b3*a30,out[13]=b0*a01+b1*a11+b2*a21+b3*a31,out[14]=b0*a02+b1*a12+b2*a22+b3*a32,out[15]=b0*a03+b1*a13+b2*a23+b3*a33,out}function fromRotationTranslation(out,q,v){var x=q[0],y=q[1],z=q[2],w=q[3],x2=x+x,y2=y+y,z2=z+z,xx=x*x2,xy=x*y2,xz=x*z2,yy=y*y2,yz=y*z2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2;return out[0]=1-(yy+zz),out[1]=xy+wz,out[2]=xz-wy,out[3]=0,out[4]=xy-wz,out[5]=1-(xx+zz),out[6]=yz+wx,out[7]=0,out[8]=xz+wy,out[9]=yz-wx,out[10]=1-(xx+yy),out[11]=0,out[12]=v[0],out[13]=v[1],out[14]=v[2],out[15]=1,out}function subtract(out,a,b){return out[0]=a[0]-b[0],out[1]=a[1]-b[1],out[2]=a[2]-b[2],out[3]=a[3]-b[3],out[4]=a[4]-b[4],out[5]=a[5]-b[5],out[6]=a[6]-b[6],out[7]=a[7]-b[7],out[8]=a[8]-b[8],out[9]=a[9]-b[9],out[10]=a[10]-b[10],out[11]=a[11]-b[11],out[12]=a[12]-b[12],out[13]=a[13]-b[13],out[14]=a[14]-b[14],out[15]=a[15]-b[15],out}var mul=multiply;exports.mul=mul;var sub=subtract;exports.sub=sub},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=create,exports.clone=function(a){var out=new glMatrix.ARRAY_TYPE(4);return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out},exports.fromValues=function(x,y,z,w){var out=new glMatrix.ARRAY_TYPE(4);return out[0]=x,out[1]=y,out[2]=z,out[3]=w,out},exports.copy=function(out,a){return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out},exports.set=function(out,x,y,z,w){return out[0]=x,out[1]=y,out[2]=z,out[3]=w,out},exports.add=function(out,a,b){return out[0]=a[0]+b[0],out[1]=a[1]+b[1],out[2]=a[2]+b[2],out[3]=a[3]+b[3],out},exports.subtract=subtract,exports.multiply=multiply,exports.divide=divide,exports.ceil=function(out,a){return out[0]=Math.ceil(a[0]),out[1]=Math.ceil(a[1]),out[2]=Math.ceil(a[2]),out[3]=Math.ceil(a[3]),out},exports.floor=function(out,a){return out[0]=Math.floor(a[0]),out[1]=Math.floor(a[1]),out[2]=Math.floor(a[2]),out[3]=Math.floor(a[3]),out},exports.min=function(out,a,b){return out[0]=Math.min(a[0],b[0]),out[1]=Math.min(a[1],b[1]),out[2]=Math.min(a[2],b[2]),out[3]=Math.min(a[3],b[3]),out},exports.max=function(out,a,b){return out[0]=Math.max(a[0],b[0]),out[1]=Math.max(a[1],b[1]),out[2]=Math.max(a[2],b[2]),out[3]=Math.max(a[3],b[3]),out},exports.round=function(out,a){return out[0]=Math.round(a[0]),out[1]=Math.round(a[1]),out[2]=Math.round(a[2]),out[3]=Math.round(a[3]),out},exports.scale=function(out,a,b){return out[0]=a[0]*b,out[1]=a[1]*b,out[2]=a[2]*b,out[3]=a[3]*b,out},exports.scaleAndAdd=function(out,a,b,scale){return out[0]=a[0]+b[0]*scale,out[1]=a[1]+b[1]*scale,out[2]=a[2]+b[2]*scale,out[3]=a[3]+b[3]*scale,out},exports.distance=distance,exports.squaredDistance=squaredDistance,exports.length=length,exports.squaredLength=squaredLength,exports.negate=function(out,a){return out[0]=-a[0],out[1]=-a[1],out[2]=-a[2],out[3]=-a[3],out},exports.inverse=function(out,a){return out[0]=1/a[0],out[1]=1/a[1],out[2]=1/a[2],out[3]=1/a[3],out},exports.normalize=function(out,a){var x=a[0],y=a[1],z=a[2],w=a[3],len=x*x+y*y+z*z+w*w;len>0&&(len=1/Math.sqrt(len));return out[0]=x*len,out[1]=y*len,out[2]=z*len,out[3]=w*len,out},exports.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},exports.cross=function(out,u,v,w){var A=v[0]*w[1]-v[1]*w[0],B=v[0]*w[2]-v[2]*w[0],C=v[0]*w[3]-v[3]*w[0],D=v[1]*w[2]-v[2]*w[1],E=v[1]*w[3]-v[3]*w[1],F=v[2]*w[3]-v[3]*w[2],G=u[0],H=u[1],I=u[2],J=u[3];return out[0]=H*F-I*E+J*D,out[1]=-G*F+I*C-J*B,out[2]=G*E-H*C+J*A,out[3]=-G*D+H*B-I*A,out},exports.lerp=function(out,a,b,t){var ax=a[0],ay=a[1],az=a[2],aw=a[3];return out[0]=ax+t*(b[0]-ax),out[1]=ay+t*(b[1]-ay),out[2]=az+t*(b[2]-az),out[3]=aw+t*(b[3]-aw),out},exports.random=function(out,scale){var v1,v2,v3,v4,s1,s2;scale=scale||1;do{v1=2*glMatrix.RANDOM()-1,v2=2*glMatrix.RANDOM()-1,s1=v1*v1+v2*v2}while(s1>=1);do{v3=2*glMatrix.RANDOM()-1,v4=2*glMatrix.RANDOM()-1,s2=v3*v3+v4*v4}while(s2>=1);var d=Math.sqrt((1-s1)/s2);return out[0]=scale*v1,out[1]=scale*v2,out[2]=scale*v3*d,out[3]=scale*v4*d,out},exports.transformMat4=function(out,a,m){var x=a[0],y=a[1],z=a[2],w=a[3];return out[0]=m[0]*x+m[4]*y+m[8]*z+m[12]*w,out[1]=m[1]*x+m[5]*y+m[9]*z+m[13]*w,out[2]=m[2]*x+m[6]*y+m[10]*z+m[14]*w,out[3]=m[3]*x+m[7]*y+m[11]*z+m[15]*w,out},exports.transformQuat=function(out,a,q){var x=a[0],y=a[1],z=a[2],qx=q[0],qy=q[1],qz=q[2],qw=q[3],ix=qw*x+qy*z-qz*y,iy=qw*y+qz*x-qx*z,iz=qw*z+qx*y-qy*x,iw=-qx*x-qy*y-qz*z;return out[0]=ix*qw+iw*-qx+iy*-qz-iz*-qy,out[1]=iy*qw+iw*-qy+iz*-qx-ix*-qz,out[2]=iz*qw+iw*-qz+ix*-qy-iy*-qx,out[3]=a[3],out},exports.zero=function(out){return out[0]=0,out[1]=0,out[2]=0,out[3]=0,out},exports.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},exports.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]},exports.equals=function(a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],b0=b[0],b1=b[1],b2=b[2],b3=b[3];return Math.abs(a0-b0)<=glMatrix.EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=glMatrix.EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=glMatrix.EPSILON*Math.max(1,Math.abs(a2),Math.abs(b2))&&Math.abs(a3-b3)<=glMatrix.EPSILON*Math.max(1,Math.abs(a3),Math.abs(b3))},exports.forEach=exports.sqrLen=exports.len=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=void 0;var glMatrix=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}(__webpack_require__(87));function create(){var out=new glMatrix.ARRAY_TYPE(4);return glMatrix.ARRAY_TYPE!=Float32Array&&(out[0]=0,out[1]=0,out[2]=0,out[3]=0),out}function subtract(out,a,b){return out[0]=a[0]-b[0],out[1]=a[1]-b[1],out[2]=a[2]-b[2],out[3]=a[3]-b[3],out}function multiply(out,a,b){return out[0]=a[0]*b[0],out[1]=a[1]*b[1],out[2]=a[2]*b[2],out[3]=a[3]*b[3],out}function divide(out,a,b){return out[0]=a[0]/b[0],out[1]=a[1]/b[1],out[2]=a[2]/b[2],out[3]=a[3]/b[3],out}function distance(a,b){var x=b[0]-a[0],y=b[1]-a[1],z=b[2]-a[2],w=b[3]-a[3];return Math.sqrt(x*x+y*y+z*z+w*w)}function squaredDistance(a,b){var x=b[0]-a[0],y=b[1]-a[1],z=b[2]-a[2],w=b[3]-a[3];return x*x+y*y+z*z+w*w}function length(a){var x=a[0],y=a[1],z=a[2],w=a[3];return Math.sqrt(x*x+y*y+z*z+w*w)}function squaredLength(a){var x=a[0],y=a[1],z=a[2],w=a[3];return x*x+y*y+z*z+w*w}var sub=subtract;exports.sub=sub;var mul=multiply;exports.mul=mul;var div=divide;exports.div=div;var dist=distance;exports.dist=dist;var sqrDist=squaredDistance;exports.sqrDist=sqrDist;var len=length;exports.len=len;var sqrLen=squaredLength;exports.sqrLen=sqrLen;var vec,forEach=(vec=create(),function(a,stride,offset,count,fn,arg){var i,l;for(stride||(stride=4),offset||(offset=0),l=count?Math.min(count*stride+offset,a.length):a.length,i=offset;i<l;i+=stride)vec[0]=a[i],vec[1]=a[i+1],vec[2]=a[i+2],vec[3]=a[i+3],fn(vec,vec,arg),a[i]=vec[0],a[i+1]=vec[1],a[i+2]=vec[2],a[i+3]=vec[3];return a});exports.forEach=forEach},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EVENTS=exports.COORDINATE_SYSTEM=void 0;exports.COORDINATE_SYSTEM={LNGLAT:1,LNGLAT_DEPRECATED:5,METER_OFFSETS:2,METERS:2,LNGLAT_OFFSETS:3,IDENTITY:0};exports.EVENTS={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}}},function(module,exports,__webpack_require__){var has=__webpack_require__(38).call(Function.call,Object.prototype.hasOwnProperty),$assign=Object.assign;module.exports=function(target,source){if($assign)return $assign(target,source);for(var key in source)has(source,key)&&(target[key]=source[key]);return target}},function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(38),ES2016=__webpack_require__(153),assign=__webpack_require__(92),forEach=__webpack_require__(241),GetIntrinsic=__webpack_require__(76),$TypeError=GetIntrinsic("%TypeError%"),$isEnumerable=bind.call(Function.call,GetIntrinsic("%ObjectPrototype%").propertyIsEnumerable),$pushApply=bind.call(Function.apply,GetIntrinsic("%ArrayPrototype%").push),ES2017=assign(assign({},ES2016),{ToIndex:function(value){if(void 0===value)return 0;var integerIndex=this.ToInteger(value);if(integerIndex<0)throw new RangeError("index must be >= 0");var index=this.ToLength(integerIndex);if(!this.SameValueZero(integerIndex,index))throw new RangeError("index must be >= 0 and < 2 ** 53 - 1");return index},EnumerableOwnProperties:function(O,kind){var keys=ES2016.EnumerableOwnNames(O);if("key"===kind)return keys;if("value"===kind||"key+value"===kind){var results=[];return forEach(keys,function(key){$isEnumerable(O,key)&&$pushApply(results,["value"===kind?O[key]:[key,O[key]]])}),results}throw new $TypeError('Assertion failed: "kind" is not "key", "value", or "key+value": '+kind)}});delete ES2017.EnumerableOwnNames,module.exports=ES2017},function(module,exports){module.exports=function(bitmap,value){return{enumerable:!(1&bitmap),configurable:!(2&bitmap),writable:!(4&bitmap),value:value}}},function(module,exports){var id=0,px=Math.random();module.exports=function(key){return"Symbol(".concat(void 0===key?"":key,")_",(++id+px).toString(36))}},function(module,exports){module.exports=!1},function(module,exports,__webpack_require__){var def=__webpack_require__(34).f,has=__webpack_require__(54),TAG=__webpack_require__(22)("toStringTag");module.exports=function(it,tag,stat){it&&!has(it=stat?it:it.prototype,TAG)&&def(it,TAG,{configurable:!0,value:tag})}},function(module,exports){module.exports=function(it){if(null==it)throw TypeError("Can't call method on  "+it);return it}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(35),dPs=__webpack_require__(250),enumBugKeys=__webpack_require__(161),IE_PROTO=__webpack_require__(160)("IE_PROTO"),Empty=function(){},createDict=function(){var iframeDocument,iframe=__webpack_require__(156)("iframe"),i=enumBugKeys.length;for(iframe.style.display="none",__webpack_require__(251).appendChild(iframe),iframe.src="javascript:",(iframeDocument=iframe.contentWindow.document).open(),iframeDocument.write("<script>document.F=Object<\/script>"),iframeDocument.close(),createDict=iframeDocument.F;i--;)delete createDict.prototype[enumBugKeys[i]];return createDict()};module.exports=Object.create||function(O,Properties){var result;return null!==O?(Empty.prototype=anObject(O),result=new Empty,Empty.prototype=null,result[IE_PROTO]=O):result=createDict(),void 0===Properties?result:dPs(result,Properties)}},function(module,exports){module.exports={}},function(module,exports){module.exports={CHANNEL_CREATED:"channelCreated",GET_CURRENT_STORY:"getCurrentStory",SET_CURRENT_STORY:"setCurrentStory",GET_STORIES:"getStories",SET_STORIES:"setStories",SELECT_STORY:"selectStory",APPLY_SHORTCUT:"applyShortcut",STORY_ADDED:"storyAdded",FORCE_RE_RENDER:"forceReRender",REGISTER_SUBSCRIPTION:"registerSubscription",STORY_RENDERED:"storyRendered",STORY_ERRORED:"storyErrored",STORY_THREW_EXCEPTION:"storyThrewException"}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(13),Object.defineProperty(exports,"__esModule",{value:!0}),exports.setInitialStory=function(storyKindList){return{type:types.SET_INITIAL_STORY,storyKindList:storyKindList}},exports.setError=function(error){return{type:types.SET_ERROR,error:error}},exports.clearError=function(){return{type:types.CLEAR_ERROR}},exports.selectStory=function(kind,story){return{type:types.SELECT_STORY,kind:kind,story:story}},exports.types=void 0;var types={SET_ERROR:"PREVIEW_SET_ERROR",CLEAR_ERROR:"PREVIEW_CLEAR_ERROR",SELECT_STORY:"PREVIEW_SELECT_STORY",SET_INITIAL_STORY:"PREVIEW_SET_INITIAL_STORY"};exports.types=types},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"self",{enumerable:!0,get:function(){return _globals.self}}),Object.defineProperty(exports,"window",{enumerable:!0,get:function(){return _globals.window}}),Object.defineProperty(exports,"global",{enumerable:!0,get:function(){return _globals.global}}),Object.defineProperty(exports,"document",{enumerable:!0,get:function(){return _globals.document}}),Object.defineProperty(exports,"process",{enumerable:!0,get:function(){return _globals.process}}),Object.defineProperty(exports,"console",{enumerable:!0,get:function(){return _globals.console}}),exports.isBrowser=exports.VERSION=void 0;var _isBrowser=_interopRequireDefault(__webpack_require__(183)),_globals=__webpack_require__(185),VERSION="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source";exports.VERSION=VERSION;var isBrowser=(0,_isBrowser.default)();exports.isBrowser=isBrowser},function(module,exports,__webpack_require__){"use strict";(function(global){Object.defineProperty(exports,"__esModule",{value:!0}),exports.document=exports.global=exports.window=exports.self=void 0;var globals={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==global&&global,document:"undefined"!=typeof document&&document},self_=globals.self||globals.window||globals.global;exports.self=self_;var window_=globals.window||globals.self||globals.global;exports.window=window_;var global_=globals.global||globals.self||globals.window;exports.global=global_;var document_=globals.document||{};exports.document=document_}).call(this,__webpack_require__(17))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default=new(__webpack_require__(85).Log)({id:"luma"}).enable();exports.default=_default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"trackContextState",{enumerable:!0,get:function(){return _webglStateTracker.trackContextState}}),Object.defineProperty(exports,"resetParameters",{enumerable:!0,get:function(){return _webglStateTracker.resetParameters}}),Object.defineProperty(exports,"getParameter",{enumerable:!0,get:function(){return _webglStateTracker.getParameter}}),Object.defineProperty(exports,"getParameters",{enumerable:!0,get:function(){return _webglStateTracker.getParameters}}),Object.defineProperty(exports,"setParameter",{enumerable:!0,get:function(){return _webglStateTracker.setParameter}}),Object.defineProperty(exports,"setParameters",{enumerable:!0,get:function(){return _webglStateTracker.setParameters}}),Object.defineProperty(exports,"withParameters",{enumerable:!0,get:function(){return _webglStateTracker.withParameters}}),Object.defineProperty(exports,"getModifiedParameters",{enumerable:!0,get:function(){return _webglStateTracker.getModifiedParameters}}),Object.defineProperty(exports,"createGLContext",{enumerable:!0,get:function(){return _context.createGLContext}}),Object.defineProperty(exports,"instrumentGLContext",{enumerable:!0,get:function(){return _context.instrumentGLContext}}),Object.defineProperty(exports,"destroyGLContext",{enumerable:!0,get:function(){return _context.destroyGLContext}}),Object.defineProperty(exports,"resizeGLContext",{enumerable:!0,get:function(){return _context.resizeGLContext}}),Object.defineProperty(exports,"setGLContextDefaults",{enumerable:!0,get:function(){return _context.setGLContextDefaults}}),Object.defineProperty(exports,"getPageLoadPromise",{enumerable:!0,get:function(){return _createCanvas.getPageLoadPromise}}),Object.defineProperty(exports,"getCanvas",{enumerable:!0,get:function(){return _createCanvas.getCanvas}});var _webglStateTracker=__webpack_require__(130),_context=__webpack_require__(296),_createCanvas=__webpack_require__(189)},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.FRAMEBUFFER_ATTACHMENT_PARAMETERS=exports.default=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(6)),_slicedToArray2=_interopRequireDefault(__webpack_require__(11)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_assertThisInitialized2=_interopRequireDefault(__webpack_require__(12)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_resource=_interopRequireDefault(__webpack_require__(50)),_texture2d=_interopRequireDefault(__webpack_require__(193)),_renderbuffer=_interopRequireDefault(__webpack_require__(194)),_clear2=__webpack_require__(307),_copyAndBlit=__webpack_require__(308),_features=__webpack_require__(309),_webglUtils=__webpack_require__(14),_utils=__webpack_require__(10),Framebuffer=function(_Resource){function Framebuffer(gl){var _this,opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,_classCallCheck2.default)(this,Framebuffer),(_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Framebuffer).call(this,gl,opts))).width=null,_this.height=null,_this.attachments={},_this.readBuffer=36064,_this.drawBuffers=[36064],_this.initialize(opts),Object.seal((0,_assertThisInitialized2.default)(_this)),_this}return(0,_inherits2.default)(Framebuffer,_Resource),(0,_createClass2.default)(Framebuffer,[{key:"MAX_COLOR_ATTACHMENTS",get:function(){return this.gl.getParameter(this.gl.MAX_COLOR_ATTACHMENTS)}},{key:"MAX_DRAW_BUFFERS",get:function(){return this.gl.getParameter(this.gl.MAX_DRAW_BUFFERS)}}],[{key:"isSupported",value:function(gl){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},colorBufferFloat=_ref.colorBufferFloat,colorBufferHalfFloat=_ref.colorBufferHalfFloat;return colorBufferFloat&&gl.getExtension((0,_webglUtils.isWebGL2)(gl)?"EXT_color_buffer_float":"WEBGL.color_buffer_float"),colorBufferHalfFloat&&gl.getExtension((0,_webglUtils.isWebGL2)(gl)?"EXT_color_buffer_float":"EXT_color_buffer_half_float")}},{key:"getDefaultFramebuffer",value:function(gl){return gl.luma=gl.luma||{},gl.luma.defaultFramebuffer=gl.luma.defaultFramebuffer||new Framebuffer(gl,{id:"default-framebuffer",handle:null,attachments:{}}),gl.luma.defaultFramebuffer}}]),(0,_createClass2.default)(Framebuffer,[{key:"initialize",value:function(_ref2){var _ref2$width=_ref2.width,width=void 0===_ref2$width?1:_ref2$width,_ref2$height=_ref2.height,height=void 0===_ref2$height?1:_ref2$height,_ref2$attachments=_ref2.attachments,attachments=void 0===_ref2$attachments?null:_ref2$attachments,_ref2$color=_ref2.color,color=void 0===_ref2$color||_ref2$color,_ref2$depth=_ref2.depth,depth=void 0===_ref2$depth||_ref2$depth,_ref2$stencil=_ref2.stencil,stencil=void 0!==_ref2$stencil&&_ref2$stencil,_ref2$check=_ref2.check,check=void 0===_ref2$check||_ref2$check,readBuffer=_ref2.readBuffer,drawBuffers=_ref2.drawBuffers;if((0,_utils.assert)(width>=0&&height>=0,"Width and height need to be integers"),this.width=width,this.height=height,attachments)for(var attachment in attachments){var target=attachments[attachment];(Array.isArray(target)?target[0]:target).resize({width:width,height:height})}else attachments=this._createDefaultAttachments(color,depth,stencil,width,height);this.update({clearAttachments:!0,attachments:attachments,readBuffer:readBuffer,drawBuffers:drawBuffers}),attachments&&check&&this.checkStatus()}},{key:"update",value:function(_ref3){var _ref3$attachments=_ref3.attachments,attachments=void 0===_ref3$attachments?{}:_ref3$attachments,readBuffer=_ref3.readBuffer,drawBuffers=_ref3.drawBuffers,_ref3$clearAttachment=_ref3.clearAttachments,clearAttachments=void 0!==_ref3$clearAttachment&&_ref3$clearAttachment,_ref3$resizeAttachmen=_ref3.resizeAttachments,resizeAttachments=void 0===_ref3$resizeAttachmen||_ref3$resizeAttachmen;this.attach(attachments,{clearAttachments:clearAttachments,resizeAttachments:resizeAttachments});var gl=this.gl,prevHandle=gl.bindFramebuffer(36160,this.handle);return readBuffer&&this._setReadBuffer(readBuffer),drawBuffers&&this._setDrawBuffers(drawBuffers),gl.bindFramebuffer(36160,prevHandle||null),this}},{key:"resize",value:function(){var _ref4=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},width=_ref4.width,height=_ref4.height;if(null===this.handle)return(0,_utils.assert)(void 0===width&&void 0===height),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;for(var attachmentPoint in void 0===width&&(width=this.gl.drawingBufferWidth),void 0===height&&(height=this.gl.drawingBufferHeight),width!==this.width&&height!==this.height&&_utils.log.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(width,"x").concat(height))(),this.attachments)this.attachments[attachmentPoint].resize({width:width,height:height});return this.width=width,this.height=height,this}},{key:"attach",value:function(attachments){var _this2=this,_ref5=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref5$clearAttachment=_ref5.clearAttachments,clearAttachments=void 0!==_ref5$clearAttachment&&_ref5$clearAttachment,_ref5$resizeAttachmen=_ref5.resizeAttachments,resizeAttachments=void 0===_ref5$resizeAttachmen||_ref5$resizeAttachmen,newAttachments={};clearAttachments&&Object.keys(this.attachments).forEach(function(key){newAttachments[key]=null}),Object.assign(newAttachments,attachments);var prevHandle=this.gl.bindFramebuffer(36160,this.handle);for(var key in newAttachments){(0,_utils.assert)(void 0!==key,"Misspelled framebuffer binding point?");var attachment=Number(key),descriptor=newAttachments[attachment],object=descriptor;if(object)if(object instanceof _renderbuffer.default)this._attachRenderbuffer({attachment:attachment,renderbuffer:object});else if(Array.isArray(descriptor)){var _descriptor=(0,_slicedToArray2.default)(descriptor,3),texture=_descriptor[0],_descriptor$=_descriptor[1],layer=void 0===_descriptor$?0:_descriptor$,_descriptor$2=_descriptor[2],level=void 0===_descriptor$2?0:_descriptor$2;object=texture,this._attachTexture({attachment:attachment,texture:texture,layer:layer,level:level})}else this._attachTexture({attachment:attachment,texture:object,layer:0,level:0});else this._unattach(attachment);resizeAttachments&&object&&object.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,prevHandle||null),Object.assign(this.attachments,attachments),Object.keys(this.attachments).filter(function(key){return!_this2.attachments[key]}).forEach(function(key){delete _this2.attachments[key]})}},{key:"checkStatus",value:function(){var gl=this.gl,prevHandle=gl.bindFramebuffer(36160,this.handle),status=gl.checkFramebufferStatus(36160);if(gl.bindFramebuffer(36160,prevHandle||null),36053!==status)throw new Error(_getFrameBufferStatus(status));return this}},{key:"clear",value:function(){var _ref6=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},color=_ref6.color,depth=_ref6.depth,stencil=_ref6.stencil,_ref6$drawBuffers=_ref6.drawBuffers,drawBuffers=void 0===_ref6$drawBuffers?[]:_ref6$drawBuffers,prevHandle=this.gl.bindFramebuffer(36160,this.handle);return(color||depth||stencil)&&(0,_clear2.clear)(this.gl,{color:color,depth:depth,stencil:stencil}),drawBuffers.forEach(function(value,drawBuffer){(0,_clear2.clearBuffer)({drawBuffer:drawBuffer,value:value})}),this.gl.bindFramebuffer(36160,prevHandle||null),this}},{key:"readPixels",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _utils.log.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}},{key:"readPixelsToBuffer",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _utils.log.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}},{key:"copyToDataUrl",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _utils.log.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}},{key:"copyToImage",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _utils.log.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}},{key:"copyToTexture",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _utils.log.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"blit",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _utils.log.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}},{key:"invalidate",value:function(_ref7){var _ref7$attachments=_ref7.attachments,attachments=void 0===_ref7$attachments?[]:_ref7$attachments,_ref7$x=_ref7.x,x=void 0===_ref7$x?0:_ref7$x,_ref7$y=_ref7.y,y=void 0===_ref7$y?0:_ref7$y,width=_ref7.width,height=_ref7.height,gl=this.gl;(0,_webglUtils.assertWebGL2Context)(gl);var prevHandle=gl.bindFramebuffer(36008,this.handle);return 0===x&&0===y&&void 0===width&&void 0===height?gl.invalidateFramebuffer(36008,attachments):gl.invalidateFramebuffer(36008,attachments,x,y,width,height),gl.bindFramebuffer(36008,prevHandle),this}},{key:"getAttachmentParameter",value:function(attachment,pname,keys){var value=this._getAttachmentParameterFallback(pname);return null===value&&(this.gl.bindFramebuffer(36160,this.handle),value=this.gl.getFramebufferAttachmentParameter(36160,attachment,pname),this.gl.bindFramebuffer(36160,null)),keys&&value>1e3&&(value=(0,_webglUtils.getKey)(this.gl,value)),value}},{key:"getAttachmentParameters",value:function(){var attachment=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,keys=arguments.length>1?arguments[1]:void 0,parameters=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[],values={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=parameters[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var pname=_step.value;values[keys?(0,_webglUtils.getKey)(this.gl,pname):pname]=this.getAttachmentParameter(attachment,pname,keys)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return values}},{key:"getParameters",value:function(){for(var keys=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],parameters={},_i=0,_attachments=Object.keys(this.attachments);_i<_attachments.length;_i++){var attachmentName=_attachments[_i],attachment=Number(attachmentName);parameters[keys?(0,_webglUtils.getKey)(this.gl,attachment):attachment]=this.getAttachmentParameters(attachment,keys)}return parameters}},{key:"show",value:function(){return"undefined"!=typeof window&&window.open((0,_copyAndBlit.copyToDataUrl)(this),"luma-debug-texture"),this}},{key:"log",value:function(){var priority=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,message=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(priority>_utils.log.priority||"undefined"==typeof window)return this;message=message||"Framebuffer ".concat(this.id);var image=(0,_copyAndBlit.copyToDataUrl)(this,{maxHeight:100});return _utils.log.image({priority:priority,message:message,image:image},message)(),this}},{key:"bind",value:function(){var _ref8$target=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).target,target=void 0===_ref8$target?36160:_ref8$target;return this.gl.bindFramebuffer(target,this.handle),this}},{key:"unbind",value:function(){var _ref9$target=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).target,target=void 0===_ref9$target?36160:_ref9$target;return this.gl.bindFramebuffer(target,null),this}},{key:"_createDefaultAttachments",value:function(color,depth,stencil,width,height){var _parameters,defaultAttachments=null;color&&((defaultAttachments=defaultAttachments||{})[36064]=new _texture2d.default(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:width,height:height,mipmaps:!1,parameters:(_parameters={},(0,_defineProperty2.default)(_parameters,10241,9728),(0,_defineProperty2.default)(_parameters,10240,9728),(0,_defineProperty2.default)(_parameters,10242,33071),(0,_defineProperty2.default)(_parameters,10243,33071),_parameters)}));return depth&&stencil?(defaultAttachments=defaultAttachments||{})[33306]=new _renderbuffer.default(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:width,height:111}):depth?(defaultAttachments=defaultAttachments||{})[36096]=new _renderbuffer.default(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:width,height:height}):stencil&&(0,_utils.assert)(!1),defaultAttachments}},{key:"_unattach",value:function(attachment){var oldAttachment=this.attachments[attachment];oldAttachment&&(oldAttachment instanceof _renderbuffer.default?this.gl.framebufferRenderbuffer(36160,attachment,36161,null):this.gl.framebufferTexture2D(36160,attachment,3553,null,0),delete this.attachments[attachment])}},{key:"_attachRenderbuffer",value:function(_ref10){var _ref10$attachment=_ref10.attachment,attachment=void 0===_ref10$attachment?36064:_ref10$attachment,renderbuffer=_ref10.renderbuffer;this.gl.framebufferRenderbuffer(36160,attachment,36161,renderbuffer.handle),this.attachments[attachment]=renderbuffer}},{key:"_attachTexture",value:function(_ref11){var _ref11$attachment=_ref11.attachment,attachment=void 0===_ref11$attachment?36064:_ref11$attachment,texture=_ref11.texture,layer=_ref11.layer,level=_ref11.level,gl=this.gl;switch(gl.bindTexture(texture.target,texture.handle),texture.target){case 35866:case 32879:gl.framebufferTextureLayer(36160,attachment,texture.target,level,layer);break;case 34067:var face=function(layer){return layer<34069?layer+34069:layer}(layer);gl.framebufferTexture2D(36160,attachment,face,texture.handle,level);break;case 3553:gl.framebufferTexture2D(36160,attachment,3553,texture.handle,level);break;default:(0,_utils.assert)(!1,"Illegal texture type")}gl.bindTexture(texture.target,null),this.attachments[attachment]=texture}},{key:"_setReadBuffer",value:function(gl,readBuffer){(0,_webglUtils.isWebGL2)(gl)?gl.readBuffer(readBuffer):(0,_utils.assert)(36064===readBuffer||1029===readBuffer,"Multiple render targets not supported"),this.readBuffer=readBuffer}},{key:"_setDrawBuffers",value:function(gl,drawBuffers){if((0,_webglUtils.isWebGL2)(gl))gl.drawBuffers(drawBuffers);else{var ext=gl.getExtension("WEBGL.draw_buffers");ext?ext.drawBuffersWEBGL(drawBuffers):(0,_utils.assert)(1===drawBuffers.length&&(36064===drawBuffers[0]||1029===drawBuffers[0]),"Multiple render targets not supported")}this.drawBuffers=drawBuffers}},{key:"_getAttachmentParameterFallback",value:function(pname){var caps=(0,_features.getFeatures)(this.gl);switch(pname){case 36052:return caps.webgl2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return caps.webgl2?null:8;case 33297:return caps.webgl2?null:5125;case 33296:return caps.webgl2||caps.EXT_sRGB?null:9729;default:return null}}},{key:"_createHandle",value:function(){return this.gl.createFramebuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteFramebuffer(this.handle)}},{key:"_bindHandle",value:function(handle){return this.gl.bindFramebuffer(36160,handle)}},{key:"color",get:function(){return this.attachments[36064]||null}},{key:"texture",get:function(){return this.attachments[36064]||null}},{key:"depth",get:function(){return this.attachments[36096]||this.attachments[33306]||null}},{key:"stencil",get:function(){return this.attachments[36128]||this.attachments[33306]||null}}]),Framebuffer}(_resource.default);function _getFrameBufferStatus(status){return(Framebuffer.STATUS||{})[status]||"Framebuffer error ".concat(status)}exports.default=Framebuffer;var FRAMEBUFFER_ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];exports.FRAMEBUFFER_ATTACHMENT_PARAMETERS=FRAMEBUFFER_ATTACHMENT_PARAMETERS,Framebuffer.ATTACHMENT_PARAMETERS=FRAMEBUFFER_ATTACHMENT_PARAMETERS},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPrimitiveDrawMode=getPrimitiveDrawMode,exports.getPrimitiveCount=getPrimitiveCount,exports.getVertexCount=function(_ref2){var drawMode=_ref2.drawMode,vertexCount=_ref2.vertexCount,primitiveCount=getPrimitiveCount({drawMode:drawMode,vertexCount:vertexCount});switch(getPrimitiveDrawMode(drawMode)){case GL_POINTS:return primitiveCount;case GL_LINES:return 2*primitiveCount;case GL_TRIANGLES:return 3*primitiveCount;default:return(0,_utils.assert)(!1),0}},exports.decomposeCompositeGLType=function(compositeGLType){var typeAndSize=COMPOSITE_GL_TYPES[compositeGLType];if(!typeAndSize)return null;var _typeAndSize=(0,_slicedToArray2.default)(typeAndSize,2),type=_typeAndSize[0],components=_typeAndSize[1];return{type:type,components:components}},exports.getCompositeGLType=function(type,components){switch(type){case GL_BYTE:case GL_UNSIGNED_BYTE:case GL_SHORT:case GL_UNSIGNED_SHORT:type=GL_FLOAT}for(var glType in COMPOSITE_GL_TYPES){var _COMPOSITE_GL_TYPES$g=(0,_slicedToArray2.default)(COMPOSITE_GL_TYPES[glType],3),compType=_COMPOSITE_GL_TYPES$g[0],compComponents=_COMPOSITE_GL_TYPES$g[1],name=_COMPOSITE_GL_TYPES$g[2];if(compType===type&&compComponents===components)return{glType:glType,name:name}}return null};var _COMPOSITE_GL_TYPES,_slicedToArray2=_interopRequireDefault(__webpack_require__(11)),_defineProperty2=_interopRequireDefault(__webpack_require__(6)),_utils=__webpack_require__(10),GL_BYTE=5120,GL_UNSIGNED_BYTE=5121,GL_SHORT=5122,GL_UNSIGNED_SHORT=5123,GL_POINTS=0,GL_LINES=1,GL_LINE_LOOP=2,GL_LINE_STRIP=3,GL_TRIANGLES=4,GL_TRIANGLE_STRIP=5,GL_TRIANGLE_FAN=6,GL_FLOAT=5126,COMPOSITE_GL_TYPES=(_COMPOSITE_GL_TYPES={},(0,_defineProperty2.default)(_COMPOSITE_GL_TYPES,GL_FLOAT,[GL_FLOAT,1,"float"]),(0,_defineProperty2.default)(_COMPOSITE_GL_TYPES,35664,[GL_FLOAT,2,"vec2"]),(0,_defineProperty2.default)(_COMPOSITE_GL_TYPES,35665,[GL_FLOAT,3,"vec3"]),(0,_defineProperty2.default)(_COMPOSITE_GL_TYPES,35666,[GL_FLOAT,4,"vec4"]),(0,_defineProperty2.default)(_COMPOSITE_GL_TYPES,5124,[5124,1,"int"]),(0,_defineProperty2.default)(_COMPOSITE_GL_TYPES,35667,[5124,2,"ivec2"]),(0,_defineProperty2.default)(_COMPOSITE_GL_TYPES,35668,[5124,3,"ivec3"]),(0,_defineProperty2.default)(_COMPOSITE_GL_TYPES,35669,[5124,4,"ivec4"]),(0,_defineProperty2.default)(_COMPOSITE_GL_TYPES,5125,[5125,1,"uint"]),(0,_defineProperty2.default)(_COMPOSITE_GL_TYPES,36294,[5125,2,"uvec2"]),(0,_defineProperty2.default)(_COMPOSITE_GL_TYPES,36295,[5125,3,"uvec3"]),(0,_defineProperty2.default)(_COMPOSITE_GL_TYPES,36296,[5125,4,"uvec4"]),(0,_defineProperty2.default)(_COMPOSITE_GL_TYPES,35670,[GL_FLOAT,1,"bool"]),(0,_defineProperty2.default)(_COMPOSITE_GL_TYPES,35671,[GL_FLOAT,2,"bvec2"]),(0,_defineProperty2.default)(_COMPOSITE_GL_TYPES,35672,[GL_FLOAT,3,"bvec3"]),(0,_defineProperty2.default)(_COMPOSITE_GL_TYPES,35673,[GL_FLOAT,4,"bvec4"]),(0,_defineProperty2.default)(_COMPOSITE_GL_TYPES,35674,[GL_FLOAT,8,"mat2"]),(0,_defineProperty2.default)(_COMPOSITE_GL_TYPES,35685,[GL_FLOAT,8,"mat2x3"]),(0,_defineProperty2.default)(_COMPOSITE_GL_TYPES,35686,[GL_FLOAT,8,"mat2x4"]),(0,_defineProperty2.default)(_COMPOSITE_GL_TYPES,35675,[GL_FLOAT,12,"mat3"]),(0,_defineProperty2.default)(_COMPOSITE_GL_TYPES,35687,[GL_FLOAT,12,"mat3x2"]),(0,_defineProperty2.default)(_COMPOSITE_GL_TYPES,35688,[GL_FLOAT,12,"mat3x4"]),(0,_defineProperty2.default)(_COMPOSITE_GL_TYPES,35676,[GL_FLOAT,16,"mat4"]),(0,_defineProperty2.default)(_COMPOSITE_GL_TYPES,35689,[GL_FLOAT,16,"mat4x2"]),(0,_defineProperty2.default)(_COMPOSITE_GL_TYPES,35690,[GL_FLOAT,16,"mat4x3"]),_COMPOSITE_GL_TYPES);function getPrimitiveDrawMode(drawMode){switch(drawMode){case GL_POINTS:return GL_POINTS;case GL_LINES:case GL_LINE_STRIP:case GL_LINE_LOOP:return GL_LINES;case GL_TRIANGLES:case GL_TRIANGLE_STRIP:case GL_TRIANGLE_FAN:return GL_TRIANGLES;default:return(0,_utils.assert)(!1),0}}function getPrimitiveCount(_ref){var drawMode=_ref.drawMode,vertexCount=_ref.vertexCount;switch(drawMode){case GL_POINTS:case GL_LINE_LOOP:return vertexCount;case GL_LINES:return vertexCount/2;case GL_LINE_STRIP:return vertexCount-1;case GL_TRIANGLES:return vertexCount/3;case GL_TRIANGLE_STRIP:case GL_TRIANGLE_FAN:return vertexCount-2;default:return(0,_utils.assert)(!1),0}}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_common=__webpack_require__(43);var MathArray=function(_extendableBuiltin2){function MathArray(){return(0,_classCallCheck2.default)(this,MathArray),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(MathArray).apply(this,arguments))}return(0,_inherits2.default)(MathArray,_extendableBuiltin2),(0,_createClass2.default)(MathArray,[{key:"clone",value:function(){return(new this.constructor).copy(this).check()}},{key:"copy",value:function(array){for(var i=0;i<this.ELEMENTS;++i)this[i]=array[i];return this.check()}},{key:"set",value:function(){for(var i=0;i<this.ELEMENTS;++i)this[i]=(i<0||arguments.length<=i?void 0:arguments[i])||0;return this.check()}},{key:"fromArray",value:function(array){for(var offset=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=0;i<this.ELEMENTS;++i)this[i]=array[i+offset];return this.check()}},{key:"toString",value:function(){return this.formatString(_common.config)}},{key:"formatString",value:function(opts){for(var string="",i=0;i<this.ELEMENTS;++i)string+=(i>0?", ":"")+(0,_common.formatValue)(this[i],opts);return"".concat(opts.printTypes?this.constructor.name:"","[").concat(string,"]")}},{key:"toArray",value:function(){for(var array=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],offset=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=0;i<this.ELEMENTS;++i)array[offset+i]=this[i];return array}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"equals",value:function(array){if(!array||this.length!==array.length)return!1;for(var i=0;i<this.ELEMENTS;++i)if(!(0,_common.equals)(this[i],array[i]))return!1;return!0}},{key:"exactEquals",value:function(array){if(!array||this.length!==array.length)return!1;for(var i=0;i<this.ELEMENTS;++i)if(this[i]!==array[i])return!1;return!0}},{key:"negate",value:function(){for(var i=0;i<this.ELEMENTS;++i)this[i]=-this[i];return this.check()}},{key:"inverse",value:function(){for(var i=0;i<this.ELEMENTS;++i)this[i]=1/this[i];return this.check()}},{key:"lerp",value:function(a,b,t){void 0===t&&(t=b,b=a,a=this);for(var i=0;i<this.ELEMENTS;++i){var ai=a[i];this[i]=ai+t*(b[i]-ai)}return this.check()}},{key:"min",value:function(vector){for(var i=0;i<this.ELEMENTS;++i)this[i]=Math.min(vector[i],this[i]);return this.check()}},{key:"max",value:function(vector){for(var i=0;i<this.ELEMENTS;++i)this[i]=Math.max(vector[i],this[i]);return this.check()}},{key:"clamp",value:function(minVector,maxVector){for(var i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],minVector[i]),maxVector[i]);return this.check()}},{key:"validate",value:function(){for(var array=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,valid=array&&array.length===this.ELEMENTS,i=0;i<this.ELEMENTS;++i)valid=valid&&Number.isFinite(array[i]);return valid}},{key:"check",value:function(){var array=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;if(_common.config.debug&&!this.validate(array))throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"sub",value:function(a){return this.subtract(a)}},{key:"setScalar",value:function(a){for(var i=0;i<this.ELEMENTS;++i)this[i]=a;return this.check()}},{key:"addScalar",value:function(a){for(var i=0;i<this.ELEMENTS;++i)this[i]+=a;return this.check()}},{key:"subScalar",value:function(a){return this.addScalar(-a)}},{key:"multiplyScalar",value:function(a){return this.scale(a)}},{key:"divideScalar",value:function(a){return this.scale(1/a)}},{key:"clampScalar",value:function(min,max){for(var i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],min),max);return this.check()}}]),MathArray}(function(cls){function ExtendableBuiltin(){var instance=Reflect.construct(cls,Array.from(arguments));return Object.setPrototypeOf(instance,Object.getPrototypeOf(this)),instance}return ExtendableBuiltin.prototype=Object.create(cls.prototype,{constructor:{value:cls,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(ExtendableBuiltin,cls):ExtendableBuiltin.__proto__=cls,ExtendableBuiltin}(Array));exports.default=MathArray},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"registerShaderModules",{enumerable:!0,get:function(){return _resolveModules.registerShaderModules}}),Object.defineProperty(exports,"setDefaultShaderModules",{enumerable:!0,get:function(){return _resolveModules.setDefaultShaderModules}}),Object.defineProperty(exports,"assembleShaders",{enumerable:!0,get:function(){return _assembleShaders.assembleShaders}}),Object.defineProperty(exports,"combineInjects",{enumerable:!0,get:function(){return _injectShader.combineInjects}}),Object.defineProperty(exports,"normalizeShaderModule",{enumerable:!0,get:function(){return _normalizeModule.normalizeShaderModule}}),Object.defineProperty(exports,"getQualifierDetails",{enumerable:!0,get:function(){return _shaderUtils.getQualifierDetails}}),Object.defineProperty(exports,"getPassthroughFS",{enumerable:!0,get:function(){return _shaderUtils.getPassthroughFS}}),Object.defineProperty(exports,"typeToChannelSuffix",{enumerable:!0,get:function(){return _shaderUtils.typeToChannelSuffix}}),Object.defineProperty(exports,"typeToChannelCount",{enumerable:!0,get:function(){return _shaderUtils.typeToChannelCount}}),Object.defineProperty(exports,"convertToVec4",{enumerable:!0,get:function(){return _shaderUtils.convertToVec4}}),Object.defineProperty(exports,"fp32",{enumerable:!0,get:function(){return _fp.default}}),Object.defineProperty(exports,"fp64",{enumerable:!0,get:function(){return _fp2.default}}),Object.defineProperty(exports,"project",{enumerable:!0,get:function(){return _project.default}}),Object.defineProperty(exports,"lights",{enumerable:!0,get:function(){return _lights.default}}),Object.defineProperty(exports,"dirlight",{enumerable:!0,get:function(){return _dirlight.default}}),Object.defineProperty(exports,"picking",{enumerable:!0,get:function(){return _picking.default}}),Object.defineProperty(exports,"diffuse",{enumerable:!0,get:function(){return _diffuse.default}}),Object.defineProperty(exports,"gouraudlighting",{enumerable:!0,get:function(){return _phongLighting.gouraudlighting}}),Object.defineProperty(exports,"phonglighting",{enumerable:!0,get:function(){return _phongLighting.phonglighting}}),Object.defineProperty(exports,"pbr",{enumerable:!0,get:function(){return _pbr.default}}),Object.defineProperty(exports,"_transform",{enumerable:!0,get:function(){return _transform.default}}),exports.MODULAR_SHADERS=void 0;var _modularVertex=_interopRequireDefault(__webpack_require__(670)),_modularFragment=_interopRequireDefault(__webpack_require__(671)),_resolveModules=__webpack_require__(323),_assembleShaders=__webpack_require__(675),_injectShader=__webpack_require__(326),_normalizeModule=__webpack_require__(680),_shaderUtils=__webpack_require__(682),_fp=_interopRequireDefault(__webpack_require__(683)),_fp2=_interopRequireDefault(__webpack_require__(684)),_project=_interopRequireDefault(__webpack_require__(327)),_lights=_interopRequireDefault(__webpack_require__(200)),_dirlight=_interopRequireDefault(__webpack_require__(689)),_picking=_interopRequireDefault(__webpack_require__(690)),_diffuse=_interopRequireDefault(__webpack_require__(691)),_phongLighting=__webpack_require__(692),_pbr=_interopRequireDefault(__webpack_require__(694)),_transform=_interopRequireDefault(__webpack_require__(699)),MODULAR_SHADERS={vs:_modularVertex.default,fs:_modularFragment.default,defaultUniforms:{}};exports.MODULAR_SHADERS=MODULAR_SHADERS},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"assert",{enumerable:!0,get:function(){return _assert.default}});var _assert=_interopRequireDefault(__webpack_require__(324))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.flatten=function(array){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref$filter=_ref.filter,filter=void 0===_ref$filter?function(){return!0}:_ref$filter,_ref$map=_ref.map,map=void 0===_ref$map?function(x){return x}:_ref$map,_ref$result=_ref.result,result=void 0===_ref$result?[]:_ref$result;if(!Array.isArray(array))return filter(array)?[map(array)]:[];return function flattenArray(array,filter,map,result){var index=-1;for(;++index<array.length;){var value=array[index];Array.isArray(value)?flattenArray(value,filter,map,result):filter(value)&&result.push(map(value))}return result}(array,filter,map,result)},exports.countVertices=function countVertices(nestedArray){var count=0;var index=-1;for(;++index<nestedArray.length;){var value=nestedArray[index];Array.isArray(value)||ArrayBuffer.isView(value)?count+=countVertices(value):count++}return count},exports.flattenVertices=function flattenVertices(nestedArray){var _ref2=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref2$result=_ref2.result,result=void 0===_ref2$result?[]:_ref2$result,_ref2$dimensions=_ref2.dimensions,dimensions=void 0===_ref2$dimensions?3:_ref2$dimensions;var index=-1;var vertexLength=0;for(;++index<nestedArray.length;){var value=nestedArray[index];Array.isArray(value)||ArrayBuffer.isView(value)?flattenVertices(value,{result:result,dimensions:dimensions}):vertexLength<dimensions&&(result.push(value),vertexLength++)}vertexLength>0&&vertexLength<dimensions&&result.push(0);return result},exports.fillArray=function(_ref3){for(var target=_ref3.target,source=_ref3.source,_ref3$start=_ref3.start,start=void 0===_ref3$start?0:_ref3$start,_ref3$count=_ref3.count,count=void 0===_ref3$count?1:_ref3$count,length=source.length,total=count*length,copied=0,i=start;copied<length;copied++)target[i++]=source[copied];for(;copied<total;)copied<total-copied?(target.copyWithin(start+copied,start,start+copied),copied*=2):(target.copyWithin(start+copied,start,start+total-copied),copied=total);return target}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_transitionManager=_interopRequireDefault(__webpack_require__(114)),_log=_interopRequireDefault(__webpack_require__(24)),_assert=_interopRequireDefault(__webpack_require__(20)),NO_TRANSITION_PROPS={transitionDuration:0},EVENT_TYPES_WHEEL=["wheel"],EVENT_TYPES_PAN=["panstart","panmove","panend"],EVENT_TYPES_PINCH=["pinchstart","pinchmove","pinchend"],EVENT_TYPES_DOUBLE_TAP=["doubletap"],EVENT_TYPES_KEYBOARD=["keydown"],Controller=function(){function Controller(ControllerState){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,_classCallCheck2.default)(this,Controller),(0,_assert.default)(ControllerState),this.ControllerState=ControllerState,this.controllerState=null,this.controllerStateProps=null,this.eventManager=null,this.transitionManager=new _transitionManager.default(ControllerState,options),this._events=null,this._state={isDragging:!1},this.events=[],this.onViewStateChange=null,this.onStateChange=null,this.invertPan=!1,this.handleEvent=this.handleEvent.bind(this),this.setProps(options)}return(0,_createClass2.default)(Controller,[{key:"finalize",value:function(){for(var eventName in this._events)this._events[eventName]&&this.eventManager.off(eventName,this.handleEvent);this.transitionManager.finalize()}},{key:"handleEvent",value:function(event){var ControllerState=this.ControllerState;switch(this.controllerState=new ControllerState(Object.assign({},this.controllerStateProps,this._state)),event.type){case"panstart":return this._onPanStart(event);case"panmove":return this._onPan(event);case"panend":return this._onPanEnd(event);case"pinchstart":return this._onPinchStart(event);case"pinchmove":return this._onPinch(event);case"pinchend":return this._onPinchEnd(event);case"doubletap":return this._onDoubleTap(event);case"wheel":return this._onWheel(event);case"keydown":return this._onKeyDown(event);default:return!1}}},{key:"getCenter",value:function(event){var _this$controllerState=this.controllerStateProps,x=_this$controllerState.x,y=_this$controllerState.y,offsetCenter=event.offsetCenter;return[offsetCenter.x-x,offsetCenter.y-y]}},{key:"isPointInBounds",value:function(pos){var _this$controllerState2=this.controllerStateProps,width=_this$controllerState2.width,height=_this$controllerState2.height;return pos[0]>=0&&pos[0]<=width&&pos[1]>=0&&pos[1]<=height}},{key:"isFunctionKeyPressed",value:function(event){var srcEvent=event.srcEvent;return Boolean(srcEvent.metaKey||srcEvent.altKey||srcEvent.ctrlKey||srcEvent.shiftKey)}},{key:"isDragging",value:function(){return this._state.isDragging}},{key:"setProps",value:function(props){"onViewportChange"in props&&_log.default.removed("onViewportChange")(),"onViewStateChange"in props&&(this.onViewStateChange=props.onViewStateChange),"onStateChange"in props&&(this.onStateChange=props.onStateChange),this.controllerStateProps=props,"eventManager"in props&&this.eventManager!==props.eventManager&&(this.eventManager=props.eventManager,this._events={},this.toggleEvents(this.events,!0)),this.transitionManager.processViewStateChange(this.controllerStateProps);var _props$scrollZoom=props.scrollZoom,scrollZoom=void 0===_props$scrollZoom||_props$scrollZoom,_props$dragPan=props.dragPan,dragPan=void 0===_props$dragPan||_props$dragPan,_props$dragRotate=props.dragRotate,dragRotate=void 0===_props$dragRotate||_props$dragRotate,_props$doubleClickZoo=props.doubleClickZoom,doubleClickZoom=void 0===_props$doubleClickZoo||_props$doubleClickZoo,_props$touchZoom=props.touchZoom,touchZoom=void 0===_props$touchZoom||_props$touchZoom,_props$touchRotate=props.touchRotate,touchRotate=void 0!==_props$touchRotate&&_props$touchRotate,_props$keyboard=props.keyboard,keyboard=void 0===_props$keyboard||_props$keyboard,isInteractive=Boolean(this.onViewStateChange);this.toggleEvents(EVENT_TYPES_WHEEL,isInteractive&&scrollZoom),this.toggleEvents(EVENT_TYPES_PAN,isInteractive&&(dragPan||dragRotate)),this.toggleEvents(EVENT_TYPES_PINCH,isInteractive&&(touchZoom||touchRotate)),this.toggleEvents(EVENT_TYPES_DOUBLE_TAP,isInteractive&&doubleClickZoom),this.toggleEvents(EVENT_TYPES_KEYBOARD,isInteractive&&keyboard),this.scrollZoom=scrollZoom,this.dragPan=dragPan,this.dragRotate=dragRotate,this.doubleClickZoom=doubleClickZoom,this.touchZoom=touchZoom,this.touchRotate=touchRotate,this.keyboard=keyboard}},{key:"updateTransition",value:function(timestamp){this.transitionManager.updateTransition(timestamp)}},{key:"toggleEvents",value:function(eventNames,enabled){var _this=this;this.eventManager&&eventNames.forEach(function(eventName){_this._events[eventName]!==enabled&&(_this._events[eventName]=enabled,enabled?_this.eventManager.on(eventName,_this.handleEvent):_this.eventManager.off(eventName,_this.handleEvent))})}},{key:"setOptions",value:function(props){return this.setProps(props)}},{key:"updateViewport",value:function(newControllerState){var extraProps=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},interactionState=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},viewState=Object.assign({},newControllerState.getViewportProps(),extraProps);if(this.controllerState!==newControllerState){var oldViewState=this.controllerState?this.controllerState.getViewportProps():null;this.onViewStateChange&&this.onViewStateChange({viewState:viewState,interactionState:interactionState,oldViewState:oldViewState})}Object.assign(this._state,Object.assign({},newControllerState.getInteractiveState(),interactionState)),this.onStateChange&&this.onStateChange(this._state)}},{key:"_onPanStart",value:function(event){var pos=this.getCenter(event);if(!this.isPointInBounds(pos))return!1;var newControllerState=this.controllerState.panStart({pos:pos}).rotateStart({pos:pos});return this.updateViewport(newControllerState,NO_TRANSITION_PROPS,{isDragging:!0})}},{key:"_onPan",value:function(event){var alternateMode=this.isFunctionKeyPressed(event)||event.rightButton;return(alternateMode=this.invertPan?!alternateMode:alternateMode)?this._onPanMove(event):this._onPanRotate(event)}},{key:"_onPanEnd",value:function(event){var newControllerState=this.controllerState.panEnd().rotateEnd();return this.updateViewport(newControllerState,null,{isDragging:!1})}},{key:"_onPanMove",value:function(event){if(!this.dragPan)return!1;var pos=this.getCenter(event);if(!this.isDragging())return!1;var newControllerState=this.controllerState.pan({pos:pos});return this.updateViewport(newControllerState,NO_TRANSITION_PROPS,{isDragging:!0})}},{key:"_onPanRotate",value:function(event){if(!this.dragRotate)return!1;var deltaX=event.deltaX,deltaY=event.deltaY,_this$controllerState3=this.controllerState.getViewportProps(),deltaScaleX=deltaX/_this$controllerState3.width,deltaScaleY=deltaY/_this$controllerState3.height,newControllerState=this.controllerState.rotate({deltaScaleX:deltaScaleX,deltaScaleY:deltaScaleY});return this.updateViewport(newControllerState,NO_TRANSITION_PROPS,{isDragging:!0})}},{key:"_onWheel",value:function(event){if(!this.scrollZoom)return!1;event.preventDefault();var pos=this.getCenter(event);if(!this.isPointInBounds(pos))return!1;var delta=event.delta,scale=2/(1+Math.exp(-Math.abs(.01*delta)));delta<0&&0!==scale&&(scale=1/scale);var newControllerState=this.controllerState.zoom({pos:pos,scale:scale});return this.updateViewport(newControllerState,NO_TRANSITION_PROPS)}},{key:"_onPinchStart",value:function(event){var pos=this.getCenter(event);if(!this.isPointInBounds(pos))return!1;var newControllerState=this.controllerState.zoomStart({pos:pos}).rotateStart({pos:pos});return this._state.startPinchRotation=event.rotation,this.updateViewport(newControllerState,NO_TRANSITION_PROPS,{isDragging:!0})}},{key:"_onPinch",value:function(event){if(!this.touchZoom&&!this.touchRotate)return!1;var newControllerState=this.controllerState;if(this.touchZoom){var scale=event.scale,pos=this.getCenter(event);newControllerState=newControllerState.zoom({pos:pos,scale:scale})}if(this.touchRotate){var rotation=event.rotation,startPinchRotation=this._state.startPinchRotation;newControllerState=newControllerState.rotate({deltaScaleX:-(rotation-startPinchRotation)/180})}return this.updateViewport(newControllerState,NO_TRANSITION_PROPS,{isDragging:!0})}},{key:"_onPinchEnd",value:function(event){var newControllerState=this.controllerState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(newControllerState,null,{isDragging:!1})}},{key:"_onDoubleTap",value:function(event){if(!this.doubleClickZoom)return!1;var pos=this.getCenter(event);if(!this.isPointInBounds(pos))return!1;var isZoomOut=this.isFunctionKeyPressed(event),newControllerState=this.controllerState.zoom({pos:pos,scale:isZoomOut?.5:2});return this.updateViewport(newControllerState,this._getTransitionProps())}},{key:"_onKeyDown",value:function(event){if(!this.keyboard)return!1;var newControllerState,funcKey=this.isFunctionKeyPressed(event),controllerState=this.controllerState;switch(event.srcEvent.keyCode){case 189:newControllerState=funcKey?controllerState.zoomOut().zoomOut():controllerState.zoomOut();break;case 187:newControllerState=funcKey?controllerState.zoomIn().zoomIn():controllerState.zoomIn();break;case 37:newControllerState=funcKey?controllerState.rotateLeft():controllerState.moveLeft();break;case 39:newControllerState=funcKey?controllerState.rotateRight():controllerState.moveRight();break;case 38:newControllerState=funcKey?controllerState.rotateUp():controllerState.moveUp();break;case 40:newControllerState=funcKey?controllerState.rotateDown():controllerState.moveDown();break;default:return!1}return this.updateViewport(newControllerState,this._getTransitionProps())}},{key:"_getTransitionProps",value:function(){return NO_TRANSITION_PROPS}}]),Controller}();exports.default=Controller},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TRANSITION_EVENTS=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_linearInterpolator=_interopRequireDefault(__webpack_require__(115)),_transition=_interopRequireDefault(__webpack_require__(339)),_assert=_interopRequireDefault(__webpack_require__(20)),noop=function(){},TRANSITION_EVENTS={BREAK:1,SNAP_TO_END:2,IGNORE:3};exports.TRANSITION_EVENTS=TRANSITION_EVENTS;var DEFAULT_PROPS={transitionDuration:0,transitionEasing:function(t){return t},transitionInterpolator:new _linearInterpolator.default,transitionInterruption:TRANSITION_EVENTS.BREAK,onTransitionStart:noop,onTransitionInterrupt:noop,onTransitionEnd:noop},TransitionManager=function(){function TransitionManager(ControllerState){var props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,_classCallCheck2.default)(this,TransitionManager),(0,_assert.default)(ControllerState),this.ControllerState=ControllerState,this.props=Object.assign({},DEFAULT_PROPS,props),this.propsInTransition=null,this.time=0,this.transition=new _transition.default,this.onViewStateChange=props.onViewStateChange,this._onTransitionUpdate=this._onTransitionUpdate.bind(this)}return(0,_createClass2.default)(TransitionManager,[{key:"finalize",value:function(){}},{key:"getViewportInTransition",value:function(){return this.propsInTransition}},{key:"processViewStateChange",value:function(nextProps){var transitionTriggered=!1,currentProps=this.props;if(nextProps=Object.assign({},DEFAULT_PROPS,nextProps),this.props=nextProps,this._shouldIgnoreViewportChange(currentProps,nextProps))return transitionTriggered;if(this._isTransitionEnabled(nextProps)){var startProps=Object.assign({},currentProps,this.transition.interruption===TRANSITION_EVENTS.SNAP_TO_END?this.transition.endProps:this.propsInTransition||currentProps);this._triggerTransition(startProps,nextProps),transitionTriggered=!0}else this.transition.cancel();return transitionTriggered}},{key:"updateTransition",value:function(timestamp){this.time=timestamp,this._updateTransition()}},{key:"_isTransitionEnabled",value:function(props){return props.transitionDuration>0&&props.transitionInterpolator}},{key:"_isUpdateDueToCurrentTransition",value:function(props){return!!this.transition.inProgress&&this.transition.interpolator.arePropsEqual(props,this.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function(currentProps,nextProps){return this.transition.inProgress?this.transition.interruption===TRANSITION_EVENTS.IGNORE||this._isUpdateDueToCurrentTransition(nextProps):!this._isTransitionEnabled(nextProps)||nextProps.transitionInterpolator.arePropsEqual(currentProps,nextProps)}},{key:"_triggerTransition",value:function(startProps,endProps){(0,_assert.default)(this._isTransitionEnabled(endProps),"Transition is not enabled");var startViewstate=new this.ControllerState(startProps),endViewStateProps=new this.ControllerState(endProps).shortestPathFrom(startViewstate),initialProps=endProps.transitionInterpolator.initializeProps(startProps,endViewStateProps);this.propsInTransition={},this.transition.start({duration:endProps.transitionDuration,easing:endProps.transitionEasing,interpolator:endProps.transitionInterpolator,interruption:endProps.transitionInterruption,startProps:initialProps.start,endProps:initialProps.end,onStart:endProps.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(endProps.onTransitionInterrupt),onEnd:this._onTransitionEnd(endProps.onTransitionEnd)}),this._updateTransition()}},{key:"_updateTransition",value:function(){this.transition.update(this.time)}},{key:"_onTransitionEnd",value:function(callback){var _this=this;return function(transition){_this.propsInTransition=null,callback(transition)}}},{key:"_onTransitionUpdate",value:function(transition){var interpolator=transition.interpolator,startProps=transition.startProps,endProps=transition.endProps,time=transition.time,viewport=interpolator.interpolateProps(startProps,endProps,time);this.propsInTransition=new this.ControllerState(Object.assign({},this.props,viewport)).getViewportProps(),this.onViewStateChange&&this.onViewStateChange({viewState:this.propsInTransition,interactionState:{inTransition:!0}})}}]),TransitionManager}();exports.default=TransitionManager,TransitionManager.defaultProps=DEFAULT_PROPS},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_transitionInterpolator=_interopRequireDefault(__webpack_require__(347)),_math=__webpack_require__(25),VIEWPORT_TRANSITION_PROPS=["longitude","latitude","zoom","bearing","pitch"],LinearInterpolator=function(_TransitionInterpolat){function LinearInterpolator(){var transitionProps=arguments.length>0&&void 0!==arguments[0]?arguments[0]:VIEWPORT_TRANSITION_PROPS;return(0,_classCallCheck2.default)(this,LinearInterpolator),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(LinearInterpolator).call(this,transitionProps))}return(0,_inherits2.default)(LinearInterpolator,_TransitionInterpolat),(0,_createClass2.default)(LinearInterpolator,[{key:"interpolateProps",value:function(startProps,endProps,t){var viewport={};for(var key in endProps)viewport[key]=(0,_math.lerp)(startProps[key],endProps[key],t);return viewport}}]),LinearInterpolator}(_transitionInterpolator.default);exports.default=LinearInterpolator},function(module,exports,__webpack_require__){"use strict";"undefined"==typeof TextDecoder?module.exports={}:module.exports={TextEncoder:TextEncoder,TextDecoder:TextDecoder}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(condition,message){if(!condition)throw new Error(message||"react-map-gl: assertion failed.")}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(13),Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"storiesOf",{enumerable:!0,get:function(){return _preview.storiesOf}}),Object.defineProperty(exports,"setAddon",{enumerable:!0,get:function(){return _preview.setAddon}}),Object.defineProperty(exports,"addDecorator",{enumerable:!0,get:function(){return _preview.addDecorator}}),Object.defineProperty(exports,"addParameters",{enumerable:!0,get:function(){return _preview.addParameters}}),Object.defineProperty(exports,"configure",{enumerable:!0,get:function(){return _preview.configure}}),Object.defineProperty(exports,"getStorybook",{enumerable:!0,get:function(){return _preview.getStorybook}}),Object.defineProperty(exports,"forceReRender",{enumerable:!0,get:function(){return _preview.forceReRender}});var _preview=__webpack_require__(488)},function(module,exports,__webpack_require__){"use strict";var fnToStr=Function.prototype.toString,constructorRegex=/^\s*class\b/,isES6ClassFn=function(value){try{var fnStr=fnToStr.call(value);return constructorRegex.test(fnStr)}catch(e){return!1}},toStr=Object.prototype.toString,hasToStringTag="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;module.exports=function(value){if(!value)return!1;if("function"!=typeof value&&"object"!=typeof value)return!1;if("function"==typeof value&&!value.prototype)return!0;if(hasToStringTag)return function(value){try{return!isES6ClassFn(value)&&(fnToStr.call(value),!0)}catch(e){return!1}}(value);if(isES6ClassFn(value))return!1;var strClass=toStr.call(value);return"[object Function]"===strClass||"[object GeneratorFunction]"===strClass}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(28);module.exports=function(it,S){if(!isObject(it))return it;var fn,val;if(S&&"function"==typeof(fn=it.toString)&&!isObject(val=fn.call(it)))return val;if("function"==typeof(fn=it.valueOf)&&!isObject(val=fn.call(it)))return val;if(!S&&"function"==typeof(fn=it.toString)&&!isObject(val=fn.call(it)))return val;throw TypeError("Can't convert object to primitive value")}},function(module,exports,__webpack_require__){var META=__webpack_require__(95)("meta"),isObject=__webpack_require__(28),has=__webpack_require__(54),setDesc=__webpack_require__(34).f,id=0,isExtensible=Object.isExtensible||function(){return!0},FREEZE=!__webpack_require__(33)(function(){return isExtensible(Object.preventExtensions({}))}),setMeta=function(it){setDesc(it,META,{value:{i:"O"+ ++id,w:{}}})},meta=module.exports={KEY:META,NEED:!1,fastKey:function(it,create){if(!isObject(it))return"symbol"==typeof it?it:("string"==typeof it?"S":"P")+it;if(!has(it,META)){if(!isExtensible(it))return"F";if(!create)return"E";setMeta(it)}return it[META].i},getWeak:function(it,create){if(!has(it,META)){if(!isExtensible(it))return!0;if(!create)return!1;setMeta(it)}return it[META].w},onFreeze:function(it){return FREEZE&&meta.NEED&&isExtensible(it)&&!has(it,META)&&setMeta(it),it}}},function(module,exports,__webpack_require__){var cof=__webpack_require__(65);module.exports=Object("z").propertyIsEnumerable(0)?Object:function(it){return"String"==cof(it)?it.split(""):Object(it)}},function(module,exports){exports.f={}.propertyIsEnumerable},function(module,exports,__webpack_require__){var cof=__webpack_require__(65),TAG=__webpack_require__(22)("toStringTag"),ARG="Arguments"==cof(function(){return arguments}());module.exports=function(it){var O,T,B;return void 0===it?"Undefined":null===it?"Null":"string"==typeof(T=function(it,key){try{return it[key]}catch(e){}}(O=Object(it),TAG))?T:ARG?cof(O):"Object"==(B=cof(O))&&"function"==typeof O.callee?"Arguments":B}},function(module,exports){module.exports=function(module){return module.webpackPolyfill||(module.deprecate=function(){},module.paths=[],module.children||(module.children=[]),Object.defineProperty(module,"loaded",{enumerable:!0,get:function(){return module.l}}),Object.defineProperty(module,"id",{enumerable:!0,get:function(){return module.i}}),module.webpackPolyfill=1),module}},function(module,exports,__webpack_require__){var dP=__webpack_require__(34).f,FProto=Function.prototype,nameRE=/^\s*function ([^ (]*)/;"name"in FProto||__webpack_require__(31)&&dP(FProto,"name",{configurable:!0,get:function(){try{return(""+this).match(nameRE)[1]}catch(e){return""}}})},function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(18),$map=__webpack_require__(166)(1);$export($export.P+$export.F*!__webpack_require__(83)([].map,!0),"Array",{map:function(callbackfn){return $map(this,callbackfn,arguments[1])}})},function(module,exports,__webpack_require__){var $export=__webpack_require__(18);$export($export.S,"Array",{isArray:__webpack_require__(163)})},function(module,exports,__webpack_require__){"use strict";(function(process){var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.isBrowserMainThread=void 0;var _typeof2=_interopRequireDefault(__webpack_require__(27)),_isElectron=_interopRequireDefault(__webpack_require__(620)),isBrowser=!("object"===(void 0===process?"undefined":(0,_typeof2.default)(process))&&"[object process]"===String(process)&&!process.browser)||_isElectron.default,isBrowserMainThread=isBrowser&&"undefined"!=typeof document;exports.isBrowserMainThread=isBrowserMainThread;var _default=isBrowser;exports.default=_default}).call(this,__webpack_require__(44))},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(9);Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"getParameter",{enumerable:!0,get:function(){return _unifiedParameterApi.getParameter}}),Object.defineProperty(exports,"getParameters",{enumerable:!0,get:function(){return _unifiedParameterApi.getParameters}}),Object.defineProperty(exports,"setParameter",{enumerable:!0,get:function(){return _unifiedParameterApi.setParameter}}),Object.defineProperty(exports,"resetParameters",{enumerable:!0,get:function(){return _unifiedParameterApi.resetParameters}}),Object.defineProperty(exports,"getModifiedParameters",{enumerable:!0,get:function(){return _unifiedParameterApi.getModifiedParameters}}),Object.defineProperty(exports,"setParameters",{enumerable:!0,get:function(){return _setParameters.setParameters}}),Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return _trackContextState.default}}),Object.defineProperty(exports,"trackContextState",{enumerable:!0,get:function(){return _trackContextState.default}}),Object.defineProperty(exports,"pushContextState",{enumerable:!0,get:function(){return _trackContextState.pushContextState}}),Object.defineProperty(exports,"popContextState",{enumerable:!0,get:function(){return _trackContextState.popContextState}}),Object.defineProperty(exports,"withParameters",{enumerable:!0,get:function(){return _withParameters.withParameters}});var _unifiedParameterApi=__webpack_require__(187),_setParameters=__webpack_require__(294),_trackContextState=_interopRequireWildcard(__webpack_require__(295)),_withParameters=__webpack_require__(632)},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"assert",{enumerable:!0,get:function(){return _assert.default}}),Object.defineProperty(exports,"deepArrayEqual",{enumerable:!0,get:function(){return _deepArrayEqual.default}}),Object.defineProperty(exports,"isWebGL2",{enumerable:!0,get:function(){return _utils.isWebGL2}}),Object.defineProperty(exports,"isObjectEmpty",{enumerable:!0,get:function(){return _utils.isObjectEmpty}});var _assert=_interopRequireDefault(__webpack_require__(625)),_deepArrayEqual=_interopRequireDefault(__webpack_require__(293)),_utils=__webpack_require__(626)},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_ACCESSOR_VALUES=exports.default=void 0;var _construct2=_interopRequireDefault(__webpack_require__(641)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_webglUtils=__webpack_require__(14),_utils=__webpack_require__(10),DEFAULT_ACCESSOR_VALUES={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1};exports.DEFAULT_ACCESSOR_VALUES=DEFAULT_ACCESSOR_VALUES;var PROP_CHECKS={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}},Accessor=function(){function Accessor(){var _this=this;(0,_classCallCheck2.default)(this,Accessor);for(var _len2=arguments.length,accessors=new Array(_len2),_key2=0;_key2<_len2;_key2++)accessors[_key2]=arguments[_key2];accessors.forEach(function(accessor){return _this._assign(accessor)}),Object.freeze(this)}return(0,_createClass2.default)(Accessor,null,[{key:"getBytesPerElement",value:function(accessor){return(0,_webglUtils.getTypedArrayFromGLType)(accessor.type||5126).BYTES_PER_ELEMENT}},{key:"getBytesPerVertex",value:function(accessor){return(0,_utils.assert)(accessor.size),(0,_webglUtils.getTypedArrayFromGLType)(accessor.type||5126).BYTES_PER_ELEMENT*accessor.size}},{key:"resolve",value:function(){for(var _len=arguments.length,accessors=new Array(_len),_key=0;_key<_len;_key++)accessors[_key]=arguments[_key];return(0,_construct2.default)(Accessor,[DEFAULT_ACCESSOR_VALUES].concat(accessors))}}]),(0,_createClass2.default)(Accessor,[{key:"toString",value:function(){return JSON.stringify(this)}},{key:"_assign",value:function(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0!==(props=(0,_utils.checkProps)("Accessor",props,PROP_CHECKS)).type&&(this.type=props.type,5124!==props.type&&5125!==props.type||(this.integer=!0)),void 0!==props.size&&(this.size=props.size),void 0!==props.offset&&(this.offset=props.offset),void 0!==props.stride&&(this.stride=props.stride),void 0!==props.normalized&&(this.normalized=props.normalized),void 0!==props.integer&&(this.integer=props.integer),void 0!==props.divisor&&(this.divisor=props.divisor),void 0!==props.buffer&&(this.buffer=props.buffer),void 0!==props.index&&("boolean"==typeof index?this.index=props.index?1:0:this.index=props.index),void 0!==props.instanced&&(this.divisor=props.instanced?1:0),void 0!==props.isInstanced&&(this.divisor=props.isInstanced?1:0),this}},{key:"BYTES_PER_ELEMENT",get:function(){return Accessor.getBytesPerElement(this)}},{key:"BYTES_PER_VERTEX",get:function(){return Accessor.getBytesPerVertex(this)}}]),Accessor}();exports.default=Accessor},function(module,exports,__webpack_require__){module.exports=__webpack_require__(642)},function(module,exports){function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}module.exports=function(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.FEATURES=void 0;var _FEATURES$WEBGL2$FEAT,_defineProperty2=_interopRequireDefault(__webpack_require__(6)),_webglUtils=__webpack_require__(14),FEATURES={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};exports.FEATURES=FEATURES;var _default=(_FEATURES$WEBGL2$FEAT={},(0,_defineProperty2.default)(_FEATURES$WEBGL2$FEAT,FEATURES.WEBGL2,[function(gl){return(0,_webglUtils.isWebGL2)(gl)}]),(0,_defineProperty2.default)(_FEATURES$WEBGL2$FEAT,FEATURES.VERTEX_ARRAY_OBJECT,["OES_vertex_array_object",!0]),(0,_defineProperty2.default)(_FEATURES$WEBGL2$FEAT,FEATURES.TIMER_QUERY,["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"]),(0,_defineProperty2.default)(_FEATURES$WEBGL2$FEAT,FEATURES.INSTANCED_RENDERING,["ANGLE_instanced_arrays",!0]),(0,_defineProperty2.default)(_FEATURES$WEBGL2$FEAT,FEATURES.MULTIPLE_RENDER_TARGETS,["WEBGL_draw_buffers",!0]),(0,_defineProperty2.default)(_FEATURES$WEBGL2$FEAT,FEATURES.ELEMENT_INDEX_UINT32,["OES_element_index_uint",!0]),(0,_defineProperty2.default)(_FEATURES$WEBGL2$FEAT,FEATURES.BLEND_EQUATION_MINMAX,["EXT_blend_minmax",!0]),(0,_defineProperty2.default)(_FEATURES$WEBGL2$FEAT,FEATURES.COLOR_ENCODING_SRGB,["EXT_sRGB",!0]),(0,_defineProperty2.default)(_FEATURES$WEBGL2$FEAT,FEATURES.TEXTURE_DEPTH,["WEBGL_depth_texture",!0]),(0,_defineProperty2.default)(_FEATURES$WEBGL2$FEAT,FEATURES.TEXTURE_FLOAT,["OES_texture_float",!0]),(0,_defineProperty2.default)(_FEATURES$WEBGL2$FEAT,FEATURES.TEXTURE_HALF_FLOAT,["OES_texture_half_float",!0]),(0,_defineProperty2.default)(_FEATURES$WEBGL2$FEAT,FEATURES.TEXTURE_FILTER_LINEAR_FLOAT,["OES_texture_float_linear"]),(0,_defineProperty2.default)(_FEATURES$WEBGL2$FEAT,FEATURES.TEXTURE_FILTER_LINEAR_HALF_FLOAT,["OES_texture_half_float_linear"]),(0,_defineProperty2.default)(_FEATURES$WEBGL2$FEAT,FEATURES.TEXTURE_FILTER_ANISOTROPIC,["EXT_texture_filter_anisotropic"]),(0,_defineProperty2.default)(_FEATURES$WEBGL2$FEAT,FEATURES.COLOR_ATTACHMENT_RGBA32F,["WEBGL_color_buffer_float","EXT_color_buffer_float"]),(0,_defineProperty2.default)(_FEATURES$WEBGL2$FEAT,FEATURES.COLOR_ATTACHMENT_FLOAT,[!1,"EXT_color_buffer_float"]),(0,_defineProperty2.default)(_FEATURES$WEBGL2$FEAT,FEATURES.COLOR_ATTACHMENT_HALF_FLOAT,[!1,"EXT_color_buffer_half_float"]),(0,_defineProperty2.default)(_FEATURES$WEBGL2$FEAT,FEATURES.GLSL_FRAG_DATA,["WEBGL_draw_buffers",!0]),(0,_defineProperty2.default)(_FEATURES$WEBGL2$FEAT,FEATURES.GLSL_FRAG_DEPTH,["EXT_frag_depth",!0]),(0,_defineProperty2.default)(_FEATURES$WEBGL2$FEAT,FEATURES.GLSL_DERIVATIVES,["OES_standard_derivatives",!0]),(0,_defineProperty2.default)(_FEATURES$WEBGL2$FEAT,FEATURES.GLSL_TEXTURE_LOD,["EXT_shader_texture_lod",!0]),_FEATURES$WEBGL2$FEAT);exports.default=_default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(6)),_objectSpread2=_interopRequireDefault(__webpack_require__(36)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_get2=_interopRequireDefault(__webpack_require__(16)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_webgl=__webpack_require__(42),_modelUtils=__webpack_require__(668),_baseModel=_interopRequireDefault(__webpack_require__(669)),_utils=__webpack_require__(19),Model=function(_BaseModel){function Model(gl,props){(0,_classCallCheck2.default)(this,Model);var _props$id=props.id,id=void 0===_props$id?(0,_utils.uid)("model"):_props$id;return(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Model).call(this,gl,(0,_objectSpread2.default)({},props,{id:id})))}return(0,_inherits2.default)(Model,_BaseModel),(0,_createClass2.default)(Model,[{key:"initialize",value:function(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,_get2.default)((0,_getPrototypeOf2.default)(Model.prototype),"initialize",this).call(this,props),this.drawMode=void 0!==props.drawMode?props.drawMode:4,this.vertexCount=props.vertexCount||0,this.geometryBuffers={},this.isInstanced=props.isInstanced||props.instanced,this._setModelProps(props),this.geometry={},(0,_utils.assert)(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}},{key:"setProps",value:function(props){(0,_get2.default)((0,_getPrototypeOf2.default)(Model.prototype),"setProps",this).call(this,props),this._setModelProps(props)}},{key:"delete",value:function(){(0,_get2.default)((0,_getPrototypeOf2.default)(Model.prototype),"delete",this).call(this),this._deleteGeometryBuffers()}},{key:"destroy",value:function(){this.delete()}},{key:"getDrawMode",value:function(){return this.drawMode}},{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getInstanceCount",value:function(){return this.instanceCount}},{key:"getAttributes",value:function(){return this.attributes}},{key:"setDrawMode",value:function(drawMode){return this.drawMode=drawMode,this}},{key:"setVertexCount",value:function(vertexCount){return(0,_utils.assert)(Number.isFinite(vertexCount)),this.vertexCount=vertexCount,this}},{key:"setInstanceCount",value:function(instanceCount){return(0,_utils.assert)(Number.isFinite(instanceCount)),this.instanceCount=instanceCount,this}},{key:"setGeometry",value:function(geometry){return this.drawMode=geometry.drawMode,this.vertexCount=geometry.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=(0,_modelUtils.getBuffersFromGeometry)(this.gl,geometry),this.vertexArray.setAttributes(this.geometryBuffers),this}},{key:"setAttributes",value:function(){var attributes=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,_utils.isObjectEmpty)(attributes))return this;var normalizedAttributes={};for(var name in attributes){var attribute=attributes[name];normalizedAttributes[name]=attribute.getValue?attribute.getValue():attribute}return this.vertexArray.setAttributes(normalizedAttributes),this}},{key:"draw",value:function(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.drawGeometry(options)}},{key:"transform",value:function(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_options$discard=options.discard,discard=void 0===_options$discard||_options$discard,feedbackBuffers=options.feedbackBuffers,_options$unbindModels=options.unbindModels,unbindModels=void 0===_options$unbindModels?[]:_options$unbindModels,parameters=options.parameters;feedbackBuffers&&this._setFeedbackBuffers(feedbackBuffers),discard&&(parameters=Object.assign({},parameters,(0,_defineProperty2.default)({},35977,discard))),unbindModels.forEach(function(model){return model.vertexArray.unbindBuffers()});try{this.draw(Object.assign({},options,{parameters:parameters}))}finally{unbindModels.forEach(function(model){return model.vertexArray.bindBuffers()})}return this}},{key:"render",value:function(){var uniforms=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _utils.log.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(uniforms).draw()}},{key:"_setModelProps",value:function(props){"instanceCount"in props&&(this.instanceCount=props.instanceCount),"geometry"in props&&this.setGeometry(props.geometry),"attributes"in props&&this.setAttributes(props.attributes),"_feedbackBuffers"in props&&this._setFeedbackBuffers(props._feedbackBuffers)}},{key:"_deleteGeometryBuffers",value:function(){for(var name in this.geometryBuffers){var buffer=this.geometryBuffers[name][0]||this.geometryBuffers[name];buffer instanceof _webgl.Buffer&&buffer.delete()}}},{key:"_setAnimationProps",value:function(animationProps){var _this=this;if(this.animated){(0,_utils.assert)(animationProps,"Model.draw(): animated uniforms but no animationProps");var animatedUniforms=this._evaluateAnimateUniforms(animationProps);this.program.setUniforms(animatedUniforms,function(){_this._checkForDeprecatedUniforms(animatedUniforms)})}}},{key:"_setFeedbackBuffers",value:function(){var feedbackBuffers=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,_utils.isObjectEmpty)(feedbackBuffers))return this;var gl=this.program.gl;return this.transformFeedback=this.transformFeedback||new _webgl.TransformFeedback(gl,{program:this.program}),this.transformFeedback.setBuffers(feedbackBuffers),this}},{key:"_timerQueryStart",value:function(){!0===this.timerQueryEnabled&&(this.timeElapsedQuery||(this.timeElapsedQuery=new _webgl.Query(this.gl)),this.lastQueryReturned&&(this.lastQueryReturned=!1,this.timeElapsedQuery.beginTimeElapsedQuery()))}},{key:"_timerQueryEnd",value:function(){if(!0===this.timerQueryEnabled&&(this.timeElapsedQuery.end(),this.timeElapsedQuery.isResultAvailable())){this.lastQueryReturned=!0;var elapsedTime=this.timeElapsedQuery.getTimerMilliseconds();this.stats.lastFrameTime=elapsedTime,this.stats.accumulatedFrameTime+=elapsedTime,this.stats.profileFrameCount++,this.stats.averageFrameTime=this.stats.accumulatedFrameTime/this.stats.profileFrameCount,_utils.log.log(2,"GPU time ".concat(this.program.id,": ").concat(this.stats.lastFrameTime,"ms average ").concat(this.stats.averageFrameTime,"ms accumulated: ").concat(this.stats.accumulatedFrameTime,"ms count: ").concat(this.stats.profileFrameCount))()}}}]),Model}(_baseModel.default);exports.default=Model},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_model=_interopRequireDefault(__webpack_require__(136)),_geometry=_interopRequireDefault(__webpack_require__(68)),CLIPSPACE_VERTEX_SHADER="attribute vec2 aClipSpacePosition;\nattribute vec2 aTexCoord;\nattribute vec2 aCoordinate;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main(void) {\n  gl_Position = vec4(aClipSpacePosition, 0., 1.);\n  position = aClipSpacePosition;\n  coordinate = aCoordinate;\n  uv = aTexCoord;\n}\n",POSITIONS=[-1,-1,1,-1,-1,1,1,1],ClipSpace=function(_Model){function ClipSpace(gl,opts){var _this;(0,_classCallCheck2.default)(this,ClipSpace);var TEX_COORDS=POSITIONS.map(function(coord){return-1===coord?0:coord});return(_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(ClipSpace).call(this,gl,Object.assign({},opts,{vs:CLIPSPACE_VERTEX_SHADER,geometry:new _geometry.default({drawMode:5,vertexCount:4,attributes:{aClipSpacePosition:{size:2,value:new Float32Array(POSITIONS)},aTexCoord:{size:2,value:new Float32Array(TEX_COORDS)},aCoordinate:{size:2,value:new Float32Array(TEX_COORDS)}}})})))).setVertexCount(4),_this}return(0,_inherits2.default)(ClipSpace,_Model),ClipSpace}(_model.default);exports.default=ClipSpace},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_math=__webpack_require__(25),_utils=__webpack_require__(19),ScenegraphNode=function(){function ScenegraphNode(props){(0,_classCallCheck2.default)(this,ScenegraphNode);var id=props.id;this.id=id||(0,_utils.uid)(this.constructor.name),this.display=!0,this.position=new _math.Vector3,this.rotation=new _math.Vector3,this.scale=new _math.Vector3(1,1,1),this.matrix=new _math.Matrix4,this.userData={},this.props={},this._setScenegraphNodeProps(props)}return(0,_createClass2.default)(ScenegraphNode,[{key:"delete",value:function(){}},{key:"setProps",value:function(props){return this._setScenegraphNodeProps(props),this}},{key:"toString",value:function(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}},{key:"setPosition",value:function(position){return(0,_utils.assert)(3===position.length,"setPosition requires vector argument"),this.position=position,this}},{key:"setRotation",value:function(rotation){return(0,_utils.assert)(3===rotation.length,"setRotation requires vector argument"),this.rotation=rotation,this}},{key:"setScale",value:function(scale){return(0,_utils.assert)(3===scale.length,"setScale requires vector argument"),this.scale=scale,this}},{key:"setMatrix",value:function(matrix){!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?this.matrix.copy(matrix):this.matrix=matrix}},{key:"setMatrixComponents",value:function(_ref){var position=_ref.position,rotation=_ref.rotation,scale=_ref.scale,_ref$update=_ref.update,update=void 0===_ref$update||_ref$update;return position&&this.setPosition(position),rotation&&this.setRotation(rotation),scale&&this.setScale(scale),update&&this.updateMatrix(),this}},{key:"updateMatrix",value:function(){var pos=this.position,rot=this.rotation,scale=this.scale;return this.matrix.identity(),this.matrix.translate(pos),this.matrix.rotateXYZ(rot),this.matrix.scale(scale),this}},{key:"update",value:function(){var _ref2=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},position=_ref2.position,rotation=_ref2.rotation,scale=_ref2.scale;return position&&this.setPosition(position),rotation&&this.setRotation(rotation),scale&&this.setScale(scale),this.updateMatrix(),this}},{key:"getCoordinateUniforms",value:function(viewMatrix,modelMatrix){(0,_utils.assert)(viewMatrix),modelMatrix=modelMatrix||this.matrix;var worldMatrix=new _math.Matrix4(viewMatrix).multiplyRight(modelMatrix),worldInverse=worldMatrix.invert(),worldInverseTranspose=worldInverse.transpose();return{viewMatrix:viewMatrix,modelMatrix:modelMatrix,objectMatrix:modelMatrix,worldMatrix:worldMatrix,worldInverseMatrix:worldInverse,worldInverseTransposeMatrix:worldInverseTranspose}}},{key:"transform",value:function(){if(this.parent){var parent=this.parent;this.endPosition.set(this.position.add(parent.endPosition)),this.endRotation.set(this.rotation.add(parent.endRotation)),this.endScale.set(this.scale.add(parent.endScale))}else this.endPosition.set(this.position),this.endRotation.set(this.rotation),this.endScale.set(this.scale);for(var ch=this.children,i=0;i<ch.length;++i)ch[i].transform();return this}},{key:"_setScenegraphNodeProps",value:function(props){"display"in props&&(this.display=props.display),"position"in props&&this.setPosition(props.position),"rotation"in props&&this.setPosition(props.rotation),"scale"in props&&this.setScale(props.scale),"matrix"in props&&this.setPosition(props.matrix),Object.assign(this.props,props)}}]),ScenegraphNode}();exports.default=ScenegraphNode},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _core=__webpack_require__(7),_project=_interopRequireDefault(__webpack_require__(723)),_viewportUniforms=__webpack_require__(204),INITIAL_MODULE_OPTIONS={};var _default={name:"project",dependencies:[_core.fp32],vs:_project.default,getUniforms:function(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:INITIAL_MODULE_OPTIONS;return opts.viewport?(0,_viewportUniforms.getUniformsFromViewport)(opts):{}},deprecations:[{type:"function",old:"project_scale",new:"project_size"},{type:"function",old:"project_to_clipspace",new:"project_common_position_to_clipspace"},{type:"function",old:"project_pixel_to_clipspace",new:"project_pixel_size_to_clipspace"}]};exports.default=_default},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(9);Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMat4=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},exports.transformVector=function(matrix,vector){var result=vec4.transformMat4([],vector,matrix);return vec4.scale(result,result,1/result[3]),result},exports.mod=function(value,divisor){var modulus=value%divisor;return modulus<0?divisor+modulus:modulus},exports.lerp=function(start,end,step){return step*end+(1-step)*start};var vec4=_interopRequireWildcard(__webpack_require__(90))},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(9),_interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.zoomToScale=zoomToScale,exports.scaleToZoom=scaleToZoom,exports.lngLatToWorld=lngLatToWorld,exports.worldToLngLat=worldToLngLat,exports.getMeterZoom=function(_ref5){var latitude=_ref5.latitude;(0,_assert.default)(Number.isFinite(latitude));var latCosine=Math.cos(latitude*DEGREES_TO_RADIANS);return scaleToZoom(EARTH_CIRCUMFERENCE*latCosine)-9},exports.getDistanceScales=getDistanceScales,exports.addMetersToLngLat=function(lngLatZ,xyz){var _lngLatZ=(0,_slicedToArray2.default)(lngLatZ,3),longitude=_lngLatZ[0],latitude=_lngLatZ[1],z0=_lngLatZ[2],_xyz=(0,_slicedToArray2.default)(xyz,3),x=_xyz[0],y=_xyz[1],z=_xyz[2],_getDistanceScales=getDistanceScales({longitude:longitude,latitude:latitude,scale:1,highPrecision:!0}),pixelsPerMeter=_getDistanceScales.pixelsPerMeter,pixelsPerMeter2=_getDistanceScales.pixelsPerMeter2,worldspace=lngLatToWorld(lngLatZ,1);worldspace[0]+=x*(pixelsPerMeter[0]+pixelsPerMeter2[0]*y),worldspace[1]+=y*(pixelsPerMeter[1]+pixelsPerMeter2[1]*y);var newLngLat=worldToLngLat(worldspace,1),newZ=(z0||0)+(z||0);return Number.isFinite(z0)||Number.isFinite(z)?[newLngLat[0],newLngLat[1],newZ]:newLngLat},exports.getViewMatrix=function(_ref7){var height=_ref7.height,pitch=_ref7.pitch,bearing=_ref7.bearing,altitude=_ref7.altitude,_ref7$center=_ref7.center,center=void 0===_ref7$center?null:_ref7$center,_ref7$flipY=_ref7.flipY,flipY=void 0!==_ref7$flipY&&_ref7$flipY,vm=(0,_mathUtils.createMat4)();mat4.translate(vm,vm,[0,0,-altitude]),mat4.scale(vm,vm,[1,1,1/height]),mat4.rotateX(vm,vm,-pitch*DEGREES_TO_RADIANS),mat4.rotateZ(vm,vm,bearing*DEGREES_TO_RADIANS),flipY&&mat4.scale(vm,vm,[1,-1,1]);center&&mat4.translate(vm,vm,vec3.negate([],center));return vm},exports.getProjectionParameters=getProjectionParameters,exports.getProjectionMatrix=function(_ref9){var width=_ref9.width,height=_ref9.height,pitch=_ref9.pitch,altitude=_ref9.altitude,nearZMultiplier=_ref9.nearZMultiplier,farZMultiplier=_ref9.farZMultiplier,_getProjectionParamet=getProjectionParameters({width:width,height:height,altitude:altitude,pitch:pitch,nearZMultiplier:nearZMultiplier,farZMultiplier:farZMultiplier}),fov=_getProjectionParamet.fov,aspect=_getProjectionParamet.aspect,near=_getProjectionParamet.near,far=_getProjectionParamet.far;return mat4.perspective([],fov,aspect,near,far)},exports.worldToPixels=function(xyz,pixelProjectionMatrix){var _xyz2=(0,_slicedToArray2.default)(xyz,3),x=_xyz2[0],y=_xyz2[1],_xyz2$=_xyz2[2],z=void 0===_xyz2$?0:_xyz2$;return(0,_assert.default)(Number.isFinite(x)&&Number.isFinite(y)&&Number.isFinite(z)),(0,_mathUtils.transformVector)(pixelProjectionMatrix,[x,y,z,1])},exports.pixelsToWorld=function(xyz,pixelUnprojectionMatrix){var targetZ=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,_xyz3=(0,_slicedToArray2.default)(xyz,3),x=_xyz3[0],y=_xyz3[1],z=_xyz3[2];if((0,_assert.default)(Number.isFinite(x)&&Number.isFinite(y),"invalid pixel coordinate"),Number.isFinite(z)){var coord=(0,_mathUtils.transformVector)(pixelUnprojectionMatrix,[x,y,z,1]);return coord}var coord0=(0,_mathUtils.transformVector)(pixelUnprojectionMatrix,[x,y,0,1]),coord1=(0,_mathUtils.transformVector)(pixelUnprojectionMatrix,[x,y,1,1]),z0=coord0[2],z1=coord1[2],t=z0===z1?0:((targetZ||0)-z0)/(z1-z0);return vec2.lerp([],coord0,coord1,t)};var _slicedToArray2=_interopRequireDefault(__webpack_require__(11)),_mathUtils=__webpack_require__(140),mat4=_interopRequireWildcard(__webpack_require__(89)),vec2=_interopRequireWildcard(__webpack_require__(69)),vec3=_interopRequireWildcard(__webpack_require__(70)),_assert=_interopRequireDefault(__webpack_require__(335)),PI=Math.PI,PI_4=PI/4,DEGREES_TO_RADIANS=PI/180,RADIANS_TO_DEGREES=180/PI,TILE_SIZE=512,EARTH_CIRCUMFERENCE=4003e4,DEFAULT_ALTITUDE=1.5;function zoomToScale(zoom){return Math.pow(2,zoom)}function scaleToZoom(scale){return Math.log2(scale)}function lngLatToWorld(_ref,scale){var _ref2=(0,_slicedToArray2.default)(_ref,2),lng=_ref2[0],lat=_ref2[1];(0,_assert.default)(Number.isFinite(lng)&&Number.isFinite(scale)),(0,_assert.default)(Number.isFinite(lat)&&lat>=-90&&lat<=90,"invalid latitude");var phi2=lat*DEGREES_TO_RADIANS;return[(scale*=TILE_SIZE)*(lng*DEGREES_TO_RADIANS+PI)/(2*PI),scale*(PI-Math.log(Math.tan(PI_4+.5*phi2)))/(2*PI)]}function worldToLngLat(_ref3,scale){var _ref4=(0,_slicedToArray2.default)(_ref3,2),x=_ref4[0],y=_ref4[1],lambda2=x/(scale*=TILE_SIZE)*(2*PI)-PI,phi2=2*(Math.atan(Math.exp(PI-y/scale*(2*PI)))-PI_4);return[lambda2*RADIANS_TO_DEGREES,phi2*RADIANS_TO_DEGREES]}function getDistanceScales(_ref6){var latitude=_ref6.latitude,longitude=_ref6.longitude,zoom=_ref6.zoom,scale=_ref6.scale,_ref6$highPrecision=_ref6.highPrecision,highPrecision=void 0!==_ref6$highPrecision&&_ref6$highPrecision;scale=void 0!==scale?scale:zoomToScale(zoom),(0,_assert.default)(Number.isFinite(latitude)&&Number.isFinite(longitude)&&Number.isFinite(scale));var result={},worldSize=TILE_SIZE*scale,latCosine=Math.cos(latitude*DEGREES_TO_RADIANS),pixelsPerDegreeX=worldSize/360,pixelsPerDegreeY=pixelsPerDegreeX/latCosine,altPixelsPerMeter=worldSize/EARTH_CIRCUMFERENCE/latCosine;if(result.pixelsPerMeter=[altPixelsPerMeter,-altPixelsPerMeter,altPixelsPerMeter],result.metersPerPixel=[1/altPixelsPerMeter,-1/altPixelsPerMeter,1/altPixelsPerMeter],result.pixelsPerDegree=[pixelsPerDegreeX,-pixelsPerDegreeY,altPixelsPerMeter],result.degreesPerPixel=[1/pixelsPerDegreeX,-1/pixelsPerDegreeY,1/altPixelsPerMeter],highPrecision){var latCosine2=DEGREES_TO_RADIANS*Math.tan(latitude*DEGREES_TO_RADIANS)/latCosine,pixelsPerDegreeY2=pixelsPerDegreeX*latCosine2/2,altPixelsPerDegree2=worldSize/EARTH_CIRCUMFERENCE*latCosine2,altPixelsPerMeter2=altPixelsPerDegree2/pixelsPerDegreeY*altPixelsPerMeter;result.pixelsPerDegree2=[0,-pixelsPerDegreeY2,altPixelsPerDegree2],result.pixelsPerMeter2=[altPixelsPerMeter2,0,altPixelsPerMeter2]}return result}function getProjectionParameters(_ref8){var width=_ref8.width,height=_ref8.height,_ref8$altitude=_ref8.altitude,altitude=void 0===_ref8$altitude?DEFAULT_ALTITUDE:_ref8$altitude,_ref8$pitch=_ref8.pitch,pitch=void 0===_ref8$pitch?0:_ref8$pitch,_ref8$nearZMultiplier=_ref8.nearZMultiplier,nearZMultiplier=void 0===_ref8$nearZMultiplier?1:_ref8$nearZMultiplier,_ref8$farZMultiplier=_ref8.farZMultiplier,farZMultiplier=void 0===_ref8$farZMultiplier?1:_ref8$farZMultiplier,pitchRadians=pitch*DEGREES_TO_RADIANS,halfFov=Math.atan(.5/altitude),topHalfSurfaceDistance=Math.sin(halfFov)*altitude/Math.sin(Math.PI/2-pitchRadians-halfFov),farZ=Math.cos(Math.PI/2-pitchRadians)*topHalfSurfaceDistance+altitude;return{fov:2*Math.atan(height/2/altitude),aspect:width/height,focalDistance:altitude,near:nearZMultiplier,far:farZ*farZMultiplier}}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _slicedToArray2=_interopRequireDefault(__webpack_require__(11)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_constants=__webpack_require__(91),_attributeManager=_interopRequireDefault(__webpack_require__(208)),_seerIntegration=__webpack_require__(210),_props=__webpack_require__(733),_count=__webpack_require__(340),_log=_interopRequireDefault(__webpack_require__(24)),_core=__webpack_require__(7),_assert=_interopRequireDefault(__webpack_require__(20)),_projectFunctions=__webpack_require__(334),_component=_interopRequireDefault(__webpack_require__(734)),_layerState=_interopRequireDefault(__webpack_require__(737)),_viewportMercatorProject=__webpack_require__(37),EMPTY_ARRAY=Object.freeze([]),pickingColorCache=new Uint8ClampedArray(0),defaultProps={data:{type:"data",value:EMPTY_ARRAY,async:!0},dataComparator:null,dataTransform:{type:"function",value:function(data){return data},compare:!1},fetch:{type:"function",value:function(url){return fetch(url).then(function(response){return response.json()})},compare:!1},updateTriggers:{},numInstances:void 0,visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:.8},onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:_constants.COORDINATE_SYSTEM.LNGLAT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,parameters:{},uniforms:{},framebuffer:null,animation:null,getPolygonOffset:{type:"function",value:function(_ref){return[0,100*-_ref.layerIndex]},compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"color",value:[0,0,128,128]}},Layer=function(_Component){function Layer(){return(0,_classCallCheck2.default)(this,Layer),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Layer).apply(this,arguments))}return(0,_inherits2.default)(Layer,_Component),(0,_createClass2.default)(Layer,[{key:"toString",value:function(){var className=this.constructor.layerName||this.constructor.name;return"".concat(className,"({id: '").concat(this.props.id,"'})")}},{key:"setState",value:function(updateObject){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,updateObject),this.setNeedsRedraw()}},{key:"setNeedsRedraw",value:function(){var redraw=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.internalState&&(this.internalState.needsRedraw=redraw)}},{key:"setLayerNeedsUpdate",value:function(){this.context.layerManager.setNeedsUpdate(String(this))}},{key:"getNeedsRedraw",value:function(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};return this._getNeedsRedraw(opts)}},{key:"needsUpdate",value:function(){return this.shouldUpdateState(this._getUpdateParams())}},{key:"isPickable",value:function(){return this.props.pickable&&this.props.visible}},{key:"getModels",value:function(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}},{key:"getSingleModel",value:function(){return this.state&&this.state.model}},{key:"getAttributeManager",value:function(){return this.internalState&&this.internalState.attributeManager}},{key:"getCurrentLayer",value:function(){return this.internalState&&this.internalState.layer}},{key:"getFirstObject",value:function(){var data=this.props.data,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=data[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){return _step.value}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return null}},{key:"project",value:function(xyz){var viewport=this.context.viewport,worldPosition=(0,_projectFunctions.getWorldPosition)(xyz,{viewport:viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),_worldToPixels=(0,_viewportMercatorProject.worldToPixels)(worldPosition,viewport.pixelProjectionMatrix),_worldToPixels2=(0,_slicedToArray2.default)(_worldToPixels,3),x=_worldToPixels2[0],y=_worldToPixels2[1],z=_worldToPixels2[2];return 2===xyz.length?[x,y]:[x,y,z]}},{key:"unproject",value:function(xy){var viewport=this.context.viewport;return(0,_assert.default)(Array.isArray(xy)),viewport.unproject(xy)}},{key:"projectPosition",value:function(xyz){return(0,_assert.default)(Array.isArray(xyz)),(0,_projectFunctions.projectPosition)(xyz,{viewport:this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem})}},{key:"projectFlat",value:function(lngLat){_log.default.deprecated("layer.projectFlat","layer.projectPosition")();var viewport=this.context.viewport;return(0,_assert.default)(Array.isArray(lngLat)),viewport.projectFlat(lngLat)}},{key:"unprojectFlat",value:function(xy){_log.default.deprecated("layer.unprojectFlat")();var viewport=this.context.viewport;return(0,_assert.default)(Array.isArray(xy)),viewport.unprojectFlat(xy)}},{key:"use64bitProjection",value:function(){if(this.props.fp64){if(this.props.coordinateSystem===_constants.COORDINATE_SYSTEM.LNGLAT_DEPRECATED)return!0;_log.default.once(0,"Legacy 64-bit mode only works with coordinateSystem set to\n        COORDINATE_SYSTEM.LNGLAT_DEPRECATED. Rendering in 32-bit mode instead")()}return!1}},{key:"use64bitPositions",value:function(){return this.props.fp64||this.props.coordinateSystem===_constants.COORDINATE_SYSTEM.LNGLAT}},{key:"screenToDevicePixels",value:function(screenPixels){return _log.default.deprecated("screenToDevicePixels","DeckGL prop useDevicePixels for conversion")(),screenPixels*("undefined"!=typeof window?window.devicePixelRatio:1)}},{key:"onHover",value:function(info,pickingEvent){return!!this.props.onHover&&this.props.onHover(info,pickingEvent)}},{key:"onClick",value:function(info,pickingEvent){return!!this.props.onClick&&this.props.onClick(info,pickingEvent)}},{key:"nullPickingColor",value:function(){return[0,0,0]}},{key:"encodePickingColor",value:function(i){var target=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(0,_assert.default)(i<16777215,"index out of picking color range"),target[0]=i+1&255,target[1]=i+1>>8&255,target[2]=i+1>>8>>8&255,target}},{key:"decodePickingColor",value:function(color){(0,_assert.default)(color instanceof Uint8Array);var _color=(0,_slicedToArray2.default)(color,3);return _color[0]+256*_color[1]+65536*_color[2]-1}},{key:"initializeState",value:function(){throw new Error("Layer ".concat(this," has not defined initializeState"))}},{key:"shouldUpdateState",value:function(_ref2){_ref2.oldProps,_ref2.props,_ref2.context;return _ref2.changeFlags.propsOrDataChanged}},{key:"updateState",value:function(_ref3){_ref3.oldProps,_ref3.props,_ref3.context;var changeFlags=_ref3.changeFlags,attributeManager=this.getAttributeManager();changeFlags.dataChanged&&attributeManager&&attributeManager.invalidateAll()}},{key:"finalizeState",value:function(){var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=this.getModels()[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){_step2.value.delete()}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}var attributeManager=this.getAttributeManager();attributeManager&&attributeManager.finalize()}},{key:"draw",value:function(opts){var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=this.getModels()[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){_step3.value.draw(opts)}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{_iteratorNormalCompletion3||null==_iterator3.return||_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}}},{key:"getPickingInfo",value:function(_ref4){var info=_ref4.info,index=(_ref4.mode,info.index);return index>=0&&Array.isArray(this.props.data)&&(info.object=this.props.data[index]),info}},{key:"invalidateAttribute",value:function(){var name=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",diffReason=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",attributeManager=this.getAttributeManager();attributeManager&&("all"===name?(_log.default.log(1,"updateTriggers invalidating all attributes: ".concat(diffReason))(),attributeManager.invalidateAll()):(_log.default.log(1,"updateTriggers invalidating attribute ".concat(name,": ").concat(diffReason))(),attributeManager.invalidate(name)))}},{key:"updateAttributes",value:function(props){var attributeManager=this.getAttributeManager();if(attributeManager){var numInstances=this.getNumInstances(props);attributeManager.update({data:props.data,numInstances:numInstances,props:props,transitions:props.transitions,buffers:props,context:this,ignoreUnknownAttributes:!0});var models=this.getModels();if(models.length>0)for(var changedAttributes=attributeManager.getChangedAttributes({clearChangedFlags:!0}),i=0,len=models.length;i<len;++i)this._setModelAttributes(models[i],changedAttributes)}}},{key:"updateTransition",value:function(){var attributeManager=this.getAttributeManager();attributeManager&&attributeManager.updateTransition(this.context.time)}},{key:"calculateInstancePickingColors",value:function(attribute,_ref5){var numInstances=_ref5.numInstances,value=attribute.value,size=attribute.size;if(1!==value[0]){var cacheSize=pickingColorCache.length/size;if(cacheSize<numInstances){var newPickingColorCache=new Uint8ClampedArray(numInstances*size);newPickingColorCache.set(pickingColorCache);for(var pickingColor=[],i=cacheSize;i<numInstances;i++)this.encodePickingColor(i,pickingColor),newPickingColorCache[i*size+0]=pickingColor[0],newPickingColorCache[i*size+1]=pickingColor[1],newPickingColorCache[i*size+2]=pickingColor[2];pickingColorCache=newPickingColorCache}value.set(numInstances<cacheSize?pickingColorCache.subarray(0,numInstances*size):pickingColorCache)}}},{key:"_setModelAttributes",value:function(model,changedAttributes){var shaderAttributes={},excludeAttributes=model.userData.excludeAttributes||{};for(var attributeName in changedAttributes)excludeAttributes[attributeName]||Object.assign(shaderAttributes,changedAttributes[attributeName].getShaderAttributes());model.setAttributes(shaderAttributes)}},{key:"_clearInstancePickingColor",value:function(color){var instancePickingColors=this.getAttributeManager().attributes.instancePickingColors,value=instancePickingColors.value,size=instancePickingColors.size,i=this.decodePickingColor(color);value[i*size+0]=0,value[i*size+1]=0,value[i*size+2]=0,instancePickingColors.update({value:value})}},{key:"_clearPickingColor",value:function(color){for(var pickingColors=this.getAttributeManager().attributes.pickingColors,value=pickingColors.value,i=0;i<value.length;i+=3)value[i+0]===color[0]&&value[i+1]===color[1]&&value[i+2]===color[2]&&(value[i+0]=0,value[i+1]=0,value[i+2]=0);pickingColors.update({value:value})}},{key:"clearPickingColor",value:function(color){this.getAttributeManager().attributes.pickingColors?this._clearPickingColor(color):this._clearInstancePickingColor(color)}},{key:"copyPickingColors",value:function(){var _this$getAttributeMan=this.getAttributeManager().attributes,pickingColors=_this$getAttributeMan.pickingColors,instancePickingColors=_this$getAttributeMan.instancePickingColors;return new Uint8ClampedArray((pickingColors||instancePickingColors).value)}},{key:"restorePickingColors",value:function(value){var _this$getAttributeMan2=this.getAttributeManager().attributes,pickingColors=_this$getAttributeMan2.pickingColors,instancePickingColors=_this$getAttributeMan2.instancePickingColors;(pickingColors||instancePickingColors).update({value:value})}},{key:"getNumInstances",value:function(props){if(void 0!==(props=props||this.props).numInstances)return props.numInstances;if(this.state&&void 0!==this.state.numInstances)return this.state.numInstances;var data=this.props.data;return(0,_count.count)(data)}},{key:"_initialize",value:function(){this._initState(),this.initializeState(this.context),this.state.attributeManager=this.getAttributeManager(),this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0}),this._updateState();var model=this.getSingleModel();model&&(model.id=this.props.id,model.program.id="".concat(this.props.id,"-program"))}},{key:"_update",value:function(){this.needsUpdate()&&this._updateState()}},{key:"_updateState",value:function(){var updateParams=this._getUpdateParams();if(this.context.gl)this.updateState(updateParams);else try{this.updateState(updateParams)}catch(error){}this.isComposite?this._renderLayers(updateParams):(this.setNeedsRedraw(),this.updateAttributes(this.props),this._updateBaseUniforms(),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances())),this.clearChangeFlags(),this.internalState.resetOldProps()}},{key:"_finalize",value:function(){(0,_assert.default)(this.internalState&&this.state),this.finalizeState(this.context),(0,_seerIntegration.removeLayerInSeer)(this.id)}},{key:"drawLayer",value:function(_ref6){var _this=this,_ref6$moduleParameter=_ref6.moduleParameters,moduleParameters=void 0===_ref6$moduleParameter?null:_ref6$moduleParameter,_ref6$uniforms=_ref6.uniforms,uniforms=void 0===_ref6$uniforms?{}:_ref6$uniforms,_ref6$parameters=_ref6.parameters,parameters=void 0===_ref6$parameters?{}:_ref6$parameters;uniforms.picking_uActive||this.updateTransition(),moduleParameters&&this.setModuleParameters(moduleParameters);var animationProps=this.context.animationProps;if(animationProps){var _iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _step4,_iterator4=this.getModels()[Symbol.iterator]();!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){_step4.value._setAnimationProps(animationProps)}}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{_iteratorNormalCompletion4||null==_iterator4.return||_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}}var getPolygonOffset=this.props.getPolygonOffset,offsets=getPolygonOffset&&getPolygonOffset(uniforms)||[0,0];parameters.polygonOffset=offsets,(0,_core.withParameters)(this.context.gl,parameters,function(){_this.draw({moduleParameters:moduleParameters,uniforms:uniforms,parameters:parameters,context:_this.context})})}},{key:"pickLayer",value:function(opts){return this.getPickingInfo(opts)}},{key:"getChangeFlags",value:function(){return this.internalState.changeFlags}},{key:"setChangeFlags",value:function(flags){var _this2=this;this.internalState.changeFlags=this.internalState.changeFlags||{};var changeFlags=this.internalState.changeFlags;flags.dataChanged&&!changeFlags.dataChanged&&(changeFlags.dataChanged=flags.dataChanged,_log.default.log(2,function(){return"dataChanged: ".concat(flags.dataChanged," in ").concat(_this2.id)})()),flags.updateTriggersChanged&&!changeFlags.updateTriggersChanged&&(changeFlags.updateTriggersChanged=changeFlags.updateTriggersChanged&&flags.updateTriggersChanged?Object.assign({},flags.updateTriggersChanged,changeFlags.updateTriggersChanged):flags.updateTriggersChanged||changeFlags.updateTriggersChanged,_log.default.log(2,function(){return"updateTriggersChanged: "+"".concat(Object.keys(flags.updateTriggersChanged).join(", ")," in ").concat(_this2.id)})()),flags.propsChanged&&!changeFlags.propsChanged&&(changeFlags.propsChanged=flags.propsChanged,_log.default.log(2,function(){return"propsChanged: ".concat(flags.propsChanged," in ").concat(_this2.id)})()),flags.viewportChanged&&!changeFlags.viewportChanged&&(changeFlags.viewportChanged=flags.viewportChanged,_log.default.log(3,function(){return"viewportChanged: ".concat(flags.viewportChanged," in ").concat(_this2.id)})()),flags.stateChanged&&!changeFlags.stateChanged&&(changeFlags.stateChanged=flags.stateChanged,_log.default.log(2,function(){return"stateChanged: ".concat(flags.stateChanged," in ").concat(_this2.id)})());var propsOrDataChanged=flags.dataChanged||flags.updateTriggersChanged||flags.propsChanged;changeFlags.propsOrDataChanged=changeFlags.propsOrDataChanged||propsOrDataChanged,changeFlags.somethingChanged=changeFlags.somethingChanged||propsOrDataChanged||flags.viewportChanged||flags.stateChanged}},{key:"clearChangeFlags",value:function(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}},{key:"printChangeFlags",value:function(){var flags=this.internalState.changeFlags;return"".concat(flags.dataChanged?"data ":"").concat(flags.propsChanged?"props ":"").concat(flags.updateTriggersChanged?"triggers ":"").concat(flags.viewportChanged?"viewport":"")}},{key:"diffProps",value:function(newProps,oldProps){var changeFlags=(0,_props.diffProps)(newProps,oldProps);if(changeFlags.updateTriggersChanged)for(var key in changeFlags.updateTriggersChanged)changeFlags.updateTriggersChanged[key]&&this._activeUpdateTrigger(key);return this.setChangeFlags(changeFlags)}},{key:"validateProps",value:function(){(0,_props.validateProps)(this.props)}},{key:"setModuleParameters",value:function(moduleParameters){var _iteratorNormalCompletion5=!0,_didIteratorError5=!1,_iteratorError5=void 0;try{for(var _step5,_iterator5=this.getModels()[Symbol.iterator]();!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=!0){_step5.value.updateModuleSettings(moduleParameters)}}catch(err){_didIteratorError5=!0,_iteratorError5=err}finally{try{_iteratorNormalCompletion5||null==_iterator5.return||_iterator5.return()}finally{if(_didIteratorError5)throw _iteratorError5}}}},{key:"_getUpdateParams",value:function(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}},{key:"_getNeedsRedraw",value:function(opts){if(!this.internalState)return!1;var redraw=!1;redraw=redraw||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!opts.clearRedrawFlags;var attributeManager=this.getAttributeManager(),attributeManagerNeedsRedraw=attributeManager&&attributeManager.getNeedsRedraw(opts);return redraw=redraw||attributeManagerNeedsRedraw}},{key:"_getAttributeManager",value:function(){return new _attributeManager.default(this.context.gl,{id:this.props.id,stats:this.context.stats})}},{key:"_initState",value:function(){(0,_assert.default)(!this.internalState&&!this.state);var attributeManager=this._getAttributeManager();attributeManager&&attributeManager.addInstanced({instancePickingColors:{type:5121,size:3,update:this.calculateInstancePickingColors}}),this.internalState=new _layerState.default({attributeManager:attributeManager,layer:this}),this.state={},this.state.attributeManager=attributeManager,this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props)}},{key:"_transferState",value:function(oldLayer){var state=oldLayer.state,internalState=oldLayer.internalState;if((0,_assert.default)(state&&internalState),this!==oldLayer){this.internalState=internalState,this.internalState.component=this,this.state=state,state.layer=this,this.internalState.setAsyncProps(this.props);var _iteratorNormalCompletion6=!0,_didIteratorError6=!1,_iteratorError6=void 0;try{for(var _step6,_iterator6=this.getModels()[Symbol.iterator]();!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=!0){_step6.value.userData.layer=this}}catch(err){_didIteratorError6=!0,_iteratorError6=err}finally{try{_iteratorNormalCompletion6||null==_iterator6.return||_iterator6.return()}finally{if(_didIteratorError6)throw _iteratorError6}}this.diffProps(this.props,this.internalState.getOldProps())}}},{key:"_onAsyncPropUpdated",value:function(){this.diffProps(this.props,this.internalState.getOldProps()),this.setLayerNeedsUpdate()}},{key:"_activeUpdateTrigger",value:function(propName){this.invalidateAttribute(propName)}},{key:"_updateBaseUniforms",value:function(){var _this3=this,uniforms={opacity:"function"==typeof this.props.opacity?function(animationProps){return Math.pow(_this3.props.opacity(animationProps),1/2.2)}:Math.pow(this.props.opacity,1/2.2)},_iteratorNormalCompletion7=!0,_didIteratorError7=!1,_iteratorError7=void 0;try{for(var _step7,_iterator7=this.getModels()[Symbol.iterator]();!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=!0){_step7.value.setUniforms(uniforms)}}catch(err){_didIteratorError7=!0,_iteratorError7=err}finally{try{_iteratorNormalCompletion7||null==_iterator7.return||_iterator7.return()}finally{if(_didIteratorError7)throw _iteratorError7}}}},{key:"setUniforms",value:function(uniformMap){var _iteratorNormalCompletion8=!0,_didIteratorError8=!1,_iteratorError8=void 0;try{for(var _step8,_iterator8=this.getModels()[Symbol.iterator]();!(_iteratorNormalCompletion8=(_step8=_iterator8.next()).done);_iteratorNormalCompletion8=!0){_step8.value.setUniforms(uniformMap)}}catch(err){_didIteratorError8=!0,_iteratorError8=err}finally{try{_iteratorNormalCompletion8||null==_iterator8.return||_iterator8.return()}finally{if(_didIteratorError8)throw _iteratorError8}}this.setNeedsRedraw(),_log.default.deprecated("layer.setUniforms","model.setUniforms")()}},{key:"is64bitEnabled",value:function(){return _log.default.deprecated("is64bitEnabled","use64bitProjection")(),this.use64bitProjection()}}]),Layer}(_component.default);exports.default=Layer,Layer.layerName="Layer",Layer.defaultProps=defaultProps},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.GESTURE_EVENT_ALIASES=exports.EVENT_RECOGNIZER_MAP=exports.INPUT_EVENT_TYPES=exports.BASIC_EVENT_ALIASES=exports.RECOGNIZER_FALLBACK_MAP=exports.RECOGNIZER_COMPATIBLE_MAP=exports.RECOGNIZERS=void 0;var _hammer=_interopRequireDefault(__webpack_require__(353)),RECOGNIZERS=_hammer.default?[[_hammer.default.Rotate,{enable:!1}],[_hammer.default.Pinch,{enable:!1}],[_hammer.default.Swipe,{enable:!1}],[_hammer.default.Pan,{threshold:0,enable:!1}],[_hammer.default.Press,{enable:!1}],[_hammer.default.Tap,{event:"doubletap",taps:2,enable:!1}],[_hammer.default.Tap,{event:"anytap",enable:!1}],[_hammer.default.Tap,{enable:!1}]]:null;exports.RECOGNIZERS=RECOGNIZERS;exports.RECOGNIZER_COMPATIBLE_MAP={rotate:["pinch"],doubletap:["anytap"],anytap:["tap"]};exports.RECOGNIZER_FALLBACK_MAP={doubletap:["tap"]};exports.BASIC_EVENT_ALIASES={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"};exports.INPUT_EVENT_TYPES={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel","DOMMouseScroll"]};exports.EVENT_RECOGNIZER_MAP={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"};exports.GESTURE_EVENT_ALIASES={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"}},function(module,exports,__webpack_require__){"use strict";(function(process,global){var _interopRequireDefault=__webpack_require__(21);Object.defineProperty(exports,"__esModule",{value:!0}),exports.document=exports.global=exports.window=exports.self=exports.isBrowser=void 0;var _typeof2=_interopRequireDefault(__webpack_require__(215)),isBrowser="object"!==(void 0===process?"undefined":(0,_typeof2.default)(process))||"[object process]"!==String(process)||process.browser;exports.isBrowser=isBrowser;var globals={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==global&&global,document:"undefined"!=typeof document&&document},self_=globals.self||globals.window||globals.global;exports.self=self_;var window_=globals.window||globals.self||globals.global;exports.window=window_;var global_=globals.global||globals.self||globals.window;exports.global=global_;var document_=globals.document||{};exports.document=document_}).call(this,__webpack_require__(44),__webpack_require__(17))},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(21);Object.defineProperty(exports,"__esModule",{value:!0}),exports.isLoaderObject=isLoaderObject,exports.normalizeLoader=function(loader){var options;(0,_assert.default)(isLoaderObject(loader)),Array.isArray(loader)&&(loader=loader[0],options=loader[1],loader=(0,_objectSpread2.default)({},loader,{options:(0,_objectSpread2.default)({},loader.options,{options:options})}));loader.extension&&(loader.extensions=loader.extensions||[loader.extension],delete loader.extension);Array.isArray(loader.extensions)||(loader.extensions=[loader.extensions]);(0,_assert.default)(loader.extensions&&loader.extensions.length>0&&loader.extensions[0]),loader.parseTextSync&&(loader.text=!0);loader.text||(loader.binary=!0);return loader};var _objectSpread2=_interopRequireDefault(__webpack_require__(363)),_assert=_interopRequireDefault(__webpack_require__(73));function isLoaderObject(loader){return!!loader&&(Array.isArray(loader)&&(loader=loader[0]),loader.parseTextSync||loader.parseSync||loader.parse||loader.loadAndParse||loader.parseStream||loader.parseInBatches||loader.worker)}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"TransitionInterpolator",{enumerable:!0,get:function(){return _transitionInterpolator.default}}),Object.defineProperty(exports,"ViewportFlyToInterpolator",{enumerable:!0,get:function(){return _viewportFlyToInterpolator.default}}),Object.defineProperty(exports,"LinearInterpolator",{enumerable:!0,get:function(){return _linearInterpolator.default}});var _transitionInterpolator=_interopRequireDefault(__webpack_require__(228)),_viewportFlyToInterpolator=_interopRequireDefault(__webpack_require__(880)),_linearInterpolator=_interopRequireDefault(__webpack_require__(881))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.equals=function equals(a,b){if(a===b)return!0;if(isArray(a)&&isArray(b)){if(a.length!==b.length)return!1;for(var i=0;i<a.length;++i)if(!equals(a[i],b[i]))return!1;return!0}return Math.abs(a-b)<=EPSILON},exports.clamp=function(value,min,max){return Math.max(min,Math.min(max,value))},exports.lerp=function lerp(a,b,t){if(isArray(a))return a.map(function(ai,i){return lerp(ai,b[i],t)});return t*b+(1-t)*a};var EPSILON=1e-9;function isArray(value){return Array.isArray(value)||ArrayBuffer.isView(value)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default=(0,__webpack_require__(8).createContext)({viewport:null,map:null,mapContainer:null,eventManager:null,isDragging:!1});exports.default=_default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.cropEasingFunction=cropEasingFunction,exports.default=exports.TRANSITION_EVENTS=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_defineProperty2=_interopRequireDefault(__webpack_require__(6)),_assert=_interopRequireDefault(__webpack_require__(117)),_transition=__webpack_require__(146),_mapState=_interopRequireDefault(__webpack_require__(74)),noop=function(){};function cropEasingFunction(easing,x0){var y0=easing(x0);return function(t){return 1/(1-y0)*(easing(t*(1-x0)+x0)-y0)}}var TRANSITION_EVENTS={BREAK:1,SNAP_TO_END:2,IGNORE:3,UPDATE:4};exports.TRANSITION_EVENTS=TRANSITION_EVENTS;var DEFAULT_PROPS={transitionDuration:0,transitionEasing:function(t){return t},transitionInterpolator:new _transition.LinearInterpolator,transitionInterruption:TRANSITION_EVENTS.BREAK,onTransitionStart:noop,onTransitionInterrupt:noop,onTransitionEnd:noop,onViewportChange:noop,onStateChange:noop},TransitionManager=function(){function TransitionManager(props){var _this=this;(0,_classCallCheck2.default)(this,TransitionManager),(0,_defineProperty2.default)(this,"props",void 0),(0,_defineProperty2.default)(this,"state",void 0),(0,_defineProperty2.default)(this,"_animationFrame",null),(0,_defineProperty2.default)(this,"_onTransitionFrame",function(){_this._animationFrame=requestAnimationFrame(_this._onTransitionFrame),_this._updateViewport()}),props&&(this.props=props)}return(0,_createClass2.default)(TransitionManager,[{key:"getViewportInTransition",value:function(){return this._animationFrame?this.state.propsInTransition:null}},{key:"processViewportChange",value:function(nextProps){var currentProps=this.props;if(this.props=nextProps,this._shouldIgnoreViewportChange(currentProps,nextProps))return!1;if(this._isTransitionEnabled(nextProps)){var startProps=Object.assign({},currentProps),endProps=Object.assign({},nextProps);if(this._isTransitionInProgress()&&(currentProps.onTransitionInterrupt(),this.state.interruption===TRANSITION_EVENTS.SNAP_TO_END?Object.assign(startProps,this.state.endProps):Object.assign(startProps,this.state.propsInTransition),this.state.interruption===TRANSITION_EVENTS.UPDATE)){var currentTime=Date.now(),x0=(currentTime-this.state.startTime)/this.state.duration;endProps.transitionDuration=this.state.duration-(currentTime-this.state.startTime),endProps.transitionEasing=cropEasingFunction(this.state.easing,x0),endProps.transitionInterpolator=startProps.transitionInterpolator}return endProps.onTransitionStart(),this._triggerTransition(startProps,endProps),!0}return this._isTransitionInProgress()&&(currentProps.onTransitionInterrupt(),this._endTransition()),!1}},{key:"_isTransitionInProgress",value:function(){return Boolean(this._animationFrame)}},{key:"_isTransitionEnabled",value:function(props){return props.transitionDuration>0&&Boolean(props.transitionInterpolator)}},{key:"_isUpdateDueToCurrentTransition",value:function(props){return!!this.state.propsInTransition&&this.state.interpolator.arePropsEqual(props,this.state.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function(currentProps,nextProps){return!currentProps||(this._isTransitionInProgress()?this.state.interruption===TRANSITION_EVENTS.IGNORE||this._isUpdateDueToCurrentTransition(nextProps):!this._isTransitionEnabled(nextProps)||nextProps.transitionInterpolator.arePropsEqual(currentProps,nextProps))}},{key:"_triggerTransition",value:function(startProps,endProps){(0,_assert.default)(this._isTransitionEnabled(endProps),"Transition is not enabled"),this._animationFrame&&cancelAnimationFrame(this._animationFrame);var initialProps=endProps.transitionInterpolator.initializeProps(startProps,endProps),interactionState={inTransition:!0,isZooming:startProps.zoom!==endProps.zoom,isPanning:startProps.longitude!==endProps.longitude||startProps.latitude!==endProps.latitude,isRotating:startProps.bearing!==endProps.bearing||startProps.pitch!==endProps.pitch};this.state={duration:endProps.transitionDuration,easing:endProps.transitionEasing,interpolator:endProps.transitionInterpolator,interruption:endProps.transitionInterruption,startTime:Date.now(),startProps:initialProps.start,endProps:initialProps.end,animation:null,propsInTransition:{},interactionState:interactionState},this._onTransitionFrame(),this.props.onStateChange(interactionState)}},{key:"_endTransition",value:function(){this._animationFrame&&(cancelAnimationFrame(this._animationFrame),this._animationFrame=null),this.props.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1})}},{key:"_updateViewport",value:function(){var currentTime=Date.now(),_this$state=this.state,startTime=_this$state.startTime,duration=_this$state.duration,easing=_this$state.easing,interpolator=_this$state.interpolator,startProps=_this$state.startProps,endProps=_this$state.endProps,shouldEnd=!1,t=(currentTime-startTime)/duration;t>=1&&(t=1,shouldEnd=!0),t=easing(t);var viewport=interpolator.interpolateProps(startProps,endProps,t),mapState=new _mapState.default(Object.assign({},this.props,viewport));this.state.propsInTransition=mapState.getViewportProps(),this.props.onViewportChange(this.state.propsInTransition,this.state.interactionState,this.props),shouldEnd&&(this._endTransition(),this.props.onTransitionEnd())}}]),TransitionManager}();exports.default=TransitionManager,(0,_defineProperty2.default)(TransitionManager,"defaultProps",DEFAULT_PROPS)},,function(module,exports,__webpack_require__){"use strict";var has=Object.prototype.hasOwnProperty,toStr=Object.prototype.toString,slice=Array.prototype.slice,isArgs=__webpack_require__(410),isEnumerable=Object.prototype.propertyIsEnumerable,hasDontEnumBug=!isEnumerable.call({toString:null},"toString"),hasProtoEnumBug=isEnumerable.call(function(){},"prototype"),dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],equalsConstructorPrototype=function(o){var ctor=o.constructor;return ctor&&ctor.prototype===o},excludedKeys={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},hasAutomationEqualityBug=function(){if("undefined"==typeof window)return!1;for(var k in window)try{if(!excludedKeys["$"+k]&&has.call(window,k)&&null!==window[k]&&"object"==typeof window[k])try{equalsConstructorPrototype(window[k])}catch(e){return!0}}catch(e){return!0}return!1}(),keysShim=function(object){var isObject=null!==object&&"object"==typeof object,isFunction="[object Function]"===toStr.call(object),isArguments=isArgs(object),isString=isObject&&"[object String]"===toStr.call(object),theKeys=[];if(!isObject&&!isFunction&&!isArguments)throw new TypeError("Object.keys called on a non-object");var skipProto=hasProtoEnumBug&&isFunction;if(isString&&object.length>0&&!has.call(object,0))for(var i=0;i<object.length;++i)theKeys.push(String(i));if(isArguments&&object.length>0)for(var j=0;j<object.length;++j)theKeys.push(String(j));else for(var name in object)skipProto&&"prototype"===name||!has.call(object,name)||theKeys.push(String(name));if(hasDontEnumBug)for(var skipConstructor=function(o){if("undefined"==typeof window||!hasAutomationEqualityBug)return equalsConstructorPrototype(o);try{return equalsConstructorPrototype(o)}catch(e){return!1}}(object),k=0;k<dontEnums.length;++k)skipConstructor&&"constructor"===dontEnums[k]||!has.call(object,dontEnums[k])||theKeys.push(dontEnums[k]);return theKeys};keysShim.shim=function(){if(Object.keys){if(!function(){return 2===(Object.keys(arguments)||"").length}(1,2)){var originalKeys=Object.keys;Object.keys=function(object){return isArgs(object)?originalKeys(slice.call(object)):originalKeys(object)}}}else Object.keys=keysShim;return Object.keys||keysShim},module.exports=keysShim},function(module,exports,__webpack_require__){"use strict";var has=__webpack_require__(75),toPrimitive=__webpack_require__(419),keys=__webpack_require__(151),GetIntrinsic=__webpack_require__(76),$TypeError=GetIntrinsic("%TypeError%"),$SyntaxError=GetIntrinsic("%SyntaxError%"),$Array=GetIntrinsic("%Array%"),$String=GetIntrinsic("%String%"),$Object=GetIntrinsic("%Object%"),$Number=GetIntrinsic("%Number%"),$Symbol=GetIntrinsic("%Symbol%",!0),$RegExp=GetIntrinsic("%RegExp%"),hasSymbols=!!$Symbol,assertRecord=__webpack_require__(235),$isNaN=__webpack_require__(236),$isFinite=__webpack_require__(237),MAX_SAFE_INTEGER=$Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1,assign=__webpack_require__(92),sign=__webpack_require__(238),mod=__webpack_require__(239),isPrimitive=__webpack_require__(424),parseInteger=parseInt,bind=__webpack_require__(38),arraySlice=bind.call(Function.call,$Array.prototype.slice),strSlice=bind.call(Function.call,$String.prototype.slice),isBinary=bind.call(Function.call,$RegExp.prototype.test,/^0b[01]+$/i),isOctal=bind.call(Function.call,$RegExp.prototype.test,/^0o[0-7]+$/i),regexExec=bind.call(Function.call,$RegExp.prototype.exec),nonWSregex=new $RegExp("["+["","​","￾"].join("")+"]","g"),hasNonWS=bind.call(Function.call,$RegExp.prototype.test,nonWSregex),isInvalidHexLiteral=bind.call(Function.call,$RegExp.prototype.test,/^[-+]0x[0-9a-f]+$/i),$charCodeAt=bind.call(Function.call,$String.prototype.charCodeAt),toStr=bind.call(Function.call,Object.prototype.toString),$NumberValueOf=bind.call(Function.call,GetIntrinsic("%NumberPrototype%").valueOf),$BooleanValueOf=bind.call(Function.call,GetIntrinsic("%BooleanPrototype%").valueOf),$StringValueOf=bind.call(Function.call,GetIntrinsic("%StringPrototype%").valueOf),$DateValueOf=bind.call(Function.call,GetIntrinsic("%DatePrototype%").valueOf),$floor=Math.floor,$abs=Math.abs,$ObjectCreate=Object.create,$gOPD=$Object.getOwnPropertyDescriptor,$isExtensible=$Object.isExtensible,$defineProperty=$Object.defineProperty,ws=["\t\n\v\f\r   ᠎    ","         　\u2028","\u2029\ufeff"].join(""),trimRegex=new RegExp("(^["+ws+"]+)|(["+ws+"]+$)","g"),replace=bind.call(Function.call,$String.prototype.replace),ES5=__webpack_require__(240),hasRegExpMatcher=__webpack_require__(426),ES6=assign(assign({},ES5),{Call:function(F,V){var args=arguments.length>2?arguments[2]:[];if(!this.IsCallable(F))throw new $TypeError(F+" is not a function");return F.apply(V,args)},ToPrimitive:toPrimitive,ToNumber:function(argument){var value=isPrimitive(argument)?argument:toPrimitive(argument,$Number);if("symbol"==typeof value)throw new $TypeError("Cannot convert a Symbol value to a number");if("string"==typeof value){if(isBinary(value))return this.ToNumber(parseInteger(strSlice(value,2),2));if(isOctal(value))return this.ToNumber(parseInteger(strSlice(value,2),8));if(hasNonWS(value)||isInvalidHexLiteral(value))return NaN;var trimmed=function(value){return replace(value,trimRegex,"")}(value);if(trimmed!==value)return this.ToNumber(trimmed)}return $Number(value)},ToInt16:function(argument){var int16bit=this.ToUint16(argument);return int16bit>=32768?int16bit-65536:int16bit},ToInt8:function(argument){var int8bit=this.ToUint8(argument);return int8bit>=128?int8bit-256:int8bit},ToUint8:function(argument){var number=this.ToNumber(argument);if($isNaN(number)||0===number||!$isFinite(number))return 0;var posInt=sign(number)*$floor($abs(number));return mod(posInt,256)},ToUint8Clamp:function(argument){var number=this.ToNumber(argument);if($isNaN(number)||number<=0)return 0;if(number>=255)return 255;var f=$floor(argument);return f+.5<number?f+1:number<f+.5?f:f%2!=0?f+1:f},ToString:function(argument){if("symbol"==typeof argument)throw new $TypeError("Cannot convert a Symbol value to a string");return $String(argument)},ToObject:function(value){return this.RequireObjectCoercible(value),$Object(value)},ToPropertyKey:function(argument){var key=this.ToPrimitive(argument,$String);return"symbol"==typeof key?key:this.ToString(key)},ToLength:function(argument){var len=this.ToInteger(argument);return len<=0?0:len>MAX_SAFE_INTEGER?MAX_SAFE_INTEGER:len},CanonicalNumericIndexString:function(argument){if("[object String]"!==toStr(argument))throw new $TypeError("must be a string");if("-0"===argument)return-0;var n=this.ToNumber(argument);return this.SameValue(this.ToString(n),argument)?n:void 0},RequireObjectCoercible:ES5.CheckObjectCoercible,IsArray:$Array.isArray||function(argument){return"[object Array]"===toStr(argument)},IsConstructor:function(argument){return"function"==typeof argument&&!!argument.prototype},IsExtensible:Object.preventExtensions?function(obj){return!isPrimitive(obj)&&$isExtensible(obj)}:function(obj){return!0},IsInteger:function(argument){if("number"!=typeof argument||$isNaN(argument)||!$isFinite(argument))return!1;var abs=$abs(argument);return $floor(abs)===abs},IsPropertyKey:function(argument){return"string"==typeof argument||"symbol"==typeof argument},IsRegExp:function(argument){if(!argument||"object"!=typeof argument)return!1;if(hasSymbols){var isRegExp=argument[$Symbol.match];if(void 0!==isRegExp)return ES5.ToBoolean(isRegExp)}return hasRegExpMatcher(argument)},SameValueZero:function(x,y){return x===y||$isNaN(x)&&$isNaN(y)},GetV:function(V,P){if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");return this.ToObject(V)[P]},GetMethod:function(O,P){if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");var func=this.GetV(O,P);if(null!=func){if(!this.IsCallable(func))throw new $TypeError(P+"is not a function");return func}},Get:function(O,P){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");return O[P]},Type:function(x){return"symbol"==typeof x?"Symbol":ES5.Type(x)},SpeciesConstructor:function(O,defaultConstructor){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");var C=O.constructor;if(void 0===C)return defaultConstructor;if("Object"!==this.Type(C))throw new $TypeError("O.constructor is not an Object");var S=hasSymbols&&$Symbol.species?C[$Symbol.species]:void 0;if(null==S)return defaultConstructor;if(this.IsConstructor(S))return S;throw new $TypeError("no constructor found")},CompletePropertyDescriptor:function(Desc){return assertRecord(this,"Property Descriptor","Desc",Desc),this.IsGenericDescriptor(Desc)||this.IsDataDescriptor(Desc)?(has(Desc,"[[Value]]")||(Desc["[[Value]]"]=void 0),has(Desc,"[[Writable]]")||(Desc["[[Writable]]"]=!1)):(has(Desc,"[[Get]]")||(Desc["[[Get]]"]=void 0),has(Desc,"[[Set]]")||(Desc["[[Set]]"]=void 0)),has(Desc,"[[Enumerable]]")||(Desc["[[Enumerable]]"]=!1),has(Desc,"[[Configurable]]")||(Desc["[[Configurable]]"]=!1),Desc},Set:function(O,P,V,Throw){if("Object"!==this.Type(O))throw new $TypeError("O must be an Object");if(!this.IsPropertyKey(P))throw new $TypeError("P must be a Property Key");if("Boolean"!==this.Type(Throw))throw new $TypeError("Throw must be a Boolean");if(Throw)return O[P]=V,!0;try{O[P]=V}catch(e){return!1}},HasOwnProperty:function(O,P){if("Object"!==this.Type(O))throw new $TypeError("O must be an Object");if(!this.IsPropertyKey(P))throw new $TypeError("P must be a Property Key");return has(O,P)},HasProperty:function(O,P){if("Object"!==this.Type(O))throw new $TypeError("O must be an Object");if(!this.IsPropertyKey(P))throw new $TypeError("P must be a Property Key");return P in O},IsConcatSpreadable:function(O){if("Object"!==this.Type(O))return!1;if(hasSymbols&&"symbol"==typeof $Symbol.isConcatSpreadable){var spreadable=this.Get(O,Symbol.isConcatSpreadable);if(void 0!==spreadable)return this.ToBoolean(spreadable)}return this.IsArray(O)},Invoke:function(O,P){if(!this.IsPropertyKey(P))throw new $TypeError("P must be a Property Key");var argumentsList=arraySlice(arguments,2),func=this.GetV(O,P);return this.Call(func,O,argumentsList)},GetIterator:function(obj,method){if(!hasSymbols)throw new SyntaxError("ES.GetIterator depends on native iterator support.");var actualMethod=method;arguments.length<2&&(actualMethod=this.GetMethod(obj,$Symbol.iterator));var iterator=this.Call(actualMethod,obj);if("Object"!==this.Type(iterator))throw new $TypeError("iterator must return an object");return iterator},IteratorNext:function(iterator,value){var result=this.Invoke(iterator,"next",arguments.length<2?[]:[value]);if("Object"!==this.Type(result))throw new $TypeError("iterator next must return an object");return result},IteratorComplete:function(iterResult){if("Object"!==this.Type(iterResult))throw new $TypeError("Assertion failed: Type(iterResult) is not Object");return this.ToBoolean(this.Get(iterResult,"done"))},IteratorValue:function(iterResult){if("Object"!==this.Type(iterResult))throw new $TypeError("Assertion failed: Type(iterResult) is not Object");return this.Get(iterResult,"value")},IteratorStep:function(iterator){var result=this.IteratorNext(iterator);return!0!==this.IteratorComplete(result)&&result},IteratorClose:function(iterator,completion){if("Object"!==this.Type(iterator))throw new $TypeError("Assertion failed: Type(iterator) is not Object");if(!this.IsCallable(completion))throw new $TypeError("Assertion failed: completion is not a thunk for a Completion Record");var completionRecord,completionThunk=completion,iteratorReturn=this.GetMethod(iterator,"return");if(void 0===iteratorReturn)return completionThunk();try{var innerResult=this.Call(iteratorReturn,iterator,[])}catch(e){throw completionRecord=completionThunk(),completionThunk=null,e}if(completionRecord=completionThunk(),completionThunk=null,"Object"!==this.Type(innerResult))throw new $TypeError("iterator .return must return an object");return completionRecord},CreateIterResultObject:function(value,done){if("Boolean"!==this.Type(done))throw new $TypeError("Assertion failed: Type(done) is not Boolean");return{value:value,done:done}},RegExpExec:function(R,S){if("Object"!==this.Type(R))throw new $TypeError("R must be an Object");if("String"!==this.Type(S))throw new $TypeError("S must be a String");var exec=this.Get(R,"exec");if(this.IsCallable(exec)){var result=this.Call(exec,R,[S]);if(null===result||"Object"===this.Type(result))return result;throw new $TypeError('"exec" method must return `null` or an Object')}return regexExec(R,S)},ArraySpeciesCreate:function(originalArray,length){if(!this.IsInteger(length)||length<0)throw new $TypeError("Assertion failed: length must be an integer >= 0");var C,len=0===length?0:length;if(this.IsArray(originalArray)&&(C=this.Get(originalArray,"constructor"),"Object"===this.Type(C)&&hasSymbols&&$Symbol.species&&null===(C=this.Get(C,$Symbol.species))&&(C=void 0)),void 0===C)return $Array(len);if(!this.IsConstructor(C))throw new $TypeError("C must be a constructor");return new C(len)},CreateDataProperty:function(O,P,V){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");var oldDesc=$gOPD(O,P),extensible=oldDesc||"function"!=typeof $isExtensible||$isExtensible(O);return!(!(!oldDesc||oldDesc.writable&&oldDesc.configurable)||!extensible)&&($defineProperty(O,P,{configurable:!0,enumerable:!0,value:V,writable:!0}),!0)},CreateDataPropertyOrThrow:function(O,P,V){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");var success=this.CreateDataProperty(O,P,V);if(!success)throw new $TypeError("unable to create data property");return success},ObjectCreate:function(proto,internalSlotsList){if(null!==proto&&"Object"!==this.Type(proto))throw new $TypeError("Assertion failed: proto must be null or an object");if((arguments.length<2?[]:internalSlotsList).length>0)throw new $SyntaxError("es-abstract does not yet support internal slots");if(null===proto&&!$ObjectCreate)throw new $SyntaxError("native Object.create support is required to create null objects");return $ObjectCreate(proto)},AdvanceStringIndex:function(S,index,unicode){if("String"!==this.Type(S))throw new $TypeError("S must be a String");if(!this.IsInteger(index)||index<0||index>MAX_SAFE_INTEGER)throw new $TypeError("Assertion failed: length must be an integer >= 0 and <= 2**53");if("Boolean"!==this.Type(unicode))throw new $TypeError("Assertion failed: unicode must be a Boolean");if(!unicode)return index+1;if(index+1>=S.length)return index+1;var first=$charCodeAt(S,index);if(first<55296||first>56319)return index+1;var second=$charCodeAt(S,index+1);return second<56320||second>57343?index+1:index+2},CreateMethodProperty:function(O,P,V){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");return!!$defineProperty(O,P,{configurable:!0,enumerable:!1,value:V,writable:!0})},DefinePropertyOrThrow:function(O,P,desc){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");return!!$defineProperty(O,P,desc)},DeletePropertyOrThrow:function(O,P){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");var success=delete O[P];if(!success)throw new TypeError("Attempt to delete property failed.");return success},EnumerableOwnNames:function(O){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");return keys(O)},thisNumberValue:function(value){return"Number"===this.Type(value)?value:$NumberValueOf(value)},thisBooleanValue:function(value){return"Boolean"===this.Type(value)?value:$BooleanValueOf(value)},thisStringValue:function(value){return"String"===this.Type(value)?value:$StringValueOf(value)},thisTimeValue:function(value){return $DateValueOf(value)}});delete ES6.CheckObjectCoercible,module.exports=ES6},function(module,exports,__webpack_require__){"use strict";var ES2015=__webpack_require__(152),assign=__webpack_require__(92),ES2016=assign(assign({},ES2015),{SameValueNonNumber:function(x,y){if("number"==typeof x||typeof x!=typeof y)throw new TypeError("SameValueNonNumber requires two non-number values of the same type.");return this.SameValue(x,y)}});module.exports=ES2016},function(module,exports,__webpack_require__){"use strict";module.exports=function(){if("function"!=typeof Promise)throw new TypeError("`Promise.prototype.finally` requires a global `Promise` be available.")}},function(module,exports,__webpack_require__){"use strict";var assign=__webpack_require__(92),ES5=__webpack_require__(240),ES2015=__webpack_require__(152),ES2016=__webpack_require__(153),ES={ES5:ES5,ES6:ES2015,ES2015:ES2015,ES7:ES2016,ES2016:ES2016,ES2017:__webpack_require__(93),ES2018:__webpack_require__(465)};assign(ES,ES5),delete ES.CheckObjectCoercible,assign(ES,ES2015),module.exports=ES},function(module,exports,__webpack_require__){var isObject=__webpack_require__(28),document=__webpack_require__(26).document,is=isObject(document)&&isObject(document.createElement);module.exports=function(it){return is?document.createElement(it):{}}},function(module,exports,__webpack_require__){var core=__webpack_require__(55),global=__webpack_require__(26),store=global["__core-js_shared__"]||(global["__core-js_shared__"]={});(module.exports=function(key,value){return store[key]||(store[key]=void 0!==value?value:{})})("versions",[]).push({version:core.version,mode:__webpack_require__(96)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(module,exports,__webpack_require__){var global=__webpack_require__(26),core=__webpack_require__(55),LIBRARY=__webpack_require__(96),wksExt=__webpack_require__(247),defineProperty=__webpack_require__(34).f;module.exports=function(name){var $Symbol=core.Symbol||(core.Symbol=LIBRARY?{}:global.Symbol||{});"_"==name.charAt(0)||name in $Symbol||defineProperty($Symbol,name,{value:wksExt.f(name)})}},function(module,exports){var ceil=Math.ceil,floor=Math.floor;module.exports=function(it){return isNaN(it=+it)?0:(it>0?floor:ceil)(it)}},function(module,exports,__webpack_require__){var shared=__webpack_require__(157)("keys"),uid=__webpack_require__(95);module.exports=function(key){return shared[key]||(shared[key]=uid(key))}},function(module,exports){module.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(module,exports){exports.f=Object.getOwnPropertySymbols},function(module,exports,__webpack_require__){var cof=__webpack_require__(65);module.exports=Array.isArray||function(arg){return"Array"==cof(arg)}},function(module,exports,__webpack_require__){var $keys=__webpack_require__(248),hiddenKeys=__webpack_require__(161).concat("length","prototype");exports.f=Object.getOwnPropertyNames||function(O){return $keys(O,hiddenKeys)}},function(module,exports,__webpack_require__){var pIE=__webpack_require__(123),createDesc=__webpack_require__(94),toIObject=__webpack_require__(80),toPrimitive=__webpack_require__(120),has=__webpack_require__(54),IE8_DOM_DEFINE=__webpack_require__(246),gOPD=Object.getOwnPropertyDescriptor;exports.f=__webpack_require__(31)?gOPD:function(O,P){if(O=toIObject(O),P=toPrimitive(P,!0),IE8_DOM_DEFINE)try{return gOPD(O,P)}catch(e){}if(has(O,P))return createDesc(!pIE.f.call(O,P),O[P])}},function(module,exports,__webpack_require__){var ctx=__webpack_require__(57),IObject=__webpack_require__(122),toObject=__webpack_require__(66),toLength=__webpack_require__(81),asc=__webpack_require__(493);module.exports=function(TYPE,$create){var IS_MAP=1==TYPE,IS_FILTER=2==TYPE,IS_SOME=3==TYPE,IS_EVERY=4==TYPE,IS_FIND_INDEX=6==TYPE,NO_HOLES=5==TYPE||IS_FIND_INDEX,create=$create||asc;return function($this,callbackfn,that){for(var val,res,O=toObject($this),self=IObject(O),f=ctx(callbackfn,that,3),length=toLength(self.length),index=0,result=IS_MAP?create($this,length):IS_FILTER?create($this,0):void 0;length>index;index++)if((NO_HOLES||index in self)&&(res=f(val=self[index],index,O),TYPE))if(IS_MAP)result[index]=res;else if(res)switch(TYPE){case 3:return!0;case 5:return val;case 6:return index;case 2:result.push(val)}else if(IS_EVERY)return!1;return IS_FIND_INDEX?-1:IS_SOME||IS_EVERY?IS_EVERY:result}}},function(module,exports,__webpack_require__){"use strict";var LIBRARY=__webpack_require__(96),$export=__webpack_require__(18),redefine=__webpack_require__(39),hide=__webpack_require__(56),Iterators=__webpack_require__(100),$iterCreate=__webpack_require__(496),setToStringTag=__webpack_require__(97),getPrototypeOf=__webpack_require__(497),ITERATOR=__webpack_require__(22)("iterator"),BUGGY=!([].keys&&"next"in[].keys()),returnThis=function(){return this};module.exports=function(Base,NAME,Constructor,next,DEFAULT,IS_SET,FORCED){$iterCreate(Constructor,NAME,next);var methods,key,IteratorPrototype,getMethod=function(kind){if(!BUGGY&&kind in proto)return proto[kind];switch(kind){case"keys":case"values":return function(){return new Constructor(this,kind)}}return function(){return new Constructor(this,kind)}},TAG=NAME+" Iterator",DEF_VALUES="values"==DEFAULT,VALUES_BUG=!1,proto=Base.prototype,$native=proto[ITERATOR]||proto["@@iterator"]||DEFAULT&&proto[DEFAULT],$default=$native||getMethod(DEFAULT),$entries=DEFAULT?DEF_VALUES?getMethod("entries"):$default:void 0,$anyNative="Array"==NAME&&proto.entries||$native;if($anyNative&&(IteratorPrototype=getPrototypeOf($anyNative.call(new Base)))!==Object.prototype&&IteratorPrototype.next&&(setToStringTag(IteratorPrototype,TAG,!0),LIBRARY||"function"==typeof IteratorPrototype[ITERATOR]||hide(IteratorPrototype,ITERATOR,returnThis)),DEF_VALUES&&$native&&"values"!==$native.name&&(VALUES_BUG=!0,$default=function(){return $native.call(this)}),LIBRARY&&!FORCED||!BUGGY&&!VALUES_BUG&&proto[ITERATOR]||hide(proto,ITERATOR,$default),Iterators[NAME]=$default,Iterators[TAG]=returnThis,DEFAULT)if(methods={values:DEF_VALUES?$default:getMethod("values"),keys:IS_SET?$default:getMethod("keys"),entries:$entries},FORCED)for(key in methods)key in proto||redefine(proto,key,methods[key]);else $export($export.P+$export.F*(BUGGY||VALUES_BUG),NAME,methods);return methods}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"mockChannel",{enumerable:!0,get:function(){return _storybookChannelMock.default}}),Object.defineProperty(exports,"makeDecorator",{enumerable:!0,get:function(){return _makeDecorator.makeDecorator}}),exports.default=exports.AddonStore=void 0,__webpack_require__(13),__webpack_require__(126),__webpack_require__(46),__webpack_require__(60),__webpack_require__(127),__webpack_require__(40),__webpack_require__(45);var _global=_interopRequireDefault(__webpack_require__(58)),_storybookChannelMock=_interopRequireDefault(__webpack_require__(504)),_makeDecorator=__webpack_require__(509);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var AddonStore=function(){function AddonStore(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AddonStore),this.loaders={},this.panels={},this.channel=null,this.preview=null,this.database=null}var Constructor,protoProps,staticProps;return Constructor=AddonStore,(protoProps=[{key:"getChannel",value:function(){if(!this.channel)throw new Error("Accessing nonexistent addons channel, see https://storybook.js.org/basics/faq/#why-is-there-no-addons-channel");return this.channel}},{key:"hasChannel",value:function(){return Boolean(this.channel)}},{key:"setChannel",value:function(channel){this.channel=channel}},{key:"getPreview",value:function(){return this.preview}},{key:"setPreview",value:function(preview){this.preview=preview}},{key:"getDatabase",value:function(){return this.database}},{key:"setDatabase",value:function(database){this.database=database}},{key:"getPanels",value:function(){return this.panels}},{key:"addPanel",value:function(name,panel){this.panels[name]=panel}},{key:"register",value:function(name,loader){this.loaders[name]=loader}},{key:"loadAddons",value:function(api){var _this=this;Object.keys(this.loaders).map(function(name){return _this.loaders[name]}).forEach(function(loader){return loader(api)})}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),AddonStore}();exports.AddonStore=AddonStore;var KEY="__STORYBOOK_ADDONS";var _default=(_global.default[KEY]||(_global.default[KEY]=new AddonStore),_global.default[KEY]);exports.default=_default},function(module,exports,__webpack_require__){"use strict";var $at=__webpack_require__(255)(!0);__webpack_require__(167)(String,"String",function(iterated){this._t=String(iterated),this._i=0},function(){var point,O=this._t,index=this._i;return index>=O.length?{value:void 0,done:!0}:(point=$at(O,index),this._i+=point.length,{value:point,done:!1})})},function(module,exports,__webpack_require__){var ITERATOR=__webpack_require__(22)("iterator"),SAFE_CLOSING=!1;try{var riter=[7][ITERATOR]();riter.return=function(){SAFE_CLOSING=!0},Array.from(riter,function(){throw 2})}catch(e){}module.exports=function(exec,skipClosing){if(!skipClosing&&!SAFE_CLOSING)return!1;var safe=!1;try{var arr=[7],iter=arr[ITERATOR]();iter.next=function(){return{done:safe=!0}},arr[ITERATOR]=function(){return iter},exec(arr)}catch(e){}return safe}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(508);var anObject=__webpack_require__(35),$flags=__webpack_require__(172),DESCRIPTORS=__webpack_require__(31),$toString=/./.toString,define=function(fn){__webpack_require__(39)(RegExp.prototype,"toString",fn,!0)};__webpack_require__(33)(function(){return"/a/b"!=$toString.call({source:"a",flags:"b"})})?define(function(){var R=anObject(this);return"/".concat(R.source,"/","flags"in R?R.flags:!DESCRIPTORS&&R instanceof RegExp?$flags.call(R):void 0)}):"toString"!=$toString.name&&define(function(){return $toString.call(this)})},function(module,exports,__webpack_require__){"use strict";var anObject=__webpack_require__(35);module.exports=function(){var that=anObject(this),result="";return that.global&&(result+="g"),that.ignoreCase&&(result+="i"),that.multiline&&(result+="m"),that.unicode&&(result+="u"),that.sticky&&(result+="y"),result}},function(module,exports,__webpack_require__){var DateProto=Date.prototype,$toString=DateProto.toString,getTime=DateProto.getTime;new Date(NaN)+""!="Invalid Date"&&__webpack_require__(39)(DateProto,"toString",function(){var value=getTime.call(this);return value==value?$toString.call(this):"Invalid Date"})},function(module,exports){module.exports=function(it,Constructor,name,forbiddenField){if(!(it instanceof Constructor)||void 0!==forbiddenField&&forbiddenField in it)throw TypeError(name+": incorrect invocation!");return it}},function(module,exports,__webpack_require__){var ctx=__webpack_require__(57),call=__webpack_require__(257),isArrayIter=__webpack_require__(258),anObject=__webpack_require__(35),toLength=__webpack_require__(81),getIterFn=__webpack_require__(259),BREAK={},RETURN={};(exports=module.exports=function(iterable,entries,fn,that,ITERATOR){var length,step,iterator,result,iterFn=ITERATOR?function(){return iterable}:getIterFn(iterable),f=ctx(fn,that,entries?2:1),index=0;if("function"!=typeof iterFn)throw TypeError(iterable+" is not iterable!");if(isArrayIter(iterFn)){for(length=toLength(iterable.length);length>index;index++)if((result=entries?f(anObject(step=iterable[index])[0],step[1]):f(iterable[index]))===BREAK||result===RETURN)return result}else for(iterator=iterFn.call(iterable);!(step=iterator.next()).done;)if((result=call(iterator,f,step.value,entries))===BREAK||result===RETURN)return result}).BREAK=BREAK,exports.RETURN=RETURN},function(module,exports,__webpack_require__){var redefine=__webpack_require__(39);module.exports=function(target,src,safe){for(var key in src)redefine(target,key,src[key],safe);return target}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,__webpack_require__(82),__webpack_require__(78),__webpack_require__(13),__webpack_require__(521),__webpack_require__(522),__webpack_require__(45),__webpack_require__(126),__webpack_require__(40),__webpack_require__(46),__webpack_require__(60),__webpack_require__(59),__webpack_require__(523),__webpack_require__(127);var _eventemitter=_interopRequireDefault(__webpack_require__(524)),_coreEvents=_interopRequireDefault(__webpack_require__(101));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}var count=0;function getId(){return count+=1}var StoryStore=function(_EventEmitter){function StoryStore(){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,StoryStore),(_this=_possibleConstructorReturn(this,_getPrototypeOf(StoryStore).call(this)))._data={},_this._revision=0,_this}var Constructor,protoProps,staticProps;return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(StoryStore,_eventemitter.default),Constructor=StoryStore,(protoProps=[{key:"getRevision",value:function(){return this._revision}},{key:"incrementRevision",value:function(){this._revision+=1}},{key:"addStory",value:function(kind,name,fn){var parameters=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._data[kind]||(this._data[kind]={kind:kind,fileName:parameters.fileName,index:getId(),stories:{}}),this._data[kind].stories[name]={name:name,index:getId(),fn:fn,parameters:parameters},this.emit(_coreEvents.default.STORY_ADDED,kind,name,fn,parameters)}},{key:"getStoryKinds",value:function(){var _this2=this;return Object.keys(this._data).map(function(key){return _this2._data[key]}).filter(function(kind){return Object.keys(kind.stories).length>0}).sort(function(info1,info2){return info1.index-info2.index}).map(function(info){return info.kind})}},{key:"getStories",value:function(kind){var _this3=this;return this._data[kind]?Object.keys(this._data[kind].stories).map(function(name){return _this3._data[kind].stories[name]}).sort(function(info1,info2){return info1.index-info2.index}).map(function(info){return info.name}):[]}},{key:"getStoryFileName",value:function(kind){var storiesKind=this._data[kind];return storiesKind?storiesKind.fileName:null}},{key:"getStoryAndParameters",value:function(kind,name){var storiesKind=this._data[kind];if(!storiesKind)return null;var storyInfo=storiesKind.stories[name];return storyInfo?{story:storyInfo.fn,parameters:storyInfo.parameters}:null}},{key:"getStory",value:function(kind,name){var data=this.getStoryAndParameters(kind,name);return data&&data.story}},{key:"getStoryWithContext",value:function(kind,name){var data=this.getStoryAndParameters(kind,name);if(!data)return null;var story=data.story,parameters=data.parameters;return function(){return story({kind:kind,story:name,parameters:parameters})}}},{key:"removeStoryKind",value:function(kind){this.hasStoryKind(kind)&&(this._data[kind].stories={})}},{key:"hasStoryKind",value:function(kind){return Boolean(this._data[kind])}},{key:"hasStory",value:function(kind,name){return Boolean(this.getStory(kind,name))}},{key:"dumpStoryBook",value:function(){var _this4=this;return this.getStoryKinds().map(function(kind){return{kind:kind,stories:_this4.getStories(kind)}})}},{key:"size",value:function(){return Object.keys(this._data).length}},{key:"clean",value:function(){var _this5=this;this.getStoryKinds().forEach(function(kind){return delete _this5._data[kind]})}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),StoryStore}();exports.default=StoryStore},function(module,exports,__webpack_require__){"use strict";var re1,re2,regexpFlags=__webpack_require__(172),nativeExec=RegExp.prototype.exec,nativeReplace=String.prototype.replace,patchedExec=nativeExec,UPDATES_LAST_INDEX_WRONG=(re1=/a/,re2=/b*/g,nativeExec.call(re1,"a"),nativeExec.call(re2,"a"),0!==re1.lastIndex||0!==re2.lastIndex),NPCG_INCLUDED=void 0!==/()??/.exec("")[1];(UPDATES_LAST_INDEX_WRONG||NPCG_INCLUDED)&&(patchedExec=function(str){var lastIndex,reCopy,match,i,re=this;return NPCG_INCLUDED&&(reCopy=new RegExp("^"+re.source+"$(?!\\s)",regexpFlags.call(re))),UPDATES_LAST_INDEX_WRONG&&(lastIndex=re.lastIndex),match=nativeExec.call(re,str),UPDATES_LAST_INDEX_WRONG&&match&&(re.lastIndex=re.global?match.index+match[0].length:lastIndex),NPCG_INCLUDED&&match&&match.length>1&&nativeReplace.call(match[0],reCopy,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(match[i]=void 0)}),match}),module.exports=patchedExec},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var obj,_splitStringTransformer=__webpack_require__(555),_splitStringTransformer2=(obj=_splitStringTransformer)&&obj.__esModule?obj:{default:obj};exports.default=_splitStringTransformer2.default,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var obj,_html=__webpack_require__(563),_html2=(obj=_html)&&obj.__esModule?obj:{default:obj};exports.default=_html2.default,module.exports=exports.default},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(597).Symbol;module.exports=Symbol},,function(module,exports,__webpack_require__){"use strict";(function(process){var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=isBrowser,exports.isBrowserMainThread=function(){return isBrowser()&&"undefined"!=typeof document};var _typeof2=_interopRequireDefault(__webpack_require__(27)),_isElectron=_interopRequireDefault(__webpack_require__(184));function isBrowser(){return!("object"===(void 0===process?"undefined":(0,_typeof2.default)(process))&&"[object process]"===String(process)&&!process.browser)||(0,_isElectron.default)()}}).call(this,__webpack_require__(44))},function(module,exports,__webpack_require__){"use strict";(function(process){var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(mockUserAgent){if("undefined"!=typeof window&&"object"===(0,_typeof2.default)(window.process)&&"renderer"===window.process.type)return!0;if(void 0!==process&&"object"===(0,_typeof2.default)(process.versions)&&Boolean(process.versions.electron))return!0;var realUserAgent="object"===("undefined"==typeof navigator?"undefined":(0,_typeof2.default)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,userAgent=mockUserAgent||realUserAgent;if(userAgent&&userAgent.indexOf("Electron")>=0)return!0;return!1};var _typeof2=_interopRequireDefault(__webpack_require__(27))}).call(this,__webpack_require__(44))},function(module,exports,__webpack_require__){"use strict";(function(global,process){var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.console=exports.process=exports.document=exports.global=exports.window=exports.self=void 0;var _typeof2=_interopRequireDefault(__webpack_require__(27)),globals={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==global&&global,document:"undefined"!=typeof document&&document,process:"object"===(void 0===process?"undefined":(0,_typeof2.default)(process))&&process},self_=globals.self||globals.window||globals.global;exports.self=self_;var window_=globals.window||globals.self||globals.global;exports.window=window_;var global_=globals.global||globals.self||globals.window;exports.global=global_;var document_=globals.document||{};exports.document=document_;var process_=globals.process||{};exports.process=process_;var console_=console;exports.console=console_}).call(this,__webpack_require__(17),__webpack_require__(44))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var timestamp;if(_globals.isBrowser&&_globals.window.performance)timestamp=_globals.window.performance.now();else if(_globals.process.hrtime){var timeParts=_globals.process.hrtime();timestamp=1e3*timeParts[0]+timeParts[1]/1e6}else timestamp=Date.now();return timestamp};var _globals=__webpack_require__(103)},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.setParameter=function(gl,key,value){var getter=_webglParameterTables.GL_PARAMETER_GETTERS[key],prevValue=getter?getter(gl,Number(key)):gl.getParameter(Number(key)),setter=_webglParameterTables.GL_PARAMETER_SETTERS[key];return(0,_utils.assert)("function"==typeof setter),setter(gl,value,Number(key)),prevValue},exports.setParameters=setParameters,exports.getParameter=getParameter,exports.getParameters=getParameters,exports.getDefaultParameters=getDefaultParameters,exports.resetParameters=function(gl){setParameters(gl,getDefaultParameters(gl))},exports.getModifiedParameters=function(gl){var values=getParameters(_webglParameterTables.GL_PARAMETER_DEFAULTS),modified={};for(var key in _webglParameterTables.GL_PARAMETER_DEFAULTS)(0,_deepArrayEqual.default)(values[key],_webglParameterTables.GL_PARAMETER_DEFAULTS[key])||(modified[key]=values[key]);return modified};var _webglParameterTables=__webpack_require__(292),_deepArrayEqual=_interopRequireDefault(__webpack_require__(293)),_utils=__webpack_require__(131);function setParameters(gl,values){var compositeSetters={};for(var key in values){var glConstant=Number(key),setter=_webglParameterTables.GL_PARAMETER_SETTERS[key];setter&&("string"==typeof setter?compositeSetters[setter]=!0:setter(gl,values[key],glConstant))}var cache=gl.state&&gl.state.cache;if(cache){var mergedValues=Object.assign({},cache,values);for(var _key in compositeSetters){(0,_webglParameterTables.GL_COMPOSITE_PARAMETER_SETTERS[_key])(gl,mergedValues)}}}function getParameter(gl,key){var getter=_webglParameterTables.GL_PARAMETER_GETTERS[key];return getter?getter(gl,Number(key)):gl.getParameter(Number(key))}function getParameters(gl,parameters){parameters=parameters||_webglParameterTables.GL_PARAMETER_DEFAULTS;var parameterKeys=Array.isArray(parameters)?parameters:Object.keys(parameters),state={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=parameterKeys[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var key=_step.value;state[key]=getParameter(gl,key)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return state}function getDefaultParameters(gl){return Object.assign({},_webglParameterTables.GL_PARAMETER_DEFAULTS,{})}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.headlessGL=function(){var headless=__webpack_require__(633);if(!headless)throw new Error(ERR_HEADLESSGL_LOAD);return headless.apply(void 0,arguments)},exports.WebGL2RenderingContext=exports.WebGLShaderPrecisionFormat=exports.WebGLActiveInfo=exports.WebGLUniformLocation=exports.WebGLTexture=exports.WebGLRenderbuffer=exports.WebGLFramebuffer=exports.WebGLBuffer=exports.WebGLShader=exports.WebGLProgram=exports.WebGLRenderingContext=exports.Image=exports.webGLTypesAvailable=exports.headlessTypes=exports.ERR_HEADLESSGL_LOAD=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_globals=__webpack_require__(104),_isBrowser=_interopRequireDefault(__webpack_require__(129)),ERR_HEADLESSGL_LOAD="luma.gl: loaded under Node.js without headless gl installed, meaning that WebGL contexts can not be created. This may not be an error. For example, this is a typical configuration for isorender applications running on the server.";exports.ERR_HEADLESSGL_LOAD=ERR_HEADLESSGL_LOAD;var headlessTypes=null;if(exports.headlessTypes=headlessTypes,!_isBrowser.default)try{exports.headlessTypes=headlessTypes=__webpack_require__(634)}catch(error){}var DummyType=function DummyType(){(0,_classCallCheck2.default)(this,DummyType)},_ref=headlessTypes||_globals.global,_ref$WebGLRenderingCo=_ref.WebGLRenderingContext,WebGLRenderingContext=void 0===_ref$WebGLRenderingCo?DummyType:_ref$WebGLRenderingCo,_ref$WebGLProgram=_ref.WebGLProgram,WebGLProgram=void 0===_ref$WebGLProgram?DummyType:_ref$WebGLProgram,_ref$WebGLShader=_ref.WebGLShader,WebGLShader=void 0===_ref$WebGLShader?DummyType:_ref$WebGLShader,_ref$WebGLBuffer=_ref.WebGLBuffer,WebGLBuffer=void 0===_ref$WebGLBuffer?DummyType:_ref$WebGLBuffer,_ref$WebGLFramebuffer=_ref.WebGLFramebuffer,WebGLFramebuffer=void 0===_ref$WebGLFramebuffer?DummyType:_ref$WebGLFramebuffer,_ref$WebGLRenderbuffe=_ref.WebGLRenderbuffer,WebGLRenderbuffer=void 0===_ref$WebGLRenderbuffe?DummyType:_ref$WebGLRenderbuffe,_ref$WebGLTexture=_ref.WebGLTexture,WebGLTexture=void 0===_ref$WebGLTexture?DummyType:_ref$WebGLTexture,_ref$WebGLUniformLoca=_ref.WebGLUniformLocation,WebGLUniformLocation=void 0===_ref$WebGLUniformLoca?DummyType:_ref$WebGLUniformLoca,_ref$WebGLActiveInfo=_ref.WebGLActiveInfo,WebGLActiveInfo=void 0===_ref$WebGLActiveInfo?DummyType:_ref$WebGLActiveInfo,_ref$WebGLShaderPreci=_ref.WebGLShaderPrecisionFormat,WebGLShaderPrecisionFormat=void 0===_ref$WebGLShaderPreci?DummyType:_ref$WebGLShaderPreci;exports.WebGLShaderPrecisionFormat=WebGLShaderPrecisionFormat,exports.WebGLActiveInfo=WebGLActiveInfo,exports.WebGLUniformLocation=WebGLUniformLocation,exports.WebGLTexture=WebGLTexture,exports.WebGLRenderbuffer=WebGLRenderbuffer,exports.WebGLFramebuffer=WebGLFramebuffer,exports.WebGLBuffer=WebGLBuffer,exports.WebGLShader=WebGLShader,exports.WebGLProgram=WebGLProgram,exports.WebGLRenderingContext=WebGLRenderingContext;var webGLTypesAvailable=WebGLRenderingContext!==DummyType&&WebGLProgram!==DummyType&&WebGLShader!==DummyType&&WebGLBuffer!==DummyType&&WebGLFramebuffer!==DummyType&&WebGLRenderbuffer!==DummyType&&WebGLTexture!==DummyType&&WebGLUniformLocation!==DummyType&&WebGLActiveInfo!==DummyType&&WebGLShaderPrecisionFormat!==DummyType;exports.webGLTypesAvailable=webGLTypesAvailable;var WebGL2RenderingContext=_globals.global.WebGL2RenderingContext||function WebGL2RenderingContextNotSupported(){(0,_classCallCheck2.default)(this,WebGL2RenderingContextNotSupported)};exports.WebGL2RenderingContext=WebGL2RenderingContext;var Image=_globals.global.Image||function ImageNotSupported(){(0,_classCallCheck2.default)(this,ImageNotSupported)};exports.Image=Image},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPageLoadPromise=function(){pageLoadPromise||(pageLoadPromise=isPage?new Promise(function(resolve,reject){if(isPage&&"complete"===document.readyState)return isPageLoaded=!0,void resolve(document);window.onload=function(){isPageLoaded=!0,resolve(document)}}):Promise.resolve({}));return pageLoadPromise},exports.createCanvas=createCanvas,exports.getCanvas=function(_ref2){var targetCanvas,canvas=_ref2.canvas,width=_ref2.width,height=_ref2.height,_ref2$onError=_ref2.onError,onError=void 0===_ref2$onError?function(){}:_ref2$onError;"string"==typeof canvas?(isPageLoaded||onError("createGLContext called on canvas '".concat(canvas,"' before page was loaded")),targetCanvas=document.getElementById(canvas)):targetCanvas=canvas||createCanvas({id:"lumagl-canvas",width:width,height:height,onError:onError});return targetCanvas};var pageLoadPromise,isPage=__webpack_require__(10).isBrowser&&"undefined"!=typeof document,isPageLoaded=isPage&&"complete"===document.readyState;function createCanvas(_ref){var _ref$width=_ref.width,width=void 0===_ref$width?800:_ref$width,_ref$height=_ref.height,height=void 0===_ref$height?600:_ref$height,_ref$id=_ref.id,id=void 0===_ref$id?"gl-canvas":_ref$id,_ref$insert=_ref.insert,insert=void 0===_ref$insert||_ref$insert,canvas=document.createElement("canvas");if(canvas.id=id,canvas.style.width=Number.isFinite(width)?"".concat(width,"px"):"100%",canvas.style.height=Number.isFinite(height)?"".concat(height,"px"):"100%",insert){var body=document.body;body.insertBefore(canvas,body.firstChild)}return canvas}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(condition,message){if(!condition)throw new Error(message||"luma.gl: assertion failed.")}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getContextDebugInfo=function(gl){var vendorMasked=gl.getParameter(7936),rendererMasked=gl.getParameter(7937),ext=gl.getExtension("WEBGL_debug_renderer_info"),vendorUnmasked=ext&&gl.getParameter(ext.UNMASKED_VENDOR_WEBGL||7936),rendererUnmasked=ext&&gl.getParameter(ext.UNMASKED_RENDERER_WEBGL||7937);return{vendor:vendorUnmasked||vendorMasked,renderer:rendererUnmasked||rendererMasked,vendorMasked:vendorMasked,rendererMasked:rendererMasked,version:gl.getParameter(7938),shadingLanguageVersion:gl.getParameter(35724)}}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.cloneTextureFrom=function(refTexture,overrides){(0,_utils.assert)(refTexture instanceof _texture2d.default||refTexture instanceof _textureCube.default||refTexture instanceof _texture3d.default);var TextureType=refTexture.constructor,gl=refTexture.gl,width=refTexture.width,height=refTexture.height,format=refTexture.format,type=refTexture.type,dataFormat=refTexture.dataFormat,border=refTexture.border,mipmaps=refTexture.mipmaps,textureOptions=Object.assign({width:width,height:height,format:format,type:type,dataFormat:dataFormat,border:border,mipmaps:mipmaps},overrides);return new TextureType(gl,textureOptions)},exports.toFramebuffer=function(texture,opts){var gl=texture.gl,width=texture.width,height=texture.height,id=texture.id;return new _framebuffer.default(gl,Object.assign({},opts,{id:"framebuffer-for-".concat(id),width:width,height:height,attachments:(0,_defineProperty2.default)({},36064,texture)}))};var _defineProperty2=_interopRequireDefault(__webpack_require__(6)),_texture2d=_interopRequireDefault(__webpack_require__(193)),_textureCube=_interopRequireDefault(__webpack_require__(305)),_texture3d=_interopRequireDefault(__webpack_require__(306)),_framebuffer=_interopRequireDefault(__webpack_require__(107)),_utils=__webpack_require__(10)},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_assertThisInitialized2=_interopRequireDefault(__webpack_require__(12)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_texture=_interopRequireDefault(__webpack_require__(86)),_webglUtils=__webpack_require__(14),_loadFile=__webpack_require__(304),Texture2D=function(_Texture){function Texture2D(gl){var _this,props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,_classCallCheck2.default)(this,Texture2D),(0,_webglUtils.assertWebGLContext)(gl),(props instanceof Promise||"string"==typeof props)&&(props={data:props}),"string"==typeof props.data&&(props=Object.assign({},props,{data:(0,_loadFile.loadImage)(props.data)})),(_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Texture2D).call(this,gl,Object.assign({},props,{target:3553})))).initialize(props),Object.seal((0,_assertThisInitialized2.default)(_this)),_this}return(0,_inherits2.default)(Texture2D,_Texture),(0,_createClass2.default)(Texture2D,null,[{key:"isSupported",value:function(gl,opts){return _texture.default.isSupported(gl,opts)}}]),Texture2D}(_texture.default);exports.default=Texture2D},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_assertThisInitialized2=_interopRequireDefault(__webpack_require__(12)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_resource=_interopRequireDefault(__webpack_require__(50)),_renderbufferFormats=_interopRequireDefault(__webpack_require__(643)),_webglUtils=__webpack_require__(14),_utils=__webpack_require__(10);var Renderbuffer=function(_Resource){function Renderbuffer(gl){var _this,opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,_classCallCheck2.default)(this,Renderbuffer),(_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Renderbuffer).call(this,gl,opts))).initialize(opts),Object.seal((0,_assertThisInitialized2.default)(_this)),_this}return(0,_inherits2.default)(Renderbuffer,_Resource),(0,_createClass2.default)(Renderbuffer,null,[{key:"isSupported",value:function(gl){var format=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).format;return!format||function(gl,format,formats){var info=formats[format];if(!info)return!1;var value=(0,_webglUtils.isWebGL2)(gl)&&info.gl2||info.gl1;return"string"==typeof value?gl.getExtension(value):value}(gl,format,_renderbufferFormats.default)}},{key:"getSamplesForFormat",value:function(gl,_ref2){var format=_ref2.format;return gl.getInternalformatParameter(36161,format,32937)}}]),(0,_createClass2.default)(Renderbuffer,[{key:"initialize",value:function(_ref3){var format=_ref3.format,_ref3$width=_ref3.width,width=void 0===_ref3$width?1:_ref3$width,_ref3$height=_ref3.height,height=void 0===_ref3$height?1:_ref3$height,_ref3$samples=_ref3.samples,samples=void 0===_ref3$samples?0:_ref3$samples;return(0,_utils.assert)(format,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==samples&&(0,_webglUtils.isWebGL2)(this.gl)?this.gl.renderbufferStorageMultisample(36161,samples,format,width,height):this.gl.renderbufferStorage(36161,format,width,height),this.format=format,this.width=width,this.height=height,this.samples=samples,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*_renderbufferFormats.default[this.format].bpp),this}},{key:"resize",value:function(_ref4){var width=_ref4.width,height=_ref4.height;return width!==this.width||height!==this.height?this.initialize({width:width,height:height,format:this.format,samples:this.samples}):this}},{key:"_createHandle",value:function(){return this.gl.createRenderbuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_bindHandle",value:function(handle){this.gl.bindRenderbuffer(36161,handle)}},{key:"_syncHandle",value:function(handle){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}},{key:"_getParameter",value:function(pname){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,pname)}}]),Renderbuffer}(_resource.default);exports.default=Renderbuffer},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(shader){var defaultName=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed",match=shader.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return match?match[1]:defaultName}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1));exports.default=function Material(){(0,_classCallCheck2.default)(this,Material)}},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(9),_interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_vector=_interopRequireDefault(__webpack_require__(198)),vec2=_interopRequireWildcard(__webpack_require__(69)),Vector2=function(_Vector){function Vector2(){var _this,x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,_classCallCheck2.default)(this,Vector2),_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Vector2).call(this)),Array.isArray(x)&&1===arguments.length?_this.copy(x):_this.set(x,y),_this}return(0,_inherits2.default)(Vector2,_Vector),(0,_createClass2.default)(Vector2,[{key:"cross",value:function(vector){return vec2.cross(this,this,vector),this.check()}},{key:"horizontalAngle",value:function(){return Math.atan2(this.y,this.x)}},{key:"verticalAngle",value:function(){return Math.atan2(this.x,this.y)}},{key:"operation",value:function(_operation){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];return _operation.apply(void 0,[this,this].concat(args)),this.check()}},{key:"ELEMENTS",get:function(){return 2}}]),Vector2}(_vector.default);exports.default=Vector2},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_mathArray=_interopRequireDefault(__webpack_require__(109)),_common=__webpack_require__(43),assert=function(x,m){if(!x)throw new Error(m)},Vector=function(_MathArray){function Vector(){return(0,_classCallCheck2.default)(this,Vector),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Vector).apply(this,arguments))}return(0,_inherits2.default)(Vector,_MathArray),(0,_createClass2.default)(Vector,[{key:"len",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"lengthSquared",value:function(){for(var length=0,i=0;i<this.ELEMENTS;++i)length+=this[i]*this[i];return length}},{key:"distance",value:function(mathArray){return Math.sqrt(this.distanceSquared(mathArray))}},{key:"distanceSquared",value:function(mathArray){for(var length=0,i=0;i<this.ELEMENTS;++i){var dist=this[i]-mathArray[i];length+=dist*dist}return(0,_common.checkNumber)(length)}},{key:"dot",value:function(mathArray){for(var product=0,i=0;i<this.ELEMENTS;++i)product+=this[i]*mathArray[i];return(0,_common.checkNumber)(product)}},{key:"normalize",value:function(){var length=this.magnitude();if(0!==length)for(var i=0;i<this.ELEMENTS;++i)this[i]/=length;return this.check()}},{key:"add",value:function(){for(var _len=arguments.length,vectors=new Array(_len),_key=0;_key<_len;_key++)vectors[_key]=arguments[_key];for(var _i=0;_i<vectors.length;_i++)for(var vector=vectors[_i],i=0;i<this.ELEMENTS;++i)this[i]+=vector[i];return this.check()}},{key:"subtract",value:function(){for(var _len2=arguments.length,vectors=new Array(_len2),_key2=0;_key2<_len2;_key2++)vectors[_key2]=arguments[_key2];for(var _i2=0;_i2<vectors.length;_i2++)for(var vector=vectors[_i2],i=0;i<this.ELEMENTS;++i)this[i]-=vector[i];return this.check()}},{key:"multiply",value:function(){for(var _len3=arguments.length,vectors=new Array(_len3),_key3=0;_key3<_len3;_key3++)vectors[_key3]=arguments[_key3];for(var _i3=0;_i3<vectors.length;_i3++)for(var vector=vectors[_i3],i=0;i<this.ELEMENTS;++i)this[i]*=vector[i];return this.check()}},{key:"divide",value:function(){for(var _len4=arguments.length,vectors=new Array(_len4),_key4=0;_key4<_len4;_key4++)vectors[_key4]=arguments[_key4];for(var _i4=0;_i4<vectors.length;_i4++)for(var vector=vectors[_i4],i=0;i<this.ELEMENTS;++i)this[i]/=vector[i];return this.check()}},{key:"scale",value:function(_scale){if(Array.isArray(_scale))return this.multiply(_scale);for(var i=0;i<this.ELEMENTS;++i)this[i]*=_scale;return this.check()}},{key:"scaleAndAdd",value:function(vector,scale){for(var i=0;i<this.ELEMENTS;++i)this[i]=this[i]*scale+vector[i];return this.check()}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"distanceTo",value:function(vector){return this.distance(vector)}},{key:"distanceToSquared",value:function(vector){return this.distanceSquared(vector)}},{key:"getComponent",value:function(i){return assert(i>=0&&i<this.ELEMENTS,"index is out of range"),(0,_common.checkNumber)(this[i])}},{key:"setComponent",value:function(i,value){return assert(i>=0&&i<this.ELEMENTS,"index is out of range"),this[i]=value,this.check()}},{key:"addVectors",value:function(a,b){return this.copy(a).add(b)}},{key:"subVectors",value:function(a,b){return this.copy(a).subtract(b)}},{key:"multiplyVectors",value:function(a,b){return this.copy(a).multiply(b)}},{key:"addScaledVector",value:function(a,b){return this.add(new this.constructor(a).multiplyScalar(b))}},{key:"x",get:function(){return this[0]},set:function(value){return this[0]=(0,_common.checkNumber)(value)}},{key:"y",get:function(){return this[1]},set:function(value){return this[1]=(0,_common.checkNumber)(value)}}]),Vector}(_mathArray.default);exports.default=Vector},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(9),_interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateMatrix4=function(m){return 16===m.length&&Number.isFinite(m[0])&&Number.isFinite(m[1])&&Number.isFinite(m[2])&&Number.isFinite(m[3])&&Number.isFinite(m[4])&&Number.isFinite(m[5])&&Number.isFinite(m[6])&&Number.isFinite(m[7])&&Number.isFinite(m[8])&&Number.isFinite(m[9])&&Number.isFinite(m[10])&&Number.isFinite(m[11])&&Number.isFinite(m[12])&&Number.isFinite(m[13])&&Number.isFinite(m[14])&&Number.isFinite(m[15])},exports.default=void 0;var _slicedToArray2=_interopRequireDefault(__webpack_require__(11)),_toConsumableArray2=_interopRequireDefault(__webpack_require__(49)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_mathArray=_interopRequireDefault(__webpack_require__(109)),_common=__webpack_require__(43),_validators=__webpack_require__(319),_vector=_interopRequireDefault(__webpack_require__(197)),_vector2=_interopRequireDefault(__webpack_require__(88)),_vector3=_interopRequireDefault(__webpack_require__(318)),mat4=_interopRequireWildcard(__webpack_require__(89)),vec2=_interopRequireWildcard(__webpack_require__(69)),vec3=_interopRequireWildcard(__webpack_require__(70)),vec4=_interopRequireWildcard(__webpack_require__(90)),IDENTITY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var Matrix4=function(_MathArray){function Matrix4(){for(var _this,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(0,_classCallCheck2.default)(this,Matrix4),_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Matrix4).call(this)),Array.isArray(args[0])&&1===arguments.length?_this.copy(args[0]):_this.identity(),_this}return(0,_inherits2.default)(Matrix4,_MathArray),(0,_createClass2.default)(Matrix4,[{key:"setRowMajor",value:function(){var m00=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,m01=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,m02=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,m03=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,m10=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,m11=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,m12=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,m13=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,m20=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,m21=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,m22=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,m23=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,m30=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,m31=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,m32=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,m33=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this[0]=m00,this[1]=m10,this[2]=m20,this[3]=m30,this[4]=m01,this[5]=m11,this[6]=m21,this[7]=m31,this[8]=m02,this[9]=m12,this[10]=m22,this[11]=m32,this[12]=m03,this[13]=m13,this[14]=m23,this[15]=m33,this.check()}},{key:"setColumnMajor",value:function(){var m00=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,m10=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,m20=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,m30=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,m01=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,m11=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,m21=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,m31=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,m02=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,m12=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,m22=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,m32=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,m03=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,m13=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,m23=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,m33=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this[0]=m00,this[1]=m10,this[2]=m20,this[3]=m30,this[4]=m01,this[5]=m11,this[6]=m21,this[7]=m31,this[8]=m02,this[9]=m12,this[10]=m22,this[11]=m32,this[12]=m03,this[13]=m13,this[14]=m23,this[15]=m33,this.check()}},{key:"copy",value:function(array){return this.setColumnMajor.apply(this,(0,_toConsumableArray2.default)(array))}},{key:"set",value:function(){return this.setColumnMajor.apply(this,arguments)}},{key:"getElement",value:function(i,j){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?this[i][j]:this[j][i]}},{key:"setElement",value:function(i,j,value){return arguments.length>3&&void 0!==arguments[3]&&arguments[3]?this[i][j]=(0,_common.checkNumber)(value):this[j][i]=(0,_common.checkNumber)(value),this}},{key:"determinant",value:function(){return mat4.determinant(this)}},{key:"identity",value:function(){return this.copy(IDENTITY)}},{key:"fromQuaternion",value:function(q){return mat4.fromQuat(this,q),this.check()}},{key:"frustum",value:function(_ref){var left=_ref.left,right=_ref.right,bottom=_ref.bottom,top=_ref.top,near=_ref.near,far=_ref.far;return mat4.frustum(this,left,right,bottom,top,near,far),this.check()}},{key:"lookAt",value:function(_ref2){var eye=_ref2.eye,_ref2$center=_ref2.center,center=void 0===_ref2$center?[0,0,0]:_ref2$center,_ref2$up=_ref2.up,up=void 0===_ref2$up?[0,1,0]:_ref2$up;return mat4.lookAt(this,eye,center,up),this.check()}},{key:"ortho",value:function(_ref3){var left=_ref3.left,right=_ref3.right,bottom=_ref3.bottom,top=_ref3.top,_ref3$near=_ref3.near,near=void 0===_ref3$near?.1:_ref3$near,_ref3$far=_ref3.far,far=void 0===_ref3$far?500:_ref3$far;return mat4.ortho(this,left,right,bottom,top,near,far),this.check()}},{key:"orthographic",value:function(_ref4){var _ref4$fovy=_ref4.fovy,fovy=void 0===_ref4$fovy?45*Math.PI/180:_ref4$fovy,_ref4$aspect=_ref4.aspect,aspect=void 0===_ref4$aspect?1:_ref4$aspect,_ref4$focalDistance=_ref4.focalDistance,focalDistance=void 0===_ref4$focalDistance?1:_ref4$focalDistance,_ref4$near=_ref4.near,near=void 0===_ref4$near?.1:_ref4$near,_ref4$far=_ref4.far,far=void 0===_ref4$far?500:_ref4$far;if(fovy>2*Math.PI)throw Error("radians");var halfY=fovy/2,top=focalDistance*Math.tan(halfY),right=top*aspect;return(new Matrix4).ortho({left:-right,right:right,bottom:-top,top:top,near:near,far:far})}},{key:"perspective",value:function(){var _ref5=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},fovy=_ref5.fovy,_ref5$fov=_ref5.fov,fov=void 0===_ref5$fov?45*Math.PI/180:_ref5$fov,_ref5$aspect=_ref5.aspect,aspect=void 0===_ref5$aspect?1:_ref5$aspect,_ref5$near=_ref5.near,near=void 0===_ref5$near?.1:_ref5$near,_ref5$far=_ref5.far,far=void 0===_ref5$far?500:_ref5$far;if((fovy=fovy||fov)>2*Math.PI)throw Error("radians");return mat4.perspective(this,fovy,aspect,near,far),this.check()}},{key:"transpose",value:function(){return mat4.transpose(this,this),this.check()}},{key:"invert",value:function(){return mat4.invert(this,this),this.check()}},{key:"multiplyLeft",value:function(a){return mat4.multiply(this,a,this),this.check()}},{key:"multiplyRight",value:function(a){return mat4.multiply(this,this,a),this.check()}},{key:"rotateX",value:function(radians){return mat4.rotateX(this,this,radians),this.check()}},{key:"rotateY",value:function(radians){return mat4.rotateY(this,this,radians),this.check()}},{key:"rotateZ",value:function(radians){return mat4.rotateZ(this,this,radians),this.check()}},{key:"rotateXYZ",value:function(_ref6){var _ref7=(0,_slicedToArray2.default)(_ref6,3),rx=_ref7[0],ry=_ref7[1],rz=_ref7[2];return this.rotateX(rx).rotateY(ry).rotateZ(rz)}},{key:"rotateAxis",value:function(radians,axis){return mat4.rotate(this,this,radians,axis),this.check()}},{key:"scale",value:function(factor){return Array.isArray(factor)?mat4.scale(this,this,factor):mat4.scale(this,this,[factor,factor,factor]),this.check()}},{key:"translate",value:function(vec){return mat4.translate(this,this,vec),this.check()}},{key:"transformVector2",value:function(vector,out){return out=out||new _vector.default,vec2.transformMat4(out,vector,this),(0,_validators.validateVector)(out,2),out}},{key:"transformVector3",value:function(vector,out){return out=out||new _vector2.default,vec3.transformMat4(out,vector,this),(0,_validators.validateVector)(out,3),out}},{key:"transformVector4",value:function(vector,out){return out=out||new _vector3.default,vec4.transformMat4(out,vector,this),(0,_validators.validateVector)(out,4),out.check()}},{key:"transformVector",value:function(vector,out){switch(vector.length){case 2:return this.transformVector2(vector,out);case 3:return this.transformVector3(vector,out);case 4:return this.transformVector4(vector,out);default:throw new Error("Illegal vector")}}},{key:"transformDirection",value:function(vector,out){return this._transformVector(vector,out,0)}},{key:"transformPoint",value:function(vector,out){return this._transformVector(vector,out,1)}},{key:"_transformVector",value:function(vector,out,w){switch(vector.length){case 2:out=out||new _vector.default,vec4.transformMat4(out,[vector[0],vector[1],0,w],this),out.length=2,(0,_validators.validateVector)(out,2);break;case 3:out=out||new _vector2.default,vec4.transformMat4(out,[vector[0],vector[1],vector[2],w],this),out.length=3,(0,_validators.validateVector)(out,3);break;case 4:if(Boolean(w)!==Boolean(vector[3]))throw new Error("math.gl: Matrix4.transformPoint - invalid vector");out=out||new _vector3.default,vec4.transformMat4(out,vector,this),(0,_validators.validateVector)(out,4);break;default:throw new Error("Illegal vector")}return out}},{key:"makeRotationX",value:function(radians){return this.identity().rotateX(radians)}},{key:"makeTranslation",value:function(x,y,z){return this.identity().translate([x,y,z])}},{key:"ELEMENTS",get:function(){return 16}}]),Matrix4}(_mathArray.default);exports.default=Matrix4},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _lights=_interopRequireDefault(__webpack_require__(688)),_default={name:"lights",vs:_lights.default,fs:_lights.default,getUniforms:function getUniforms(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:INITIAL_MODULE_OPTIONS;if("lightSources"in opts){var _ref3=opts.lightSources||{},ambientLight=_ref3.ambientLight,pointLights=_ref3.pointLights,directionalLights=_ref3.directionalLights,hasLights=ambientLight||pointLights&&pointLights.length>0||directionalLights&&directionalLights.length>0;return hasLights?Object.assign({},function(_ref2){var ambientLight=_ref2.ambientLight,_ref2$pointLights=_ref2.pointLights,pointLights=void 0===_ref2$pointLights?[]:_ref2$pointLights,_ref2$directionalLigh=_ref2.directionalLights,directionalLights=void 0===_ref2$directionalLigh?[]:_ref2$directionalLigh,lightSourceUniforms={};lightSourceUniforms["lighting_uAmbientLight.color"]=ambientLight?convertColor(ambientLight):[0,0,0];return pointLights.forEach(function(pointLight,index){lightSourceUniforms["lighting_uPointLight[".concat(index,"].color")]=convertColor(pointLight),lightSourceUniforms["lighting_uPointLight[".concat(index,"].position")]=pointLight.position,lightSourceUniforms["lighting_uPointLight[".concat(index,"].attenuation")]=pointLight.attenuation}),lightSourceUniforms.lighting_uPointLightCount=pointLights.length,directionalLights.forEach(function(directionalLight,index){lightSourceUniforms["lighting_uDirectionalLight[".concat(index,"].color")]=convertColor(directionalLight),lightSourceUniforms["lighting_uDirectionalLight[".concat(index,"].direction")]=directionalLight.direction}),lightSourceUniforms.lighting_uDirectionalLightCount=directionalLights.length,lightSourceUniforms}({ambientLight:ambientLight,pointLights:pointLights,directionalLights:directionalLights}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in opts){var lightSources={pointLights:[],directionalLights:[]},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=(opts.lights||[])[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var light=_step.value;switch(light.type){case"ambient":lightSources.ambientLight=light;break;case"directional":lightSources.directionalLights.push(light);break;case"point":lightSources.pointLights.push(light)}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return getUniforms({lightSources:lightSources})}return{}},defines:{MAX_LIGHTS:3}};exports.default=_default;var INITIAL_MODULE_OPTIONS={};function convertColor(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$color=_ref.color,color=void 0===_ref$color?[0,0,0]:_ref$color,_ref$intensity=_ref.intensity,intensity=void 0===_ref$intensity?1:_ref$intensity;return color.map(function(component){return component*intensity/255})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},isBrowser="undefined"!=typeof window&&window.addEventListener,timers=new Map,isReady=function(){return isBrowser&&window.__SEER_INITIALIZED__},throttle=function(key,delay){var time=timers.get(key),now=Date.now();return!!(time&&now-time<delay)||(timers.set(key,now),!1)},send=function(type){var data=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(isBrowser&&isReady()){var seen=new Set,payload=JSON.stringify(data,function(seen){return function(key,value){if(!value||"object"!==(void 0===value?"undefined":_typeof(value))||!seen.has(value))return seen.add(value),Object.prototype.toString.call(value).slice(8,-1).includes("Array")?Array.prototype.slice.call(value,0,20):value}}(seen));try{window.postMessage({type:type,payload:payload,source:"seer-agent"},"*")}catch(e){if(throttle("seer-log",2e3))return;console.log(e)}}},listeners=new Map,listener=function(message){if(message&&message.data&&"seer-core"===message.data.source){var _message$data=message.data,type=_message$data.type,payload=_message$data.payload,typeListeners=listeners.get(type);typeListeners&&typeListeners.forEach(function(cb){return cb(payload)})}},init=function(){isBrowser&&!window.__SEER_LISTENER__&&(window.addEventListener("message",listener),window.__SEER_LISTENER__=!0)};exports.default={send:send,throttle:throttle,isReady:isReady,list:function(key,data){return send("LIST",{key:key,data:data})},listItem:function(key,itemKey){var data=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return send("LIST_ITEM",{key:key,itemKey:itemKey,data:data})},updateItem:function(key,itemKey,path,data){return send("UPDATE_ITEM",{key:key,itemKey:itemKey,path:path,data:data})},multiUpdate:function(key,itemKey,array){return send("MULTI_UPDATE_ITEM",{key:key,itemKey:itemKey,array:array})},deleteItem:function(key,itemKey){return send("DELETE_ITEM",{key:key,itemKey:itemKey})},addLog:function(key,itemKey,msg){return send("ADD_LOG",{key:key,itemKey:itemKey,msg:msg})},listeners:listeners,listenFor:function(type,cb){if(isBrowser){if(!type||!cb)throw new Error("Please provide a type and callback");listeners.has(type)||listeners.set(type,[]),window.__SEER_LISTENER__||init(),listeners.get(type).push(cb)}},removeListener:function(cb){listeners.forEach(function(typeListeners,key){listeners.set(key,typeListeners.filter(function(l){return l!==cb}))})},init:init,clean:function(){isBrowser&&window.__SEER_LISTENER__&&(window.removeEventListener("message",listener),delete window.__SEER_LISTENER__)}}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),CompositePass=function(_Pass){function CompositePass(gl,props){return(0,_classCallCheck2.default)(this,CompositePass),props=Array.isArray(props)?{passes:props}:props,(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(CompositePass).call(this,gl,Object.assign({id:"composite-pass"},props)))}return(0,_inherits2.default)(CompositePass,_Pass),(0,_createClass2.default)(CompositePass,[{key:"render",value:function(){var _this$props$passes=this.props.passes,passes=void 0===_this$props$passes?[]:_this$props$passes,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=passes[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var pass=_step.value;pass.render.apply(pass,arguments)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}}]),CompositePass}(_interopRequireDefault(__webpack_require__(71)).default);exports.default=CompositePass},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _objectSpread2=_interopRequireDefault(__webpack_require__(36)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_geometry=_interopRequireDefault(__webpack_require__(68)),_utils=__webpack_require__(19),INDEX_OFFSETS={x:[2,0,1],y:[0,1,2],z:[1,2,0]},TruncatedConeGeometry=function(_Geometry){function TruncatedConeGeometry(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,_classCallCheck2.default)(this,TruncatedConeGeometry);var _props$id=props.id,id=void 0===_props$id?(0,_utils.uid)("truncated-code-geometry"):_props$id,_tesselateTruncatedCo=function(props){for(var _props$bottomRadius=props.bottomRadius,bottomRadius=void 0===_props$bottomRadius?0:_props$bottomRadius,_props$topRadius=props.topRadius,topRadius=void 0===_props$topRadius?0:_props$topRadius,_props$height=props.height,height=void 0===_props$height?1:_props$height,_props$nradial=props.nradial,nradial=void 0===_props$nradial?10:_props$nradial,_props$nvertical=props.nvertical,nvertical=void 0===_props$nvertical?10:_props$nvertical,_props$verticalAxis=props.verticalAxis,verticalAxis=void 0===_props$verticalAxis?"y":_props$verticalAxis,_props$topCap=props.topCap,topCap=void 0!==_props$topCap&&_props$topCap,_props$bottomCap=props.bottomCap,bottomCap=void 0!==_props$bottomCap&&_props$bottomCap,extra=(topCap?2:0)+(bottomCap?2:0),numVertices=(nradial+1)*(nvertical+1+extra),slant=Math.atan2(bottomRadius-topRadius,height),msin=Math.sin,mcos=Math.cos,mpi=Math.PI,cosSlant=mcos(slant),sinSlant=msin(slant),start=topCap?-2:0,end=nvertical+(bottomCap?2:0),vertsAroundEdge=nradial+1,indices=new Uint16Array(nradial*(nvertical+extra)*6),indexOffset=INDEX_OFFSETS[verticalAxis],positions=new Float32Array(3*numVertices),normals=new Float32Array(3*numVertices),texCoords=new Float32Array(2*numVertices),i3=0,i2=0,i=start;i<=end;i++){var v=i/nvertical,y=height*v,ringRadius=void 0;i<0?(y=0,v=1,ringRadius=bottomRadius):i>nvertical?(y=height,v=1,ringRadius=topRadius):ringRadius=bottomRadius+i/nvertical*(topRadius-bottomRadius),-2!==i&&i!==nvertical+2||(ringRadius=0,v=0),y-=height/2;for(var j=0;j<vertsAroundEdge;j++){var sin=msin(j*mpi*2/nradial),cos=mcos(j*mpi*2/nradial);positions[i3+indexOffset[0]]=sin*ringRadius,positions[i3+indexOffset[1]]=y,positions[i3+indexOffset[2]]=cos*ringRadius,normals[i3+indexOffset[0]]=i<0||i>nvertical?0:sin*cosSlant,normals[i3+indexOffset[1]]=i<0?-1:i>nvertical?1:sinSlant,normals[i3+indexOffset[2]]=i<0||i>nvertical?0:cos*cosSlant,texCoords[i2+0]=j/nradial,texCoords[i2+1]=v,i2+=2,i3+=3}}for(var _i=0;_i<nvertical+extra;_i++)for(var _j=0;_j<nradial;_j++){var index=6*(_i*nradial+_j);indices[index+0]=vertsAroundEdge*(_i+0)+0+_j,indices[index+1]=vertsAroundEdge*(_i+0)+1+_j,indices[index+2]=vertsAroundEdge*(_i+1)+1+_j,indices[index+3]=vertsAroundEdge*(_i+0)+0+_j,indices[index+4]=vertsAroundEdge*(_i+1)+1+_j,indices[index+5]=vertsAroundEdge*(_i+1)+0+_j}return{indices:indices,attributes:{POSITION:{size:3,value:positions},NORMAL:{size:3,value:normals},TEXCOORD_0:{size:2,value:texCoords}}}}(props),indices=_tesselateTruncatedCo.indices,attributes=_tesselateTruncatedCo.attributes;return(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(TruncatedConeGeometry).call(this,(0,_objectSpread2.default)({},props,{id:id,indices:indices,attributes:(0,_objectSpread2.default)({},attributes,props.attributes)})))}return(0,_inherits2.default)(TruncatedConeGeometry,_Geometry),TruncatedConeGeometry}(_geometry.default);exports.default=TruncatedConeGeometry},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0),_interopRequireWildcard=__webpack_require__(9);Object.defineProperty(exports,"__esModule",{value:!0}),exports.getUniformsFromViewport=function(){var _ref2=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},viewport=_ref2.viewport,_ref2$devicePixelRati=_ref2.devicePixelRatio,devicePixelRatio=void 0===_ref2$devicePixelRati?1:_ref2$devicePixelRati,_ref2$modelMatrix=_ref2.modelMatrix,modelMatrix=void 0===_ref2$modelMatrix?null:_ref2$modelMatrix,_ref2$coordinateSyste=_ref2.coordinateSystem,coordinateSystem=void 0===_ref2$coordinateSyste?_constants.COORDINATE_SYSTEM.LNGLAT:_ref2$coordinateSyste,_ref2$coordinateOrigi=_ref2.coordinateOrigin,coordinateOrigin=void 0===_ref2$coordinateOrigi?DEFAULT_COORDINATE_ORIGIN:_ref2$coordinateOrigi,_ref2$wrapLongitude=_ref2.wrapLongitude,wrapLongitude=void 0!==_ref2$wrapLongitude&&_ref2$wrapLongitude,projectionMode=_ref2.projectionMode,positionOrigin=_ref2.positionOrigin;(0,_assert.default)(viewport),void 0!==projectionMode&&_log.default.removed("projectionMode","coordinateSystem")();void 0!==positionOrigin&&_log.default.removed("positionOrigin","coordinateOrigin")();return Object.assign({project_uModelMatrix:modelMatrix||IDENTITY_MATRIX},getMemoizedViewportUniforms({viewport:viewport,devicePixelRatio:devicePixelRatio,coordinateSystem:coordinateSystem,coordinateOrigin:coordinateOrigin,wrapLongitude:wrapLongitude}))},exports.LNGLAT_AUTO_OFFSET_ZOOM_THRESHOLD=void 0;var mat4=_interopRequireWildcard(__webpack_require__(89)),vec4=_interopRequireWildcard(__webpack_require__(90)),_constants=__webpack_require__(91),_memoize=_interopRequireDefault(__webpack_require__(205)),_log=_interopRequireDefault(__webpack_require__(24)),_assert=_interopRequireDefault(__webpack_require__(20)),_constants2=__webpack_require__(329),ZERO_VECTOR=[0,0,0,0],VECTOR_TO_POINT_MATRIX=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],IDENTITY_MATRIX=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],DEFAULT_PIXELS_PER_UNIT2=[0,0,0],DEFAULT_COORDINATE_ORIGIN=[0,0,0],LNGLAT_AUTO_OFFSET_ZOOM_THRESHOLD=12;exports.LNGLAT_AUTO_OFFSET_ZOOM_THRESHOLD=LNGLAT_AUTO_OFFSET_ZOOM_THRESHOLD;var getMemoizedViewportUniforms=(0,_memoize.default)(function(_ref3){var viewport=_ref3.viewport,devicePixelRatio=_ref3.devicePixelRatio,coordinateSystem=_ref3.coordinateSystem,coordinateOrigin=_ref3.coordinateOrigin,wrapLongitude=_ref3.wrapLongitude,coordinateZoom=viewport.zoom,_calculateMatrixAndOf=function(_ref){var projectionCenter,viewport=_ref.viewport,coordinateSystem=_ref.coordinateSystem,coordinateOrigin=_ref.coordinateOrigin,coordinateZoom=_ref.coordinateZoom,viewMatrixUncentered=viewport.viewMatrixUncentered,viewMatrix=viewport.viewMatrix,projectionMatrix=viewport.projectionMatrix,viewProjectionMatrix=viewport.viewProjectionMatrix,cameraPos=viewport.cameraPosition,shaderCoordinateSystem=function(coordinateSystem){switch(coordinateSystem){case _constants.COORDINATE_SYSTEM.LNGLAT:case _constants.COORDINATE_SYSTEM.LNGLAT_EXPERIMENTAL:default:return _constants2.PROJECT_COORDINATE_SYSTEM.LNGLAT_AUTO_OFFSET;case _constants.COORDINATE_SYSTEM.LNGLAT_DEPRECATED:return _constants2.PROJECT_COORDINATE_SYSTEM.LNG_LAT;case _constants.COORDINATE_SYSTEM.METER_OFFSETS:case _constants.COORDINATE_SYSTEM.METERS:return _constants2.PROJECT_COORDINATE_SYSTEM.METER_OFFSETS;case _constants.COORDINATE_SYSTEM.LNGLAT_OFFSETS:return _constants2.PROJECT_COORDINATE_SYSTEM.LNGLAT_OFFSETS;case _constants.COORDINATE_SYSTEM.IDENTITY:return _constants2.PROJECT_COORDINATE_SYSTEM.IDENTITY}}(coordinateSystem),shaderCoordinateOrigin=coordinateOrigin;if(shaderCoordinateSystem===_constants2.PROJECT_COORDINATE_SYSTEM.LNGLAT_AUTO_OFFSET)if(coordinateZoom<LNGLAT_AUTO_OFFSET_ZOOM_THRESHOLD)shaderCoordinateSystem=_constants2.PROJECT_COORDINATE_SYSTEM.LNG_LAT;else{var lng=Math.fround(viewport.longitude),lat=Math.fround(viewport.latitude);shaderCoordinateOrigin=[lng,lat]}switch(shaderCoordinateSystem){case _constants2.PROJECT_COORDINATE_SYSTEM.IDENTITY:case _constants2.PROJECT_COORDINATE_SYSTEM.LNG_LAT:projectionCenter=ZERO_VECTOR;break;case _constants2.PROJECT_COORDINATE_SYSTEM.LNGLAT_OFFSETS:case _constants2.PROJECT_COORDINATE_SYSTEM.METER_OFFSETS:case _constants2.PROJECT_COORDINATE_SYSTEM.LNGLAT_AUTO_OFFSET:var positionPixels=viewport.projectFlat(shaderCoordinateOrigin,Math.pow(2,coordinateZoom));cameraPos=[cameraPos[0]-positionPixels[0],cameraPos[1]-positionPixels[1],cameraPos[2]],projectionCenter=vec4.transformMat4([],[positionPixels[0],positionPixels[1],0,1],viewProjectionMatrix),viewMatrix=viewMatrixUncentered||viewMatrix,viewProjectionMatrix=mat4.multiply([],projectionMatrix,viewMatrix),viewProjectionMatrix=mat4.multiply([],viewProjectionMatrix,VECTOR_TO_POINT_MATRIX);break;default:throw new Error("Unknown projection mode")}return{viewMatrix:viewMatrix,viewProjectionMatrix:viewProjectionMatrix,projectionCenter:projectionCenter,cameraPos:cameraPos,shaderCoordinateSystem:shaderCoordinateSystem,shaderCoordinateOrigin:shaderCoordinateOrigin}}({coordinateSystem:coordinateSystem,coordinateOrigin:coordinateOrigin,coordinateZoom:coordinateZoom,viewport:viewport}),projectionCenter=_calculateMatrixAndOf.projectionCenter,viewProjectionMatrix=_calculateMatrixAndOf.viewProjectionMatrix,cameraPos=_calculateMatrixAndOf.cameraPos,shaderCoordinateSystem=_calculateMatrixAndOf.shaderCoordinateSystem,shaderCoordinateOrigin=_calculateMatrixAndOf.shaderCoordinateOrigin;(0,_assert.default)(viewProjectionMatrix,"Viewport missing modelViewProjectionMatrix");var distanceScales=viewport.getDistanceScales(),viewportSize=[viewport.width*devicePixelRatio,viewport.height*devicePixelRatio],uniforms={project_uCoordinateSystem:shaderCoordinateSystem,project_uCenter:projectionCenter,project_uWrapLongitude:wrapLongitude,project_uAntimeridian:(viewport.longitude||0)-180,project_uViewportSize:viewportSize,project_uDevicePixelRatio:devicePixelRatio,project_uFocalDistance:viewport.focalDistance||1,project_uCommonUnitsPerMeter:distanceScales.pixelsPerMeter,project_uCommonUnitsPerWorldUnit:distanceScales.pixelsPerMeter,project_uCommonUnitsPerWorldUnit2:DEFAULT_PIXELS_PER_UNIT2,project_uScale:viewport.scale,project_uViewProjectionMatrix:viewProjectionMatrix,project_uCameraPosition:cameraPos},distanceScalesAtOrigin=viewport.getDistanceScales(shaderCoordinateOrigin);switch(shaderCoordinateSystem){case _constants2.PROJECT_COORDINATE_SYSTEM.METER_OFFSETS:uniforms.project_uCommonUnitsPerWorldUnit=distanceScalesAtOrigin.pixelsPerMeter,uniforms.project_uCommonUnitsPerWorldUnit2=distanceScalesAtOrigin.pixelsPerMeter2;break;case _constants2.PROJECT_COORDINATE_SYSTEM.LNGLAT_AUTO_OFFSET:uniforms.project_uCoordinateOrigin=shaderCoordinateOrigin;case _constants2.PROJECT_COORDINATE_SYSTEM.LNG_LAT:case _constants2.PROJECT_COORDINATE_SYSTEM.LNGLAT_OFFSETS:uniforms.project_uCommonUnitsPerWorldUnit=distanceScalesAtOrigin.pixelsPerDegree,uniforms.project_uCommonUnitsPerWorldUnit2=distanceScalesAtOrigin.pixelsPerDegree2}return uniforms})},function(module,exports,__webpack_require__){"use strict";function isEqual(a,b){if(a===b)return!0;if(Array.isArray(a)){var len=a.length;if(!b||b.length!==len)return!1;for(var i=0;i<len;i++)if(a[i]!==b[i])return!1;return!0}return!1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(compute){var cachedResult,cachedArgs={};return function(args){for(var key in args)if(!isEqual(args[key],cachedArgs[key])){cachedResult=compute(args),cachedArgs=args;break}return cachedResult}}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),Effect=function(){function Effect(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,_classCallCheck2.default)(this,Effect);var _props$id=props.id,id=void 0===_props$id?"effect":_props$id;this.id=id,this.props={},Object.assign(this.props,props)}return(0,_createClass2.default)(Effect,[{key:"prepare",value:function(){}},{key:"getParameters",value:function(){}}]),Effect}();exports.default=Effect},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(9),_interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_assertThisInitialized2=_interopRequireDefault(__webpack_require__(12)),_viewport=_interopRequireDefault(__webpack_require__(726)),_webMercatorUtils=__webpack_require__(141),_fitBounds3=_interopRequireDefault(__webpack_require__(336)),vec2=_interopRequireWildcard(__webpack_require__(69)),WebMercatorViewport=function(_Viewport){function WebMercatorViewport(){var _this,_ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},width=_ref.width,height=_ref.height,_ref$latitude=_ref.latitude,latitude=void 0===_ref$latitude?0:_ref$latitude,_ref$longitude=_ref.longitude,longitude=void 0===_ref$longitude?0:_ref$longitude,_ref$zoom=_ref.zoom,zoom=void 0===_ref$zoom?0:_ref$zoom,_ref$pitch=_ref.pitch,pitch=void 0===_ref$pitch?0:_ref$pitch,_ref$bearing=_ref.bearing,bearing=void 0===_ref$bearing?0:_ref$bearing,_ref$altitude=_ref.altitude,altitude=void 0===_ref$altitude?1.5:_ref$altitude,nearZMultiplier=_ref.nearZMultiplier,farZMultiplier=_ref.farZMultiplier;(0,_classCallCheck2.default)(this,WebMercatorViewport),width=width||1,height=height||1;var scale=(0,_webMercatorUtils.zoomToScale)(zoom);altitude=Math.max(.75,altitude);var center=(0,_webMercatorUtils.lngLatToWorld)([longitude,latitude],scale);center[2]=0;var projectionMatrix=(0,_webMercatorUtils.getProjectionMatrix)({width:width,height:height,pitch:pitch,bearing:bearing,altitude:altitude,nearZMultiplier:nearZMultiplier||1/height,farZMultiplier:farZMultiplier||1.01}),viewMatrix=(0,_webMercatorUtils.getViewMatrix)({height:height,center:center,pitch:pitch,bearing:bearing,altitude:altitude,flipY:!0});return(_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(WebMercatorViewport).call(this,{width:width,height:height,viewMatrix:viewMatrix,projectionMatrix:projectionMatrix}))).latitude=latitude,_this.longitude=longitude,_this.zoom=zoom,_this.pitch=pitch,_this.bearing=bearing,_this.altitude=altitude,_this.scale=scale,_this.center=center,_this.pixelsPerMeter=(0,_webMercatorUtils.getDistanceScales)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this))).pixelsPerMeter[2],Object.freeze((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this))),_this}return(0,_inherits2.default)(WebMercatorViewport,_Viewport),(0,_createClass2.default)(WebMercatorViewport,[{key:"projectFlat",value:function(lngLat){var scale=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return(0,_webMercatorUtils.lngLatToWorld)(lngLat,scale)}},{key:"unprojectFlat",value:function(xy){var scale=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return(0,_webMercatorUtils.worldToLngLat)(xy,scale)}},{key:"getMapCenterByLngLatPosition",value:function(_ref2){var lngLat=_ref2.lngLat,pos=_ref2.pos,fromLocation=(0,_webMercatorUtils.pixelsToWorld)(pos,this.pixelUnprojectionMatrix),toLocation=(0,_webMercatorUtils.lngLatToWorld)(lngLat,this.scale),translate=vec2.add([],toLocation,vec2.negate([],fromLocation)),newCenter=vec2.add([],this.center,translate);return(0,_webMercatorUtils.worldToLngLat)(newCenter,this.scale)}},{key:"getLocationAtPoint",value:function(_ref3){var lngLat=_ref3.lngLat,pos=_ref3.pos;return this.getMapCenterByLngLatPosition({lngLat:lngLat,pos:pos})}},{key:"fitBounds",value:function(bounds){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},width=this.width,height=this.height,_fitBounds2=(0,_fitBounds3.default)(Object.assign({width:width,height:height,bounds:bounds},options));return new WebMercatorViewport({width:width,height:height,longitude:_fitBounds2.longitude,latitude:_fitBounds2.latitude,zoom:_fitBounds2.zoom})}}]),WebMercatorViewport}(_viewport.default);exports.default=WebMercatorViewport},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_attribute=_interopRequireDefault(__webpack_require__(337)),_log=_interopRequireDefault(__webpack_require__(24)),_attributeTransitionManager=_interopRequireDefault(__webpack_require__(730));function noop(){}var logFunctions={savedMessages:null,timeStart:null,onLog:function(_ref){var level=_ref.level,message=_ref.message;_log.default.log(level,message)()},onUpdateStart:function(_ref2){_ref2.level,_ref2.numInstances;logFunctions.savedMessages=[],logFunctions.timeStart=new Date},onUpdate:function(_ref3){_ref3.level;var message=_ref3.message;logFunctions.savedMessages&&logFunctions.savedMessages.push(message)},onUpdateEnd:function(_ref4){var level=_ref4.level,id=_ref4.id,numInstances=_ref4.numInstances,timeMs=Math.round(new Date-logFunctions.timeStart),time="".concat(timeMs,"ms");_log.default.group(level,"Updated attributes for ".concat(numInstances," instances in ").concat(id," in ").concat(time),{collapsed:!0})();var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=logFunctions.savedMessages[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var message=_step.value;_log.default.log(level,message)()}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}_log.default.groupEnd(level,"Updated attributes for ".concat(numInstances," instances in ").concat(id," in ").concat(time))(),logFunctions.savedMessages=null}},AttributeManager=function(){function AttributeManager(gl){var _ref6=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref6$id=_ref6.id,id=void 0===_ref6$id?"attribute-manager":_ref6$id,stats=_ref6.stats;(0,_classCallCheck2.default)(this,AttributeManager),this.id=id,this.gl=gl,this.attributes={},this.updateTriggers={},this.accessors={},this.needsRedraw=!0,this.userData={},this.stats=stats,this.attributeTransitionManager=new _attributeTransitionManager.default(gl,{id:"".concat(id,"-transitions")}),Object.seal(this)}return(0,_createClass2.default)(AttributeManager,null,[{key:"setDefaultLogFunctions",value:function(){var _ref5=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},onLog=_ref5.onLog,onUpdateStart=_ref5.onUpdateStart,onUpdate=_ref5.onUpdate,onUpdateEnd=_ref5.onUpdateEnd;void 0!==onLog&&(logFunctions.onLog=onLog||noop),void 0!==onUpdateStart&&(logFunctions.onUpdateStart=onUpdateStart||noop),void 0!==onUpdate&&(logFunctions.onUpdate=onUpdate||noop),void 0!==onUpdateEnd&&(logFunctions.onUpdateEnd=onUpdateEnd||noop)}}]),(0,_createClass2.default)(AttributeManager,[{key:"finalize",value:function(){for(var attributeName in this.attributes)this.attributes[attributeName].delete();this.attributeTransitionManager.finalize()}},{key:"getNeedsRedraw",value:function(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},redraw=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!opts.clearRedrawFlags,redraw&&this.id}},{key:"setNeedsRedraw",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=!0,this}},{key:"add",value:function(attributes,updaters){this._add(attributes,updaters)}},{key:"addInstanced",value:function(attributes,updaters){this._add(attributes,updaters,{instanced:1})}},{key:"remove",value:function(attributeNameArray){for(var i=0;i<attributeNameArray.length;i++){var name=attributeNameArray[i];void 0!==this.attributes[name]&&(this.attributes[name].delete(),delete this.attributes[name])}}},{key:"invalidate",value:function(triggerName){var invalidatedAttributes=this._invalidateTrigger(triggerName);logFunctions.onLog({level:3,message:"invalidated attributes ".concat(invalidatedAttributes," (").concat(triggerName,") for ").concat(this.id)})}},{key:"invalidateAll",value:function(){for(var attributeName in this.attributes)this.attributes[attributeName].setNeedsUpdate();logFunctions.onLog({level:3,message:"invalidated all attributes for ".concat(this.id)})}},{key:"update",value:function(){var _ref7=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},data=_ref7.data,numInstances=_ref7.numInstances,transitions=_ref7.transitions,_ref7$props=_ref7.props,props=void 0===_ref7$props?{}:_ref7$props,_ref7$buffers=_ref7.buffers,buffers=void 0===_ref7$buffers?{}:_ref7$buffers,_ref7$context=_ref7.context,context=void 0===_ref7$context?{}:_ref7$context,updated=!1;for(var attributeName in logFunctions.onUpdateStart({level:2,id:this.id,numInstances:numInstances}),this.stats&&this.stats.get("Update Attributes").timeStart(),this.attributes){var attribute=this.attributes[attributeName];attribute.setExternalBuffer(buffers[attributeName],this.numInstances)||attribute.setGenericValue(props[attribute.getAccessor()])||attribute.needsUpdate()&&(updated=!0,this._updateAttribute({attribute:attribute,numInstances:numInstances,data:data,props:props,context:context})),this.needsRedraw|=attribute.needsRedraw()}updated&&logFunctions.onUpdateEnd({level:2,id:this.id,numInstances:numInstances}),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:numInstances,transitions:transitions})}},{key:"updateTransition",value:function(timestamp){var transitionUpdated=this.attributeTransitionManager.setCurrentTime(timestamp);return this.needsRedraw=this.needsRedraw||transitionUpdated,transitionUpdated}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getChangedAttributes",value:function(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearChangedFlags:!1},attributes=this.attributes,attributeTransitionManager=this.attributeTransitionManager,changedAttributes=Object.assign({},attributeTransitionManager.getAttributes());for(var attributeName in attributes){var attribute=attributes[attributeName];attribute.needsRedraw(opts)&&!attributeTransitionManager.hasAttribute(attributeName)&&(changedAttributes[attributeName]=attribute)}return changedAttributes}},{key:"getAccessors",value:function(){return this.updateTriggers}},{key:"_add",value:function(attributes,updaters){var extraProps=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};updaters&&_log.default.warn("AttributeManager.add({updaters}) - updater map no longer supported")();var newAttributes={};for(var attributeName in attributes){var attribute=attributes[attributeName],newAttribute=this._createAttribute(attributeName,attribute,extraProps);newAttributes[attributeName]=newAttribute}Object.assign(this.attributes,newAttributes),this._mapUpdateTriggersToAttributes()}},{key:"_createAttribute",value:function(name,attribute,extraProps){var props={id:name,constant:attribute.constant||!1,isIndexed:attribute.isIndexed||attribute.elements,size:attribute.elements?1:attribute.size,value:attribute.value||null,divisor:attribute.instanced||extraProps.instanced?1:attribute.divisor};return new _attribute.default(this.gl,Object.assign({},attribute,props))}},{key:"_mapUpdateTriggersToAttributes",value:function(){var _this=this,triggers={},_loop=function(attributeName){_this.attributes[attributeName].getUpdateTriggers().forEach(function(triggerName){triggers[triggerName]||(triggers[triggerName]=[]),triggers[triggerName].push(attributeName)})};for(var attributeName in this.attributes)_loop(attributeName);this.updateTriggers=triggers}},{key:"_invalidateTrigger",value:function(triggerName){var attributes=this.attributes,invalidatedAttributes=this.updateTriggers[triggerName];if(invalidatedAttributes)invalidatedAttributes.forEach(function(name){var attribute=attributes[name];attribute&&attribute.setNeedsUpdate()});else{var message="invalidating non-existent trigger ".concat(triggerName," for ").concat(this.id,"\n");message+="Valid triggers: ".concat(Object.keys(attributes).join(", ")),_log.default.warn(message,invalidatedAttributes)()}return invalidatedAttributes}},{key:"_updateAttribute",value:function(_ref8){var attribute=_ref8.attribute,numInstances=_ref8.numInstances,data=_ref8.data,props=_ref8.props,context=_ref8.context;attribute.allocate(numInstances)&&logFunctions.onUpdate({level:3,message:"".concat(attribute.id," allocated ").concat(numInstances),id:this.id});var timeStart=Date.now();if(attribute.updateBuffer({numInstances:numInstances,data:data,props:props,context:context})){this.needsRedraw=!0;var timeMs=Math.round(Date.now()-timeStart);logFunctions.onUpdate({level:3,message:"".concat(attribute.id," updated ").concat(numInstances," in ").concat(timeMs,"ms")})}}}]),AttributeManager}();exports.default=AttributeManager},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIterable=function(data){var iterable=EMPTY_ARRAY,objectInfo={index:-1,data:data,target:[]};data?"function"==typeof data[Symbol.iterator]?iterable=data:data.length>0&&(placeholderArray.length=data.length,iterable=placeholderArray):iterable=EMPTY_ARRAY;return{iterable:iterable,objectInfo:objectInfo}};var EMPTY_ARRAY=[],placeholderArray=[]},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.removeLayerInSeer=exports.updateLayerInSeer=exports.initLayerInSeer=exports.seerInitListener=exports.layerEditListener=exports.applyPropOverrides=exports.setPropOverrides=void 0;var _toConsumableArray2=_interopRequireDefault(__webpack_require__(49)),_seer=_interopRequireDefault(__webpack_require__(201)),overrides=new Map;exports.setPropOverrides=function(id,valuePath,value){_seer.default.isReady()&&(overrides.has(id)||overrides.set(id,new Map),overrides.get(id).set(valuePath,value))};exports.applyPropOverrides=function(props){if(_seer.default.isReady()&&props.id){var overs=overrides.get(props.id);overs&&overs.forEach(function(value,valuePath){!function recursiveSet(obj,path,value){obj&&(path.length>1?recursiveSet(obj[path[0]],path.slice(1),value):obj[path[0]]=value)}(props,valuePath,value),"data"===valuePath[0]&&(props.data=(0,_toConsumableArray2.default)(props.data))})}};exports.layerEditListener=function(cb){_seer.default.isReady()&&_seer.default.listenFor("deck.gl",cb)};exports.seerInitListener=function(cb){_seer.default.isReady()&&_seer.default.listenFor("init",cb)};exports.initLayerInSeer=function(layer){if(_seer.default.isReady()&&layer){var badges=[layer.constructor.layerName];_seer.default.listItem("deck.gl",layer.id,{badges:badges,links:layer.state&&layer.state.model?["luma.gl:".concat(layer.state.model.id)]:void 0,parent:layer.parent?layer.parent.id:void 0})}};exports.updateLayerInSeer=function(layer){if(_seer.default.isReady()&&!_seer.default.throttle("deck.gl:".concat(layer.id),1e3)){var data=function(layer){var data=[{path:"objects.props",data:layer.props}],badges=[layer.constructor.layerName];if(layer.state){if(layer.getAttributeManager()){var attrs=layer.getAttributeManager().getAttributes();data.push({path:"objects.attributes",data:attrs})}if(layer.state.model){layer.state.model.setProps({timerQueryEnabled:!0});var lastFrameTime=layer.state.model.stats.lastFrameTime;lastFrameTime&&badges.push("".concat((1e3*lastFrameTime).toFixed(0),"μs"))}}return data.push({path:"badges",data:badges}),data}(layer);_seer.default.multiUpdate("deck.gl",layer.id,data)}};exports.removeLayerInSeer=function(id){_seer.default.isReady()&&id&&_seer.default.deleteItem("deck.gl",id)}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _toConsumableArray2=_interopRequireDefault(__webpack_require__(49)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_assert=_interopRequireDefault(__webpack_require__(20)),_core=__webpack_require__(7),_seer=_interopRequireDefault(__webpack_require__(201)),_layer=_interopRequireDefault(__webpack_require__(142)),_constants=__webpack_require__(341),_log=_interopRequireDefault(__webpack_require__(24)),_flatten=__webpack_require__(112),_probe=__webpack_require__(85),_viewport=_interopRequireDefault(__webpack_require__(47)),_seerIntegration=__webpack_require__(210),INITIAL_CONTEXT=Object.seal({layerManager:null,deck:null,gl:null,time:-1,useDevicePixels:!0,stats:null,shaderCache:null,pickingFBO:null,animationProps:null,userData:{}}),layerName=function(layer){return layer instanceof _layer.default?"".concat(layer):layer?"invalid":"null"},LayerManager=function(){function LayerManager(gl){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},deck=_ref.deck,stats=_ref.stats,_ref$viewport=_ref.viewport,viewport=void 0===_ref$viewport?null:_ref$viewport;(0,_classCallCheck2.default)(this,LayerManager),this.lastRenderedLayers=[],this.layers=[],this.context=Object.assign({},INITIAL_CONTEXT,{layerManager:this,deck:deck,gl:gl,shaderCache:gl&&new _core._ShaderCache({gl:gl,_cachePrograms:!0}),stats:stats||new _probe.Stats({id:"deck.gl"}),viewport:viewport||new _viewport.default({id:"DEFAULT-INITIAL-VIEWPORT"})}),this._needsRedraw="Initial render",this._needsUpdate=!1,this._debug=!1,this.activateViewport=this.activateViewport.bind(this),this._initSeer=this._initSeer.bind(this),this._editSeer=this._editSeer.bind(this),Object.seal(this),(0,_seerIntegration.seerInitListener)(this._initSeer),(0,_seerIntegration.layerEditListener)(this._editSeer)}return(0,_createClass2.default)(LayerManager,[{key:"finalize",value:function(){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.layers[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var layer=_step.value;this._finalizeLayer(layer)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}_seer.default.removeListener(this._initSeer),_seer.default.removeListener(this._editSeer)}},{key:"needsRedraw",value:function(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};return this._checkIfNeedsRedraw(opts)}},{key:"needsUpdate",value:function(){return this._needsUpdate}},{key:"setNeedsRedraw",value:function(reason){this._needsRedraw=this._needsRedraw||reason}},{key:"setNeedsUpdate",value:function(reason){this._needsUpdate=this._needsUpdate||reason}},{key:"getLayers",value:function(){var _ref2$layerIds=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).layerIds,layerIds=void 0===_ref2$layerIds?null:_ref2$layerIds;return layerIds?this.layers.filter(function(layer){return layerIds.find(function(layerId){return 0===layer.id.indexOf(layerId)})}):this.layers}},{key:"setProps",value:function(props){"debug"in props&&(this._debug=props.debug),"userData"in props&&(this.context.userData=props.userData),"useDevicePixels"in props&&(this.context.useDevicePixels=props.useDevicePixels),"layers"in props&&this.setLayers(props.layers)}},{key:"setLayers",value:function(newLayers){if(newLayers===this.lastRenderedLayers)return _log.default.log(3,"Ignoring layer update due to layer array not changed")(),this;this.lastRenderedLayers=newLayers,newLayers=(0,_flatten.flatten)(newLayers,{filter:Boolean});var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=newLayers[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){_step2.value.context=this.context}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}var _this$_updateLayers=this._updateLayers({oldLayers:this.layers,newLayers:newLayers}),error=_this$_updateLayers.error,generatedLayers=_this$_updateLayers.generatedLayers;if(this.layers=generatedLayers,error)throw error;return this}},{key:"updateLayers",value:function(){var animationProps=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"time"in animationProps&&(this.context.time=animationProps.time);var reason=this.needsUpdate();reason&&(this.setNeedsRedraw("updating layers: ".concat(reason)),this.setLayers((0,_toConsumableArray2.default)(this.lastRenderedLayers)))}},{key:"_checkIfNeedsRedraw",value:function(opts){var redraw=this._needsRedraw;opts.clearRedrawFlags&&(this._needsRedraw=!1);var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=this.layers[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var layerNeedsRedraw=_step3.value.getNeedsRedraw(opts);redraw=redraw||layerNeedsRedraw}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{_iteratorNormalCompletion3||null==_iterator3.return||_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}return redraw}},{key:"activateViewport",value:function(viewport){var oldViewport=this.context.viewport;if(!oldViewport||!viewport.equals(oldViewport)){_log.default.log(4,"Viewport changed",viewport)(),this.context.viewport=viewport;var _iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _step4,_iterator4=this.layers[Symbol.iterator]();!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){var layer=_step4.value;layer.setChangeFlags({viewportChanged:"Viewport changed"}),this._updateLayer(layer)}}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{_iteratorNormalCompletion4||null==_iterator4.return||_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}}return(0,_assert.default)(this.context.viewport,"LayerManager: viewport not set"),this}},{key:"_updateLayers",value:function(_ref3){var oldLayers=_ref3.oldLayers,newLayers=_ref3.newLayers,oldLayerMap={},_iteratorNormalCompletion5=!0,_didIteratorError5=!1,_iteratorError5=void 0;try{for(var _step5,_iterator5=oldLayers[Symbol.iterator]();!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=!0){var oldLayer=_step5.value;oldLayerMap[oldLayer.id]?_log.default.warn("Multiple old layers with same id ".concat(layerName(oldLayer)))():oldLayerMap[oldLayer.id]=oldLayer}}catch(err){_didIteratorError5=!0,_iteratorError5=err}finally{try{_iteratorNormalCompletion5||null==_iterator5.return||_iterator5.return()}finally{if(_didIteratorError5)throw _iteratorError5}}var generatedLayers=[],error=this._updateSublayersRecursively({newLayers:newLayers,oldLayerMap:oldLayerMap,generatedLayers:generatedLayers}),error2=this._finalizeOldLayers(oldLayerMap);return this._needsUpdate=!1,{error:error||error2,generatedLayers:generatedLayers}}},{key:"_updateSublayersRecursively",value:function(_ref4){var newLayers=_ref4.newLayers,oldLayerMap=_ref4.oldLayerMap,generatedLayers=_ref4.generatedLayers,error=null,_iteratorNormalCompletion6=!0,_didIteratorError6=!1,_iteratorError6=void 0;try{for(var _step6,_iterator6=newLayers[Symbol.iterator]();!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=!0){var newLayer=_step6.value;newLayer.context=this.context;var oldLayer=oldLayerMap[newLayer.id];null===oldLayer&&_log.default.warn("Multiple new layers with same id ".concat(layerName(newLayer)))(),oldLayerMap[newLayer.id]=null;var sublayers=null;try{if(this._debug&&oldLayer!==newLayer&&newLayer.validateProps(),oldLayer){this._transferLayerState(oldLayer,newLayer);var _err=this._updateLayer(newLayer);error=error||_err,(0,_seerIntegration.updateLayerInSeer)(newLayer)}else{var err=this._initializeLayer(newLayer);error=error||err,(0,_seerIntegration.initLayerInSeer)(newLayer)}generatedLayers.push(newLayer),sublayers=newLayer.isComposite&&newLayer.getSubLayers()}catch(err){_log.default.warn("error during matching of ".concat(layerName(newLayer)),err)(),error=error||err}if(sublayers){var _err2=this._updateSublayersRecursively({newLayers:sublayers,oldLayerMap:oldLayerMap,generatedLayers:generatedLayers});error=error||_err2}}}catch(err){_didIteratorError6=!0,_iteratorError6=err}finally{try{_iteratorNormalCompletion6||null==_iterator6.return||_iterator6.return()}finally{if(_didIteratorError6)throw _iteratorError6}}return error}},{key:"_finalizeOldLayers",value:function(oldLayerMap){var error=null;for(var layerId in oldLayerMap){var layer=oldLayerMap[layerId];layer&&(error=error||this._finalizeLayer(layer))}return error}},{key:"_initializeLayer",value:function(layer){_log.default.log(2,"initializing ".concat(layerName(layer)))();var error=null;try{layer._initialize(),layer.lifecycle=_constants.LIFECYCLE.INITIALIZED}catch(err){_log.default.warn("error while initializing ".concat(layerName(layer),"\n"),err)(),error=error||err}layer.internalState.layer=layer;var _iteratorNormalCompletion7=!0,_didIteratorError7=!1,_iteratorError7=void 0;try{for(var _step7,_iterator7=layer.getModels()[Symbol.iterator]();!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=!0){_step7.value.userData.layer=layer}}catch(err){_didIteratorError7=!0,_iteratorError7=err}finally{try{_iteratorNormalCompletion7||null==_iterator7.return||_iterator7.return()}finally{if(_didIteratorError7)throw _iteratorError7}}return error}},{key:"_transferLayerState",value:function(oldLayer,newLayer){newLayer._transferState(oldLayer),newLayer.lifecycle=_constants.LIFECYCLE.MATCHED,newLayer!==oldLayer?(_log.default.log(4,"matched ".concat(layerName(newLayer)),oldLayer,"->",newLayer)(),oldLayer.lifecycle=_constants.LIFECYCLE.AWAITING_GC):_log.default.log(4,"Matching layer is unchanged ".concat(newLayer.id))()}},{key:"_updateLayer",value:function(layer){_log.default.log(4,"updating ".concat(layer," because: ").concat(layer.printChangeFlags()))();var error=null;try{layer._update()}catch(err){_log.default.warn("error during update of ".concat(layerName(layer)),err)(),error=err}return error}},{key:"_finalizeLayer",value:function(layer){(0,_assert.default)(layer.lifecycle!==_constants.LIFECYCLE.AWAITING_FINALIZATION),layer.lifecycle=_constants.LIFECYCLE.AWAITING_FINALIZATION;var error=null;this.setNeedsRedraw("finalized ".concat(layerName(layer)));try{layer._finalize()}catch(err){_log.default.warn("error during finalization of ".concat(layerName(layer)),err)(),error=err}return layer.lifecycle=_constants.LIFECYCLE.FINALIZED,_log.default.log(2,"finalizing ".concat(layerName(layer)))(),error}},{key:"_initSeer",value:function(){this.layers.forEach(function(layer){(0,_seerIntegration.initLayerInSeer)(layer),(0,_seerIntegration.updateLayerInSeer)(layer)})}},{key:"_editSeer",value:function(payload){"edit"===payload.type&&"props"===payload.valuePath[0]&&((0,_seerIntegration.setPropOverrides)(payload.itemKey,payload.valuePath.slice(1),payload.value),this.updateLayers())}}]),LayerManager}();exports.default=LayerManager},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deepEqual=function deepEqual(a,b){if(a===b)return!0;return Object.keys(a).every(function(key){return Array.isArray(a[key])&&Array.isArray(b[key])?deepEqual(a[key],b[key]):a[key]===b[key]})}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_math=__webpack_require__(25),_assert=_interopRequireDefault(__webpack_require__(20)),defaultState={position:[0,0,0],lookAt:[0,0,0],up:[0,0,1],rotationX:0,rotationY:0,fov:50,near:1,far:100},ViewState=function(){function ViewState(opts){(0,_classCallCheck2.default)(this,ViewState);var width=opts.width,height=opts.height,_opts$position=opts.position,position=void 0===_opts$position?defaultState.position:_opts$position;(0,_assert.default)(Number.isFinite(width),"`width` must be supplied"),(0,_assert.default)(Number.isFinite(height),"`height` must be supplied"),this._viewportProps=this._applyConstraints(Object.assign({},opts,{position:new _math.Vector3(position)}))}return(0,_createClass2.default)(ViewState,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getDirection",value:function(){return new _math._SphericalCoordinates({bearing:this._viewportProps.bearing,pitch:this._viewportProps.pitch}).toVector3().normalize()}},{key:"getDirectionFromBearing",value:function(bearing){return new _math._SphericalCoordinates({bearing:bearing,pitch:90}).toVector3().normalize()}},{key:"shortestPathFrom",value:function(viewState){return this._viewportProps}},{key:"_applyConstraints",value:function(props){return props}}]),ViewState}();exports.default=ViewState},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.OrbitState=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_math=__webpack_require__(25),_controller=_interopRequireDefault(__webpack_require__(113)),_viewState=_interopRequireDefault(__webpack_require__(213)),_linearInterpolator=_interopRequireDefault(__webpack_require__(115)),_transitionManager=__webpack_require__(114),DEFAULT_STATE={orbitAxis:"Z",rotationX:0,rotationOrbit:0,fovy:50,zoom:0,target:[0,0,0],minZoom:-1/0,maxZoom:1/0},LINEAR_TRANSITION_PROPS={transitionDuration:300,transitionEasing:function(t){return t},transitionInterpolator:new _linearInterpolator.default(["target","zoom","rotationX","rotationOrbit"]),transitionInterruption:_transitionManager.TRANSITION_EVENTS.BREAK},zoom2Scale=function(zoom){return Math.pow(2,zoom)},OrbitState=function(_ViewState){function OrbitState(_ref){var _this,ViewportType=_ref.ViewportType,width=_ref.width,height=_ref.height,_ref$orbitAxis=_ref.orbitAxis,orbitAxis=void 0===_ref$orbitAxis?DEFAULT_STATE.orbitAxis:_ref$orbitAxis,_ref$rotationX=_ref.rotationX,rotationX=void 0===_ref$rotationX?DEFAULT_STATE.rotationX:_ref$rotationX,_ref$rotationOrbit=_ref.rotationOrbit,rotationOrbit=void 0===_ref$rotationOrbit?DEFAULT_STATE.rotationOrbit:_ref$rotationOrbit,_ref$target=_ref.target,target=void 0===_ref$target?DEFAULT_STATE.target:_ref$target,_ref$zoom=_ref.zoom,zoom=void 0===_ref$zoom?DEFAULT_STATE.zoom:_ref$zoom,_ref$fovy=_ref.fovy,fovy=void 0===_ref$fovy?DEFAULT_STATE.fovy:_ref$fovy,_ref$minZoom=_ref.minZoom,minZoom=void 0===_ref$minZoom?DEFAULT_STATE.minZoom:_ref$minZoom,_ref$maxZoom=_ref.maxZoom,maxZoom=void 0===_ref$maxZoom?DEFAULT_STATE.maxZoom:_ref$maxZoom,startPanPosition=_ref.startPanPosition,startTarget=_ref.startTarget,startRotationX=_ref.startRotationX,startRotationOrbit=_ref.startRotationOrbit,startZoomPosition=_ref.startZoomPosition,startZoom=_ref.startZoom;return(0,_classCallCheck2.default)(this,OrbitState),(_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(OrbitState).call(this,{width:width,height:height,orbitAxis:orbitAxis,rotationX:rotationX,rotationOrbit:rotationOrbit,target:target,fovy:fovy,zoom:zoom,minZoom:minZoom,maxZoom:maxZoom})))._interactiveState={startPanPosition:startPanPosition,startTarget:startTarget,startRotationX:startRotationX,startRotationOrbit:startRotationOrbit,startZoomPosition:startZoomPosition,startZoom:startZoom},_this.ViewportType=ViewportType,_this}return(0,_inherits2.default)(OrbitState,_ViewState),(0,_createClass2.default)(OrbitState,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(_ref2){var pos=_ref2.pos,target=this._viewportProps.target;return this._getUpdatedState({startPanPosition:pos,startTarget:target})}},{key:"pan",value:function(_ref3){var pos=_ref3.pos,_this$_interactiveSta=(_ref3.startPos,this._interactiveState),startPanPosition=_this$_interactiveSta.startPanPosition,startTarget=_this$_interactiveSta.startTarget,delta=new _math.Vector2(pos).subtract(startPanPosition);return this._getUpdatedState({target:this._calculateNewTarget({startTarget:startTarget,pixelOffset:delta})})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanPosition:null,startTarget:null})}},{key:"rotateStart",value:function(_ref4){_ref4.pos;return this._getUpdatedState({startRotationX:this._viewportProps.rotationX,startRotationOrbit:this._viewportProps.rotationOrbit})}},{key:"rotate",value:function(_ref5){var deltaScaleX=_ref5.deltaScaleX,deltaScaleY=_ref5.deltaScaleY,_this$_interactiveSta2=this._interactiveState,startRotationX=_this$_interactiveSta2.startRotationX,startRotationOrbit=_this$_interactiveSta2.startRotationOrbit;if(!Number.isFinite(startRotationX)||!Number.isFinite(startRotationOrbit))return this;var newRotationX=(0,_math.clamp)(startRotationX+180*deltaScaleY,-89.999,89.999),newRotationOrbit=(startRotationOrbit+180*deltaScaleX)%360;return this._getUpdatedState({rotationX:newRotationX,rotationOrbit:newRotationOrbit,isRotating:!0})}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}},{key:"shortestPathFrom",value:function(viewState){return Object.assign({},this._viewportProps)}},{key:"zoomStart",value:function(_ref6){var pos=_ref6.pos;return this._getUpdatedState({startZoomPosition:pos,startTarget:this._viewportProps.target,startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(_ref7){var pos=_ref7.pos,startPos=_ref7.startPos,scale=_ref7.scale,_this$_viewportProps=this._viewportProps,zoom=_this$_viewportProps.zoom,width=_this$_viewportProps.width,height=_this$_viewportProps.height,target=_this$_viewportProps.target,_this$_interactiveSta3=this._interactiveState,startZoom=_this$_interactiveSta3.startZoom,startZoomPosition=_this$_interactiveSta3.startZoomPosition,startTarget=_this$_interactiveSta3.startTarget;Number.isFinite(startZoom)||(startZoom=zoom,startTarget=target,startZoomPosition=startPos||pos);var newZoom=this._calculateNewZoom({scale:scale,startZoom:startZoom}),startScale=zoom2Scale(startZoom),newScale=zoom2Scale(newZoom),dX=(width/2-startZoomPosition[0])*(newScale/startScale-1),dY=(height/2-startZoomPosition[1])*(newScale/startScale-1);return this._getUpdatedState({zoom:newZoom,target:this._calculateNewTarget({startTarget:startTarget,zoom:newZoom,pixelOffset:[dX,dY]})})}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomPosition:null,startTarget:null,startZoom:null})}},{key:"zoomIn",value:function(){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:2})})}},{key:"zoomOut",value:function(){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:.5})})}},{key:"moveLeft",value:function(){var pixelOffset=[-50,0];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:pixelOffset})})}},{key:"moveRight",value:function(){var pixelOffset=[50,0];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:pixelOffset})})}},{key:"moveUp",value:function(){var pixelOffset=[0,-50];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:pixelOffset})})}},{key:"moveDown",value:function(){var pixelOffset=[0,50];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:pixelOffset})})}},{key:"rotateLeft",value:function(){return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit-15})}},{key:"rotateRight",value:function(){return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit+15})}},{key:"rotateUp",value:function(){return this._getUpdatedState({rotationX:this._viewportProps.rotationX-10})}},{key:"rotateDown",value:function(){return this._getUpdatedState({rotationX:this._viewportProps.rotationX+10})}},{key:"_calculateNewZoom",value:function(_ref8){var scale=_ref8.scale,startZoom=_ref8.startZoom,_this$_viewportProps2=this._viewportProps,maxZoom=_this$_viewportProps2.maxZoom,minZoom=_this$_viewportProps2.minZoom;Number.isFinite(startZoom)||(startZoom=this._viewportProps.zoom);var zoom=startZoom+Math.log2(scale);return(0,_math.clamp)(zoom,minZoom,maxZoom)}},{key:"_calculateNewTarget",value:function(_ref9){var startTarget=_ref9.startTarget,zoom=_ref9.zoom,pixelOffset=_ref9.pixelOffset,viewportProps=Object.assign({},this._viewportProps);Number.isFinite(zoom)&&(viewportProps.zoom=zoom),startTarget&&(viewportProps.target=startTarget);var viewport=new this.ViewportType(viewportProps),center=viewport.project(viewportProps.target);return viewport.unproject([center[0]-pixelOffset[0],center[1]-pixelOffset[1],center[2]])}},{key:"_getUpdatedState",value:function(newProps){return new OrbitState(Object.assign({},this._viewportProps,this._interactiveState,newProps))}},{key:"_applyConstraints",value:function(props){var maxZoom=props.maxZoom,minZoom=props.minZoom,zoom=props.zoom;return props.zoom=zoom>maxZoom?maxZoom:zoom,props.zoom=zoom<minZoom?minZoom:zoom,props}}]),OrbitState}(_viewState.default);exports.OrbitState=OrbitState;var OrbitController=function(_Controller){function OrbitController(props){return(0,_classCallCheck2.default)(this,OrbitController),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(OrbitController).call(this,OrbitState,props))}return(0,_inherits2.default)(OrbitController,_Controller),(0,_createClass2.default)(OrbitController,[{key:"_getTransitionProps",value:function(){return LINEAR_TRANSITION_PROPS}}]),OrbitController}(_controller.default);exports.default=OrbitController},function(module,exports){function _typeof2(obj){return(_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _typeof(obj){return"function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?module.exports=_typeof=function(obj){return _typeof2(obj)}:module.exports=_typeof=function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)},_typeof(obj)}module.exports=_typeof},function(module,exports,__webpack_require__){"use strict";(function(Buffer){var _interopRequireDefault=__webpack_require__(21);Object.defineProperty(exports,"__esModule",{value:!0}),exports.toArrayBuffer=toArrayBuffer,exports.blobToArrayBuffer=function(blob){return new Promise(function(resolve,reject){var arrayBuffer,fileReader=new FileReader;fileReader.onload=function(event){arrayBuffer=event.target.result},fileReader.onloadend=function(event){return resolve(arrayBuffer)},fileReader.onerror=reject,fileReader.readAsArrayBuffer(blob)})},exports.toDataView=function(buffer){return new DataView(toArrayBuffer(buffer))},exports.isBuffer=exports.isBlob=exports.isArrayBuffer=void 0;var _assert=_interopRequireDefault(__webpack_require__(73)),_textEncoding=__webpack_require__(116),isArrayBuffer=function(x){return x&&x instanceof ArrayBuffer};exports.isArrayBuffer=isArrayBuffer;exports.isBlob=function(x){return x&&"undefined"!=typeof Blob&&x instanceof Blob};var isBuffer=function(x){return x&&x instanceof Buffer};function toArrayBuffer(data){if(isArrayBuffer(data))return data;if(isBuffer(data))return new Uint8Array(data).buffer;if(ArrayBuffer.isView(data))return data.buffer;if("string"==typeof data){var text=data;return(new _textEncoding.TextEncoder).encode(text).buffer}return(0,_assert.default)(!1)}exports.isBuffer=isBuffer}).call(this,__webpack_require__(72).Buffer)},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(21);Object.defineProperty(exports,"__esModule",{value:!0}),exports.getStreamIterator=function(stream){if("function"==typeof stream[Symbol.asyncIterator])return stream;if("function"==typeof stream.getIterator)return stream.getIterator();return _globals.isBrowser?function(_x){return _makeBrowserStreamIterator.apply(this,arguments)}(stream):function(_x2){return _makeNodeStreamIterator.apply(this,arguments)}(stream)},exports.concatenateReadStream=function(readStream){var arrayBuffer=new ArrayBuffer,string="";return new Promise(function(resolve,reject){readStream.data(function(chunk){"string"==typeof chunk?string+=chunk:arrayBuffer=(0,_memoryCopyUtils.concatenateArrayBuffers)(arrayBuffer,chunk)}),readStream.on("error",function(error){return reject(error)}),readStream.on("end",function(){readStream.complete?resolve(arrayBuffer||string):reject("The connection was terminated while the message was still being sent")})})};var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(52)),_regenerator=_interopRequireDefault(__webpack_require__(51)),_awaitAsyncGenerator2=_interopRequireDefault(__webpack_require__(368)),_wrapAsyncGenerator2=_interopRequireDefault(__webpack_require__(370)),_globals=__webpack_require__(144),_memoryCopyUtils=__webpack_require__(218);function _makeBrowserStreamIterator(){return(_makeBrowserStreamIterator=(0,_wrapAsyncGenerator2.default)(_regenerator.default.mark(function _callee(stream){var reader,_ref,done,value;return _regenerator.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:reader=stream.getReader(),_context.prev=1;case 2:return _context.next=5,(0,_awaitAsyncGenerator2.default)(reader.read());case 5:if(_ref=_context.sent,done=_ref.done,value=_ref.value,!done){_context.next=10;break}return _context.abrupt("return");case 10:return _context.next=12,value;case 12:_context.next=2;break;case 14:return _context.prev=14,reader.releaseLock(),_context.finish(14);case 17:case"end":return _context.stop()}},_callee,null,[[1,,14,17]])}))).apply(this,arguments)}function _makeNodeStreamIterator(){return(_makeNodeStreamIterator=(0,_wrapAsyncGenerator2.default)(_regenerator.default.mark(function _callee2(stream){var data;return _regenerator.default.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,(0,_awaitAsyncGenerator2.default)(stream);case 2:stream=_context2.sent;case 3:if(null===(data=stream.read())){_context2.next=9;break}return _context2.next=8,data;case 8:return _context2.abrupt("continue",3);case 9:if(!stream._readableState.ended){_context2.next=11;break}return _context2.abrupt("return");case 11:return _context2.next=13,(0,_awaitAsyncGenerator2.default)(onceReadable(stream));case 13:_context2.next=3;break;case 15:case"end":return _context2.stop()}},_callee2)}))).apply(this,arguments)}function onceReadable(_x3){return _onceReadable.apply(this,arguments)}function _onceReadable(){return(_onceReadable=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee3(stream){return _regenerator.default.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.abrupt("return",new Promise(function(resolve){stream.once("readable",resolve)}));case 1:case"end":return _context3.stop()}},_callee3)}))).apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";function padTo4Bytes(byteLength){return byteLength+3&-4}Object.defineProperty(exports,"__esModule",{value:!0}),exports.padTo4Bytes=padTo4Bytes,exports.copyArrayBuffer=function(targetBuffer,sourceBuffer,byteOffset){var byteLength=arguments.length>3&&void 0!==arguments[3]?arguments[3]:sourceBuffer.byteLength,targetArray=new Uint8Array(targetBuffer,byteOffset,byteLength),sourceArray=new Uint8Array(sourceBuffer);return targetArray.set(sourceArray),targetBuffer},exports.copyToArray=function(source,target,targetOffset){var sourceArray;if(source instanceof ArrayBuffer)sourceArray=new Uint8Array(source);else{var srcByteOffset=source.byteOffset,srcByteLength=source.byteLength;sourceArray=new Uint8Array(source.buffer,srcByteOffset,srcByteLength)}return target.set(sourceArray,targetOffset),targetOffset+padTo4Bytes(sourceArray.byteLength)},exports.concatenateArrayBuffers=function(source1,source2){var sourceArray1=source1 instanceof ArrayBuffer?new Uint8Array(source1):source1,sourceArray2=source2 instanceof ArrayBuffer?new Uint8Array(source2):source2,temp=new Uint8Array(sourceArray1.byteLength+sourceArray2.byteLength);return temp.set(sourceArray1,0),temp.set(sourceArray2,sourceArray1.byteLength),temp}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.registerLoaders=function(loaders){loaders=Array.isArray(loaders)?loaders:[loaders];var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=loaders[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var loader=_step.value;(0,_normalizeLoader.normalizeLoader)(loader);var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=loader.extensions[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var extension=_step2.value;registeredLoaders[extension]=loader}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}},exports.getRegisteredLoaders=function(){return Object.values(registeredLoaders)};var _normalizeLoader=__webpack_require__(145),registeredLoaders={}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_get2=_interopRequireDefault(__webpack_require__(16)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_core=__webpack_require__(15),_core2=__webpack_require__(7),_pathTesselator=_interopRequireDefault(__webpack_require__(828)),_pathLayerVertex=_interopRequireDefault(__webpack_require__(829)),_pathLayerVertex2=_interopRequireDefault(__webpack_require__(830)),_pathLayerFragment=_interopRequireDefault(__webpack_require__(831)),DEFAULT_COLOR=[0,0,0,255],defaultProps={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},rounded:!1,miterLimit:{type:"number",min:0,value:4},fp64:!1,dashJustified:!1,getPath:{type:"accessor",value:function(object){return object.path}},getColor:{type:"accessor",value:DEFAULT_COLOR},getWidth:{type:"accessor",value:1},getDashArray:{type:"accessor",value:[0,0]}},ATTRIBUTE_TRANSITION={enter:function(value,chunk){return chunk.length?chunk.subarray(chunk.length-value.length):value}},PathLayer=function(_Layer){function PathLayer(){return(0,_classCallCheck2.default)(this,PathLayer),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(PathLayer).apply(this,arguments))}return(0,_inherits2.default)(PathLayer,_Layer),(0,_createClass2.default)(PathLayer,[{key:"getShaders",value:function(){return this.use64bitProjection()?{vs:_pathLayerVertex2.default,fs:_pathLayerFragment.default,modules:["project64","picking"]}:{vs:_pathLayerVertex.default,fs:_pathLayerFragment.default,modules:["picking"]}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instanceStartPositions:{size:3,transition:ATTRIBUTE_TRANSITION,accessor:"getPath",update:this.calculateStartPositions,noAlloc:!0},instanceEndPositions:{size:3,transition:ATTRIBUTE_TRANSITION,accessor:"getPath",update:this.calculateEndPositions,noAlloc:!0},instanceStartEndPositions64xyLow:{size:4,update:this.calculateInstanceStartEndPositions64xyLow,noAlloc:!0},instanceLeftDeltas:{size:3,update:this.calculateLeftDeltas,noAlloc:!0},instanceRightDeltas:{size:3,update:this.calculateRightDeltas,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:ATTRIBUTE_TRANSITION,update:this.calculateStrokeWidths,defaultValue:1},instanceDashArrays:{size:2,accessor:"getDashArray",update:this.calculateDashArrays},instanceColors:{size:4,type:5121,accessor:"getColor",transition:ATTRIBUTE_TRANSITION,update:this.calculateColors,defaultValue:DEFAULT_COLOR},instancePickingColors:{size:3,type:5121,update:this.calculatePickingColors}}),this.setState({pathTesselator:new _pathTesselator.default({})})}},{key:"updateState",value:function(_ref){var oldProps=_ref.oldProps,props=_ref.props,changeFlags=_ref.changeFlags;(0,_get2.default)((0,_getPrototypeOf2.default)(PathLayer.prototype),"updateState",this).call(this,{props:props,oldProps:oldProps,changeFlags:changeFlags});var attributeManager=this.getAttributeManager();if((changeFlags.dataChanged||props.fp64!==oldProps.fp64||changeFlags.updateTriggersChanged&&(changeFlags.updateTriggersChanged.all||changeFlags.updateTriggersChanged.getPath))&&(this.state.pathTesselator.updateGeometry({data:props.data,getGeometry:props.getPath,positionFormat:props.positionFormat,fp64:this.use64bitPositions()}),this.setState({numInstances:this.state.pathTesselator.instanceCount}),attributeManager.invalidateAll()),props.fp64!==oldProps.fp64){var gl=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(gl)}),attributeManager.invalidateAll()}}},{key:"draw",value:function(_ref2){var uniforms=_ref2.uniforms,viewport=this.context.viewport,_this$props=this.props,rounded=_this$props.rounded,miterLimit=_this$props.miterLimit,widthUnits=_this$props.widthUnits,widthScale=_this$props.widthScale,widthMinPixels=_this$props.widthMinPixels,widthMaxPixels=_this$props.widthMaxPixels,dashJustified=_this$props.dashJustified,widthMultiplier="pixels"===widthUnits?viewport.distanceScales.metersPerPixel[2]:1;this.state.model.setUniforms(Object.assign({},uniforms,{jointType:Number(rounded),alignMode:Number(dashJustified),widthScale:widthScale*widthMultiplier,miterLimit:miterLimit,widthMinPixels:widthMinPixels,widthMaxPixels:widthMaxPixels})).draw()}},{key:"_getModel",value:function(gl){return new _core2.Model(gl,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new _core2.Geometry({drawMode:4,attributes:{indices:new Uint16Array([0,2,1,1,2,4,1,4,3,3,4,5]),positions:new Float32Array([0,0,1,0,-1,0,0,1,0,1,-1,0,1,1,0,1,0,1])}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateStartPositions",value:function(attribute){var pathTesselator=this.state.pathTesselator;attribute.bufferLayout=pathTesselator.bufferLayout,attribute.value=pathTesselator.get("startPositions")}},{key:"calculateEndPositions",value:function(attribute){var pathTesselator=this.state.pathTesselator;attribute.bufferLayout=pathTesselator.bufferLayout,attribute.value=pathTesselator.get("endPositions")}},{key:"calculateInstanceStartEndPositions64xyLow",value:function(attribute){var isFP64=this.use64bitPositions();attribute.constant=!isFP64,attribute.value=isFP64?this.state.pathTesselator.get("startEndPositions64XyLow"):new Float32Array(4)}},{key:"calculateLeftDeltas",value:function(attribute){var pathTesselator=this.state.pathTesselator;attribute.value=pathTesselator.get("leftDeltas")}},{key:"calculateRightDeltas",value:function(attribute){var pathTesselator=this.state.pathTesselator;attribute.value=pathTesselator.get("rightDeltas")}},{key:"calculateStrokeWidths",value:function(attribute){var getWidth=this.props.getWidth,pathTesselator=this.state.pathTesselator;attribute.bufferLayout=pathTesselator.bufferLayout,attribute.value=pathTesselator.get("strokeWidths",attribute.value,getWidth)}},{key:"calculateDashArrays",value:function(attribute){var getDashArray=this.props.getDashArray,pathTesselator=this.state.pathTesselator;attribute.value=pathTesselator.get("dashArrays",attribute.value,getDashArray)}},{key:"calculateColors",value:function(attribute){var getColor=this.props.getColor,pathTesselator=this.state.pathTesselator;attribute.bufferLayout=pathTesselator.bufferLayout,attribute.value=pathTesselator.get("colors",attribute.value,getColor)}},{key:"calculatePickingColors",value:function(attribute){var pathTesselator=this.state.pathTesselator;attribute.value=pathTesselator.get("pickingColors",attribute.value,this.encodePickingColor)}},{key:"clearPickingColor",value:function(color){for(var pickedPathIndex=this.decodePickingColor(color),bufferLayout=this.state.pathTesselator.bufferLayout,numVertices=bufferLayout[pickedPathIndex],startInstanceIndex=0,pathIndex=0;pathIndex<pickedPathIndex;pathIndex++)startInstanceIndex+=bufferLayout[pathIndex];var instancePickingColors=this.getAttributeManager().attributes.instancePickingColors,value=instancePickingColors.value,endInstanceIndex=startInstanceIndex+numVertices;value.fill(0,3*startInstanceIndex,3*endInstanceIndex),instancePickingColors.update({value:value})}}]),PathLayer}(_core.Layer);exports.default=PathLayer,PathLayer.layerName="PathLayer",PathLayer.defaultProps=defaultProps},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_get2=_interopRequireDefault(__webpack_require__(16)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_core=__webpack_require__(15),_core2=__webpack_require__(7),_polygonTesselator=_interopRequireDefault(__webpack_require__(833)),_solidPolygonLayerVertexTop=_interopRequireDefault(__webpack_require__(835)),_solidPolygonLayerVertexSide=_interopRequireDefault(__webpack_require__(836)),_solidPolygonLayerFragment=_interopRequireDefault(__webpack_require__(837)),DEFAULT_COLOR=[0,0,0,255],defaultMaterial=new _core2.PhongMaterial,defaultProps={filled:!0,extruded:!1,wireframe:!1,fp64:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:function(f){return f.polygon}},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:DEFAULT_COLOR},getLineColor:{type:"accessor",value:DEFAULT_COLOR},material:defaultMaterial},ATTRIBUTE_TRANSITION={enter:function(value,chunk){return chunk.length?chunk.subarray(chunk.length-value.length):value}},SolidPolygonLayer=function(_Layer){function SolidPolygonLayer(){return(0,_classCallCheck2.default)(this,SolidPolygonLayer),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(SolidPolygonLayer).apply(this,arguments))}return(0,_inherits2.default)(SolidPolygonLayer,_Layer),(0,_createClass2.default)(SolidPolygonLayer,[{key:"getShaders",value:function(vs){var projectModule=this.use64bitProjection()?"project64":"project32";return{vs:vs,fs:_solidPolygonLayerFragment.default,modules:[projectModule,"gouraud-lighting","picking"]}}},{key:"initializeState",value:function(){var gl=this.context.gl;this.setState({numInstances:0,polygonTesselator:new _polygonTesselator.default({IndexType:!gl||(0,_core2.hasFeature)(gl,_core2.FEATURES.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});var attributeManager=this.getAttributeManager();attributeManager.remove(["instancePickingColors"]),attributeManager.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:!0},positions:{size:3,transition:ATTRIBUTE_TRANSITION,accessor:"getPolygon",update:this.calculatePositions,shaderAttributes:{positions:{offset:0,divisor:0},instancePositions:{offset:0,divisor:1},nextPositions:{offset:12,divisor:1}}},positions64xyLow:{size:2,update:this.calculatePositionsLow,shaderAttributes:{positions64xyLow:{offset:0,divisor:0},instancePositions64xyLow:{offset:0,divisor:1},nextPositions64xyLow:{offset:8,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:!0},elevations:{size:1,transition:ATTRIBUTE_TRANSITION,accessor:"getElevation",update:this.calculateElevations,shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{alias:"colors",size:4,type:5121,transition:ATTRIBUTE_TRANSITION,accessor:"getFillColor",update:this.calculateFillColors,defaultValue:DEFAULT_COLOR,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{alias:"colors",size:4,type:5121,transition:ATTRIBUTE_TRANSITION,accessor:"getLineColor",update:this.calculateLineColors,defaultValue:DEFAULT_COLOR,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,update:this.calculatePickingColors,shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}},{key:"draw",value:function(_ref){var uniforms=_ref.uniforms,_this$props=this.props,extruded=_this$props.extruded,filled=_this$props.filled,wireframe=_this$props.wireframe,elevationScale=_this$props.elevationScale,_this$state=this.state,topModel=_this$state.topModel,sideModel=_this$state.sideModel,polygonTesselator=_this$state.polygonTesselator,renderUniforms=Object.assign({},uniforms,{extruded:Boolean(extruded),elevationScale:elevationScale});sideModel&&(sideModel.setInstanceCount(polygonTesselator.instanceCount-1),sideModel.setUniforms(renderUniforms),wireframe&&(sideModel.setDrawMode(3),sideModel.setUniforms({isWireframe:!0}).draw()),filled&&(sideModel.setDrawMode(6),sideModel.setUniforms({isWireframe:!1}).draw())),topModel&&(topModel.setVertexCount(polygonTesselator.get("indices").length),topModel.setUniforms(renderUniforms).draw())}},{key:"updateState",value:function(updateParams){(0,_get2.default)((0,_getPrototypeOf2.default)(SolidPolygonLayer.prototype),"updateState",this).call(this,updateParams),this.updateGeometry(updateParams);var props=updateParams.props,oldProps=updateParams.oldProps,attributeManager=this.getAttributeManager();(props.fp64!==oldProps.fp64||props.filled!==oldProps.filled||props.extruded!==oldProps.extruded)&&(this.state.models&&this.state.models.forEach(function(model){return model.delete()}),this.setState(this._getModels(this.context.gl)),attributeManager.invalidateAll())}},{key:"updateGeometry",value:function(_ref2){var props=_ref2.props,oldProps=_ref2.oldProps,changeFlags=_ref2.changeFlags;if(changeFlags.dataChanged||props.fp64!==oldProps.fp64||changeFlags.updateTriggersChanged&&(changeFlags.updateTriggersChanged.all||changeFlags.updateTriggersChanged.getPolygon)){var polygonTesselator=this.state.polygonTesselator;polygonTesselator.updateGeometry({data:props.data,getGeometry:props.getPolygon,positionFormat:props.positionFormat,fp64:this.use64bitPositions()}),this.setState({numInstances:polygonTesselator.instanceCount}),this.getAttributeManager().invalidateAll()}}},{key:"_getModels",value:function(gl){var topModel,sideModel,_this$props2=this.props,id=_this$props2.id,filled=_this$props2.filled,extruded=_this$props2.extruded;return filled&&(topModel=new _core2.Model(gl,Object.assign({},this.getShaders(_solidPolygonLayerVertexTop.default),{id:"".concat(id,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0,shaderCache:this.context.shaderCache}))),extruded&&((sideModel=new _core2.Model(gl,Object.assign({},this.getShaders(_solidPolygonLayerVertexSide.default),{id:"".concat(id,"-side"),geometry:new _core2.Geometry({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,1,0,1,0,0,1,0])}}}),instanceCount:0,isInstanced:1,shaderCache:this.context.shaderCache}))).userData.excludeAttributes={indices:!0}),{models:[sideModel,topModel].filter(Boolean),topModel:topModel,sideModel:sideModel}}},{key:"calculateIndices",value:function(attribute){var polygonTesselator=this.state.polygonTesselator;attribute.bufferLayout=polygonTesselator.indexLayout,attribute.value=polygonTesselator.get("indices")}},{key:"calculatePositions",value:function(attribute){var polygonTesselator=this.state.polygonTesselator;attribute.bufferLayout=polygonTesselator.bufferLayout,attribute.value=polygonTesselator.get("positions")}},{key:"calculatePositionsLow",value:function(attribute){var isFP64=this.use64bitPositions();attribute.constant=!isFP64,attribute.value=isFP64?this.state.polygonTesselator.get("positions64xyLow"):new Float32Array(2)}},{key:"calculateVertexValid",value:function(attribute){attribute.value=this.state.polygonTesselator.get("vertexValid")}},{key:"calculateElevations",value:function(attribute){var polygonTesselator=this.state.polygonTesselator;attribute.bufferLayout=polygonTesselator.bufferLayout;var _this$props3=this.props,extruded=_this$props3.extruded,getElevation=_this$props3.getElevation;extruded?(attribute.constant=!1,attribute.value=polygonTesselator.get("elevations",attribute.value,getElevation)):(attribute.constant=!0,attribute.value=new Float32Array(1))}},{key:"calculateFillColors",value:function(attribute){var polygonTesselator=this.state.polygonTesselator;attribute.bufferLayout=polygonTesselator.bufferLayout,attribute.value=polygonTesselator.get("colors",attribute.value,this.props.getFillColor)}},{key:"calculateLineColors",value:function(attribute){var polygonTesselator=this.state.polygonTesselator;attribute.bufferLayout=polygonTesselator.bufferLayout,attribute.value=polygonTesselator.get("colors",attribute.value,this.props.getLineColor)}},{key:"calculatePickingColors",value:function(attribute){var polygonTesselator=this.state.polygonTesselator;attribute.value=polygonTesselator.get("pickingColors",attribute.value,this.encodePickingColor)}},{key:"clearPickingColor",value:function(color){for(var pickedPolygonIndex=this.decodePickingColor(color),bufferLayout=this.state.polygonTesselator.bufferLayout,numVertices=bufferLayout[pickedPolygonIndex],startInstanceIndex=0,polygonIndex=0;polygonIndex<pickedPolygonIndex;polygonIndex++)startInstanceIndex+=bufferLayout[polygonIndex];var pickingColors=this.getAttributeManager().attributes.pickingColors,value=pickingColors.value,endInstanceIndex=startInstanceIndex+numVertices;value.fill(0,3*startInstanceIndex,3*endInstanceIndex),pickingColors.update({value:value})}}]),SolidPolygonLayer}(_core.Layer);exports.default=SolidPolygonLayer,SolidPolygonLayer.layerName="SolidPolygonLayer",SolidPolygonLayer.defaultProps=defaultProps},function(module,exports){module.exports={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,FUNC_ADD:32774,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,BLEND_COLOR:32773,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,VENDOR:7936,RENDERER:7937,VERSION:7938,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,BROWSER_DEFAULT_WEBGL:37444,STATIC_DRAW:35044,STREAM_DRAW:35040,DYNAMIC_DRAW:35048,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,CULL_FACE:2884,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,BLEND:3042,DEPTH_TEST:2929,DITHER:3024,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,SCISSOR_TEST:3089,STENCIL_TEST:2960,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CONTEXT_LOST_WEBGL:37442,CW:2304,CCW:2305,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,COMPILE_STATUS:35713,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_ATTRIBUTES:35721,ACTIVE_UNIFORMS:35718,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,ALWAYS:519,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,GEQUAL:518,NOTEQUAL:517,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,TEXTURE_WIDTH:4096,TEXTURE_HEIGHT:4097,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,MAX_3D_TEXTURE_SIZE:32883,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,MAX_TEXTURE_LOD_BIAS:34045,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,RASTERIZER_DISCARD:35977,VERTEX_ARRAY_BINDING:34229,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,MAX_ELEMENT_INDEX:36203,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,RGB9_E5:35901,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2UI:36975,TEXTURE_IMMUTABLE_FORMAT:37167,TEXTURE_IMMUTABLE_LEVELS:33503,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,UNSIGNED_INT_24_8:34042,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,INT_2_10_10_10_REV:36255,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,MAX_SAMPLES:36183,SAMPLER_BINDING:35097,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,UNSIGNED_NORMALIZED:35863,SIGNED_NORMALIZED:36764,VERTEX_ATTRIB_ARRAY_INTEGER:35069,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,DEPTH24_STENCIL8:35056,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,COLOR:6144,DEPTH:6145,STENCIL:6146,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,INVALID_INDEX:4294967295,TIMEOUT_IGNORED:-1,MAX_CLIENT_WAIT_TIMEOUT_WEBGL:37447,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,UNMASKED_VENDOR_WEBGL:37445,UNMASKED_RENDERER_WEBGL:37446,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,TEXTURE_MAX_ANISOTROPY_EXT:34046,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35986,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,UNSIGNED_INT_24_8_WEBGL:34042,HALF_FLOAT_OES:36193,RGBA32F_EXT:34836,RGB32F_EXT:34837,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,UNSIGNED_NORMALIZED_EXT:35863,MIN_EXT:32775,MAX_EXT:32776,SRGB_EXT:35904,SRGB_ALPHA_EXT:35906,SRGB8_ALPHA8_EXT:35907,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067,COLOR_ATTACHMENT4_WEBGL:36068,COLOR_ATTACHMENT5_WEBGL:36069,COLOR_ATTACHMENT6_WEBGL:36070,COLOR_ATTACHMENT7_WEBGL:36071,COLOR_ATTACHMENT8_WEBGL:36072,COLOR_ATTACHMENT9_WEBGL:36073,COLOR_ATTACHMENT10_WEBGL:36074,COLOR_ATTACHMENT11_WEBGL:36075,COLOR_ATTACHMENT12_WEBGL:36076,COLOR_ATTACHMENT13_WEBGL:36077,COLOR_ATTACHMENT14_WEBGL:36078,COLOR_ATTACHMENT15_WEBGL:36079,DRAW_BUFFER0_WEBGL:34853,DRAW_BUFFER1_WEBGL:34854,DRAW_BUFFER2_WEBGL:34855,DRAW_BUFFER3_WEBGL:34856,DRAW_BUFFER4_WEBGL:34857,DRAW_BUFFER5_WEBGL:34858,DRAW_BUFFER6_WEBGL:34859,DRAW_BUFFER7_WEBGL:34860,DRAW_BUFFER8_WEBGL:34861,DRAW_BUFFER9_WEBGL:34862,DRAW_BUFFER10_WEBGL:34863,DRAW_BUFFER11_WEBGL:34864,DRAW_BUFFER12_WEBGL:34865,DRAW_BUFFER13_WEBGL:34866,DRAW_BUFFER14_WEBGL:34867,DRAW_BUFFER15_WEBGL:34868,MAX_COLOR_ATTACHMENTS_WEBGL:36063,MAX_DRAW_BUFFERS_WEBGL:34852,VERTEX_ARRAY_BINDING_OES:34229,QUERY_COUNTER_BITS_EXT:34916,CURRENT_QUERY_EXT:34917,QUERY_RESULT_EXT:34918,QUERY_RESULT_AVAILABLE_EXT:34919,TIME_ELAPSED_EXT:35007,TIMESTAMP_EXT:36392,GPU_DISJOINT_EXT:36795}},function(module,exports,__webpack_require__){!function(exports,d3Color){"use strict";function basis(t1,v0,v1,v2,v3){var t2=t1*t1,t3=t2*t1;return((1-3*t1+3*t2-t3)*v0+(4-6*t2+3*t3)*v1+(1+3*t1+3*t2-3*t3)*v2+t3*v3)/6}function basis$1(values){var n=values.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,n-1):Math.floor(t*n),v1=values[i],v2=values[i+1],v0=i>0?values[i-1]:2*v1-v2,v3=i<n-1?values[i+2]:2*v2-v1;return basis((t-i/n)*n,v0,v1,v2,v3)}}function basisClosed(values){var n=values.length;return function(t){var i=Math.floor(((t%=1)<0?++t:t)*n),v0=values[(i+n-1)%n],v1=values[i%n],v2=values[(i+1)%n],v3=values[(i+2)%n];return basis((t-i/n)*n,v0,v1,v2,v3)}}function constant(x){return function(){return x}}function linear(a,d){return function(t){return a+t*d}}function hue(a,b){var d=b-a;return d?linear(a,d>180||d<-180?d-360*Math.round(d/360):d):constant(isNaN(a)?b:a)}function gamma(y){return 1==(y=+y)?nogamma:function(a,b){return b-a?function(a,b,y){return a=Math.pow(a,y),b=Math.pow(b,y)-a,y=1/y,function(t){return Math.pow(a+t*b,y)}}(a,b,y):constant(isNaN(a)?b:a)}}function nogamma(a,b){var d=b-a;return d?linear(a,d):constant(isNaN(a)?b:a)}var rgb=function rgbGamma(y){var color=gamma(y);function rgb(start,end){var r=color((start=d3Color.rgb(start)).r,(end=d3Color.rgb(end)).r),g=color(start.g,end.g),b=color(start.b,end.b),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.r=r(t),start.g=g(t),start.b=b(t),start.opacity=opacity(t),start+""}}return rgb.gamma=rgbGamma,rgb}(1);function rgbSpline(spline){return function(colors){var i,color,n=colors.length,r=new Array(n),g=new Array(n),b=new Array(n);for(i=0;i<n;++i)color=d3Color.rgb(colors[i]),r[i]=color.r||0,g[i]=color.g||0,b[i]=color.b||0;return r=spline(r),g=spline(g),b=spline(b),color.opacity=1,function(t){return color.r=r(t),color.g=g(t),color.b=b(t),color+""}}}var rgbBasis=rgbSpline(basis$1),rgbBasisClosed=rgbSpline(basisClosed);function array(a,b){var i,nb=b?b.length:0,na=a?Math.min(nb,a.length):0,x=new Array(na),c=new Array(nb);for(i=0;i<na;++i)x[i]=value(a[i],b[i]);for(;i<nb;++i)c[i]=b[i];return function(t){for(i=0;i<na;++i)c[i]=x[i](t);return c}}function date(a,b){var d=new Date;return b-=a=+a,function(t){return d.setTime(a+b*t),d}}function number(a,b){return b-=a=+a,function(t){return a+b*t}}function object(a,b){var k,i={},c={};for(k in null!==a&&"object"==typeof a||(a={}),null!==b&&"object"==typeof b||(b={}),b)k in a?i[k]=value(a[k],b[k]):c[k]=b[k];return function(t){for(k in i)c[k]=i[k](t);return c}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function string(a,b){var am,bm,bs,bi=reA.lastIndex=reB.lastIndex=0,i=-1,s=[],q=[];for(a+="",b+="";(am=reA.exec(a))&&(bm=reB.exec(b));)(bs=bm.index)>bi&&(bs=b.slice(bi,bs),s[i]?s[i]+=bs:s[++i]=bs),(am=am[0])===(bm=bm[0])?s[i]?s[i]+=bm:s[++i]=bm:(s[++i]=null,q.push({i:i,x:number(am,bm)})),bi=reB.lastIndex;return bi<b.length&&(bs=b.slice(bi),s[i]?s[i]+=bs:s[++i]=bs),s.length<2?q[0]?function(b){return function(t){return b(t)+""}}(q[0].x):function(b){return function(){return b}}(b):(b=q.length,function(t){for(var o,i=0;i<b;++i)s[(o=q[i]).i]=o.x(t);return s.join("")})}function value(a,b){var c,t=typeof b;return null==b||"boolean"===t?constant(b):("number"===t?number:"string"===t?(c=d3Color.color(b))?(b=c,rgb):string:b instanceof d3Color.color?rgb:b instanceof Date?date:Array.isArray(b)?array:"function"!=typeof b.valueOf&&"function"!=typeof b.toString||isNaN(b)?object:number)(a,b)}var cssNode,cssRoot,cssView,svgNode,degrees=180/Math.PI,identity={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(a,b,c,d,e,f){var scaleX,scaleY,skewX;return(scaleX=Math.sqrt(a*a+b*b))&&(a/=scaleX,b/=scaleX),(skewX=a*c+b*d)&&(c-=a*skewX,d-=b*skewX),(scaleY=Math.sqrt(c*c+d*d))&&(c/=scaleY,d/=scaleY,skewX/=scaleY),a*d<b*c&&(a=-a,b=-b,skewX=-skewX,scaleX=-scaleX),{translateX:e,translateY:f,rotate:Math.atan2(b,a)*degrees,skewX:Math.atan(skewX)*degrees,scaleX:scaleX,scaleY:scaleY}}function interpolateTransform(parse,pxComma,pxParen,degParen){function pop(s){return s.length?s.pop()+" ":""}return function(a,b){var s=[],q=[];return a=parse(a),b=parse(b),function(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push("translate(",null,pxComma,null,pxParen);q.push({i:i-4,x:number(xa,xb)},{i:i-2,x:number(ya,yb)})}else(xb||yb)&&s.push("translate("+xb+pxComma+yb+pxParen)}(a.translateX,a.translateY,b.translateX,b.translateY,s,q),function(a,b,s,q){a!==b?(a-b>180?b+=360:b-a>180&&(a+=360),q.push({i:s.push(pop(s)+"rotate(",null,degParen)-2,x:number(a,b)})):b&&s.push(pop(s)+"rotate("+b+degParen)}(a.rotate,b.rotate,s,q),function(a,b,s,q){a!==b?q.push({i:s.push(pop(s)+"skewX(",null,degParen)-2,x:number(a,b)}):b&&s.push(pop(s)+"skewX("+b+degParen)}(a.skewX,b.skewX,s,q),function(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push(pop(s)+"scale(",null,",",null,")");q.push({i:i-4,x:number(xa,xb)},{i:i-2,x:number(ya,yb)})}else 1===xb&&1===yb||s.push(pop(s)+"scale("+xb+","+yb+")")}(a.scaleX,a.scaleY,b.scaleX,b.scaleY,s,q),a=b=null,function(t){for(var o,i=-1,n=q.length;++i<n;)s[(o=q[i]).i]=o.x(t);return s.join("")}}}var interpolateTransformCss=interpolateTransform(function(value){return"none"===value?identity:(cssNode||(cssNode=document.createElement("DIV"),cssRoot=document.documentElement,cssView=document.defaultView),cssNode.style.transform=value,value=cssView.getComputedStyle(cssRoot.appendChild(cssNode),null).getPropertyValue("transform"),cssRoot.removeChild(cssNode),decompose(+(value=value.slice(7,-1).split(","))[0],+value[1],+value[2],+value[3],+value[4],+value[5]))},"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(function(value){return null==value?identity:(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",value),(value=svgNode.transform.baseVal.consolidate())?decompose((value=value.matrix).a,value.b,value.c,value.d,value.e,value.f):identity)},", ",")",")"),rho=Math.SQRT2,rho2=2,rho4=4,epsilon2=1e-12;function cosh(x){return((x=Math.exp(x))+1/x)/2}function hsl(hue$$1){return function(start,end){var h=hue$$1((start=d3Color.hsl(start)).h,(end=d3Color.hsl(end)).h),s=nogamma(start.s,end.s),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.h=h(t),start.s=s(t),start.l=l(t),start.opacity=opacity(t),start+""}}}var hsl$1=hsl(hue),hslLong=hsl(nogamma);function hcl(hue$$1){return function(start,end){var h=hue$$1((start=d3Color.hcl(start)).h,(end=d3Color.hcl(end)).h),c=nogamma(start.c,end.c),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.h=h(t),start.c=c(t),start.l=l(t),start.opacity=opacity(t),start+""}}}var hcl$1=hcl(hue),hclLong=hcl(nogamma);function cubehelix(hue$$1){return function cubehelixGamma(y){function cubehelix(start,end){var h=hue$$1((start=d3Color.cubehelix(start)).h,(end=d3Color.cubehelix(end)).h),s=nogamma(start.s,end.s),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.h=h(t),start.s=s(t),start.l=l(Math.pow(t,y)),start.opacity=opacity(t),start+""}}return y=+y,cubehelix.gamma=cubehelixGamma,cubehelix}(1)}var cubehelix$1=cubehelix(hue),cubehelixLong=cubehelix(nogamma);exports.interpolate=value,exports.interpolateArray=array,exports.interpolateBasis=basis$1,exports.interpolateBasisClosed=basisClosed,exports.interpolateDate=date,exports.interpolateDiscrete=function(range){var n=range.length;return function(t){return range[Math.max(0,Math.min(n-1,Math.floor(t*n)))]}},exports.interpolateHue=function(a,b){var i=hue(+a,+b);return function(t){var x=i(t);return x-360*Math.floor(x/360)}},exports.interpolateNumber=number,exports.interpolateObject=object,exports.interpolateRound=function(a,b){return b-=a=+a,function(t){return Math.round(a+b*t)}},exports.interpolateString=string,exports.interpolateTransformCss=interpolateTransformCss,exports.interpolateTransformSvg=interpolateTransformSvg,exports.interpolateZoom=function(p0,p1){var i,S,ux0=p0[0],uy0=p0[1],w0=p0[2],ux1=p1[0],uy1=p1[1],w1=p1[2],dx=ux1-ux0,dy=uy1-uy0,d2=dx*dx+dy*dy;if(d2<epsilon2)S=Math.log(w1/w0)/rho,i=function(t){return[ux0+t*dx,uy0+t*dy,w0*Math.exp(rho*t*S)]};else{var d1=Math.sqrt(d2),b0=(w1*w1-w0*w0+rho4*d2)/(2*w0*rho2*d1),b1=(w1*w1-w0*w0-rho4*d2)/(2*w1*rho2*d1),r0=Math.log(Math.sqrt(b0*b0+1)-b0),r1=Math.log(Math.sqrt(b1*b1+1)-b1);S=(r1-r0)/rho,i=function(t){var x,s=t*S,coshr0=cosh(r0),u=w0/(rho2*d1)*(coshr0*(x=rho*s+r0,((x=Math.exp(2*x))-1)/(x+1))-function(x){return((x=Math.exp(x))-1/x)/2}(r0));return[ux0+u*dx,uy0+u*dy,w0*coshr0/cosh(rho*s+r0)]}}return i.duration=1e3*S,i},exports.interpolateRgb=rgb,exports.interpolateRgbBasis=rgbBasis,exports.interpolateRgbBasisClosed=rgbBasisClosed,exports.interpolateHsl=hsl$1,exports.interpolateHslLong=hslLong,exports.interpolateLab=function(start,end){var l=nogamma((start=d3Color.lab(start)).l,(end=d3Color.lab(end)).l),a=nogamma(start.a,end.a),b=nogamma(start.b,end.b),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.l=l(t),start.a=a(t),start.b=b(t),start.opacity=opacity(t),start+""}},exports.interpolateHcl=hcl$1,exports.interpolateHclLong=hclLong,exports.interpolateCubehelix=cubehelix$1,exports.interpolateCubehelixLong=cubehelixLong,exports.piecewise=function(interpolate,values){for(var i=0,n=values.length-1,v=values[0],I=new Array(n<0?0:n);i<n;)I[i]=interpolate(v,v=values[++i]);return function(t){var i=Math.max(0,Math.min(n-1,Math.floor(t*=n)));return I[i](t-i)}},exports.quantize=function(interpolator,n){for(var samples=new Array(n),i=0;i<n;++i)samples[i]=interpolator(i/(n-1));return samples},Object.defineProperty(exports,"__esModule",{value:!0})}(exports,__webpack_require__(224))},function(module,exports,__webpack_require__){!function(exports){"use strict";function define(constructor,factory,prototype){constructor.prototype=factory.prototype=prototype,prototype.constructor=constructor}function extend(parent,definition){var prototype=Object.create(parent.prototype);for(var key in definition)prototype[key]=definition[key];return prototype}function Color(){}var brighter=1/.7,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex3=/^#([0-9a-f]{3})$/,reHex6=/^#([0-9a-f]{6})$/,reRgbInteger=new RegExp("^rgb\\("+[reI,reI,reI]+"\\)$"),reRgbPercent=new RegExp("^rgb\\("+[reP,reP,reP]+"\\)$"),reRgbaInteger=new RegExp("^rgba\\("+[reI,reI,reI,reN]+"\\)$"),reRgbaPercent=new RegExp("^rgba\\("+[reP,reP,reP,reN]+"\\)$"),reHslPercent=new RegExp("^hsl\\("+[reN,reP,reP]+"\\)$"),reHslaPercent=new RegExp("^hsla\\("+[reN,reP,reP,reN]+"\\)$"),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function color(format){var m;return format=(format+"").trim().toLowerCase(),(m=reHex3.exec(format))?new Rgb((m=parseInt(m[1],16))>>8&15|m>>4&240,m>>4&15|240&m,(15&m)<<4|15&m,1):(m=reHex6.exec(format))?rgbn(parseInt(m[1],16)):(m=reRgbInteger.exec(format))?new Rgb(m[1],m[2],m[3],1):(m=reRgbPercent.exec(format))?new Rgb(255*m[1]/100,255*m[2]/100,255*m[3]/100,1):(m=reRgbaInteger.exec(format))?rgba(m[1],m[2],m[3],m[4]):(m=reRgbaPercent.exec(format))?rgba(255*m[1]/100,255*m[2]/100,255*m[3]/100,m[4]):(m=reHslPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,1):(m=reHslaPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,m[4]):named.hasOwnProperty(format)?rgbn(named[format]):"transparent"===format?new Rgb(NaN,NaN,NaN,0):null}function rgbn(n){return new Rgb(n>>16&255,n>>8&255,255&n,1)}function rgba(r,g,b,a){return a<=0&&(r=g=b=NaN),new Rgb(r,g,b,a)}function rgbConvert(o){return o instanceof Color||(o=color(o)),o?new Rgb((o=o.rgb()).r,o.g,o.b,o.opacity):new Rgb}function rgb(r,g,b,opacity){return 1===arguments.length?rgbConvert(r):new Rgb(r,g,b,null==opacity?1:opacity)}function Rgb(r,g,b,opacity){this.r=+r,this.g=+g,this.b=+b,this.opacity=+opacity}function hex(value){return((value=Math.max(0,Math.min(255,Math.round(value)||0)))<16?"0":"")+value.toString(16)}function hsla(h,s,l,a){return a<=0?h=s=l=NaN:l<=0||l>=1?h=s=NaN:s<=0&&(h=NaN),new Hsl(h,s,l,a)}function hsl(h,s,l,opacity){return 1===arguments.length?function(o){if(o instanceof Hsl)return new Hsl(o.h,o.s,o.l,o.opacity);if(o instanceof Color||(o=color(o)),!o)return new Hsl;if(o instanceof Hsl)return o;var r=(o=o.rgb()).r/255,g=o.g/255,b=o.b/255,min=Math.min(r,g,b),max=Math.max(r,g,b),h=NaN,s=max-min,l=(max+min)/2;return s?(h=r===max?(g-b)/s+6*(g<b):g===max?(b-r)/s+2:(r-g)/s+4,s/=l<.5?max+min:2-max-min,h*=60):s=l>0&&l<1?0:h,new Hsl(h,s,l,o.opacity)}(h):new Hsl(h,s,l,null==opacity?1:opacity)}function Hsl(h,s,l,opacity){this.h=+h,this.s=+s,this.l=+l,this.opacity=+opacity}function hsl2rgb(h,m1,m2){return 255*(h<60?m1+(m2-m1)*h/60:h<180?m2:h<240?m1+(m2-m1)*(240-h)/60:m1)}define(Color,color,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),define(Rgb,rgb,extend(Color,{brighter:function(k){return k=null==k?brighter:Math.pow(brighter,k),new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},darker:function(k){return k=null==k?.7:Math.pow(.7,k),new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+hex(this.r)+hex(this.g)+hex(this.b)},toString:function(){var a=this.opacity;return(1===(a=isNaN(a)?1:Math.max(0,Math.min(1,a)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===a?")":", "+a+")")}})),define(Hsl,hsl,extend(Color,{brighter:function(k){return k=null==k?brighter:Math.pow(brighter,k),new Hsl(this.h,this.s,this.l*k,this.opacity)},darker:function(k){return k=null==k?.7:Math.pow(.7,k),new Hsl(this.h,this.s,this.l*k,this.opacity)},rgb:function(){var h=this.h%360+360*(this.h<0),s=isNaN(h)||isNaN(this.s)?0:this.s,l=this.l,m2=l+(l<.5?l:1-l)*s,m1=2*l-m2;return new Rgb(hsl2rgb(h>=240?h-240:h+120,m1,m2),hsl2rgb(h,m1,m2),hsl2rgb(h<120?h+240:h-120,m1,m2),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var deg2rad=Math.PI/180,rad2deg=180/Math.PI,Xn=.96422,Yn=1,Zn=.82521,t0=4/29,t1=6/29,t2=3*t1*t1,t3=t1*t1*t1;function labConvert(o){if(o instanceof Lab)return new Lab(o.l,o.a,o.b,o.opacity);if(o instanceof Hcl){if(isNaN(o.h))return new Lab(o.l,0,0,o.opacity);var h=o.h*deg2rad;return new Lab(o.l,Math.cos(h)*o.c,Math.sin(h)*o.c,o.opacity)}o instanceof Rgb||(o=rgbConvert(o));var x,z,r=rgb2lrgb(o.r),g=rgb2lrgb(o.g),b=rgb2lrgb(o.b),y=xyz2lab((.2225045*r+.7168786*g+.0606169*b)/Yn);return r===g&&g===b?x=z=y:(x=xyz2lab((.4360747*r+.3850649*g+.1430804*b)/Xn),z=xyz2lab((.0139322*r+.0971045*g+.7141733*b)/Zn)),new Lab(116*y-16,500*(x-y),200*(y-z),o.opacity)}function lab(l,a,b,opacity){return 1===arguments.length?labConvert(l):new Lab(l,a,b,null==opacity?1:opacity)}function Lab(l,a,b,opacity){this.l=+l,this.a=+a,this.b=+b,this.opacity=+opacity}function xyz2lab(t){return t>t3?Math.pow(t,1/3):t/t2+t0}function lab2xyz(t){return t>t1?t*t*t:t2*(t-t0)}function lrgb2rgb(x){return 255*(x<=.0031308?12.92*x:1.055*Math.pow(x,1/2.4)-.055)}function rgb2lrgb(x){return(x/=255)<=.04045?x/12.92:Math.pow((x+.055)/1.055,2.4)}function hclConvert(o){if(o instanceof Hcl)return new Hcl(o.h,o.c,o.l,o.opacity);if(o instanceof Lab||(o=labConvert(o)),0===o.a&&0===o.b)return new Hcl(NaN,0,o.l,o.opacity);var h=Math.atan2(o.b,o.a)*rad2deg;return new Hcl(h<0?h+360:h,Math.sqrt(o.a*o.a+o.b*o.b),o.l,o.opacity)}function hcl(h,c,l,opacity){return 1===arguments.length?hclConvert(h):new Hcl(h,c,l,null==opacity?1:opacity)}function Hcl(h,c,l,opacity){this.h=+h,this.c=+c,this.l=+l,this.opacity=+opacity}define(Lab,lab,extend(Color,{brighter:function(k){return new Lab(this.l+18*(null==k?1:k),this.a,this.b,this.opacity)},darker:function(k){return new Lab(this.l-18*(null==k?1:k),this.a,this.b,this.opacity)},rgb:function(){var y=(this.l+16)/116,x=isNaN(this.a)?y:y+this.a/500,z=isNaN(this.b)?y:y-this.b/200;return x=Xn*lab2xyz(x),y=Yn*lab2xyz(y),z=Zn*lab2xyz(z),new Rgb(lrgb2rgb(3.1338561*x-1.6168667*y-.4906146*z),lrgb2rgb(-.9787684*x+1.9161415*y+.033454*z),lrgb2rgb(.0719453*x-.2289914*y+1.4052427*z),this.opacity)}})),define(Hcl,hcl,extend(Color,{brighter:function(k){return new Hcl(this.h,this.c,this.l+18*(null==k?1:k),this.opacity)},darker:function(k){return new Hcl(this.h,this.c,this.l-18*(null==k?1:k),this.opacity)},rgb:function(){return labConvert(this).rgb()}}));var A=-.14861,B=1.78277,C=-.29227,D=-.90649,E=1.97294,ED=E*D,EB=E*B,BC_DA=B*C-D*A;function cubehelix(h,s,l,opacity){return 1===arguments.length?function(o){if(o instanceof Cubehelix)return new Cubehelix(o.h,o.s,o.l,o.opacity);o instanceof Rgb||(o=rgbConvert(o));var r=o.r/255,g=o.g/255,b=o.b/255,l=(BC_DA*b+ED*r-EB*g)/(BC_DA+ED-EB),bl=b-l,k=(E*(g-l)-C*bl)/D,s=Math.sqrt(k*k+bl*bl)/(E*l*(1-l)),h=s?Math.atan2(k,bl)*rad2deg-120:NaN;return new Cubehelix(h<0?h+360:h,s,l,o.opacity)}(h):new Cubehelix(h,s,l,null==opacity?1:opacity)}function Cubehelix(h,s,l,opacity){this.h=+h,this.s=+s,this.l=+l,this.opacity=+opacity}define(Cubehelix,cubehelix,extend(Color,{brighter:function(k){return k=null==k?brighter:Math.pow(brighter,k),new Cubehelix(this.h,this.s,this.l*k,this.opacity)},darker:function(k){return k=null==k?.7:Math.pow(.7,k),new Cubehelix(this.h,this.s,this.l*k,this.opacity)},rgb:function(){var h=isNaN(this.h)?0:(this.h+120)*deg2rad,l=+this.l,a=isNaN(this.s)?0:this.s*l*(1-l),cosh=Math.cos(h),sinh=Math.sin(h);return new Rgb(255*(l+a*(A*cosh+B*sinh)),255*(l+a*(C*cosh+D*sinh)),255*(l+a*(E*cosh)),this.opacity)}})),exports.color=color,exports.rgb=rgb,exports.hsl=hsl,exports.lab=lab,exports.hcl=hcl,exports.lch=function(l,c,h,opacity){return 1===arguments.length?hclConvert(l):new Hcl(h,c,l,null==opacity?1:opacity)},exports.gray=function(l,opacity){return new Lab(l,0,0,null==opacity?1:opacity)},exports.cubehelix=cubehelix,Object.defineProperty(exports,"__esModule",{value:!0})}(exports)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isFeatureCollection=function(locations){return"FeatureCollection"===locations.type},function(PickingType){PickingType.LOCATION="location",PickingType.FLOW="flow",PickingType.LOCATION_AREA="location-area"}(exports.PickingType||(exports.PickingType={}))},function(module,exports,__webpack_require__){"use strict";(function(global){Object.defineProperty(exports,"__esModule",{value:!0}),exports.document=exports.global=exports.window=void 0;var window_="undefined"!=typeof window?window:global;exports.window=window_;var global_=void 0!==global?global:window;exports.global=global_;var document_="undefined"!=typeof document?document:{};exports.document=document_}).call(this,__webpack_require__(17))},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return _mapboxGl.default}});var _mapboxGl=_interopRequireDefault(__webpack_require__(878))},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_defineProperty2=_interopRequireDefault(__webpack_require__(6)),_mathUtils=__webpack_require__(147),_assert=_interopRequireDefault(__webpack_require__(117)),TransitionInterpolator=function(){function TransitionInterpolator(){(0,_classCallCheck2.default)(this,TransitionInterpolator),(0,_defineProperty2.default)(this,"propNames",[])}return(0,_createClass2.default)(TransitionInterpolator,[{key:"arePropsEqual",value:function(currentProps,nextProps){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=(this.propNames||[])[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var key=_step.value;if(!(0,_mathUtils.equals)(currentProps[key],nextProps[key]))return!1}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return!0}},{key:"initializeProps",value:function(startProps,endProps){return{start:startProps,end:endProps}}},{key:"interpolateProps",value:function(startProps,endProps,t){(0,_assert.default)(!1,"interpolateProps is not implemented")}}]),TransitionInterpolator}();exports.default=TransitionInterpolator},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(9),_interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.LINEAR_TRANSITION_PROPS=void 0;var _slicedToArray2=_interopRequireDefault(__webpack_require__(11)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_defineProperty2=_interopRequireDefault(__webpack_require__(6)),_mapState=_interopRequireDefault(__webpack_require__(74)),_transition=__webpack_require__(146),_transitionManager=_interopRequireWildcard(__webpack_require__(149)),NO_TRANSITION_PROPS={transitionDuration:0},LINEAR_TRANSITION_PROPS={transitionDuration:300,transitionEasing:function(t){return t},transitionInterpolator:new _transition.LinearInterpolator,transitionInterruption:_transitionManager.TRANSITION_EVENTS.BREAK};exports.LINEAR_TRANSITION_PROPS=LINEAR_TRANSITION_PROPS;var EVENT_TYPES_WHEEL=["wheel"],EVENT_TYPES_PAN=["panstart","panmove","panend"],EVENT_TYPES_PINCH=["pinchstart","pinchmove","pinchend"],EVENT_TYPES_DOUBLE_TAP=["doubletap"],EVENT_TYPES_KEYBOARD=["keydown"],MapController=function(){function MapController(){var _this=this;(0,_classCallCheck2.default)(this,MapController),(0,_defineProperty2.default)(this,"events",[]),(0,_defineProperty2.default)(this,"mapState",void 0),(0,_defineProperty2.default)(this,"onViewportChange",void 0),(0,_defineProperty2.default)(this,"onStateChange",void 0),(0,_defineProperty2.default)(this,"mapStateProps",void 0),(0,_defineProperty2.default)(this,"eventManager",void 0),(0,_defineProperty2.default)(this,"scrollZoom",!0),(0,_defineProperty2.default)(this,"dragPan",!0),(0,_defineProperty2.default)(this,"dragRotate",!0),(0,_defineProperty2.default)(this,"doubleClickZoom",!0),(0,_defineProperty2.default)(this,"touchZoom",!0),(0,_defineProperty2.default)(this,"touchRotate",!1),(0,_defineProperty2.default)(this,"keyboard",!0),(0,_defineProperty2.default)(this,"_state",{isDragging:!1}),(0,_defineProperty2.default)(this,"_events",{}),(0,_defineProperty2.default)(this,"_transitionManager",new _transitionManager.default),(0,_defineProperty2.default)(this,"setState",function(newState){Object.assign(_this._state,newState),_this.onStateChange&&_this.onStateChange(_this._state)}),this.handleEvent=this.handleEvent.bind(this)}return(0,_createClass2.default)(MapController,[{key:"handleEvent",value:function(event){switch(this.mapState=this.getMapState(),event.type){case"panstart":return this._onPanStart(event);case"panmove":return this._onPan(event);case"panend":return this._onPanEnd(event);case"pinchstart":return this._onPinchStart(event);case"pinchmove":return this._onPinch(event);case"pinchend":return this._onPinchEnd(event);case"doubletap":return this._onDoubleTap(event);case"wheel":return this._onWheel(event);case"keydown":return this._onKeyDown(event);default:return!1}}},{key:"getCenter",value:function(event){var _event$offsetCenter=event.offsetCenter;return[_event$offsetCenter.x,_event$offsetCenter.y]}},{key:"isFunctionKeyPressed",value:function(event){var srcEvent=event.srcEvent;return Boolean(srcEvent.metaKey||srcEvent.altKey||srcEvent.ctrlKey||srcEvent.shiftKey)}},{key:"updateViewport",value:function(newMapState){var extraProps=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},extraState=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},oldViewport=this.mapState?this.mapState.getViewportProps():{},newViewport=Object.assign({},newMapState.getViewportProps(),extraProps);Object.keys(newViewport).some(function(key){return oldViewport[key]!==newViewport[key]})&&this.onViewportChange(newViewport,extraState,oldViewport),this.setState(Object.assign({},newMapState.getInteractiveState(),extraState))}},{key:"getMapState",value:function(overrides){return new _mapState.default(Object.assign({},this.mapStateProps,this._state,overrides))}},{key:"setOptions",value:function(options){var onViewportChange=options.onViewportChange,onStateChange=options.onStateChange,_options$eventManager=options.eventManager,eventManager=void 0===_options$eventManager?this.eventManager:_options$eventManager,_options$isInteractiv=options.isInteractive,isInteractive=void 0===_options$isInteractiv||_options$isInteractiv,_options$scrollZoom=options.scrollZoom,scrollZoom=void 0===_options$scrollZoom?this.scrollZoom:_options$scrollZoom,_options$dragPan=options.dragPan,dragPan=void 0===_options$dragPan?this.dragPan:_options$dragPan,_options$dragRotate=options.dragRotate,dragRotate=void 0===_options$dragRotate?this.dragRotate:_options$dragRotate,_options$doubleClickZ=options.doubleClickZoom,doubleClickZoom=void 0===_options$doubleClickZ?this.doubleClickZoom:_options$doubleClickZ,_options$touchZoom=options.touchZoom,touchZoom=void 0===_options$touchZoom?this.touchZoom:_options$touchZoom,_options$touchRotate=options.touchRotate,touchRotate=void 0===_options$touchRotate?this.touchRotate:_options$touchRotate,_options$keyboard=options.keyboard,keyboard=void 0===_options$keyboard?this.keyboard:_options$keyboard;this.onViewportChange=onViewportChange,this.onStateChange=onStateChange,this.mapStateProps&&this.mapStateProps.height===options.height||this.updateViewport(new _mapState.default(options)),this.mapStateProps=options,this._transitionManager.processViewportChange(Object.assign({},options,{onStateChange:this.setState})),this.eventManager!==eventManager&&(this.eventManager=eventManager,this._events={},this.toggleEvents(this.events,!0)),this.toggleEvents(EVENT_TYPES_WHEEL,isInteractive&&scrollZoom),this.toggleEvents(EVENT_TYPES_PAN,isInteractive&&(dragPan||dragRotate)),this.toggleEvents(EVENT_TYPES_PINCH,isInteractive&&(touchZoom||touchRotate)),this.toggleEvents(EVENT_TYPES_DOUBLE_TAP,isInteractive&&doubleClickZoom),this.toggleEvents(EVENT_TYPES_KEYBOARD,isInteractive&&keyboard),this.scrollZoom=scrollZoom,this.dragPan=dragPan,this.dragRotate=dragRotate,this.doubleClickZoom=doubleClickZoom,this.touchZoom=touchZoom,this.touchRotate=touchRotate,this.keyboard=keyboard}},{key:"toggleEvents",value:function(eventNames,enabled){var _this2=this;this.eventManager&&eventNames.forEach(function(eventName){_this2._events[eventName]!==enabled&&(_this2._events[eventName]=enabled,enabled?_this2.eventManager.on(eventName,_this2.handleEvent):_this2.eventManager.off(eventName,_this2.handleEvent))})}},{key:"_onPanStart",value:function(event){var pos=this.getCenter(event),newMapState=this.mapState.panStart({pos:pos}).rotateStart({pos:pos});return this.updateViewport(newMapState,NO_TRANSITION_PROPS,{isDragging:!0}),!0}},{key:"_onPan",value:function(event){return this.isFunctionKeyPressed(event)||event.rightButton?this._onPanRotate(event):this._onPanMove(event)}},{key:"_onPanEnd",value:function(event){var newMapState=this.mapState.panEnd().rotateEnd();return this.updateViewport(newMapState,null,{isDragging:!1,isPanning:!1,isRotating:!1}),!0}},{key:"_onPanMove",value:function(event){if(!this.dragPan)return!1;var pos=this.getCenter(event),newMapState=this.mapState.pan({pos:pos});return this.updateViewport(newMapState,NO_TRANSITION_PROPS,{isPanning:!0}),!0}},{key:"_onPanRotate",value:function(event){if(!this.dragRotate)return!1;var deltaX=event.deltaX,deltaY=event.deltaY,_this$getCenter=this.getCenter(event),centerY=(0,_slicedToArray2.default)(_this$getCenter,2)[1],startY=centerY-deltaY,_this$mapState$getVie=this.mapState.getViewportProps(),width=_this$mapState$getVie.width,height=_this$mapState$getVie.height,deltaScaleX=deltaX/width,deltaScaleY=0;deltaY>0?Math.abs(height-startY)>5&&(deltaScaleY=deltaY/(startY-height)*1.2):deltaY<0&&startY>5&&(deltaScaleY=1-centerY/startY),deltaScaleY=Math.min(1,Math.max(-1,deltaScaleY));var newMapState=this.mapState.rotate({deltaScaleX:deltaScaleX,deltaScaleY:deltaScaleY});return this.updateViewport(newMapState,NO_TRANSITION_PROPS,{isRotating:!0}),!0}},{key:"_onWheel",value:function(event){if(!this.scrollZoom)return!1;event.preventDefault();var pos=this.getCenter(event),delta=event.delta,scale=2/(1+Math.exp(-Math.abs(.01*delta)));delta<0&&0!==scale&&(scale=1/scale);var newMapState=this.mapState.zoom({pos:pos,scale:scale});return this.updateViewport(newMapState,NO_TRANSITION_PROPS,{isZooming:!0}),this.setState({isZooming:!1}),!0}},{key:"_onPinchStart",value:function(event){var pos=this.getCenter(event),newMapState=this.mapState.zoomStart({pos:pos}).rotateStart({pos:pos});return this._state.startPinchRotation=event.rotation,this.updateViewport(newMapState,NO_TRANSITION_PROPS,{isDragging:!0}),!0}},{key:"_onPinch",value:function(event){if(!this.touchZoom&&!this.touchRotate)return!1;var newMapState=this.mapState;if(this.touchZoom){var scale=event.scale,pos=this.getCenter(event);newMapState=newMapState.zoom({pos:pos,scale:scale})}if(this.touchRotate){var rotation=event.rotation,startPinchRotation=this._state.startPinchRotation;newMapState=newMapState.rotate({deltaScaleX:-(rotation-startPinchRotation)/180})}return this.updateViewport(newMapState,NO_TRANSITION_PROPS,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),!0}},{key:"_onPinchEnd",value:function(event){var newMapState=this.mapState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(newMapState,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1}),!0}},{key:"_onDoubleTap",value:function(event){if(!this.doubleClickZoom)return!1;var pos=this.getCenter(event),isZoomOut=this.isFunctionKeyPressed(event),newMapState=this.mapState.zoom({pos:pos,scale:isZoomOut?.5:2});return this.updateViewport(newMapState,Object.assign({},LINEAR_TRANSITION_PROPS,{transitionInterpolator:new _transition.LinearInterpolator({around:pos})})),!0}},{key:"_onKeyDown",value:function(event){if(!this.keyboard)return!1;var newMapState,funcKey=this.isFunctionKeyPressed(event),mapStateProps=this.mapStateProps;switch(event.srcEvent.keyCode){case 189:newMapState=funcKey?this.getMapState({zoom:mapStateProps.zoom-2}):this.getMapState({zoom:mapStateProps.zoom-1});break;case 187:newMapState=funcKey?this.getMapState({zoom:mapStateProps.zoom+2}):this.getMapState({zoom:mapStateProps.zoom+1});break;case 37:newMapState=funcKey?this.getMapState({bearing:mapStateProps.bearing-15}):this.mapState.pan({pos:[100,0],startPos:[0,0]});break;case 39:newMapState=funcKey?this.getMapState({bearing:mapStateProps.bearing+15}):this.mapState.pan({pos:[-100,0],startPos:[0,0]});break;case 38:newMapState=funcKey?this.getMapState({pitch:mapStateProps.pitch+10}):this.mapState.pan({pos:[0,100],startPos:[0,0]});break;case 40:newMapState=funcKey?this.getMapState({pitch:mapStateProps.pitch-10}):this.mapState.pan({pos:[0,-100],startPos:[0,0]});break;default:return!1}return this.updateViewport(newMapState,LINEAR_TRANSITION_PROPS)}}]),MapController}();exports.default=MapController},,,function(module,exports){!function(global){"use strict";var undefined,Op=Object.prototype,hasOwn=Op.hasOwnProperty,$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag",inModule="object"==typeof module,runtime=global.regeneratorRuntime;if(runtime)inModule&&(module.exports=runtime);else{(runtime=global.regeneratorRuntime=inModule?module.exports:{}).wrap=wrap;var GenStateSuspendedStart="suspendedStart",GenStateSuspendedYield="suspendedYield",GenStateExecuting="executing",GenStateCompleted="completed",ContinueSentinel={},IteratorPrototype={};IteratorPrototype[iteratorSymbol]=function(){return this};var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);GeneratorFunction.prototype=Gp.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunctionPrototype[toStringTagSymbol]=GeneratorFunction.displayName="GeneratorFunction",runtime.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},runtime.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,toStringTagSymbol in genFun||(genFun[toStringTagSymbol]="GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},runtime.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),AsyncIterator.prototype[asyncIteratorSymbol]=function(){return this},runtime.AsyncIterator=AsyncIterator,runtime.async=function(innerFn,outerFn,self,tryLocsList){var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList));return runtime.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next()})},defineIteratorMethods(Gp),Gp[toStringTagSymbol]="Generator",Gp[iteratorSymbol]=function(){return this},Gp.toString=function(){return"[object Generator]"},runtime.keys=function(object){var keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},runtime.values=values,Context.prototype={constructor:Context,reset:function(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=undefined)},stop:function(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=undefined),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=undefined),ContinueSentinel}}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return generator._invoke=function(innerFn,self,context){var state=GenStateSuspendedStart;return function(method,arg){if(state===GenStateExecuting)throw new Error("Generator is already running");if(state===GenStateCompleted){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if(state===GenStateSuspendedStart)throw state=GenStateCompleted,context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state=GenStateExecuting;var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?GenStateCompleted:GenStateSuspendedYield,record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state=GenStateCompleted,context.method="throw",context.arg=record.arg)}}}(innerFn,self,context),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}function defineIteratorMethods(prototype){["next","throw","return"].forEach(function(method){prototype[method]=function(arg){return this._invoke(method,arg)}})}function AsyncIterator(generator){var previousPromise;this._invoke=function(method,arg){function callInvokeWithMethodAndArg(){return new Promise(function(resolve,reject){!function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?Promise.resolve(value.__await).then(function(value){invoke("next",value,resolve,reject)},function(err){invoke("throw",err,resolve,reject)}):Promise.resolve(value).then(function(unwrapped){result.value=unwrapped,resolve(result)},function(error){return invoke("throw",error,resolve,reject)})}reject(record.arg)}(method,arg,resolve,reject)})}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(method===undefined){if(context.delegate=null,"throw"===context.method){if(delegate.iterator.return&&(context.method="return",context.arg=undefined,maybeInvokeDelegate(delegate,context),"throw"===context.method))return ContinueSentinel;context.method="throw",context.arg=new TypeError("The iterator does not provide a 'throw' method")}return ContinueSentinel}var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=undefined),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=undefined,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:undefined,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},function(module,exports){module.exports="string"==typeof function(){}.name},function(module,exports){module.exports=function(value){return null===value||"function"!=typeof value&&"object"!=typeof value}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(76),$TypeError=GetIntrinsic("%TypeError%"),$SyntaxError=GetIntrinsic("%SyntaxError%"),has=__webpack_require__(75),predicates={"Property Descriptor":function(ES,Desc){if("Object"!==ES.Type(Desc))return!1;var allowed={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var key in Desc)if(has(Desc,key)&&!allowed[key])return!1;var isData=has(Desc,"[[Value]]"),IsAccessor=has(Desc,"[[Get]]")||has(Desc,"[[Set]]");if(isData&&IsAccessor)throw new $TypeError("Property Descriptors may not be both accessor and data descriptors");return!0}};module.exports=function(ES,recordType,argumentName,value){var predicate=predicates[recordType];if("function"!=typeof predicate)throw new $SyntaxError("unknown record type: "+recordType);if(!predicate(ES,value))throw new $TypeError(argumentName+" must be a "+recordType);console.log(predicate(ES,value),value)}},function(module,exports){module.exports=Number.isNaN||function(a){return a!=a}},function(module,exports){var $isNaN=Number.isNaN||function(a){return a!=a};module.exports=Number.isFinite||function(x){return"number"==typeof x&&!$isNaN(x)&&x!==1/0&&x!==-1/0}},function(module,exports){module.exports=function(number){return number>=0?1:-1}},function(module,exports){module.exports=function(number,modulo){var remain=number%modulo;return Math.floor(remain>=0?remain:remain+modulo)}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(76),$Object=GetIntrinsic("%Object%"),$TypeError=GetIntrinsic("%TypeError%"),$String=GetIntrinsic("%String%"),assertRecord=__webpack_require__(235),$isNaN=__webpack_require__(236),$isFinite=__webpack_require__(237),sign=__webpack_require__(238),mod=__webpack_require__(239),IsCallable=__webpack_require__(119),toPrimitive=__webpack_require__(425),has=__webpack_require__(75),ES5={ToPrimitive:toPrimitive,ToBoolean:function(value){return!!value},ToNumber:function(value){return+value},ToInteger:function(value){var number=this.ToNumber(value);return $isNaN(number)?0:0!==number&&$isFinite(number)?sign(number)*Math.floor(Math.abs(number)):number},ToInt32:function(x){return this.ToNumber(x)>>0},ToUint32:function(x){return this.ToNumber(x)>>>0},ToUint16:function(value){var number=this.ToNumber(value);if($isNaN(number)||0===number||!$isFinite(number))return 0;var posInt=sign(number)*Math.floor(Math.abs(number));return mod(posInt,65536)},ToString:function(value){return $String(value)},ToObject:function(value){return this.CheckObjectCoercible(value),$Object(value)},CheckObjectCoercible:function(value,optMessage){if(null==value)throw new $TypeError(optMessage||"Cannot call method on "+value);return value},IsCallable:IsCallable,SameValue:function(x,y){return x===y?0!==x||1/x==1/y:$isNaN(x)&&$isNaN(y)},Type:function(x){return null===x?"Null":void 0===x?"Undefined":"function"==typeof x||"object"==typeof x?"Object":"number"==typeof x?"Number":"boolean"==typeof x?"Boolean":"string"==typeof x?"String":void 0},IsPropertyDescriptor:function(Desc){if("Object"!==this.Type(Desc))return!1;var allowed={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var key in Desc)if(has(Desc,key)&&!allowed[key])return!1;var isData=has(Desc,"[[Value]]"),IsAccessor=has(Desc,"[[Get]]")||has(Desc,"[[Set]]");if(isData&&IsAccessor)throw new $TypeError("Property Descriptors may not be both accessor and data descriptors");return!0},IsAccessorDescriptor:function(Desc){return void 0!==Desc&&(assertRecord(this,"Property Descriptor","Desc",Desc),!(!has(Desc,"[[Get]]")&&!has(Desc,"[[Set]]")))},IsDataDescriptor:function(Desc){return void 0!==Desc&&(assertRecord(this,"Property Descriptor","Desc",Desc),!(!has(Desc,"[[Value]]")&&!has(Desc,"[[Writable]]")))},IsGenericDescriptor:function(Desc){return void 0!==Desc&&(assertRecord(this,"Property Descriptor","Desc",Desc),!this.IsAccessorDescriptor(Desc)&&!this.IsDataDescriptor(Desc))},FromPropertyDescriptor:function(Desc){if(void 0===Desc)return Desc;if(assertRecord(this,"Property Descriptor","Desc",Desc),this.IsDataDescriptor(Desc))return{value:Desc["[[Value]]"],writable:!!Desc["[[Writable]]"],enumerable:!!Desc["[[Enumerable]]"],configurable:!!Desc["[[Configurable]]"]};if(this.IsAccessorDescriptor(Desc))return{get:Desc["[[Get]]"],set:Desc["[[Set]]"],enumerable:!!Desc["[[Enumerable]]"],configurable:!!Desc["[[Configurable]]"]};throw new $TypeError("FromPropertyDescriptor must be called with a fully populated Property Descriptor")},ToPropertyDescriptor:function(Obj){if("Object"!==this.Type(Obj))throw new $TypeError("ToPropertyDescriptor requires an object");var desc={};if(has(Obj,"enumerable")&&(desc["[[Enumerable]]"]=this.ToBoolean(Obj.enumerable)),has(Obj,"configurable")&&(desc["[[Configurable]]"]=this.ToBoolean(Obj.configurable)),has(Obj,"value")&&(desc["[[Value]]"]=Obj.value),has(Obj,"writable")&&(desc["[[Writable]]"]=this.ToBoolean(Obj.writable)),has(Obj,"get")){var getter=Obj.get;if(void 0!==getter&&!this.IsCallable(getter))throw new TypeError("getter must be a function");desc["[[Get]]"]=getter}if(has(Obj,"set")){var setter=Obj.set;if(void 0!==setter&&!this.IsCallable(setter))throw new $TypeError("setter must be a function");desc["[[Set]]"]=setter}if((has(desc,"[[Get]]")||has(desc,"[[Set]]"))&&(has(desc,"[[Value]]")||has(desc,"[[Writable]]")))throw new $TypeError("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return desc}};module.exports=ES5},function(module,exports,__webpack_require__){"use strict";module.exports=function(array,callback){for(var i=0;i<array.length;i+=1)callback(array[i],i,array)}},function(module,exports,__webpack_require__){"use strict";var getInferredName;try{getInferredName=Function("s","return { [s]() {} }[s].name;")}catch(e){}module.exports=getInferredName&&"inferred"===function(){}.name?getInferredName:null},function(module,exports,__webpack_require__){"use strict";var ES=__webpack_require__(155),flagsGetter=__webpack_require__(466),RegExpStringIterator=__webpack_require__(468),OrigRegExp=RegExp,regexMatchAll=function(string){var R=this;if("Object"!==ES.Type(R))throw new TypeError('"this" value must be an Object');var S=ES.ToString(string),tmp=function(C,R){var matcher,flags=ES.Get(R,"flags");return"string"==typeof flags?matcher=new C(R,flags):C===OrigRegExp?(flags=flagsGetter(R),matcher=new C(R.source,flags)):matcher=new C(R,flags=flagsGetter(R)),{flags:flags,matcher:matcher}}(ES.SpeciesConstructor(R,OrigRegExp),R),flags=tmp.flags,matcher=tmp.matcher,lastIndex=ES.ToLength(ES.Get(R,"lastIndex"));return ES.Set(matcher,"lastIndex",lastIndex,!0),function(R,S,global,fullUnicode){if("String"!==ES.Type(S))throw new TypeError('"S" value must be a String');if("Boolean"!==ES.Type(global))throw new TypeError('"global" value must be a Boolean');if("Boolean"!==ES.Type(fullUnicode))throw new TypeError('"fullUnicode" value must be a Boolean');return new RegExpStringIterator(R,S,global,fullUnicode)}(matcher,S,flags.indexOf("g")>-1,flags.indexOf("u")>-1)},defineP=Object.defineProperty,gOPD=Object.getOwnPropertyDescriptor;if(defineP&&gOPD){var desc=gOPD(regexMatchAll,"name");desc&&desc.configurable&&defineP(regexMatchAll,"name",{value:"[Symbol.matchAll]"})}module.exports=regexMatchAll},function(module,exports,__webpack_require__){"use strict";var toObject=Object,TypeErr=TypeError;module.exports=function(){if(null!=this&&this!==toObject(this))throw new TypeErr("RegExp.prototype.flags getter called on non-object");var result="";return this.global&&(result+="g"),this.ignoreCase&&(result+="i"),this.multiline&&(result+="m"),this.dotAll&&(result+="s"),this.unicode&&(result+="u"),this.sticky&&(result+="y"),result}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(244),supportsDescriptors=__webpack_require__(23).supportsDescriptors,gOPD=Object.getOwnPropertyDescriptor,TypeErr=TypeError;module.exports=function(){if(!supportsDescriptors)throw new TypeErr("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if("gim"===/a/gim.flags){var descriptor=gOPD(RegExp.prototype,"flags");if(descriptor&&"function"==typeof descriptor.get&&"boolean"==typeof/a/.dotAll)return descriptor.get}return implementation}},function(module,exports,__webpack_require__){module.exports=!__webpack_require__(31)&&!__webpack_require__(33)(function(){return 7!=Object.defineProperty(__webpack_require__(156)("div"),"a",{get:function(){return 7}}).a})},function(module,exports,__webpack_require__){exports.f=__webpack_require__(22)},function(module,exports,__webpack_require__){var has=__webpack_require__(54),toIObject=__webpack_require__(80),arrayIndexOf=__webpack_require__(249)(!1),IE_PROTO=__webpack_require__(160)("IE_PROTO");module.exports=function(object,names){var key,O=toIObject(object),i=0,result=[];for(key in O)key!=IE_PROTO&&has(O,key)&&result.push(key);for(;names.length>i;)has(O,key=names[i++])&&(~arrayIndexOf(result,key)||result.push(key));return result}},function(module,exports,__webpack_require__){var toIObject=__webpack_require__(80),toLength=__webpack_require__(81),toAbsoluteIndex=__webpack_require__(476);module.exports=function(IS_INCLUDES){return function($this,el,fromIndex){var value,O=toIObject($this),length=toLength(O.length),index=toAbsoluteIndex(fromIndex,length);if(IS_INCLUDES&&el!=el){for(;length>index;)if((value=O[index++])!=value)return!0}else for(;length>index;index++)if((IS_INCLUDES||index in O)&&O[index]===el)return IS_INCLUDES||index||0;return!IS_INCLUDES&&-1}}},function(module,exports,__webpack_require__){var dP=__webpack_require__(34),anObject=__webpack_require__(35),getKeys=__webpack_require__(79);module.exports=__webpack_require__(31)?Object.defineProperties:function(O,Properties){anObject(O);for(var P,keys=getKeys(Properties),length=keys.length,i=0;length>i;)dP.f(O,P=keys[i++],Properties[P]);return O}},function(module,exports,__webpack_require__){var document=__webpack_require__(26).document;module.exports=document&&document.documentElement},function(module,exports){module.exports=function(done,value){return{value:value,done:!!done}}},function(module,exports,__webpack_require__){var $export=__webpack_require__(18),core=__webpack_require__(55),fails=__webpack_require__(33);module.exports=function(KEY,exec){var fn=(core.Object||{})[KEY]||Object[KEY],exp={};exp[KEY]=exec(fn),$export($export.S+$export.F*fails(function(){fn(1)}),"Object",exp)}},function(module,exports,__webpack_require__){"use strict";(function(setImmediate){function _toConsumableArray(arr){return function(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,__webpack_require__(169),__webpack_require__(256),__webpack_require__(82),__webpack_require__(78),__webpack_require__(128),__webpack_require__(13),__webpack_require__(45),__webpack_require__(171),__webpack_require__(173),__webpack_require__(59),__webpack_require__(40),__webpack_require__(46),__webpack_require__(60);var Channel=function(){function Channel(){var _this=this,_ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},transport=_ref.transport,async=_ref.async;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Channel),this._sender=this._randomId(),this._async=async,transport&&(this._transport=transport,this._transport.setHandler(function(event){return _this._handleEvent(event)})),this._listeners={}}var Constructor,protoProps,staticProps;return Constructor=Channel,(protoProps=[{key:"addListener",value:function(type,listener){this.on(type,listener)}},{key:"addPeerListener",value:function(type,listener){var peerListener=listener;peerListener.ignorePeer=!0,this.on(type,peerListener)}},{key:"emit",value:function(type){for(var _this2=this,_len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];var event={type:type,args:args,from:this._sender},handler=function(){_this2._transport&&_this2._transport.send(event),_this2._handleEvent(event,!0)};this._async?setImmediate(handler):handler()}},{key:"eventNames",value:function(){return Object.keys(this._listeners)}},{key:"listenerCount",value:function(type){var listeners=this._listeners[type];return listeners?listeners.length:0}},{key:"listeners",value:function(type){return this._listeners[type]}},{key:"on",value:function(type,listener){this._listeners[type]=this._listeners[type]||[],this._listeners[type].push(listener)}},{key:"once",value:function(type,listener){var onceListener=this._onceListener(type,listener);this.on(type,onceListener)}},{key:"prependListener",value:function(type,listener){this._listeners[type]=this._listeners[type]||[],this._listeners[type].unshift(listener)}},{key:"prependOnceListener",value:function(type,listener){var onceListener=this._onceListener(type,listener);this.prependListener(type,onceListener)}},{key:"removeAllListeners",value:function(type){type?this._listeners[type]&&delete this._listeners[type]:this._listeners={}}},{key:"removeListener",value:function(type,listener){var listeners=this._listeners[type];listeners&&(this._listeners[type]=listeners.filter(function(l){return l!==listener}))}},{key:"_randomId",value:function(){return Math.random().toString(16).slice(2)}},{key:"_handleEvent",value:function(event,isPeer){var listeners=this._listeners[event.type];listeners&&(isPeer||event.from!==this._sender)&&listeners.forEach(function(fn){return!(isPeer&&fn.ignorePeer)&&fn.apply(void 0,_toConsumableArray(event.args))})}},{key:"_onceListener",value:function(type,listener){var _this3=this;return function onceListener(){return _this3.removeListener(type,onceListener),listener.apply(void 0,arguments)}}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Channel}();exports.default=Channel}).call(this,__webpack_require__(505).setImmediate)},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(159),defined=__webpack_require__(98);module.exports=function(TO_STRING){return function(that,pos){var a,b,s=String(defined(that)),i=toInteger(pos),l=s.length;return i<0||i>=l?TO_STRING?"":void 0:(a=s.charCodeAt(i))<55296||a>56319||i+1===l||(b=s.charCodeAt(i+1))<56320||b>57343?TO_STRING?s.charAt(i):a:TO_STRING?s.slice(i,i+2):b-56320+(a-55296<<10)+65536}}},function(module,exports,__webpack_require__){"use strict";var ctx=__webpack_require__(57),$export=__webpack_require__(18),toObject=__webpack_require__(66),call=__webpack_require__(257),isArrayIter=__webpack_require__(258),toLength=__webpack_require__(81),createProperty=__webpack_require__(507),getIterFn=__webpack_require__(259);$export($export.S+$export.F*!__webpack_require__(170)(function(iter){Array.from(iter)}),"Array",{from:function(arrayLike){var length,result,step,iterator,O=toObject(arrayLike),C="function"==typeof this?this:Array,aLen=arguments.length,mapfn=aLen>1?arguments[1]:void 0,mapping=void 0!==mapfn,index=0,iterFn=getIterFn(O);if(mapping&&(mapfn=ctx(mapfn,aLen>2?arguments[2]:void 0,2)),null==iterFn||C==Array&&isArrayIter(iterFn))for(result=new C(length=toLength(O.length));length>index;index++)createProperty(result,index,mapping?mapfn(O[index],index):O[index]);else for(iterator=iterFn.call(O),result=new C;!(step=iterator.next()).done;index++)createProperty(result,index,mapping?call(iterator,mapfn,[step.value,index],!0):step.value);return result.length=index,result}})},function(module,exports,__webpack_require__){var anObject=__webpack_require__(35);module.exports=function(iterator,fn,value,entries){try{return entries?fn(anObject(value)[0],value[1]):fn(value)}catch(e){var ret=iterator.return;throw void 0!==ret&&anObject(ret.call(iterator)),e}}},function(module,exports,__webpack_require__){var Iterators=__webpack_require__(100),ITERATOR=__webpack_require__(22)("iterator"),ArrayProto=Array.prototype;module.exports=function(it){return void 0!==it&&(Iterators.Array===it||ArrayProto[ITERATOR]===it)}},function(module,exports,__webpack_require__){var classof=__webpack_require__(124),ITERATOR=__webpack_require__(22)("iterator"),Iterators=__webpack_require__(100);module.exports=__webpack_require__(55).getIteratorMethod=function(it){if(null!=it)return it[ITERATOR]||it["@@iterator"]||Iterators[classof(it)]}},function(module,exports,__webpack_require__){(function(global){function config(name){try{if(!global.localStorage)return!1}catch(_){return!1}var val=global.localStorage[name];return null!=val&&"true"===String(val).toLowerCase()}module.exports=function(fn,msg){if(config("noDeprecation"))return fn;var warned=!1;return function(){if(!warned){if(config("throwDeprecation"))throw new Error(msg);config("traceDeprecation")?console.trace(msg):console.warn(msg),warned=!0}return fn.apply(this,arguments)}}}).call(this,__webpack_require__(17))},function(module,exports,__webpack_require__){var anObject=__webpack_require__(35),aFunction=__webpack_require__(64),SPECIES=__webpack_require__(22)("species");module.exports=function(O,D){var S,C=anObject(O).constructor;return void 0===C||null==(S=anObject(C)[SPECIES])?D:aFunction(S)}},function(module,exports,__webpack_require__){var defer,channel,port,ctx=__webpack_require__(57),invoke=__webpack_require__(263),html=__webpack_require__(251),cel=__webpack_require__(156),global=__webpack_require__(26),process=global.process,setTask=global.setImmediate,clearTask=global.clearImmediate,MessageChannel=global.MessageChannel,Dispatch=global.Dispatch,counter=0,queue={},run=function(){var id=+this;if(queue.hasOwnProperty(id)){var fn=queue[id];delete queue[id],fn()}},listener=function(event){run.call(event.data)};setTask&&clearTask||(setTask=function(fn){for(var args=[],i=1;arguments.length>i;)args.push(arguments[i++]);return queue[++counter]=function(){invoke("function"==typeof fn?fn:Function(fn),args)},defer(counter),counter},clearTask=function(id){delete queue[id]},"process"==__webpack_require__(65)(process)?defer=function(id){process.nextTick(ctx(run,id,1))}:Dispatch&&Dispatch.now?defer=function(id){Dispatch.now(ctx(run,id,1))}:MessageChannel?(port=(channel=new MessageChannel).port2,channel.port1.onmessage=listener,defer=ctx(port.postMessage,port,1)):global.addEventListener&&"function"==typeof postMessage&&!global.importScripts?(defer=function(id){global.postMessage(id+"","*")},global.addEventListener("message",listener,!1)):defer="onreadystatechange"in cel("script")?function(id){html.appendChild(cel("script")).onreadystatechange=function(){html.removeChild(this),run.call(id)}}:function(id){setTimeout(ctx(run,id,1),0)}),module.exports={set:setTask,clear:clearTask}},function(module,exports){module.exports=function(fn,args,that){var un=void 0===that;switch(args.length){case 0:return un?fn():fn.call(that);case 1:return un?fn(args[0]):fn.call(that,args[0]);case 2:return un?fn(args[0],args[1]):fn.call(that,args[0],args[1]);case 3:return un?fn(args[0],args[1],args[2]):fn.call(that,args[0],args[1],args[2]);case 4:return un?fn(args[0],args[1],args[2],args[3]):fn.call(that,args[0],args[1],args[2],args[3])}return fn.apply(that,args)}},function(module,exports,__webpack_require__){"use strict";var aFunction=__webpack_require__(64);function PromiseCapability(C){var resolve,reject;this.promise=new C(function($$resolve,$$reject){if(void 0!==resolve||void 0!==reject)throw TypeError("Bad Promise constructor");resolve=$$resolve,reject=$$reject}),this.resolve=aFunction(resolve),this.reject=aFunction(reject)}module.exports.f=function(C){return new PromiseCapability(C)}},function(module,exports,__webpack_require__){"use strict";var global=__webpack_require__(26),dP=__webpack_require__(34),DESCRIPTORS=__webpack_require__(31),SPECIES=__webpack_require__(22)("species");module.exports=function(KEY){var C=global[KEY];DESCRIPTORS&&C&&!C[SPECIES]&&dP.f(C,SPECIES,{configurable:!0,get:function(){return this}})}},function(module,exports,__webpack_require__){"use strict";(function(global){__webpack_require__(13),Object.defineProperty(exports,"__esModule",{value:!0}),exports.logger=void 0;var console=global.console,logger={info:function(message){return console.log(message)},warn:function(message){return console.warn(message)},error:function(message){return console.error(message)}};exports.logger=logger}).call(this,__webpack_require__(17))},function(module,exports,__webpack_require__){var isObject=__webpack_require__(28),anObject=__webpack_require__(35),check=function(O,proto){if(anObject(O),!isObject(proto)&&null!==proto)throw TypeError(proto+": can't set as prototype!")};module.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(test,buggy,set){try{(set=__webpack_require__(57)(Function.call,__webpack_require__(165).f(Object.prototype,"__proto__").set,2))(test,[]),buggy=!(test instanceof Array)}catch(e){buggy=!0}return function(O,proto){return check(O,proto),buggy?O.__proto__=proto:set(O,proto),O}}({},!1):void 0),check:check}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.defaultDecorateStory=void 0,__webpack_require__(13),__webpack_require__(169),__webpack_require__(256),__webpack_require__(171),__webpack_require__(173),__webpack_require__(82),__webpack_require__(78),__webpack_require__(59),__webpack_require__(127),__webpack_require__(128),__webpack_require__(126),__webpack_require__(46),__webpack_require__(60),__webpack_require__(40),__webpack_require__(45),__webpack_require__(525);var _clientLogger=__webpack_require__(266),_addons=_interopRequireDefault(__webpack_require__(168)),_coreEvents=_interopRequireDefault(__webpack_require__(101)),_story_store=_interopRequireDefault(__webpack_require__(177)),_subscriptions_store=_interopRequireDefault(__webpack_require__(527));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _toConsumableArray(arr){return function(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var defaultDecorateStory=function(getStory,decorators){return decorators.reduce(function(decorated,decorator){return function(context){return decorator(function(){return decorated(context)},context)}},getStory)};exports.defaultDecorateStory=defaultDecorateStory;var metaSubscription=function(){return _addons.default.getChannel().on(_coreEvents.default.REGISTER_SUBSCRIPTION,_subscriptions_store.default.register),function(){return _addons.default.getChannel().removeListener(_coreEvents.default.REGISTER_SUBSCRIPTION,_subscriptions_store.default.register)}},withSubscriptionTracking=function(storyFn){if(!_addons.default.hasChannel())return storyFn();_subscriptions_store.default.markAllAsUnused(),_subscriptions_store.default.register(metaSubscription);var result=storyFn();return _subscriptions_store.default.clearUnused(),result};exports.default=function ClientApi(){var _this=this,_ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$storyStore=_ref.storyStore,storyStore=void 0===_ref$storyStore?new _story_store.default:_ref$storyStore,_ref$decorateStory=_ref.decorateStory,decorateStory=void 0===_ref$decorateStory?defaultDecorateStory:_ref$decorateStory;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ClientApi),_defineProperty(this,"setAddon",function(addon){_this._addons=_objectSpread({},_this._addons,addon)}),_defineProperty(this,"addDecorator",function(decorator){_this._globalDecorators.push(decorator)}),_defineProperty(this,"addParameters",function(parameters){_this._globalParameters=parameters}),_defineProperty(this,"clearDecorators",function(){_this._globalDecorators=[]}),_defineProperty(this,"storiesOf",function(kind,m){if(!kind&&"string"!=typeof kind)throw new Error("Invalid or missing kind provided for stories, should be a string");m||_clientLogger.logger.warn("Missing 'module' parameter for story with a kind of '".concat(kind,"'. It will break your HMR")),m&&m.hot&&m.hot.dispose&&m.hot.dispose(function(){_this._storyStore.removeStoryKind(kind),_this._storyStore.incrementRevision()});var localDecorators=[],localParameters={},api={kind:kind};return Object.keys(_this._addons).forEach(function(name){var addon=_this._addons[name];api[name]=function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return addon.apply(api,args),api}}),api.add=function(storyName,getStory,parameters){if("string"!=typeof storyName)throw new Error('Invalid or missing storyName provided for a "'.concat(kind,'" story.'));_this._storyStore.hasStory(kind,storyName)&&_clientLogger.logger.warn('Story of "'.concat(kind,'" named "').concat(storyName,'" already exists'));var decorators=localDecorators.concat(_toConsumableArray(_this._globalDecorators),[withSubscriptionTracking]),allParam={fileName:m?m.id:null};return[_this._globalParameters,localParameters,parameters].forEach(function(params){params&&Object.keys(params).forEach(function(key){Array.isArray(params[key])?allParam[key]=params[key]:"object"===_typeof(params[key])?allParam[key]=_objectSpread({},allParam[key],params[key]):allParam[key]=params[key]})}),_this._storyStore.addStory(kind,storyName,_this._decorateStory(getStory,decorators),allParam),api},api.addDecorator=function(decorator){return localDecorators.push(decorator),api},api.addParameters=function(parameters){return localParameters=_objectSpread({},localParameters,parameters),api},api}),_defineProperty(this,"getStorybook",function(){return _this._storyStore.getStoryKinds().map(function(kind){var fileName=_this._storyStore.getStoryFileName(kind),stories=_this._storyStore.getStories(kind).map(function(name){return{name:name,render:_this._storyStore.getStoryWithContext(kind,name)}});return{kind:kind,fileName:fileName,stories:stories}})}),this._storyStore=storyStore,this._addons={},this._globalDecorators=[],this._globalParameters={},this._decorateStory=decorateStory}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(28);module.exports=function(it,TYPE){if(!isObject(it)||it._t!==TYPE)throw TypeError("Incompatible receiver, "+TYPE+" required!");return it}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(28),setPrototypeOf=__webpack_require__(267).set;module.exports=function(that,target,C){var P,S=target.constructor;return S!==C&&"function"==typeof S&&(P=S.prototype)!==C.prototype&&isObject(P)&&setPrototypeOf&&setPrototypeOf(that,P),that}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,__webpack_require__(13);var obj,_global=__webpack_require__(58),_coreEvents=(obj=__webpack_require__(101))&&obj.__esModule?obj:{default:obj},_actions=__webpack_require__(102);function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var ConfigApi=function(){function ConfigApi(_ref){var obj,key,value,_this=this,channel=_ref.channel,storyStore=_ref.storyStore,reduxStore=_ref.reduxStore,clearDecorators=_ref.clearDecorators;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ConfigApi),value=function(loaders,module){var render=function(){try{_this._renderMain(loaders)}catch(error){module.hot&&"apply"===module.hot.status()?_global.location.reload():(_this._renderError(error),_this._storyStore.clean())}};module.hot&&(module.hot.accept(function(){setTimeout(render)}),module.hot.dispose(function(){_this._clearDecorators()})),_this._channel?render():loaders()},(key="configure")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,this._channel=channel,this._storyStore=storyStore,this._reduxStore=reduxStore,this._clearDecorators=clearDecorators}var Constructor,protoProps,staticProps;return Constructor=ConfigApi,(protoProps=[{key:"_renderMain",value:function(loaders){loaders&&loaders();var stories=this._storyStore.dumpStoryBook();this._channel.emit(_coreEvents.default.SET_STORIES,{stories:stories}),this._reduxStore.dispatch((0,_actions.clearError)()),this._reduxStore.dispatch((0,_actions.setInitialStory)(stories))}},{key:"_renderError",value:function(e){var error={stack:e.stack,message:e.message};this._reduxStore.dispatch((0,_actions.setError)(error))}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),ConfigApi}();exports.default=ConfigApi},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;switch(action.type){case _actions.types.CLEAR_ERROR:return _objectSpread({},state,{error:null});case _actions.types.SET_ERROR:return _objectSpread({},state,{error:action.error});case _actions.types.SELECT_STORY:return _objectSpread({},state,{selectedKind:action.kind,selectedStory:action.story});case _actions.types.SET_INITIAL_STORY:var newState=_objectSpread({},state),storyKindList=action.storyKindList;if(!newState.selectedKind&&storyKindList.length>0){newState.selectedKind=storyKindList[0].kind;var _storyKindList$0$stor=(arr=storyKindList[0].stories,i=1,function(arr){if(Array.isArray(arr))return arr}(arr)||function(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}());newState.selectedStory=_storyKindList$0$stor[0]}return newState;default:return state}var arr,i},__webpack_require__(82),__webpack_require__(78),__webpack_require__(128),__webpack_require__(45),__webpack_require__(59),__webpack_require__(40),__webpack_require__(46),__webpack_require__(60),__webpack_require__(13);var _actions=__webpack_require__(102);function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(reduxStore){var queryParams=_qs.default.parse(_global.window.location.search.substring(1));queryParams.selectedKind&&reduxStore.dispatch((0,_actions.selectStory)(queryParams.selectedKind,queryParams.selectedStory));reduxStore.subscribe(function(){var _reduxStore$getState=reduxStore.getState(),selectedKind=_reduxStore$getState.selectedKind,selectedStory=_reduxStore$getState.selectedStory,queryString=_qs.default.stringify(function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}({},queryParams,{selectedKind:selectedKind,selectedStory:selectedStory}));_global.window.history.replaceState({},"","?".concat(queryString))})},__webpack_require__(45),__webpack_require__(59),__webpack_require__(40),__webpack_require__(46),__webpack_require__(60),__webpack_require__(13),__webpack_require__(531);var obj,_qs=(obj=__webpack_require__(534))&&obj.__esModule?obj:{default:obj},_global=__webpack_require__(58),_actions=__webpack_require__(102);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}},function(module,exports,__webpack_require__){"use strict";var classof=__webpack_require__(124),builtinExec=RegExp.prototype.exec;module.exports=function(R,S){var exec=R.exec;if("function"==typeof exec){var result=exec.call(R,S);if("object"!=typeof result)throw new TypeError("RegExp exec method returned something other than an Object or null");return result}if("RegExp"!==classof(R))throw new TypeError("RegExp#exec called on incompatible receiver");return builtinExec.call(R,S)}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(533);var redefine=__webpack_require__(39),hide=__webpack_require__(56),fails=__webpack_require__(33),defined=__webpack_require__(98),wks=__webpack_require__(22),regexpExec=__webpack_require__(178),SPECIES=wks("species"),REPLACE_SUPPORTS_NAMED_GROUPS=!fails(function(){var re=/./;return re.exec=function(){var result=[];return result.groups={a:"7"},result},"7"!=="".replace(re,"$<a>")}),SPLIT_WORKS_WITH_OVERWRITTEN_EXEC=function(){var re=/(?:)/,originalExec=re.exec;re.exec=function(){return originalExec.apply(this,arguments)};var result="ab".split(re);return 2===result.length&&"a"===result[0]&&"b"===result[1]}();module.exports=function(KEY,length,exec){var SYMBOL=wks(KEY),DELEGATES_TO_SYMBOL=!fails(function(){var O={};return O[SYMBOL]=function(){return 7},7!=""[KEY](O)}),DELEGATES_TO_EXEC=DELEGATES_TO_SYMBOL?!fails(function(){var execCalled=!1,re=/a/;return re.exec=function(){return execCalled=!0,null},"split"===KEY&&(re.constructor={},re.constructor[SPECIES]=function(){return re}),re[SYMBOL](""),!execCalled}):void 0;if(!DELEGATES_TO_SYMBOL||!DELEGATES_TO_EXEC||"replace"===KEY&&!REPLACE_SUPPORTS_NAMED_GROUPS||"split"===KEY&&!SPLIT_WORKS_WITH_OVERWRITTEN_EXEC){var nativeRegExpMethod=/./[SYMBOL],fns=exec(defined,SYMBOL,""[KEY],function(nativeMethod,regexp,str,arg2,forceStringMethod){return regexp.exec===regexpExec?DELEGATES_TO_SYMBOL&&!forceStringMethod?{done:!0,value:nativeRegExpMethod.call(regexp,str,arg2)}:{done:!0,value:nativeMethod.call(str,regexp,arg2)}:{done:!1}}),strfn=fns[0],rxfn=fns[1];redefine(String.prototype,KEY,strfn),hide(RegExp.prototype,SYMBOL,2==length?function(string,arg){return rxfn.call(string,this,arg)}:function(string){return rxfn.call(string,this)})}}},function(module,exports,__webpack_require__){"use strict";var has=Object.prototype.hasOwnProperty,hexTable=function(){for(var array=[],i=0;i<256;++i)array.push("%"+((i<16?"0":"")+i.toString(16)).toUpperCase());return array}(),arrayToObject=function(source,options){for(var obj=options&&options.plainObjects?Object.create(null):{},i=0;i<source.length;++i)void 0!==source[i]&&(obj[i]=source[i]);return obj};module.exports={arrayToObject:arrayToObject,assign:function(target,source){return Object.keys(source).reduce(function(acc,key){return acc[key]=source[key],acc},target)},combine:function(a,b){return[].concat(a,b)},compact:function(value){for(var queue=[{obj:{o:value},prop:"o"}],refs=[],i=0;i<queue.length;++i)for(var item=queue[i],obj=item.obj[item.prop],keys=Object.keys(obj),j=0;j<keys.length;++j){var key=keys[j],val=obj[key];"object"==typeof val&&null!==val&&-1===refs.indexOf(val)&&(queue.push({obj:obj,prop:key}),refs.push(val))}return function(queue){for(;queue.length>1;){var item=queue.pop(),obj=item.obj[item.prop];if(Array.isArray(obj)){for(var compacted=[],j=0;j<obj.length;++j)void 0!==obj[j]&&compacted.push(obj[j]);item.obj[item.prop]=compacted}}}(queue),value},decode:function(str,decoder,charset){var strWithoutPlus=str.replace(/\+/g," ");if("iso-8859-1"===charset)return strWithoutPlus.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(strWithoutPlus)}catch(e){return strWithoutPlus}},encode:function(str,defaultEncoder,charset){if(0===str.length)return str;var string="string"==typeof str?str:String(str);if("iso-8859-1"===charset)return escape(string).replace(/%u[0-9a-f]{4}/gi,function($0){return"%26%23"+parseInt($0.slice(2),16)+"%3B"});for(var out="",i=0;i<string.length;++i){var c=string.charCodeAt(i);45===c||46===c||95===c||126===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122?out+=string.charAt(i):c<128?out+=hexTable[c]:c<2048?out+=hexTable[192|c>>6]+hexTable[128|63&c]:c<55296||c>=57344?out+=hexTable[224|c>>12]+hexTable[128|c>>6&63]+hexTable[128|63&c]:(i+=1,c=65536+((1023&c)<<10|1023&string.charCodeAt(i)),out+=hexTable[240|c>>18]+hexTable[128|c>>12&63]+hexTable[128|c>>6&63]+hexTable[128|63&c])}return out},isBuffer:function(obj){return null!=obj&&!!(obj.constructor&&obj.constructor.isBuffer&&obj.constructor.isBuffer(obj))},isRegExp:function(obj){return"[object RegExp]"===Object.prototype.toString.call(obj)},merge:function merge(target,source,options){if(!source)return target;if("object"!=typeof source){if(Array.isArray(target))target.push(source);else{if("object"!=typeof target)return[target,source];(options&&(options.plainObjects||options.allowPrototypes)||!has.call(Object.prototype,source))&&(target[source]=!0)}return target}if("object"!=typeof target)return[target].concat(source);var mergeTarget=target;return Array.isArray(target)&&!Array.isArray(source)&&(mergeTarget=arrayToObject(target,options)),Array.isArray(target)&&Array.isArray(source)?(source.forEach(function(item,i){has.call(target,i)?target[i]&&"object"==typeof target[i]?target[i]=merge(target[i],item,options):target.push(item):target[i]=item}),target):Object.keys(source).reduce(function(acc,key){var value=source[key];return has.call(acc,key)?acc[key]=merge(acc[key],value,options):acc[key]=value,acc},mergeTarget)}}},function(module,exports,__webpack_require__){"use strict";var replace=String.prototype.replace,percentTwenties=/%20/g;module.exports={default:"RFC3986",formatters:{RFC1738:function(value){return replace.call(value,percentTwenties,"+")},RFC3986:function(value){return value}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(module,exports,__webpack_require__){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;module.exports=function(){try{if(!Object.assign)return!1;var test1=new String("abc");if(test1[5]="de","5"===Object.getOwnPropertyNames(test1)[0])return!1;for(var test2={},i=0;i<10;i++)test2["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(test2).map(function(n){return test2[n]}).join(""))return!1;var test3={};return"abcdefghijklmnopqrst".split("").forEach(function(letter){test3[letter]=letter}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},test3)).join("")}catch(err){return!1}}()?Object.assign:function(target,source){for(var from,symbols,to=function(val){if(null==val)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(val)}(target),s=1;s<arguments.length;s++){for(var key in from=Object(arguments[s]))hasOwnProperty.call(from,key)&&(to[key]=from[key]);if(getOwnPropertySymbols){symbols=getOwnPropertySymbols(from);for(var i=0;i<symbols.length;i++)propIsEnumerable.call(from,symbols[i])&&(to[symbols[i]]=from[symbols[i]])}}return to}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var obj,_replaceSubstitutionTransformer=__webpack_require__(551),_replaceSubstitutionTransformer2=(obj=_replaceSubstitutionTransformer)&&obj.__esModule?obj:{default:obj};exports.default=_replaceSubstitutionTransformer2.default,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var obj,_removeNonPrintingValuesTransformer=__webpack_require__(556),_removeNonPrintingValuesTransformer2=(obj=_removeNonPrintingValuesTransformer)&&obj.__esModule?obj:{default:obj};exports.default=_removeNonPrintingValuesTransformer2.default,module.exports=exports.default},function(module,exports){module.exports=function(value){return null!=value&&"object"==typeof value}},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var LocationTotalsLegend_1=__webpack_require__(608);exports.LocationTotalsLegend=LocationTotalsLegend_1.default;var DiffColorsLegend_1=__webpack_require__(862);exports.DiffColorsLegend=DiffColorsLegend_1.default;var LegendBox_1=__webpack_require__(863);exports.LegendBox=LegendBox_1.default,__export(__webpack_require__(864)),__export(__webpack_require__(387));var FlowMap_1=__importDefault(__webpack_require__(387));exports.default=FlowMap_1.default},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var LayerKind,core_1=__webpack_require__(15),layers_1=__webpack_require__(771),AnimatedFlowLinesLayer_1=__importDefault(__webpack_require__(847)),FlowCirclesLayer_1=__importDefault(__webpack_require__(850)),FlowLinesLayer_1=__importDefault(__webpack_require__(853)),Selectors_1=__importDefault(__webpack_require__(856)),types_1=__webpack_require__(225);!function(LayerKind){LayerKind.LOCATIONS="LOCATIONS",LayerKind.LOCATION_AREAS="LOCATION_AREAS",LayerKind.FLOWS="FLOWS",LayerKind.LOCATIONS_HIGHLIGHTED="LOCATIONS_HIGHLIGHTED",LayerKind.FLOWS_HIGHLIGHTED="FLOWS_HIGHLIGHTED"}(LayerKind||(LayerKind={}));var LAYER_ID_SEPARATOR=":::";function getLayerId(baseLayerId,layerKind){return""+baseLayerId+LAYER_ID_SEPARATOR+layerKind.valueOf()}function getPickType(_a){switch(function(id){var kind=id.substr(id.lastIndexOf(LAYER_ID_SEPARATOR)+LAYER_ID_SEPARATOR.length);return LayerKind[kind]}(_a.id)){case LayerKind.FLOWS:case LayerKind.FLOWS_HIGHLIGHTED:return types_1.PickingType.FLOW;case LayerKind.LOCATIONS:case LayerKind.LOCATIONS_HIGHLIGHTED:return types_1.PickingType.LOCATION;case LayerKind.LOCATION_AREAS:return types_1.PickingType.LOCATION_AREA;default:return}}var FlowMapLayer=function(_super){function FlowMapLayer(props){return _super.call(this,props)||this}return __extends(FlowMapLayer,_super),FlowMapLayer.prototype.initializeState=function(){var _a=this.props,getLocationTotalIn=_a.getLocationTotalIn,getLocationTotalOut=_a.getLocationTotalOut,getLocationTotalWithin=_a.getLocationTotalWithin,getLocationId=_a.getLocationId,getLocationCentroid=_a.getLocationCentroid,getFlowOriginId=_a.getFlowOriginId,getFlowDestId=_a.getFlowDestId,getFlowMagnitude=_a.getFlowMagnitude,getFlowColor=_a.getFlowColor,selectors=new Selectors_1.default({getLocationId:getLocationId,getLocationCentroid:getLocationCentroid,getLocationTotalIn:getLocationTotalIn,getLocationTotalOut:getLocationTotalOut,getLocationTotalWithin:getLocationTotalWithin,getFlowOriginId:getFlowOriginId,getFlowDestId:getFlowDestId,getFlowMagnitude:getFlowMagnitude,getFlowColor:getFlowColor});this.setState({selectors:selectors})},FlowMapLayer.prototype.updateState=function(params){_super.prototype.updateState.call(this,params);var props=params.props;if(params.changeFlags.propsChanged){var getLocationTotalIn=props.getLocationTotalIn,getLocationTotalOut=props.getLocationTotalOut,getLocationTotalWithin=props.getLocationTotalWithin,getLocationId=props.getLocationId,getLocationCentroid=props.getLocationCentroid,getFlowOriginId=props.getFlowOriginId,getFlowDestId=props.getFlowDestId,getFlowMagnitude=props.getFlowMagnitude,getFlowColor=props.getFlowColor;this.state.selectors.setInputAccessors({getLocationId:getLocationId,getLocationCentroid:getLocationCentroid,getLocationTotalIn:getLocationTotalIn,getLocationTotalOut:getLocationTotalOut,getLocationTotalWithin:getLocationTotalWithin,getFlowOriginId:getFlowOriginId,getFlowDestId:getFlowDestId,getFlowMagnitude:getFlowMagnitude,getFlowColor:getFlowColor})}},FlowMapLayer.prototype.getPickingInfo=function(params){var type=getPickType(params.sourceLayer);if(!type)return params.info;var info=__assign({},params.info,{type:type}),selectors=this.state.selectors;if(type===types_1.PickingType.FLOW){var getLocationById=selectors.getLocationByIdGetter(this.props),_a=selectors.getInputAccessors(),getFlowOriginId=_a.getFlowOriginId,getFlowDestId=_a.getFlowDestId,flow=info.object;return __assign({},info,flow&&{origin:getLocationById(getFlowOriginId(flow)),dest:getLocationById(getFlowDestId(flow))})}if(type===types_1.PickingType.LOCATION||type===types_1.PickingType.LOCATION_AREA){var location_1=type===types_1.PickingType.LOCATION?info.object&&info.object.location:info.object,getLocationTotalIn=selectors.getLocationTotalInGetter(this.props),getLocationTotalOut=selectors.getLocationTotalOutGetter(this.props),getLocationTotalWithin=selectors.getLocationTotalWithinGetter(this.props),getLocationCircleRadius=selectors.getLocationCircleRadiusGetter(this.props);return __assign({},info,location_1&&{object:location_1,totalIn:getLocationTotalIn(location_1),totalOut:getLocationTotalOut(location_1),totalWithin:getLocationTotalWithin(location_1),circleRadius:getLocationCircleRadius({location:location_1,type:"outer"})})}return info},FlowMapLayer.prototype.renderLayers=function(){var _a=this.props,showLocationAreas=_a.showLocationAreas,locations=_a.locations,highlightedLocationId=_a.highlightedLocationId,selectors=this.state.selectors,topFlows=selectors.getTopFlows(this.props),highlightedFlows=selectors.getHighlightedFlows(this.props),isLocationHighlighted=null!=highlightedLocationId,locationCircles=selectors.getLocationCircles(this.props),layers=[];if(showLocationAreas&&types_1.isFeatureCollection(locations)&&layers.push(this.getLocationAreasLayer(getLayerId(this.props.id,LayerKind.LOCATION_AREAS))),layers.push(this.getFlowLinesLayer(getLayerId(this.props.id,LayerKind.FLOWS),topFlows,!1,isLocationHighlighted)),highlightedFlows&&layers.push(this.getFlowLinesLayer(getLayerId(this.props.id,LayerKind.FLOWS_HIGHLIGHTED),highlightedFlows,!0,!1)),layers.push(this.getLocationCirclesLayer(getLayerId(this.props.id,LayerKind.LOCATIONS),locationCircles,!1)),isLocationHighlighted){var highlightedLocationCircles=selectors.getHighlightedLocationCircles(this.props);layers.push(this.getLocationCirclesLayer(getLayerId(this.props.id,LayerKind.LOCATIONS_HIGHLIGHTED),highlightedLocationCircles,!0))}return layers},FlowMapLayer.prototype.getLocationAreasLayer=function(id){var _a=this.props,locations=_a.locations,selectedLocationIds=_a.selectedLocationIds,highlightedLocationId=_a.highlightedLocationId,highlightedFlow=_a.highlightedFlow,selectors=this.state.selectors,colors=selectors.getColors(this.props);return new layers_1.GeoJsonLayer({id:id,getFillColor:selectors.getLocationAreaFillColorGetter(this.props),getLineColor:colors.locationAreas.outline,lineJointRounded:!0,data:locations,stroked:!0,filled:!0,pickable:!0,opacity:1,lineWidthMinPixels:1,pointRadiusMinPixels:1,updateTriggers:{getFillColor:{selectedLocationIds:selectedLocationIds,highlightedLocationId:highlightedLocationId,highlightedFlow:highlightedFlow}}})},FlowMapLayer.prototype.getFlowLinesLayer=function(id,flows,highlighted,dimmed){var _a=this.props,getFlowOriginId=_a.getFlowOriginId,getFlowDestId=_a.getFlowDestId,getFlowMagnitude=_a.getFlowMagnitude,getLocationCentroid=_a.getLocationCentroid,showTotals=_a.showTotals,locationCircleSize=_a.locationCircleSize,outlineThickness=_a.outlineThickness,selectors=this.state.selectors,endpointOffsets=[(locationCircleSize||0)+1,(locationCircleSize||0)+1],getLocationRadius=selectors.getLocationCircleRadiusGetter(this.props),getLocationById=selectors.getLocationByIdGetter(this.props),flowThicknessScale=selectors.getFlowThicknessScale(this.props),flowColorScale=selectors.getFlowColorScale(this.props),colors=selectors.getColors(this.props),getColor=selectors.getFlowLinesColorGetter(colors,flowColorScale,highlighted,dimmed),baseProps=__assign({id:id,getSourcePosition:function(flow){return getLocationCentroid(getLocationById(getFlowOriginId(flow)))},getTargetPosition:function(flow){return getLocationCentroid(getLocationById(getFlowDestId(flow)))},getThickness:function(flow){return flowThicknessScale(getFlowMagnitude(flow))},getEndpointOffsets:function(flow){return showTotals?[getLocationRadius({location:getLocationById(getFlowOriginId(flow)),type:"outline"}),getLocationRadius({location:getLocationById(getFlowDestId(flow)),type:"outline"})]:endpointOffsets},getColor:getColor,data:flows,opacity:1,pickable:!highlighted,drawOutline:!dimmed,updateTriggers:{getColor:{dimmed:dimmed},getEndpointOffsets:{showTotals:showTotals}},outlineColor:colors.outlineColor},outlineThickness&&{outlineThickness:outlineThickness});return this.props.animate?new AnimatedFlowLinesLayer_1.default(__assign({},baseProps,{currentTime:this.props.animationCurrentTime})):new FlowLinesLayer_1.default(baseProps)},FlowMapLayer.prototype.getLocationCirclesLayer=function(id,circles,highlighted){var _this=this,_a=this.props,highlightedLocationId=_a.highlightedLocationId,selectedLocationIds=_a.selectedLocationIds,getLocationCentroid=_a.getLocationCentroid,flows=_a.flows,showTotals=_a.showTotals,selectors=this.state.selectors,getRadius=showTotals?selectors.getLocationCircleRadiusGetter(this.props):function(){return _this.props.locationCircleSize},getColor=selectors.getLocationCircleColorGetter(this.props);return new FlowCirclesLayer_1.default({id:id,getColor:getColor,getPosition:function(locCircle){return getLocationCentroid(locCircle.location)},getRadius:getRadius,data:circles,opacity:1,pickable:!0,updateTriggers:{getRadius:{selectedLocationIds:selectedLocationIds,flows:flows},getColor:{highlightedLocationId:highlightedLocationId,selectedLocationIds:selectedLocationIds,flows:flows}}})},FlowMapLayer.layerName="FlowMapLayer",FlowMapLayer.defaultProps={getLocationId:{type:"accessor",value:function(l){return l.id||l.properties.id}},getLocationCentroid:{type:"accessor",value:function(l){return l.properties.centroid}},getFlowOriginId:{type:"accessor",value:function(f){return f.origin}},getFlowDestId:{type:"accessor",value:function(f){return f.dest}},getFlowMagnitude:{type:"accessor",value:function(f){return f.count}},showTotals:!0,locationCircleSize:3,outlineThickness:1,showLocationAreas:!0},FlowMapLayer}(core_1.CompositeLayer);exports.default=FlowMapLayer},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0),_globals=__webpack_require__(609),_log=_interopRequireDefault(__webpack_require__(24));if(_globals.global.deck&&"7.0.4"!==_globals.global.deck.VERSION)throw new Error("deck.gl - multiple versions detected: ".concat(_globals.global.deck.VERSION," vs ").concat("7.0.4"));_globals.global.deck||(_log.default.log(0,"deck.gl ".concat("7.0.4"," - ").concat("set deck.log.priority=1 (or higher) to trace attribute updates"))(),_globals.global.deck=_globals.global.deck||{VERSION:"7.0.4",version:"7.0.4",log:_log.default}),console.table||(console.table=function(){})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(condition,message){if(!condition)throw new Error(message||"Assertion failed")}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2));var LocalStorage=function(){function LocalStorage(id,defaultSettings){var type=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";(0,_classCallCheck2.default)(this,LocalStorage),this.storage=function(type){try{var storage=window[type],x="__storage_test__";return storage.setItem(x,x),storage.removeItem(x),storage}catch(e){return null}}(type),this.id=id,this.config={},Object.assign(this.config,defaultSettings),this._loadConfiguration()}return(0,_createClass2.default)(LocalStorage,[{key:"getConfiguration",value:function(){return this.config}},{key:"setConfiguration",value:function(configuration){return this.config={},this.updateConfiguration(configuration)}},{key:"updateConfiguration",value:function(configuration){if(Object.assign(this.config,configuration),this.storage){var serialized=JSON.stringify(this.config);this.storage.setItem(this.id,serialized)}return this}},{key:"_loadConfiguration",value:function(){var configuration={};if(this.storage){var serializedConfiguration=this.storage.getItem(this.id);configuration=serializedConfiguration?JSON.parse(serializedConfiguration):{}}return Object.assign(this.config,configuration),this}}]),LocalStorage}();exports.default=LocalStorage},function(module,exports,__webpack_require__){"use strict";function formatValue(v){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_opts$isInteger=opts.isInteger,isInteger=void 0!==_opts$isInteger&&_opts$isInteger;if(Array.isArray(v)||ArrayBuffer.isView(v))return function(v,opts){for(var _opts$maxElts=opts.maxElts,maxElts=void 0===_opts$maxElts?16:_opts$maxElts,_opts$size=opts.size,size=void 0===_opts$size?1:_opts$size,string="[",i=0;i<v.length&&i<maxElts;++i)i>0&&(string+=",".concat(i%size==0?" ":"")),string+=formatValue(v[i],opts);var terminator=v.length>maxElts?"...":"]";return"".concat(string).concat(terminator)}(v,opts);if(!Number.isFinite(v))return String(v);if(Math.abs(v)<1e-16)return isInteger?"0":"0.";if(isInteger)return v.toFixed(0);if(Math.abs(v)>100&&Math.abs(v)<1e4)return v.toFixed(0);var string=v.toPrecision(2);return string.indexOf(".0")===string.length-2?string.slice(0,-1):string}Object.defineProperty(exports,"__esModule",{value:!0}),exports.formatTime=function(ms){var formatted;formatted=ms<10?"".concat(ms.toFixed(2),"ms"):ms<100?"".concat(ms.toFixed(1),"ms"):ms<1e3?"".concat(ms.toFixed(0),"ms"):"".concat((ms/1e3).toFixed(2),"s");return formatted},exports.leftPad=function(string){var length=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,padLength=Math.max(length-string.length,0);return"".concat(" ".repeat(padLength)).concat(string)},exports.rightPad=function(string){var length=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,padLength=Math.max(length-string.length,0);return"".concat(string).concat(" ".repeat(padLength))},exports.formatValue=formatValue,exports.formatImage=function(image,message,scale){var maxWidth=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600,imageUrl=image.src.replace(/\(/g,"%28").replace(/\)/g,"%29");image.width>maxWidth&&(scale=Math.min(scale,maxWidth/image.width));var width=image.width*scale,height=image.height*scale,style=["font-size:1px;","padding:".concat(Math.floor(height/2),"px ").concat(Math.floor(width/2),"px;"),"line-height:".concat(height,"px;"),"background:url(".concat(imageUrl,");"),"background-size:".concat(width,"px ").concat(height,"px;"),"color:transparent;"].join("");return["".concat(message," %c+"),style]}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addColor=function(string,color,background){_globals.isBrowser||"string"!=typeof string||(color&&(color=getColor(color),string="[".concat(color,"m").concat(string,"[39m")),background&&(color=getColor(background),string="[".concat(background+10,"m").concat(string,"[49m")));return string},exports.COLOR=void 0;var _globals=__webpack_require__(103),COLOR={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function getColor(color){return"string"==typeof color?COLOR[color.toUpperCase()]||COLOR.WHITE:color}exports.COLOR=COLOR},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.autobind=function(obj){var predefined=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"],proto=Object.getPrototypeOf(obj),propNames=Object.getOwnPropertyNames(proto),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_loop=function(){var key=_step.value;"function"==typeof obj[key]&&(predefined.find(function(name){return key===name})||(obj[key]=obj[key].bind(obj)))},_iterator=propNames[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_loop()}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"global",{enumerable:!0,get:function(){return _globals.global}}),exports.default=exports.lumaStats=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_isBrowser=_interopRequireDefault(__webpack_require__(129)),_globals=__webpack_require__(104),_log=_interopRequireDefault(__webpack_require__(105)),_probe=__webpack_require__(85);__webpack_require__(621);var lumaStats=new(function(){function StatsManager(){(0,_classCallCheck2.default)(this,StatsManager),this.stats=new Map}return(0,_createClass2.default)(StatsManager,[{key:"get",value:function(name){return this.stats.has(name)||this.stats.set(name,new _probe.Stats({id:name})),this.stats.get(name)}}]),StatsManager}());if(exports.lumaStats=lumaStats,_globals.global.luma&&"7.0.1"!==_globals.global.luma.VERSION)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(_globals.global.luma.VERSION," vs ").concat("7.0.1"));_globals.global.luma||(_isBrowser.default&&_log.default.log(1,"luma.gl ".concat("7.0.1"," - ").concat("set luma.log.priority=1 (or higher) to trace rendering"))(),_globals.global.luma=_globals.global.luma||{VERSION:"7.0.1",version:"7.0.1",log:_log.default,stats:lumaStats,globals:{modules:{},nodeIO:{}}});var _default=_globals.global.luma;exports.default=_default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(condition,message){if(!condition)throw new Error(message||"webgl2-polyfill: assertion failed.")}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.GL_PARAMETER_GETTERS=exports.GL_COMPOSITE_PARAMETER_SETTERS=exports.GL_PARAMETER_SETTERS=exports.GL_PARAMETER_DEFAULTS=void 0;var _GL_PARAMETER_DEFAULT,_GL_PARAMETER_SETTERS,_GL_PARAMETER_GETTERS,_toConsumableArray2=_interopRequireDefault(__webpack_require__(49)),_defineProperty2=_interopRequireDefault(__webpack_require__(6)),_utils=__webpack_require__(131),GL_PARAMETER_DEFAULTS=(_GL_PARAMETER_DEFAULT={},(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,3042,!1),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,32773,new Float32Array([0,0,0,0])),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,32777,32774),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,34877,32774),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,32969,1),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,32968,0),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,32971,1),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,32970,0),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,3106,new Float32Array([0,0,0,0])),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,3107,[!0,!0,!0,!0]),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,2884,!1),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,2885,1029),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,2929,!1),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,2931,1),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,2932,513),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,2928,new Float32Array([0,1])),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,2930,!0),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,3024,!0),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,36006,null),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,2886,2305),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,33170,4352),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,2849,1),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,32823,!1),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,32824,0),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,10752,0),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,32938,1),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,32939,!1),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,3089,!1),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,3088,new Int32Array([0,0,1024,1024])),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,2960,!1),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,2961,0),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,2968,4294967295),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,36005,4294967295),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,2962,519),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,2967,0),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,2963,4294967295),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,34816,519),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,36003,0),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,36004,4294967295),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,2964,7680),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,2965,7680),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,2966,7680),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,34817,7680),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,34818,7680),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,34819,7680),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,2978,new Int32Array([0,0,1024,1024])),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,3333,4),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,3317,4),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,37440,!1),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,37441,!1),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,37443,37444),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,35723,4352),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,36010,null),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,35977,!1),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,3330,0),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,3332,0),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,3331,0),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,3314,0),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,32878,0),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,3316,0),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,3315,0),(0,_defineProperty2.default)(_GL_PARAMETER_DEFAULT,32877,0),_GL_PARAMETER_DEFAULT);exports.GL_PARAMETER_DEFAULTS=GL_PARAMETER_DEFAULTS;var enable=function(gl,value,key){return value?gl.enable(key):gl.disable(key)},hint=function(gl,value,key){return gl.hint(key,value)},pixelStorei=function(gl,value,key){return gl.pixelStorei(key,value)},GL_PARAMETER_SETTERS=(_GL_PARAMETER_SETTERS={},(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,3042,enable),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,32773,function(gl,value){return gl.blendColor.apply(gl,(0,_toConsumableArray2.default)(value))}),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,32777,"blendEquation"),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,34877,"blendEquation"),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,32969,"blendFunc"),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,32968,"blendFunc"),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,32971,"blendFunc"),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,32970,"blendFunc"),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,3106,function(gl,value){return gl.clearColor.apply(gl,(0,_toConsumableArray2.default)(value))}),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,3107,function(gl,value){return gl.colorMask.apply(gl,(0,_toConsumableArray2.default)(value))}),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,2884,enable),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,2885,function(gl,value){return gl.cullFace(value)}),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,2929,enable),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,2931,function(gl,value){return gl.clearDepth(value)}),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,2932,function(gl,value){return gl.depthFunc(value)}),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,2928,function(gl,value){return gl.depthRange.apply(gl,(0,_toConsumableArray2.default)(value))}),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,2930,function(gl,value){return gl.depthMask(value)}),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,3024,enable),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,35723,hint),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,36006,function(gl,value){var target=(0,_utils.isWebGL2)(gl)?36009:36160;return gl.bindFramebuffer(target,value)}),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,2886,function(gl,value){return gl.frontFace(value)}),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,33170,hint),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,2849,function(gl,value){return gl.lineWidth(value)}),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,32823,enable),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,32824,"polygonOffset"),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,10752,"polygonOffset"),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,35977,enable),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,32938,"sampleCoverage"),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,32939,"sampleCoverage"),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,3089,enable),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,3088,function(gl,value){return gl.scissor.apply(gl,(0,_toConsumableArray2.default)(value))}),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,2960,enable),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,2961,function(gl,value){return gl.clearStencil(value)}),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,2968,function(gl,value){return gl.stencilMaskSeparate(1028,value)}),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,36005,function(gl,value){return gl.stencilMaskSeparate(1029,value)}),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,2962,"stencilFuncFront"),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,2967,"stencilFuncFront"),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,2963,"stencilFuncFront"),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,34816,"stencilFuncBack"),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,36003,"stencilFuncBack"),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,36004,"stencilFuncBack"),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,2964,"stencilOpFront"),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,2965,"stencilOpFront"),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,2966,"stencilOpFront"),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,34817,"stencilOpBack"),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,34818,"stencilOpBack"),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,34819,"stencilOpBack"),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,2978,function(gl,value){return gl.viewport.apply(gl,(0,_toConsumableArray2.default)(value))}),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,3333,pixelStorei),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,3317,pixelStorei),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,37440,pixelStorei),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,37441,pixelStorei),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,37443,pixelStorei),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,3330,pixelStorei),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,3332,pixelStorei),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,3331,pixelStorei),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,36010,function(gl,value){return gl.bindFramebuffer(36008,value)}),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,3314,pixelStorei),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,32878,pixelStorei),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,3316,pixelStorei),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,3315,pixelStorei),(0,_defineProperty2.default)(_GL_PARAMETER_SETTERS,32877,pixelStorei),_GL_PARAMETER_SETTERS);exports.GL_PARAMETER_SETTERS=GL_PARAMETER_SETTERS;exports.GL_COMPOSITE_PARAMETER_SETTERS={blendEquation:function(gl,values){return gl.blendEquationSeparate(values[32777],values[34877])},blendFunc:function(gl,values){return gl.blendFuncSeparate(values[32969],values[32968],values[32971],values[32970])},polygonOffset:function(gl,values){return gl.polygonOffset(values[32824],values[10752])},sampleCoverage:function(gl,values){return gl.sampleCoverage(values[32938],values[32939])},stencilFuncFront:function(gl,values){return gl.stencilFuncSeparate(1028,values[2962],values[2967],values[2963])},stencilFuncBack:function(gl,values){return gl.stencilFuncSeparate(1029,values[34816],values[36003],values[36004])},stencilOpFront:function(gl,values){return gl.stencilOpSeparate(1028,values[2964],values[2965],values[2966])},stencilOpBack:function(gl,values){return gl.stencilOpSeparate(1029,values[34817],values[34818],values[34819])}};var isEnabled=function(gl,key){return gl.isEnabled(key)},GL_PARAMETER_GETTERS=(_GL_PARAMETER_GETTERS={},(0,_defineProperty2.default)(_GL_PARAMETER_GETTERS,3042,isEnabled),(0,_defineProperty2.default)(_GL_PARAMETER_GETTERS,2884,isEnabled),(0,_defineProperty2.default)(_GL_PARAMETER_GETTERS,2929,isEnabled),(0,_defineProperty2.default)(_GL_PARAMETER_GETTERS,3024,isEnabled),(0,_defineProperty2.default)(_GL_PARAMETER_GETTERS,32823,isEnabled),(0,_defineProperty2.default)(_GL_PARAMETER_GETTERS,32926,isEnabled),(0,_defineProperty2.default)(_GL_PARAMETER_GETTERS,32928,isEnabled),(0,_defineProperty2.default)(_GL_PARAMETER_GETTERS,3089,isEnabled),(0,_defineProperty2.default)(_GL_PARAMETER_GETTERS,2960,isEnabled),(0,_defineProperty2.default)(_GL_PARAMETER_GETTERS,35977,isEnabled),_GL_PARAMETER_GETTERS);exports.GL_PARAMETER_GETTERS=GL_PARAMETER_GETTERS},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(x,y){if(x===y)return!0;var isArrayX=Array.isArray(x)||ArrayBuffer.isView(x),isArrayY=Array.isArray(y)||ArrayBuffer.isView(y);if(isArrayX&&isArrayY&&x.length===y.length){for(var i=0;i<x.length;++i)if(x[i]!==y[i])return!1;return!0}return!1}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.setParameters=function(gl,parameters){for(var key in(0,_unifiedParameterApi.setParameters)(gl,parameters),parameters){var setter=_webglSetterFunctionTable.default[key];setter&&setter(gl,parameters[key],key)}};var _unifiedParameterApi=__webpack_require__(187),_webglSetterFunctionTable=_interopRequireDefault(__webpack_require__(627))},function(module,exports,__webpack_require__){"use strict";(function(global){var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=trackContextState,exports.pushContextState=function(gl){gl.state||trackContextState(gl,{copyState:!1});gl.state.push()},exports.popContextState=function(gl){(0,_utils.assert)(gl.state),gl.state.pop()},exports.deepEqual=exports.clone=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_webglFunctionToParametersTable=_interopRequireDefault(__webpack_require__(631)),_webglParameterTables=__webpack_require__(292),_unifiedParameterApi=__webpack_require__(187),_utils=__webpack_require__(131);exports.clone=function(x){return Array.isArray(x)||ArrayBuffer.isView(x)?x.slice():x};var deepEqual=function(x,y){var isArrayX=Array.isArray(x)||ArrayBuffer.isView(x),isArrayY=Array.isArray(y)||ArrayBuffer.isView(y);if(isArrayX&&isArrayY&&x.length===y.length){for(var i=0;i<x.length;++i)if(x[i]!==y[i])return!1;return!0}return x===y};function installGetterOverride(gl,functionName){var originalGetterFunc=gl[functionName].bind(gl);gl[functionName]=function(){var pname=arguments.length<=0?void 0:arguments[0];return pname in gl.state.cache||(gl.state.cache[pname]=originalGetterFunc.apply(void 0,arguments)),gl.state.enable?gl.state.cache[pname]:originalGetterFunc.apply(void 0,arguments)},Object.defineProperty(gl[functionName],"name",{value:"".concat(functionName,"-from-cache"),configurable:!1})}function installSetterSpy(gl,functionName,setter){var originalSetterFunc=gl[functionName].bind(gl);gl[functionName]=function(){for(var _len=arguments.length,params=new Array(_len),_key=0;_key<_len;_key++)params[_key]=arguments[_key];var _gl$state,_setter=setter.apply(void 0,[gl.state._updateCache].concat(params)),valueChanged=_setter.valueChanged,oldValue=_setter.oldValue;valueChanged&&((_gl$state=gl.state).log.apply(_gl$state,["gl.".concat(functionName)].concat(params)),originalSetterFunc.apply(void 0,params));return oldValue},Object.defineProperty(gl[functionName],"name",{value:"".concat(functionName,"-to-cache"),configurable:!1})}exports.deepEqual=deepEqual;var GLState=function(){function GLState(gl){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref$copyState=_ref.copyState,copyState=void 0!==_ref$copyState&&_ref$copyState,_ref$log=_ref.log,log=void 0===_ref$log?function(){}:_ref$log;(0,_classCallCheck2.default)(this,GLState),this.gl=gl,this.stateStack=[],this.enable=!0,this.cache=copyState?(0,_unifiedParameterApi.getParameters)(gl):Object.assign({},_webglParameterTables.GL_PARAMETER_DEFAULTS),this.log=log,this._updateCache=this._updateCache.bind(this),Object.seal(this)}return(0,_createClass2.default)(GLState,[{key:"push",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.stateStack.push({})}},{key:"pop",value:function(){(0,_utils.assert)(this.stateStack.length>0);var oldValues=this.stateStack[this.stateStack.length-1];(0,_unifiedParameterApi.setParameters)(this.gl,oldValues,this.cache),this.stateStack.pop()}},{key:"_updateCache",value:function(values){var oldValue,valueChanged=!1,oldValues=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(var key in values)(0,_utils.assert)(void 0!==key),deepEqual(values[key],this.cache[key])||(valueChanged=!0,oldValue=this.cache[key],!oldValues||key in oldValues||(oldValues[key]=this.cache[key]),this.cache[key]=values[key]);return{valueChanged:valueChanged,oldValue:oldValue}}}]),GLState}();function trackContextState(gl){var _ref2=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref2$enable=_ref2.enable,enable=void 0===_ref2$enable||_ref2$enable,copyState=_ref2.copyState;if((0,_utils.assert)(void 0!==copyState),!gl.state){var global_=void 0!==global?global:window;for(var key in global_.polyfillContext&&global_.polyfillContext(gl),gl.state=new GLState(gl,{copyState:copyState,enable:enable}),_webglFunctionToParametersTable.default){installSetterSpy(gl,key,_webglFunctionToParametersTable.default[key])}installGetterOverride(gl,"getParameter"),installGetterOverride(gl,"isEnabled")}return gl.state.enable=enable,gl}}).call(this,__webpack_require__(17))},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.isWebGL=isWebGL,exports.isWebGL2=isWebGL2,exports.assertWebGLContext=function(gl){(0,_utils.assert)(isWebGL(gl),ERR_CONTEXT)},exports.assertWebGL2Context=function(gl){(0,_utils.assert)(isWebGL2(gl),ERR_WEBGL2)},exports.setGLContextDefaults=function(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(contextDefaults,{width:1,height:1},options)},exports.createGLContext=function(){var gl,options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_options=options=Object.assign({},contextDefaults,options),width=_options.width,height=_options.height;function onError(message){if(options.throwOnError)throw new Error(message);return null}if(_utils.isBrowser){var _options2=options,canvas=_options2.canvas,targetCanvas=(0,_createCanvas.getCanvas)({canvas:canvas,width:width,height:height,onError:onError});gl=(0,_createBrowserContext.createBrowserContext)(targetCanvas,options)}else gl=(0,_createHeadlessContext.createHeadlessContext)((0,_objectSpread2.default)({},options,{width:width,height:height,onError:onError}));if(!gl)return null;return function(gl){var webGL=isWebGL2(gl)?"WebGL2":"WebGL1",info=(0,_getContextDebugInfo.getContextDebugInfo)(gl),driver=info?"(".concat(info.vendor,",").concat(info.renderer,")"):"",debug=gl.debug?" debug":"";_utils.log.once(1,"".concat(webGL).concat(debug," context ").concat(driver))()}(gl=instrumentGLContext(gl,options)),gl},exports.instrumentGLContext=instrumentGLContext,exports.destroyGLContext=function(gl){var ext=gl.getExtension("STACKGL_destroy_context");ext&&ext.destroy()},exports.resizeGLContext=function(gl){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(gl.canvas){var devicePixelRatio=options.useDevicePixels&&window.devicePixelRatio||1,width="width"in options?options.width:gl.canvas.clientWidth,height="height"in options?options.height:gl.canvas.clientHeight;return gl.canvas.width=width*devicePixelRatio,void(gl.canvas.height=height*devicePixelRatio)}var ext=gl.getExtension("STACKGL_resize_drawingbuffer");ext&&"width"in options&&"height"in options&&ext.resize(options.width,options.height)},exports.ERR_WEBGL2=exports.ERR_WEBGL=exports.ERR_CONTEXT=void 0;var _objectSpread2=_interopRequireDefault(__webpack_require__(36)),_webglStateTracker=__webpack_require__(130),_createHeadlessContext=__webpack_require__(635),_createCanvas=__webpack_require__(189),_createBrowserContext=__webpack_require__(640),_getContextDebugInfo=__webpack_require__(191),_webglUtils=__webpack_require__(14),_utils=__webpack_require__(10),_globals=__webpack_require__(104),ERR_CONTEXT="Invalid WebGLRenderingContext";exports.ERR_CONTEXT=ERR_CONTEXT;var ERR_WEBGL=ERR_CONTEXT;exports.ERR_WEBGL=ERR_WEBGL;var ERR_WEBGL2="Requires WebGL2";function isWebGL(gl){return Boolean(gl&&Number.isFinite(gl._version))}function isWebGL2(gl){return Boolean(gl&&2===gl._version)}exports.ERR_WEBGL2=ERR_WEBGL2;var contextDefaults={webgl2:!0,webgl1:!0,throwOnFailure:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function instrumentGLContext(gl){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(gl._instrumented)return gl;gl._version=gl._version||function(gl){if(void 0!==_webglUtils.WebGL2RenderingContext&&gl instanceof _webglUtils.WebGL2RenderingContext)return 2;return 1}(gl);var _options3=options=Object.assign({},contextDefaults,options),manageState=_options3.manageState,debug=_options3.debug;return manageState&&(0,_webglStateTracker.trackContextState)(gl,{copyState:!1,log:function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _utils.log.log.apply(_utils.log,[1].concat(args))()}}),_utils.isBrowser&&debug&&(_globals.global.makeDebugContext?(gl=_globals.global.makeDebugContext(gl,{debug:debug}),_utils.log.priority=Math.max(_utils.log.priority,1)):_utils.log.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),gl._instrumented=!0,gl}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.uid=function(){var id=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";uidCounters[id]=uidCounters[id]||1;var count=uidCounters[id]++;return"".concat(id,"-").concat(count)},exports.isPowerOfTwo=function(n){return(0,_assert.default)("number"==typeof n,"Input must be a number"),n&&0==(n&n-1)},exports.isObjectEmpty=function(obj){var isEmpty=!0;for(var key in obj){isEmpty=!1;break}return isEmpty};var _assert=_interopRequireDefault(__webpack_require__(190)),uidCounters={}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isWebGL=isWebGL,exports.isWebGL2=isWebGL2,exports.assertWebGLContext=function(gl){(0,_utils.assert)(isWebGL(gl),ERR_CONTEXT)},exports.assertWebGL2Context=function(gl){(0,_utils.assert)(isWebGL2(gl),ERR_WEBGL2)},exports.ERR_WEBGL2=exports.ERR_WEBGL=exports.ERR_CONTEXT=void 0;var _utils=__webpack_require__(10),ERR_CONTEXT="Invalid WebGLRenderingContext";exports.ERR_CONTEXT=ERR_CONTEXT;var ERR_WEBGL=ERR_CONTEXT;exports.ERR_WEBGL=ERR_WEBGL;var ERR_WEBGL2="Requires WebGL2";function isWebGL(gl){return Boolean(gl&&Number.isFinite(gl._version))}function isWebGL2(gl){return Boolean(gl&&2===gl._version)}exports.ERR_WEBGL2=ERR_WEBGL2},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.requestAnimationFrame=function(callback){return"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(callback):setTimeout(callback,1e3/60)},exports.cancelAnimationFrame=function(timerId){return"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(timerId):clearTimeout(timerId)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getGLTypeFromTypedArray=function(arrayOrType){switch(ArrayBuffer.isView(arrayOrType)?arrayOrType.constructor:arrayOrType){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(ERR_TYPE_DEDUCTION)}},exports.getTypedArrayFromGLType=function(glType){var _ref$clamped=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clamped,clamped=void 0===_ref$clamped||_ref$clamped;switch(glType){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return clamped?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}},exports.flipRows=function(_ref2){var data=_ref2.data,width=_ref2.width,height=_ref2.height,_ref2$bytesPerPixel=_ref2.bytesPerPixel,bytesPerPixel=void 0===_ref2$bytesPerPixel?4:_ref2$bytesPerPixel,temp=_ref2.temp,bytesPerRow=width*bytesPerPixel;temp=temp||new Uint8Array(bytesPerRow);for(var y=0;y<height/2;++y){var topOffset=y*bytesPerRow,bottomOffset=(height-y-1)*bytesPerRow;temp.set(data.subarray(topOffset,topOffset+bytesPerRow)),data.copyWithin(topOffset,bottomOffset,bottomOffset+bytesPerRow),data.set(temp,bottomOffset)}},exports.scalePixels=function(_ref3){for(var data=_ref3.data,width=_ref3.width,height=_ref3.height,newWidth=Math.round(width/2),newHeight=Math.round(height/2),newData=new Uint8Array(newWidth*newHeight*4),y=0;y<newHeight;y++)for(var x=0;x<newWidth;x++)for(var c=0;c<4;c++)newData[4*(y*newWidth+x)+c]=data[4*(2*y*width+2*x)+c];return{data:newData,width:newWidth,height:newHeight}};var ERR_TYPE_DEDUCTION="Failed to deduce GL constant from typed array"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getKeyValue=function(gl,name){if("string"!=typeof name)return name;var number=Number(name);if(!isNaN(number))return number;name=name.replace(/^.*\./,"");var value=gl[name];return(0,_utils.assert)(void 0!==value,"Accessing undefined constant GL.".concat(name)),value},exports.getKey=function(gl,value){for(var key in value=Number(value),gl)if(gl[key]===value)return"GL.".concat(key);return String(value)},exports.getKeyType=function(gl,value){for(var key in(0,_utils.assert)(void 0!==value,"undefined key"),value=Number(value),gl)if(gl[key]===value)return"GL.".concat(key);return String(value)};var _utils=__webpack_require__(10)},function(module,exports){function _setPrototypeOf(o,p){return module.exports=_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}module.exports=_setPrototypeOf},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.isFormatSupported=function(gl,format){var info=TEXTURE_FORMATS[format];if(!info)return!1;if(void 0===info.gl1&&void 0===info.gl2)return!0;var value=(0,_webglUtils.isWebGL2)(gl)&&info.gl2||info.gl1;return"string"==typeof value?gl.getExtension(value):value},exports.isLinearFilteringSupported=function(gl,format){var info=TEXTURE_FORMATS[format];switch(info&&info.types[0]){case 5126:return gl.getExtension("OES_texture_float_linear");case 5131:return gl.getExtension("OES_texture_half_float_linear");default:return!0}},exports.TYPE_SIZES=exports.DATA_FORMAT_CHANNELS=exports.TEXTURE_FORMATS=void 0;var _TEXTURE_FORMATS,_DATA_FORMAT_CHANNELS,_TYPE_SIZES,_defineProperty2=_interopRequireDefault(__webpack_require__(6)),_webglUtils=__webpack_require__(14),TEXTURE_FORMATS=(_TEXTURE_FORMATS={},(0,_defineProperty2.default)(_TEXTURE_FORMATS,6407,{dataFormat:6407,types:[5121,33635]}),(0,_defineProperty2.default)(_TEXTURE_FORMATS,6408,{dataFormat:6408,types:[5121,32819,32820]}),(0,_defineProperty2.default)(_TEXTURE_FORMATS,6406,{dataFormat:6406,types:[5121]}),(0,_defineProperty2.default)(_TEXTURE_FORMATS,6409,{dataFormat:6409,types:[5121]}),(0,_defineProperty2.default)(_TEXTURE_FORMATS,6410,{dataFormat:6410,types:[5121]}),(0,_defineProperty2.default)(_TEXTURE_FORMATS,33326,{dataFormat:6403,types:[5126],gl2:!0}),(0,_defineProperty2.default)(_TEXTURE_FORMATS,33328,{dataFormat:33319,types:[5126],gl2:!0}),(0,_defineProperty2.default)(_TEXTURE_FORMATS,34837,{dataFormat:6407,types:[5126],gl2:!0}),(0,_defineProperty2.default)(_TEXTURE_FORMATS,34836,{dataFormat:6408,types:[5126],gl2:!0}),_TEXTURE_FORMATS);exports.TEXTURE_FORMATS=TEXTURE_FORMATS;var DATA_FORMAT_CHANNELS=(_DATA_FORMAT_CHANNELS={},(0,_defineProperty2.default)(_DATA_FORMAT_CHANNELS,6403,1),(0,_defineProperty2.default)(_DATA_FORMAT_CHANNELS,36244,1),(0,_defineProperty2.default)(_DATA_FORMAT_CHANNELS,33319,2),(0,_defineProperty2.default)(_DATA_FORMAT_CHANNELS,33320,2),(0,_defineProperty2.default)(_DATA_FORMAT_CHANNELS,6407,3),(0,_defineProperty2.default)(_DATA_FORMAT_CHANNELS,36248,3),(0,_defineProperty2.default)(_DATA_FORMAT_CHANNELS,6408,4),(0,_defineProperty2.default)(_DATA_FORMAT_CHANNELS,36249,4),(0,_defineProperty2.default)(_DATA_FORMAT_CHANNELS,6402,1),(0,_defineProperty2.default)(_DATA_FORMAT_CHANNELS,34041,1),(0,_defineProperty2.default)(_DATA_FORMAT_CHANNELS,6406,1),(0,_defineProperty2.default)(_DATA_FORMAT_CHANNELS,6409,1),(0,_defineProperty2.default)(_DATA_FORMAT_CHANNELS,6410,2),_DATA_FORMAT_CHANNELS);exports.DATA_FORMAT_CHANNELS=DATA_FORMAT_CHANNELS;var TYPE_SIZES=(_TYPE_SIZES={},(0,_defineProperty2.default)(_TYPE_SIZES,5126,4),(0,_defineProperty2.default)(_TYPE_SIZES,5125,4),(0,_defineProperty2.default)(_TYPE_SIZES,5124,4),(0,_defineProperty2.default)(_TYPE_SIZES,5123,2),(0,_defineProperty2.default)(_TYPE_SIZES,5122,2),(0,_defineProperty2.default)(_TYPE_SIZES,5131,2),(0,_defineProperty2.default)(_TYPE_SIZES,5120,1),(0,_defineProperty2.default)(_TYPE_SIZES,5121,1),_TYPE_SIZES);exports.TYPE_SIZES=TYPE_SIZES},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setPathPrefix=function(prefix){pathPrefix=prefix},exports.loadFile=function(url){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,_utils.assert)("string"==typeof url),url=pathPrefix+url;var dataType=options.dataType||"text";return fetch(url,options).then(function(res){return res[dataType]()})},exports.loadImage=function(url,opts){return(0,_utils.assert)("string"==typeof url),url=pathPrefix+url,new Promise(function(resolve,reject){try{var image=new Image;image.onload=function(){return resolve(image)},image.onerror=function(){return reject(new Error("Could not load image ".concat(url,".")))},image.crossOrigin=opts&&opts.crossOrigin||"anonymous",image.src=url}catch(error){reject(error)}})};var _utils=__webpack_require__(10),pathPrefix=""},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _regenerator=_interopRequireDefault(__webpack_require__(133)),_asyncToGenerator2=_interopRequireDefault(__webpack_require__(134)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_assertThisInitialized2=_interopRequireDefault(__webpack_require__(12)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_texture=_interopRequireDefault(__webpack_require__(86)),_webglUtils=__webpack_require__(14),_utils=__webpack_require__(10),FACES=[34069,34070,34071,34072,34073,34074],TextureCube=function(_Texture){function TextureCube(gl){var _this,props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,_classCallCheck2.default)(this,TextureCube),(0,_webglUtils.assertWebGLContext)(gl),(_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(TextureCube).call(this,gl,Object.assign({},props,{target:34067})))).initialize(props),Object.seal((0,_assertThisInitialized2.default)(_this)),_this}return(0,_inherits2.default)(TextureCube,_Texture),(0,_createClass2.default)(TextureCube,[{key:"initialize",value:function(){var _this2=this,props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_props$mipmaps=props.mipmaps,mipmaps=void 0===_props$mipmaps||_props$mipmaps,_props$parameters=props.parameters,parameters=void 0===_props$parameters?{}:_props$parameters;this.opts=props,this.setCubeMapImageData(props).then(function(){_this2.loaded=!0,mipmaps&&_this2.generateMipmap(props),_this2.setParameters(parameters)})}},{key:"subImage",value:function(_ref){var face=_ref.face,data=_ref.data,_ref$x=_ref.x,x=void 0===_ref$x?0:_ref$x,_ref$y=_ref.y,y=void 0===_ref$y?0:_ref$y,_ref$mipmapLevel=_ref.mipmapLevel,mipmapLevel=void 0===_ref$mipmapLevel?0:_ref$mipmapLevel;return this._subImage({target:face,data:data,x:x,y:y,mipmapLevel:mipmapLevel})}},{key:"setCubeMapImageData",value:function(){var _setCubeMapImageData=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee(_ref2){var width,height,pixels,data,_ref2$border,border,_ref2$format,format,_ref2$type,type,gl,imageDataMap,resolvedFaces,_this3=this;return _regenerator.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return width=_ref2.width,height=_ref2.height,pixels=_ref2.pixels,data=_ref2.data,_ref2$border=_ref2.border,border=void 0===_ref2$border?0:_ref2$border,_ref2$format=_ref2.format,format=void 0===_ref2$format?6408:_ref2$format,_ref2$type=_ref2.type,type=void 0===_ref2$type?5121:_ref2$type,gl=this.gl,imageDataMap=pixels||data,_context.next=5,Promise.all(FACES.map(function(face){var facePixels=imageDataMap[face];return Promise.all(Array.isArray(facePixels)?facePixels:[facePixels])}));case 5:resolvedFaces=_context.sent,this.bind(),FACES.forEach(function(face,index){resolvedFaces[index].length>1&&!1!==_this3.opts.mipmaps&&_utils.log.warn("".concat(_this3.id," has mipmap and multiple LODs."))(),resolvedFaces[index].forEach(function(image,lodLevel){width&&height?gl.texImage2D(face,lodLevel,format,width,height,border,format,type,image):gl.texImage2D(face,lodLevel,format,format,type,image)})}),this.unbind();case 9:case"end":return _context.stop()}},_callee,this)}));return function(_x){return _setCubeMapImageData.apply(this,arguments)}}()},{key:"setImageDataForFace",value:function(options){var _this4=this,face=options.face,width=options.width,height=options.height,pixels=options.pixels,data=options.data,_options$border=options.border,border=void 0===_options$border?0:_options$border,_options$format=options.format,format=void 0===_options$format?6408:_options$format,_options$type=options.type,type=void 0===_options$type?5121:_options$type,gl=this.gl,imageData=pixels||data;return this.bind(),imageData instanceof Promise?imageData.then(function(resolvedImageData){return _this4.setImageDataForFace(Object.assign({},options,{face:face,data:resolvedImageData,pixels:resolvedImageData}))}):this.width||this.height?gl.texImage2D(face,0,format,width,height,border,format,type,imageData):gl.texImage2D(face,0,format,format,type,imageData),this}}]),TextureCube}(_texture.default);exports.default=TextureCube,TextureCube.FACES=FACES},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_assertThisInitialized2=_interopRequireDefault(__webpack_require__(12)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_context=__webpack_require__(106),_webglUtils=__webpack_require__(14),_texture=_interopRequireDefault(__webpack_require__(86)),_textureFormats=__webpack_require__(303),_buffer=_interopRequireDefault(__webpack_require__(61)),Texture3D=function(_Texture){function Texture3D(gl){var _this,props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,_classCallCheck2.default)(this,Texture3D),(0,_webglUtils.assertWebGL2Context)(gl),props=Object.assign({depth:1},props,{target:32879,unpackFlipY:!1}),(_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Texture3D).call(this,gl,props))).initialize(props),Object.seal((0,_assertThisInitialized2.default)(_this)),_this}return(0,_inherits2.default)(Texture3D,_Texture),(0,_createClass2.default)(Texture3D,null,[{key:"isSupported",value:function(gl){return(0,_webglUtils.isWebGL2)(gl)}}]),(0,_createClass2.default)(Texture3D,[{key:"setImageData",value:function(_ref){var _this2=this,_ref$level=_ref.level,level=void 0===_ref$level?0:_ref$level,_ref$dataFormat=_ref.dataFormat,dataFormat=void 0===_ref$dataFormat?6408:_ref$dataFormat,width=_ref.width,height=_ref.height,_ref$depth=_ref.depth,depth=void 0===_ref$depth?1:_ref$depth,_ref$border=_ref.border,border=void 0===_ref$border?0:_ref$border,format=_ref.format,_ref$type=_ref.type,type=void 0===_ref$type?5121:_ref$type,_ref$offset=_ref.offset,offset=void 0===_ref$offset?0:_ref$offset,data=_ref.data,_ref$parameters=_ref.parameters,parameters=void 0===_ref$parameters?{}:_ref$parameters;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),(0,_context.withParameters)(this.gl,parameters,function(){ArrayBuffer.isView(data)&&_this2.gl.texImage3D(_this2.target,level,dataFormat,width,height,depth,border,format,type,data),data instanceof _buffer.default&&(_this2.gl.bindBuffer(35052,data.handle),_this2.gl.texImage3D(_this2.target,level,dataFormat,width,height,depth,border,format,type,offset))}),data&&data.byteLength)this._trackAllocatedMemory(data.byteLength,"Texture");else{var channels=_textureFormats.DATA_FORMAT_CHANNELS[this.dataFormat]||4,channelSize=_textureFormats.TYPE_SIZES[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*channels*channelSize,"Texture")}return this.loaded=!0,this}}]),Texture3D}(_texture.default);exports.default=Texture3D},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.clear=function(gl){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref$framebuffer=_ref.framebuffer,framebuffer=void 0===_ref$framebuffer?null:_ref$framebuffer,_ref$color=_ref.color,color=void 0===_ref$color?null:_ref$color,_ref$depth=_ref.depth,depth=void 0===_ref$depth?null:_ref$depth,_ref$stencil=_ref.stencil,stencil=void 0===_ref$stencil?null:_ref$stencil,parameters={};framebuffer&&(parameters.framebuffer=framebuffer);var clearFlags=0;color&&(clearFlags|=GL_COLOR_BUFFER_BIT,!0!==color&&(parameters.clearColor=color));depth&&(clearFlags|=GL_DEPTH_BUFFER_BIT,!0!==depth&&(parameters.clearDepth=depth));stencil&&(clearFlags|=GL_STENCIL_BUFFER_BIT,!0!==depth&&(parameters.clearStencil=depth));(0,_utils.assert)(0!==clearFlags,ERR_ARGUMENTS),(0,_context.withParameters)(gl,parameters,function(){gl.clear(clearFlags)})},exports.clearBuffer=function(gl){var _ref2=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref2$framebuffer=_ref2.framebuffer,framebuffer=void 0===_ref2$framebuffer?null:_ref2$framebuffer,_ref2$buffer=_ref2.buffer,buffer=void 0===_ref2$buffer?GL_COLOR:_ref2$buffer,_ref2$drawBuffer=_ref2.drawBuffer,drawBuffer=void 0===_ref2$drawBuffer?0:_ref2$drawBuffer,_ref2$value=_ref2.value,value=void 0===_ref2$value?[0,0,0,0]:_ref2$value;(0,_webglUtils.assertWebGL2Context)(gl),(0,_context.withParameters)(gl,{framebuffer:framebuffer},function(){switch(buffer){case GL_COLOR:switch(value.constructor){case Int32Array:gl.clearBufferiv(buffer,drawBuffer,value);break;case Uint32Array:gl.clearBufferuiv(buffer,drawBuffer,value);break;case Float32Array:default:gl.clearBufferfv(buffer,drawBuffer,value)}break;case GL_DEPTH:gl.clearBufferfv(GL_DEPTH,0,[value]);break;case GL_STENCIL:gl.clearBufferiv(GL_STENCIL,0,[value]);break;case GL_DEPTH_STENCIL:var _value=(0,_slicedToArray2.default)(value,2),depth=_value[0],stencil=_value[1];gl.clearBufferfi(GL_DEPTH_STENCIL,0,depth,stencil);break;default:(0,_utils.assert)(!1,ERR_ARGUMENTS)}})};var _slicedToArray2=_interopRequireDefault(__webpack_require__(11)),_context=__webpack_require__(106),_webglUtils=__webpack_require__(14),_utils=__webpack_require__(10),GL_DEPTH_BUFFER_BIT=256,GL_STENCIL_BUFFER_BIT=1024,GL_COLOR_BUFFER_BIT=16384,GL_COLOR=6144,GL_DEPTH=6145,GL_STENCIL=6146,GL_DEPTH_STENCIL=34041,ERR_ARGUMENTS="clear: bad arguments"},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.readPixelsToArray=readPixelsToArray,exports.readPixelsToBuffer=function(source,_ref2){var _ref2$sourceX=_ref2.sourceX,sourceX=void 0===_ref2$sourceX?0:_ref2$sourceX,_ref2$sourceY=_ref2.sourceY,sourceY=void 0===_ref2$sourceY?0:_ref2$sourceY,_ref2$sourceFormat=_ref2.sourceFormat,sourceFormat=void 0===_ref2$sourceFormat?6408:_ref2$sourceFormat,_ref2$target=_ref2.target,target=void 0===_ref2$target?null:_ref2$target,_ref2$targetByteOffse=_ref2.targetByteOffset,targetByteOffset=void 0===_ref2$targetByteOffse?0:_ref2$targetByteOffse,sourceWidth=_ref2.sourceWidth,sourceHeight=_ref2.sourceHeight,sourceType=_ref2.sourceType,_getFramebuffer2=getFramebuffer(source),framebuffer=_getFramebuffer2.framebuffer,deleteFramebuffer=_getFramebuffer2.deleteFramebuffer;(0,_utils.assert)(framebuffer);var gl=framebuffer.gl;if(sourceWidth=sourceWidth||framebuffer.width,sourceHeight=sourceHeight||framebuffer.height,(0,_webglUtils.assertWebGL2Context)(gl),sourceType=sourceType||(target?target.type:5121),!target){var components=(0,_formatUtils.glFormatToComponents)(sourceFormat),byteCount=(0,_formatUtils.glTypeToBytes)(sourceType),byteLength=targetByteOffset+sourceWidth*sourceHeight*components*byteCount;target=new _buffer.default(gl,{byteLength:byteLength,accessor:{type:sourceType,size:components}})}target.bind({target:35051}),(0,_context.withParameters)(gl,{framebuffer:framebuffer},function(){gl.readPixels(sourceX,sourceY,sourceWidth,sourceHeight,sourceFormat,sourceType,targetByteOffset)}),target.unbind({target:35051}),deleteFramebuffer&&framebuffer.delete();return target},exports.copyToDataUrl=copyToDataUrl,exports.copyToImage=function(source){var _ref4=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref4$sourceAttachmen=_ref4.sourceAttachment,sourceAttachment=void 0===_ref4$sourceAttachmen?36064:_ref4$sourceAttachmen,_ref4$targetImage=_ref4.targetImage,targetImage=void 0===_ref4$targetImage?null:_ref4$targetImage,dataUrl=copyToDataUrl(source,{sourceAttachment:sourceAttachment});return(targetImage=targetImage||new Image).src=dataUrl,targetImage},exports.copyToTexture=function(source,target){var _ref5=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},_ref5$sourceX=_ref5.sourceX,sourceX=void 0===_ref5$sourceX?0:_ref5$sourceX,_ref5$sourceY=_ref5.sourceY,sourceY=void 0===_ref5$sourceY?0:_ref5$sourceY,targetX=_ref5.targetX,targetY=_ref5.targetY,targetZ=_ref5.targetZ,_ref5$targetMipmaplev=_ref5.targetMipmaplevel,targetMipmaplevel=void 0===_ref5$targetMipmaplev?0:_ref5$targetMipmaplev,_ref5$targetInternalF=_ref5.targetInternalFormat,targetInternalFormat=void 0===_ref5$targetInternalF?6408:_ref5$targetInternalF,width=_ref5.width,height=_ref5.height,_getFramebuffer3=getFramebuffer(source),framebuffer=_getFramebuffer3.framebuffer,deleteFramebuffer=_getFramebuffer3.deleteFramebuffer;(0,_utils.assert)(framebuffer);var gl=framebuffer.gl,handle=framebuffer.handle,isSubCopy=void 0!==targetX||void 0!==targetY||void 0!==targetZ;targetX=targetX||0,targetY=targetY||0,targetZ=targetZ||0;var prevHandle=gl.bindFramebuffer(36160,handle);(0,_utils.assert)(target);var texture=null;target instanceof _texture.default&&(texture=target,width=Number.isFinite(width)?width:texture.width,height=Number.isFinite(height)?height:texture.height,texture.bind(0),target=texture.target);if(isSubCopy)switch(target){case 3553:case 34067:gl.copyTexSubImage2D(target,targetMipmaplevel,targetX,targetY,sourceX,sourceY,width,height);break;case 35866:case 32879:gl.copyTexSubImage3D(target,targetMipmaplevel,targetX,targetY,targetZ,sourceX,sourceY,width,height)}else gl.copyTexImage2D(target,targetMipmaplevel,targetInternalFormat,sourceX,sourceY,width,height,0);texture&&texture.unbind();gl.bindFramebuffer(36160,prevHandle||null),deleteFramebuffer&&framebuffer.delete();return texture},exports.blit=function(source,target){var _ref6=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},_ref6$sourceAttachmen=_ref6.sourceAttachment,sourceAttachment=void 0===_ref6$sourceAttachmen?36064:_ref6$sourceAttachmen,_ref6$sourceX=_ref6.sourceX0,sourceX0=void 0===_ref6$sourceX?0:_ref6$sourceX,_ref6$sourceY=_ref6.sourceY0,sourceY0=void 0===_ref6$sourceY?0:_ref6$sourceY,sourceX1=_ref6.sourceX1,sourceY1=_ref6.sourceY1,_ref6$targetX=_ref6.targetX0,targetX0=void 0===_ref6$targetX?0:_ref6$targetX,_ref6$targetY=_ref6.targetY0,targetY0=void 0===_ref6$targetY?0:_ref6$targetY,targetX1=_ref6.targetX1,targetY1=_ref6.targetY1,_ref6$color=_ref6.color,color=void 0===_ref6$color||_ref6$color,_ref6$depth=_ref6.depth,depth=void 0!==_ref6$depth&&_ref6$depth,_ref6$stencil=_ref6.stencil,stencil=void 0!==_ref6$stencil&&_ref6$stencil,_ref6$mask=_ref6.mask,mask=void 0===_ref6$mask?0:_ref6$mask,_ref6$filter=_ref6.filter,filter=void 0===_ref6$filter?9728:_ref6$filter,_getFramebuffer4=getFramebuffer(source),srcFramebuffer=_getFramebuffer4.framebuffer,deleteSrcFramebuffer=_getFramebuffer4.deleteFramebuffer,_getFramebuffer5=getFramebuffer(target),dstFramebuffer=_getFramebuffer5.framebuffer,deleteDstFramebuffer=_getFramebuffer5.deleteFramebuffer;(0,_utils.assert)(srcFramebuffer),(0,_utils.assert)(dstFramebuffer);var gl=dstFramebuffer.gl,handle=dstFramebuffer.handle,width=dstFramebuffer.width,height=dstFramebuffer.height,readBuffer=dstFramebuffer.readBuffer;(0,_webglUtils.assertWebGL2Context)(gl),srcFramebuffer.handle||36064!==sourceAttachment||(sourceAttachment=1028);color&&(mask|=16384);depth&&(mask|=256);stencil&&(mask|=1024);(deleteSrcFramebuffer||deleteDstFramebuffer)&&1280&mask&&(mask=16384,_utils.log.warn("Blitting from or into a Texture object, forcing mask to GL.COLOR_BUFFER_BIT")());(0,_utils.assert)(mask),sourceX1=void 0===sourceX1?srcFramebuffer.width:sourceX1,sourceY1=void 0===sourceY1?srcFramebuffer.height:sourceY1,targetX1=void 0===targetX1?width:targetX1,targetY1=void 0===targetY1?height:targetY1;var prevDrawHandle=gl.bindFramebuffer(36009,handle),prevReadHandle=gl.bindFramebuffer(36008,srcFramebuffer.handle);gl.readBuffer(sourceAttachment),gl.blitFramebuffer(sourceX0,sourceY0,sourceX1,sourceY1,targetX0,targetY0,targetX1,targetY1,mask,filter),gl.readBuffer(readBuffer),gl.bindFramebuffer(36008,prevReadHandle||null),gl.bindFramebuffer(36009,prevDrawHandle||null),deleteSrcFramebuffer&&srcFramebuffer.delete();deleteDstFramebuffer&&dstFramebuffer.delete();return dstFramebuffer};var _buffer=_interopRequireDefault(__webpack_require__(61)),_framebuffer=_interopRequireDefault(__webpack_require__(107)),_texture=_interopRequireDefault(__webpack_require__(86)),_context=__webpack_require__(106),_webglUtils=__webpack_require__(14),_typedArrayUtils=__webpack_require__(300),_formatUtils=__webpack_require__(644),_textureUtils=__webpack_require__(192),_utils=__webpack_require__(10);function readPixelsToArray(source){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref$sourceX=_ref.sourceX,sourceX=void 0===_ref$sourceX?0:_ref$sourceX,_ref$sourceY=_ref.sourceY,sourceY=void 0===_ref$sourceY?0:_ref$sourceY,_ref$sourceFormat=_ref.sourceFormat,sourceFormat=void 0===_ref$sourceFormat?6408:_ref$sourceFormat,_ref$sourceAttachment=_ref.sourceAttachment,sourceAttachment=void 0===_ref$sourceAttachment?36064:_ref$sourceAttachment,_ref$target=_ref.target,target=void 0===_ref$target?null:_ref$target,sourceWidth=_ref.sourceWidth,sourceHeight=_ref.sourceHeight,sourceType=_ref.sourceType,_getFramebuffer=getFramebuffer(source),framebuffer=_getFramebuffer.framebuffer,deleteFramebuffer=_getFramebuffer.deleteFramebuffer;(0,_utils.assert)(framebuffer);var gl=framebuffer.gl,handle=framebuffer.handle,attachments=framebuffer.attachments;sourceWidth=sourceWidth||framebuffer.width,sourceHeight=sourceHeight||framebuffer.height,36064===sourceAttachment&&null===handle&&(sourceAttachment=1028),(0,_utils.assert)(attachments[sourceAttachment]),target=function(pixelArray,type,format,width,height){if(pixelArray)return pixelArray;type=type||5121;var ArrayType=(0,_typedArrayUtils.getTypedArrayFromGLType)(type,{clamped:!1}),components=(0,_formatUtils.glFormatToComponents)(format);return new ArrayType(width*height*components)}(target,sourceType=sourceType||attachments[sourceAttachment].type,sourceFormat,sourceWidth,sourceHeight),sourceType=sourceType||(0,_typedArrayUtils.getGLTypeFromTypedArray)(target);var prevHandle=gl.bindFramebuffer(36160,handle);return gl.readPixels(sourceX,sourceY,sourceWidth,sourceHeight,sourceFormat,sourceType,target),gl.bindFramebuffer(36160,prevHandle||null),deleteFramebuffer&&framebuffer.delete(),target}function copyToDataUrl(source){for(var _ref3=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref3$sourceAttachmen=_ref3.sourceAttachment,sourceAttachment=void 0===_ref3$sourceAttachmen?36064:_ref3$sourceAttachmen,_ref3$targetMaxHeight=_ref3.targetMaxHeight,targetMaxHeight=void 0===_ref3$targetMaxHeight?Number.MAX_SAFE_INTEGER:_ref3$targetMaxHeight,data=readPixelsToArray(source,{sourceAttachment:sourceAttachment}),width=source.width,height=source.height;height>targetMaxHeight;){var _scalePixels=(0,_webglUtils.scalePixels)({data:data,width:width,height:height});data=_scalePixels.data,width=_scalePixels.width,height=_scalePixels.height}(0,_webglUtils.flipRows)({data:data,width:width,height:height});var canvas=document.createElement("canvas");canvas.width=width,canvas.height=height;var context=canvas.getContext("2d"),imageData=context.createImageData(width,height);return imageData.data.set(data),context.putImageData(imageData,0,0),canvas.toDataURL()}function getFramebuffer(source){return source instanceof _framebuffer.default?{framebuffer:source,deleteFramebuffer:!1}:{framebuffer:(0,_textureUtils.toFramebuffer)(source),deleteFramebuffer:!0}}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"getContextInfo",{enumerable:!0,get:function(){return _limits.getContextInfo}}),Object.defineProperty(exports,"getGLContextInfo",{enumerable:!0,get:function(){return _limits.getGLContextInfo}}),Object.defineProperty(exports,"getContextLimits",{enumerable:!0,get:function(){return _limits.getContextLimits}}),Object.defineProperty(exports,"FEATURES",{enumerable:!0,get:function(){return _webglFeaturesTable.FEATURES}}),Object.defineProperty(exports,"hasFeature",{enumerable:!0,get:function(){return _features.hasFeature}}),Object.defineProperty(exports,"hasFeatures",{enumerable:!0,get:function(){return _features.hasFeatures}}),Object.defineProperty(exports,"getFeatures",{enumerable:!0,get:function(){return _features.getFeatures}}),Object.defineProperty(exports,"canCompileGLGSExtension",{enumerable:!0,get:function(){return _checkGlslExtension.default}});var _limits=__webpack_require__(310),_webglFeaturesTable=__webpack_require__(135),_features=__webpack_require__(311),_checkGlslExtension=_interopRequireDefault(__webpack_require__(312))},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.getContextLimits=getContextLimits,exports.getGLContextInfo=getGLContextInfo,exports.getContextInfo=function(gl){return Object.assign((0,_getContextDebugInfo.getContextDebugInfo)(gl),{limits:getContextLimits(gl),info:getGLContextInfo(gl),webgl1MinLimits:gl.luma.webgl1MinLimits,webgl2MinLimits:gl.luma.webgl2MinLimits})};var _defineProperty2=_interopRequireDefault(__webpack_require__(6)),_webglUtils=__webpack_require__(14),_webglLimitsTable=_interopRequireDefault(__webpack_require__(645)),_getContextDebugInfo=__webpack_require__(191);function getContextLimits(gl){if(gl.luma=gl.luma||{},!gl.luma.limits){gl.luma.limits={},gl.luma.webgl1MinLimits={},gl.luma.webgl2MinLimits={};var isWebgl2=(0,_webglUtils.isWebGL2)(gl);for(var parameter in _webglLimitsTable.default){var limit=_webglLimitsTable.default[parameter],webgl1MinLimit=limit.gl1,webgl2MinLimit="gl2"in limit?limit.gl2:limit.gl1,minLimit=isWebgl2?webgl2MinLimit:webgl1MinLimit,value="gl2"in limit&&!isWebgl2||"extension"in limit&&!gl.getExtension(limit.extension)?minLimit:gl.getParameter(parameter);gl.luma.limits[parameter]=value,gl.luma.webgl1MinLimits[parameter]=webgl1MinLimit,gl.luma.webgl2MinLimits[parameter]=webgl2MinLimit}}return gl.luma.limits}function getGLContextInfo(gl){gl.luma=gl.luma||{};var _gl$luma$info,info=(0,_getContextDebugInfo.getContextDebugInfo)(gl);gl.luma.info||(gl.luma.info=(_gl$luma$info={},(0,_defineProperty2.default)(_gl$luma$info,37445,info.vendor),(0,_defineProperty2.default)(_gl$luma$info,37446,info.renderer),(0,_defineProperty2.default)(_gl$luma$info,7936,info.vendorMasked),(0,_defineProperty2.default)(_gl$luma$info,7937,info.rendererMasked),(0,_defineProperty2.default)(_gl$luma$info,7938,info.version),(0,_defineProperty2.default)(_gl$luma$info,35724,info.shadingLanguageVersion),_gl$luma$info));return gl.luma.info}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.hasFeature=function(gl,feature){return hasFeatures(gl,feature)},exports.hasFeatures=hasFeatures,exports.getFeatures=function(gl){if(gl.luma=gl.luma||{},!gl.luma.caps)for(var cap in gl.luma.caps={},gl.luma.caps.webgl2=(0,_webglUtils.isWebGL2)(gl),_webglFeaturesTable.default)gl.luma.caps[cap]=isFeatureSupported(gl,cap);return gl.luma.caps};var _webglFeaturesTable=_interopRequireDefault(__webpack_require__(135)),_webglUtils=__webpack_require__(14),_utils=__webpack_require__(10);function hasFeatures(gl,features){return(features=Array.isArray(features)?features:[features]).every(function(feature){return isFeatureSupported(gl,feature)})}function isFeatureSupported(gl,cap){var feature=_webglFeaturesTable.default[cap];(0,_utils.assert)(feature,cap);var isSupported,featureDefinition=(0,_webglUtils.isWebGL2)(gl)&&feature[1]||feature[0];if("function"==typeof featureDefinition)isSupported=featureDefinition(gl);else if(Array.isArray(featureDefinition)){isSupported=!0;var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=featureDefinition[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var extension=_step.value;isSupported=isSupported&&Boolean(gl.getExtension(extension))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}else"string"==typeof featureDefinition?isSupported=Boolean(gl.getExtension(featureDefinition)):"boolean"==typeof featureDefinition?isSupported=featureDefinition:(0,_utils.assert)(!1);return isSupported}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(gl,cap){var options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},feature=_webglFeaturesTable.default[cap];if((0,_utils.assert)(feature,cap),!(0,_checkOldIe.default)(options))return!0;if(cap in compiledGlslExtensions)return compiledGlslExtensions[cap];var extensionName=feature[0],source="#extension GL_".concat(extensionName," : enable\nvoid main(void) {}"),shader=gl.createShader(35633);gl.shaderSource(shader,source),gl.compileShader(shader);var canCompile=gl.getShaderParameter(shader,35713);return gl.deleteShader(shader),compiledGlslExtensions[cap]=canCompile,canCompile};var _checkOldIe=_interopRequireDefault(__webpack_require__(646)),_webglFeaturesTable=_interopRequireDefault(__webpack_require__(135)),_utils=__webpack_require__(10),compiledGlslExtensions={}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.FragmentShader=exports.VertexShader=exports.Shader=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_glslUtils=__webpack_require__(647),_webglUtils=__webpack_require__(14),_utils=__webpack_require__(10),_resource=_interopRequireDefault(__webpack_require__(50)),ERR_SOURCE="Shader: GLSL source code must be a JavaScript string",Shader=function(_Resource){function Shader(gl,props){var _this;(0,_classCallCheck2.default)(this,Shader),(0,_webglUtils.assertWebGLContext)(gl),(0,_utils.assert)("string"==typeof props.source,ERR_SOURCE);var id=(0,_glslUtils.getShaderName)(props.source,null)||props.id||(0,_utils.uid)("unnamed ".concat(Shader.getTypeName(props.shaderType)));return(_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Shader).call(this,gl,{id:id}))).shaderType=props.shaderType,_this.source=props.source,_this.initialize(props),_this}return(0,_inherits2.default)(Shader,_Resource),(0,_createClass2.default)(Shader,null,[{key:"getTypeName",value:function(shaderType){switch(shaderType){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return(0,_utils.assert)(!1),"unknown"}}}]),(0,_createClass2.default)(Shader,[{key:"initialize",value:function(_ref){var source=_ref.source,shaderName=(0,_glslUtils.getShaderName)(source,null);shaderName&&(this.id=(0,_utils.uid)(shaderName)),this._compile(source)}},{key:"getParameter",value:function(pname){return this.gl.getShaderParameter(this.handle,pname)}},{key:"toString",value:function(){return"".concat(Shader.getTypeName(this.shaderType),":").concat(this.id)}},{key:"getName",value:function(){return(0,_glslUtils.getShaderName)(this.source)||"unnamed-shader"}},{key:"getSource",value:function(){return this.gl.getShaderSource(this.handle)}},{key:"getTranslatedSource",value:function(){var extension=this.gl.getExtension("WEBGL.debug_shaders");return extension?extension.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL.debug_shaders not implemented"}},{key:"_compile",value:function(){if(this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){var infoLog=this.gl.getShaderInfoLog(this.handle),_parseGLSLCompilerErr=(0,_glslUtils.parseGLSLCompilerError)(infoLog,this.source,this.shaderType,this.id),shaderName=_parseGLSLCompilerErr.shaderName,errors=_parseGLSLCompilerErr.errors,warnings=_parseGLSLCompilerErr.warnings;throw _utils.log.error("GLSL compilation errors in ".concat(shaderName,"\n").concat(errors))(),_utils.log.warn("GLSL compilation warnings in ".concat(shaderName,"\n").concat(warnings))(),new Error("GLSL compilation errors in ".concat(shaderName))}}},{key:"_deleteHandle",value:function(){this.gl.deleteShader(this.handle)}},{key:"_getOptsFromHandle",value:function(){return{type:this.getParameter(35663),source:this.getSource()}}}]),Shader}(_resource.default);exports.Shader=Shader;var VertexShader=function(_Shader){function VertexShader(gl,props){return(0,_classCallCheck2.default)(this,VertexShader),"string"==typeof props&&(props={source:props}),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(VertexShader).call(this,gl,Object.assign({},props,{shaderType:35633})))}return(0,_inherits2.default)(VertexShader,_Shader),(0,_createClass2.default)(VertexShader,[{key:"_createHandle",value:function(){return this.gl.createShader(35633)}}]),VertexShader}(Shader);exports.VertexShader=VertexShader;var FragmentShader=function(_Shader2){function FragmentShader(gl,props){return(0,_classCallCheck2.default)(this,FragmentShader),"string"==typeof props&&(props={source:props}),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(FragmentShader).call(this,gl,Object.assign({},props,{shaderType:35632})))}return(0,_inherits2.default)(FragmentShader,_Shader2),(0,_createClass2.default)(FragmentShader,[{key:"_createHandle",value:function(){return this.gl.createShader(35632)}}]),FragmentShader}(Shader);exports.FragmentShader=FragmentShader},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(type){switch(type){case GL_FRAGMENT_SHADER:return"fragment";case GL_VERTEX_SHADER:return"vertex";default:return"unknown type"}};var GL_FRAGMENT_SHADER=35632,GL_VERTEX_SHADER=35633},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(source){var version=100,words=source.match(/[^\s]+/g);if(words.length>=2&&"#version"===words[0]){var v=parseInt(words[1],10);Number.isFinite(v)&&(version=v)}return version}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseUniformName=function(name){if("]"!==name[name.length-1])return{name:name,length:1,isArray:!1};var matches=name.match(/([^[]*)(\[[0-9]+\])?/);if(!matches||matches.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(name));return{name:matches[1],length:matches[2]||1,isArray:Boolean(matches[2])}},exports.getUniformSetter=function(gl,location,info){var setter=UNIFORM_SETTERS[info.type];if(!setter)throw new Error("Unknown GLSL uniform type ".concat(info.type));return setter.bind(null,gl,location)},exports.checkUniformValues=function(uniforms,source,uniformMap){for(var uniformName in uniforms){var value=uniforms[uniformName],shouldCheck=!uniformMap||Boolean(uniformMap[uniformName]);if(shouldCheck&&!checkUniformValue(value))throw source=source?"".concat(source," "):"",console.error("".concat(source," Bad uniform ").concat(uniformName),value),new Error("".concat(source," Bad uniform ").concat(uniformName))}return!0},exports.areUniformsEqual=function(uniform1,uniform2){if(Array.isArray(uniform1)||ArrayBuffer.isView(uniform1)){if(!uniform2)return!1;var len=uniform1.length;if(uniform2.length!==len)return!1;for(var i=0;i<len;i++)if(uniform1[i]!==uniform2[i])return!1;return!0}return uniform1===uniform2},exports.getUniformCopy=function(uniform){if(Array.isArray(uniform)||ArrayBuffer.isView(uniform))return uniform.slice();return uniform};var _UNIFORM_SETTERS,_defineProperty2=_interopRequireDefault(__webpack_require__(6)),_framebuffer=_interopRequireDefault(__webpack_require__(107)),_renderbuffer=_interopRequireDefault(__webpack_require__(194)),_texture=_interopRequireDefault(__webpack_require__(86)),_utils=__webpack_require__(10),UNIFORM_SETTERS=(_UNIFORM_SETTERS={},(0,_defineProperty2.default)(_UNIFORM_SETTERS,5126,function(gl,location,value){return gl.uniform1fv(location,toFloatArray(value,1))}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,35664,function(gl,location,value){return gl.uniform2fv(location,toFloatArray(value,2))}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,35665,function(gl,location,value){return gl.uniform3fv(location,toFloatArray(value,3))}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,35666,function(gl,location,value){return gl.uniform4fv(location,toFloatArray(value,4))}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,5124,function(gl,location,value){return gl.uniform1iv(location,toIntArray(value,1))}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,35667,function(gl,location,value){return gl.uniform2iv(location,toIntArray(value,2))}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,35668,function(gl,location,value){return gl.uniform3iv(location,toIntArray(value,3))}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,35669,function(gl,location,value){return gl.uniform4iv(location,toIntArray(value,4))}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,35670,function(gl,location,value){return gl.uniform1iv(location,toIntArray(value,1))}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,35671,function(gl,location,value){return gl.uniform2iv(location,toIntArray(value,2))}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,35672,function(gl,location,value){return gl.uniform3iv(location,toIntArray(value,3))}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,35673,function(gl,location,value){return gl.uniform4iv(location,toIntArray(value,4))}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,35674,function(gl,location,value){return gl.uniformMatrix2fv(location,!1,toFloatArray(value,4))}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,35675,function(gl,location,value){return gl.uniformMatrix3fv(location,!1,toFloatArray(value,9))}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,35676,function(gl,location,value){return gl.uniformMatrix4fv(location,!1,toFloatArray(value,16))}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,35678,function(gl,location,value){return gl.uniform1i(location,value)}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,35680,function(gl,location,value){return gl.uniform1i(location,value)}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,5125,function(gl,location,value){return gl.uniform1uiv(location,toUIntArray(value,1))}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,36294,function(gl,location,value){return gl.uniform2uiv(location,toUIntArray(value,2))}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,36295,function(gl,location,value){return gl.uniform3uiv(location,toUIntArray(value,3))}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,36296,function(gl,location,value){return gl.uniform4uiv(location,toUIntArray(value,4))}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,35685,function(gl,location,value){return gl.uniformMatrix2x3fv(location,!1,toFloatArray(value,6))}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,35686,function(gl,location,value){return gl.uniformMatrix2x4fv(location,!1,toFloatArray(value,8))}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,35687,function(gl,location,value){return gl.uniformMatrix3x2fv(location,!1,toFloatArray(value,6))}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,35688,function(gl,location,value){return gl.uniformMatrix3x4fv(location,!1,toFloatArray(value,12))}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,35689,function(gl,location,value){return gl.uniformMatrix4x2fv(location,!1,toFloatArray(value,8))}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,35690,function(gl,location,value){return gl.uniformMatrix4x3fv(location,!1,toFloatArray(value,12))}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,35679,function(gl,location,value){return gl.uniform1i(location,value)}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,35682,function(gl,location,value){return gl.uniform1i(location,value)}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,36289,function(gl,location,value){return gl.uniform1i(location,value)}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,36292,function(gl,location,value){return gl.uniform1i(location,value)}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,36293,function(gl,location,value){return gl.uniform1i(location,value)}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,36298,function(gl,location,value){return gl.uniform1i(location,value)}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,36299,function(gl,location,value){return gl.uniform1i(location,value)}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,36300,function(gl,location,value){return gl.uniform1i(location,value)}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,36303,function(gl,location,value){return gl.uniform1i(location,value)}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,36306,function(gl,location,value){return gl.uniform1i(location,value)}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,36307,function(gl,location,value){return gl.uniform1i(location,value)}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,36308,function(gl,location,value){return gl.uniform1i(location,value)}),(0,_defineProperty2.default)(_UNIFORM_SETTERS,36311,function(gl,location,value){return gl.uniform1i(location,value)}),_UNIFORM_SETTERS),FLOAT_ARRAY={},INT_ARRAY={},UINT_ARRAY={},array1=[0];function toTypedArray(value,uniformLength,Type,cache){1===uniformLength&&"boolean"==typeof value&&(value=value?1:0),Number.isFinite(value)&&(array1[0]=value,value=array1);var length=value.length;if(length%uniformLength&&_utils.log.warn("Uniform size should be multiples of ".concat(uniformLength),value)(),value instanceof Type)return value;var result=cache[length];result||(result=new Type(length),cache[length]=result);for(var i=0;i<length;i++)result[i]=value[i];return result}function toFloatArray(value,uniformLength){return toTypedArray(value,uniformLength,Float32Array,FLOAT_ARRAY)}function toIntArray(value,uniformLength){return toTypedArray(value,uniformLength,Int32Array,INT_ARRAY)}function toUIntArray(value,uniformLength){return toTypedArray(value,uniformLength,Uint32Array,UINT_ARRAY)}function checkUniformValue(value){return Array.isArray(value)||ArrayBuffer.isView(value)?function(value){if(0===value.length)return!1;for(var checkLength=Math.min(value.length,16),i=0;i<checkLength;++i)if(!Number.isFinite(value[i]))return!1;return!0}(value):!!isFinite(value)||(!0===value||!1===value||(value instanceof _texture.default||(value instanceof _renderbuffer.default||value instanceof _framebuffer.default&&Boolean(value.texture))))}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_assertThisInitialized2=_interopRequireDefault(__webpack_require__(12)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_get2=_interopRequireDefault(__webpack_require__(16)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_resource=_interopRequireDefault(__webpack_require__(50)),_buffer=_interopRequireDefault(__webpack_require__(61)),_webglUtils=__webpack_require__(14),_arrayUtilsFlat=__webpack_require__(654),_utils=__webpack_require__(10),_probe=__webpack_require__(85),VertexArrayObject=function(_Resource){function VertexArrayObject(gl){var _this,opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,_classCallCheck2.default)(this,VertexArrayObject);var id=opts.id||opts.program&&opts.program.id;return(_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(VertexArrayObject).call(this,gl,Object.assign({},opts,{id:id})))).hasVertexArrays=VertexArrayObject.isSupported(gl),_this.buffer=null,_this.bufferValue=null,_this.initialize(opts),Object.seal((0,_assertThisInitialized2.default)(_this)),_this}return(0,_inherits2.default)(VertexArrayObject,_Resource),(0,_createClass2.default)(VertexArrayObject,null,[{key:"isSupported",value:function(gl){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero?(0,_webglUtils.isWebGL2)(gl)||"Chrome"===(0,_probe.getBrowser)():(0,_webglUtils.isWebGL2)(gl)||gl.getExtension("OES_vertex_array_object")}},{key:"getDefaultArray",value:function(gl){return gl.luma=gl.luma||{},gl.luma.defaultVertexArray||(gl.luma.defaultVertexArray=new VertexArrayObject(gl,{handle:null})),gl.luma.defaultVertexArray}},{key:"getMaxAttributes",value:function(gl){return VertexArrayObject.MAX_ATTRIBUTES=VertexArrayObject.MAX_ATTRIBUTES||gl.getParameter(34921),VertexArrayObject.MAX_ATTRIBUTES}},{key:"setConstant",value:function(gl,location,array){switch(array.constructor){case Float32Array:VertexArrayObject._setConstantFloatArray(gl,location,array);break;case Int32Array:VertexArrayObject._setConstantIntArray(gl,location,array);break;case Uint32Array:VertexArrayObject._setConstantUintArray(gl,location,array);break;default:(0,_utils.assert)(!1)}}}]),(0,_createClass2.default)(VertexArrayObject,[{key:"delete",value:function(){(0,_get2.default)((0,_getPrototypeOf2.default)(VertexArrayObject.prototype),"delete",this).call(this),this.buffer&&this.buffer.delete()}},{key:"initialize",value:function(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(props)}},{key:"setProps",value:function(props){return this}},{key:"setElementBuffer",value:function(){var _this2=this,elementBuffer=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,_utils.assert)(!elementBuffer||34963===elementBuffer.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind(function(){_this2.gl.bindBuffer(34963,elementBuffer?elementBuffer.handle:null)}),this}},{key:"setBuffer",value:function(location,buffer,accessor){if(34963===buffer.target)return this.setElementBuffer(buffer,accessor);var size=accessor.size,type=accessor.type,stride=accessor.stride,offset=accessor.offset,normalized=accessor.normalized,integer=accessor.integer,divisor=accessor.divisor,gl=this.gl;return location=Number(location),this.bind(function(){gl.bindBuffer(34962,buffer.handle),integer?((0,_utils.assert)((0,_webglUtils.isWebGL2)(gl)),gl.vertexAttribIPointer(location,size,type,stride,offset)):gl.vertexAttribPointer(location,size,type,normalized,stride,offset),gl.enableVertexAttribArray(location),gl.vertexAttribDivisor(location,divisor||0)}),this}},{key:"enable",value:function(location){var _this3=this,_enable=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!_enable&&0===location&&!VertexArrayObject.isSupported(this.gl,{constantAttributeZero:!0})||(location=Number(location),this.bind(function(){return _enable?_this3.gl.enableVertexAttribArray(location):_this3.gl.disableVertexAttribArray(location)})),this}},{key:"getConstantBuffer",value:function(elementCount,value,accessor){var constantValue=this._normalizeConstantArrayValue(value,accessor),byteLength=constantValue.byteLength*elementCount,length=constantValue.length*elementCount,updateNeeded=!this.buffer;if(this.buffer=this.buffer||new _buffer.default(this.gl,byteLength),updateNeeded=(updateNeeded=updateNeeded||this.buffer.reallocate(byteLength))||!this._compareConstantArrayValues(constantValue,this.bufferValue)){var typedArray=(0,_arrayUtilsFlat.getScratchArray)(value.constructor,length);(0,_arrayUtilsFlat.fillArray)({target:typedArray,source:constantValue,start:0,count:length}),this.buffer.subData(typedArray),this.bufferValue=value}return this.buffer}},{key:"_normalizeConstantArrayValue",value:function(arrayValue,accessor){return Array.isArray(arrayValue)?new Float32Array(arrayValue):arrayValue}},{key:"_compareConstantArrayValues",value:function(v1,v2){if(!v1||!v2||v1.length!==v2.length||v1.constructor!==v2.constructor)return!1;for(var i=0;i<v1.length;++i)if(v1[i]!==v2[i])return!1;return!0}},{key:"_createHandle",value:function(){return this.hasVertexArrays=VertexArrayObject.isSupported(this.gl),this.hasVertexArrays?this.gl.createVertexArray():null}},{key:"_deleteHandle",value:function(handle){return this.hasVertexArrays&&this.gl.deleteVertexArray(handle),[this.elements]}},{key:"_bindHandle",value:function(handle){this.hasVertexArrays&&this.gl.bindVertexArray(handle)}},{key:"_getParameter",value:function(pname,_ref){var _this4=this,location=_ref.location;return(0,_utils.assert)(Number.isFinite(location)),this.bind(function(){switch(pname){case 34373:return _this4.gl.getVertexAttribOffset(location,pname);default:return _this4.gl.getVertexAttrib(location,pname)}})}},{key:"MAX_ATTRIBUTES",get:function(){return VertexArrayObject.getMaxAttributes(this.gl)}}],[{key:"_setConstantFloatArray",value:function(gl,location,array){switch(array.length){case 1:gl.vertexAttrib1fv(location,array);break;case 2:gl.vertexAttrib2fv(location,array);break;case 3:gl.vertexAttrib3fv(location,array);break;case 4:gl.vertexAttrib4fv(location,array);break;default:(0,_utils.assert)(!1)}}},{key:"_setConstantIntArray",value:function(gl,location,array){switch((0,_utils.assert)((0,_webglUtils.isWebGL2)(gl)),array.length){case 1:gl.vertexAttribI1iv(location,array);break;case 2:gl.vertexAttribI2iv(location,array);break;case 3:gl.vertexAttribI3iv(location,array);break;case 4:gl.vertexAttribI4iv(location,array);break;default:(0,_utils.assert)(!1)}}},{key:"_setConstantUintArray",value:function(gl,location,array){switch((0,_utils.assert)((0,_webglUtils.isWebGL2)(gl)),array.length){case 1:gl.vertexAttribI1uiv(location,array);break;case 2:gl.vertexAttribI2uiv(location,array);break;case 3:gl.vertexAttribI3uiv(location,array);break;case 4:gl.vertexAttribI4uiv(location,array);break;default:(0,_utils.assert)(!1)}}}]),VertexArrayObject}(_resource.default);exports.default=VertexArrayObject},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_vector=_interopRequireDefault(__webpack_require__(198)),_common=__webpack_require__(43),Vector4=function(_Vector){function Vector4(){var _this,x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,w=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return(0,_classCallCheck2.default)(this,Vector4),_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Vector4).call(this)),Array.isArray(x)&&1===arguments.length?_this.copy(x):_this.set(x,y,z,w),_this}return(0,_inherits2.default)(Vector4,_Vector),(0,_createClass2.default)(Vector4,[{key:"applyMatrix4",value:function(m){return m.transformVector(this,this),this}},{key:"ELEMENTS",get:function(){return 4}},{key:"z",get:function(){return this[2]},set:function(value){return this[2]=(0,_common.checkNumber)(value)}},{key:"w",get:function(){return this[3]},set:function(value){return this[3]=(0,_common.checkNumber)(value)}}]),Vector4}(_vector.default);exports.default=Vector4},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateVector=function(v,length){if(v.length!==length)return!1;return v.every(Number.isFinite)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=function(){var out=new glMatrix.ARRAY_TYPE(9);glMatrix.ARRAY_TYPE!=Float32Array&&(out[1]=0,out[2]=0,out[3]=0,out[5]=0,out[6]=0,out[7]=0);return out[0]=1,out[4]=1,out[8]=1,out},exports.fromMat4=function(out,a){return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[4],out[4]=a[5],out[5]=a[6],out[6]=a[8],out[7]=a[9],out[8]=a[10],out},exports.clone=function(a){var out=new glMatrix.ARRAY_TYPE(9);return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out[4]=a[4],out[5]=a[5],out[6]=a[6],out[7]=a[7],out[8]=a[8],out},exports.copy=function(out,a){return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out[4]=a[4],out[5]=a[5],out[6]=a[6],out[7]=a[7],out[8]=a[8],out},exports.fromValues=function(m00,m01,m02,m10,m11,m12,m20,m21,m22){var out=new glMatrix.ARRAY_TYPE(9);return out[0]=m00,out[1]=m01,out[2]=m02,out[3]=m10,out[4]=m11,out[5]=m12,out[6]=m20,out[7]=m21,out[8]=m22,out},exports.set=function(out,m00,m01,m02,m10,m11,m12,m20,m21,m22){return out[0]=m00,out[1]=m01,out[2]=m02,out[3]=m10,out[4]=m11,out[5]=m12,out[6]=m20,out[7]=m21,out[8]=m22,out},exports.identity=function(out){return out[0]=1,out[1]=0,out[2]=0,out[3]=0,out[4]=1,out[5]=0,out[6]=0,out[7]=0,out[8]=1,out},exports.transpose=function(out,a){if(out===a){var a01=a[1],a02=a[2],a12=a[5];out[1]=a[3],out[2]=a[6],out[3]=a01,out[5]=a[7],out[6]=a02,out[7]=a12}else out[0]=a[0],out[1]=a[3],out[2]=a[6],out[3]=a[1],out[4]=a[4],out[5]=a[7],out[6]=a[2],out[7]=a[5],out[8]=a[8];return out},exports.invert=function(out,a){var a00=a[0],a01=a[1],a02=a[2],a10=a[3],a11=a[4],a12=a[5],a20=a[6],a21=a[7],a22=a[8],b01=a22*a11-a12*a21,b11=-a22*a10+a12*a20,b21=a21*a10-a11*a20,det=a00*b01+a01*b11+a02*b21;if(!det)return null;return det=1/det,out[0]=b01*det,out[1]=(-a22*a01+a02*a21)*det,out[2]=(a12*a01-a02*a11)*det,out[3]=b11*det,out[4]=(a22*a00-a02*a20)*det,out[5]=(-a12*a00+a02*a10)*det,out[6]=b21*det,out[7]=(-a21*a00+a01*a20)*det,out[8]=(a11*a00-a01*a10)*det,out},exports.adjoint=function(out,a){var a00=a[0],a01=a[1],a02=a[2],a10=a[3],a11=a[4],a12=a[5],a20=a[6],a21=a[7],a22=a[8];return out[0]=a11*a22-a12*a21,out[1]=a02*a21-a01*a22,out[2]=a01*a12-a02*a11,out[3]=a12*a20-a10*a22,out[4]=a00*a22-a02*a20,out[5]=a02*a10-a00*a12,out[6]=a10*a21-a11*a20,out[7]=a01*a20-a00*a21,out[8]=a00*a11-a01*a10,out},exports.determinant=function(a){var a00=a[0],a01=a[1],a02=a[2],a10=a[3],a11=a[4],a12=a[5],a20=a[6],a21=a[7],a22=a[8];return a00*(a22*a11-a12*a21)+a01*(-a22*a10+a12*a20)+a02*(a21*a10-a11*a20)},exports.multiply=multiply,exports.translate=function(out,a,v){var a00=a[0],a01=a[1],a02=a[2],a10=a[3],a11=a[4],a12=a[5],a20=a[6],a21=a[7],a22=a[8],x=v[0],y=v[1];return out[0]=a00,out[1]=a01,out[2]=a02,out[3]=a10,out[4]=a11,out[5]=a12,out[6]=x*a00+y*a10+a20,out[7]=x*a01+y*a11+a21,out[8]=x*a02+y*a12+a22,out},exports.rotate=function(out,a,rad){var a00=a[0],a01=a[1],a02=a[2],a10=a[3],a11=a[4],a12=a[5],a20=a[6],a21=a[7],a22=a[8],s=Math.sin(rad),c=Math.cos(rad);return out[0]=c*a00+s*a10,out[1]=c*a01+s*a11,out[2]=c*a02+s*a12,out[3]=c*a10-s*a00,out[4]=c*a11-s*a01,out[5]=c*a12-s*a02,out[6]=a20,out[7]=a21,out[8]=a22,out},exports.scale=function(out,a,v){var x=v[0],y=v[1];return out[0]=x*a[0],out[1]=x*a[1],out[2]=x*a[2],out[3]=y*a[3],out[4]=y*a[4],out[5]=y*a[5],out[6]=a[6],out[7]=a[7],out[8]=a[8],out},exports.fromTranslation=function(out,v){return out[0]=1,out[1]=0,out[2]=0,out[3]=0,out[4]=1,out[5]=0,out[6]=v[0],out[7]=v[1],out[8]=1,out},exports.fromRotation=function(out,rad){var s=Math.sin(rad),c=Math.cos(rad);return out[0]=c,out[1]=s,out[2]=0,out[3]=-s,out[4]=c,out[5]=0,out[6]=0,out[7]=0,out[8]=1,out},exports.fromScaling=function(out,v){return out[0]=v[0],out[1]=0,out[2]=0,out[3]=0,out[4]=v[1],out[5]=0,out[6]=0,out[7]=0,out[8]=1,out},exports.fromMat2d=function(out,a){return out[0]=a[0],out[1]=a[1],out[2]=0,out[3]=a[2],out[4]=a[3],out[5]=0,out[6]=a[4],out[7]=a[5],out[8]=1,out},exports.fromQuat=function(out,q){var x=q[0],y=q[1],z=q[2],w=q[3],x2=x+x,y2=y+y,z2=z+z,xx=x*x2,yx=y*x2,yy=y*y2,zx=z*x2,zy=z*y2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2;return out[0]=1-yy-zz,out[3]=yx-wz,out[6]=zx+wy,out[1]=yx+wz,out[4]=1-xx-zz,out[7]=zy-wx,out[2]=zx-wy,out[5]=zy+wx,out[8]=1-xx-yy,out},exports.normalFromMat4=function(out,a){var a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15],b00=a00*a11-a01*a10,b01=a00*a12-a02*a10,b02=a00*a13-a03*a10,b03=a01*a12-a02*a11,b04=a01*a13-a03*a11,b05=a02*a13-a03*a12,b06=a20*a31-a21*a30,b07=a20*a32-a22*a30,b08=a20*a33-a23*a30,b09=a21*a32-a22*a31,b10=a21*a33-a23*a31,b11=a22*a33-a23*a32,det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(!det)return null;return det=1/det,out[0]=(a11*b11-a12*b10+a13*b09)*det,out[1]=(a12*b08-a10*b11-a13*b07)*det,out[2]=(a10*b10-a11*b08+a13*b06)*det,out[3]=(a02*b10-a01*b11-a03*b09)*det,out[4]=(a00*b11-a02*b08+a03*b07)*det,out[5]=(a01*b08-a00*b10-a03*b06)*det,out[6]=(a31*b05-a32*b04+a33*b03)*det,out[7]=(a32*b02-a30*b05-a33*b01)*det,out[8]=(a30*b04-a31*b02+a33*b00)*det,out},exports.projection=function(out,width,height){return out[0]=2/width,out[1]=0,out[2]=0,out[3]=0,out[4]=-2/height,out[5]=0,out[6]=-1,out[7]=1,out[8]=1,out},exports.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"},exports.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))},exports.add=function(out,a,b){return out[0]=a[0]+b[0],out[1]=a[1]+b[1],out[2]=a[2]+b[2],out[3]=a[3]+b[3],out[4]=a[4]+b[4],out[5]=a[5]+b[5],out[6]=a[6]+b[6],out[7]=a[7]+b[7],out[8]=a[8]+b[8],out},exports.subtract=subtract,exports.multiplyScalar=function(out,a,b){return out[0]=a[0]*b,out[1]=a[1]*b,out[2]=a[2]*b,out[3]=a[3]*b,out[4]=a[4]*b,out[5]=a[5]*b,out[6]=a[6]*b,out[7]=a[7]*b,out[8]=a[8]*b,out},exports.multiplyScalarAndAdd=function(out,a,b,scale){return out[0]=a[0]+b[0]*scale,out[1]=a[1]+b[1]*scale,out[2]=a[2]+b[2]*scale,out[3]=a[3]+b[3]*scale,out[4]=a[4]+b[4]*scale,out[5]=a[5]+b[5]*scale,out[6]=a[6]+b[6]*scale,out[7]=a[7]+b[7]*scale,out[8]=a[8]+b[8]*scale,out},exports.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]},exports.equals=function(a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5],a6=a[6],a7=a[7],a8=a[8],b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5],b6=b[6],b7=b[7],b8=b[8];return Math.abs(a0-b0)<=glMatrix.EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=glMatrix.EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=glMatrix.EPSILON*Math.max(1,Math.abs(a2),Math.abs(b2))&&Math.abs(a3-b3)<=glMatrix.EPSILON*Math.max(1,Math.abs(a3),Math.abs(b3))&&Math.abs(a4-b4)<=glMatrix.EPSILON*Math.max(1,Math.abs(a4),Math.abs(b4))&&Math.abs(a5-b5)<=glMatrix.EPSILON*Math.max(1,Math.abs(a5),Math.abs(b5))&&Math.abs(a6-b6)<=glMatrix.EPSILON*Math.max(1,Math.abs(a6),Math.abs(b6))&&Math.abs(a7-b7)<=glMatrix.EPSILON*Math.max(1,Math.abs(a7),Math.abs(b7))&&Math.abs(a8-b8)<=glMatrix.EPSILON*Math.max(1,Math.abs(a8),Math.abs(b8))},exports.sub=exports.mul=void 0;var glMatrix=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}(__webpack_require__(87));function multiply(out,a,b){var a00=a[0],a01=a[1],a02=a[2],a10=a[3],a11=a[4],a12=a[5],a20=a[6],a21=a[7],a22=a[8],b00=b[0],b01=b[1],b02=b[2],b10=b[3],b11=b[4],b12=b[5],b20=b[6],b21=b[7],b22=b[8];return out[0]=b00*a00+b01*a10+b02*a20,out[1]=b00*a01+b01*a11+b02*a21,out[2]=b00*a02+b01*a12+b02*a22,out[3]=b10*a00+b11*a10+b12*a20,out[4]=b10*a01+b11*a11+b12*a21,out[5]=b10*a02+b11*a12+b12*a22,out[6]=b20*a00+b21*a10+b22*a20,out[7]=b20*a01+b21*a11+b22*a21,out[8]=b20*a02+b21*a12+b22*a22,out}function subtract(out,a,b){return out[0]=a[0]-b[0],out[1]=a[1]-b[1],out[2]=a[2]-b[2],out[3]=a[3]-b[3],out[4]=a[4]-b[4],out[5]=a[5]-b[5],out[6]=a[6]-b[6],out[7]=a[7]-b[7],out[8]=a[8]-b[8],out}var mul=multiply;exports.mul=mul;var sub=subtract;exports.sub=sub},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(9),_interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateQuaternion=function(q){return 4===q.length&&Number.isFinite(q[0])&&Number.isFinite(q[1])&&Number.isFinite(q[2])&&Number.isFinite(q[3])},exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_mathArray=_interopRequireDefault(__webpack_require__(109)),_common=__webpack_require__(43),quat=_interopRequireWildcard(__webpack_require__(662)),IDENTITY_QUATERNION=[0,0,0,1];var Quaternion=function(_MathArray){function Quaternion(){var _this,x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,w=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,_classCallCheck2.default)(this,Quaternion),_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Quaternion).call(this)),Array.isArray(x)&&1===arguments.length?_this.copy(x):_this.set(x,y,z,w),_this}return(0,_inherits2.default)(Quaternion,_MathArray),(0,_createClass2.default)(Quaternion,[{key:"fromMatrix3",value:function(m){return quat.fromMat3(this,m),this.check()}},{key:"fromValues",value:function(x,y,z,w){return this.set(x,y,z,w)}},{key:"identity",value:function(){return quat.identity(this),this.check()}},{key:"length",value:function(){return quat.length(this)}},{key:"squaredLength",value:function(a){return quat.squaredLength(this)}},{key:"dot",value:function(a,b){if(void 0!==b)throw new Error("Quaternion.dot only takes one argument");return quat.dot(this,a)}},{key:"rotationTo",value:function(vectorA,vectorB){return quat.rotationTo(this,vectorA,vectorB),this.check()}},{key:"add",value:function(a,b){if(void 0!==b)throw new Error("Quaternion.add only takes one argument");return quat.add(this,a),this.check()}},{key:"calculateW",value:function(){return quat.calculateW(this,this),this.check()}},{key:"conjugate",value:function(){return quat.conjugate(this,this),this.check()}},{key:"invert",value:function(){return quat.invert(this,this),this.check()}},{key:"lerp",value:function(a,b,t){return quat.lerp(this,a,b,t),this.check()}},{key:"multiply",value:function(a,b){if(void 0!==b)throw new Error("Quaternion.multiply only takes one argument");return quat.multiply(this,this,a),this.check()}},{key:"normalize",value:function(){return quat.normalize(this,this),this.check()}},{key:"rotateX",value:function(rad){return quat.rotateX(this,this,rad),this.check()}},{key:"rotateY",value:function(rad){return quat.rotateY(this,this,rad),this.check()}},{key:"rotateZ",value:function(rad){return quat.rotateZ(this,this,rad),this.check()}},{key:"scale",value:function(b){return quat.scale(this,this,b),this.check()}},{key:"set",value:function(i,j,k,l){return quat.set(this,i,j,k,l),this.check()}},{key:"setAxisAngle",value:function(axis,rad){return quat.setAxisAngle(this,axis,rad),this.check()}},{key:"slerp",value:function(_ref){var _ref$start=_ref.start,start=void 0===_ref$start?IDENTITY_QUATERNION:_ref$start,target=_ref.target,ratio=_ref.ratio;return quat.slerp(this,start,target,ratio),this.check()}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(value){return this[0]=(0,_common.checkNumber)(value)}},{key:"y",get:function(){return this[1]},set:function(value){return this[1]=(0,_common.checkNumber)(value)}},{key:"z",get:function(){return this[2]},set:function(value){return this[2]=(0,_common.checkNumber)(value)}},{key:"w",get:function(){return this[3]},set:function(value){return this[3]=(0,_common.checkNumber)(value)}}]),Quaternion}(_mathArray.default);exports.default=Quaternion},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _slicedToArray2=_interopRequireDefault(__webpack_require__(11)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_mathArray=_interopRequireDefault(__webpack_require__(109)),_common=__webpack_require__(43),_matrix=_interopRequireDefault(__webpack_require__(199)),_quaternion2=_interopRequireDefault(__webpack_require__(321)),_vector=_interopRequireDefault(__webpack_require__(88)),ERR_UNKNOWN_ORDER="Unknown Euler angle order";var Euler=function(_MathArray){function Euler(){var _this,_this2,x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,order=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Euler.DefaultOrder;((0,_classCallCheck2.default)(this,Euler),_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Euler).call(this)),arguments.length>0&&Array.isArray(arguments[0]))?(_this2=_this).fromVector3.apply(_this2,arguments):_this.set(x,y,z,order);return _this}return(0,_inherits2.default)(Euler,_MathArray),(0,_createClass2.default)(Euler,[{key:"ELEMENTS",get:function(){return 4}}],[{key:"rotationOrder",value:function(order){return Euler.RotationOrders[order]}},{key:"ZYX",get:function(){return 0}},{key:"YXZ",get:function(){return 1}},{key:"XZY",get:function(){return 2}},{key:"ZXY",get:function(){return 3}},{key:"YZX",get:function(){return 4}},{key:"XYZ",get:function(){return 5}},{key:"RollPitchYaw",get:function(){return 0}},{key:"DefaultOrder",get:function(){return Euler.ZYX}},{key:"RotationOrders",get:function(){return["ZYX","YXZ","XZY","ZXY","YZX","XYZ"]}}]),(0,_createClass2.default)(Euler,[{key:"fromQuaternion",value:function(quaternion){var _quaternion=(0,_slicedToArray2.default)(quaternion,4),x=_quaternion[0],y=_quaternion[1],z=_quaternion[2],w=_quaternion[3],ysqr=y*y,t0=-2*(ysqr+z*z)+1,t1=2*(x*y+w*z),t2=-2*(x*z-w*y),t3=2*(y*z+w*x),t4=-2*(x*x+ysqr)+1;return t2=(t2=t2>1?1:t2)<-1?-1:t2,new Euler(Math.atan2(t3,t4),Math.asin(t2),Math.atan2(t1,t0),Euler.RollPitchYaw)}},{key:"copy",value:function(array){for(var i=0;i<3;++i)this[i]=array[i];return this[3]=Number.isFinite(array[3])||this.order,this.check()}},{key:"set",value:function(){var x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,order=arguments.length>3?arguments[3]:void 0;return this[0]=x,this[1]=y,this[2]=z,this[3]=Number.isFinite(order)?order:this[3],this.check()}},{key:"validate",value:function(){return(value=this[3])>=0&&value<6&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2]);var value}},{key:"toArray",value:function(){var array=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],offset=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return array[offset]=this[0],array[offset+1]=this[1],array[offset+2]=this[2],array}},{key:"toArray4",value:function(){var array=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],offset=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return array[offset]=this[0],array[offset+1]=this[1],array[offset+2]=this[2],array[offset+3]=this[3],array}},{key:"toVector3",value:function(optionalResult){return optionalResult?optionalResult.set(this[0],this[1],this[2]):new _vector.default(this[0],this[1],this[2])}},{key:"fromVector3",value:function(v,order){return this.set(v[0],v[1],v[2],Number.isFinite(order)?order:this[3])}},{key:"fromArray",value:function(array){var offset=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[0]=array[0+offset],this[1]=array[1+offset],this[2]=array[2+offset],void 0!==array[3]&&(this[3]=array[3]),this.check()}},{key:"fromRollPitchYaw",value:function(roll,pitch,yaw){return this.set(roll,pitch,yaw,Euler.ZYX)}},{key:"fromRotationMatrix",value:function(m){var order=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Euler.DefaultOrder;return this._fromRotationMatrix(m,order),this.check()}},{key:"getRotationMatrix",value:function(){var m=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new _matrix.default;return this._getRotationMatrix(m),m}},{key:"getQuaternion",value:function(){var q=new _quaternion2.default;switch(this[4]){case Euler.XYZ:return q.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case Euler.YXZ:return q.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case Euler.ZXY:return q.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case Euler.ZYX:return q.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case Euler.YZX:return q.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case Euler.XZY:return q.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(ERR_UNKNOWN_ORDER)}}},{key:"_fromRotationMatrix",value:function(m){var order=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Euler.DefaultOrder,te=m.elements,m11=te[0],m12=te[4],m13=te[8],m21=te[1],m22=te[5],m23=te[9],m31=te[2],m32=te[6],m33=te[10];switch(order=order||this[3]){case Euler.XYZ:this[1]=Math.asin((0,_common.clamp)(m13,-1,1)),Math.abs(m13)<.99999?(this[0]=Math.atan2(-m23,m33),this[2]=Math.atan2(-m12,m11)):(this[0]=Math.atan2(m32,m22),this[2]=0);break;case Euler.YXZ:this[0]=Math.asin(-(0,_common.clamp)(m23,-1,1)),Math.abs(m23)<.99999?(this[1]=Math.atan2(m13,m33),this[2]=Math.atan2(m21,m22)):(this[1]=Math.atan2(-m31,m11),this[2]=0);break;case Euler.ZXY:this[0]=Math.asin((0,_common.clamp)(m32,-1,1)),Math.abs(m32)<.99999?(this[1]=Math.atan2(-m31,m33),this[2]=Math.atan2(-m12,m22)):(this[1]=0,this[2]=Math.atan2(m21,m11));break;case Euler.ZYX:this[1]=Math.asin(-(0,_common.clamp)(m31,-1,1)),Math.abs(m31)<.99999?(this[0]=Math.atan2(m32,m33),this[2]=Math.atan2(m21,m11)):(this[0]=0,this[2]=Math.atan2(-m12,m22));break;case Euler.YZX:this[2]=Math.asin((0,_common.clamp)(m21,-1,1)),Math.abs(m21)<.99999?(this[0]=Math.atan2(-m23,m22),this[1]=Math.atan2(-m31,m11)):(this[0]=0,this[1]=Math.atan2(m13,m33));break;case Euler.XZY:this[2]=Math.asin(-(0,_common.clamp)(m12,-1,1)),Math.abs(m12)<.99999?(this[0]=Math.atan2(m32,m22),this[1]=Math.atan2(m13,m11)):(this[0]=Math.atan2(-m23,m33),this[1]=0);break;default:throw new Error(ERR_UNKNOWN_ORDER)}return this[3]=order,this}},{key:"_getRotationMatrix",value:function(){var te=new _matrix.default,x=this.x,y=this.y,z=this.z,a=Math.cos(x),c=Math.cos(y),e=Math.cos(z),b=Math.sin(x),d=Math.sin(y),f=Math.sin(z);switch(this[3]){case Euler.XYZ:var ae=a*e,af=a*f,be=b*e,bf=b*f;te[0]=c*e,te[4]=-c*f,te[8]=d,te[1]=af+be*d,te[5]=ae-bf*d,te[9]=-b*c,te[2]=bf-ae*d,te[6]=be+af*d,te[10]=a*c;break;case Euler.YXZ:var ce=c*e,cf=c*f,de=d*e,df=d*f;te[0]=ce+df*b,te[4]=de*b-cf,te[8]=a*d,te[1]=a*f,te[5]=a*e,te[9]=-b,te[2]=cf*b-de,te[6]=df+ce*b,te[10]=a*c;break;case Euler.ZXY:var _ce=c*e,_cf=c*f,_de=d*e,_df=d*f;te[0]=_ce-_df*b,te[4]=-a*f,te[8]=_de+_cf*b,te[1]=_cf+_de*b,te[5]=a*e,te[9]=_df-_ce*b,te[2]=-a*d,te[6]=b,te[10]=a*c;break;case Euler.ZYX:var _ae=a*e,_af=a*f,_be=b*e,_bf=b*f;te[0]=c*e,te[4]=_be*d-_af,te[8]=_ae*d+_bf,te[1]=c*f,te[5]=_bf*d+_ae,te[9]=_af*d-_be,te[2]=-d,te[6]=b*c,te[10]=a*c;break;case Euler.YZX:var ac=a*c,ad=a*d,bc=b*c,bd=b*d;te[0]=c*e,te[4]=bd-ac*f,te[8]=bc*f+ad,te[1]=f,te[5]=a*e,te[9]=-b*e,te[2]=-d*e,te[6]=ad*f+bc,te[10]=ac-bd*f;break;case Euler.XZY:var _ac=a*c,_ad=a*d,_bc=b*c,_bd=b*d;te[0]=c*e,te[4]=-f,te[8]=d*e,te[1]=_ac*f+_bd,te[5]=a*e,te[9]=_ad*f-_bc,te[2]=_bc*f-_ad,te[6]=b*e,te[10]=_bd*f+_ac;break;default:throw new Error(ERR_UNKNOWN_ORDER)}return te[3]=0,te[7]=0,te[11]=0,te[12]=0,te[13]=0,te[14]=0,te[15]=1,this}},{key:"toQuaternion",value:function(){var cy=Math.cos(.5*this.yaw),sy=Math.sin(.5*this.yaw),cr=Math.cos(.5*this.roll),sr=Math.sin(.5*this.roll),cp=Math.cos(.5*this.pitch),sp=Math.sin(.5*this.pitch),w=cy*cr*cp+sy*sr*sp,x=cy*sr*cp-sy*cr*sp,y=cy*cr*sp+sy*sr*cp,z=sy*cr*cp-cy*sr*sp;return new _quaternion2.default(x,y,z,w)}},{key:"x",get:function(){return this[0]},set:function(value){return this[0]=(0,_common.checkNumber)(value)}},{key:"y",get:function(){return this[1]},set:function(value){return this[1]=(0,_common.checkNumber)(value)}},{key:"z",get:function(){return this[2]},set:function(value){return this[2]=(0,_common.checkNumber)(value)}},{key:"alpha",get:function(){return this[0]},set:function(value){return this[0]=(0,_common.checkNumber)(value)}},{key:"beta",get:function(){return this[1]},set:function(value){return this[1]=(0,_common.checkNumber)(value)}},{key:"gamma",get:function(){return this[2]},set:function(value){return this[2]=(0,_common.checkNumber)(value)}},{key:"phi",get:function(){return this[0]},set:function(value){return this[0]=(0,_common.checkNumber)(value)}},{key:"theta",get:function(){return this[1]},set:function(value){return this[1]=(0,_common.checkNumber)(value)}},{key:"psi",get:function(){return this[2]},set:function(value){return this[2]=(0,_common.checkNumber)(value)}},{key:"roll",get:function(){return this[0]},set:function(value){return this[0]=(0,_common.checkNumber)(value)}},{key:"pitch",get:function(){return this[1]},set:function(value){return this[1]=(0,_common.checkNumber)(value)}},{key:"yaw",get:function(){return this[2]},set:function(value){return this[2]=(0,_common.checkNumber)(value)}},{key:"order",get:function(){return this[3]},set:function(value){return this[3]=function(value){if(value<0&&value>=6)throw new Error(ERR_UNKNOWN_ORDER);return value}(value)}}]),Euler}(_mathArray.default);exports.default=Euler},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.setDefaultShaderModules=function(modules){shaderModuleRegistry.setDefaultShaderModules(modules)},exports.registerShaderModules=function(shaderModuleList){var _ref$ignoreMultipleRe=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ignoreMultipleRegistrations,ignoreMultipleRegistrations=void 0!==_ref$ignoreMultipleRe&&_ref$ignoreMultipleRe;shaderModuleRegistry.registerShaderModules(shaderModuleList,{ignoreMultipleRegistrations:ignoreMultipleRegistrations})},exports.resolveModules=function(modules){return modules=modules.concat(shaderModuleRegistry.defaultShaderModules),getShaderDependencies(modules=shaderModuleRegistry.resolveModules(modules))},exports.getShaderModule=function(moduleOrName){return shaderModuleRegistry.getShaderModule(moduleOrName)},exports.TEST_EXPORTS=void 0;var shaderModuleRegistry=new(_interopRequireDefault(__webpack_require__(672)).default);function getShaderDependencies(modules){var moduleMap={},moduleDepth={};return getDependencyGraph({modules:modules,level:0,moduleMap:moduleMap,moduleDepth:moduleDepth}),Object.keys(moduleDepth).sort(function(a,b){return moduleDepth[b]-moduleDepth[a]}).map(function(name){return moduleMap[name]})}function getDependencyGraph(_ref2){var modules=_ref2.modules,level=_ref2.level,moduleMap=_ref2.moduleMap,moduleDepth=_ref2.moduleDepth;if(level>=5)throw new Error("Possible loop in shader dependency graph");var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=modules[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var module=_step.value;moduleMap[module.name]=module,(void 0===moduleDepth[module.name]||moduleDepth[module.name]<level)&&(moduleDepth[module.name]=level)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=modules[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var _module=_step2.value;_module.dependencies&&getDependencyGraph({modules:_module.dependencies,level:level+1,moduleMap:moduleMap,moduleDepth:moduleDepth})}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}var TEST_EXPORTS={getShaderDependencies:getShaderDependencies,getDependencyGraph:getDependencyGraph};exports.TEST_EXPORTS=TEST_EXPORTS},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(condition,message){if(!condition)throw new Error(message||"shadertools: assertion failed.")}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FRAGMENT_SHADER=exports.VERTEX_SHADER=void 0;exports.VERTEX_SHADER="vs";exports.FRAGMENT_SHADER="fs"},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(source,type,inject,injectStandardStubs){var isVertex=type===_constants.VERTEX_SHADER,_loop=function(key){var fragment=inject[key];switch(key){case"vs:#decl":isVertex&&(source=source.replace(REGEX_START_OF_MAIN,function(match){return"".concat(fragment,"\n").concat(match)}));break;case"vs:#main-start":isVertex&&(source=source.replace(REGEX_START_OF_MAIN,function(match){return match+fragment}));break;case"vs:#main-end":isVertex&&(source=source.replace(REGEX_END_OF_MAIN,function(match){return fragment+match}));break;case"fs:#decl":isVertex||(source=source.replace(REGEX_START_OF_MAIN,function(match){return"".concat(fragment,"\n").concat(match)}));break;case"fs:#main-start":isVertex||(source=source.replace(REGEX_START_OF_MAIN,function(match){return match+fragment}));break;case"fs:#main-end":isVertex||(source=source.replace(REGEX_END_OF_MAIN,function(match){return fragment+match}));break;default:source=source.replace(key,function(match){return match+fragment})}};for(var key in inject)_loop(key);injectStandardStubs&&(source=source.replace("}s*$",function(match){return match+MODULE_INJECTORS[type]}));return source},exports.combineInjects=function(injects){var result={};return(0,_utils.assert)(Array.isArray(injects)&&injects.length>1),injects.forEach(function(inject){for(var key in inject)result[key]=result[key]?"".concat(result[key],"\n").concat(inject[key]):inject[key]}),result};var _MODULE_INJECTORS,_defineProperty2=_interopRequireDefault(__webpack_require__(6)),_moduleInjectors=__webpack_require__(679),_constants=__webpack_require__(325),_utils=__webpack_require__(111),MODULE_INJECTORS=(_MODULE_INJECTORS={},(0,_defineProperty2.default)(_MODULE_INJECTORS,_constants.VERTEX_SHADER,_moduleInjectors.MODULE_INJECTORS_VS),(0,_defineProperty2.default)(_MODULE_INJECTORS,_constants.FRAGMENT_SHADER,_moduleInjectors.MODULE_INJECTORS_FS),_MODULE_INJECTORS),REGEX_START_OF_MAIN=/void main\s*\([^)]*\)\s*\{\n?/,REGEX_END_OF_MAIN=/}\n?[^{}]*$/},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _math=__webpack_require__(25),IDENTITY_MATRIX=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],DEFAULT_MODULE_OPTIONS={modelMatrix:IDENTITY_MATRIX,viewMatrix:IDENTITY_MATRIX,projectionMatrix:IDENTITY_MATRIX,cameraPositionWorld:[0,0,0]};var common="varying vec4 project_vPositionWorld;\nvarying vec3 project_vNormalWorld;\n\nvec4 project_getPosition_World() {\n  return project_vPositionWorld;\n}\n\nvec3 project_getNormal_World() {\n  return project_vNormalWorld;\n}\n",_default={name:"project",getUniforms:function(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DEFAULT_MODULE_OPTIONS,uniforms=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],{});return void 0!==opts.modelMatrix&&(uniforms.modelMatrix=opts.modelMatrix),void 0!==opts.viewMatrix&&(uniforms.viewMatrix=opts.viewMatrix),void 0!==opts.projectionMatrix&&(uniforms.projectionMatrix=opts.projectionMatrix),void 0!==opts.cameraPositionWorld&&(uniforms.cameraPositionWorld=opts.cameraPositionWorld),void 0===opts.projectionMatrix&&void 0===opts.viewMatrix||(uniforms.viewProjectionMatrix=new _math.Matrix4(opts.projectionMatrix).multiplyRight(opts.viewMatrix)),uniforms},vs:"".concat(common,"\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewProjectionMatrix;\nuniform vec3 cameraPositionWorld;\n\nstruct World {\n  vec3 position;\n  vec3 normal;\n};\n\nWorld world;\n\nvoid project_setPosition(vec4 position) {\n  project_vPositionWorld = position;\n}\n\nvoid project_setNormal(vec3 normal) {\n  project_vNormalWorld = normal;\n}\n\nvoid project_setPositionAndNormal_World(vec3 position, vec3 normal) {\n  world.position = position;\n  world.normal = normal;\n}\n\nvoid project_setPositionAndNormal_Model(vec3 position, vec3 normal) {\n  world.position = (modelMatrix * vec4(position, 1.)).xyz;\n  world.normal = mat3(modelMatrix) * normal;\n}\n\nvec4 project_model_to_clipspace(vec4 position) {\n  return viewProjectionMatrix * modelMatrix * position;\n}\n\nvec4 project_model_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * modelMatrix * vec4(position, 1.);\n}\n\nvec4 project_world_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_view_to_clipspace(vec3 position) {\n  return projectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n"),fs:"\n".concat(common)};exports.default=_default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_webgl=__webpack_require__(42),RenderState=function(){function RenderState(gl){arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,_classCallCheck2.default)(this,RenderState),this.gl=gl,this.framebuffer1=new _webgl.Framebuffer(gl,{id:"multi-pass-1",stencil:!0}),this.framebuffer2=new _webgl.Framebuffer(gl,{id:"multi-pass-2",stencil:!0}),this.reset()}return(0,_createClass2.default)(RenderState,[{key:"reset",value:function(){this.framebuffer1.resize(),this.framebuffer2.resize(),this.writeBuffer=this.framebuffer1,this.readBuffer=this.framebuffer2,this.maskActive=!1}},{key:"_swapFramebuffers",value:function(){var tmp=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=tmp}}]),RenderState}();exports.default=RenderState},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PROJECT_COORDINATE_SYSTEM=void 0;exports.PROJECT_COORDINATE_SYSTEM={LNG_LAT:1,LNGLAT_AUTO_OFFSET:4,METER_OFFSETS:2,LNGLAT_OFFSETS:3,IDENTITY:0}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _core=__webpack_require__(7),_project=_interopRequireDefault(__webpack_require__(139)),_memoize=_interopRequireDefault(__webpack_require__(205)),_project2=_interopRequireDefault(__webpack_require__(725)),fp64ify=_core.fp64.fp64ify,fp64ifyMatrix4=_core.fp64.fp64ifyMatrix4,_default={name:"project64",dependencies:[_project.default,_core.fp64],vs:_project2.default,getUniforms:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var context=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},project_uViewProjectionMatrix=context.project_uViewProjectionMatrix,project_uScale=context.project_uScale;if(project_uViewProjectionMatrix&&project_uScale)return getMemoizedUniforms({project_uViewProjectionMatrix:project_uViewProjectionMatrix,project_uScale:project_uScale});return{}},deprecations:[{type:"function",old:"project_to_clipspace_fp64",new:"project_common_position_to_clipspace_fp64"}]};exports.default=_default;var getMemoizedUniforms=(0,_memoize.default)(function(_ref){var project_uViewProjectionMatrix=_ref.project_uViewProjectionMatrix,project_uScale=_ref.project_uScale,glViewProjectionMatrixFP64=fp64ifyMatrix4(project_uViewProjectionMatrix),scaleFP64=fp64ify(project_uScale);return{project_uViewProjectionMatrixFP64:glViewProjectionMatrixFP64,project64_uViewProjectionMatrix:glViewProjectionMatrixFP64,project64_uScale:scaleFP64}})},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_core=__webpack_require__(7),_directionalLight=_interopRequireDefault(__webpack_require__(332)),_effect=_interopRequireDefault(__webpack_require__(206)),DefaultAmbientLightProps={color:[255,255,255],intensity:1},DefaultDirectionalLightProps=[{color:[255,255,255],intensity:1,direction:[-1,-3,-1]},{color:[255,255,255],intensity:.9,direction:[1,8,-2.5]}],LightingEffect=function(_Effect){function LightingEffect(props){var _this;for(var key in(0,_classCallCheck2.default)(this,LightingEffect),(_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(LightingEffect).call(this,props))).ambientLight=null,_this.directionalLights=[],_this.pointLights=[],props){var lightSource=props[key];switch(lightSource.type){case"ambient":_this.ambientLight=lightSource;break;case"directional":_this.directionalLights.push(lightSource);break;case"point":_this.pointLights.push(lightSource)}}return _this.applyDefaultLights(),_this}return(0,_inherits2.default)(LightingEffect,_Effect),(0,_createClass2.default)(LightingEffect,[{key:"getParameters",value:function(layer){var ambientLight=this.ambientLight,pointLights=this.getProjectedPointLights(layer);return{lightSources:{ambientLight:ambientLight,directionalLights:this.getProjectedDirectionalLights(layer),pointLights:pointLights}}}},{key:"applyDefaultLights",value:function(){var ambientLight=this.ambientLight,pointLights=this.pointLights,directionalLights=this.directionalLights;ambientLight||0!==pointLights.length||0!==directionalLights.length||(this.ambientLight=new _core.AmbientLight(DefaultAmbientLightProps),this.directionalLights.push(new _directionalLight.default(DefaultDirectionalLightProps[0])),this.directionalLights.push(new _directionalLight.default(DefaultDirectionalLightProps[1])))}},{key:"getProjectedPointLights",value:function(layer){for(var projectedPointLights=[],i=0;i<this.pointLights.length;i++){var pointLight=this.pointLights[i];projectedPointLights.push(pointLight.getProjectedLight({layer:layer}))}return projectedPointLights}},{key:"getProjectedDirectionalLights",value:function(layer){for(var projectedDirectionalLights=[],i=0;i<this.directionalLights.length;i++){var directionalLight=this.directionalLights[i];projectedDirectionalLights.push(directionalLight.getProjectedLight({layer:layer}))}return projectedDirectionalLights}}]),LightingEffect}(_effect.default);exports.default=LightingEffect},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),DirectionalLight=function(_BaseDirectionalLight){function DirectionalLight(){return(0,_classCallCheck2.default)(this,DirectionalLight),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(DirectionalLight).apply(this,arguments))}return(0,_inherits2.default)(DirectionalLight,_BaseDirectionalLight),(0,_createClass2.default)(DirectionalLight,[{key:"getProjectedLight",value:function(){return this}}]),DirectionalLight}(__webpack_require__(7).DirectionalLight);exports.default=DirectionalLight},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_core=__webpack_require__(7),_projectFunctions=__webpack_require__(334),_lib=__webpack_require__(729),PointLight=function(_BasePointLight){function PointLight(props){var _this;return(0,_classCallCheck2.default)(this,PointLight),(_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(PointLight).call(this,props))).projectedLight=new _core.PointLight(props),_this}return(0,_inherits2.default)(PointLight,_BasePointLight),(0,_createClass2.default)(PointLight,[{key:"getProjectedLight",value:function(_ref){var layer=_ref.layer,viewport=layer.context.viewport,_layer$props=layer.props,coordinateSystem=_layer$props.coordinateSystem,coordinateOrigin=_layer$props.coordinateOrigin,position=(0,_projectFunctions.projectPosition)(this.position,{viewport:viewport,coordinateSystem:coordinateSystem,coordinateOrigin:coordinateOrigin,fromCoordinateSystem:viewport.isGeospatial?_lib.COORDINATE_SYSTEM.LNGLAT:_lib.COORDINATE_SYSTEM.IDENTITY,fromCoordinateOrigin:[0,0,0]});return this.projectedLight.color=this.color,this.projectedLight.intensity=this.intensity,this.projectedLight.position=position,this.projectedLight}}]),PointLight}(_core.PointLight);exports.default=PointLight},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(9),_interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.getWorldPosition=getWorldPosition,exports.projectPosition=function(position,params){var _normalizeParameters=function(opts){var normalizedParams=Object.assign({},opts),viewport=opts.viewport,coordinateSystem=opts.coordinateSystem,coordinateOrigin=opts.coordinateOrigin,fromCoordinateSystem=opts.fromCoordinateSystem,fromCoordinateOrigin=opts.fromCoordinateOrigin;void 0===fromCoordinateSystem&&(normalizedParams.fromCoordinateSystem=coordinateSystem);void 0===fromCoordinateOrigin&&(normalizedParams.fromCoordinateOrigin=coordinateOrigin);coordinateSystem===_constants.COORDINATE_SYSTEM.LNGLAT&&viewport.zoom>=_viewportUniforms.LNGLAT_AUTO_OFFSET_ZOOM_THRESHOLD&&(normalizedParams.coordinateSystem=_constants.COORDINATE_SYSTEM.LNGLAT_OFFSETS,normalizedParams.coordinateOrigin=[Math.fround(viewport.longitude),Math.fround(viewport.latitude)]);return normalizedParams}(params),viewport=_normalizeParameters.viewport,coordinateSystem=_normalizeParameters.coordinateSystem,coordinateOrigin=_normalizeParameters.coordinateOrigin,modelMatrix=_normalizeParameters.modelMatrix,fromCoordinateSystem=_normalizeParameters.fromCoordinateSystem,fromCoordinateOrigin=_normalizeParameters.fromCoordinateOrigin;switch(coordinateSystem){case _constants.COORDINATE_SYSTEM.LNGLAT_OFFSETS:case _constants.COORDINATE_SYSTEM.METER_OFFSETS:var worldPosition=getWorldPosition(position,{viewport:viewport,modelMatrix:modelMatrix,coordinateSystem:fromCoordinateSystem,coordinateOrigin:fromCoordinateOrigin,offsetMode:!0}),originWorld=lngLatZToWorldPosition(coordinateOrigin,viewport,!0);return vec3.sub(worldPosition,worldPosition,originWorld),worldPosition;case _constants.COORDINATE_SYSTEM.LNGLAT:case _constants.COORDINATE_SYSTEM.LNGLAT_DEPRECATED:case _constants.COORDINATE_SYSTEM.IDENTITY:default:return getWorldPosition(position,{viewport:viewport,modelMatrix:modelMatrix,coordinateSystem:fromCoordinateSystem,coordinateOrigin:fromCoordinateOrigin,offsetMode:!1})}};var _slicedToArray2=_interopRequireDefault(__webpack_require__(11)),_constants=__webpack_require__(91),_viewportUniforms=__webpack_require__(204),vec4=_interopRequireWildcard(__webpack_require__(90)),vec3=_interopRequireWildcard(__webpack_require__(70)),_viewportMercatorProject=__webpack_require__(37);function lngLatZToWorldPosition(lngLatZ,viewport){var offsetMode=arguments.length>2&&void 0!==arguments[2]&&arguments[2],_lngLatZ=(0,_slicedToArray2.default)(lngLatZ,3),longitude=_lngLatZ[0],latitude=_lngLatZ[1],_lngLatZ$=_lngLatZ[2],z=void 0===_lngLatZ$?0:_lngLatZ$,_viewport$projectFlat=viewport.projectFlat(lngLatZ),_viewport$projectFlat2=(0,_slicedToArray2.default)(_viewport$projectFlat,2);return[_viewport$projectFlat2[0],_viewport$projectFlat2[1],z*(offsetMode?(0,_viewportMercatorProject.getDistanceScales)({longitude:longitude,latitude:latitude,scale:viewport.scale}):viewport.getDistanceScales()).pixelsPerMeter[2]]}function getWorldPosition(position,_ref){var viewport=_ref.viewport,modelMatrix=_ref.modelMatrix,coordinateSystem=_ref.coordinateSystem,coordinateOrigin=_ref.coordinateOrigin,offsetMode=_ref.offsetMode,_position=(0,_slicedToArray2.default)(position,3),x=_position[0],y=_position[1],z=_position[2];if(modelMatrix){var _vec4$transformMat=vec4.transformMat4([],[x,y,z,1],modelMatrix),_vec4$transformMat2=(0,_slicedToArray2.default)(_vec4$transformMat,3);x=_vec4$transformMat2[0],y=_vec4$transformMat2[1],z=_vec4$transformMat2[2]}switch(coordinateSystem){case _constants.COORDINATE_SYSTEM.LNGLAT:case _constants.COORDINATE_SYSTEM.LNGLAT_DEPRECATED:return lngLatZToWorldPosition([x,y,z],viewport,offsetMode);case _constants.COORDINATE_SYSTEM.LNGLAT_OFFSETS:return lngLatZToWorldPosition([x+coordinateOrigin[0],y+coordinateOrigin[1],z+(coordinateOrigin[2]||0)],viewport,offsetMode);case _constants.COORDINATE_SYSTEM.METER_OFFSETS:return lngLatZToWorldPosition((0,_viewportMercatorProject.addMetersToLngLat)(coordinateOrigin,[x,y,z]),viewport,offsetMode);case _constants.COORDINATE_SYSTEM.IDENTITY:default:return viewport.projectPosition([x,y,z])}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(condition,message){if(!condition)throw new Error(message||"viewport-mercator-project: assertion failed.")}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(_ref){var width=_ref.width,height=_ref.height,bounds=_ref.bounds,_ref$padding=_ref.padding,padding=void 0===_ref$padding?0:_ref$padding,_ref$offset=_ref.offset,offset=void 0===_ref$offset?[0,0]:_ref$offset,_bounds=(0,_slicedToArray2.default)(bounds,2),_bounds$=(0,_slicedToArray2.default)(_bounds[0],2),west=_bounds$[0],south=_bounds$[1],_bounds$2=(0,_slicedToArray2.default)(_bounds[1],2),east=_bounds$2[0],north=_bounds$2[1];if(Number.isFinite(padding)){var p=padding;padding={top:p,bottom:p,left:p,right:p}}else(0,_assert.default)(Number.isFinite(padding.top)&&Number.isFinite(padding.bottom)&&Number.isFinite(padding.left)&&Number.isFinite(padding.right));var viewport=new _webMercatorViewport.default({width:width,height:height,longitude:0,latitude:0,zoom:0}),nw=viewport.project([west,north]),se=viewport.project([east,south]),size=[Math.abs(se[0]-nw[0]),Math.abs(se[1]-nw[1])],targetSize=[width-padding.left-padding.right-2*Math.abs(offset[0]),height-padding.top-padding.bottom-2*Math.abs(offset[1])];(0,_assert.default)(targetSize[0]>0&&targetSize[1]>0);var scaleX=targetSize[0]/size[0],scaleY=targetSize[1]/size[1],offsetX=(padding.right-padding.left)/2/scaleX,offsetY=(padding.bottom-padding.top)/2/scaleY,center=[(se[0]+nw[0])/2+offsetX,(se[1]+nw[1])/2+offsetY],centerLngLat=viewport.unproject(center),zoom=viewport.zoom+Math.log2(Math.abs(Math.min(scaleX,scaleY)));return{longitude:centerLngLat[0],latitude:centerLngLat[1],zoom:zoom}};var _slicedToArray2=_interopRequireDefault(__webpack_require__(11)),_webMercatorViewport=_interopRequireDefault(__webpack_require__(207)),_assert=_interopRequireDefault(__webpack_require__(335))},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.glArrayFromType=glArrayFromType,exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_get2=_interopRequireDefault(__webpack_require__(16)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_core=__webpack_require__(7),_assert=_interopRequireDefault(__webpack_require__(20)),_iterableUtils=__webpack_require__(209),_log=_interopRequireDefault(__webpack_require__(24)),_baseAttribute=_interopRequireDefault(__webpack_require__(338)),DEFAULT_STATE={isExternalBuffer:!1,needsUpdate:!0,needsRedraw:!1,allocedInstances:-1},Attribute=function(_BaseAttribute){function Attribute(gl){var _this,opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,_classCallCheck2.default)(this,Attribute),_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Attribute).call(this,gl,opts));var _opts$transition=opts.transition,transition=void 0!==_opts$transition&&_opts$transition,_opts$noAlloc=opts.noAlloc,noAlloc=void 0!==_opts$noAlloc&&_opts$noAlloc,_opts$update=opts.update,update=void 0===_opts$update?null:_opts$update,_opts$accessor=opts.accessor,accessor=void 0===_opts$accessor?null:_opts$accessor,_opts$bufferLayout=opts.bufferLayout,bufferLayout=void 0===_opts$bufferLayout?null:_opts$bufferLayout,_opts$defaultValue=opts.defaultValue,defaultValue=void 0===_opts$defaultValue?[0,0,0,0]:_opts$defaultValue;if(defaultValue=Array.isArray(defaultValue)?defaultValue:[defaultValue],_this.shaderAttributes={},_this.hasShaderAttributes=!1,opts.shaderAttributes){var shaderAttributes=opts.shaderAttributes;for(var shaderAttributeName in shaderAttributes){var shaderAttribute=shaderAttributes[shaderAttributeName];_this.shaderAttributes[shaderAttributeName]=new Attribute(_this.gl,Object.assign({},shaderAttribute,{id:shaderAttributeName,constant:shaderAttribute.constant||!1,isIndexed:shaderAttribute.isIndexed||shaderAttribute.elements,size:(shaderAttribute.elements?1:shaderAttribute.size)||_this.size,value:shaderAttribute.value||null,divisor:shaderAttribute.instanced||shaderAttribute.divisor||_this.divisor,buffer:_this.getBuffer(),noAlloc:!0})),_this.hasShaderAttributes=!0}}return Object.assign(_this.userData,DEFAULT_STATE,opts,{transition:transition,noAlloc:noAlloc,update:update,accessor:accessor,defaultValue:defaultValue,bufferLayout:bufferLayout}),Object.seal(_this.userData),_this._validateAttributeUpdaters(),_this}return(0,_inherits2.default)(Attribute,_BaseAttribute),(0,_createClass2.default)(Attribute,[{key:"needsUpdate",value:function(){return this.userData.needsUpdate}},{key:"needsRedraw",value:function(){var _ref$clearChangedFlag=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearChangedFlags,clearChangedFlags=void 0!==_ref$clearChangedFlag&&_ref$clearChangedFlag,needsRedraw=this.userData.needsRedraw;return this.userData.needsRedraw=this.userData.needsRedraw&&!clearChangedFlags,needsRedraw}},{key:"getInstanceCount",value:function(){return null!==this.value?this.value.length/this.size:0}},{key:"getUpdateTriggers",value:function(){var accessor=this.userData.accessor;return[this.id].concat(accessor||[])}},{key:"getAccessor",value:function(){return this.userData.accessor}},{key:"getShaderAttributes",value:function(){var shaderAttributes={};return this.hasShaderAttributes?Object.assign(shaderAttributes,this.shaderAttributes):shaderAttributes[this.id]=this,shaderAttributes}},{key:"supportsTransition",value:function(){return this.userData.transition}},{key:"getTransitionSetting",value:function(opts){var _this$userData=this.userData,transition=_this$userData.transition,accessor=_this$userData.accessor;if(!transition)return null;var settings=Array.isArray(accessor)?opts[accessor.find(function(a){return opts[a]})]:opts[accessor];return Number.isFinite(settings)&&(settings={duration:settings}),settings&&settings.duration>0?Object.assign({},transition,settings):null}},{key:"setNeedsUpdate",value:function(){var reason=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.userData.needsUpdate=this.userData.needsUpdate||reason}},{key:"setNeedsRedraw",value:function(){var reason=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.userData.needsRedraw=this.userData.needsRedraw||reason}},{key:"allocate",value:function(numInstances){var state=this.userData;if(state.isExternalBuffer||state.noAlloc)return!1;var instanceCount=this.getInstanceCount();if((0===instanceCount||instanceCount<numInstances)&&(state.update||state.accessor)){(0,_assert.default)(Number.isFinite(numInstances));var allocCount=Math.max(numInstances,1),ArrayType=glArrayFromType(this.type||5126);return this.constant=!1,this.value=new ArrayType(this.size*allocCount),state.needsUpdate=!0,state.allocedInstances=allocCount,!0}return!1}},{key:"updateBuffer",value:function(_ref2){var numInstances=_ref2.numInstances,data=_ref2.data,props=_ref2.props,context=_ref2.context;if(!this.needsUpdate())return!1;var state=this.userData,update=state.update,accessor=state.accessor,updated=!0;return update?(update.call(context,this,{data:data,props:props,numInstances:numInstances}),this.update({value:this.value,constant:this.constant}),this._checkAttributeArray()):accessor?(this._updateBufferViaStandardAccessor(data,props),this._checkAttributeArray()):updated=!1,this._updateShaderAttributes(),state.needsUpdate=!1,state.needsRedraw=!0,updated}},{key:"update",value:function(props){(0,_get2.default)((0,_getPrototypeOf2.default)(Attribute.prototype),"update",this).call(this,props),this._updateShaderAttributes()}},{key:"setGenericValue",value:function(value){var state=this.userData;if(void 0===value||"function"==typeof value)return state.isExternalBuffer=!1,!1;value=this._normalizeValue(value);var hasChanged=!this.constant||!this._areValuesEqual(value,this.value);return hasChanged&&this.update({constant:!0,value:value}),state.needsRedraw=state.needsUpdate||hasChanged,state.needsUpdate=!1,state.isExternalBuffer=!0,this._updateShaderAttributes(),!0}},{key:"setExternalBuffer",value:function(buffer,numInstances){var state=this.userData;if(buffer){if(state.isExternalBuffer=!0,state.needsUpdate=!1,buffer instanceof _core.Buffer)this.externalBuffer!==buffer&&(this.update({constant:!1,buffer:buffer}),state.needsRedraw=!0);else if(this.value!==buffer){if(!ArrayBuffer.isView(buffer))throw new Error("Attribute prop must be typed array");if(state.auto&&buffer.length<=numInstances*this.size)throw new Error("Attribute prop array must match length and size");var ArrayType=glArrayFromType(this.type||5126);buffer instanceof ArrayType?this.update({constant:!1,value:buffer}):(_log.default.warn("Attribute prop ".concat(this.id," is casted to ").concat(ArrayType.name))(),this.update({constant:!1,value:new ArrayType(buffer)})),this.value=buffer,state.needsRedraw=!0}return this._updateShaderAttributes(),!0}return state.isExternalBuffer=!1,!1}},{key:"_normalizeValue",value:function(value){var out=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],start=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,defaultValue=this.userData.defaultValue;if(!Array.isArray(value)&&!ArrayBuffer.isView(value))return out[start]=Number.isFinite(value)?value:defaultValue[0],out;switch(this.size){case 4:out[start+3]=Number.isFinite(value[3])?value[3]:defaultValue[3];case 3:out[start+2]=Number.isFinite(value[2])?value[2]:defaultValue[2];case 2:out[start+1]=Number.isFinite(value[1])?value[1]:defaultValue[1];case 1:out[start+0]=Number.isFinite(value[0])?value[0]:defaultValue[0]}return out}},{key:"_areValuesEqual",value:function(value1,value2){for(var size=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.size,i=0;i<size;i++)if(value1[i]!==value2[i])return!1;return!0}},{key:"_updateBufferViaStandardAccessor",value:function(data,props){var accessor=this.userData.accessor,value=this.value,size=this.size,accessorFunc=props[accessor];(0,_assert.default)("function"==typeof accessorFunc,'accessor "'.concat(accessor,'" is not a function'));var i=0,_createIterable=(0,_iterableUtils.createIterable)(data),iterable=_createIterable.iterable,objectInfo=_createIterable.objectInfo,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=iterable[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var object=_step.value;objectInfo.index++;var objectValue=accessorFunc(object,objectInfo);this._normalizeValue(objectValue,value,i),i+=size}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.update({value:value})}},{key:"_validateAttributeUpdaters",value:function(){var state=this.userData;if(!(state.noAlloc||"function"==typeof state.update||"string"==typeof state.accessor))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}},{key:"_checkAttributeArray",value:function(){var value=this.value;if(value&&value.length>=4&&!(Number.isFinite(value[0])&&Number.isFinite(value[1])&&Number.isFinite(value[2])&&Number.isFinite(value[3])))throw new Error("Illegal attribute generated for ".concat(this.id))}},{key:"_updateShaderAttributes",value:function(){var shaderAttributes=this.shaderAttributes;for(var shaderAttributeName in shaderAttributes){shaderAttributes[shaderAttributeName].update({buffer:this.getBuffer(),value:this.value,constant:this.constant})}}},{key:"bufferLayout",get:function(){return this.userData.bufferLayout},set:function(layout){this.userData.bufferLayout=layout}}]),Attribute}(_baseAttribute.default);function glArrayFromType(glType){var _ref3$clamped=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clamped,clamped=void 0===_ref3$clamped||_ref3$clamped;switch(glType){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return clamped?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce type from array")}}exports.default=Attribute},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _objectSpread2=_interopRequireDefault(__webpack_require__(36)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_core=__webpack_require__(7),BaseAttribute=function(){function BaseAttribute(gl){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,_classCallCheck2.default)(this,BaseAttribute);var _opts$id=opts.id,id=void 0===_opts$id?(0,_core.uid)("attribute"):_opts$id,type=opts.type,_opts$isIndexed=opts.isIndexed,isIndexed=void 0!==_opts$isIndexed&&_opts$isIndexed;this.gl=gl,this.id=id,this.isIndexed=isIndexed,this.target=isIndexed?34963:34962,this.type=type,isIndexed&&!type&&(this.type=gl&&(0,_core.hasFeature)(gl,_core.FEATURES.ELEMENT_INDEX_UINT32)?5125:5123),this.value=null,this.externalBuffer=null,this.buffer=null,this.userData={},this.update(opts),this._validateAttributeDefinition()}return(0,_createClass2.default)(BaseAttribute,[{key:"delete",value:function(){this.buffer&&(this.buffer.delete(),this.buffer=null)}},{key:"update",value:function(opts){var value=opts.value,buffer=opts.buffer,_opts$constant=opts.constant,constant=void 0===_opts$constant?this.constant||!1:_opts$constant;if(this.constant=constant,buffer)this.externalBuffer=buffer,this.constant=!1,this.type=opts.type||buffer.accessor.type,void 0!==buffer.accessor.divisor&&(this.divisor=buffer.accessor.divisor),void 0!==opts.divisor&&(this.divisor=opts.divisor);else if(value){this.externalBuffer=null;var size=this.size||opts.size||0;if(constant&&value.length!==size){this.value=new Float32Array(size);for(var index=this.offset/4,i=0;i<this.size;++i)this.value[i]=value[index+i]}else this.value=value;if(!constant&&this.gl){var props=(0,_objectSpread2.default)({},opts,{id:this.id,target:this.target,accessor:{type:this.type}});Number.isFinite(props.divisor)&&(props.accessor.divisor=props.divisor),delete props.divisor,Number.isFinite(props.size)&&(props.accessor.size=props.size),delete props.size,this.buffer=this.buffer||new _core.Buffer(this.gl,props),this.buffer.setData({data:value}),this.type=this.buffer.accessor.type}}this._setAccessor(opts)}},{key:"getBuffer",value:function(){return this.constant?null:this.externalBuffer||this.buffer}},{key:"getValue",value:function(){if(this.constant)return this.value;var buffer=this.externalBuffer||this.buffer;return buffer?[buffer,this]:null}},{key:"_setAccessor",value:function(opts){var _opts$size=opts.size,size=void 0===_opts$size?this.size:_opts$size,_opts$offset=opts.offset,offset=void 0===_opts$offset?this.offset||0:_opts$offset,_opts$stride=opts.stride,stride=void 0===_opts$stride?this.stride||0:_opts$stride,_opts$normalized=opts.normalized,normalized=void 0===_opts$normalized?this.normalized||!1:_opts$normalized,_opts$integer=opts.integer,integer=void 0===_opts$integer?this.integer||!1:_opts$integer,_opts$divisor=opts.divisor,divisor=void 0===_opts$divisor?this.divisor||0:_opts$divisor,instanced=opts.instanced,isInstanced=opts.isInstanced;this.size=size,this.offset=offset,this.stride=stride,this.normalized=normalized,this.integer=integer,this.divisor=divisor,void 0!==isInstanced&&(_core.log.deprecated("Attribute.isInstanced")(),this.divisor=isInstanced?1:0),void 0!==instanced&&(_core.log.deprecated("Attribute.instanced")(),this.divisor=instanced?1:0)}},{key:"_validateAttributeDefinition",value:function(){}}]),BaseAttribute}();exports.default=BaseAttribute},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TRANSITION_STATE=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),TRANSITION_STATE={NONE:"none",PENDING:"pending",IN_PROGRESS:"in_progress",ENDED:"ended"};function noop(){}exports.TRANSITION_STATE=TRANSITION_STATE;var Transition=function(){function Transition(props){(0,_classCallCheck2.default)(this,Transition),this._startTime=null,this._state=TRANSITION_STATE.NONE,this.duration=1,this.easing=function(t){return t},this.onStart=noop,this.onUpdate=noop,this.onInterrupt=noop,this.onEnd=noop,Object.assign(this,props)}return(0,_createClass2.default)(Transition,[{key:"start",value:function(props){this.inProgress&&this.onInterrupt(this),Object.assign(this,props),this._setState(TRANSITION_STATE.PENDING)}},{key:"cancel",value:function(){this.inProgress&&(this.onInterrupt(this),this._setState(TRANSITION_STATE.NONE))}},{key:"update",value:function(currentTime){if(this.state===TRANSITION_STATE.PENDING&&(this._startTime=currentTime,this._setState(TRANSITION_STATE.IN_PROGRESS)),this.state===TRANSITION_STATE.IN_PROGRESS){var shouldEnd=!1,time=(currentTime-this._startTime)/this.duration;return time>=1&&(time=1,shouldEnd=!0),this.time=this.easing(time),this.onUpdate(this),shouldEnd&&this._setState(TRANSITION_STATE.ENDED),!0}return!1}},{key:"_setState",value:function(newState){if(this._state!==newState)switch(this._state=newState,newState){case TRANSITION_STATE.PENDING:this.onStart(this);break;case TRANSITION_STATE.ENDED:this.onEnd(this)}}},{key:"state",get:function(){return this._state}},{key:"inProgress",get:function(){return this._state===TRANSITION_STATE.PENDING||this._state===TRANSITION_STATE.IN_PROGRESS}}]),Transition}();exports.default=Transition},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.count=function(container){if(value=container,null===value||"object"!==(0,_typeof2.default)(value))throw new Error(ERR_NOT_OBJECT);var value;if("function"==typeof container.count)return container.count();if(Number.isFinite(container.size))return container.size;if(Number.isFinite(container.length))return container.length;if(function(value){return null!==value&&"object"===(0,_typeof2.default)(value)&&value.constructor===Object}(container))return Object.keys(container).length;throw new Error(ERR_NOT_CONTAINER)};var _typeof2=_interopRequireDefault(__webpack_require__(27)),ERR_NOT_OBJECT="count(): argument not an object",ERR_NOT_CONTAINER="count(): argument not a container"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LIFECYCLE=void 0;exports.LIFECYCLE={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_log=_interopRequireDefault(__webpack_require__(24)),_assert=_interopRequireDefault(__webpack_require__(20)),EMPTY_PROPS=Object.freeze({}),ComponentState=function(){function ComponentState(){var component=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,_classCallCheck2.default)(this,ComponentState),this.component=component,this.asyncProps={},this.onAsyncPropUpdated=function(){},this.oldProps=EMPTY_PROPS,this.oldAsyncProps=null}return(0,_createClass2.default)(ComponentState,[{key:"getOldProps",value:function(){return this.oldAsyncProps||this.oldProps}},{key:"resetOldProps",value:function(){this.oldAsyncProps=null,this.oldProps=this.component.props}},{key:"freezeAsyncOldProps",value:function(){if(!this.oldAsyncProps)for(var propName in this.oldProps=this.oldProps||this.component.props,this.oldAsyncProps={},this.oldProps)this.oldAsyncProps[propName]=this.oldProps[propName]}},{key:"hasAsyncProp",value:function(propName){return propName in this.asyncProps}},{key:"getAsyncProp",value:function(propName){var asyncProp=this.asyncProps[propName];return asyncProp&&asyncProp.resolvedValue}},{key:"isAsyncPropLoading",value:function(propName){var asyncProp=this.asyncProps[propName];return Boolean(asyncProp&&asyncProp.pendingLoadCount>0&&asyncProp.pendingLoadCount!==asyncProp.resolvedLoadCount)}},{key:"setAsyncProps",value:function(props){var resolvedValues=props._asyncPropResolvedValues||{},originalValues=props._asyncPropOriginalValues||props,defaultValues=props._asyncPropDefaultValues||{};for(var propName in resolvedValues){var value=resolvedValues[propName];this._createAsyncPropData(propName,value,defaultValues[propName]),this._updateAsyncProp(propName,value)}for(var _propName in originalValues){var _value=originalValues[_propName];this._createAsyncPropData(_propName,_value,defaultValues[_propName]),this._updateAsyncProp(_propName,_value)}}},{key:"_updateAsyncProp",value:function(propName,value){if(this._didAsyncInputValueChange(propName,value)){if("string"==typeof value)value=(0,this.layer.props.fetch)(value,{propName:propName,layer:this.layer});value instanceof Promise?this._watchPromise(propName,value):this._setPropValue(propName,value)}}},{key:"_didAsyncInputValueChange",value:function(propName,value){var asyncProp=this.asyncProps[propName];return value!==asyncProp.lastValue&&(asyncProp.lastValue=value,!0)}},{key:"_setPropValue",value:function(propName,value){var asyncProp=this.asyncProps[propName];asyncProp.value=value,asyncProp.resolvedValue=value,asyncProp.pendingLoadCount++,asyncProp.resolvedLoadCount=asyncProp.pendingLoadCount}},{key:"_setAsyncPropValue",value:function(propName,value,loadCount){var asyncProp=this.asyncProps[propName];asyncProp&&loadCount>=asyncProp.resolvedLoadCount&&((0,_assert.default)(void 0!==value),this.freezeAsyncOldProps(),value=this._postProcessValue(propName,value),asyncProp.resolvedValue=value,asyncProp.resolvedLoadCount=loadCount,this.onAsyncPropUpdated(propName,value))}},{key:"_watchPromise",value:function(propName,promise){var _this=this,asyncProp=this.asyncProps[propName];asyncProp.pendingLoadCount++;var loadCount=asyncProp.pendingLoadCount;promise.then(function(data){return _this._setAsyncPropValue(propName,data,loadCount)}).catch(function(error){return _log.default.error(error)()})}},{key:"_postProcessValue",value:function(propName,value){var dataTransform=(this.component?this.component.props:{}).dataTransform;return"data"===propName&&dataTransform&&(value=dataTransform(value)),value}},{key:"_createAsyncPropData",value:function(propName,value,defaultValue){this.asyncProps[propName]||(this.asyncProps[propName]={lastValue:null,resolvedValue:defaultValue,pendingLoadCount:0,resolvedLoadCount:0})}}]),ComponentState}();exports.default=ComponentState},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_get2=_interopRequireDefault(__webpack_require__(16)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_layer=_interopRequireDefault(__webpack_require__(142)),_log=_interopRequireDefault(__webpack_require__(24)),_flatten=__webpack_require__(112),CompositeLayer=function(_Layer){function CompositeLayer(){return(0,_classCallCheck2.default)(this,CompositeLayer),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(CompositeLayer).apply(this,arguments))}return(0,_inherits2.default)(CompositeLayer,_Layer),(0,_createClass2.default)(CompositeLayer,[{key:"getSubLayers",value:function(){return this.internalState&&this.internalState.subLayers||[]}},{key:"initializeState",value:function(){}},{key:"setState",value:function(updateObject){(0,_get2.default)((0,_getPrototypeOf2.default)(CompositeLayer.prototype),"setState",this).call(this,updateObject),this.setLayerNeedsUpdate()}},{key:"getPickingInfo",value:function(_ref){return _ref.info}},{key:"renderLayers",value:function(){return null}},{key:"shouldRenderSubLayer",value:function(id,data){var overridingProps=this.props._subLayerProps;return data&&data.length||overridingProps&&overridingProps[id]}},{key:"getSubLayerClass",value:function(id,DefaultLayerClass){var overridingProps=this.props._subLayerProps;return overridingProps&&overridingProps[id]&&overridingProps[id].type||DefaultLayerClass}},{key:"getSubLayerProps",value:function(sublayerProps){var _this$props=this.props,opacity=_this$props.opacity,pickable=_this$props.pickable,visible=_this$props.visible,parameters=_this$props.parameters,getPolygonOffset=_this$props.getPolygonOffset,highlightedObjectIndex=_this$props.highlightedObjectIndex,autoHighlight=_this$props.autoHighlight,highlightColor=_this$props.highlightColor,coordinateSystem=_this$props.coordinateSystem,coordinateOrigin=_this$props.coordinateOrigin,wrapLongitude=_this$props.wrapLongitude,positionFormat=_this$props.positionFormat,modelMatrix=_this$props.modelMatrix,overridingProps=_this$props._subLayerProps,newProps={opacity:opacity,pickable:pickable,visible:visible,parameters:parameters,getPolygonOffset:getPolygonOffset,highlightedObjectIndex:highlightedObjectIndex,autoHighlight:autoHighlight,highlightColor:highlightColor,coordinateSystem:coordinateSystem,coordinateOrigin:coordinateOrigin,wrapLongitude:wrapLongitude,positionFormat:positionFormat,modelMatrix:modelMatrix};return sublayerProps&&Object.assign(newProps,sublayerProps,overridingProps&&overridingProps[sublayerProps.id],{id:"".concat(this.props.id,"-").concat(sublayerProps.id),updateTriggers:Object.assign({all:this.props.updateTriggers.all},sublayerProps.updateTriggers)}),newProps}},{key:"_getAttributeManager",value:function(){return null}},{key:"_renderLayers",value:function(){var subLayers=this.internalState.subLayers;subLayers&&!this.needsUpdate()?_log.default.log(3,"Composite layer reused subLayers ".concat(this),this.internalState.subLayers)():(subLayers=this.renderLayers(),subLayers=(0,_flatten.flatten)(subLayers,{filter:Boolean}),this.internalState.subLayers=subLayers,_log.default.log(2,"Composite layer rendered new subLayers ".concat(this),subLayers)());var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=subLayers[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){_step.value.parent=this}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}},{key:"isComposite",get:function(){return!0}}]),CompositeLayer}(_layer.default);exports.default=CompositeLayer,CompositeLayer.layerName="CompositeLayer"},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_view=_interopRequireDefault(__webpack_require__(62)),_webMercatorViewport=_interopRequireDefault(__webpack_require__(345)),_mapController=_interopRequireDefault(__webpack_require__(346)),MapView=function(_View){function MapView(props){return(0,_classCallCheck2.default)(this,MapView),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(MapView).call(this,Object.assign({},props,{type:_webMercatorViewport.default})))}return(0,_inherits2.default)(MapView,_View),(0,_createClass2.default)(MapView,[{key:"controller",get:function(){return this._getControllerProps({type:_mapController.default})}}]),MapView}(_view.default);exports.default=MapView,MapView.displayName="MapView"},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(9),_interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _slicedToArray2=_interopRequireDefault(__webpack_require__(11)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_assertThisInitialized2=_interopRequireDefault(__webpack_require__(12)),_viewport=_interopRequireDefault(__webpack_require__(47)),_viewportMercatorProject=__webpack_require__(37),vec2=_interopRequireWildcard(__webpack_require__(69)),_assert=_interopRequireDefault(__webpack_require__(20)),ERR_ARGUMENT="Illegal argument to WebMercatorViewport",WebMercatorViewport=function(_Viewport){function WebMercatorViewport(){var _this,opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,_classCallCheck2.default)(this,WebMercatorViewport);var _opts$latitude=opts.latitude,latitude=void 0===_opts$latitude?0:_opts$latitude,_opts$longitude=opts.longitude,longitude=void 0===_opts$longitude?0:_opts$longitude,_opts$zoom=opts.zoom,zoom=void 0===_opts$zoom?11:_opts$zoom,_opts$pitch=opts.pitch,pitch=void 0===_opts$pitch?0:_opts$pitch,_opts$bearing=opts.bearing,bearing=void 0===_opts$bearing?0:_opts$bearing,_opts$nearZMultiplier=opts.nearZMultiplier,nearZMultiplier=void 0===_opts$nearZMultiplier?.1:_opts$nearZMultiplier,_opts$farZMultiplier=opts.farZMultiplier,farZMultiplier=void 0===_opts$farZMultiplier?10:_opts$farZMultiplier,_opts$orthographic=opts.orthographic,orthographic=void 0!==_opts$orthographic&&_opts$orthographic,width=opts.width,height=opts.height,_opts$altitude=opts.altitude,altitude=void 0===_opts$altitude?1.5:_opts$altitude;width=width||1,height=height||1,altitude=Math.max(.75,altitude);var _getProjectionParamet=(0,_viewportMercatorProject.getProjectionParameters)({width:width,height:height,pitch:pitch,altitude:altitude,nearZMultiplier:nearZMultiplier,farZMultiplier:farZMultiplier}),fov=_getProjectionParamet.fov,aspect=_getProjectionParamet.aspect,focalDistance=_getProjectionParamet.focalDistance,near=_getProjectionParamet.near,far=_getProjectionParamet.far,viewMatrixUncentered=(0,_viewportMercatorProject.getViewMatrix)({height:height,pitch:pitch,bearing:bearing,altitude:altitude}),position=opts.position&&[opts.position[0],opts.position[1],0],viewportOpts=Object.assign({},opts,{width:width,height:height,viewMatrix:viewMatrixUncentered,longitude:longitude,latitude:latitude,zoom:zoom,position:position,orthographic:orthographic,fovyRadians:fov,aspect:aspect,orthographicFocalDistance:focalDistance,near:near,far:far});return(_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(WebMercatorViewport).call(this,viewportOpts))).latitude=latitude,_this.longitude=longitude,_this.zoom=zoom,_this.pitch=pitch,_this.bearing=bearing,_this.altitude=altitude,_this.orthographic=orthographic,_this.metersToLngLatDelta=_this.metersToLngLatDelta.bind((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this))),_this.lngLatDeltaToMeters=_this.lngLatDeltaToMeters.bind((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this))),_this.addMetersToLngLat=_this.addMetersToLngLat.bind((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this))),Object.freeze((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this))),_this}return(0,_inherits2.default)(WebMercatorViewport,_Viewport),(0,_createClass2.default)(WebMercatorViewport,[{key:"metersToLngLatDelta",value:function(xyz){var _xyz=(0,_slicedToArray2.default)(xyz,3),x=_xyz[0],y=_xyz[1],_xyz$=_xyz[2],z=void 0===_xyz$?0:_xyz$;(0,_assert.default)(Number.isFinite(x)&&Number.isFinite(y)&&Number.isFinite(z),ERR_ARGUMENT);var _this$distanceScales=this.distanceScales,pixelsPerMeter=_this$distanceScales.pixelsPerMeter,degreesPerPixel=_this$distanceScales.degreesPerPixel,deltaLng=x*pixelsPerMeter[0]*degreesPerPixel[0],deltaLat=y*pixelsPerMeter[1]*degreesPerPixel[1];return 2===xyz.length?[deltaLng,deltaLat]:[deltaLng,deltaLat,z]}},{key:"lngLatDeltaToMeters",value:function(deltaLngLatZ){var _deltaLngLatZ=(0,_slicedToArray2.default)(deltaLngLatZ,3),deltaLng=_deltaLngLatZ[0],deltaLat=_deltaLngLatZ[1],_deltaLngLatZ$=_deltaLngLatZ[2],deltaZ=void 0===_deltaLngLatZ$?0:_deltaLngLatZ$;(0,_assert.default)(Number.isFinite(deltaLng)&&Number.isFinite(deltaLat)&&Number.isFinite(deltaZ),ERR_ARGUMENT);var _this$distanceScales2=this.distanceScales,pixelsPerDegree=_this$distanceScales2.pixelsPerDegree,metersPerPixel=_this$distanceScales2.metersPerPixel,deltaX=deltaLng*pixelsPerDegree[0]*metersPerPixel[0],deltaY=deltaLat*pixelsPerDegree[1]*metersPerPixel[1];return 2===deltaLngLatZ.length?[deltaX,deltaY]:[deltaX,deltaY,deltaZ]}},{key:"addMetersToLngLat",value:function(lngLatZ,xyz){return(0,_viewportMercatorProject.addMetersToLngLat)(lngLatZ,xyz)}},{key:"getMapCenterByLngLatPosition",value:function(_ref){var lngLat=_ref.lngLat,pos=_ref.pos,fromLocation=(0,_viewportMercatorProject.pixelsToWorld)(pos,this.pixelUnprojectionMatrix),toLocation=this.projectFlat(lngLat),translate=vec2.add([],toLocation,vec2.negate([],fromLocation)),newCenter=vec2.add([],this.center,translate);return this.unprojectFlat(newCenter)}},{key:"getLocationAtPoint",value:function(_ref2){var lngLat=_ref2.lngLat,pos=_ref2.pos;return this.getMapCenterByLngLatPosition({lngLat:lngLat,pos:pos})}},{key:"fitBounds",value:function(bounds){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},width=this.width,height=this.height,_fitBounds2=(0,_viewportMercatorProject.fitBounds)(Object.assign({width:width,height:height,bounds:bounds},options));return new WebMercatorViewport({width:width,height:height,longitude:_fitBounds2.longitude,latitude:_fitBounds2.latitude,zoom:_fitBounds2.zoom})}}]),WebMercatorViewport}(_viewport.default);exports.default=WebMercatorViewport,WebMercatorViewport.displayName="WebMercatorViewport"},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(9),_interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.testExports=exports.default=exports.MAPBOX_LIMITS=void 0;var _slicedToArray2=_interopRequireDefault(__webpack_require__(11)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_math=__webpack_require__(25),_controller=_interopRequireDefault(__webpack_require__(113)),_viewState=_interopRequireDefault(__webpack_require__(213)),_viewportMercatorProject=_interopRequireWildcard(__webpack_require__(37)),_assert=_interopRequireDefault(__webpack_require__(20)),_linearInterpolator=_interopRequireDefault(__webpack_require__(115)),_transitionManager=__webpack_require__(114),LINEAR_TRANSITION_PROPS={transitionDuration:300,transitionEasing:function(t){return t},transitionInterpolator:new _linearInterpolator.default,transitionInterruption:_transitionManager.TRANSITION_EVENTS.BREAK},NO_TRANSITION_PROPS={transitionDuration:0},MAPBOX_LIMITS={minZoom:0,maxZoom:20,minPitch:0,maxPitch:60};exports.MAPBOX_LIMITS=MAPBOX_LIMITS;var DEFAULT_STATE={pitch:0,bearing:0,altitude:1.5},MapState=function(_ViewState){function MapState(){var _this,_ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},width=_ref.width,height=_ref.height,latitude=_ref.latitude,longitude=_ref.longitude,zoom=_ref.zoom,_ref$bearing=_ref.bearing,bearing=void 0===_ref$bearing?DEFAULT_STATE.bearing:_ref$bearing,_ref$pitch=_ref.pitch,pitch=void 0===_ref$pitch?DEFAULT_STATE.pitch:_ref$pitch,_ref$altitude=_ref.altitude,altitude=void 0===_ref$altitude?DEFAULT_STATE.altitude:_ref$altitude,_ref$maxZoom=_ref.maxZoom,maxZoom=void 0===_ref$maxZoom?MAPBOX_LIMITS.maxZoom:_ref$maxZoom,_ref$minZoom=_ref.minZoom,minZoom=void 0===_ref$minZoom?MAPBOX_LIMITS.minZoom:_ref$minZoom,_ref$maxPitch=_ref.maxPitch,maxPitch=void 0===_ref$maxPitch?MAPBOX_LIMITS.maxPitch:_ref$maxPitch,_ref$minPitch=_ref.minPitch,minPitch=void 0===_ref$minPitch?MAPBOX_LIMITS.minPitch:_ref$minPitch,startPanLngLat=_ref.startPanLngLat,startZoomLngLat=_ref.startZoomLngLat,startBearing=_ref.startBearing,startPitch=_ref.startPitch,startZoom=_ref.startZoom;return(0,_classCallCheck2.default)(this,MapState),(0,_assert.default)(Number.isFinite(longitude),"`longitude` must be supplied"),(0,_assert.default)(Number.isFinite(latitude),"`latitude` must be supplied"),(0,_assert.default)(Number.isFinite(zoom),"`zoom` must be supplied"),(_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(MapState).call(this,{width:width,height:height,latitude:latitude,longitude:longitude,zoom:zoom,bearing:bearing,pitch:pitch,altitude:altitude,maxZoom:maxZoom,minZoom:minZoom,maxPitch:maxPitch,minPitch:minPitch})))._interactiveState={startPanLngLat:startPanLngLat,startZoomLngLat:startZoomLngLat,startBearing:startBearing,startPitch:startPitch,startZoom:startZoom},_this}return(0,_inherits2.default)(MapState,_ViewState),(0,_createClass2.default)(MapState,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(_ref2){var pos=_ref2.pos;return this._getUpdatedState({startPanLngLat:this._unproject(pos)})}},{key:"pan",value:function(_ref3){var pos=_ref3.pos,startPos=_ref3.startPos,startPanLngLat=this._interactiveState.startPanLngLat||this._unproject(startPos);if(!startPanLngLat)return this;var _this$_calculateNewLn=this._calculateNewLngLat({startPanLngLat:startPanLngLat,pos:pos}),_this$_calculateNewLn2=(0,_slicedToArray2.default)(_this$_calculateNewLn,2),longitude=_this$_calculateNewLn2[0],latitude=_this$_calculateNewLn2[1];return this._getUpdatedState({longitude:longitude,latitude:latitude})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanLngLat:null})}},{key:"rotateStart",value:function(_ref4){_ref4.pos;return this._getUpdatedState({startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(_ref5){var _ref5$deltaScaleX=_ref5.deltaScaleX,deltaScaleX=void 0===_ref5$deltaScaleX?0:_ref5$deltaScaleX,_ref5$deltaScaleY=_ref5.deltaScaleY,deltaScaleY=void 0===_ref5$deltaScaleY?0:_ref5$deltaScaleY,_this$_interactiveSta=this._interactiveState,startBearing=_this$_interactiveSta.startBearing,startPitch=_this$_interactiveSta.startPitch;if(!Number.isFinite(startBearing)||!Number.isFinite(startPitch))return this;var _this$_calculateNewPi=this._calculateNewPitchAndBearing({deltaScaleX:deltaScaleX,deltaScaleY:deltaScaleY,startBearing:startBearing,startPitch:startPitch}),pitch=_this$_calculateNewPi.pitch,bearing=_this$_calculateNewPi.bearing;return this._getUpdatedState({bearing:bearing,pitch:pitch})}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(_ref6){var pos=_ref6.pos;return this._getUpdatedState({startZoomLngLat:this._unproject(pos),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(_ref7){var pos=_ref7.pos,startPos=_ref7.startPos,scale=_ref7.scale;(0,_assert.default)(scale>0,"`scale` must be a positive number");var _this$_interactiveSta2=this._interactiveState,startZoom=_this$_interactiveSta2.startZoom,startZoomLngLat=_this$_interactiveSta2.startZoomLngLat;Number.isFinite(startZoom)||(startZoom=this._viewportProps.zoom,startZoomLngLat=this._unproject(startPos)||this._unproject(pos)),(0,_assert.default)(startZoomLngLat,"`startZoomLngLat` prop is required for zoom behavior to calculate where to position the map.");var zoom=this._calculateNewZoom({scale:scale,startZoom:startZoom}),_zoomedViewport$getLo=new _viewportMercatorProject.default(Object.assign({},this._viewportProps,{zoom:zoom})).getLocationAtPoint({lngLat:startZoomLngLat,pos:pos}),_zoomedViewport$getLo2=(0,_slicedToArray2.default)(_zoomedViewport$getLo,2),longitude=_zoomedViewport$getLo2[0],latitude=_zoomedViewport$getLo2[1];return this._getUpdatedState({zoom:zoom,longitude:longitude,latitude:latitude})}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}},{key:"zoomIn",value:function(){return this._zoomFromCenter(2)}},{key:"zoomOut",value:function(){return this._zoomFromCenter(.5)}},{key:"moveLeft",value:function(){return this._panFromCenter([100,0])}},{key:"moveRight",value:function(){return this._panFromCenter([-100,0])}},{key:"moveUp",value:function(){return this._panFromCenter([0,100])}},{key:"moveDown",value:function(){return this._panFromCenter([0,-100])}},{key:"rotateLeft",value:function(){return this._getUpdatedState({bearing:this._viewportProps.bearing-15})}},{key:"rotateRight",value:function(){return this._getUpdatedState({bearing:this._viewportProps.bearing+15})}},{key:"rotateUp",value:function(){return this._getUpdatedState({pitch:this._viewportProps.pitch+10})}},{key:"rotateDown",value:function(){return this._getUpdatedState({pitch:this._viewportProps.pitch-10})}},{key:"shortestPathFrom",value:function(viewState){var fromProps=viewState.getViewportProps(),props=Object.assign({},this._viewportProps),bearing=props.bearing,longitude=props.longitude;return Math.abs(bearing-fromProps.bearing)>180&&(props.bearing=bearing<0?bearing+360:bearing-360),Math.abs(longitude-fromProps.longitude)>180&&(props.longitude=longitude<0?longitude+360:longitude-360),props}},{key:"_zoomFromCenter",value:function(scale){var _this$_viewportProps=this._viewportProps,width=_this$_viewportProps.width,height=_this$_viewportProps.height;return this.zoom({pos:[width/2,height/2],scale:scale})}},{key:"_panFromCenter",value:function(offset){var _this$_viewportProps2=this._viewportProps,width=_this$_viewportProps2.width,height=_this$_viewportProps2.height;return this.pan({startPos:[width/2,height/2],pos:[width/2+offset[0],height/2+offset[1]]})}},{key:"_getUpdatedState",value:function(newProps){return new MapState(Object.assign({},this._viewportProps,this._interactiveState,newProps))}},{key:"_applyConstraints",value:function(props){var maxZoom=props.maxZoom,minZoom=props.minZoom,zoom=props.zoom;props.zoom=(0,_math.clamp)(zoom,minZoom,maxZoom);var maxPitch=props.maxPitch,minPitch=props.minPitch,pitch=props.pitch;return props.pitch=(0,_math.clamp)(pitch,minPitch,maxPitch),Object.assign(props,(0,_viewportMercatorProject.normalizeViewportProps)(props)),props}},{key:"_unproject",value:function(pos){var viewport=new _viewportMercatorProject.default(this._viewportProps);return pos&&viewport.unproject(pos)}},{key:"_calculateNewLngLat",value:function(_ref8){var startPanLngLat=_ref8.startPanLngLat,pos=_ref8.pos;return new _viewportMercatorProject.default(this._viewportProps).getMapCenterByLngLatPosition({lngLat:startPanLngLat,pos:pos})}},{key:"_calculateNewZoom",value:function(_ref9){var scale=_ref9.scale,startZoom=_ref9.startZoom,_this$_viewportProps3=this._viewportProps,maxZoom=_this$_viewportProps3.maxZoom,minZoom=_this$_viewportProps3.minZoom,zoom=startZoom+Math.log2(scale);return(0,_math.clamp)(zoom,minZoom,maxZoom)}},{key:"_calculateNewPitchAndBearing",value:function(_ref10){var deltaScaleX=_ref10.deltaScaleX,deltaScaleY=_ref10.deltaScaleY,startBearing=_ref10.startBearing,startPitch=_ref10.startPitch;deltaScaleY=(0,_math.clamp)(deltaScaleY,-1,1);var _this$_viewportProps4=this._viewportProps,minPitch=_this$_viewportProps4.minPitch,maxPitch=_this$_viewportProps4.maxPitch,pitch=startPitch;return deltaScaleY>0?pitch=startPitch+deltaScaleY*(maxPitch-startPitch):deltaScaleY<0&&(pitch=startPitch-deltaScaleY*(minPitch-startPitch)),{pitch:pitch,bearing:startBearing+180*deltaScaleX}}}]),MapState}(_viewState.default),MapController=function(_Controller){function MapController(props){var _this2;return(0,_classCallCheck2.default)(this,MapController),(_this2=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(MapController).call(this,MapState,props))).invertPan=!0,_this2}return(0,_inherits2.default)(MapController,_Controller),(0,_createClass2.default)(MapController,[{key:"_getTransitionProps",value:function(){return LINEAR_TRANSITION_PROPS}},{key:"_onPanRotate",value:function(event){if(!this.dragRotate)return!1;var deltaX=event.deltaX,deltaY=event.deltaY,_this$getCenter=this.getCenter(event),centerY=(0,_slicedToArray2.default)(_this$getCenter,2)[1],startY=centerY-deltaY,_this$controllerState=this.controllerState.getViewportProps(),width=_this$controllerState.width,height=_this$controllerState.height,deltaScaleX=deltaX/width,deltaScaleY=0;deltaY>0?Math.abs(height-startY)>5&&(deltaScaleY=deltaY/(startY-height)*1.2):deltaY<0&&startY>5&&(deltaScaleY=1-centerY/startY),deltaScaleY=Math.min(1,Math.max(-1,deltaScaleY));var newControllerState=this.controllerState.rotate({deltaScaleX:deltaScaleX,deltaScaleY:deltaScaleY});return this.updateViewport(newControllerState,NO_TRANSITION_PROPS,{isDragging:!0})}}]),MapController}(_controller.default);exports.default=MapController;var testExports={MapState:MapState};exports.testExports=testExports},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_math=__webpack_require__(25),_assert=_interopRequireDefault(__webpack_require__(20)),TransitionInterpolator=function(){function TransitionInterpolator(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,_classCallCheck2.default)(this,TransitionInterpolator),Array.isArray(opts)&&(opts={compare:opts,extract:opts,required:opts});var _opts=opts,compare=_opts.compare,extract=_opts.extract,required=_opts.required;this._propsToCompare=compare,this._propsToExtract=extract,this._requiredProps=required}return(0,_createClass2.default)(TransitionInterpolator,[{key:"arePropsEqual",value:function(currentProps,nextProps){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=(this._propsToCompare||Object.keys(nextProps))[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var key=_step.value;if(!(0,_math.equals)(currentProps[key],nextProps[key]))return!1}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return!0}},{key:"initializeProps",value:function(startProps,endProps){var result;if(this._propsToExtract){var startViewStateProps={},endViewStateProps={},_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=this._propsToExtract[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var key=_step2.value;startViewStateProps[key]=startProps[key],endViewStateProps[key]=endProps[key]}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}result={start:startViewStateProps,end:endViewStateProps}}else result={start:startProps,end:endProps};return this._checkRequiredProps(result.start),this._checkRequiredProps(result.end),result}},{key:"interpolateProps",value:function(startProps,endProps,t){(0,_assert.default)(!1,"interpolateProps is not implemented")}},{key:"_checkRequiredProps",value:function(props){this._requiredProps&&this._requiredProps.forEach(function(propName){var value=props[propName];(0,_assert.default)(Number.isFinite(value)||Array.isArray(value),"".concat(propName," is required for transition"))})}}]),TransitionInterpolator}();exports.default=TransitionInterpolator},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_log=_interopRequireDefault(__webpack_require__(24)),_drawLayersPass=_interopRequireDefault(__webpack_require__(748)),_pickLayersPass=_interopRequireDefault(__webpack_require__(350)),_getPixelRatio=_interopRequireDefault(__webpack_require__(351)),DeckRenderer=function(){function DeckRenderer(gl){(0,_classCallCheck2.default)(this,DeckRenderer),this.gl=gl,this.pixelRatio=null,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new _drawLayersPass.default(gl),this.pickLayersPass=new _pickLayersPass.default(gl),this.renderCount=0,this._needsRedraw="Initial render"}return(0,_createClass2.default)(DeckRenderer,[{key:"setProps",value:function(props){"useDevicePixels"in props&&(this.pixelRatio=(0,_getPixelRatio.default)(props.useDevicePixels)),"layerFilter"in props&&this.layerFilter!==props.layerFilter&&(this.layerFilter=props.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in props&&this.drawPickingColors!==props.drawPickingColors&&(this.drawPickingColors=props.drawPickingColors,this._needsRedraw="drawPickingColors changed");var pixelRatio=this.pixelRatio,layerFilter=this.layerFilter;this.drawLayersPass.setProps({pixelRatio:pixelRatio,layerFilter:layerFilter}),this.pickLayersPass.setProps({pixelRatio:pixelRatio,layerFilter:layerFilter})}},{key:"renderLayers",value:function(_ref){var _this=this,layers=_ref.layers,viewports=_ref.viewports,activateViewport=_ref.activateViewport,views=_ref.views,_ref$redrawReason=_ref.redrawReason,redrawReason=void 0===_ref$redrawReason?"unknown reason":_ref$redrawReason,_ref$clearCanvas=_ref.clearCanvas,clearCanvas=void 0===_ref$clearCanvas||_ref$clearCanvas,_ref$effects=_ref.effects,effects=void 0===_ref$effects?[]:_ref$effects,pass=_ref.pass,stats=_ref.stats,layerPass=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,effectProps=this.prepareEffects(effects),renderStats=layerPass.render({layers:layers,viewports:viewports,views:views,onViewportActive:activateViewport,redrawReason:redrawReason,clearCanvas:clearCanvas,effects:effects,effectProps:effectProps});this.renderCount++,_log.default.priority>=2&&renderStats.forEach(function(status){_this.logRenderStats({status:status,pass:pass,redrawReason:redrawReason,stats:stats})})}},{key:"needsRedraw",value:function(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},redraw=this._needsRedraw;return opts.clearRedrawFlags&&(this._needsRedraw=!1),redraw}},{key:"prepareEffects",value:function(effects){var effectProps={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=effects[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var effect=_step.value;Object.assign(effectProps,effect.prepare())}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return effectProps}},{key:"logRenderStats",value:function(_ref2){var renderStats=_ref2.renderStats,pass=_ref2.pass,redrawReason=_ref2.redrawReason,stats=_ref2.stats,totalCount=renderStats.totalCount,visibleCount=renderStats.visibleCount,compositeCount=renderStats.compositeCount,pickableCount=renderStats.pickableCount,hiddenCount=totalCount-compositeCount-visibleCount,message="";message+="RENDER #".concat(this.renderCount," ").concat(visibleCount," (of ").concat(totalCount," layers) to ").concat(pass," because ").concat(redrawReason," "),_log.default.priority>2&&(message+="(".concat(hiddenCount," hidden, ").concat(compositeCount," composite ").concat(pickableCount," pickable)")),_log.default.log(2,message)(),stats&&stats.get("Redraw Layers").add(visibleCount)}}]),DeckRenderer}();exports.default=DeckRenderer},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_pass=_interopRequireDefault(__webpack_require__(749)),_core=__webpack_require__(7),LayersPass=function(_Pass){function LayersPass(){return(0,_classCallCheck2.default)(this,LayersPass),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(LayersPass).apply(this,arguments))}return(0,_inherits2.default)(LayersPass,_Pass),(0,_createClass2.default)(LayersPass,[{key:"render",value:function(props){return this.drawLayers(props)}},{key:"drawLayers",value:function(_ref){var _this=this,layers=_ref.layers,viewports=_ref.viewports,views=_ref.views,onViewportActive=_ref.onViewportActive,_ref$deviceRect=_ref.deviceRect,deviceRect=void 0===_ref$deviceRect?null:_ref$deviceRect,_ref$parameters=_ref.parameters,parameters=void 0===_ref$parameters?{}:_ref$parameters,_ref$pass=_ref.pass,pass=void 0===_ref$pass?"draw":_ref$pass,_ref$redrawReason=_ref.redrawReason,redrawReason=void 0===_ref$redrawReason?"":_ref$redrawReason,_ref$clearCanvas=_ref.clearCanvas,clearCanvas=void 0===_ref$clearCanvas||_ref$clearCanvas,effects=_ref.effects,effectProps=_ref.effectProps,gl=this.gl;clearCanvas&&this.clearCanvas(gl);var renderStats=[];return viewports.forEach(function(viewportOrDescriptor,i){var viewport=_this.getViewportFromDescriptor(viewportOrDescriptor),view=views&&views[viewport.id];onViewportActive(viewport);var stats=_this.drawLayersInViewport(gl,{layers:layers,viewport:viewport,view:view,deviceRect:deviceRect,parameters:parameters,pass:pass,redrawReason:redrawReason,effects:effects,effectProps:effectProps});renderStats.push(stats)}),renderStats}},{key:"drawLayersInViewport",value:function(gl,_ref2){var _this2=this,layers=_ref2.layers,viewport=_ref2.viewport,view=_ref2.view,_ref2$parameters=(_ref2.deviceRect,_ref2.parameters),parameters=void 0===_ref2$parameters?{}:_ref2$parameters,effects=(_ref2.pass,_ref2.redrawReason,_ref2.effects),effectProps=_ref2.effectProps,glViewport=this.getGLViewport(gl,{viewport:viewport});if(view&&view.props.clear){var clearOpts=!0===view.props.clear?{color:!0,depth:!0}:view.props.clear;(0,_core.withParameters)(gl,{scissorTest:!0,scissor:glViewport},function(){return(0,_core.clear)(gl,clearOpts)})}var renderStatus={totalCount:layers.length,visibleCount:0,compositeCount:0,pickableCount:0};return(0,_core.setParameters)(gl,parameters||{}),layers.forEach(function(layer,layerIndex){var shouldDrawLayer=_this2.shouldDrawLayer(layer,viewport);shouldDrawLayer&&layer.props.pickable&&renderStatus.pickableCount++,layer.isComposite&&renderStatus.compositeCount++,shouldDrawLayer&&(renderStatus.visibleCount++,_this2.drawLayerInViewport({gl:gl,layer:layer,layerIndex:layerIndex,glViewport:glViewport,parameters:parameters,effects:effects,effectProps:effectProps}))}),renderStatus}},{key:"drawLayerInViewport",value:function(_ref3){_ref3.gl;var layer=_ref3.layer,layerIndex=_ref3.layerIndex,glViewport=_ref3.glViewport,parameters=_ref3.parameters,effects=_ref3.effects,effectProps=_ref3.effectProps,moduleParameters=this.getModuleParameters(layer,effects,effectProps),uniforms=Object.assign({},layer.context.uniforms,{layerIndex:layerIndex}),layerParameters=this.getLayerParameters(layer,layerIndex,glViewport,parameters);layer.drawLayer({moduleParameters:moduleParameters,uniforms:uniforms,parameters:layerParameters})}},{key:"getViewportFromDescriptor",value:function(viewportOrDescriptor){return viewportOrDescriptor.viewport?viewportOrDescriptor.viewport:viewportOrDescriptor}},{key:"shouldDrawLayer",value:function(layer,viewport){var layerFilter=this.props.layerFilter,shouldDrawLayer=!layer.isComposite&&layer.props.visible;return shouldDrawLayer&&layerFilter&&(shouldDrawLayer=layerFilter({layer:layer,viewport:viewport,isPicking:!1})),shouldDrawLayer}},{key:"getModuleParameters",value:function(layer){return Object.assign(Object.create(layer.props),{viewport:layer.context.viewport,pickingActive:0,devicePixelRatio:this.props.pixelRatio})}},{key:"getLayerParameters",value:function(layer,layerIndex,glViewport,parameters){var layerParameters=Object.assign({},layer.props.parameters||{},parameters);return Object.assign(layerParameters,{viewport:glViewport}),layerParameters}},{key:"getGLViewport",value:function(gl,_ref4){var viewport=_ref4.viewport,height=gl.canvas?gl.canvas.clientHeight||gl.canvas.height:100,dimensions=viewport,pixelRatio=this.props.pixelRatio;return[dimensions.x*pixelRatio,(height-dimensions.y-dimensions.height)*pixelRatio,dimensions.width*pixelRatio,dimensions.height*pixelRatio]}},{key:"clearCanvas",value:function(gl){var width=gl.drawingBufferWidth,height=gl.drawingBufferHeight;(0,_core.withParameters)(gl,{viewport:[0,0,width,height]},function(){gl.clear(16640)})}}]),LayersPass}(_pass.default);exports.default=LayersPass},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_get2=_interopRequireDefault(__webpack_require__(16)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_layersPass=_interopRequireDefault(__webpack_require__(349)),_core=__webpack_require__(7),PickLayersPass=function(_LayersPass){function PickLayersPass(){return(0,_classCallCheck2.default)(this,PickLayersPass),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(PickLayersPass).apply(this,arguments))}return(0,_inherits2.default)(PickLayersPass,_LayersPass),(0,_createClass2.default)(PickLayersPass,[{key:"render",value:function(props){props.pickingFBO?this.drawPickingBuffer(props):(0,_get2.default)((0,_getPrototypeOf2.default)(PickLayersPass.prototype),"render",this).call(this,props)}},{key:"drawPickingBuffer",value:function(_ref){var _this=this,layers=_ref.layers,viewports=_ref.viewports,onViewportActive=_ref.onViewportActive,pickingFBO=_ref.pickingFBO,effectProps=_ref.effectProps,_ref$deviceRect=_ref.deviceRect,x=_ref$deviceRect.x,y=_ref$deviceRect.y,width=_ref$deviceRect.width,height=_ref$deviceRect.height,_ref$redrawReason=_ref.redrawReason,redrawReason=void 0===_ref$redrawReason?"":_ref$redrawReason,gl=this.gl;return(0,_core.withParameters)(gl,{framebuffer:pickingFBO,scissorTest:!0,scissor:[x,y,width,height],clearColor:[0,0,0,0]},function(){_this.drawLayers({layers:layers,viewports:viewports,onViewportActive:onViewportActive,pass:"picking",redrawReason:redrawReason,effectProps:effectProps,parameters:{blend:!0,blendFunc:[1,0,32771,0],blendEquation:32774,blendColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0]}})})}},{key:"shouldDrawLayer",value:function(layer,viewport){var layerFilter=this.props.layerFilter,shouldDrawLayer=!layer.isComposite&&layer.props.visible&&layer.props.pickable;return shouldDrawLayer&&layerFilter&&(shouldDrawLayer=layerFilter({layer:layer,viewport:viewport,isPicking:!0})),shouldDrawLayer}},{key:"getModuleParameters",value:function(layer,effects,effectProps){var moduleParameters=Object.assign(Object.create(layer.props),{viewport:layer.context.viewport,pickingActive:1,devicePixelRatio:this.props.pixelRatio});return Object.assign(moduleParameters,effectProps),moduleParameters}},{key:"getLayerParameters",value:function(layer,layerIndex,glViewport,parameters){var layerParameters=Object.assign({},layer.props.parameters||{},parameters);return Object.assign(layerParameters,{viewport:glViewport,blendColor:[0,0,0,(layerIndex+1)/255]}),layerParameters}}]),PickLayersPass}(_layersPass.default);exports.default=PickLayersPass},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(useDevicePixels){return(0,_assert.default)("boolean"==typeof useDevicePixels,"Invalid useDevicePixels"),useDevicePixels&&"undefined"!=typeof window?window.devicePixelRatio:1};var _assert=_interopRequireDefault(__webpack_require__(20))},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"EventManager",{enumerable:!0,get:function(){return _eventManager.default}});var _eventManager=_interopRequireDefault(__webpack_require__(753))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _hammerOverrides=__webpack_require__(754),hammerjs=null;"undefined"!=typeof document&&(hammerjs=__webpack_require__(755),(0,_hammerOverrides.enhancePointerEventInput)(hammerjs.PointerEventInput),(0,_hammerOverrides.enhanceMouseInput)(hammerjs.MouseInput));var _default=hammerjs;exports.default=_default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _slicedToArray2=_interopRequireDefault(__webpack_require__(11)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_controller=_interopRequireDefault(__webpack_require__(113)),_viewState=_interopRequireDefault(__webpack_require__(213)),_math=__webpack_require__(25);function ensureFinite(value,fallbackValue){return Number.isFinite(value)?value:fallbackValue}var FirstPersonState=function(_ViewState){function FirstPersonState(_ref){var _this,width=_ref.width,height=_ref.height,position=_ref.position,bearing=_ref.bearing,pitch=_ref.pitch,longitude=_ref.longitude,latitude=_ref.latitude,zoom=_ref.zoom,startPanEventPosition=(_ref.syncBearing,_ref.bounds,_ref.startPanEventPosition),startPanPosition=_ref.startPanPosition,startRotateCenter=_ref.startRotateCenter,startRotateViewport=_ref.startRotateViewport,startZoomPos=_ref.startZoomPos,startZoom=_ref.startZoom;return(0,_classCallCheck2.default)(this,FirstPersonState),(_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(FirstPersonState).call(this,{width:width,height:height,position:position,bearing:bearing,pitch:pitch,longitude:longitude,latitude:latitude,zoom:zoom})))._interactiveState={startPanEventPosition:startPanEventPosition,startPanPosition:startPanPosition,startRotateCenter:startRotateCenter,startRotateViewport:startRotateViewport,startZoomPos:startZoomPos,startZoom:startZoom},_this}return(0,_inherits2.default)(FirstPersonState,_ViewState),(0,_createClass2.default)(FirstPersonState,[{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(_ref2){var pos=_ref2.pos,_this$_viewportProps=this._viewportProps,translationX=_this$_viewportProps.translationX,translationY=_this$_viewportProps.translationY;return this._getUpdatedState({startPanPosition:[translationX,translationY],startPanEventPosition:pos})}},{key:"pan",value:function(_ref3){var pos=_ref3.pos,startPos=_ref3.startPos,startPanEventPosition=this._interactiveState.startPanEventPosition||startPos;if(!startPanEventPosition)return this;var _ref4=this._interactiveState.startPanPosition||[],_ref5=(0,_slicedToArray2.default)(_ref4,2),translationX=_ref5[0],translationY=_ref5[1];translationX=ensureFinite(translationX,this._viewportProps.translationX),translationY=ensureFinite(translationY,this._viewportProps.translationY);var deltaX=pos[0]-startPanEventPosition[0],deltaY=pos[1]-startPanEventPosition[1];return this._getUpdatedState({translationX:translationX+deltaX,translationY:translationY-deltaY})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanPosition:null,startPanPos:null})}},{key:"rotateStart",value:function(_ref6){_ref6.pos;return this._getUpdatedState({startRotateCenter:this._viewportProps.position,startRotateViewport:this._viewportProps})}},{key:"rotate",value:function(_ref7){var deltaScaleX=_ref7.deltaScaleX,deltaScaleY=_ref7.deltaScaleY;if(!this._interactiveState.startRotateCenter)return this;var _this$_viewportProps2=this._viewportProps,bearing=_this$_viewportProps2.bearing,pitch=_this$_viewportProps2.pitch;return this._getUpdatedState({bearing:bearing+10*deltaScaleX,pitch:pitch-10*deltaScaleY})}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startRotateCenter:null,startRotateViewport:null})}},{key:"zoomStart",value:function(_ref8){var pos=_ref8.pos;return this._getUpdatedState({startZoomPos:pos,startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(_ref9){var pos=_ref9.pos,startPos=_ref9.startPos,scale=_ref9.scale,_this$_viewportProps3=this._viewportProps,zoom=_this$_viewportProps3.zoom,minZoom=_this$_viewportProps3.minZoom,maxZoom=_this$_viewportProps3.maxZoom,width=_this$_viewportProps3.width,height=_this$_viewportProps3.height,startZoomPos=(_this$_viewportProps3.translationX,_this$_viewportProps3.translationY,this._interactiveState.startZoomPos||startPos||pos),newZoom=(0,_math.clamp)(zoom*scale,minZoom,maxZoom);pos[0],startZoomPos[0],pos[1],startZoomPos[1],startZoomPos[0],startZoomPos[1];return newZoom/zoom<1?this.moveBackward():this.moveForward()}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomPos:null,startZoom:null})}},{key:"moveLeft",value:function(){var newBearing=this._viewportProps.bearing-2;return this._getUpdatedState({bearing:newBearing})}},{key:"moveRight",value:function(){var newBearing=this._viewportProps.bearing+2;return this._getUpdatedState({bearing:newBearing})}},{key:"moveForward",value:function(){var position=this._viewportProps.position,direction=this.getDirection(),delta=new _math.Vector3(direction).normalize().scale(1);return this._getUpdatedState({position:new _math.Vector3(position).add(delta)})}},{key:"moveBackward",value:function(){var position=this._viewportProps.position,direction=this.getDirection(),delta=new _math.Vector3(direction).normalize().scale(-1);return this._getUpdatedState({position:new _math.Vector3(position).add(delta)})}},{key:"moveUp",value:function(){var position=this._viewportProps.position;return this._getUpdatedState({position:new _math.Vector3(position).add([0,0,1])})}},{key:"moveDown",value:function(){var position=this._viewportProps.position,delta=position[2]>=1?[0,0,-1]:[0,0,0];return this._getUpdatedState({position:new _math.Vector3(position).add(delta)})}},{key:"zoomIn",value:function(){return this._getUpdatedState({zoom:this._viewportProps.zoom+.2})}},{key:"zoomOut",value:function(){return this._getUpdatedState({zoom:this._viewportProps.zoom-.2})}},{key:"_getUpdatedState",value:function(newProps){return new FirstPersonState(Object.assign({},this._viewportProps,this._interactiveState,newProps))}}]),FirstPersonState}(_viewState.default),FirstPersonController=function(_Controller){function FirstPersonController(props){return(0,_classCallCheck2.default)(this,FirstPersonController),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(FirstPersonController).call(this,FirstPersonState,props))}return(0,_inherits2.default)(FirstPersonController,_Controller),FirstPersonController}(_controller.default);exports.default=FirstPersonController},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_controller=_interopRequireDefault(__webpack_require__(113)),_orbitController=__webpack_require__(214),_linearInterpolator=_interopRequireDefault(__webpack_require__(115)),_transitionManager=__webpack_require__(114),LINEAR_TRANSITION_PROPS={transitionDuration:300,transitionEasing:function(t){return t},transitionInterpolator:new _linearInterpolator.default(["target","zoom"]),transitionInterruption:_transitionManager.TRANSITION_EVENTS.BREAK},OrthographicController=function(_Controller){function OrthographicController(props){var _this;return(0,_classCallCheck2.default)(this,OrthographicController),(_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(OrthographicController).call(this,_orbitController.OrbitState,props))).invertPan=!0,_this}return(0,_inherits2.default)(OrthographicController,_Controller),(0,_createClass2.default)(OrthographicController,[{key:"_onPanRotate",value:function(event){return!1}},{key:"_getTransitionProps",value:function(){return LINEAR_TRANSITION_PROPS}}]),OrthographicController}(_controller.default);exports.default=OrthographicController},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0),_interopRequireWildcard=__webpack_require__(9);Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"ImageLoader",{enumerable:!0,get:function(){return _imageLoader.default}}),Object.defineProperty(exports,"HTMLImageLoader",{enumerable:!0,get:function(){return _imageLoader.HTMLImageLoader}}),Object.defineProperty(exports,"ImageBitmapLoader",{enumerable:!0,get:function(){return _imageLoader.ImageBitmapLoader}}),Object.defineProperty(exports,"ImageWriter",{enumerable:!0,get:function(){return _imageWriter.default}}),Object.defineProperty(exports,"loadImage",{enumerable:!0,get:function(){return _parseImage.loadImage}}),Object.defineProperty(exports,"isImage",{enumerable:!0,get:function(){return _getImageMetadata.isImage}}),Object.defineProperty(exports,"getImageMetadata",{enumerable:!0,get:function(){return _getImageMetadata.getImageMetadata}}),Object.defineProperty(exports,"getImageSize",{enumerable:!0,get:function(){return _getImageMetadata.getImageSize}}),Object.defineProperty(exports,"decodeImage",{enumerable:!0,get:function(){return _imageUtilsBrowser.decodeImage}});var _imageLoader=_interopRequireWildcard(__webpack_require__(777)),_imageWriter=_interopRequireDefault(__webpack_require__(784)),_parseImage=__webpack_require__(357),_getImageMetadata=__webpack_require__(358),_imageUtilsBrowser=__webpack_require__(811)},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseImage=parseImage,exports.loadImage=function(_x,_x2){return _loadImage.apply(this,arguments)},exports.parseToImageBitmap=parseToImageBitmap,exports.loadToHTMLImage=loadToHTMLImage,exports.canParseImage=void 0;var _regenerator=_interopRequireDefault(__webpack_require__(133)),_asyncToGenerator2=_interopRequireDefault(__webpack_require__(134)),_parseImageNode=__webpack_require__(778),canParseImage=_parseImageNode.parseImageNode||"undefined"!=typeof ImageBitmap;function parseImage(arrayBuffer,options){return _parseImageNode.parseImageNode?(0,_parseImageNode.parseImageNode)(arrayBuffer,options):parseToImageBitmap(arrayBuffer)}function _loadImage(){return(_loadImage=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee(url,options){var response,arrayBuffer;return _regenerator.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if("undefined"!=typeof Image){_context.next=8;break}return _context.next=3,fetch(url,options);case 3:return response=_context.sent,_context.next=6,response.arrayBuffer();case 6:return arrayBuffer=_context.sent,_context.abrupt("return",parseImage(arrayBuffer));case 8:return _context.next=10,loadToHTMLImage(url,options);case 10:return _context.abrupt("return",_context.sent);case 11:case"end":return _context.stop()}},_callee)}))).apply(this,arguments)}function parseToImageBitmap(arrayBuffer){if("undefined"==typeof createImageBitmap)throw new Error("parseImage");var blob=new Blob([new Uint8Array(arrayBuffer)]);return createImageBitmap(blob)}function loadToHTMLImage(_x3,_x4){return _loadToHTMLImage.apply(this,arguments)}function _loadToHTMLImage(){return(_loadToHTMLImage=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee2(url,options){var src,response,xml;return _regenerator.default.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!/\.svg((\?|#).*)?$/.test(url)){_context2.next=10;break}return _context2.next=3,fetch(url,options);case 3:return response=_context2.sent,_context2.next=6,response.text();case 6:xml=_context2.sent,src="data:image/svg+xml;base64,".concat(btoa(xml)),_context2.next=13;break;case 10:return _context2.next=12,url;case 12:src=_context2.sent;case 13:return _context2.next=15,new Promise(function(resolve,reject){try{var image=new Image;image.onload=function(){return resolve(image)},image.onerror=function(err){return reject(new Error("Could not load image ".concat(url,": ").concat(err)))},image.crossOrigin=options&&options.crossOrigin||"anonymous",image.src=src}catch(error){reject(error)}});case 15:return _context2.abrupt("return",_context2.sent);case 16:case"end":return _context2.stop()}},_callee2)}))).apply(this,arguments)}exports.canParseImage=canParseImage},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.isImage=function(arrayBuffer){var result=guessImageMetadata(arrayBuffer);return!!result&&result.mimeType},exports.getImageMetadata=getImageMetadata,exports.getImageSize=function(arrayBuffer){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return getImageMetadata(arrayBuffer)};var _slicedToArray2=_interopRequireDefault(__webpack_require__(11)),_bufferToArrayBuffer=__webpack_require__(359),BIG_ENDIAN=!1,LITTLE_ENDIAN=!0,mimeTypeMap=new Map([["image/png",function(arrayBuffer){var dataView=toDataView(arrayBuffer);if(dataView.byteLength<24||2303741511!==dataView.getUint32(0,BIG_ENDIAN))return null;return{width:dataView.getUint32(16,BIG_ENDIAN),height:dataView.getUint32(20,BIG_ENDIAN)}}],["image/jpeg",function(arrayBuffer){var dataView=toDataView(arrayBuffer);if(dataView.byteLength<2||65496!==dataView.getUint16(0,BIG_ENDIAN))return null;var _getJpegMarkers=function(){for(var tableMarkers=new Set([65499,65476,65484,65501,65534]),i=65504;i<65520;++i)tableMarkers.add(i);var sofMarkers=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:tableMarkers,sofMarkers:sofMarkers}}(),tableMarkers=_getJpegMarkers.tableMarkers,sofMarkers=_getJpegMarkers.sofMarkers,i=2;for(;i<dataView.byteLength;){var marker=dataView.getUint16(i,BIG_ENDIAN);if(sofMarkers.has(marker))return{height:dataView.getUint16(i+5,BIG_ENDIAN),width:dataView.getUint16(i+7,BIG_ENDIAN)};if(!tableMarkers.has(marker))return null;i+=2,i+=dataView.getUint16(i,BIG_ENDIAN)}return null}],["image/gif",function(arrayBuffer){var dataView=toDataView(arrayBuffer);if(dataView.byteLength<10||1195984440!==dataView.getUint32(0,BIG_ENDIAN))return null;return{width:dataView.getUint16(6,LITTLE_ENDIAN),height:dataView.getUint16(8,LITTLE_ENDIAN)}}],["image/bmp",function(arrayBuffer){var dataView=toDataView(arrayBuffer);if(16973!==dataView.getUint16(0,BIG_ENDIAN))return null;return{width:dataView.getUint32(18,LITTLE_ENDIAN),height:dataView.getUint32(22,LITTLE_ENDIAN)}}]]),ERR_INVALID_TYPE="Invalid MIME type. Supported MIME types are: ".concat(Array.from(mimeTypeMap.keys()).join(", "));function getImageMetadata(arrayBuffer){var mimeType=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(mimeType){var handler=mimeTypeMap.get(mimeType);if(!handler)throw new Error(ERR_INVALID_TYPE);var _result=handler(arrayBuffer);if(!_result)throw new Error("invalid image data for type: ".concat(mimeType));return _result}var result=guessImageMetadata(arrayBuffer,mimeType);if(!result)throw new Error(ERR_INVALID_TYPE);return result}function guessImageMetadata(arrayBuffer,mimeType){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=mimeTypeMap.entries()[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _step$value=(0,_slicedToArray2.default)(_step.value,2),supportedMimeType=_step$value[0],result=(0,_step$value[1])(arrayBuffer);if(result)return result.mimeType=supportedMimeType,result}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return null}function toDataView(data){if(_bufferToArrayBuffer.bufferToArrayBuffer&&(data=(0,_bufferToArrayBuffer.bufferToArrayBuffer)(data)),data instanceof ArrayBuffer||ArrayBuffer.isView(data))return new DataView(data.buffer||data);throw new Error("toDataView")}},function(module,exports,__webpack_require__){"use strict";(function(Buffer){Object.defineProperty(exports,"__esModule",{value:!0}),exports.bufferToArrayBuffer=function(buffer){if(Buffer.isBuffer(buffer)){var typedArray=new Uint8Array(buffer);return typedArray.buffer}return buffer}}).call(this,__webpack_require__(72).Buffer)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setPathPrefix=function(prefix){pathPrefix=prefix},exports.getPathPrefix=function(){return pathPrefix},exports.addAliases=function(aliases){Object.assign(fileAliases,aliases)},exports.resolvePath=function(filename){for(var alias in fileAliases)if(filename.startsWith(alias)){var replacement=fileAliases[alias];return filename.replace(alias,replacement)}return filename+=pathPrefix};var pathPrefix="",fileAliases={}},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(362),_interopRequireDefault=__webpack_require__(21);Object.defineProperty(exports,"__esModule",{value:!0}),exports.fetchFile=function(_x,_x2){return _fetchFile.apply(this,arguments)},exports.readFileSync=function(url){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return url=(0,_fileAliases.resolvePath)(url),(_globals.isBrowser?_fetchFileBrowser.readFileSync:node.readFileSync)(url,options)},exports.createReadStream=function(_x3,_x4){return _createReadStream.apply(this,arguments)};var _regenerator=_interopRequireDefault(__webpack_require__(51)),_asyncToGenerator2=_interopRequireDefault(__webpack_require__(52)),_globals=__webpack_require__(144),node=_interopRequireWildcard(__webpack_require__(788)),_fetchFileBrowser=__webpack_require__(794),_fileAliases=__webpack_require__(360);function _fetchFile(){return(_fetchFile=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee(url,options){var func;return _regenerator.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return url=(0,_fileAliases.resolvePath)(url),func=_globals.isBrowser?_fetchFileBrowser.fetchFile:node.fetchFile,_context.abrupt("return",func(url,options));case 3:case"end":return _context.stop()}},_callee)}))).apply(this,arguments)}function _createReadStream(){return(_createReadStream=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee2(url,options){var func;return _regenerator.default.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return url=(0,_fileAliases.resolvePath)(url),func=_globals.isBrowser?_fetchFileBrowser.createReadStream:node.createReadStream,_context2.abrupt("return",func(url,options));case 3:case"end":return _context2.stop()}},_callee2)}))).apply(this,arguments)}},function(module,exports){module.exports=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}},function(module,exports,__webpack_require__){var defineProperty=__webpack_require__(789);module.exports=function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){defineProperty(target,key,source[key])})}return target}},function(module,exports){module.exports=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}},function(module,exports){function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}module.exports=function(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}},,,function(module,exports,__webpack_require__){var AwaitValue=__webpack_require__(369);module.exports=function(value){return new AwaitValue(value)}},function(module,exports){module.exports=function(value){this.wrapped=value}},function(module,exports,__webpack_require__){var AsyncGenerator=__webpack_require__(792);module.exports=function(fn){return function(){return new AsyncGenerator(fn.apply(this,arguments))}}},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(362),_interopRequireDefault=__webpack_require__(21);Object.defineProperty(exports,"__esModule",{value:!0}),exports.writeFile=function(filePath,arrayBufferOrString,options){if(!_globals.isBrowser)return node.writeFile(filePath,arrayBufferOrString,options);return(0,_assert.default)(!1)},exports.writeFileSync=function(filePath,arrayBufferOrString,options){if(!_globals.isBrowser)return node.writeFileSync(filePath,arrayBufferOrString,options);return(0,_assert.default)(!1)};var _globals=__webpack_require__(144),_assert=_interopRequireDefault(__webpack_require__(73)),node=_interopRequireWildcard(__webpack_require__(795))},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(21);Object.defineProperty(exports,"__esModule",{value:!0}),exports.parse=function(_x,_x2,_x3,_x4){return _parse.apply(this,arguments)},exports.parseSync=function(data,loaders,options,url){Array.isArray(loaders)||(0,_normalizeLoader.isLoaderObject)(loaders)||(url=options,options=loaders,loaders=null);loaders=loaders||(0,_registerLoaders.getRegisteredLoaders)();var loader=Array.isArray(loaders)?(0,_autoDetectLoader.autoDetectLoader)(url,data,loaders):loaders;return(0,_normalizeLoader.normalizeLoader)(loader),options=mergeLoaderAndUserOptions(options,loader),(0,_parseWithLoader.parseWithLoaderSync)(data,loader,options,url)},exports.parseInBatches=function(_x5,_x6,_x7,_x8){return _parseInBatches.apply(this,arguments)},exports.parseInBatchesSync=function(_x9,_x10,_x11,_x12){return _parseInBatchesSync.apply(this,arguments)};var _regenerator=_interopRequireDefault(__webpack_require__(51)),_asyncToGenerator2=_interopRequireDefault(__webpack_require__(52)),_autoDetectLoader=__webpack_require__(373),_normalizeLoader=__webpack_require__(145),_nullLog=_interopRequireDefault(__webpack_require__(796)),_registerLoaders=__webpack_require__(219),_parseWithLoader=__webpack_require__(797);function _parse(){return(_parse=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee(data,loaders,options,url){var loader;return _regenerator.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(Array.isArray(loaders)||(0,_normalizeLoader.isLoaderObject)(loaders)||(url=options,options=loaders,loaders=null),loaders=loaders||(0,_registerLoaders.getRegisteredLoaders)(),loader=Array.isArray(loaders)?(0,_autoDetectLoader.autoDetectLoader)(url,data,loaders):loaders){_context.next=5;break}return _context.abrupt("return",null);case 5:return(0,_normalizeLoader.normalizeLoader)(loader),options=mergeLoaderAndUserOptions(options,loader),_context.next=9,(0,_parseWithLoader.parseWithLoader)(data,loader,options,url);case 9:return _context.abrupt("return",_context.sent);case 10:case"end":return _context.stop()}},_callee)}))).apply(this,arguments)}function _parseInBatches(){return(_parseInBatches=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee2(data,loaders,options,url){var loader;return _regenerator.default.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return Array.isArray(loaders)||(0,_normalizeLoader.isLoaderObject)(loaders)||(url=options,options=loaders,loaders=null),loaders=loaders||(0,_registerLoaders.getRegisteredLoaders)(),loader=Array.isArray(loaders)?(0,_autoDetectLoader.autoDetectLoader)(url,null,loaders):loaders,(0,_normalizeLoader.normalizeLoader)(loader),options=mergeLoaderAndUserOptions(options,loader),_context2.abrupt("return",(0,_parseWithLoader.parseWithLoaderInBatches)(data,loader,options,url));case 6:case"end":return _context2.stop()}},_callee2)}))).apply(this,arguments)}function _parseInBatchesSync(){return(_parseInBatchesSync=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee3(data,loaders,options,url){var loader;return _regenerator.default.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return Array.isArray(loaders)||(0,_normalizeLoader.isLoaderObject)(loaders)||(url=options,options=loaders,loaders=null),loaders=loaders||(0,_registerLoaders.getRegisteredLoaders)(),loader=Array.isArray(loaders)?(0,_autoDetectLoader.autoDetectLoader)(url,null,loaders):loaders,(0,_normalizeLoader.normalizeLoader)(loader),options=mergeLoaderAndUserOptions(options,loader),_context3.abrupt("return",(0,_parseWithLoader.parseWithLoaderInBatches)(data,loader,options,url));case 6:case"end":return _context3.stop()}},_callee3)}))).apply(this,arguments)}function mergeLoaderAndUserOptions(options,loader){return null===(options=Object.assign({},loader.DEFAULT_OPTIONS,loader.options,options,{dataType:"arraybuffer"})).log&&(options.log=new _nullLog.default),"log"in options||(options.log=console),options}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.autoDetectLoader=function(){var url=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",text=arguments.length>1?arguments[1]:void 0,loaders=arguments.length>2?arguments[2]:void 0,match=url.match(EXT_PATTERN);if(match&&match[0]){var extension=match[0],_loader=function(loaders,extension){extension=extension.toLowerCase();var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=loaders[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var loader=_step.value;(0,_normalizeLoader.normalizeLoader)(loader);var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=loader.extensions[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var loaderExtension=_step2.value;if(loaderExtension.toLowerCase()===extension)return loader}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return null}(loaders,extension);if(_loader)return _loader}var loader=function(loaders,text){var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=loaders[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var loader=_step3.value;if(loader.testText&&loader.testText(text))return loader}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{_iteratorNormalCompletion3||null==_iterator3.return||_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}return null}(loaders,text);if(loader)return loader;return null};var _normalizeLoader=__webpack_require__(145),EXT_PATTERN=/[^\.]+$/},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(21);Object.defineProperty(exports,"__esModule",{value:!0}),exports.isWritableStream=exports.isReadableStream=exports.isReadableNodeStream=exports.isWritableNodeStream=exports.isReadableDOMStream=exports.isWritableDOMStream=exports.isFetchResponse=exports.isIterator=exports.isAsyncIterable=exports.isIterable=exports.isPromise=void 0;var _typeof2=_interopRequireDefault(__webpack_require__(215)),isBoolean=function(x){return"boolean"==typeof x},isFunction=function(x){return"function"==typeof x},isObject=function(x){return null!==x&&"object"===(0,_typeof2.default)(x)};exports.isPromise=function(x){return isObject(x)&&isFunction(x.then)};exports.isIterable=function(x){return x&&"function"==typeof x[Symbol.iterator]};exports.isAsyncIterable=function(x){return x&&"function"==typeof x[Symbol.asyncIterator]};exports.isIterator=function(x){return isObject(x)&&"done"in x&&"value"in x};exports.isFetchResponse=function(x){return"undefined"!=typeof window&&x instanceof window.Response||x.arrayBuffer&&x.json&&x.body};var isWritableDOMStream=function(x){return isObject(x)&&isFunction(x.abort)&&isFunction(x.getWriter)};exports.isWritableDOMStream=isWritableDOMStream;var isReadableDOMStream=function(x){return isObject(x)&&isFunction(x.tee)&&isFunction(x.cancel)&&isFunction(x.pipeTo)&&isFunction(x.getReader)};exports.isReadableDOMStream=isReadableDOMStream;var isWritableNodeStream=function(x){return isObject(x)&&isFunction(x.end)&&isFunction(x.write)&&isBoolean(x.writable)};exports.isWritableNodeStream=isWritableNodeStream;var isReadableNodeStream=function(x){return isObject(x)&&isFunction(x.read)&&isFunction(x.pipe)&&isBoolean(x.readable)};exports.isReadableNodeStream=isReadableNodeStream;exports.isReadableStream=function(x){return isReadableDOMStream(x)||isReadableNodeStream(x)};exports.isWritableStream=function(x){return isWritableDOMStream(x)||isWritableNodeStream(x)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.encode=function(data,writer,options,url){if(writer.encode)return writer.encode(data,options);if(writer.encodeSync)return Promise.resolve(writer.encodeSync(data,options));throw new Error("Writer could not encode data")},exports.encodeSync=function(data,writer,options,url){if(writer.encodeSync)return writer.encodeSync(data,options);throw new Error("Writer could not synchronously encode data")},exports.encodeInBatches=function(data,writer,options,url){if(writer.encodeInBatches)return writer.encodeInBatches(data,options);throw new Error("Writer could not encode data in batches")}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_get2=_interopRequireDefault(__webpack_require__(16)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_core=__webpack_require__(15),_core2=__webpack_require__(7),_iconLayerVertex=_interopRequireDefault(__webpack_require__(814)),_iconLayerFragment=_interopRequireDefault(__webpack_require__(815)),_iconManager=_interopRequireDefault(__webpack_require__(816)),fp64LowPart=_core2.fp64.fp64LowPart,DEFAULT_COLOR=[0,0,0,255],defaultProps={iconAtlas:null,iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},fp64:!1,billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:function(x){return x.position}},getIcon:{type:"accessor",value:function(x){return x.icon}},getColor:{type:"accessor",value:DEFAULT_COLOR},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0}},IconLayer=function(_Layer){function IconLayer(){return(0,_classCallCheck2.default)(this,IconLayer),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(IconLayer).apply(this,arguments))}return(0,_inherits2.default)(IconLayer,_Layer),(0,_createClass2.default)(IconLayer,[{key:"getShaders",value:function(){var projectModule=this.use64bitProjection()?"project64":"project32";return{vs:_iconLayerVertex.default,fs:_iconLayerFragment.default,modules:[projectModule,"picking"]}}},{key:"initializeState",value:function(){var _this=this;this.state={iconManager:new _iconManager.default(this.context.gl,{onUpdate:function(){return _this._onUpdate()}})},this.getAttributeManager().addInstanced({instancePositions:{size:3,transition:!0,accessor:"getPosition"},instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",update:this.calculateInstanceOffsets},instanceIconFrames:{size:4,accessor:"getIcon",update:this.calculateInstanceIconFrames},instanceColorModes:{size:1,type:5121,accessor:"getIcon",update:this.calculateInstanceColorMode},instanceColors:{size:4,type:5121,transition:!0,accessor:"getColor",defaultValue:DEFAULT_COLOR},instanceAngles:{size:1,transition:!0,accessor:"getAngle",defaultValue:0}})}},{key:"updateState",value:function(_ref){var oldProps=_ref.oldProps,props=_ref.props,changeFlags=_ref.changeFlags;(0,_get2.default)((0,_getPrototypeOf2.default)(IconLayer.prototype),"updateState",this).call(this,{props:props,oldProps:oldProps,changeFlags:changeFlags});var attributeManager=this.getAttributeManager(),iconManager=this.state.iconManager,iconAtlas=props.iconAtlas,iconMapping=props.iconMapping,data=props.data,getIcon=props.getIcon,iconMappingChanged=!1;if(iconAtlas?(oldProps.iconAtlas!==props.iconAtlas&&iconManager.setProps({iconAtlas:iconAtlas,autoPacking:!1}),oldProps.iconMapping!==props.iconMapping&&(iconManager.setProps({iconMapping:iconMapping}),iconMappingChanged=!0)):iconManager.setProps({autoPacking:!0}),(changeFlags.dataChanged||changeFlags.updateTriggersChanged&&(changeFlags.updateTriggersChanged.all||changeFlags.updateTriggersChanged.getIcon))&&(iconManager.setProps({data:data,getIcon:getIcon}),iconMappingChanged=!0),iconMappingChanged&&(attributeManager.invalidate("instanceOffsets"),attributeManager.invalidate("instanceIconFrames"),attributeManager.invalidate("instanceColorModes")),props.fp64!==oldProps.fp64){var gl=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(gl)}),attributeManager.invalidateAll()}}},{key:"finalizeState",value:function(){(0,_get2.default)((0,_getPrototypeOf2.default)(IconLayer.prototype),"finalizeState",this).call(this),this.state.iconManager.finalize()}},{key:"draw",value:function(_ref2){var uniforms=_ref2.uniforms,_this$props=this.props,sizeScale=_this$props.sizeScale,sizeMinPixels=_this$props.sizeMinPixels,sizeMaxPixels=_this$props.sizeMaxPixels,sizeUnits=_this$props.sizeUnits,billboard=_this$props.billboard,iconManager=this.state.iconManager,viewport=this.context.viewport,iconsTexture=iconManager.getTexture();iconsTexture&&this.state.model.setUniforms(Object.assign({},uniforms,{iconsTexture:iconsTexture,iconsTextureDim:[iconsTexture.width,iconsTexture.height],sizeScale:sizeScale*("pixels"===sizeUnits?viewport.distanceScales.metersPerPixel[2]:1),sizeMinPixels:sizeMinPixels,sizeMaxPixels:sizeMaxPixels,billboard:billboard})).draw()}},{key:"_getModel",value:function(gl){return new _core2.Model(gl,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new _core2.Geometry({drawMode:6,attributes:{positions:new Float32Array([-1,-1,0,-1,1,0,1,1,0,1,-1,0])}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"_onUpdate",value:function(){this.setNeedsRedraw()}},{key:"calculateInstancePositions64xyLow",value:function(attribute){var isFP64=this.use64bitPositions();if(attribute.constant=!isFP64,isFP64){var _this$props2=this.props,data=_this$props2.data,getPosition=_this$props2.getPosition,value=attribute.value,i=0,_createIterable=(0,_core.createIterable)(data),iterable=_createIterable.iterable,objectInfo=_createIterable.objectInfo,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=iterable[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var object=_step.value;objectInfo.index++;var position=getPosition(object,objectInfo);value[i++]=fp64LowPart(position[0]),value[i++]=fp64LowPart(position[1])}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}else attribute.value=new Float32Array(2)}},{key:"calculateInstanceOffsets",value:function(attribute){var data=this.props.data,iconManager=this.state.iconManager,value=attribute.value,i=0,_createIterable2=(0,_core.createIterable)(data),iterable=_createIterable2.iterable,objectInfo=_createIterable2.objectInfo,_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=iterable[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var object=_step2.value;objectInfo.index++;var rect=iconManager.getIconMapping(object,objectInfo);value[i++]=rect.width/2-rect.anchorX||0,value[i++]=rect.height/2-rect.anchorY||0}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}},{key:"calculateInstanceColorMode",value:function(attribute){var data=this.props.data,iconManager=this.state.iconManager,value=attribute.value,i=0,_createIterable3=(0,_core.createIterable)(data),iterable=_createIterable3.iterable,objectInfo=_createIterable3.objectInfo,_iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=iterable[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var object=_step3.value;objectInfo.index++;var colorMode=iconManager.getIconMapping(object,objectInfo).mask;value[i++]=colorMode?1:0}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{_iteratorNormalCompletion3||null==_iterator3.return||_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}}},{key:"calculateInstanceIconFrames",value:function(attribute){var data=this.props.data,iconManager=this.state.iconManager,value=attribute.value,i=0,_createIterable4=(0,_core.createIterable)(data),iterable=_createIterable4.iterable,objectInfo=_createIterable4.objectInfo,_iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _step4,_iterator4=iterable[Symbol.iterator]();!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){var object=_step4.value;objectInfo.index++;var rect=iconManager.getIconMapping(object,objectInfo);value[i++]=rect.x||0,value[i++]=rect.y||0,value[i++]=rect.width||0,value[i++]=rect.height||0}}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{_iteratorNormalCompletion4||null==_iterator4.return||_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}}}]),IconLayer}(_core.Layer);exports.default=IconLayer,IconLayer.layerName="IconLayer",IconLayer.defaultProps=defaultProps},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_get2=_interopRequireDefault(__webpack_require__(16)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_core=__webpack_require__(15),_core2=__webpack_require__(7),_scatterplotLayerVertex=_interopRequireDefault(__webpack_require__(823)),_scatterplotLayerFragment=_interopRequireDefault(__webpack_require__(824)),fp64LowPart=_core2.fp64.fp64LowPart,DEFAULT_COLOR=[0,0,0,255],defaultProps={radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,fp64:!1,filled:!0,getPosition:{type:"accessor",value:function(x){return x.position}},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:DEFAULT_COLOR},getLineColor:{type:"accessor",value:DEFAULT_COLOR},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}},ScatterplotLayer=function(_Layer){function ScatterplotLayer(){return(0,_classCallCheck2.default)(this,ScatterplotLayer),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(ScatterplotLayer).apply(this,arguments))}return(0,_inherits2.default)(ScatterplotLayer,_Layer),(0,_createClass2.default)(ScatterplotLayer,[{key:"getShaders",value:function(id){var projectModule=this.use64bitProjection()?"project64":"project32";return{vs:_scatterplotLayerVertex.default,fs:_scatterplotLayerFragment.default,modules:[projectModule,"picking"]}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,transition:!0,accessor:"getPosition"},instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:4,transition:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}},{key:"updateState",value:function(_ref){var props=_ref.props,oldProps=_ref.oldProps,changeFlags=_ref.changeFlags;if((0,_get2.default)((0,_getPrototypeOf2.default)(ScatterplotLayer.prototype),"updateState",this).call(this,{props:props,oldProps:oldProps,changeFlags:changeFlags}),props.fp64!==oldProps.fp64){var gl=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(gl)}),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(_ref2){var uniforms=_ref2.uniforms,viewport=this.context.viewport,_this$props=this.props,radiusScale=_this$props.radiusScale,radiusMinPixels=_this$props.radiusMinPixels,radiusMaxPixels=_this$props.radiusMaxPixels,stroked=_this$props.stroked,filled=_this$props.filled,lineWidthUnits=_this$props.lineWidthUnits,lineWidthScale=_this$props.lineWidthScale,lineWidthMinPixels=_this$props.lineWidthMinPixels,lineWidthMaxPixels=_this$props.lineWidthMaxPixels,widthMultiplier="pixels"===lineWidthUnits?viewport.distanceScales.metersPerPixel[2]:1;this.state.model.setUniforms(Object.assign({},uniforms,{stroked:stroked?1:0,filled:filled,radiusScale:radiusScale,radiusMinPixels:radiusMinPixels,radiusMaxPixels:radiusMaxPixels,lineWidthScale:lineWidthScale*widthMultiplier,lineWidthMinPixels:lineWidthMinPixels,lineWidthMaxPixels:lineWidthMaxPixels})).draw()}},{key:"_getModel",value:function(gl){return new _core2.Model(gl,Object.assign(this.getShaders(),{id:this.props.id,geometry:new _core2.Geometry({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array([-1,-1,0,-1,1,0,1,1,0,1,-1,0])}}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateInstancePositions64xyLow",value:function(attribute){var isFP64=this.use64bitPositions();if(attribute.constant=!isFP64,isFP64){var _this$props2=this.props,data=_this$props2.data,getPosition=_this$props2.getPosition,value=attribute.value,i=0,_createIterable=(0,_core.createIterable)(data),iterable=_createIterable.iterable,objectInfo=_createIterable.objectInfo,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=iterable[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var object=_step.value;objectInfo.index++;var position=getPosition(object,objectInfo);value[i++]=fp64LowPart(position[0]),value[i++]=fp64LowPart(position[1])}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}else attribute.value=new Float32Array(2)}}]),ScatterplotLayer}(_core.Layer);exports.default=ScatterplotLayer,ScatterplotLayer.layerName="ScatterplotLayer",ScatterplotLayer.defaultProps=defaultProps},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_get2=_interopRequireDefault(__webpack_require__(16)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_core=__webpack_require__(15),_core2=__webpack_require__(7),_columnLayerVertex=_interopRequireDefault(__webpack_require__(825)),_columnLayerFragment=_interopRequireDefault(__webpack_require__(826)),fp64LowPart=_core2.fp64.fp64LowPart,defaultMaterial=new _core2.PhongMaterial,DEFAULT_COLOR=[255,0,255,255],defaultProps={diskResolution:{type:"number",min:4,value:20},vertices:null,radius:{type:"number",min:0,value:1e3},angle:{type:"number",value:0},offset:{type:"array",value:[0,0]},coverage:{type:"number",min:0,max:1,value:1},elevationScale:{type:"number",min:0,value:1},extruded:!0,fp64:!1,getPosition:{type:"accessor",value:function(x){return x.position}},getColor:{type:"accessor",value:DEFAULT_COLOR},getElevation:{type:"accessor",value:1e3},material:defaultMaterial},ColumnLayer=function(_Layer){function ColumnLayer(){return(0,_classCallCheck2.default)(this,ColumnLayer),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(ColumnLayer).apply(this,arguments))}return(0,_inherits2.default)(ColumnLayer,_Layer),(0,_createClass2.default)(ColumnLayer,[{key:"getShaders",value:function(){var projectModule=this.use64bitProjection()?"project64":"project32";return{vs:_columnLayerVertex.default,fs:_columnLayerFragment.default,modules:[projectModule,"gouraud-lighting","picking"]}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,transition:!0,accessor:"getPosition"},instanceElevations:{size:1,transition:!0,accessor:"getElevation"},instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow},instanceColors:{size:4,type:5121,transition:!0,accessor:"getColor",defaultValue:DEFAULT_COLOR}})}},{key:"updateState",value:function(_ref){var props=_ref.props,oldProps=_ref.oldProps,changeFlags=_ref.changeFlags;if((0,_get2.default)((0,_getPrototypeOf2.default)(ColumnLayer.prototype),"updateState",this).call(this,{props:props,oldProps:oldProps,changeFlags:changeFlags}),props.fp64!==oldProps.fp64||props.diskResolution!==oldProps.diskResolution){var gl=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(gl)}),this.getAttributeManager().invalidateAll()}props.vertices!==oldProps.vertices&&this._updateVertices(props.vertices)}},{key:"getGeometry",value:function(diskResolution){return new _core2.CylinderGeometry({radius:1,topCap:!1,bottomCap:!0,height:2,verticalAxis:"z",nradial:diskResolution,nvertical:1})}},{key:"_getModel",value:function(gl){return new _core2.Model(gl,Object.assign({},this.getShaders(),{id:this.props.id,geometry:this.getGeometry(this.props.diskResolution),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"_updateVertices",value:function(vertices){if(vertices){var diskResolution=this.props.diskResolution;_core.log.assert(vertices.length>=diskResolution);for(var model=this.state.model,geometry=this.getGeometry(this.props.diskResolution),positions=geometry.attributes.POSITION,i=0,loopIndex=0;loopIndex<3;loopIndex++)for(var j=0;j<=diskResolution;j++){var p=vertices[j]||vertices[0];positions.value[i++]=p[0],positions.value[i++]=p[1],i++}model.setProps({geometry:geometry})}}},{key:"draw",value:function(_ref2){var uniforms=_ref2.uniforms,_this$props=this.props,elevationScale=_this$props.elevationScale,extruded=_this$props.extruded,offset=_this$props.offset,coverage=_this$props.coverage,radius=_this$props.radius,angle=_this$props.angle;this.state.model.setUniforms(Object.assign({},uniforms,{radius:radius,angle:angle/180*Math.PI,offset:offset,extruded:extruded,coverage:coverage,elevationScale:elevationScale})).draw()}},{key:"calculateInstancePositions64xyLow",value:function(attribute){var isFP64=this.use64bitPositions();if(attribute.constant=!isFP64,isFP64){var _this$props2=this.props,data=_this$props2.data,getPosition=_this$props2.getPosition,value=attribute.value,i=0,_createIterable=(0,_core.createIterable)(data),iterable=_createIterable.iterable,objectInfo=_createIterable.objectInfo,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=iterable[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var object=_step.value;objectInfo.index++;var position=getPosition(object,objectInfo);value[i++]=fp64LowPart(position[0]),value[i++]=fp64LowPart(position[1])}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}else attribute.value=new Float32Array(2)}}]),ColumnLayer}(_core.Layer);exports.default=ColumnLayer,ColumnLayer.layerName="ColumnLayer",ColumnLayer.defaultProps=defaultProps},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.getVertexCount=getVertexCount,exports.normalize=function(polygon,positionSize,vertexCount){validate(polygon),vertexCount=vertexCount||getVertexCount(polygon,positionSize);var positions=new Float64Array(vertexCount*positionSize),holeIndices=[];if(polygon.positions){var _polygon2=polygon,srcPositions=_polygon2.positions,srcHoleIndices=_polygon2.holeIndices;if(srcHoleIndices){for(var targetIndex=0,i=0;i<=srcHoleIndices.length;i++)targetIndex=copyFlatRing(positions,targetIndex,srcPositions,positionSize,srcHoleIndices[i-1],srcHoleIndices[i]),holeIndices.push(targetIndex);return holeIndices.pop(),{positions:positions,holeIndices:holeIndices}}polygon=srcPositions}if(Number.isFinite(polygon[0]))return copyFlatRing(positions,0,polygon,positionSize),{positions:positions,holeIndices:null};if(!isSimple(polygon)){var _targetIndex=0,_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=polygon[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var simplePolygon=_step2.value;_targetIndex=copyNestedRing(positions,_targetIndex,simplePolygon,positionSize),holeIndices.push(_targetIndex)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return holeIndices.pop(),{positions:positions,holeIndices:holeIndices}}return copyNestedRing(positions,0,polygon,positionSize),{positions:positions,holeIndices:null}},exports.getSurfaceIndices=function(normalizedPolygon,positionSize){var holeIndices=null;normalizedPolygon.holeIndices&&(holeIndices=normalizedPolygon.holeIndices.map(function(positionIndex){return positionIndex/positionSize}));return(0,_earcut.default)(normalizedPolygon.positions,holeIndices,positionSize)};var _earcut=_interopRequireDefault(__webpack_require__(834));function validate(polygon){if(polygon=polygon&&polygon.positions||polygon,!Array.isArray(polygon)&&!ArrayBuffer.isView(polygon))throw new Error("invalid polygon")}function isSimple(polygon){return polygon.length>=1&&polygon[0].length>=2&&Number.isFinite(polygon[0][0])}function isNestedRingClosed(simplePolygon){var p0=simplePolygon[0],p1=simplePolygon[simplePolygon.length-1];return p0[0]===p1[0]&&p0[1]===p1[1]&&p0[2]===p1[2]}function isFlatRingClosed(positions,size,startIndex,endIndex){for(var i=0;i<size;i++)if(positions[startIndex+i]!==positions[endIndex-size+i])return!1;return!0}function copyNestedRing(target,targetStartIndex,simplePolygon,size){for(var targetIndex=targetStartIndex,len=simplePolygon.length,i=0;i<len;i++)for(var j=0;j<size;j++)target[targetIndex++]=simplePolygon[i][j]||0;if(!isNestedRingClosed(simplePolygon))for(var _j=0;_j<size;_j++)target[targetIndex++]=simplePolygon[0][_j]||0;return targetIndex}function copyFlatRing(target,targetStartIndex,positions,size){var srcStartIndex=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,srcEndIndex=arguments.length>5?arguments[5]:void 0,srcLength=(srcEndIndex=srcEndIndex||positions.length)-srcStartIndex;if(srcLength<=0)return targetStartIndex;for(var targetIndex=targetStartIndex,i=0;i<srcLength;i++)target[targetIndex++]=positions[srcStartIndex+i];if(!isFlatRingClosed(positions,size,srcStartIndex,srcEndIndex))for(var _i=0;_i<size;_i++)target[targetIndex++]=positions[srcStartIndex+_i];return targetIndex}function getNestedVertexCount(simplePolygon){return(isNestedRingClosed(simplePolygon)?0:1)+simplePolygon.length}function getFlatVertexCount(positions,size){var startIndex=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,endIndex=arguments.length>3?arguments[3]:void 0;return startIndex>=(endIndex=endIndex||positions.length)?0:(isFlatRingClosed(positions,size,startIndex,endIndex)?0:1)+(endIndex-startIndex)/size}function getVertexCount(polygon,positionSize){if(validate(polygon),polygon.positions){var _polygon=polygon,positions=_polygon.positions,holeIndices=_polygon.holeIndices;if(holeIndices){for(var vertexCount=0,i=0;i<=holeIndices.length;i++)vertexCount+=getFlatVertexCount(polygon.positions,positionSize,holeIndices[i-1],holeIndices[i]);return vertexCount}polygon=positions}if(Number.isFinite(polygon[0]))return getFlatVertexCount(polygon,positionSize);if(!isSimple(polygon)){var _vertexCount=0,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=polygon[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){_vertexCount+=getNestedVertexCount(_step.value)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return _vertexCount}return getNestedVertexCount(polygon)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default="\nattribute vec2 vertexPositions;\nattribute float vertexValid;\n\nuniform bool extruded;\nuniform bool isWireframe;\nuniform float elevationScale;\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying float isValid;\n\nstruct PolygonProps {\n  vec4 fillColors;\n  vec4 lineColors;\n  vec3 positions;\n  vec3 nextPositions;\n  vec3 pickingColors;\n  vec2 positions64xyLow;\n  vec2 nextPositions64xyLow;\n  float elevations;\n};\n\nvoid calculatePosition(PolygonProps props) {\n  vec3 pos;\n  vec2 pos64xyLow;\n  vec3 normal;\n  vec4 colors = isWireframe ? props.lineColors : props.fillColors;\n\n#ifdef IS_SIDE_VERTEX\n  pos = mix(props.positions, props.nextPositions, vertexPositions.x);\n  pos64xyLow = mix(props.positions64xyLow, props.nextPositions64xyLow, vertexPositions.x);\n  isValid = vertexValid;\n#else\n  pos = props.positions;\n  pos64xyLow = props.positions64xyLow;\n  isValid = 1.0;\n#endif\n\n  if (extruded) {\n    pos.z += props.elevations * vertexPositions.y;\n  }\n  pos.z *= elevationScale;\n\n  vec4 position_commonspace;\n  gl_Position = project_position_to_clipspace(pos, pos64xyLow, vec3(0.), position_commonspace);\n\n  if (extruded) {\n#ifdef IS_SIDE_VERTEX\n    normal = vec3(props.positions.y - props.nextPositions.y, props.nextPositions.x - props.positions.x, 0.0);\n    normal = project_normal(normal);\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n\n    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, position_commonspace.xyz, normal);\n    vColor = vec4(lightColor, colors.a * opacity) / 255.0;\n  } else {\n    vColor = vec4(colors.rgb, colors.a * opacity) / 255.0;\n  }\n  picking_setPickingColor(props.pickingColors);\n}\n"},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_get2=_interopRequireDefault(__webpack_require__(16)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_iconLayer=_interopRequireDefault(__webpack_require__(376)),_multiIconLayerVertex=_interopRequireDefault(__webpack_require__(841)),_multiIconLayerFragment=_interopRequireDefault(__webpack_require__(842)),MultiIconLayer=function(_IconLayer){function MultiIconLayer(){return(0,_classCallCheck2.default)(this,MultiIconLayer),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(MultiIconLayer).apply(this,arguments))}return(0,_inherits2.default)(MultiIconLayer,_IconLayer),(0,_createClass2.default)(MultiIconLayer,[{key:"getShaders",value:function(){return Object.assign({},(0,_get2.default)((0,_getPrototypeOf2.default)(MultiIconLayer.prototype),"getShaders",this).call(this),{vs:_multiIconLayerVertex.default,fs:_multiIconLayerFragment.default})}},{key:"initializeState",value:function(){(0,_get2.default)((0,_getPrototypeOf2.default)(MultiIconLayer.prototype),"initializeState",this).call(this),this.getAttributeManager().addInstanced({instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}},{key:"updateState",value:function(updateParams){(0,_get2.default)((0,_getPrototypeOf2.default)(MultiIconLayer.prototype),"updateState",this).call(this,updateParams);var changeFlags=updateParams.changeFlags;changeFlags.updateTriggersChanged&&(changeFlags.updateTriggersChanged.getAnchorX||changeFlags.updateTriggersChanged.getAnchorY)&&this.getAttributeManager().invalidate("instanceOffsets")}},{key:"draw",value:function(_ref){var uniforms=_ref.uniforms,sdf=this.props.sdf;(0,_get2.default)((0,_getPrototypeOf2.default)(MultiIconLayer.prototype),"draw",this).call(this,{uniforms:Object.assign({},uniforms,{buffer:.75,gamma:.2,sdf:Boolean(sdf)})})}},{key:"calculateInstanceOffsets",value:function(attribute){var _this$props=this.props,data=_this$props.data,iconMapping=_this$props.iconMapping,getIcon=_this$props.getIcon,getAnchorX=_this$props.getAnchorX,getAnchorY=_this$props.getAnchorY,getLengthOfQueue=_this$props.getLengthOfQueue,getShiftInQueue=_this$props.getShiftInQueue,value=attribute.value,i=0,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=data[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var object=_step.value,rect=iconMapping[getIcon(object)]||{},len=getLengthOfQueue(object),shiftX=getShiftInQueue(object);value[i++]=(getAnchorX(object)-1)*len/2+rect.width/2+shiftX||0,value[i++]=rect.height/2*getAnchorY(object)||0}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}},{key:"calculateInstancePickingColors",value:function(attribute){var _this$props2=this.props,data=_this$props2.data,getPickingIndex=_this$props2.getPickingIndex,value=attribute.value,i=0,pickingColor=[],_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=data[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var index=getPickingIndex(_step2.value);this.encodePickingColor(index,pickingColor),value[i++]=pickingColor[0],value[i++]=pickingColor[1],value[i++]=pickingColor[2]}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}}]),MultiIconLayer}(_iconLayer.default);exports.default=MultiIconLayer,MultiIconLayer.layerName="MultiIconLayer",MultiIconLayer.defaultProps={getShiftInQueue:{type:"accessor",value:function(x){return x.shift||0}},getLengthOfQueue:{type:"accessor",value:function(x){return x.len||1}},getAnchorX:{type:"accessor",value:function(x){return x.anchorX||0}},getAnchorY:{type:"accessor",value:function(x){return x.anchorY||0}},getPixelOffset:{type:"accessor",value:[0,0]},getPickingIndex:{type:"accessor",value:function(x){return x.objectIndex}}}},function(module,exports,__webpack_require__){!function(exports,d3Array,d3Interpolate,d3Format,d3Time,d3TimeFormat){"use strict";function initRange(domain,range){switch(arguments.length){case 0:break;case 1:this.range(domain);break;default:this.range(range).domain(domain)}return this}function initInterpolator(domain,interpolator){switch(arguments.length){case 0:break;case 1:this.interpolator(domain);break;default:this.interpolator(interpolator).domain(domain)}return this}const implicit=Symbol("implicit");function ordinal(){var index=new Map,domain=[],range=[],unknown=implicit;function scale(d){var key=d+"",i=index.get(key);if(!i){if(unknown!==implicit)return unknown;index.set(key,i=domain.push(d))}return range[(i-1)%range.length]}return scale.domain=function(_){if(!arguments.length)return domain.slice();domain=[],index=new Map;for(const value of _){const key=value+"";index.has(key)||index.set(key,domain.push(value))}return scale},scale.range=function(_){return arguments.length?(range=Array.from(_),scale):range.slice()},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},scale.copy=function(){return ordinal(domain,range).unknown(unknown)},initRange.apply(scale,arguments),scale}function band(){var step,bandwidth,scale=ordinal().unknown(void 0),domain=scale.domain,ordinalRange=scale.range,r0=0,r1=1,round=!1,paddingInner=0,paddingOuter=0,align=.5;function rescale(){var n=domain().length,reverse=r1<r0,start=reverse?r1:r0,stop=reverse?r0:r1;step=(stop-start)/Math.max(1,n-paddingInner+2*paddingOuter),round&&(step=Math.floor(step)),start+=(stop-start-step*(n-paddingInner))*align,bandwidth=step*(1-paddingInner),round&&(start=Math.round(start),bandwidth=Math.round(bandwidth));var values=d3Array.range(n).map(function(i){return start+step*i});return ordinalRange(reverse?values.reverse():values)}return delete scale.unknown,scale.domain=function(_){return arguments.length?(domain(_),rescale()):domain()},scale.range=function(_){return arguments.length?([r0,r1]=_,r0=+r0,r1=+r1,rescale()):[r0,r1]},scale.rangeRound=function(_){return[r0,r1]=_,r0=+r0,r1=+r1,round=!0,rescale()},scale.bandwidth=function(){return bandwidth},scale.step=function(){return step},scale.round=function(_){return arguments.length?(round=!!_,rescale()):round},scale.padding=function(_){return arguments.length?(paddingInner=Math.min(1,paddingOuter=+_),rescale()):paddingInner},scale.paddingInner=function(_){return arguments.length?(paddingInner=Math.min(1,_),rescale()):paddingInner},scale.paddingOuter=function(_){return arguments.length?(paddingOuter=+_,rescale()):paddingOuter},scale.align=function(_){return arguments.length?(align=Math.max(0,Math.min(1,_)),rescale()):align},scale.copy=function(){return band(domain(),[r0,r1]).round(round).paddingInner(paddingInner).paddingOuter(paddingOuter).align(align)},initRange.apply(rescale(),arguments)}function number(x){return+x}var unit=[0,1];function identity(x){return x}function normalize(a,b){return(b-=a=+a)?function(x){return(x-a)/b}:(x=isNaN(b)?NaN:.5,function(){return x});var x}function clamper(domain){var t,a=domain[0],b=domain[domain.length-1];return a>b&&(t=a,a=b,b=t),function(x){return Math.max(a,Math.min(b,x))}}function bimap(domain,range,interpolate){var d0=domain[0],d1=domain[1],r0=range[0],r1=range[1];return d1<d0?(d0=normalize(d1,d0),r0=interpolate(r1,r0)):(d0=normalize(d0,d1),r0=interpolate(r0,r1)),function(x){return r0(d0(x))}}function polymap(domain,range,interpolate){var j=Math.min(domain.length,range.length)-1,d=new Array(j),r=new Array(j),i=-1;for(domain[j]<domain[0]&&(domain=domain.slice().reverse(),range=range.slice().reverse());++i<j;)d[i]=normalize(domain[i],domain[i+1]),r[i]=interpolate(range[i],range[i+1]);return function(x){var i=d3Array.bisect(domain,x,1,j)-1;return r[i](d[i](x))}}function copy(source,target){return target.domain(source.domain()).range(source.range()).interpolate(source.interpolate()).clamp(source.clamp()).unknown(source.unknown())}function transformer(){var transform,untransform,unknown,piecewise,output,input,domain=unit,range=unit,interpolate=d3Interpolate.interpolate,clamp=identity;function rescale(){return piecewise=Math.min(domain.length,range.length)>2?polymap:bimap,output=input=null,scale}function scale(x){return isNaN(x=+x)?unknown:(output||(output=piecewise(domain.map(transform),range,interpolate)))(transform(clamp(x)))}return scale.invert=function(y){return clamp(untransform((input||(input=piecewise(range,domain.map(transform),d3Interpolate.interpolateNumber)))(y)))},scale.domain=function(_){return arguments.length?(domain=Array.from(_,number),clamp===identity||(clamp=clamper(domain)),rescale()):domain.slice()},scale.range=function(_){return arguments.length?(range=Array.from(_),rescale()):range.slice()},scale.rangeRound=function(_){return range=Array.from(_),interpolate=d3Interpolate.interpolateRound,rescale()},scale.clamp=function(_){return arguments.length?(clamp=_?clamper(domain):identity,scale):clamp!==identity},scale.interpolate=function(_){return arguments.length?(interpolate=_,rescale()):interpolate},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},function(t,u){return transform=t,untransform=u,rescale()}}function continuous(transform,untransform){return transformer()(transform,untransform)}function tickFormat(start,stop,count,specifier){var precision,step=d3Array.tickStep(start,stop,count);switch((specifier=d3Format.formatSpecifier(null==specifier?",f":specifier)).type){case"s":var value=Math.max(Math.abs(start),Math.abs(stop));return null!=specifier.precision||isNaN(precision=d3Format.precisionPrefix(step,value))||(specifier.precision=precision),d3Format.formatPrefix(specifier,value);case"":case"e":case"g":case"p":case"r":null!=specifier.precision||isNaN(precision=d3Format.precisionRound(step,Math.max(Math.abs(start),Math.abs(stop))))||(specifier.precision=precision-("e"===specifier.type));break;case"f":case"%":null!=specifier.precision||isNaN(precision=d3Format.precisionFixed(step))||(specifier.precision=precision-2*("%"===specifier.type))}return d3Format.format(specifier)}function linearish(scale){var domain=scale.domain;return scale.ticks=function(count){var d=domain();return d3Array.ticks(d[0],d[d.length-1],null==count?10:count)},scale.tickFormat=function(count,specifier){var d=domain();return tickFormat(d[0],d[d.length-1],null==count?10:count,specifier)},scale.nice=function(count){null==count&&(count=10);var step,d=domain(),i0=0,i1=d.length-1,start=d[i0],stop=d[i1];return stop<start&&(step=start,start=stop,stop=step,step=i0,i0=i1,i1=step),(step=d3Array.tickIncrement(start,stop,count))>0?(start=Math.floor(start/step)*step,stop=Math.ceil(stop/step)*step,step=d3Array.tickIncrement(start,stop,count)):step<0&&(start=Math.ceil(start*step)/step,stop=Math.floor(stop*step)/step,step=d3Array.tickIncrement(start,stop,count)),step>0?(d[i0]=Math.floor(start/step)*step,d[i1]=Math.ceil(stop/step)*step,domain(d)):step<0&&(d[i0]=Math.ceil(start*step)/step,d[i1]=Math.floor(stop*step)/step,domain(d)),scale},scale}function nice(domain,interval){domain=domain.slice();var t,i0=0,i1=domain.length-1,x0=domain[i0],x1=domain[i1];return x1<x0&&(t=i0,i0=i1,i1=t,t=x0,x0=x1,x1=t),domain[i0]=interval.floor(x0),domain[i1]=interval.ceil(x1),domain}function transformLog(x){return Math.log(x)}function transformExp(x){return Math.exp(x)}function transformLogn(x){return-Math.log(-x)}function transformExpn(x){return-Math.exp(-x)}function pow10(x){return isFinite(x)?+("1e"+x):x<0?0:x}function reflect(f){return function(x){return-f(-x)}}function loggish(transform){var logs,pows,scale=transform(transformLog,transformExp),domain=scale.domain,base=10;function rescale(){return logs=function(base){return base===Math.E?Math.log:10===base&&Math.log10||2===base&&Math.log2||(base=Math.log(base),function(x){return Math.log(x)/base})}(base),pows=function(base){return 10===base?pow10:base===Math.E?Math.exp:function(x){return Math.pow(base,x)}}(base),domain()[0]<0?(logs=reflect(logs),pows=reflect(pows),transform(transformLogn,transformExpn)):transform(transformLog,transformExp),scale}return scale.base=function(_){return arguments.length?(base=+_,rescale()):base},scale.domain=function(_){return arguments.length?(domain(_),rescale()):domain()},scale.ticks=function(count){var r,d=domain(),u=d[0],v=d[d.length-1];(r=v<u)&&(i=u,u=v,v=i);var p,k,t,i=logs(u),j=logs(v),n=null==count?10:+count,z=[];if(!(base%1)&&j-i<n){if(i=Math.round(i)-1,j=Math.round(j)+1,u>0){for(;i<j;++i)for(k=1,p=pows(i);k<base;++k)if(!((t=p*k)<u)){if(t>v)break;z.push(t)}}else for(;i<j;++i)for(k=base-1,p=pows(i);k>=1;--k)if(!((t=p*k)<u)){if(t>v)break;z.push(t)}}else z=d3Array.ticks(i,j,Math.min(j-i,n)).map(pows);return r?z.reverse():z},scale.tickFormat=function(count,specifier){if(null==specifier&&(specifier=10===base?".0e":","),"function"!=typeof specifier&&(specifier=d3Format.format(specifier)),count===1/0)return specifier;null==count&&(count=10);var k=Math.max(1,base*count/scale.ticks().length);return function(d){var i=d/pows(Math.round(logs(d)));return i*base<base-.5&&(i*=base),i<=k?specifier(d):""}},scale.nice=function(){return domain(nice(domain(),{floor:function(x){return pows(Math.floor(logs(x)))},ceil:function(x){return pows(Math.ceil(logs(x)))}}))},scale}function transformSymlog(c){return function(x){return Math.sign(x)*Math.log1p(Math.abs(x/c))}}function transformSymexp(c){return function(x){return Math.sign(x)*Math.expm1(Math.abs(x))*c}}function symlogish(transform){var c=1,scale=transform(transformSymlog(c),transformSymexp(c));return scale.constant=function(_){return arguments.length?transform(transformSymlog(c=+_),transformSymexp(c)):c},linearish(scale)}function transformPow(exponent){return function(x){return x<0?-Math.pow(-x,exponent):Math.pow(x,exponent)}}function transformSqrt(x){return x<0?-Math.sqrt(-x):Math.sqrt(x)}function transformSquare(x){return x<0?-x*x:x*x}function powish(transform){var scale=transform(identity,identity),exponent=1;return scale.exponent=function(_){return arguments.length?1==(exponent=+_)?transform(identity,identity):.5===exponent?transform(transformSqrt,transformSquare):transform(transformPow(exponent),transformPow(1/exponent)):exponent},linearish(scale)}function pow(){var scale=powish(transformer());return scale.copy=function(){return copy(scale,pow()).exponent(scale.exponent())},initRange.apply(scale,arguments),scale}var durationSecond=1e3,durationMinute=60*durationSecond,durationHour=60*durationMinute,durationDay=24*durationHour,durationWeek=7*durationDay,durationMonth=30*durationDay,durationYear=365*durationDay;function date(t){return new Date(t)}function number$1(t){return t instanceof Date?+t:+new Date(+t)}function calendar(year,month,week,day,hour,minute,second,millisecond,format){var scale=continuous(identity,identity),invert=scale.invert,domain=scale.domain,formatMillisecond=format(".%L"),formatSecond=format(":%S"),formatMinute=format("%I:%M"),formatHour=format("%I %p"),formatDay=format("%a %d"),formatWeek=format("%b %d"),formatMonth=format("%B"),formatYear=format("%Y"),tickIntervals=[[second,1,durationSecond],[second,5,5*durationSecond],[second,15,15*durationSecond],[second,30,30*durationSecond],[minute,1,durationMinute],[minute,5,5*durationMinute],[minute,15,15*durationMinute],[minute,30,30*durationMinute],[hour,1,durationHour],[hour,3,3*durationHour],[hour,6,6*durationHour],[hour,12,12*durationHour],[day,1,durationDay],[day,2,2*durationDay],[week,1,durationWeek],[month,1,durationMonth],[month,3,3*durationMonth],[year,1,durationYear]];function tickFormat(date){return(second(date)<date?formatMillisecond:minute(date)<date?formatSecond:hour(date)<date?formatMinute:day(date)<date?formatHour:month(date)<date?week(date)<date?formatDay:formatWeek:year(date)<date?formatMonth:formatYear)(date)}function tickInterval(interval,start,stop){if(null==interval&&(interval=10),"number"==typeof interval){var step,target=Math.abs(stop-start)/interval,i=d3Array.bisector(function(i){return i[2]}).right(tickIntervals,target);return i===tickIntervals.length?(step=d3Array.tickStep(start/durationYear,stop/durationYear,interval),interval=year):i?(i=tickIntervals[target/tickIntervals[i-1][2]<tickIntervals[i][2]/target?i-1:i],step=i[1],interval=i[0]):(step=Math.max(d3Array.tickStep(start,stop,interval),1),interval=millisecond),interval.every(step)}return interval}return scale.invert=function(y){return new Date(invert(y))},scale.domain=function(_){return arguments.length?domain(Array.from(_,number$1)):domain().map(date)},scale.ticks=function(interval){var t,d=domain(),t0=d[0],t1=d[d.length-1],r=t1<t0;return r&&(t=t0,t0=t1,t1=t),t=(t=tickInterval(interval,t0,t1))?t.range(t0,t1+1):[],r?t.reverse():t},scale.tickFormat=function(count,specifier){return null==specifier?tickFormat:format(specifier)},scale.nice=function(interval){var d=domain();return(interval=tickInterval(interval,d[0],d[d.length-1]))?domain(nice(d,interval)):scale},scale.copy=function(){return copy(scale,calendar(year,month,week,day,hour,minute,second,millisecond,format))},scale}function transformer$1(){var t0,t1,k10,transform,unknown,x0=0,x1=1,interpolator=identity,clamp=!1;function scale(x){return isNaN(x=+x)?unknown:interpolator(0===k10?.5:(x=(transform(x)-t0)*k10,clamp?Math.max(0,Math.min(1,x)):x))}return scale.domain=function(_){return arguments.length?([x0,x1]=_,t0=transform(x0=+x0),t1=transform(x1=+x1),k10=t0===t1?0:1/(t1-t0),scale):[x0,x1]},scale.clamp=function(_){return arguments.length?(clamp=!!_,scale):clamp},scale.interpolator=function(_){return arguments.length?(interpolator=_,scale):interpolator},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},function(t){return transform=t,t0=t(x0),t1=t(x1),k10=t0===t1?0:1/(t1-t0),scale}}function copy$1(source,target){return target.domain(source.domain()).interpolator(source.interpolator()).clamp(source.clamp()).unknown(source.unknown())}function sequentialPow(){var scale=powish(transformer$1());return scale.copy=function(){return copy$1(scale,sequentialPow()).exponent(scale.exponent())},initInterpolator.apply(scale,arguments)}function transformer$2(){var t0,t1,t2,k10,k21,transform,unknown,x0=0,x1=.5,x2=1,interpolator=identity,clamp=!1;function scale(x){return isNaN(x=+x)?unknown:(x=.5+((x=+transform(x))-t1)*(x<t1?k10:k21),interpolator(clamp?Math.max(0,Math.min(1,x)):x))}return scale.domain=function(_){return arguments.length?([x0,x1,x2]=_,t0=transform(x0=+x0),t1=transform(x1=+x1),t2=transform(x2=+x2),k10=t0===t1?0:.5/(t1-t0),k21=t1===t2?0:.5/(t2-t1),scale):[x0,x1,x2]},scale.clamp=function(_){return arguments.length?(clamp=!!_,scale):clamp},scale.interpolator=function(_){return arguments.length?(interpolator=_,scale):interpolator},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},function(t){return transform=t,t0=t(x0),t1=t(x1),t2=t(x2),k10=t0===t1?0:.5/(t1-t0),k21=t1===t2?0:.5/(t2-t1),scale}}function divergingPow(){var scale=powish(transformer$2());return scale.copy=function(){return copy$1(scale,divergingPow()).exponent(scale.exponent())},initInterpolator.apply(scale,arguments)}exports.scaleBand=band,exports.scalePoint=function(){return function pointish(scale){var copy=scale.copy;return scale.padding=scale.paddingOuter,delete scale.paddingInner,delete scale.paddingOuter,scale.copy=function(){return pointish(copy())},scale}(band.apply(null,arguments).paddingInner(1))},exports.scaleIdentity=function identity$1(domain){var unknown;function scale(x){return isNaN(x=+x)?unknown:x}return scale.invert=scale,scale.domain=scale.range=function(_){return arguments.length?(domain=Array.from(_,number),scale):domain.slice()},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},scale.copy=function(){return identity$1(domain).unknown(unknown)},domain=arguments.length?Array.from(domain,number):[0,1],linearish(scale)},exports.scaleLinear=function linear(){var scale=continuous(identity,identity);return scale.copy=function(){return copy(scale,linear())},initRange.apply(scale,arguments),linearish(scale)},exports.scaleLog=function log(){var scale=loggish(transformer()).domain([1,10]);return scale.copy=function(){return copy(scale,log()).base(scale.base())},initRange.apply(scale,arguments),scale},exports.scaleSymlog=function symlog(){var scale=symlogish(transformer());return scale.copy=function(){return copy(scale,symlog()).constant(scale.constant())},initRange.apply(scale,arguments)},exports.scaleOrdinal=ordinal,exports.scaleImplicit=implicit,exports.scalePow=pow,exports.scaleSqrt=function(){return pow.apply(null,arguments).exponent(.5)},exports.scaleQuantile=function quantile(){var unknown,domain=[],range=[],thresholds=[];function rescale(){var i=0,n=Math.max(1,range.length);for(thresholds=new Array(n-1);++i<n;)thresholds[i-1]=d3Array.quantile(domain,i/n);return scale}function scale(x){return isNaN(x=+x)?unknown:range[d3Array.bisect(thresholds,x)]}return scale.invertExtent=function(y){var i=range.indexOf(y);return i<0?[NaN,NaN]:[i>0?thresholds[i-1]:domain[0],i<thresholds.length?thresholds[i]:domain[domain.length-1]]},scale.domain=function(_){if(!arguments.length)return domain.slice();domain=[];for(let d of _)null==d||isNaN(d=+d)||domain.push(d);return domain.sort(d3Array.ascending),rescale()},scale.range=function(_){return arguments.length?(range=Array.from(_),rescale()):range.slice()},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},scale.quantiles=function(){return thresholds.slice()},scale.copy=function(){return quantile().domain(domain).range(range).unknown(unknown)},initRange.apply(scale,arguments)},exports.scaleQuantize=function quantize(){var unknown,x0=0,x1=1,n=1,domain=[.5],range=[0,1];function scale(x){return x<=x?range[d3Array.bisect(domain,x,0,n)]:unknown}function rescale(){var i=-1;for(domain=new Array(n);++i<n;)domain[i]=((i+1)*x1-(i-n)*x0)/(n+1);return scale}return scale.domain=function(_){return arguments.length?([x0,x1]=_,x0=+x0,x1=+x1,rescale()):[x0,x1]},scale.range=function(_){return arguments.length?(n=(range=Array.from(_)).length-1,rescale()):range.slice()},scale.invertExtent=function(y){var i=range.indexOf(y);return i<0?[NaN,NaN]:i<1?[x0,domain[0]]:i>=n?[domain[n-1],x1]:[domain[i-1],domain[i]]},scale.unknown=function(_){return arguments.length?(unknown=_,scale):scale},scale.thresholds=function(){return domain.slice()},scale.copy=function(){return quantize().domain([x0,x1]).range(range).unknown(unknown)},initRange.apply(linearish(scale),arguments)},exports.scaleThreshold=function threshold(){var unknown,domain=[.5],range=[0,1],n=1;function scale(x){return x<=x?range[d3Array.bisect(domain,x,0,n)]:unknown}return scale.domain=function(_){return arguments.length?(domain=Array.from(_),n=Math.min(domain.length,range.length-1),scale):domain.slice()},scale.range=function(_){return arguments.length?(range=Array.from(_),n=Math.min(domain.length,range.length-1),scale):range.slice()},scale.invertExtent=function(y){var i=range.indexOf(y);return[domain[i-1],domain[i]]},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},scale.copy=function(){return threshold().domain(domain).range(range).unknown(unknown)},initRange.apply(scale,arguments)},exports.scaleTime=function(){return initRange.apply(calendar(d3Time.timeYear,d3Time.timeMonth,d3Time.timeWeek,d3Time.timeDay,d3Time.timeHour,d3Time.timeMinute,d3Time.timeSecond,d3Time.timeMillisecond,d3TimeFormat.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},exports.scaleUtc=function(){return initRange.apply(calendar(d3Time.utcYear,d3Time.utcMonth,d3Time.utcWeek,d3Time.utcDay,d3Time.utcHour,d3Time.utcMinute,d3Time.utcSecond,d3Time.utcMillisecond,d3TimeFormat.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},exports.scaleSequential=function sequential(){var scale=linearish(transformer$1()(identity));return scale.copy=function(){return copy$1(scale,sequential())},initInterpolator.apply(scale,arguments)},exports.scaleSequentialLog=function sequentialLog(){var scale=loggish(transformer$1()).domain([1,10]);return scale.copy=function(){return copy$1(scale,sequentialLog()).base(scale.base())},initInterpolator.apply(scale,arguments)},exports.scaleSequentialPow=sequentialPow,exports.scaleSequentialSqrt=function(){return sequentialPow.apply(null,arguments).exponent(.5)},exports.scaleSequentialSymlog=function sequentialSymlog(){var scale=symlogish(transformer$1());return scale.copy=function(){return copy$1(scale,sequentialSymlog()).constant(scale.constant())},initInterpolator.apply(scale,arguments)},exports.scaleSequentialQuantile=function sequentialQuantile(){var domain=[],interpolator=identity;function scale(x){if(!isNaN(x=+x))return interpolator((d3Array.bisect(domain,x)-1)/(domain.length-1))}return scale.domain=function(_){if(!arguments.length)return domain.slice();domain=[];for(let d of _)null==d||isNaN(d=+d)||domain.push(d);return domain.sort(d3Array.ascending),scale},scale.interpolator=function(_){return arguments.length?(interpolator=_,scale):interpolator},scale.copy=function(){return sequentialQuantile(interpolator).domain(domain)},initInterpolator.apply(scale,arguments)},exports.scaleDiverging=function diverging(){var scale=linearish(transformer$2()(identity));return scale.copy=function(){return copy$1(scale,diverging())},initInterpolator.apply(scale,arguments)},exports.scaleDivergingLog=function divergingLog(){var scale=loggish(transformer$2()).domain([.1,1,10]);return scale.copy=function(){return copy$1(scale,divergingLog()).base(scale.base())},initInterpolator.apply(scale,arguments)},exports.scaleDivergingPow=divergingPow,exports.scaleDivergingSqrt=function(){return divergingPow.apply(null,arguments).exponent(.5)},exports.scaleDivergingSymlog=function divergingSymlog(){var scale=symlogish(transformer$2());return scale.copy=function(){return copy$1(scale,divergingSymlog()).constant(scale.constant())},initInterpolator.apply(scale,arguments)},exports.tickFormat=tickFormat,Object.defineProperty(exports,"__esModule",{value:!0})}(exports,__webpack_require__(383),__webpack_require__(223),__webpack_require__(859),__webpack_require__(384),__webpack_require__(860))},function(module,exports,__webpack_require__){!function(exports){"use strict";function ascending(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function bisector(compare){var f;return 1===compare.length&&(f=compare,compare=function(d,x){return ascending(f(d),x)}),{left:function(a,x,lo,hi){for(null==lo&&(lo=0),null==hi&&(hi=a.length);lo<hi;){var mid=lo+hi>>>1;compare(a[mid],x)<0?lo=mid+1:hi=mid}return lo},right:function(a,x,lo,hi){for(null==lo&&(lo=0),null==hi&&(hi=a.length);lo<hi;){var mid=lo+hi>>>1;compare(a[mid],x)>0?hi=mid:lo=mid+1}return lo}}}var ascendingBisect=bisector(ascending),bisectRight=ascendingBisect.right,bisectLeft=ascendingBisect.left;function pair(a,b){return[a,b]}function number(x){return null===x?NaN:+x}function variance(values,valueof){var value,delta,n=values.length,m=0,i=-1,mean=0,sum=0;if(null==valueof)for(;++i<n;)isNaN(value=number(values[i]))||(mean+=(delta=value-mean)/++m,sum+=delta*(value-mean));else for(;++i<n;)isNaN(value=number(valueof(values[i],i,values)))||(mean+=(delta=value-mean)/++m,sum+=delta*(value-mean));if(m>1)return sum/(m-1)}function deviation(array,f){var v=variance(array,f);return v?Math.sqrt(v):v}function extent(values,valueof){var value,min,max,n=values.length,i=-1;if(null==valueof){for(;++i<n;)if(null!=(value=values[i])&&value>=value)for(min=max=value;++i<n;)null!=(value=values[i])&&(min>value&&(min=value),max<value&&(max=value))}else for(;++i<n;)if(null!=(value=valueof(values[i],i,values))&&value>=value)for(min=max=value;++i<n;)null!=(value=valueof(values[i],i,values))&&(min>value&&(min=value),max<value&&(max=value));return[min,max]}var array=Array.prototype,slice=array.slice,map=array.map;function constant(x){return function(){return x}}function identity(x){return x}function range(start,stop,step){start=+start,stop=+stop,step=(n=arguments.length)<2?(stop=start,start=0,1):n<3?1:+step;for(var i=-1,n=0|Math.max(0,Math.ceil((stop-start)/step)),range=new Array(n);++i<n;)range[i]=start+i*step;return range}var e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickIncrement(start,stop,count){var step=(stop-start)/Math.max(0,count),power=Math.floor(Math.log(step)/Math.LN10),error=step/Math.pow(10,power);return power>=0?(error>=e10?10:error>=e5?5:error>=e2?2:1)*Math.pow(10,power):-Math.pow(10,-power)/(error>=e10?10:error>=e5?5:error>=e2?2:1)}function tickStep(start,stop,count){var step0=Math.abs(stop-start)/Math.max(0,count),step1=Math.pow(10,Math.floor(Math.log(step0)/Math.LN10)),error=step0/step1;return error>=e10?step1*=10:error>=e5?step1*=5:error>=e2&&(step1*=2),stop<start?-step1:step1}function sturges(values){return Math.ceil(Math.log(values.length)/Math.LN2)+1}function quantile(values,p,valueof){if(null==valueof&&(valueof=number),n=values.length){if((p=+p)<=0||n<2)return+valueof(values[0],0,values);if(p>=1)return+valueof(values[n-1],n-1,values);var n,i=(n-1)*p,i0=Math.floor(i),value0=+valueof(values[i0],i0,values),value1=+valueof(values[i0+1],i0+1,values);return value0+(value1-value0)*(i-i0)}}function min(values,valueof){var value,min,n=values.length,i=-1;if(null==valueof){for(;++i<n;)if(null!=(value=values[i])&&value>=value)for(min=value;++i<n;)null!=(value=values[i])&&min>value&&(min=value)}else for(;++i<n;)if(null!=(value=valueof(values[i],i,values))&&value>=value)for(min=value;++i<n;)null!=(value=valueof(values[i],i,values))&&min>value&&(min=value);return min}function transpose(matrix){if(!(n=matrix.length))return[];for(var i=-1,m=min(matrix,length),transpose=new Array(m);++i<m;)for(var n,j=-1,row=transpose[i]=new Array(n);++j<n;)row[j]=matrix[j][i];return transpose}function length(d){return d.length}exports.bisect=bisectRight,exports.bisectRight=bisectRight,exports.bisectLeft=bisectLeft,exports.ascending=ascending,exports.bisector=bisector,exports.cross=function(values0,values1,reduce){var i0,i1,i,value0,n0=values0.length,n1=values1.length,values=new Array(n0*n1);for(null==reduce&&(reduce=pair),i0=i=0;i0<n0;++i0)for(value0=values0[i0],i1=0;i1<n1;++i1,++i)values[i]=reduce(value0,values1[i1]);return values},exports.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN},exports.deviation=deviation,exports.extent=extent,exports.histogram=function(){var value=identity,domain=extent,threshold=sturges;function histogram(data){var i,x,n=data.length,values=new Array(n);for(i=0;i<n;++i)values[i]=value(data[i],i,data);var xz=domain(values),x0=xz[0],x1=xz[1],tz=threshold(values,x0,x1);Array.isArray(tz)||(tz=tickStep(x0,x1,tz),tz=range(Math.ceil(x0/tz)*tz,x1,tz));for(var m=tz.length;tz[0]<=x0;)tz.shift(),--m;for(;tz[m-1]>x1;)tz.pop(),--m;var bin,bins=new Array(m+1);for(i=0;i<=m;++i)(bin=bins[i]=[]).x0=i>0?tz[i-1]:x0,bin.x1=i<m?tz[i]:x1;for(i=0;i<n;++i)x=values[i],x0<=x&&x<=x1&&bins[bisectRight(tz,x,0,m)].push(data[i]);return bins}return histogram.value=function(_){return arguments.length?(value="function"==typeof _?_:constant(_),histogram):value},histogram.domain=function(_){return arguments.length?(domain="function"==typeof _?_:constant([_[0],_[1]]),histogram):domain},histogram.thresholds=function(_){return arguments.length?(threshold="function"==typeof _?_:Array.isArray(_)?constant(slice.call(_)):constant(_),histogram):threshold},histogram},exports.thresholdFreedmanDiaconis=function(values,min,max){return values=map.call(values,number).sort(ascending),Math.ceil((max-min)/(2*(quantile(values,.75)-quantile(values,.25))*Math.pow(values.length,-1/3)))},exports.thresholdScott=function(values,min,max){return Math.ceil((max-min)/(3.5*deviation(values)*Math.pow(values.length,-1/3)))},exports.thresholdSturges=sturges,exports.max=function(values,valueof){var value,max,n=values.length,i=-1;if(null==valueof){for(;++i<n;)if(null!=(value=values[i])&&value>=value)for(max=value;++i<n;)null!=(value=values[i])&&value>max&&(max=value)}else for(;++i<n;)if(null!=(value=valueof(values[i],i,values))&&value>=value)for(max=value;++i<n;)null!=(value=valueof(values[i],i,values))&&value>max&&(max=value);return max},exports.mean=function(values,valueof){var value,n=values.length,m=n,i=-1,sum=0;if(null==valueof)for(;++i<n;)isNaN(value=number(values[i]))?--m:sum+=value;else for(;++i<n;)isNaN(value=number(valueof(values[i],i,values)))?--m:sum+=value;if(m)return sum/m},exports.median=function(values,valueof){var value,n=values.length,i=-1,numbers=[];if(null==valueof)for(;++i<n;)isNaN(value=number(values[i]))||numbers.push(value);else for(;++i<n;)isNaN(value=number(valueof(values[i],i,values)))||numbers.push(value);return quantile(numbers.sort(ascending),.5)},exports.merge=function(arrays){for(var m,merged,array,n=arrays.length,i=-1,j=0;++i<n;)j+=arrays[i].length;for(merged=new Array(j);--n>=0;)for(array=arrays[n],m=array.length;--m>=0;)merged[--j]=array[m];return merged},exports.min=min,exports.pairs=function(array,f){null==f&&(f=pair);for(var i=0,n=array.length-1,p=array[0],pairs=new Array(n<0?0:n);i<n;)pairs[i]=f(p,p=array[++i]);return pairs},exports.permute=function(array,indexes){for(var i=indexes.length,permutes=new Array(i);i--;)permutes[i]=array[indexes[i]];return permutes},exports.quantile=quantile,exports.range=range,exports.scan=function(values,compare){if(n=values.length){var n,xi,i=0,j=0,xj=values[j];for(null==compare&&(compare=ascending);++i<n;)(compare(xi=values[i],xj)<0||0!==compare(xj,xj))&&(xj=xi,j=i);return 0===compare(xj,xj)?j:void 0}},exports.shuffle=function(array,i0,i1){for(var t,i,m=(null==i1?array.length:i1)-(i0=null==i0?0:+i0);m;)i=Math.random()*m--|0,t=array[m+i0],array[m+i0]=array[i+i0],array[i+i0]=t;return array},exports.sum=function(values,valueof){var value,n=values.length,i=-1,sum=0;if(null==valueof)for(;++i<n;)(value=+values[i])&&(sum+=value);else for(;++i<n;)(value=+valueof(values[i],i,values))&&(sum+=value);return sum},exports.ticks=function(start,stop,count){var reverse,n,ticks,step,i=-1;if(count=+count,(start=+start)==(stop=+stop)&&count>0)return[start];if((reverse=stop<start)&&(n=start,start=stop,stop=n),0===(step=tickIncrement(start,stop,count))||!isFinite(step))return[];if(step>0)for(start=Math.ceil(start/step),stop=Math.floor(stop/step),ticks=new Array(n=Math.ceil(stop-start+1));++i<n;)ticks[i]=(start+i)*step;else for(start=Math.floor(start*step),stop=Math.ceil(stop*step),ticks=new Array(n=Math.ceil(start-stop+1));++i<n;)ticks[i]=(start-i)/step;return reverse&&ticks.reverse(),ticks},exports.tickIncrement=tickIncrement,exports.tickStep=tickStep,exports.transpose=transpose,exports.variance=variance,exports.zip=function(){return transpose(arguments)},Object.defineProperty(exports,"__esModule",{value:!0})}(exports)},function(module,exports,__webpack_require__){!function(exports){"use strict";var t0=new Date,t1=new Date;function newInterval(floori,offseti,count,field){function interval(date){return floori(date=new Date(+date)),date}return interval.floor=interval,interval.ceil=function(date){return floori(date=new Date(date-1)),offseti(date,1),floori(date),date},interval.round=function(date){var d0=interval(date),d1=interval.ceil(date);return date-d0<d1-date?d0:d1},interval.offset=function(date,step){return offseti(date=new Date(+date),null==step?1:Math.floor(step)),date},interval.range=function(start,stop,step){var previous,range=[];if(start=interval.ceil(start),step=null==step?1:Math.floor(step),!(start<stop&&step>0))return range;do{range.push(previous=new Date(+start)),offseti(start,step),floori(start)}while(previous<start&&start<stop);return range},interval.filter=function(test){return newInterval(function(date){if(date>=date)for(;floori(date),!test(date);)date.setTime(date-1)},function(date,step){if(date>=date)if(step<0)for(;++step<=0;)for(;offseti(date,-1),!test(date););else for(;--step>=0;)for(;offseti(date,1),!test(date););})},count&&(interval.count=function(start,end){return t0.setTime(+start),t1.setTime(+end),floori(t0),floori(t1),Math.floor(count(t0,t1))},interval.every=function(step){return step=Math.floor(step),isFinite(step)&&step>0?step>1?interval.filter(field?function(d){return field(d)%step==0}:function(d){return interval.count(0,d)%step==0}):interval:null}),interval}var millisecond=newInterval(function(){},function(date,step){date.setTime(+date+step)},function(start,end){return end-start});millisecond.every=function(k){return k=Math.floor(k),isFinite(k)&&k>0?k>1?newInterval(function(date){date.setTime(Math.floor(date/k)*k)},function(date,step){date.setTime(+date+step*k)},function(start,end){return(end-start)/k}):millisecond:null};var milliseconds=millisecond.range,durationMinute=6e4,durationWeek=6048e5,second=newInterval(function(date){date.setTime(date-date.getMilliseconds())},function(date,step){date.setTime(+date+1e3*step)},function(start,end){return(end-start)/1e3},function(date){return date.getUTCSeconds()}),seconds=second.range,minute=newInterval(function(date){date.setTime(date-date.getMilliseconds()-1e3*date.getSeconds())},function(date,step){date.setTime(+date+step*durationMinute)},function(start,end){return(end-start)/durationMinute},function(date){return date.getMinutes()}),minutes=minute.range,hour=newInterval(function(date){date.setTime(date-date.getMilliseconds()-1e3*date.getSeconds()-date.getMinutes()*durationMinute)},function(date,step){date.setTime(+date+36e5*step)},function(start,end){return(end-start)/36e5},function(date){return date.getHours()}),hours=hour.range,day=newInterval(function(date){date.setHours(0,0,0,0)},function(date,step){date.setDate(date.getDate()+step)},function(start,end){return(end-start-(end.getTimezoneOffset()-start.getTimezoneOffset())*durationMinute)/864e5},function(date){return date.getDate()-1}),days=day.range;function weekday(i){return newInterval(function(date){date.setDate(date.getDate()-(date.getDay()+7-i)%7),date.setHours(0,0,0,0)},function(date,step){date.setDate(date.getDate()+7*step)},function(start,end){return(end-start-(end.getTimezoneOffset()-start.getTimezoneOffset())*durationMinute)/durationWeek})}var sunday=weekday(0),monday=weekday(1),tuesday=weekday(2),wednesday=weekday(3),thursday=weekday(4),friday=weekday(5),saturday=weekday(6),sundays=sunday.range,mondays=monday.range,tuesdays=tuesday.range,wednesdays=wednesday.range,thursdays=thursday.range,fridays=friday.range,saturdays=saturday.range,month=newInterval(function(date){date.setDate(1),date.setHours(0,0,0,0)},function(date,step){date.setMonth(date.getMonth()+step)},function(start,end){return end.getMonth()-start.getMonth()+12*(end.getFullYear()-start.getFullYear())},function(date){return date.getMonth()}),months=month.range,year=newInterval(function(date){date.setMonth(0,1),date.setHours(0,0,0,0)},function(date,step){date.setFullYear(date.getFullYear()+step)},function(start,end){return end.getFullYear()-start.getFullYear()},function(date){return date.getFullYear()});year.every=function(k){return isFinite(k=Math.floor(k))&&k>0?newInterval(function(date){date.setFullYear(Math.floor(date.getFullYear()/k)*k),date.setMonth(0,1),date.setHours(0,0,0,0)},function(date,step){date.setFullYear(date.getFullYear()+step*k)}):null};var years=year.range,utcMinute=newInterval(function(date){date.setUTCSeconds(0,0)},function(date,step){date.setTime(+date+step*durationMinute)},function(start,end){return(end-start)/durationMinute},function(date){return date.getUTCMinutes()}),utcMinutes=utcMinute.range,utcHour=newInterval(function(date){date.setUTCMinutes(0,0,0)},function(date,step){date.setTime(+date+36e5*step)},function(start,end){return(end-start)/36e5},function(date){return date.getUTCHours()}),utcHours=utcHour.range,utcDay=newInterval(function(date){date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCDate(date.getUTCDate()+step)},function(start,end){return(end-start)/864e5},function(date){return date.getUTCDate()-1}),utcDays=utcDay.range;function utcWeekday(i){return newInterval(function(date){date.setUTCDate(date.getUTCDate()-(date.getUTCDay()+7-i)%7),date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCDate(date.getUTCDate()+7*step)},function(start,end){return(end-start)/durationWeek})}var utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6),utcSundays=utcSunday.range,utcMondays=utcMonday.range,utcTuesdays=utcTuesday.range,utcWednesdays=utcWednesday.range,utcThursdays=utcThursday.range,utcFridays=utcFriday.range,utcSaturdays=utcSaturday.range,utcMonth=newInterval(function(date){date.setUTCDate(1),date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCMonth(date.getUTCMonth()+step)},function(start,end){return end.getUTCMonth()-start.getUTCMonth()+12*(end.getUTCFullYear()-start.getUTCFullYear())},function(date){return date.getUTCMonth()}),utcMonths=utcMonth.range,utcYear=newInterval(function(date){date.setUTCMonth(0,1),date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step)},function(start,end){return end.getUTCFullYear()-start.getUTCFullYear()},function(date){return date.getUTCFullYear()});utcYear.every=function(k){return isFinite(k=Math.floor(k))&&k>0?newInterval(function(date){date.setUTCFullYear(Math.floor(date.getUTCFullYear()/k)*k),date.setUTCMonth(0,1),date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step*k)}):null};var utcYears=utcYear.range;exports.timeInterval=newInterval,exports.timeMillisecond=millisecond,exports.timeMilliseconds=milliseconds,exports.utcMillisecond=millisecond,exports.utcMilliseconds=milliseconds,exports.timeSecond=second,exports.timeSeconds=seconds,exports.utcSecond=second,exports.utcSeconds=seconds,exports.timeMinute=minute,exports.timeMinutes=minutes,exports.timeHour=hour,exports.timeHours=hours,exports.timeDay=day,exports.timeDays=days,exports.timeWeek=sunday,exports.timeWeeks=sundays,exports.timeSunday=sunday,exports.timeSundays=sundays,exports.timeMonday=monday,exports.timeMondays=mondays,exports.timeTuesday=tuesday,exports.timeTuesdays=tuesdays,exports.timeWednesday=wednesday,exports.timeWednesdays=wednesdays,exports.timeThursday=thursday,exports.timeThursdays=thursdays,exports.timeFriday=friday,exports.timeFridays=fridays,exports.timeSaturday=saturday,exports.timeSaturdays=saturdays,exports.timeMonth=month,exports.timeMonths=months,exports.timeYear=year,exports.timeYears=years,exports.utcMinute=utcMinute,exports.utcMinutes=utcMinutes,exports.utcHour=utcHour,exports.utcHours=utcHours,exports.utcDay=utcDay,exports.utcDays=utcDays,exports.utcWeek=utcSunday,exports.utcWeeks=utcSundays,exports.utcSunday=utcSunday,exports.utcSundays=utcSundays,exports.utcMonday=utcMonday,exports.utcMondays=utcMondays,exports.utcTuesday=utcTuesday,exports.utcTuesdays=utcTuesdays,exports.utcWednesday=utcWednesday,exports.utcWednesdays=utcWednesdays,exports.utcThursday=utcThursday,exports.utcThursdays=utcThursdays,exports.utcFriday=utcFriday,exports.utcFridays=utcFridays,exports.utcSaturday=utcSaturday,exports.utcSaturdays=utcSaturdays,exports.utcMonth=utcMonth,exports.utcMonths=utcMonths,exports.utcYear=utcYear,exports.utcYears=utcYears,Object.defineProperty(exports,"__esModule",{value:!0})}(exports)},function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var d3_color_1=__webpack_require__(224),d3_interpolate_1=__webpack_require__(223),d3_scale_1=__webpack_require__(382),DEFAULT_FLOW_COLOR_SCHEME=["rgba(240,240,240,0.5)","#137CBD"],DEFAULT_FLOW_COLOR_SCHEME_POSITIVE=["rgba(240,240,240,0.5)","#f6654e"],DEFAULT_FLOW_COLOR_SCHEME_NEGATIVE=["rgba(240,240,240,0.5)","#00a9cc"],DEFAULT_OUTLINE_COLOR="#fff",DEFAULT_LOCATION_AREA_COLOR="rgba(220,220,220,0.5)",DEFAULT_DIMMED_OPACITY=.4,CIRCLE_DIMMED_OPACITY_MULTIPLIER=.5,FALLBACK_COLOR_RGBA=[255,255,255,255];function getBaseColorsRGBA(colors){var darkMode=!(!colors||!colors.darkMode);return{darkMode:darkMode,locationAreas:getLocationAreaColorsRGBA(colors&&colors.locationAreas,darkMode),outlineColor:colorAsRgba(colors&&colors.outlineColor||DEFAULT_OUTLINE_COLOR),dimmedOpacity:colors&&null!=colors.dimmedOpacity?colors.dimmedOpacity:DEFAULT_DIMMED_OPACITY}}function getLocationAreaColorsRGBA(colors,darkMode){var normalColor=colors&&colors.normal||DEFAULT_LOCATION_AREA_COLOR,normalColorHcl=d3_color_1.hcl(normalColor),locationAreasNormal=colorAsRgba(normalColor);return{normal:locationAreasNormal,connected:colorAsRgbaOr(colors&&colors.connected,locationAreasNormal),highlighted:colorAsRgbaOr(colors&&colors.highlighted,locationAreasNormal),outline:colorAsRgbaOr(colors&&colors.outline,colorAsRgba(normalColorHcl[darkMode?"brighter":"darker"]().toString())),selected:colorAsRgbaOr(colors&&colors.selected,locationAreasNormal)}}function getFlowAndCircleColors(inputColors,defaultFlowColorScheme,darkMode){var flowColorScheme=inputColors&&inputColors.flows&&inputColors.flows.scheme||defaultFlowColorScheme,maxFlowColorHcl=d3_color_1.hcl(flowColorScheme[flowColorScheme.length-1]),flowColorHighlighted=colorAsRgbaOr(inputColors&&inputColors.flows&&inputColors.flows.highlighted,colorAsRgba(maxFlowColorHcl[darkMode?"brighter":"darker"](.7).toString()));return{flows:{scheme:flowColorScheme,highlighted:flowColorHighlighted},locationCircles:{inner:colorAsRgbaOr(inputColors&&inputColors.locationCircles&&inputColors.locationCircles.inner,maxFlowColorHcl.toString()),outgoing:colorAsRgbaOr(inputColors&&inputColors.locationCircles&&inputColors.locationCircles.outgoing,darkMode?"#000":"#fff"),incoming:colorAsRgbaOr(inputColors&&inputColors.locationCircles&&inputColors.locationCircles.incoming,maxFlowColorHcl[darkMode?"brighter":"darker"](1.25).toString()),highlighted:colorAsRgbaOr(inputColors&&inputColors.locationCircles&&inputColors.locationCircles.highlighted,flowColorHighlighted)}}}function colorAsRgba(color){var col=d3_color_1.color(color);if(!col)return console.warn("Invalid color: ",color),FALLBACK_COLOR_RGBA;var rgbColor=col.rgb();return[Math.floor(rgbColor.r),Math.floor(rgbColor.g),Math.floor(rgbColor.b),opacityFloatToInteger(col.opacity)]}function colorAsRgbaOr(color,defaultColor){return color?colorAsRgba(color):"string"==typeof defaultColor?colorAsRgba(defaultColor):defaultColor}function rgbaAsString(color){return"rgba("+color.join(",")+")"}function opacityFloatToInteger(opacity){return Math.round(255*opacity)}function getDimmedColor(color,opacity){var col=d3_color_1.hcl(rgbaAsString(color));if(!col)return console.warn("Invalid color: ",color),FALLBACK_COLOR_RGBA;col.c*=.1;var rgbColor=col.rgb();return[Math.floor(rgbColor.r),Math.floor(rgbColor.g),Math.floor(rgbColor.b),opacityFloatToInteger(void 0!==opacity?opacity:DEFAULT_DIMMED_OPACITY)]}exports.isDiffColors=function(colors){return void 0!==colors.positive},exports.isDiffColorsRGBA=function(colors){return void 0!==colors.positive},exports.getColorsRGBA=function(colors){var baseColorsRGBA=getBaseColorsRGBA(colors);return __assign({},baseColorsRGBA,getFlowAndCircleColors(colors,DEFAULT_FLOW_COLOR_SCHEME,baseColorsRGBA.darkMode))},exports.getDiffColorsRGBA=function(colors){var baseColorsRGBA=getBaseColorsRGBA(colors);return __assign({},baseColorsRGBA,{positive:getFlowAndCircleColors(colors&&colors.positive,DEFAULT_FLOW_COLOR_SCHEME_POSITIVE,baseColorsRGBA.darkMode),negative:getFlowAndCircleColors(colors&&colors.negative,DEFAULT_FLOW_COLOR_SCHEME_NEGATIVE,baseColorsRGBA.darkMode)})},exports.colorAsRgba=colorAsRgba,exports.rgbaAsString=rgbaAsString,exports.opacityFloatToInteger=opacityFloatToInteger,exports.getDimmedCircleOutlineColor=function(outlineColor,opacity){return[outlineColor[0],outlineColor[1],outlineColor[2],outlineColor[3]*opacity*CIRCLE_DIMMED_OPACITY_MULTIPLIER]},exports.getDimmedCircleColor=function(color,opacity){return getDimmedColor(color,opacity*CIRCLE_DIMMED_OPACITY_MULTIPLIER)},exports.getDimmedColor=getDimmedColor,exports.createFlowColorScale=function(domain,scheme,animate){var scale=d3_scale_1.scaleSequentialPow(d3_interpolate_1.interpolateRgbBasis(scheme)).exponent(animate?.5:1/3).domain(domain);return function(value){return colorAsRgba(scale(value))}}},function(module,exports,__webpack_require__){"use strict";var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=__webpack_require__(84),React=__importStar(__webpack_require__(8));exports.default=function(_a){var size=_a.size,inner=_a.inner,outer=_a.outer,outline=_a.outline;return React.createElement("svg",{width:size,height:size,style:{marginRight:5}},React.createElement("circle",{cx:size/2,cy:size/2,r:.5*size,fill:core_1.rgbaAsString(outline)}),React.createElement("circle",{cx:size/2,cy:size/2,r:.5*size-1,fill:core_1.rgbaAsString(outer)}),React.createElement("circle",{cx:size/2,cy:size/2,r:.5*size*.6-1,fill:core_1.rgbaAsString(inner)}))}},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__rest=this&&this.__rest||function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&(t[p[i]]=s[p[i]])}return t},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result};Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__webpack_require__(388),core_1=__importStar(__webpack_require__(84)),React=__importStar(__webpack_require__(8)),react_map_gl_1=__webpack_require__(391),ESC_KEY="Escape",FlowMap=function(_super){function FlowMap(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.state={viewState:_this.props.initialViewState,time:0},_this.animationFrame=-1,_this.animate=function(){var timestamp=Date.now()/1e3;_this.setState({time:timestamp%60/60*1800}),_this.animationFrame=window.requestAnimationFrame(_this.animate)},_this.handleFlowMapHover=function(info){var type=info.type,object=info.object;switch(type){case core_1.PickingType.FLOW:object?_this.highlight({type:"flow",flow:object},info):_this.highlight(void 0);break;case core_1.PickingType.LOCATION:var getLocationId=_this.props.getLocationId;object?_this.highlight({type:"location",locationId:(getLocationId||core_1.default.defaultProps.getLocationId.value)(object)},info):_this.highlight(void 0);break;case core_1.PickingType.LOCATION_AREA:_this.highlight(void 0)}},_this.handleFlowMapClick=function(_a){var type=_a.type,object=_a.object;switch(type){case core_1.PickingType.LOCATION:if(object){var _b=_this.props,getLocationId=_b.getLocationId,multiselect=_b.multiselect,selectedLocationIds=_this.state.selectedLocationIds,locationId_1=(getLocationId||core_1.default.defaultProps.getLocationId.value)(object),isSelected=selectedLocationIds&&selectedLocationIds.indexOf(locationId_1)>=0,next=void 0;next=multiselect?selectedLocationIds?isSelected?selectedLocationIds.filter(function(id){return id!==locationId_1}):selectedLocationIds.concat([locationId_1]):[locationId_1]:isSelected?void 0:[locationId_1],_this.selectLocations(next),_this.highlight(void 0)}break;case core_1.PickingType.LOCATION_AREA:}},_this.handleViewStateChange=function(_a){var viewState=_a.viewState;_this.setState({viewState:viewState,highlight:void 0});var onViewStateChange=_this.props.onViewStateChange;onViewStateChange&&onViewStateChange(viewState)},_this.handleKeyDown=function(evt){evt instanceof KeyboardEvent&&evt.key===ESC_KEY&&_this.setState({selectedLocationIds:void 0,highlight:void 0})},_this}return __extends(FlowMap,_super),FlowMap.getDerivedStateFromProps=function(props,state){return props.selectedLocationIds&&props.selectedLocationIds!==state.selectedLocationIds?{selectedLocationIds:props.selectedLocationIds}:null},FlowMap.prototype.componentDidMount=function(){document.addEventListener("keydown",this.handleKeyDown),this.props.animate&&this.animate();var onViewStateChange=this.props.onViewStateChange;if(onViewStateChange){var viewState=this.state.viewState;viewState&&onViewStateChange(viewState)}},FlowMap.prototype.componentDidUpdate=function(prevProps,prevState,snapshot){var animate=this.props.animate;animate!==prevProps.animate&&(animate?this.animate():this.stopAnimation())},FlowMap.prototype.componentWillUnmount=function(){document.removeEventListener("keydown",this.handleKeyDown),this.stopAnimation()},FlowMap.prototype.render=function(){var _a=this.props,mapboxAccessToken=_a.mapboxAccessToken,mapStyle=_a.mapStyle,mixBlendMode=_a.mixBlendMode,flowMapLayer=this.getFlowMapLayer();return React.createElement(React.Fragment,null,React.createElement(react_1.DeckGL,{style:{mixBlendMode:mixBlendMode},layers:[flowMapLayer],viewState:this.state.viewState,controller:!0,onViewStateChange:this.handleViewStateChange,children:function(_a){var width=_a.width,height=_a.height,viewState=_a.viewState;return React.createElement(react_map_gl_1.StaticMap,{width:width,height:height,mapboxApiAccessToken:mapboxAccessToken,mapStyle:mapStyle,viewState:viewState})}}))},FlowMap.prototype.stopAnimation=function(){this.animationFrame&&window.cancelAnimationFrame(this.animationFrame)},FlowMap.prototype.getFlowMapLayer=function(){var _a=this.props,flowMapLayerProps=(_a.initialViewState,_a.mapboxAccessToken,_a.mixBlendMode,_a.multiselect,_a.onSelected,_a.onHighlighted,__rest(_a,["initialViewState","mapboxAccessToken","mixBlendMode","multiselect","onSelected","onHighlighted"])),_b=this.state,highlight=_b.highlight,selectedLocationIds=_b.selectedLocationIds;return new core_1.default(__assign({id:"flow-map-layer",animationCurrentTime:this.state.time},flowMapLayerProps,{selectedLocationIds:selectedLocationIds,highlightedLocationId:highlight&&"location"===highlight.type?highlight.locationId:void 0,highlightedFlow:highlight&&"flow"===highlight.type?highlight.flow:void 0,onHover:this.handleFlowMapHover,onClick:this.handleFlowMapClick}))},FlowMap.prototype.highlight=function(highlight,info){this.setState({highlight:highlight});var onHighlighted=this.props.onHighlighted;onHighlighted&&onHighlighted(highlight,info)},FlowMap.prototype.selectLocations=function(selectedLocationIds){this.setState(function(state){return __assign({},state,{selectedLocationIds:selectedLocationIds})});var onSelected=this.props.onSelected;onSelected&&onSelected(selectedLocationIds)},FlowMap.defaultProps={mixBlendMode:"multiply"},FlowMap}(React.Component);exports.default=FlowMap},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"DeckGL",{enumerable:!0,get:function(){return _deckgl.default}}),Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return _deckgl.default}}),Object.defineProperty(exports,"autobind",{enumerable:!0,get:function(){return _autobind.default}});var _deckgl=_interopRequireDefault(__webpack_require__(868)),_autobind=_interopRequireDefault(__webpack_require__(390))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.inheritsFrom=function(Type,ParentType){for(;Type;){if(Type===ParentType)return!0;Type=Object.getPrototypeOf(Type)}return!1}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(obj){var proto=Object.getPrototypeOf(obj),propNames=Object.getOwnPropertyNames(proto),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_loop=function(){var key=_step.value;"function"==typeof obj[key]&&(PREDEFINED.find(function(name){return key===name})||(obj[key]=obj[key].bind(obj)))},_iterator=propNames[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_loop()}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}};var PREDEFINED=["constructor","render","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","componentDidUpdate","componentWillUnmount"]},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return _interactiveMap.default}}),Object.defineProperty(exports,"InteractiveMap",{enumerable:!0,get:function(){return _interactiveMap.default}}),Object.defineProperty(exports,"StaticMap",{enumerable:!0,get:function(){return _staticMap.default}}),Object.defineProperty(exports,"BaseControl",{enumerable:!0,get:function(){return _baseControl.default}}),Object.defineProperty(exports,"Marker",{enumerable:!0,get:function(){return _marker.default}}),Object.defineProperty(exports,"Popup",{enumerable:!0,get:function(){return _popup.default}}),Object.defineProperty(exports,"FullscreenControl",{enumerable:!0,get:function(){return _fullscreenControl.default}}),Object.defineProperty(exports,"GeolocateControl",{enumerable:!0,get:function(){return _geolocateControl.default}}),Object.defineProperty(exports,"NavigationControl",{enumerable:!0,get:function(){return _navigationControl.default}}),Object.defineProperty(exports,"CanvasOverlay",{enumerable:!0,get:function(){return _canvasOverlay.default}}),Object.defineProperty(exports,"HTMLOverlay",{enumerable:!0,get:function(){return _htmlOverlay.default}}),Object.defineProperty(exports,"SVGOverlay",{enumerable:!0,get:function(){return _svgOverlay.default}}),Object.defineProperty(exports,"TRANSITION_EVENTS",{enumerable:!0,get:function(){return _transitionManager.TRANSITION_EVENTS}}),Object.defineProperty(exports,"TransitionInterpolator",{enumerable:!0,get:function(){return _transition.TransitionInterpolator}}),Object.defineProperty(exports,"LinearInterpolator",{enumerable:!0,get:function(){return _transition.LinearInterpolator}}),Object.defineProperty(exports,"FlyToInterpolator",{enumerable:!0,get:function(){return _transition.ViewportFlyToInterpolator}}),Object.defineProperty(exports,"MapController",{enumerable:!0,get:function(){return _mapController.default}}),Object.defineProperty(exports,"_MapContext",{enumerable:!0,get:function(){return _mapContext.default}});var _interactiveMap=_interopRequireDefault(__webpack_require__(874)),_staticMap=_interopRequireDefault(__webpack_require__(392)),_baseControl=_interopRequireDefault(__webpack_require__(53)),_marker=_interopRequireDefault(__webpack_require__(395)),_popup=_interopRequireDefault(__webpack_require__(883)),_fullscreenControl=_interopRequireDefault(__webpack_require__(885)),_geolocateControl=_interopRequireDefault(__webpack_require__(886)),_navigationControl=_interopRequireDefault(__webpack_require__(888)),_canvasOverlay=_interopRequireDefault(__webpack_require__(889)),_htmlOverlay=_interopRequireDefault(__webpack_require__(890)),_svgOverlay=_interopRequireDefault(__webpack_require__(891)),_transitionManager=__webpack_require__(149),_transition=__webpack_require__(146),_mapController=_interopRequireDefault(__webpack_require__(229)),_mapContext=_interopRequireDefault(__webpack_require__(148))},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf3=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_assertThisInitialized2=_interopRequireDefault(__webpack_require__(12)),_defineProperty2=_interopRequireDefault(__webpack_require__(6)),_react=__webpack_require__(8),_propTypes=_interopRequireDefault(__webpack_require__(32)),_styleUtils=__webpack_require__(875),_viewportMercatorProject=_interopRequireDefault(__webpack_require__(37)),_reactVirtualizedAutoSizer=_interopRequireDefault(__webpack_require__(876)),_mapbox=_interopRequireDefault(__webpack_require__(877)),_mapboxgl=_interopRequireDefault(__webpack_require__(227)),_mapConstraints=__webpack_require__(879),_mapState=__webpack_require__(74),_mapContext=_interopRequireDefault(__webpack_require__(148)),NO_TOKEN_WARNING="A valid API access token is required to use Mapbox data";var UNAUTHORIZED_ERROR_CODE=401,CONTAINER_STYLE={position:"absolute",width:"100%",height:"100%",overflow:"hidden"},propTypes=Object.assign({},_mapbox.default.propTypes,{width:_propTypes.default.oneOfType([_propTypes.default.number,_propTypes.default.string]),height:_propTypes.default.oneOfType([_propTypes.default.number,_propTypes.default.string]),onResize:_propTypes.default.func,preventStyleDiffing:_propTypes.default.bool,disableTokenWarning:_propTypes.default.bool,visible:_propTypes.default.bool,className:_propTypes.default.string,style:_propTypes.default.object,visibilityConstraints:_propTypes.default.object}),defaultProps=Object.assign({},_mapbox.default.defaultProps,{preventStyleDiffing:!1,disableTokenWarning:!1,visible:!0,onResize:function(){},className:"",style:null,visibilityConstraints:_mapState.MAPBOX_LIMITS}),StaticMap=function(_PureComponent){function StaticMap(){var _getPrototypeOf2,_this;(0,_classCallCheck2.default)(this,StaticMap);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=(0,_possibleConstructorReturn2.default)(this,(_getPrototypeOf2=(0,_getPrototypeOf3.default)(StaticMap)).call.apply(_getPrototypeOf2,[this].concat(args))),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"state",{accessTokenInvalid:!1}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_mapbox",null),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_map",null),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_mapboxMapRef",(0,_react.createRef)()),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_mapContainerRef",(0,_react.createRef)()),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_queryParams",{}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_width",0),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_height",0),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"getMap",function(){return _this._map}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"queryRenderedFeatures",function(geometry){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _this._map.queryRenderedFeatures(geometry,options)}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_mapboxMapError",function(evt){(evt.error&&evt.error.status||evt.status)!==UNAUTHORIZED_ERROR_CODE||_this.state.accessTokenInvalid||(console.error(NO_TOKEN_WARNING),_this.setState({accessTokenInvalid:!0})),_this.props.onError(evt)}),_this}return(0,_inherits2.default)(StaticMap,_PureComponent),(0,_createClass2.default)(StaticMap,[{key:"componentDidMount",value:function(){if(StaticMap.supported()){var mapStyle=this.props.mapStyle;this._mapbox=new _mapbox.default(Object.assign({},this.props,{mapboxgl:_mapboxgl.default,width:this._width,height:this._height,container:this._mapboxMapRef.current,onError:this._mapboxMapError,mapStyle:(0,_styleUtils.normalizeStyle)(mapStyle)})),this._map=this._mapbox.getMap()}}},{key:"componentDidUpdate",value:function(prevProps){this._mapbox&&(this._updateMapStyle(prevProps,this.props),this._updateMapProps(this.props))}},{key:"componentWillUnmount",value:function(){this._mapbox&&(this._mapbox.finalize(),this._mapbox=null,this._map=null)}},{key:"_updateMapSize",value:function(width,height){this._width===width&&this._height===height||(this._width=width,this._height=height,this._updateMapProps(this.props))}},{key:"_updateMapStyle",value:function(oldProps,newProps){var mapStyle=newProps.mapStyle;mapStyle!==oldProps.mapStyle&&this._map.setStyle((0,_styleUtils.normalizeStyle)(mapStyle),{diff:!this.props.preventStyleDiffing})}},{key:"_updateMapProps",value:function(props){this._mapbox&&this._mapbox.setProps(Object.assign({},props,{width:this._width,height:this._height}))}},{key:"_renderNoTokenWarning",value:function(){if(this.state.accessTokenInvalid&&!this.props.disableTokenWarning){return(0,_react.createElement)("div",{key:"warning",id:"no-token-warning",style:{position:"absolute",left:0,top:0}},[(0,_react.createElement)("h3",{key:"header"},NO_TOKEN_WARNING),(0,_react.createElement)("div",{key:"text"},"For information on setting up your basemap, read"),(0,_react.createElement)("a",{key:"link",href:"https://uber.github.io/react-map-gl/#/Documentation/getting-started/about-mapbox-tokens"},"Note on Map Tokens")])}return null}},{key:"_renderOverlays",value:function(dimensions){var _this2=this,_dimensions$width=dimensions.width,width=void 0===_dimensions$width?Number(this.props.width):_dimensions$width,_dimensions$height=dimensions.height,height=void 0===_dimensions$height?Number(this.props.height):_dimensions$height;return this._updateMapSize(width,height),(0,_react.createElement)(_mapContext.default.Consumer,null,function(interactiveContext){var context=Object.assign({},interactiveContext,{viewport:new _viewportMercatorProject.default(Object.assign({},_this2.props,_this2.props.viewState,{width:width,height:height})),map:_this2._map,mapContainer:interactiveContext.mapContainer||_this2._mapContainerRef.current});return(0,_react.createElement)(_mapContext.default.Provider,{value:context},(0,_react.createElement)("div",{key:"map-overlays",className:"overlays",style:CONTAINER_STYLE,children:_this2.props.children}))})}},{key:"render",value:function(){var _this$props=this.props,className=_this$props.className,width=_this$props.width,height=_this$props.height,style=_this$props.style,visibilityConstraints=_this$props.visibilityConstraints,mapContainerStyle=Object.assign({position:"relative"},style,{width:width,height:height}),visible=this.props.visible&&(0,_mapConstraints.checkVisibilityConstraints)(this.props.viewState||this.props,visibilityConstraints),mapStyle=Object.assign({},CONTAINER_STYLE,{visibility:visible?"inherit":"hidden"});return(0,_react.createElement)("div",{key:"map-container",style:mapContainerStyle,ref:this._mapContainerRef,children:[(0,_react.createElement)("div",{key:"map-mapbox",ref:this._mapboxMapRef,style:mapStyle,className:className}),(0,_react.createElement)(_reactVirtualizedAutoSizer.default,{key:"autosizer",disableWidth:Number.isFinite(width),disableHeight:Number.isFinite(height),onResize:this.props.onResize},this._renderOverlays.bind(this)),this._renderNoTokenWarning()]})}}],[{key:"supported",value:function(){return _mapboxgl.default&&_mapboxgl.default.supported()}}]),StaticMap}(_react.PureComponent);exports.default=StaticMap,(0,_defineProperty2.default)(StaticMap,"propTypes",propTypes),(0,_defineProperty2.default)(StaticMap,"defaultProps",defaultProps)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mod=function(value,divisor){var modulus=value%divisor;return modulus<0?divisor+modulus:modulus},exports.isValid=function(prop){return Number.isFinite(prop)||Array.isArray(prop)},exports.getEndValueByShortestPath=function(propName,startValue,endValue){(function(propName){return propName in WRAPPED_ANGULAR_PROPS})(propName)&&Math.abs(endValue-startValue)>180&&(endValue=endValue<0?endValue+360:endValue-360);return endValue};var WRAPPED_ANGULAR_PROPS={longitude:1,bearing:1}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};DEPRECATED_PROPS.forEach(function(depProp){if(props.hasOwnProperty(depProp.old)){var warnMessage=(name=depProp.old,"react-map-gl: `".concat(name,"` is removed."));depProp.new&&(warnMessage="".concat(warnMessage," ").concat(function(name){return"Use `".concat(name,"` instead.")}(depProp.new))),console.warn(warnMessage)}var name})};var DEPRECATED_PROPS=[{old:"onChangeViewport",new:"onViewportChange"},{old:"perspectiveEnabled",new:"dragRotate"},{old:"onHoverFeatures",new:"onHover"},{old:"onClickFeatures",new:"onClick"},{old:"touchZoomRotate",new:"touchZoom, touchRotate"},{old:"mapControls",new:"controller"}]},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _slicedToArray2=_interopRequireDefault(__webpack_require__(11)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_defineProperty2=_interopRequireDefault(__webpack_require__(6)),_react=__webpack_require__(8),_propTypes=_interopRequireDefault(__webpack_require__(32)),_draggableControl=_interopRequireDefault(__webpack_require__(882)),propTypes=Object.assign({},_draggableControl.default.propTypes,{className:_propTypes.default.string,longitude:_propTypes.default.number.isRequired,latitude:_propTypes.default.number.isRequired}),defaultProps=Object.assign({},_draggableControl.default.defaultProps,{className:"",offsetLeft:0,offsetTop:0}),Marker=function(_DraggableControl){function Marker(){return(0,_classCallCheck2.default)(this,Marker),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Marker).apply(this,arguments))}return(0,_inherits2.default)(Marker,_DraggableControl),(0,_createClass2.default)(Marker,[{key:"_getPosition",value:function(){var _this$props=this.props,longitude=_this$props.longitude,latitude=_this$props.latitude,offsetLeft=_this$props.offsetLeft,offsetTop=_this$props.offsetTop,_this$state=this.state,dragPos=_this$state.dragPos,dragOffset=_this$state.dragOffset;if(dragPos)return this._getDraggedPosition(dragPos,dragOffset);var _this$_context$viewpo=this._context.viewport.project([longitude,latitude]),_this$_context$viewpo2=(0,_slicedToArray2.default)(_this$_context$viewpo,2),x=_this$_context$viewpo2[0],y=_this$_context$viewpo2[1];return[x+=offsetLeft,y+=offsetTop]}},{key:"_render",value:function(){var _this$props2=this.props,className=_this$props2.className,draggable=_this$props2.draggable,dragPos=this.state.dragPos,_this$_getPosition=this._getPosition(),_this$_getPosition2=(0,_slicedToArray2.default)(_this$_getPosition,2),containerStyle={position:"absolute",left:_this$_getPosition2[0],top:_this$_getPosition2[1],cursor:draggable?dragPos?"grabbing":"grab":"auto"};return(0,_react.createElement)("div",{className:"mapboxgl-marker ".concat(className),ref:this._containerRef,style:containerStyle,children:this.props.children})}}]),Marker}(_draggableControl.default);exports.default=Marker,(0,_defineProperty2.default)(Marker,"propTypes",propTypes),(0,_defineProperty2.default)(Marker,"defaultProps",defaultProps)},function(module,exports,__webpack_require__){!function(exports){"use strict";function ascending(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function bisector(compare){var f;return 1===compare.length&&(f=compare,compare=function(d,x){return ascending(f(d),x)}),{left:function(a,x,lo,hi){for(null==lo&&(lo=0),null==hi&&(hi=a.length);lo<hi;){var mid=lo+hi>>>1;compare(a[mid],x)<0?lo=mid+1:hi=mid}return lo},right:function(a,x,lo,hi){for(null==lo&&(lo=0),null==hi&&(hi=a.length);lo<hi;){var mid=lo+hi>>>1;compare(a[mid],x)>0?hi=mid:lo=mid+1}return lo}}}var ascendingBisect=bisector(ascending),bisectRight=ascendingBisect.right,bisectLeft=ascendingBisect.left;function length(array){return 0|array.length}function empty(length){return!(length>0)}function arrayify(values){return"object"!=typeof values||"length"in values?values:Array.from(values)}function variance(values,valueof){let delta,count=0,mean=0,sum=0;if(void 0===valueof)for(let value of values)null!=value&&(value=+value)>=value&&(mean+=(delta=value-mean)/++count,sum+=delta*(value-mean));else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(value=+value)>=value&&(mean+=(delta=value-mean)/++count,sum+=delta*(value-mean))}if(count>1)return sum/(count-1)}function deviation(values,valueof){const v=variance(values,valueof);return v?Math.sqrt(v):v}function extent(values,valueof){let min,max;if(void 0===valueof)for(const value of values)null!=value&&(void 0===min?value>=value&&(min=max=value):(min>value&&(min=value),max<value&&(max=value)));else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(void 0===min?value>=value&&(min=max=value):(min>value&&(min=value),max<value&&(max=value)))}return[min,max]}function identity(x){return x}function nest(values,map,reduce,keys){return function regroup(values,i){if(i>=keys.length)return reduce(values);const groups=new Map,keyof=keys[i++];let index=-1;for(const value of values){const key=keyof(value,++index,values),group=groups.get(key);group?group.push(value):groups.set(key,[value])}for(const[key,values]of groups)groups.set(key,regroup(values,i));return map(groups)}(values,0)}var array=Array.prototype,slice=array.slice,map=array.map;function constant(x){return function(){return x}}function range(start,stop,step){start=+start,stop=+stop,step=(n=arguments.length)<2?(stop=start,start=0,1):n<3?1:+step;for(var i=-1,n=0|Math.max(0,Math.ceil((stop-start)/step)),range=new Array(n);++i<n;)range[i]=start+i*step;return range}var e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickIncrement(start,stop,count){var step=(stop-start)/Math.max(0,count),power=Math.floor(Math.log(step)/Math.LN10),error=step/Math.pow(10,power);return power>=0?(error>=e10?10:error>=e5?5:error>=e2?2:1)*Math.pow(10,power):-Math.pow(10,-power)/(error>=e10?10:error>=e5?5:error>=e2?2:1)}function tickStep(start,stop,count){var step0=Math.abs(stop-start)/Math.max(0,count),step1=Math.pow(10,Math.floor(Math.log(step0)/Math.LN10)),error=step0/step1;return error>=e10?step1*=10:error>=e5?step1*=5:error>=e2&&(step1*=2),stop<start?-step1:step1}function sturges(values){return Math.ceil(Math.log(values.length)/Math.LN2)+1}function bin(){var value=identity,domain=extent,threshold=sturges;function histogram(data){Array.isArray(data)||(data=Array.from(data));var i,x,n=data.length,values=new Array(n);for(i=0;i<n;++i)values[i]=value(data[i],i,data);var xz=domain(values),x0=xz[0],x1=xz[1],tz=threshold(values,x0,x1);Array.isArray(tz)||(tz=tickStep(x0,x1,tz),tz=range(Math.ceil(x0/tz)*tz,x1,tz));for(var m=tz.length;tz[0]<=x0;)tz.shift(),--m;for(;tz[m-1]>x1;)tz.pop(),--m;var bin,bins=new Array(m+1);for(i=0;i<=m;++i)(bin=bins[i]=[]).x0=i>0?tz[i-1]:x0,bin.x1=i<m?tz[i]:x1;for(i=0;i<n;++i)x=values[i],x0<=x&&x<=x1&&bins[bisectRight(tz,x,0,m)].push(data[i]);return bins}return histogram.value=function(_){return arguments.length?(value="function"==typeof _?_:constant(_),histogram):value},histogram.domain=function(_){return arguments.length?(domain="function"==typeof _?_:constant([_[0],_[1]]),histogram):domain},histogram.thresholds=function(_){return arguments.length?(threshold="function"==typeof _?_:Array.isArray(_)?constant(slice.call(_)):constant(_),histogram):threshold},histogram}function number(x){return null===x?NaN:+x}function quantile(values,p,valueof=number){if(n=values.length){if((p=+p)<=0||n<2)return+valueof(values[0],0,values);if(p>=1)return+valueof(values[n-1],n-1,values);var n,i=(n-1)*p,i0=Math.floor(i),value0=+valueof(values[i0],i0,values),value1=+valueof(values[i0+1],i0+1,values);return value0+(value1-value0)*(i-i0)}}function quickselect(array,k,left=0,right=array.length-1,compare=ascending){for(;right>left;){if(right-left>600){const n=right-left+1,m=k-left+1,z=Math.log(n),s=.5*Math.exp(2*z/3),sd=.5*Math.sqrt(z*s*(n-s)/n)*(m-n/2<0?-1:1),newLeft=Math.max(left,Math.floor(k-m*s/n+sd)),newRight=Math.min(right,Math.floor(k+(n-m)*s/n+sd));quickselect(array,k,newLeft,newRight,compare)}const t=array[k];let i=left,j=right;for(swap(array,left,k),compare(array[right],t)>0&&swap(array,left,right);i<j;){for(swap(array,i,j),++i,--j;compare(array[i],t)<0;)++i;for(;compare(array[j],t)>0;)--j}0===compare(array[left],t)?swap(array,left,j):swap(array,++j,right),j<=k&&(left=j+1),k<=j&&(right=j-1)}return array}function swap(array,i,j){const t=array[i];array[i]=array[j],array[j]=t}function min(values,valueof){let min;if(void 0===valueof)for(const value of values)null!=value&&(min>value||void 0===min&&value>=value)&&(min=value);else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(min>value||void 0===min&&value>=value)&&(min=value)}return min}function leastIndex(values,compare=ascending){let min,minIndex=-1,index=-1;if(1===compare.length)for(const element of values){++index;const value=compare(element);(minIndex<0?0===ascending(value,value):ascending(value,min)<0)&&(min=value,minIndex=index)}else for(const value of values)++index,(minIndex<0?0===compare(value,value):compare(value,min)<0)&&(min=value,minIndex=index);return minIndex}function transpose(matrix){if(!(n=matrix.length))return[];for(var i=-1,m=min(matrix,length$1),transpose=new Array(m);++i<m;)for(var n,j=-1,row=transpose[i]=new Array(n);++j<n;)row[j]=matrix[j][i];return transpose}function length$1(d){return d.length}exports.bisect=bisectRight,exports.bisectRight=bisectRight,exports.bisectLeft=bisectLeft,exports.ascending=ascending,exports.bisector=bisector,exports.count=function(values,valueof){let count=0;if(void 0===valueof)for(const value of values)null!=value&&value>=value&&++count;else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&value>=value&&++count}return count},exports.cross=function(...values){const reduce="function"==typeof values[values.length-1]&&function(reduce){return values=>reduce(...values)}(values.pop()),lengths=(values=values.map(arrayify)).map(length),j=values.length-1,index=new Array(j+1).fill(0),product=[];if(j<0||lengths.some(empty))return product;for(;;){product.push(index.map((j,i)=>values[i][j]));let i=j;for(;++index[i]===lengths[i];){if(0===i)return reduce?product.map(reduce):product;index[i--]=0}}},exports.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN},exports.deviation=deviation,exports.extent=extent,exports.group=function(values,...keys){return nest(values,identity,identity,keys)},exports.groups=function(values,...keys){return nest(values,Array.from,identity,keys)},exports.rollup=function(values,reduce,...keys){return nest(values,identity,reduce,keys)},exports.rollups=function(values,reduce,...keys){return nest(values,Array.from,reduce,keys)},exports.bin=bin,exports.histogram=bin,exports.thresholdFreedmanDiaconis=function(values,min,max){return values=map.call(values,number).sort(ascending),Math.ceil((max-min)/(2*(quantile(values,.75)-quantile(values,.25))*Math.pow(values.length,-1/3)))},exports.thresholdScott=function(values,min,max){return Math.ceil((max-min)/(3.5*deviation(values)*Math.pow(values.length,-1/3)))},exports.thresholdSturges=sturges,exports.max=function(values,valueof){let max;if(void 0===valueof)for(const value of values)null!=value&&(max<value||void 0===max&&value>=value)&&(max=value);else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(max<value||void 0===max&&value>=value)&&(max=value)}return max},exports.maxIndex=function(values,valueof){let max,maxIndex=-1,index=-1;if(void 0===valueof)for(const value of values)++index,null!=value&&(max<value||void 0===max&&value>=value)&&(max=value,maxIndex=index);else for(let value of values)null!=(value=valueof(value,++index,values))&&(max<value||void 0===max&&value>=value)&&(max=value,maxIndex=index);return maxIndex},exports.mean=function(values,valueof){let count=0,sum=0;if(void 0===valueof)for(let value of values)null!=value&&(value=+value)>=value&&(++count,sum+=value);else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(value=+value)>=value&&(++count,sum+=value)}if(count)return sum/count},exports.median=function(values,valueof){if(!(values=Float64Array.from(function*(values,valueof){if(void 0===valueof)for(let value of values)null!=value&&(value=+value)>=value&&(yield value);else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(value=+value)>=value&&(yield value)}}(values,valueof))).length)return;const n=values.length,i=n>>1;return quickselect(values,i-1,0),0==(1&n)&&quickselect(values,i,i),quantile(values,.5)},exports.merge=function(arrays){return Array.from(function*(arrays){for(const array of arrays)yield*array}(arrays))},exports.min=min,exports.minIndex=function(values,valueof){let min,minIndex=-1,index=-1;if(void 0===valueof)for(const value of values)++index,null!=value&&(min>value||void 0===min&&value>=value)&&(min=value,minIndex=index);else for(let value of values)null!=(value=valueof(value,++index,values))&&(min>value||void 0===min&&value>=value)&&(min=value,minIndex=index);return minIndex},exports.pairs=function(values,pairof=function(a,b){return[a,b]}){const pairs=[];let previous,first=!1;for(const value of values)first&&pairs.push(pairof(previous,value)),previous=value,first=!0;return pairs},exports.permute=function(source,keys){return Array.from(keys,key=>source[key])},exports.quantile=quantile,exports.quickselect=quickselect,exports.range=range,exports.least=function(values,compare=ascending){let min,defined=!1;if(1===compare.length){let minValue;for(const element of values){const value=compare(element);(defined?ascending(value,minValue)<0:0===ascending(value,value))&&(min=element,minValue=value,defined=!0)}}else for(const value of values)(defined?compare(value,min)<0:0===compare(value,value))&&(min=value,defined=!0);return min},exports.leastIndex=leastIndex,exports.scan=function(values,compare){const index=leastIndex(values,compare);return index<0?void 0:index},exports.shuffle=function(array,i0=0,i1=array.length){for(var t,i,m=i1-(i0=+i0);m;)i=Math.random()*m--|0,t=array[m+i0],array[m+i0]=array[i+i0],array[i+i0]=t;return array},exports.sum=function(values,valueof){let sum=0;if(void 0===valueof)for(let value of values)(value=+value)&&(sum+=value);else{let index=-1;for(let value of values)(value=+valueof(value,++index,values))&&(sum+=value)}return sum},exports.ticks=function(start,stop,count){var reverse,n,ticks,step,i=-1;if(count=+count,(start=+start)==(stop=+stop)&&count>0)return[start];if((reverse=stop<start)&&(n=start,start=stop,stop=n),0===(step=tickIncrement(start,stop,count))||!isFinite(step))return[];if(step>0)for(start=Math.ceil(start/step),stop=Math.floor(stop/step),ticks=new Array(n=Math.ceil(stop-start+1));++i<n;)ticks[i]=(start+i)*step;else for(start=Math.floor(start*step),stop=Math.ceil(stop*step),ticks=new Array(n=Math.ceil(start-stop+1));++i<n;)ticks[i]=(start-i)/step;return reverse&&ticks.reverse(),ticks},exports.tickIncrement=tickIncrement,exports.tickStep=tickStep,exports.transpose=transpose,exports.variance=variance,exports.zip=function(){return transpose(arguments)},Object.defineProperty(exports,"__esModule",{value:!0})}(exports)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isCluster=function(c){var children=c.children;return children&&children.length>0},exports.isAggregateFlow=function(flow){var _a=flow,origin=_a.origin,dest=_a.dest,count=_a.count,aggregate=_a.aggregate;return void 0!==origin&&void 0!==dest&&void 0!==count&&!!aggregate}},,,function(module,exports,__webpack_require__){const preview=__webpack_require__(605);exports.setOptions=preview.setOptions,exports.withOptions=preview.withOptions,preview.init()},,function(module,exports,__webpack_require__){"use strict";__webpack_require__(232),__webpack_require__(403),__webpack_require__(474)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(404)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(405),__webpack_require__(406),__webpack_require__(407)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;
/*!
 * https://github.com/es-shims/es5-shim
 * @license es5-shim Copyright 2009-2015 by contributors, MIT License
 * see https://github.com/es-shims/es5-shim/blob/master/LICENSE
 */!function(root,factory){"use strict";void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=function(){var isRegex,isString,$Array=Array,ArrayPrototype=$Array.prototype,$Object=Object,ObjectPrototype=$Object.prototype,$Function=Function,FunctionPrototype=$Function.prototype,$String=String,StringPrototype=$String.prototype,$Number=Number,NumberPrototype=$Number.prototype,array_slice=ArrayPrototype.slice,array_splice=ArrayPrototype.splice,array_push=ArrayPrototype.push,array_unshift=ArrayPrototype.unshift,array_concat=ArrayPrototype.concat,array_join=ArrayPrototype.join,call=FunctionPrototype.call,apply=FunctionPrototype.apply,max=Math.max,min=Math.min,to_string=ObjectPrototype.toString,hasToStringTag="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,fnToStr=Function.prototype.toString,constructorRegex=/^\s*class /,isES6ClassFn=function(value){try{var fnStr=fnToStr.call(value),singleStripped=fnStr.replace(/\/\/.*\n/g,""),multiStripped=singleStripped.replace(/\/\*[.\s\S]*\*\//g,""),spaceStripped=multiStripped.replace(/\n/gm," ").replace(/ {2}/g," ");return constructorRegex.test(spaceStripped)}catch(e){return!1}},isCallable=function(value){if(!value)return!1;if("function"!=typeof value&&"object"!=typeof value)return!1;if(hasToStringTag)return function(value){try{return!isES6ClassFn(value)&&(fnToStr.call(value),!0)}catch(e){return!1}}(value);if(isES6ClassFn(value))return!1;var strClass=to_string.call(value);return"[object Function]"===strClass||"[object GeneratorFunction]"===strClass},regexExec=RegExp.prototype.exec;isRegex=function(value){return"object"==typeof value&&(hasToStringTag?function(value){try{return regexExec.call(value),!0}catch(e){return!1}}(value):"[object RegExp]"===to_string.call(value))};var strValue=String.prototype.valueOf;isString=function(value){return"string"==typeof value||"object"==typeof value&&(hasToStringTag?function(value){try{return strValue.call(value),!0}catch(e){return!1}}(value):"[object String]"===to_string.call(value))};var supportsDescriptors=$Object.defineProperty&&function(){try{var obj={};for(var _ in $Object.defineProperty(obj,"x",{enumerable:!1,value:obj}),obj)return!1;return obj.x===obj}catch(e){return!1}}(),defineProperties=(has=ObjectPrototype.hasOwnProperty,defineProperty=supportsDescriptors?function(object,name,method,forceAssign){!forceAssign&&name in object||$Object.defineProperty(object,name,{configurable:!0,enumerable:!1,writable:!0,value:method})}:function(object,name,method,forceAssign){!forceAssign&&name in object||(object[name]=method)},function(object,map,forceAssign){for(var name in map)has.call(map,name)&&defineProperty(object,name,map[name],forceAssign)}),isPrimitive=function(input){var type=typeof input;return null===input||"object"!==type&&"function"!==type},isActualNaN=$Number.isNaN||function(x){return x!=x},ES={ToInteger:function(num){var n=+num;return isActualNaN(n)?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n))),n},ToPrimitive:function(input){var val,valueOf,toStr;if(isPrimitive(input))return input;if(valueOf=input.valueOf,isCallable(valueOf)&&(val=valueOf.call(input),isPrimitive(val)))return val;if(toStr=input.toString,isCallable(toStr)&&(val=toStr.call(input),isPrimitive(val)))return val;throw new TypeError},ToObject:function(o){if(null==o)throw new TypeError("can't convert "+o+" to object");return $Object(o)},ToUint32:function(x){return x>>>0}},Empty=function(){};var has,defineProperty;defineProperties(FunctionPrototype,{bind:function(that){var target=this;if(!isCallable(target))throw new TypeError("Function.prototype.bind called on incompatible "+target);for(var bound,args=array_slice.call(arguments,1),boundLength=max(0,target.length-args.length),boundArgs=[],i=0;i<boundLength;i++)array_push.call(boundArgs,"$"+i);return bound=$Function("binder","return function ("+array_join.call(boundArgs,",")+"){ return binder.apply(this, arguments); }")(function(){if(this instanceof bound){var result=apply.call(target,this,array_concat.call(args,array_slice.call(arguments)));return $Object(result)===result?result:this}return apply.call(target,that,array_concat.call(args,array_slice.call(arguments)))}),target.prototype&&(Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null),bound}});var owns=call.bind(ObjectPrototype.hasOwnProperty),toStr=call.bind(ObjectPrototype.toString),arraySlice=call.bind(array_slice),arraySliceApply=apply.bind(array_slice);if("object"==typeof document&&document&&document.documentElement)try{arraySlice(document.documentElement.childNodes)}catch(e){var origArraySlice=arraySlice,origArraySliceApply=arraySliceApply;arraySlice=function(arr){for(var r=[],i=arr.length;i-- >0;)r[i]=arr[i];return origArraySliceApply(r,origArraySlice(arguments,1))},arraySliceApply=function(arr,args){return origArraySliceApply(arraySlice(arr),args)}}var strSlice=call.bind(StringPrototype.slice),strSplit=call.bind(StringPrototype.split),strIndexOf=call.bind(StringPrototype.indexOf),pushCall=call.bind(array_push),isEnum=call.bind(ObjectPrototype.propertyIsEnumerable),arraySort=call.bind(ArrayPrototype.sort),isArray=$Array.isArray||function(obj){return"[object Array]"===toStr(obj)},hasUnshiftReturnValueBug=1!==[].unshift(0);defineProperties(ArrayPrototype,{unshift:function(){return array_unshift.apply(this,arguments),this.length}},hasUnshiftReturnValueBug),defineProperties($Array,{isArray:isArray});var boxedString=$Object("a"),splitString="a"!==boxedString[0]||!(0 in boxedString),properlyBoxesContext=function(method){var properlyBoxesNonStrict=!0,properlyBoxesStrict=!0,threwException=!1;if(method)try{method.call("foo",function(_,__,context){"object"!=typeof context&&(properlyBoxesNonStrict=!1)}),method.call([1],function(){properlyBoxesStrict="string"==typeof this},"x")}catch(e){threwException=!0}return!!method&&!threwException&&properlyBoxesNonStrict&&properlyBoxesStrict};defineProperties(ArrayPrototype,{forEach:function(callbackfn){var T,object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,i=-1,length=ES.ToUint32(self.length);if(arguments.length>1&&(T=arguments[1]),!isCallable(callbackfn))throw new TypeError("Array.prototype.forEach callback must be a function");for(;++i<length;)i in self&&(void 0===T?callbackfn(self[i],i,object):callbackfn.call(T,self[i],i,object))}},!properlyBoxesContext(ArrayPrototype.forEach)),defineProperties(ArrayPrototype,{map:function(callbackfn){var T,object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length),result=$Array(length);if(arguments.length>1&&(T=arguments[1]),!isCallable(callbackfn))throw new TypeError("Array.prototype.map callback must be a function");for(var i=0;i<length;i++)i in self&&(result[i]=void 0===T?callbackfn(self[i],i,object):callbackfn.call(T,self[i],i,object));return result}},!properlyBoxesContext(ArrayPrototype.map)),defineProperties(ArrayPrototype,{filter:function(callbackfn){var value,T,object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length),result=[];if(arguments.length>1&&(T=arguments[1]),!isCallable(callbackfn))throw new TypeError("Array.prototype.filter callback must be a function");for(var i=0;i<length;i++)i in self&&(value=self[i],(void 0===T?callbackfn(value,i,object):callbackfn.call(T,value,i,object))&&pushCall(result,value));return result}},!properlyBoxesContext(ArrayPrototype.filter)),defineProperties(ArrayPrototype,{every:function(callbackfn){var T,object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length);if(arguments.length>1&&(T=arguments[1]),!isCallable(callbackfn))throw new TypeError("Array.prototype.every callback must be a function");for(var i=0;i<length;i++)if(i in self&&!(void 0===T?callbackfn(self[i],i,object):callbackfn.call(T,self[i],i,object)))return!1;return!0}},!properlyBoxesContext(ArrayPrototype.every)),defineProperties(ArrayPrototype,{some:function(callbackfn){var T,object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length);if(arguments.length>1&&(T=arguments[1]),!isCallable(callbackfn))throw new TypeError("Array.prototype.some callback must be a function");for(var i=0;i<length;i++)if(i in self&&(void 0===T?callbackfn(self[i],i,object):callbackfn.call(T,self[i],i,object)))return!0;return!1}},!properlyBoxesContext(ArrayPrototype.some));var reduceCoercesToObject=!1;ArrayPrototype.reduce&&(reduceCoercesToObject="object"==typeof ArrayPrototype.reduce.call("es5",function(_,__,___,list){return list}));defineProperties(ArrayPrototype,{reduce:function(callbackfn){var object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length);if(!isCallable(callbackfn))throw new TypeError("Array.prototype.reduce callback must be a function");if(0===length&&1===arguments.length)throw new TypeError("reduce of empty array with no initial value");var result,i=0;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i++];break}if(++i>=length)throw new TypeError("reduce of empty array with no initial value")}for(;i<length;i++)i in self&&(result=callbackfn(result,self[i],i,object));return result}},!reduceCoercesToObject);var reduceRightCoercesToObject=!1;ArrayPrototype.reduceRight&&(reduceRightCoercesToObject="object"==typeof ArrayPrototype.reduceRight.call("es5",function(_,__,___,list){return list}));defineProperties(ArrayPrototype,{reduceRight:function(callbackfn){var result,object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length);if(!isCallable(callbackfn))throw new TypeError("Array.prototype.reduceRight callback must be a function");if(0===length&&1===arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var i=length-1;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i--];break}if(--i<0)throw new TypeError("reduceRight of empty array with no initial value")}if(i<0)return result;do{i in self&&(result=callbackfn(result,self[i],i,object))}while(i--);return result}},!reduceRightCoercesToObject);var hasFirefox2IndexOfBug=ArrayPrototype.indexOf&&-1!==[0,1].indexOf(1,2);defineProperties(ArrayPrototype,{indexOf:function(searchElement){var self=splitString&&isString(this)?strSplit(this,""):ES.ToObject(this),length=ES.ToUint32(self.length);if(0===length)return-1;var i=0;for(arguments.length>1&&(i=ES.ToInteger(arguments[1])),i=i>=0?i:max(0,length+i);i<length;i++)if(i in self&&self[i]===searchElement)return i;return-1}},hasFirefox2IndexOfBug);var hasFirefox2LastIndexOfBug=ArrayPrototype.lastIndexOf&&-1!==[0,1].lastIndexOf(0,-3);defineProperties(ArrayPrototype,{lastIndexOf:function(searchElement){var self=splitString&&isString(this)?strSplit(this,""):ES.ToObject(this),length=ES.ToUint32(self.length);if(0===length)return-1;var i=length-1;for(arguments.length>1&&(i=min(i,ES.ToInteger(arguments[1]))),i=i>=0?i:length-Math.abs(i);i>=0;i--)if(i in self&&searchElement===self[i])return i;return-1}},hasFirefox2LastIndexOfBug);var spliceNoopReturnsEmptyArray=(a=[1,2],result=a.splice(),2===a.length&&isArray(result)&&0===result.length);var a,result;defineProperties(ArrayPrototype,{splice:function(start,deleteCount){return 0===arguments.length?[]:array_splice.apply(this,arguments)}},!spliceNoopReturnsEmptyArray);var spliceWorksWithEmptyObject=(obj={},ArrayPrototype.splice.call(obj,0,0,1),1===obj.length);var obj;defineProperties(ArrayPrototype,{splice:function(start,deleteCount){if(0===arguments.length)return[];var args=arguments;return this.length=max(ES.ToInteger(this.length),0),arguments.length>0&&"number"!=typeof deleteCount&&((args=arraySlice(arguments)).length<2?pushCall(args,this.length-start):args[1]=ES.ToInteger(deleteCount)),array_splice.apply(this,args)}},!spliceWorksWithEmptyObject);var spliceWorksWithLargeSparseArrays=(arr=new $Array(1e5),arr[8]="x",arr.splice(1,1),7===arr.indexOf("x")),spliceWorksWithSmallSparseArrays=function(){var arr=[];return arr[256]="a",arr.splice(257,0,"b"),"a"===arr[256]}();var arr;defineProperties(ArrayPrototype,{splice:function(start,deleteCount){for(var from,O=ES.ToObject(this),A=[],len=ES.ToUint32(O.length),relativeStart=ES.ToInteger(start),actualStart=relativeStart<0?max(len+relativeStart,0):min(relativeStart,len),actualDeleteCount=min(max(ES.ToInteger(deleteCount),0),len-actualStart),k=0;k<actualDeleteCount;)from=$String(actualStart+k),owns(O,from)&&(A[k]=O[from]),k+=1;var to,items=arraySlice(arguments,2),itemCount=items.length;if(itemCount<actualDeleteCount){k=actualStart;for(var maxK=len-actualDeleteCount;k<maxK;)from=$String(k+actualDeleteCount),to=$String(k+itemCount),owns(O,from)?O[to]=O[from]:delete O[to],k+=1;k=len;for(var minK=len-actualDeleteCount+itemCount;k>minK;)delete O[k-1],k-=1}else if(itemCount>actualDeleteCount)for(k=len-actualDeleteCount;k>actualStart;)from=$String(k+actualDeleteCount-1),to=$String(k+itemCount-1),owns(O,from)?O[to]=O[from]:delete O[to],k-=1;k=actualStart;for(var i=0;i<items.length;++i)O[k]=items[i],k+=1;return O.length=len-actualDeleteCount+itemCount,A}},!spliceWorksWithLargeSparseArrays||!spliceWorksWithSmallSparseArrays);var hasStringJoinBug,originalJoin=ArrayPrototype.join;try{hasStringJoinBug="1,2,3"!==Array.prototype.join.call("123",",")}catch(e){hasStringJoinBug=!0}hasStringJoinBug&&defineProperties(ArrayPrototype,{join:function(separator){var sep=void 0===separator?",":separator;return originalJoin.call(isString(this)?strSplit(this,""):this,sep)}},hasStringJoinBug);var hasJoinUndefinedBug="1,2"!==[1,2].join(void 0);hasJoinUndefinedBug&&defineProperties(ArrayPrototype,{join:function(separator){var sep=void 0===separator?",":separator;return originalJoin.call(this,sep)}},hasJoinUndefinedBug);var pushShim=function(item){for(var O=ES.ToObject(this),n=ES.ToUint32(O.length),i=0;i<arguments.length;)O[n+i]=arguments[i],i+=1;return O.length=n+i,n+i},pushIsNotGeneric=function(){var obj={},result=Array.prototype.push.call(obj,void 0);return 1!==result||1!==obj.length||void 0!==obj[0]||!owns(obj,0)}();defineProperties(ArrayPrototype,{push:function(item){return isArray(this)?array_push.apply(this,arguments):pushShim.apply(this,arguments)}},pushIsNotGeneric);var pushUndefinedIsWeird=function(){var arr=[],result=arr.push(void 0);return 1!==result||1!==arr.length||void 0!==arr[0]||!owns(arr,0)}();defineProperties(ArrayPrototype,{push:pushShim},pushUndefinedIsWeird),defineProperties(ArrayPrototype,{slice:function(start,end){var arr=isString(this)?strSplit(this,""):this;return arraySliceApply(arr,arguments)}},splitString);var sortIgnoresNonFunctions=function(){try{[1,2].sort(null)}catch(e){try{[1,2].sort({})}catch(e2){return!1}}return!0}(),sortThrowsOnRegex=function(){try{return[1,2].sort(/a/),!1}catch(e){}return!0}(),sortIgnoresUndefined=function(){try{return[1,2].sort(void 0),!0}catch(e){}return!1}();defineProperties(ArrayPrototype,{sort:function(compareFn){if(void 0===compareFn)return arraySort(this);if(!isCallable(compareFn))throw new TypeError("Array.prototype.sort callback must be a function");return arraySort(this,compareFn)}},sortIgnoresNonFunctions||!sortIgnoresUndefined||!sortThrowsOnRegex);var hasDontEnumBug=!isEnum({toString:null},"toString"),hasProtoEnumBug=isEnum(function(){},"prototype"),hasStringEnumBug=!owns("x","0"),equalsConstructorPrototype=function(o){var ctor=o.constructor;return ctor&&ctor.prototype===o},excludedKeys={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0,$width:!0,$height:!0,$top:!0,$localStorage:!0},hasAutomationEqualityBug=function(){if("undefined"==typeof window)return!1;for(var k in window)try{!excludedKeys["$"+k]&&owns(window,k)&&null!==window[k]&&"object"==typeof window[k]&&equalsConstructorPrototype(window[k])}catch(e){return!0}return!1}(),dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length,isStandardArguments=function(value){return"[object Arguments]"===toStr(value)},isArguments=isStandardArguments(arguments)?isStandardArguments:function(value){return null!==value&&"object"==typeof value&&"number"==typeof value.length&&value.length>=0&&!isArray(value)&&isCallable(value.callee)};defineProperties($Object,{keys:function(object){var isFn=isCallable(object),isArgs=isArguments(object),isObject=null!==object&&"object"==typeof object,isStr=isObject&&isString(object);if(!isObject&&!isFn&&!isArgs)throw new TypeError("Object.keys called on a non-object");var theKeys=[],skipProto=hasProtoEnumBug&&isFn;if(isStr&&hasStringEnumBug||isArgs)for(var i=0;i<object.length;++i)pushCall(theKeys,$String(i));if(!isArgs)for(var name in object)skipProto&&"prototype"===name||!owns(object,name)||pushCall(theKeys,$String(name));if(hasDontEnumBug)for(var skipConstructor=function(object){if("undefined"==typeof window||!hasAutomationEqualityBug)return equalsConstructorPrototype(object);try{return equalsConstructorPrototype(object)}catch(e){return!1}}(object),j=0;j<dontEnumsLength;j++){var dontEnum=dontEnums[j];skipConstructor&&"constructor"===dontEnum||!owns(object,dontEnum)||pushCall(theKeys,dontEnum)}return theKeys}});var keysWorksWithArguments=$Object.keys&&function(){return 2===$Object.keys(arguments).length}(1,2),keysHasArgumentsLengthBug=$Object.keys&&function(){var argKeys=$Object.keys(arguments);return 1!==arguments.length||1!==argKeys.length||1!==argKeys[0]}(1),originalKeys=$Object.keys;defineProperties($Object,{keys:function(object){return isArguments(object)?originalKeys(arraySlice(object)):originalKeys(object)}},!keysWorksWithArguments||keysHasArgumentsLengthBug);var hasToDateStringFormatBug,hasToStringFormatBug,hasNegativeMonthYearBug=0!==new Date(-0xc782b5b342b24).getUTCMonth(),aNegativeTestDate=new Date(-0x55d318d56a724),aPositiveTestDate=new Date(14496624e5),hasToUTCStringFormatBug="Mon, 01 Jan -45875 11:59:59 GMT"!==aNegativeTestDate.toUTCString();aNegativeTestDate.getTimezoneOffset()<-720?(hasToDateStringFormatBug="Tue Jan 02 -45875"!==aNegativeTestDate.toDateString(),hasToStringFormatBug=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(aPositiveTestDate))):(hasToDateStringFormatBug="Mon Jan 01 -45875"!==aNegativeTestDate.toDateString(),hasToStringFormatBug=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(aPositiveTestDate)));var originalGetFullYear=call.bind(Date.prototype.getFullYear),originalGetMonth=call.bind(Date.prototype.getMonth),originalGetDate=call.bind(Date.prototype.getDate),originalGetUTCFullYear=call.bind(Date.prototype.getUTCFullYear),originalGetUTCMonth=call.bind(Date.prototype.getUTCMonth),originalGetUTCDate=call.bind(Date.prototype.getUTCDate),originalGetUTCDay=call.bind(Date.prototype.getUTCDay),originalGetUTCHours=call.bind(Date.prototype.getUTCHours),originalGetUTCMinutes=call.bind(Date.prototype.getUTCMinutes),originalGetUTCSeconds=call.bind(Date.prototype.getUTCSeconds),originalGetUTCMilliseconds=call.bind(Date.prototype.getUTCMilliseconds),dayName=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthName=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],daysInMonth=function(month,year){return originalGetDate(new Date(year,month,0))};defineProperties(Date.prototype,{getFullYear:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetFullYear(this);return year<0&&originalGetMonth(this)>11?year+1:year},getMonth:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetFullYear(this),month=originalGetMonth(this);return year<0&&month>11?0:month},getDate:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetFullYear(this),month=originalGetMonth(this),date=originalGetDate(this);return year<0&&month>11?12===month?date:daysInMonth(0,year+1)-date+1:date},getUTCFullYear:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetUTCFullYear(this);return year<0&&originalGetUTCMonth(this)>11?year+1:year},getUTCMonth:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetUTCFullYear(this),month=originalGetUTCMonth(this);return year<0&&month>11?0:month},getUTCDate:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetUTCFullYear(this),month=originalGetUTCMonth(this),date=originalGetUTCDate(this);return year<0&&month>11?12===month?date:daysInMonth(0,year+1)-date+1:date}},hasNegativeMonthYearBug),defineProperties(Date.prototype,{toUTCString:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var day=originalGetUTCDay(this),date=originalGetUTCDate(this),month=originalGetUTCMonth(this),year=originalGetUTCFullYear(this),hour=originalGetUTCHours(this),minute=originalGetUTCMinutes(this),second=originalGetUTCSeconds(this);return dayName[day]+", "+(date<10?"0"+date:date)+" "+monthName[month]+" "+year+" "+(hour<10?"0"+hour:hour)+":"+(minute<10?"0"+minute:minute)+":"+(second<10?"0"+second:second)+" GMT"}},hasNegativeMonthYearBug||hasToUTCStringFormatBug),defineProperties(Date.prototype,{toDateString:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var day=this.getDay(),date=this.getDate(),month=this.getMonth(),year=this.getFullYear();return dayName[day]+" "+monthName[month]+" "+(date<10?"0"+date:date)+" "+year}},hasNegativeMonthYearBug||hasToDateStringFormatBug),(hasNegativeMonthYearBug||hasToStringFormatBug)&&(Date.prototype.toString=function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var day=this.getDay(),date=this.getDate(),month=this.getMonth(),year=this.getFullYear(),hour=this.getHours(),minute=this.getMinutes(),second=this.getSeconds(),timezoneOffset=this.getTimezoneOffset(),hoursOffset=Math.floor(Math.abs(timezoneOffset)/60),minutesOffset=Math.floor(Math.abs(timezoneOffset)%60);return dayName[day]+" "+monthName[month]+" "+(date<10?"0"+date:date)+" "+year+" "+(hour<10?"0"+hour:hour)+":"+(minute<10?"0"+minute:minute)+":"+(second<10?"0"+second:second)+" GMT"+(timezoneOffset>0?"-":"+")+(hoursOffset<10?"0"+hoursOffset:hoursOffset)+(minutesOffset<10?"0"+minutesOffset:minutesOffset)},supportsDescriptors&&$Object.defineProperty(Date.prototype,"toString",{configurable:!0,enumerable:!1,writable:!0}));var hasNegativeDateBug=Date.prototype.toISOString&&-1===new Date(-621987552e5).toISOString().indexOf("-000001"),hasSafari51DateBug=Date.prototype.toISOString&&"1969-12-31T23:59:59.999Z"!==new Date(-1).toISOString(),getTime=call.bind(Date.prototype.getTime);defineProperties(Date.prototype,{toISOString:function(){if(!isFinite(this)||!isFinite(getTime(this)))throw new RangeError("Date.prototype.toISOString called on non-finite value.");var year=originalGetUTCFullYear(this),month=originalGetUTCMonth(this);year+=Math.floor(month/12);var result=[1+(month=(month%12+12)%12),originalGetUTCDate(this),originalGetUTCHours(this),originalGetUTCMinutes(this),originalGetUTCSeconds(this)];year=(year<0?"-":year>9999?"+":"")+strSlice("00000"+Math.abs(year),0<=year&&year<=9999?-4:-6);for(var i=0;i<result.length;++i)result[i]=strSlice("00"+result[i],-2);return year+"-"+arraySlice(result,0,2).join("-")+"T"+arraySlice(result,2).join(":")+"."+strSlice("000"+originalGetUTCMilliseconds(this),-3)+"Z"}},hasNegativeDateBug||hasSafari51DateBug),function(){try{return Date.prototype.toJSON&&null===new Date(NaN).toJSON()&&-1!==new Date(-621987552e5).toJSON().indexOf("-000001")&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(e){return!1}}()||(Date.prototype.toJSON=function(key){var O=$Object(this),tv=ES.ToPrimitive(O);if("number"==typeof tv&&!isFinite(tv))return null;var toISO=O.toISOString;if(!isCallable(toISO))throw new TypeError("toISOString property is not callable");return toISO.call(O)});var supportsExtendedYears=1e15===Date.parse("+033658-09-27T01:46:40.000Z"),acceptsInvalidDates=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z"));if(isNaN(Date.parse("2000-01-01T00:00:00.000Z"))||acceptsInvalidDates||!supportsExtendedYears){var maxSafeUnsigned32Bit=Math.pow(2,31)-1,hasSafariSignedIntBug=isActualNaN(new Date(1970,0,1,0,0,0,maxSafeUnsigned32Bit+1).getTime());Date=function(NativeDate){var DateShim=function(Y,M,D,h,m,s,ms){var date,length=arguments.length;if(this instanceof NativeDate){var seconds=s,millis=ms;if(hasSafariSignedIntBug&&length>=7&&ms>maxSafeUnsigned32Bit){var msToShift=Math.floor(ms/maxSafeUnsigned32Bit)*maxSafeUnsigned32Bit,sToShift=Math.floor(msToShift/1e3);seconds+=sToShift,millis-=1e3*sToShift}date=1===length&&$String(Y)===Y?new NativeDate(DateShim.parse(Y)):length>=7?new NativeDate(Y,M,D,h,m,seconds,millis):length>=6?new NativeDate(Y,M,D,h,m,seconds):length>=5?new NativeDate(Y,M,D,h,m):length>=4?new NativeDate(Y,M,D,h):length>=3?new NativeDate(Y,M,D):length>=2?new NativeDate(Y,M):length>=1?new NativeDate(Y instanceof NativeDate?+Y:Y):new NativeDate}else date=NativeDate.apply(this,arguments);return isPrimitive(date)||defineProperties(date,{constructor:DateShim},!0),date},isoDateExpression=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),months=[0,31,59,90,120,151,181,212,243,273,304,334,365],dayFromMonth=function(year,month){var t=month>1?1:0;return months[month]+Math.floor((year-1969+t)/4)-Math.floor((year-1901+t)/100)+Math.floor((year-1601+t)/400)+365*(year-1970)};for(var key in NativeDate)owns(NativeDate,key)&&(DateShim[key]=NativeDate[key]);defineProperties(DateShim,{now:NativeDate.now,UTC:NativeDate.UTC},!0),DateShim.prototype=NativeDate.prototype,defineProperties(DateShim.prototype,{constructor:DateShim},!0);return defineProperties(DateShim,{parse:function(string){var match=isoDateExpression.exec(string);if(match){var result,year=$Number(match[1]),month=$Number(match[2]||1)-1,day=$Number(match[3]||1)-1,hour=$Number(match[4]||0),minute=$Number(match[5]||0),second=$Number(match[6]||0),millisecond=Math.floor(1e3*$Number(match[7]||0)),isLocalTime=Boolean(match[4]&&!match[8]),signOffset="-"===match[9]?1:-1,hourOffset=$Number(match[10]||0),minuteOffset=$Number(match[11]||0),hasMinutesOrSecondsOrMilliseconds=minute>0||second>0||millisecond>0;return hour<(hasMinutesOrSecondsOrMilliseconds?24:25)&&minute<60&&second<60&&millisecond<1e3&&month>-1&&month<12&&hourOffset<24&&minuteOffset<60&&day>-1&&day<dayFromMonth(year,month+1)-dayFromMonth(year,month)&&(result=1e3*(60*((result=60*(24*(dayFromMonth(year,month)+day)+hour+hourOffset*signOffset))+minute+minuteOffset*signOffset)+second)+millisecond,isLocalTime&&(result=function(t){var s=0,ms=t;if(hasSafariSignedIntBug&&ms>maxSafeUnsigned32Bit){var msToShift=Math.floor(ms/maxSafeUnsigned32Bit)*maxSafeUnsigned32Bit,sToShift=Math.floor(msToShift/1e3);s+=sToShift,ms-=1e3*sToShift}return $Number(new NativeDate(1970,0,1,0,0,s,ms))}(result)),-864e13<=result&&result<=864e13)?result:NaN}return NativeDate.parse.apply(this,arguments)}}),DateShim}(Date)}Date.now||(Date.now=function(){return(new Date).getTime()});var hasToFixedBugs=NumberPrototype.toFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0)),toFixedHelpers={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function(n,c){for(var i=-1,c2=c;++i<toFixedHelpers.size;)c2+=n*toFixedHelpers.data[i],toFixedHelpers.data[i]=c2%toFixedHelpers.base,c2=Math.floor(c2/toFixedHelpers.base)},divide:function(n){for(var i=toFixedHelpers.size,c=0;--i>=0;)c+=toFixedHelpers.data[i],toFixedHelpers.data[i]=Math.floor(c/n),c=c%n*toFixedHelpers.base},numToString:function(){for(var i=toFixedHelpers.size,s="";--i>=0;)if(""!==s||0===i||0!==toFixedHelpers.data[i]){var t=$String(toFixedHelpers.data[i]);""===s?s=t:s+=strSlice("0000000",0,7-t.length)+t}return s},pow:function pow(x,n,acc){return 0===n?acc:n%2==1?pow(x,n-1,acc*x):pow(x*x,n/2,acc)},log:function(x){for(var n=0,x2=x;x2>=4096;)n+=12,x2/=4096;for(;x2>=2;)n+=1,x2/=2;return n}};defineProperties(NumberPrototype,{toFixed:function(fractionDigits){var f,x,s,m,e,z,j,k;if(f=$Number(fractionDigits),(f=isActualNaN(f)?0:Math.floor(f))<0||f>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(x=$Number(this),isActualNaN(x))return"NaN";if(x<=-1e21||x>=1e21)return $String(x);if(s="",x<0&&(s="-",x=-x),m="0",x>1e-21)if(e=toFixedHelpers.log(x*toFixedHelpers.pow(2,69,1))-69,z=e<0?x*toFixedHelpers.pow(2,-e,1):x/toFixedHelpers.pow(2,e,1),z*=4503599627370496,(e=52-e)>0){for(toFixedHelpers.multiply(0,z),j=f;j>=7;)toFixedHelpers.multiply(1e7,0),j-=7;for(toFixedHelpers.multiply(toFixedHelpers.pow(10,j,1),0),j=e-1;j>=23;)toFixedHelpers.divide(1<<23),j-=23;toFixedHelpers.divide(1<<j),toFixedHelpers.multiply(1,1),toFixedHelpers.divide(2),m=toFixedHelpers.numToString()}else toFixedHelpers.multiply(0,z),toFixedHelpers.multiply(1<<-e,0),m=toFixedHelpers.numToString()+strSlice("0.00000000000000000000",2,2+f);return f>0?(k=m.length,m=k<=f?s+strSlice("0.0000000000000000000",0,f-k+2)+m:s+strSlice(m,0,k-f)+"."+strSlice(m,k-f)):m=s+m,m}},hasToFixedBugs);var hasToPrecisionUndefinedBug=function(){try{return"1"===1..toPrecision(void 0)}catch(e){return!0}}(),originalToPrecision=NumberPrototype.toPrecision;defineProperties(NumberPrototype,{toPrecision:function(precision){return void 0===precision?originalToPrecision.call(this):originalToPrecision.call(this,precision)}},hasToPrecisionUndefinedBug),2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?(compliantExecNpcg=void 0===/()??/.exec("")[1],maxSafe32BitInt=Math.pow(2,32)-1,StringPrototype.split=function(separator,limit){var string=String(this);if(void 0===separator&&0===limit)return[];if(!isRegex(separator))return strSplit(this,separator,limit);var separator2,match,lastIndex,lastLength,output=[],flags=(separator.ignoreCase?"i":"")+(separator.multiline?"m":"")+(separator.unicode?"u":"")+(separator.sticky?"y":""),lastLastIndex=0,separatorCopy=new RegExp(separator.source,flags+"g");compliantExecNpcg||(separator2=new RegExp("^"+separatorCopy.source+"$(?!\\s)",flags));var splitLimit=void 0===limit?maxSafe32BitInt:ES.ToUint32(limit);for(match=separatorCopy.exec(string);match&&!((lastIndex=match.index+match[0].length)>lastLastIndex&&(pushCall(output,strSlice(string,lastLastIndex,match.index)),!compliantExecNpcg&&match.length>1&&match[0].replace(separator2,function(){for(var i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(match[i]=void 0)}),match.length>1&&match.index<string.length&&array_push.apply(output,arraySlice(match,1)),lastLength=match[0].length,lastLastIndex=lastIndex,output.length>=splitLimit));)separatorCopy.lastIndex===match.index&&separatorCopy.lastIndex++,match=separatorCopy.exec(string);return lastLastIndex===string.length?!lastLength&&separatorCopy.test("")||pushCall(output,""):pushCall(output,strSlice(string,lastLastIndex)),output.length>splitLimit?arraySlice(output,0,splitLimit):output}):"0".split(void 0,0).length&&(StringPrototype.split=function(separator,limit){return void 0===separator&&0===limit?[]:strSplit(this,separator,limit)});var compliantExecNpcg,maxSafe32BitInt;var str_replace=StringPrototype.replace;groups=[],"x".replace(/x(.)?/g,function(match,group){pushCall(groups,group)}),(1!==groups.length||void 0!==groups[0])&&(StringPrototype.replace=function(searchValue,replaceValue){var isFn=isCallable(replaceValue),hasCapturingGroups=isRegex(searchValue)&&/\)[*?]/.test(searchValue.source);if(isFn&&hasCapturingGroups){return str_replace.call(this,searchValue,function(match){var length=arguments.length,originalLastIndex=searchValue.lastIndex;searchValue.lastIndex=0;var args=searchValue.exec(match)||[];return searchValue.lastIndex=originalLastIndex,pushCall(args,arguments[length-2],arguments[length-1]),replaceValue.apply(this,args)})}return str_replace.call(this,searchValue,replaceValue)});var groups;var string_substr=StringPrototype.substr,hasNegativeSubstrBug="".substr&&"b"!=="0b".substr(-1);defineProperties(StringPrototype,{substr:function(start,length){var normalizedStart=start;return start<0&&(normalizedStart=max(this.length+start,0)),string_substr.call(this,normalizedStart,length)}},hasNegativeSubstrBug);var ws="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",wsRegexChars="["+ws+"]",trimBeginRegexp=new RegExp("^"+wsRegexChars+wsRegexChars+"*"),trimEndRegexp=new RegExp(wsRegexChars+wsRegexChars+"*$"),hasTrimWhitespaceBug=StringPrototype.trim&&(ws.trim()||!"​".trim());defineProperties(StringPrototype,{trim:function(){if(null==this)throw new TypeError("can't convert "+this+" to object");return $String(this).replace(trimBeginRegexp,"").replace(trimEndRegexp,"")}},hasTrimWhitespaceBug);var trim=call.bind(String.prototype.trim),hasLastIndexBug=StringPrototype.lastIndexOf&&-1!=="abcあい".lastIndexOf("あい",2);defineProperties(StringPrototype,{lastIndexOf:function(searchString){if(null==this)throw new TypeError("can't convert "+this+" to object");for(var S=$String(this),searchStr=$String(searchString),numPos=arguments.length>1?$Number(arguments[1]):NaN,pos=isActualNaN(numPos)?1/0:ES.ToInteger(numPos),start=min(max(pos,0),S.length),searchLen=searchStr.length,k=start+searchLen;k>0;){k=max(0,k-searchLen);var index=strIndexOf(strSlice(S,k,start+searchLen),searchStr);if(-1!==index)return k+index}return-1}},hasLastIndexBug);var originalLastIndexOf=StringPrototype.lastIndexOf;defineProperties(StringPrototype,{lastIndexOf:function(searchString){return originalLastIndexOf.apply(this,arguments)}},1!==StringPrototype.lastIndexOf.length),(8!==parseInt(ws+"08")||22!==parseInt(ws+"0x16"))&&(parseInt=(origParseInt=parseInt,hexRegex=/^[-+]?0[xX]/,function(str,radix){var string=trim(String(str)),defaultedRadix=$Number(radix)||(hexRegex.test(string)?16:10);return origParseInt(string,defaultedRadix)}));var origParseInt,hexRegex;1/parseFloat("-0")!=-1/0&&(parseFloat=(origParseFloat=parseFloat,function(string){var inputString=trim(String(string)),result=origParseFloat(inputString);return 0===result&&"-"===strSlice(inputString,0,1)?-0:result}));var origParseFloat;if("RangeError: test"!==String(new RangeError("test"))){Error.prototype.toString=function(){if(null==this)throw new TypeError("can't convert "+this+" to object");var name=this.name;void 0===name?name="Error":"string"!=typeof name&&(name=$String(name));var msg=this.message;void 0===msg?msg="":"string"!=typeof msg&&(msg=$String(msg));if(!name)return msg;if(!msg)return name;return name+": "+msg}}if(supportsDescriptors){var ensureNonEnumerable=function(obj,prop){if(isEnum(obj,prop)){var desc=Object.getOwnPropertyDescriptor(obj,prop);desc.configurable&&(desc.enumerable=!1,Object.defineProperty(obj,prop,desc))}};ensureNonEnumerable(Error.prototype,"message"),""!==Error.prototype.message&&(Error.prototype.message=""),ensureNonEnumerable(Error.prototype,"name")}if("/a/gim"!==String(/a/gim)){RegExp.prototype.toString=function(){var str="/"+this.source+"/";this.global&&(str+="g");this.ignoreCase&&(str+="i");this.multiline&&(str+="m");return str}}})?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;
/*!
 * https://github.com/es-shims/es5-shim
 * @license es5-shim Copyright 2009-2015 by contributors, MIT License
 * see https://github.com/es-shims/es5-shim/blob/master/LICENSE
 */!function(root,factory){"use strict";void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=function(){var defineGetter,defineSetter,lookupGetter,lookupSetter,call=Function.call,prototypeOfObject=Object.prototype,owns=call.bind(prototypeOfObject.hasOwnProperty),isEnumerable=call.bind(prototypeOfObject.propertyIsEnumerable),toStr=call.bind(prototypeOfObject.toString),supportsAccessors=owns(prototypeOfObject,"__defineGetter__");supportsAccessors&&(defineGetter=call.bind(prototypeOfObject.__defineGetter__),defineSetter=call.bind(prototypeOfObject.__defineSetter__),lookupGetter=call.bind(prototypeOfObject.__lookupGetter__),lookupSetter=call.bind(prototypeOfObject.__lookupSetter__));var isPrimitive=function(o){return null==o||"object"!=typeof o&&"function"!=typeof o};Object.getPrototypeOf||(Object.getPrototypeOf=function(object){var proto=object.__proto__;return proto||null===proto?proto:"[object Function]"===toStr(object.constructor)?object.constructor.prototype:object instanceof Object?prototypeOfObject:null});var doesGetOwnPropertyDescriptorWork=function(object){try{return object.sentinel=0,0===Object.getOwnPropertyDescriptor(object,"sentinel").value}catch(exception){return!1}};if(Object.defineProperty){var getOwnPropertyDescriptorWorksOnObject=doesGetOwnPropertyDescriptorWork({}),getOwnPropertyDescriptorWorksOnDom="undefined"==typeof document||doesGetOwnPropertyDescriptorWork(document.createElement("div"));if(!getOwnPropertyDescriptorWorksOnDom||!getOwnPropertyDescriptorWorksOnObject)var getOwnPropertyDescriptorFallback=Object.getOwnPropertyDescriptor}if(!Object.getOwnPropertyDescriptor||getOwnPropertyDescriptorFallback){Object.getOwnPropertyDescriptor=function(object,property){if(isPrimitive(object))throw new TypeError("Object.getOwnPropertyDescriptor called on a non-object: "+object);if(getOwnPropertyDescriptorFallback)try{return getOwnPropertyDescriptorFallback.call(Object,object,property)}catch(exception){}var descriptor;if(!owns(object,property))return descriptor;if(descriptor={enumerable:isEnumerable(object,property),configurable:!0},supportsAccessors){var prototype=object.__proto__,notPrototypeOfObject=object!==prototypeOfObject;notPrototypeOfObject&&(object.__proto__=prototypeOfObject);var getter=lookupGetter(object,property),setter=lookupSetter(object,property);if(notPrototypeOfObject&&(object.__proto__=prototype),getter||setter)return getter&&(descriptor.get=getter),setter&&(descriptor.set=setter),descriptor}return descriptor.value=object[property],descriptor.writable=!0,descriptor}}Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(object){return Object.keys(object)});if(!Object.create){var createEmpty,supportsProto=!({__proto__:null}instanceof Object);createEmpty=supportsProto||"undefined"==typeof document?function(){return{__proto__:null}}:function(){var empty=function(){if(!document.domain)return!1;try{return!!new ActiveXObject("htmlfile")}catch(exception){return!1}}()?function(){var empty,xDoc;xDoc=new ActiveXObject("htmlfile");return xDoc.write("<script><\/script>"),xDoc.close(),empty=xDoc.parentWindow.Object.prototype,xDoc=null,empty}():function(){var empty,iframe=document.createElement("iframe"),parent=document.body||document.documentElement;return iframe.style.display="none",parent.appendChild(iframe),iframe.src="javascript:",empty=iframe.contentWindow.Object.prototype,parent.removeChild(iframe),iframe=null,empty}();delete empty.constructor,delete empty.hasOwnProperty,delete empty.propertyIsEnumerable,delete empty.isPrototypeOf,delete empty.toLocaleString,delete empty.toString,delete empty.valueOf;var Empty=function(){};return Empty.prototype=empty,createEmpty=function(){return new Empty},new Empty},Object.create=function(prototype,properties){var object,Type=function(){};if(null===prototype)object=createEmpty();else{if(null!==prototype&&isPrimitive(prototype))throw new TypeError("Object prototype may only be an Object or null");Type.prototype=prototype,(object=new Type).__proto__=prototype}return void 0!==properties&&Object.defineProperties(object,properties),object}}var doesDefinePropertyWork=function(object){try{return Object.defineProperty(object,"sentinel",{}),"sentinel"in object}catch(exception){return!1}};if(Object.defineProperty){var definePropertyWorksOnObject=doesDefinePropertyWork({}),definePropertyWorksOnDom="undefined"==typeof document||doesDefinePropertyWork(document.createElement("div"));if(!definePropertyWorksOnObject||!definePropertyWorksOnDom)var definePropertyFallback=Object.defineProperty,definePropertiesFallback=Object.defineProperties}if(!Object.defineProperty||definePropertyFallback){Object.defineProperty=function(object,property,descriptor){if(isPrimitive(object))throw new TypeError("Object.defineProperty called on non-object: "+object);if(isPrimitive(descriptor))throw new TypeError("Property description must be an object: "+descriptor);if(definePropertyFallback)try{return definePropertyFallback.call(Object,object,property,descriptor)}catch(exception){}if("value"in descriptor)if(supportsAccessors&&(lookupGetter(object,property)||lookupSetter(object,property))){var prototype=object.__proto__;object.__proto__=prototypeOfObject,delete object[property],object[property]=descriptor.value,object.__proto__=prototype}else object[property]=descriptor.value;else{var hasGetter="get"in descriptor,hasSetter="set"in descriptor;if(!supportsAccessors&&(hasGetter||hasSetter))throw new TypeError("getters & setters can not be defined on this javascript engine");hasGetter&&defineGetter(object,property,descriptor.get),hasSetter&&defineSetter(object,property,descriptor.set)}return object}}Object.defineProperties&&!definePropertiesFallback||(Object.defineProperties=function(object,properties){if(definePropertiesFallback)try{return definePropertiesFallback.call(Object,object,properties)}catch(exception){}return Object.keys(properties).forEach(function(property){"__proto__"!==property&&Object.defineProperty(object,property,properties[property])}),object});Object.seal||(Object.seal=function(object){if(Object(object)!==object)throw new TypeError("Object.seal can only be called on Objects.");return object});Object.freeze||(Object.freeze=function(object){if(Object(object)!==object)throw new TypeError("Object.freeze can only be called on Objects.");return object});try{Object.freeze(function(){})}catch(exception){Object.freeze=(freezeObject=Object.freeze,function(object){return"function"==typeof object?object:freezeObject(object)})}var freezeObject;Object.preventExtensions||(Object.preventExtensions=function(object){if(Object(object)!==object)throw new TypeError("Object.preventExtensions can only be called on Objects.");return object});Object.isSealed||(Object.isSealed=function(object){if(Object(object)!==object)throw new TypeError("Object.isSealed can only be called on Objects.");return!1});Object.isFrozen||(Object.isFrozen=function(object){if(Object(object)!==object)throw new TypeError("Object.isFrozen can only be called on Objects.");return!1});Object.isExtensible||(Object.isExtensible=function(object){if(Object(object)!==object)throw new TypeError("Object.isExtensible can only be called on Objects.");for(var name="";owns(object,name);)name+="?";object[name]=!0;var returnValue=owns(object,name);return delete object[name],returnValue})})?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()},function(module,exports,__webpack_require__){"use strict";__webpack_require__(408),__webpack_require__(409)(),__webpack_require__(414)},function(module,exports,__webpack_require__){(function(global,process){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;
/*!
 * https://github.com/paulmillr/es6-shim
 * @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)
 *   and contributors,  MIT License
 * es6-shim: v0.35.4
 * see https://github.com/paulmillr/es6-shim/blob/0.35.3/LICENSE
 * Details and documentation:
 * https://github.com/paulmillr/es6-shim/
 */void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=function(){"use strict";var ArrayIterator,func,_apply=Function.call.bind(Function.apply),_call=Function.call.bind(Function.call),isArray=Array.isArray,keys=Object.keys,throwsError=function(func){try{return func(),!1}catch(e){return!0}},valueOrFalseIfThrows=function(func){try{return func()}catch(e){return!1}},isCallableWithoutNew=(func=throwsError,function(){return!_apply(func,this,arguments)}),supportsDescriptors=!!Object.defineProperty&&!throwsError(function(){return Object.defineProperty({},"x",{get:function(){}})}),functionsHaveNames="foo"===function(){}.name,_forEach=Function.call.bind(Array.prototype.forEach),_reduce=Function.call.bind(Array.prototype.reduce),_filter=Function.call.bind(Array.prototype.filter),_some=Function.call.bind(Array.prototype.some),defineProperty=function(object,name,value,force){!force&&name in object||(supportsDescriptors?Object.defineProperty(object,name,{configurable:!0,enumerable:!1,writable:!0,value:value}):object[name]=value)},defineProperties=function(object,map,forceOverride){_forEach(keys(map),function(name){var method=map[name];defineProperty(object,name,method,!!forceOverride)})},_toString=Function.call.bind(Object.prototype.toString),isCallable=function(x){return"function"==typeof x},Value={getter:function(object,name,getter){if(!supportsDescriptors)throw new TypeError("getters require true ES5 support");Object.defineProperty(object,name,{configurable:!0,enumerable:!1,get:getter})},proxy:function(originalObject,key,targetObject){if(!supportsDescriptors)throw new TypeError("getters require true ES5 support");var originalDescriptor=Object.getOwnPropertyDescriptor(originalObject,key);Object.defineProperty(targetObject,key,{configurable:originalDescriptor.configurable,enumerable:originalDescriptor.enumerable,get:function(){return originalObject[key]},set:function(value){originalObject[key]=value}})},redefine:function(object,property,newValue){if(supportsDescriptors){var descriptor=Object.getOwnPropertyDescriptor(object,property);descriptor.value=newValue,Object.defineProperty(object,property,descriptor)}else object[property]=newValue},defineByDescriptor:function(object,property,descriptor){supportsDescriptors?Object.defineProperty(object,property,descriptor):"value"in descriptor&&(object[property]=descriptor.value)},preserveToString:function(target,source){source&&isCallable(source.toString)&&defineProperty(target,"toString",source.toString.bind(source),!0)}},create=Object.create||function(prototype,properties){var Prototype=function(){};Prototype.prototype=prototype;var object=new Prototype;return void 0!==properties&&keys(properties).forEach(function(key){Value.defineByDescriptor(object,key,properties[key])}),object},supportsSubclassing=function(C,f){return!!Object.setPrototypeOf&&valueOrFalseIfThrows(function(){var Sub=function Subclass(arg){var o=new C(arg);return Object.setPrototypeOf(o,Subclass.prototype),o};return Object.setPrototypeOf(Sub,C),Sub.prototype=create(C.prototype,{constructor:{value:Sub}}),f(Sub)})},globals=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==global)return global;throw new Error("unable to locate global object")}(),globalIsFinite=globals.isFinite,_indexOf=Function.call.bind(String.prototype.indexOf),_arrayIndexOfApply=Function.apply.bind(Array.prototype.indexOf),_concat=Function.call.bind(Array.prototype.concat),_strSlice=Function.call.bind(String.prototype.slice),_push=Function.call.bind(Array.prototype.push),_pushApply=Function.apply.bind(Array.prototype.push),_shift=Function.call.bind(Array.prototype.shift),_max=Math.max,_min=Math.min,_floor=Math.floor,_abs=Math.abs,_exp=Math.exp,_log=Math.log,_sqrt=Math.sqrt,_hasOwnProperty=Function.call.bind(Object.prototype.hasOwnProperty),noop=function(){},OrigMap=globals.Map,origMapDelete=OrigMap&&OrigMap.prototype.delete,origMapGet=OrigMap&&OrigMap.prototype.get,origMapHas=OrigMap&&OrigMap.prototype.has,origMapSet=OrigMap&&OrigMap.prototype.set,Symbol=globals.Symbol||{},symbolSpecies=Symbol.species||"@@species",numberIsNaN=Number.isNaN||function(value){return value!=value},numberIsFinite=Number.isFinite||function(value){return"number"==typeof value&&globalIsFinite(value)},_sign=isCallable(Math.sign)?Math.sign:function(value){var number=Number(value);return 0===number?number:numberIsNaN(number)?number:number<0?-1:1},_log1p=function(value){var x=Number(value);return x<-1||numberIsNaN(x)?NaN:0===x||x===1/0?x:-1===x?-1/0:1+x-1==0?x:x*(_log(1+x)/(1+x-1))},isStandardArguments=function(value){return"[object Arguments]"===_toString(value)},isArguments=isStandardArguments(arguments)?isStandardArguments:function(value){return null!==value&&"object"==typeof value&&"number"==typeof value.length&&value.length>=0&&"[object Array]"!==_toString(value)&&"[object Function]"===_toString(value.callee)},Type={primitive:function(x){return null===x||"function"!=typeof x&&"object"!=typeof x},string:function(x){return"[object String]"===_toString(x)},regex:function(x){return"[object RegExp]"===_toString(x)},symbol:function(x){return"function"==typeof globals.Symbol&&"symbol"==typeof x}},overrideNative=function(object,property,replacement){var original=object[property];defineProperty(object,property,replacement,!0),Value.preserveToString(object[property],original)},hasSymbols="function"==typeof Symbol&&"function"==typeof Symbol.for&&Type.symbol(Symbol()),$iterator$=Type.symbol(Symbol.iterator)?Symbol.iterator:"_es6-shim iterator_";globals.Set&&"function"==typeof(new globals.Set)["@@iterator"]&&($iterator$="@@iterator"),globals.Reflect||defineProperty(globals,"Reflect",{},!0);var o,Reflect=globals.Reflect,$String=String,domAll="undefined"!=typeof document&&document?document.all:null,isNullOrUndefined=null==domAll?function(x){return null==x}:function(x){return null==x&&x!==domAll},ES={Call:function(F,V){var args=arguments.length>2?arguments[2]:[];if(!ES.IsCallable(F))throw new TypeError(F+" is not a function");return _apply(F,V,args)},RequireObjectCoercible:function(x,optMessage){if(isNullOrUndefined(x))throw new TypeError(optMessage||"Cannot call method on "+x);return x},TypeIsObject:function(x){return null!=x&&!0!==x&&!1!==x&&("function"==typeof x||"object"==typeof x||x===domAll)},ToObject:function(o,optMessage){return Object(ES.RequireObjectCoercible(o,optMessage))},IsCallable:isCallable,IsConstructor:function(x){return ES.IsCallable(x)},ToInt32:function(x){return ES.ToNumber(x)>>0},ToUint32:function(x){return ES.ToNumber(x)>>>0},ToNumber:function(value){if("[object Symbol]"===_toString(value))throw new TypeError("Cannot convert a Symbol value to a number");return+value},ToInteger:function(value){var number=ES.ToNumber(value);return numberIsNaN(number)?0:0!==number&&numberIsFinite(number)?(number>0?1:-1)*_floor(_abs(number)):number},ToLength:function(value){var len=ES.ToInteger(value);return len<=0?0:len>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:len},SameValue:function(a,b){return a===b?0!==a||1/a==1/b:numberIsNaN(a)&&numberIsNaN(b)},SameValueZero:function(a,b){return a===b||numberIsNaN(a)&&numberIsNaN(b)},IsIterable:function(o){return ES.TypeIsObject(o)&&(void 0!==o[$iterator$]||isArguments(o))},GetIterator:function(o){if(isArguments(o))return new ArrayIterator(o,"value");var itFn=ES.GetMethod(o,$iterator$);if(!ES.IsCallable(itFn))throw new TypeError("value is not an iterable");var it=ES.Call(itFn,o);if(!ES.TypeIsObject(it))throw new TypeError("bad iterator");return it},GetMethod:function(o,p){var func=ES.ToObject(o)[p];if(!isNullOrUndefined(func)){if(!ES.IsCallable(func))throw new TypeError("Method not callable: "+p);return func}},IteratorComplete:function(iterResult){return!!iterResult.done},IteratorClose:function(iterator,completionIsThrow){var returnMethod=ES.GetMethod(iterator,"return");if(void 0!==returnMethod){var innerResult,innerException;try{innerResult=ES.Call(returnMethod,iterator)}catch(e){innerException=e}if(!completionIsThrow){if(innerException)throw innerException;if(!ES.TypeIsObject(innerResult))throw new TypeError("Iterator's return method returned a non-object.")}}},IteratorNext:function(it){var result=arguments.length>1?it.next(arguments[1]):it.next();if(!ES.TypeIsObject(result))throw new TypeError("bad iterator");return result},IteratorStep:function(it){var result=ES.IteratorNext(it),done=ES.IteratorComplete(result);return!done&&result},Construct:function(C,args,newTarget,isES6internal){var target=void 0===newTarget?C:newTarget;if(!isES6internal&&Reflect.construct)return Reflect.construct(C,args,target);var proto=target.prototype;ES.TypeIsObject(proto)||(proto=Object.prototype);var obj=create(proto),result=ES.Call(C,obj,args);return ES.TypeIsObject(result)?result:obj},SpeciesConstructor:function(O,defaultConstructor){var C=O.constructor;if(void 0===C)return defaultConstructor;if(!ES.TypeIsObject(C))throw new TypeError("Bad constructor");var S=C[symbolSpecies];if(isNullOrUndefined(S))return defaultConstructor;if(!ES.IsConstructor(S))throw new TypeError("Bad @@species");return S},CreateHTML:function(string,tag,attribute,value){var S=ES.ToString(string),p1="<"+tag;if(""!==attribute){var V=ES.ToString(value),escapedV=V.replace(/"/g,"&quot;");p1+=" "+attribute+'="'+escapedV+'"'}var p2=p1+">",p3=p2+S;return p3+"</"+tag+">"},IsRegExp:function(argument){if(!ES.TypeIsObject(argument))return!1;var isRegExp=argument[Symbol.match];return void 0!==isRegExp?!!isRegExp:Type.regex(argument)},ToString:function(string){return $String(string)}};if(supportsDescriptors&&hasSymbols){var defineWellKnownSymbol=function(name){if(Type.symbol(Symbol[name]))return Symbol[name];var sym=Symbol.for("Symbol."+name);return Object.defineProperty(Symbol,name,{configurable:!1,enumerable:!1,writable:!1,value:sym}),sym};if(!Type.symbol(Symbol.search)){var symbolSearch=defineWellKnownSymbol("search"),originalSearch=String.prototype.search;defineProperty(RegExp.prototype,symbolSearch,function(string){return ES.Call(originalSearch,string,[this])}),overrideNative(String.prototype,"search",function(regexp){var O=ES.RequireObjectCoercible(this);if(!isNullOrUndefined(regexp)){var searcher=ES.GetMethod(regexp,symbolSearch);if(void 0!==searcher)return ES.Call(searcher,regexp,[O])}return ES.Call(originalSearch,O,[ES.ToString(regexp)])})}if(!Type.symbol(Symbol.replace)){var symbolReplace=defineWellKnownSymbol("replace"),originalReplace=String.prototype.replace;defineProperty(RegExp.prototype,symbolReplace,function(string,replaceValue){return ES.Call(originalReplace,string,[this,replaceValue])}),overrideNative(String.prototype,"replace",function(searchValue,replaceValue){var O=ES.RequireObjectCoercible(this);if(!isNullOrUndefined(searchValue)){var replacer=ES.GetMethod(searchValue,symbolReplace);if(void 0!==replacer)return ES.Call(replacer,searchValue,[O,replaceValue])}return ES.Call(originalReplace,O,[ES.ToString(searchValue),replaceValue])})}if(!Type.symbol(Symbol.split)){var symbolSplit=defineWellKnownSymbol("split"),originalSplit=String.prototype.split;defineProperty(RegExp.prototype,symbolSplit,function(string,limit){return ES.Call(originalSplit,string,[this,limit])}),overrideNative(String.prototype,"split",function(separator,limit){var O=ES.RequireObjectCoercible(this);if(!isNullOrUndefined(separator)){var splitter=ES.GetMethod(separator,symbolSplit);if(void 0!==splitter)return ES.Call(splitter,separator,[O,limit])}return ES.Call(originalSplit,O,[ES.ToString(separator),limit])})}var symbolMatchExists=Type.symbol(Symbol.match),stringMatchIgnoresSymbolMatch=symbolMatchExists&&((o={})[Symbol.match]=function(){return 42},42!=="a".match(o));if(!symbolMatchExists||stringMatchIgnoresSymbolMatch){var symbolMatch=defineWellKnownSymbol("match"),originalMatch=String.prototype.match;defineProperty(RegExp.prototype,symbolMatch,function(string){return ES.Call(originalMatch,string,[this])}),overrideNative(String.prototype,"match",function(regexp){var O=ES.RequireObjectCoercible(this);if(!isNullOrUndefined(regexp)){var matcher=ES.GetMethod(regexp,symbolMatch);if(void 0!==matcher)return ES.Call(matcher,regexp,[O])}return ES.Call(originalMatch,O,[ES.ToString(regexp)])})}}var wrapConstructor=function(original,replacement,keysToSkip){Value.preserveToString(replacement,original),Object.setPrototypeOf&&Object.setPrototypeOf(original,replacement),supportsDescriptors?_forEach(Object.getOwnPropertyNames(original),function(key){key in noop||keysToSkip[key]||Value.proxy(original,key,replacement)}):_forEach(Object.keys(original),function(key){key in noop||keysToSkip[key]||(replacement[key]=original[key])}),replacement.prototype=original.prototype,Value.redefine(original.prototype,"constructor",replacement)},defaultSpeciesGetter=function(){return this},addDefaultSpecies=function(C){supportsDescriptors&&!_hasOwnProperty(C,symbolSpecies)&&Value.getter(C,symbolSpecies,defaultSpeciesGetter)},addIterator=function(prototype,impl){var implementation=impl||function(){return this};defineProperty(prototype,$iterator$,implementation),!prototype[$iterator$]&&Type.symbol($iterator$)&&(prototype[$iterator$]=implementation)},createDataPropertyOrThrow=function(object,name,value){if(function(object,name,value){supportsDescriptors?Object.defineProperty(object,name,{configurable:!0,enumerable:!0,writable:!0,value:value}):object[name]=value}(object,name,value),!ES.SameValue(object[name],value))throw new TypeError("property is nonconfigurable")},emulateES6construct=function(o,defaultNewTarget,defaultProto,slots){if(!ES.TypeIsObject(o))throw new TypeError("Constructor requires `new`: "+defaultNewTarget.name);var proto=defaultNewTarget.prototype;ES.TypeIsObject(proto)||(proto=defaultProto);var obj=create(proto);for(var name in slots)if(_hasOwnProperty(slots,name)){var value=slots[name];defineProperty(obj,name,value,!0)}return obj};if(String.fromCodePoint&&1!==String.fromCodePoint.length){var originalFromCodePoint=String.fromCodePoint;overrideNative(String,"fromCodePoint",function(codePoints){return ES.Call(originalFromCodePoint,this,arguments)})}var StringShims={fromCodePoint:function(codePoints){for(var next,result=[],i=0,length=arguments.length;i<length;i++){if(next=Number(arguments[i]),!ES.SameValue(next,ES.ToInteger(next))||next<0||next>1114111)throw new RangeError("Invalid code point "+next);next<65536?_push(result,String.fromCharCode(next)):(next-=65536,_push(result,String.fromCharCode(55296+(next>>10))),_push(result,String.fromCharCode(next%1024+56320)))}return result.join("")},raw:function(callSite){var cooked=ES.ToObject(callSite,"bad callSite"),rawString=ES.ToObject(cooked.raw,"bad raw value"),len=rawString.length,literalsegments=ES.ToLength(len);if(literalsegments<=0)return"";for(var nextKey,next,nextSeg,nextSub,stringElements=[],nextIndex=0;nextIndex<literalsegments&&(nextKey=ES.ToString(nextIndex),nextSeg=ES.ToString(rawString[nextKey]),_push(stringElements,nextSeg),!(nextIndex+1>=literalsegments));)next=nextIndex+1<arguments.length?arguments[nextIndex+1]:"",nextSub=ES.ToString(next),_push(stringElements,nextSub),nextIndex+=1;return stringElements.join("")}};String.raw&&"xy"!==String.raw({raw:{0:"x",1:"y",length:2}})&&overrideNative(String,"raw",StringShims.raw),defineProperties(String,StringShims);var stringMaxLength=1/0,StringPrototypeShims={repeat:function(times){var thisStr=ES.ToString(ES.RequireObjectCoercible(this)),numTimes=ES.ToInteger(times);if(numTimes<0||numTimes>=stringMaxLength)throw new RangeError("repeat count must be less than infinity and not overflow maximum string size");return function repeat(s,times){if(times<1)return"";if(times%2)return repeat(s,times-1)+s;var half=repeat(s,times/2);return half+half}(thisStr,numTimes)},startsWith:function(searchString){var S=ES.ToString(ES.RequireObjectCoercible(this));if(ES.IsRegExp(searchString))throw new TypeError('Cannot call method "startsWith" with a regex');var position,searchStr=ES.ToString(searchString);arguments.length>1&&(position=arguments[1]);var start=_max(ES.ToInteger(position),0);return _strSlice(S,start,start+searchStr.length)===searchStr},endsWith:function(searchString){var S=ES.ToString(ES.RequireObjectCoercible(this));if(ES.IsRegExp(searchString))throw new TypeError('Cannot call method "endsWith" with a regex');var endPosition,searchStr=ES.ToString(searchString),len=S.length;arguments.length>1&&(endPosition=arguments[1]);var pos=void 0===endPosition?len:ES.ToInteger(endPosition),end=_min(_max(pos,0),len);return _strSlice(S,end-searchStr.length,end)===searchStr},includes:function(searchString){if(ES.IsRegExp(searchString))throw new TypeError('"includes" does not accept a RegExp');var position,searchStr=ES.ToString(searchString);return arguments.length>1&&(position=arguments[1]),-1!==_indexOf(this,searchStr,position)},codePointAt:function(pos){var thisStr=ES.ToString(ES.RequireObjectCoercible(this)),position=ES.ToInteger(pos),length=thisStr.length;if(position>=0&&position<length){var first=thisStr.charCodeAt(position),isEnd=position+1===length;if(first<55296||first>56319||isEnd)return first;var second=thisStr.charCodeAt(position+1);return second<56320||second>57343?first:1024*(first-55296)+(second-56320)+65536}}};if(String.prototype.includes&&!1!=="a".includes("a",1/0)&&overrideNative(String.prototype,"includes",StringPrototypeShims.includes),String.prototype.startsWith&&String.prototype.endsWith){var startsWithRejectsRegex=throwsError(function(){return"/a/".startsWith(/a/)}),startsWithHandlesInfinity=valueOrFalseIfThrows(function(){return!1==="abc".startsWith("a",1/0)});startsWithRejectsRegex&&startsWithHandlesInfinity||(overrideNative(String.prototype,"startsWith",StringPrototypeShims.startsWith),overrideNative(String.prototype,"endsWith",StringPrototypeShims.endsWith))}if(hasSymbols){var startsWithSupportsSymbolMatch=valueOrFalseIfThrows(function(){var re=/a/;return re[Symbol.match]=!1,"/a/".startsWith(re)});startsWithSupportsSymbolMatch||overrideNative(String.prototype,"startsWith",StringPrototypeShims.startsWith);var endsWithSupportsSymbolMatch=valueOrFalseIfThrows(function(){var re=/a/;return re[Symbol.match]=!1,"/a/".endsWith(re)});endsWithSupportsSymbolMatch||overrideNative(String.prototype,"endsWith",StringPrototypeShims.endsWith);var includesSupportsSymbolMatch=valueOrFalseIfThrows(function(){var re=/a/;return re[Symbol.match]=!1,"/a/".includes(re)});includesSupportsSymbolMatch||overrideNative(String.prototype,"includes",StringPrototypeShims.includes)}defineProperties(String.prototype,StringPrototypeShims);var ws=["\t\n\v\f\r   ᠎    ","         　\u2028","\u2029\ufeff"].join(""),trimRegexp=new RegExp("(^["+ws+"]+)|(["+ws+"]+$)","g"),trimShim=function(){return ES.ToString(ES.RequireObjectCoercible(this)).replace(trimRegexp,"")},nonWS=["","​","￾"].join(""),nonWSregex=new RegExp("["+nonWS+"]","g"),isBadHexRegex=/^[-+]0x[0-9a-f]+$/i,hasStringTrimBug=nonWS.trim().length!==nonWS.length;defineProperty(String.prototype,"trim",trimShim,hasStringTrimBug);var iteratorResult=function(x){return{value:x,done:0===arguments.length}},StringIterator=function(s){ES.RequireObjectCoercible(s),this._s=ES.ToString(s),this._i=0};StringIterator.prototype.next=function(){var s=this._s,i=this._i;if(void 0===s||i>=s.length)return this._s=void 0,iteratorResult();var second,len,first=s.charCodeAt(i);return first<55296||first>56319||i+1===s.length?len=1:(second=s.charCodeAt(i+1),len=second<56320||second>57343?1:2),this._i=i+len,iteratorResult(s.substr(i,len))},addIterator(StringIterator.prototype),addIterator(String.prototype,function(){return new StringIterator(this)});var ArrayShims={from:function(items){var mapFn,mapping,T,C=this;if(arguments.length>1&&(mapFn=arguments[1]),void 0===mapFn)mapping=!1;else{if(!ES.IsCallable(mapFn))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(T=arguments[2]),mapping=!0}var length,result,i,usingIterator=void 0!==(isArguments(items)||ES.GetMethod(items,$iterator$));if(usingIterator){result=ES.IsConstructor(C)?Object(new C):[];var next,nextValue,iterator=ES.GetIterator(items);for(i=0;!1!==(next=ES.IteratorStep(iterator));){nextValue=next.value;try{mapping&&(nextValue=void 0===T?mapFn(nextValue,i):_call(mapFn,T,nextValue,i)),result[i]=nextValue}catch(e){throw ES.IteratorClose(iterator,!0),e}i+=1}length=i}else{var value,arrayLike=ES.ToObject(items);for(length=ES.ToLength(arrayLike.length),result=ES.IsConstructor(C)?Object(new C(length)):new Array(length),i=0;i<length;++i)value=arrayLike[i],mapping&&(value=void 0===T?mapFn(value,i):_call(mapFn,T,value,i)),createDataPropertyOrThrow(result,i,value)}return result.length=length,result},of:function(){for(var len=arguments.length,C=this,A=isArray(C)||!ES.IsCallable(C)?new Array(len):ES.Construct(C,[len]),k=0;k<len;++k)createDataPropertyOrThrow(A,k,arguments[k]);return A.length=len,A}};defineProperties(Array,ArrayShims),addDefaultSpecies(Array),defineProperties((ArrayIterator=function(array,kind){this.i=0,this.array=array,this.kind=kind}).prototype,{next:function(){var i=this.i,array=this.array;if(!(this instanceof ArrayIterator))throw new TypeError("Not an ArrayIterator");if(void 0!==array)for(var len=ES.ToLength(array.length);i<len;i++){var retval,kind=this.kind;return"key"===kind?retval=i:"value"===kind?retval=array[i]:"entry"===kind&&(retval=[i,array[i]]),this.i=i+1,iteratorResult(retval)}return this.array=void 0,iteratorResult()}}),addIterator(ArrayIterator.prototype),Array.of===ArrayShims.of||function(){var Foo=function(len){this.length=len};Foo.prototype=[];var fooArr=Array.of.apply(Foo,[1,2]);return fooArr instanceof Foo&&2===fooArr.length}()||overrideNative(Array,"of",ArrayShims.of);var ArrayPrototypeShims={copyWithin:function(target,start){var end,o=ES.ToObject(this),len=ES.ToLength(o.length),relativeTarget=ES.ToInteger(target),relativeStart=ES.ToInteger(start),to=relativeTarget<0?_max(len+relativeTarget,0):_min(relativeTarget,len),from=relativeStart<0?_max(len+relativeStart,0):_min(relativeStart,len);arguments.length>2&&(end=arguments[2]);var relativeEnd=void 0===end?len:ES.ToInteger(end),finalItem=relativeEnd<0?_max(len+relativeEnd,0):_min(relativeEnd,len),count=_min(finalItem-from,len-to),direction=1;for(from<to&&to<from+count&&(direction=-1,from+=count-1,to+=count-1);count>0;)from in o?o[to]=o[from]:delete o[to],from+=direction,to+=direction,count-=1;return o},fill:function(value){var start,end;arguments.length>1&&(start=arguments[1]),arguments.length>2&&(end=arguments[2]);var O=ES.ToObject(this),len=ES.ToLength(O.length);start=ES.ToInteger(void 0===start?0:start),end=ES.ToInteger(void 0===end?len:end);for(var relativeStart=start<0?_max(len+start,0):_min(start,len),relativeEnd=end<0?len+end:end,i=relativeStart;i<len&&i<relativeEnd;++i)O[i]=value;return O},find:function(predicate){var list=ES.ToObject(this),length=ES.ToLength(list.length);if(!ES.IsCallable(predicate))throw new TypeError("Array#find: predicate must be a function");for(var value,thisArg=arguments.length>1?arguments[1]:null,i=0;i<length;i++)if(value=list[i],thisArg){if(_call(predicate,thisArg,value,i,list))return value}else if(predicate(value,i,list))return value},findIndex:function(predicate){var list=ES.ToObject(this),length=ES.ToLength(list.length);if(!ES.IsCallable(predicate))throw new TypeError("Array#findIndex: predicate must be a function");for(var thisArg=arguments.length>1?arguments[1]:null,i=0;i<length;i++)if(thisArg){if(_call(predicate,thisArg,list[i],i,list))return i}else if(predicate(list[i],i,list))return i;return-1},keys:function(){return new ArrayIterator(this,"key")},values:function(){return new ArrayIterator(this,"value")},entries:function(){return new ArrayIterator(this,"entry")}};if(Array.prototype.keys&&!ES.IsCallable([1].keys().next)&&delete Array.prototype.keys,Array.prototype.entries&&!ES.IsCallable([1].entries().next)&&delete Array.prototype.entries,Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[$iterator$]&&(defineProperties(Array.prototype,{values:Array.prototype[$iterator$]}),Type.symbol(Symbol.unscopables)&&(Array.prototype[Symbol.unscopables].values=!0)),functionsHaveNames&&Array.prototype.values&&"values"!==Array.prototype.values.name){var originalArrayPrototypeValues=Array.prototype.values;overrideNative(Array.prototype,"values",function(){return ES.Call(originalArrayPrototypeValues,this,arguments)}),defineProperty(Array.prototype,$iterator$,Array.prototype.values,!0)}defineProperties(Array.prototype,ArrayPrototypeShims),1/[!0].indexOf(!0,-0)<0&&defineProperty(Array.prototype,"indexOf",function(searchElement){var value=_arrayIndexOfApply(this,arguments);return 0===value&&1/value<0?0:value},!0),addIterator(Array.prototype,function(){return this.values()}),Object.getPrototypeOf&&addIterator(Object.getPrototypeOf([].values()));var arr,arrayFromSwallowsNegativeLengths=valueOrFalseIfThrows(function(){return 0===Array.from({length:-1}).length}),arrayFromHandlesIterables=1===(arr=Array.from([0].entries())).length&&isArray(arr[0])&&0===arr[0][0]&&0===arr[0][1];if(arrayFromSwallowsNegativeLengths&&arrayFromHandlesIterables||overrideNative(Array,"from",ArrayShims.from),!valueOrFalseIfThrows(function(){return Array.from([0],void 0)})){var origArrayFrom=Array.from;overrideNative(Array,"from",function(items){return arguments.length>1&&void 0!==arguments[1]?ES.Call(origArrayFrom,this,arguments):_call(origArrayFrom,this,items)})}var int32sAsOne=-(Math.pow(2,32)-1),toLengthsCorrectly=function(method,reversed){var obj={length:int32sAsOne};return obj[reversed?(obj.length>>>0)-1:0]=!0,valueOrFalseIfThrows(function(){return _call(method,obj,function(){throw new RangeError("should not reach here")},[]),!0})};if(!toLengthsCorrectly(Array.prototype.forEach)){var originalForEach=Array.prototype.forEach;overrideNative(Array.prototype,"forEach",function(callbackFn){return ES.Call(originalForEach,this.length>=0?this:[],arguments)})}if(!toLengthsCorrectly(Array.prototype.map)){var originalMap=Array.prototype.map;overrideNative(Array.prototype,"map",function(callbackFn){return ES.Call(originalMap,this.length>=0?this:[],arguments)})}if(!toLengthsCorrectly(Array.prototype.filter)){var originalFilter=Array.prototype.filter;overrideNative(Array.prototype,"filter",function(callbackFn){return ES.Call(originalFilter,this.length>=0?this:[],arguments)})}if(!toLengthsCorrectly(Array.prototype.some)){var originalSome=Array.prototype.some;overrideNative(Array.prototype,"some",function(callbackFn){return ES.Call(originalSome,this.length>=0?this:[],arguments)})}if(!toLengthsCorrectly(Array.prototype.every)){var originalEvery=Array.prototype.every;overrideNative(Array.prototype,"every",function(callbackFn){return ES.Call(originalEvery,this.length>=0?this:[],arguments)})}if(!toLengthsCorrectly(Array.prototype.reduce)){var originalReduce=Array.prototype.reduce;overrideNative(Array.prototype,"reduce",function(callbackFn){return ES.Call(originalReduce,this.length>=0?this:[],arguments)})}if(!toLengthsCorrectly(Array.prototype.reduceRight,!0)){var originalReduceRight=Array.prototype.reduceRight;overrideNative(Array.prototype,"reduceRight",function(callbackFn){return ES.Call(originalReduceRight,this.length>=0?this:[],arguments)})}var lacksOctalSupport=8!==Number("0o10"),lacksBinarySupport=2!==Number("0b10"),trimsNonWhitespace=_some(nonWS,function(c){return 0===Number(c+0+c)});if(lacksOctalSupport||lacksBinarySupport||trimsNonWhitespace){var OrigNumber=Number,binaryRegex=/^0b[01]+$/i,octalRegex=/^0o[0-7]+$/i,isBinary=binaryRegex.test.bind(binaryRegex),isOctal=octalRegex.test.bind(octalRegex),hasNonWS=nonWSregex.test.bind(nonWSregex),isBadHex=isBadHexRegex.test.bind(isBadHexRegex),NumberShim=function(){var NumberShim=function(value){var primValue;"string"==typeof(primValue=arguments.length>0?Type.primitive(value)?value:function(O){var result;if("function"==typeof O.valueOf&&(result=O.valueOf(),Type.primitive(result)))return result;if("function"==typeof O.toString&&(result=O.toString(),Type.primitive(result)))return result;throw new TypeError("No default value")}(value):0)&&(primValue=ES.Call(trimShim,primValue),isBinary(primValue)?primValue=parseInt(_strSlice(primValue,2),2):isOctal(primValue)?primValue=parseInt(_strSlice(primValue,2),8):(hasNonWS(primValue)||isBadHex(primValue))&&(primValue=NaN));var receiver=this,valueOfSucceeds=valueOrFalseIfThrows(function(){return OrigNumber.prototype.valueOf.call(receiver),!0});return receiver instanceof NumberShim&&!valueOfSucceeds?new OrigNumber(primValue):OrigNumber(primValue)};return NumberShim}();wrapConstructor(OrigNumber,NumberShim,{}),defineProperties(NumberShim,{NaN:OrigNumber.NaN,MAX_VALUE:OrigNumber.MAX_VALUE,MIN_VALUE:OrigNumber.MIN_VALUE,NEGATIVE_INFINITY:OrigNumber.NEGATIVE_INFINITY,POSITIVE_INFINITY:OrigNumber.POSITIVE_INFINITY}),Number=NumberShim,Value.redefine(globals,"Number",NumberShim)}var maxSafeInteger=Math.pow(2,53)-1;defineProperties(Number,{MAX_SAFE_INTEGER:maxSafeInteger,MIN_SAFE_INTEGER:-maxSafeInteger,EPSILON:2.220446049250313e-16,parseInt:globals.parseInt,parseFloat:globals.parseFloat,isFinite:numberIsFinite,isInteger:function(value){return numberIsFinite(value)&&ES.ToInteger(value)===value},isSafeInteger:function(value){return Number.isInteger(value)&&_abs(value)<=Number.MAX_SAFE_INTEGER},isNaN:numberIsNaN}),defineProperty(Number,"parseInt",globals.parseInt,Number.parseInt!==globals.parseInt),1===[,1].find(function(){return!0})&&overrideNative(Array.prototype,"find",ArrayPrototypeShims.find),0!==[,1].findIndex(function(){return!0})&&overrideNative(Array.prototype,"findIndex",ArrayPrototypeShims.findIndex);var FAKENULL,gpo,spo,isEnumerableOn=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable),ensureEnumerable=function(obj,prop){supportsDescriptors&&isEnumerableOn(obj,prop)&&Object.defineProperty(obj,prop,{enumerable:!1})},sliceArgs=function(){for(var initial=Number(this),len=arguments.length,desiredArgCount=len-initial,args=new Array(desiredArgCount<0?0:desiredArgCount),i=initial;i<len;++i)args[i-initial]=arguments[i];return args},assignTo=function(source){return function(target,key){return target[key]=source[key],target}},assignReducer=function(target,source){var symbols,sourceKeys=keys(Object(source));return ES.IsCallable(Object.getOwnPropertySymbols)&&(symbols=_filter(Object.getOwnPropertySymbols(Object(source)),isEnumerableOn(source))),_reduce(_concat(sourceKeys,symbols||[]),assignTo(source),target)},ObjectShims={assign:function(target,source){var to=ES.ToObject(target,"Cannot convert undefined or null to object");return _reduce(ES.Call(sliceArgs,1,arguments),assignReducer,to)},is:function(a,b){return ES.SameValue(a,b)}};if(Object.assign&&Object.preventExtensions&&function(){var thrower=Object.preventExtensions({1:2});try{Object.assign(thrower,"xy")}catch(e){return"y"===thrower[1]}}()&&overrideNative(Object,"assign",ObjectShims.assign),defineProperties(Object,ObjectShims),supportsDescriptors){var ES5ObjectShims={setPrototypeOf:function(Object,magic){var set,setPrototypeOf=function(O,proto){return function(O,proto){if(!ES.TypeIsObject(O))throw new TypeError("cannot set prototype on a non-object");if(null!==proto&&!ES.TypeIsObject(proto))throw new TypeError("can only set prototype to an object or null"+proto)}(O,proto),_call(set,O,proto),O};try{set=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,_call(set,{},null)}catch(e){if(Object.prototype!=={}.__proto__)return;set=function(proto){this.__proto__=proto},setPrototypeOf.polyfill=setPrototypeOf(setPrototypeOf({},null),Object.prototype)instanceof Object}return setPrototypeOf}(Object)};defineProperties(Object,ES5ObjectShims)}if(Object.setPrototypeOf&&Object.getPrototypeOf&&null!==Object.getPrototypeOf(Object.setPrototypeOf({},null))&&null===Object.getPrototypeOf(Object.create(null))&&(FAKENULL=Object.create(null),gpo=Object.getPrototypeOf,spo=Object.setPrototypeOf,Object.getPrototypeOf=function(o){var result=gpo(o);return result===FAKENULL?null:result},Object.setPrototypeOf=function(o,p){var proto=null===p?FAKENULL:p;return spo(o,proto)},Object.setPrototypeOf.polyfill=!1),throwsError(function(){return Object.keys("foo")})){var originalObjectKeys=Object.keys;overrideNative(Object,"keys",function(value){return originalObjectKeys(ES.ToObject(value))}),keys=Object.keys}if(throwsError(function(){return Object.keys(/a/g)})){var regexRejectingObjectKeys=Object.keys;overrideNative(Object,"keys",function(value){if(Type.regex(value)){var regexKeys=[];for(var k in value)_hasOwnProperty(value,k)&&_push(regexKeys,k);return regexKeys}return regexRejectingObjectKeys(value)}),keys=Object.keys}if(Object.getOwnPropertyNames){var objectGOPNAcceptsPrimitives=!throwsError(function(){return Object.getOwnPropertyNames("foo")});if(!objectGOPNAcceptsPrimitives){var cachedWindowNames="object"==typeof window?Object.getOwnPropertyNames(window):[],originalObjectGetOwnPropertyNames=Object.getOwnPropertyNames;overrideNative(Object,"getOwnPropertyNames",function(value){var val=ES.ToObject(value);if("[object Window]"===_toString(val))try{return originalObjectGetOwnPropertyNames(val)}catch(e){return _concat([],cachedWindowNames)}return originalObjectGetOwnPropertyNames(val)})}}if(Object.getOwnPropertyDescriptor){var objectGOPDAcceptsPrimitives=!throwsError(function(){return Object.getOwnPropertyDescriptor("foo","bar")});if(!objectGOPDAcceptsPrimitives){var originalObjectGetOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;overrideNative(Object,"getOwnPropertyDescriptor",function(value,property){return originalObjectGetOwnPropertyDescriptor(ES.ToObject(value),property)})}}if(Object.seal){var objectSealAcceptsPrimitives=!throwsError(function(){return Object.seal("foo")});if(!objectSealAcceptsPrimitives){var originalObjectSeal=Object.seal;overrideNative(Object,"seal",function(value){return ES.TypeIsObject(value)?originalObjectSeal(value):value})}}if(Object.isSealed){var objectIsSealedAcceptsPrimitives=!throwsError(function(){return Object.isSealed("foo")});if(!objectIsSealedAcceptsPrimitives){var originalObjectIsSealed=Object.isSealed;overrideNative(Object,"isSealed",function(value){return!ES.TypeIsObject(value)||originalObjectIsSealed(value)})}}if(Object.freeze){var objectFreezeAcceptsPrimitives=!throwsError(function(){return Object.freeze("foo")});if(!objectFreezeAcceptsPrimitives){var originalObjectFreeze=Object.freeze;overrideNative(Object,"freeze",function(value){return ES.TypeIsObject(value)?originalObjectFreeze(value):value})}}if(Object.isFrozen){var objectIsFrozenAcceptsPrimitives=!throwsError(function(){return Object.isFrozen("foo")});if(!objectIsFrozenAcceptsPrimitives){var originalObjectIsFrozen=Object.isFrozen;overrideNative(Object,"isFrozen",function(value){return!ES.TypeIsObject(value)||originalObjectIsFrozen(value)})}}if(Object.preventExtensions){var objectPreventExtensionsAcceptsPrimitives=!throwsError(function(){return Object.preventExtensions("foo")});if(!objectPreventExtensionsAcceptsPrimitives){var originalObjectPreventExtensions=Object.preventExtensions;overrideNative(Object,"preventExtensions",function(value){return ES.TypeIsObject(value)?originalObjectPreventExtensions(value):value})}}if(Object.isExtensible){var objectIsExtensibleAcceptsPrimitives=!throwsError(function(){return Object.isExtensible("foo")});if(!objectIsExtensibleAcceptsPrimitives){var originalObjectIsExtensible=Object.isExtensible;overrideNative(Object,"isExtensible",function(value){return!!ES.TypeIsObject(value)&&originalObjectIsExtensible(value)})}}if(Object.getPrototypeOf){var objectGetProtoAcceptsPrimitives=!throwsError(function(){return Object.getPrototypeOf("foo")});if(!objectGetProtoAcceptsPrimitives){var originalGetProto=Object.getPrototypeOf;overrideNative(Object,"getPrototypeOf",function(value){return originalGetProto(ES.ToObject(value))})}}var desc,hasFlags=supportsDescriptors&&((desc=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags"))&&ES.IsCallable(desc.get));supportsDescriptors&&!hasFlags&&Value.getter(RegExp.prototype,"flags",function(){if(!ES.TypeIsObject(this))throw new TypeError("Method called on incompatible type: must be an object.");var result="";return this.global&&(result+="g"),this.ignoreCase&&(result+="i"),this.multiline&&(result+="m"),this.unicode&&(result+="u"),this.sticky&&(result+="y"),result});var regex,regExpSupportsFlagsWithRegex=supportsDescriptors&&valueOrFalseIfThrows(function(){return"/a/i"===String(new RegExp(/a/g,"i"))}),regExpNeedsToSupportSymbolMatch=hasSymbols&&supportsDescriptors&&((regex=/./)[Symbol.match]=!1,RegExp(regex)===regex),regexToStringIsGeneric=valueOrFalseIfThrows(function(){return"/abc/"===RegExp.prototype.toString.call({source:"abc"})}),regexToStringSupportsGenericFlags=regexToStringIsGeneric&&valueOrFalseIfThrows(function(){return"/a/b"===RegExp.prototype.toString.call({source:"a",flags:"b"})});if(!regexToStringIsGeneric||!regexToStringSupportsGenericFlags){var origRegExpToString=RegExp.prototype.toString;defineProperty(RegExp.prototype,"toString",function(){var R=ES.RequireObjectCoercible(this);if(Type.regex(R))return _call(origRegExpToString,R);var pattern=$String(R.source),flags=$String(R.flags);return"/"+pattern+"/"+flags},!0),Value.preserveToString(RegExp.prototype.toString,origRegExpToString)}if(supportsDescriptors&&(!regExpSupportsFlagsWithRegex||regExpNeedsToSupportSymbolMatch)){var flagsGetter=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get,sourceDesc=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{},sourceGetter=ES.IsCallable(sourceDesc.get)?sourceDesc.get:function(){return this.source},OrigRegExp=RegExp,RegExpShim=function RegExp(pattern,flags){var patternIsRegExp=ES.IsRegExp(pattern),calledWithNew=this instanceof RegExp;if(!calledWithNew&&patternIsRegExp&&void 0===flags&&pattern.constructor===RegExp)return pattern;var P=pattern,F=flags;return Type.regex(pattern)?(P=ES.Call(sourceGetter,pattern),F=void 0===flags?ES.Call(flagsGetter,pattern):flags,new RegExp(P,F)):(patternIsRegExp&&(P=pattern.source,F=void 0===flags?pattern.flags:flags),new OrigRegExp(pattern,flags))};wrapConstructor(OrigRegExp,RegExpShim,{$input:!0}),RegExp=RegExpShim,Value.redefine(globals,"RegExp",RegExpShim)}if(supportsDescriptors){var regexGlobals={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};_forEach(keys(regexGlobals),function(prop){prop in RegExp&&!(regexGlobals[prop]in RegExp)&&Value.getter(RegExp,regexGlobals[prop],function(){return RegExp[prop]})})}addDefaultSpecies(RegExp);var inverseEpsilon=1/Number.EPSILON,BINARY_32_EPSILON=Math.pow(2,-23),BINARY_32_MAX_VALUE=Math.pow(2,127)*(2-BINARY_32_EPSILON),BINARY_32_MIN_VALUE=Math.pow(2,-126),E=Math.E,LOG2E=Math.LOG2E,LOG10E=Math.LOG10E,numberCLZ=Number.prototype.clz;delete Number.prototype.clz;var MathShims={acosh:function(value){var x=Number(value);if(numberIsNaN(x)||value<1)return NaN;if(1===x)return 0;if(x===1/0)return x;var xInvSquared=1/(x*x);if(x<2)return _log1p(x-1+_sqrt(1-xInvSquared)*x);var halfX=x/2;return _log1p(halfX+_sqrt(1-xInvSquared)*halfX-1)+1/LOG2E},asinh:function(value){var x=Number(value);if(0===x||!globalIsFinite(x))return x;var a=_abs(x),aSquared=a*a,s=_sign(x);return a<1?s*_log1p(a+aSquared/(_sqrt(aSquared+1)+1)):s*(_log1p(a/2+_sqrt(1+1/aSquared)*a/2-1)+1/LOG2E)},atanh:function(value){var x=Number(value);if(0===x)return x;if(-1===x)return-1/0;if(1===x)return 1/0;if(numberIsNaN(x)||x<-1||x>1)return NaN;var a=_abs(x);return _sign(x)*_log1p(2*a/(1-a))/2},cbrt:function(value){var x=Number(value);if(0===x)return x;var result,negate=x<0;return negate&&(x=-x),x===1/0?result=1/0:(result=_exp(_log(x)/3),result=(x/(result*result)+2*result)/3),negate?-result:result},clz32:function(value){var x=Number(value),number=ES.ToUint32(x);return 0===number?32:numberCLZ?ES.Call(numberCLZ,number):31-_floor(_log(number+.5)*LOG2E)},cosh:function(value){var x=Number(value);if(0===x)return 1;if(numberIsNaN(x))return NaN;if(!globalIsFinite(x))return 1/0;var t=_exp(_abs(x)-1);return(t+1/(t*E*E))*(E/2)},expm1:function(value){var x=Number(value);if(x===-1/0)return-1;if(!globalIsFinite(x)||0===x)return x;if(_abs(x)>.5)return _exp(x)-1;for(var t=x,sum=0,n=1;sum+t!==sum;)sum+=t,t*=x/(n+=1);return sum},hypot:function(x,y){for(var result=0,largest=0,i=0;i<arguments.length;++i){var value=_abs(Number(arguments[i]));largest<value?(result*=largest/value*(largest/value),result+=1,largest=value):result+=value>0?value/largest*(value/largest):value}return largest===1/0?1/0:largest*_sqrt(result)},log2:function(value){return _log(value)*LOG2E},log10:function(value){return _log(value)*LOG10E},log1p:_log1p,sign:_sign,sinh:function(value){var x=Number(value);if(!globalIsFinite(x)||0===x)return x;var a=_abs(x);if(a<1){var u=Math.expm1(a);return _sign(x)*u*(1+1/(u+1))/2}var t=_exp(a-1);return _sign(x)*(t-1/(t*E*E))*(E/2)},tanh:function(value){var x=Number(value);return numberIsNaN(x)||0===x?x:x>=20?1:x<=-20?-1:(Math.expm1(x)-Math.expm1(-x))/(_exp(x)+_exp(-x))},trunc:function(value){var x=Number(value);return x<0?-_floor(-x):_floor(x)},imul:function(x,y){var a=ES.ToUint32(x),b=ES.ToUint32(y),ah=a>>>16&65535,al=65535&a,bh=b>>>16&65535,bl=65535&b;return al*bl+(ah*bl+al*bh<<16>>>0)|0},fround:function(x){var v=Number(x);if(0===v||v===1/0||v===-1/0||numberIsNaN(v))return v;var sign=_sign(v),abs=_abs(v);if(abs<BINARY_32_MIN_VALUE)return sign*(abs/BINARY_32_MIN_VALUE/BINARY_32_EPSILON+inverseEpsilon-inverseEpsilon)*BINARY_32_MIN_VALUE*BINARY_32_EPSILON;var a=(1+BINARY_32_EPSILON/Number.EPSILON)*abs,result=a-(a-abs);return result>BINARY_32_MAX_VALUE||numberIsNaN(result)?sign*(1/0):sign*result}},withinULPDistance=function(result,expected,distance){return _abs(1-result/expected)/Number.EPSILON<(distance||8)};defineProperties(Math,MathShims),defineProperty(Math,"sinh",MathShims.sinh,Math.sinh(710)===1/0),defineProperty(Math,"cosh",MathShims.cosh,Math.cosh(710)===1/0),defineProperty(Math,"log1p",MathShims.log1p,-1e-17!==Math.log1p(-1e-17)),defineProperty(Math,"asinh",MathShims.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7)),defineProperty(Math,"asinh",MathShims.asinh,Math.asinh(1e300)===1/0),defineProperty(Math,"atanh",MathShims.atanh,0===Math.atanh(1e-300)),defineProperty(Math,"tanh",MathShims.tanh,-2e-17!==Math.tanh(-2e-17)),defineProperty(Math,"acosh",MathShims.acosh,Math.acosh(Number.MAX_VALUE)===1/0),defineProperty(Math,"acosh",MathShims.acosh,!withinULPDistance(Math.acosh(1+Number.EPSILON),Math.sqrt(2*Number.EPSILON))),defineProperty(Math,"cbrt",MathShims.cbrt,!withinULPDistance(Math.cbrt(1e-300),1e-100)),defineProperty(Math,"sinh",MathShims.sinh,-2e-17!==Math.sinh(-2e-17));var expm1OfTen=Math.expm1(10);defineProperty(Math,"expm1",MathShims.expm1,expm1OfTen>22025.465794806718||expm1OfTen<22025.465794806718);var origMathRound=Math.round,roundHandlesBoundaryConditions=0===Math.round(.5-Number.EPSILON/4)&&1===Math.round(Number.EPSILON/3.99-.5),roundDoesNotIncreaseIntegers=[inverseEpsilon+1,2*inverseEpsilon-1].every(function(num){return Math.round(num)===num});defineProperty(Math,"round",function(x){var floor=_floor(x),ceil=-1===floor?-0:floor+1;return x-floor<.5?floor:ceil},!roundHandlesBoundaryConditions||!roundDoesNotIncreaseIntegers),Value.preserveToString(Math.round,origMathRound);var origImul=Math.imul;-5!==Math.imul(4294967295,5)&&(Math.imul=MathShims.imul,Value.preserveToString(Math.imul,origImul)),2!==Math.imul.length&&overrideNative(Math,"imul",function(x,y){return ES.Call(origImul,Math,arguments)});var count,thenable,PromiseShim=function(){var setTimeout=globals.setTimeout;if("function"==typeof setTimeout||"object"==typeof setTimeout){ES.IsPromise=function(promise){return!!ES.TypeIsObject(promise)&&void 0!==promise._promise};var makeZeroTimeout,PromiseCapability=function(C){if(!ES.IsConstructor(C))throw new TypeError("Bad promise constructor");var capability=this;if(capability.resolve=void 0,capability.reject=void 0,capability.promise=new C(function(resolve,reject){if(void 0!==capability.resolve||void 0!==capability.reject)throw new TypeError("Bad Promise implementation!");capability.resolve=resolve,capability.reject=reject}),!ES.IsCallable(capability.resolve)||!ES.IsCallable(capability.reject))throw new TypeError("Bad promise constructor")};"undefined"!=typeof window&&ES.IsCallable(window.postMessage)&&(makeZeroTimeout=function(){var timeouts=[];return window.addEventListener("message",function(event){if(event.source===window&&"zero-timeout-message"===event.data){if(event.stopPropagation(),0===timeouts.length)return;var fn=_shift(timeouts);fn()}},!0),function(fn){_push(timeouts,fn),window.postMessage("zero-timeout-message","*")}});var P,pr,Promise$prototype,Promise$prototype$then,PromiseShim,enqueue=ES.IsCallable(globals.setImmediate)?globals.setImmediate:"object"==typeof process&&process.nextTick?process.nextTick:(P=globals.Promise,(pr=P&&P.resolve&&P.resolve())&&function(task){return pr.then(task)}||(ES.IsCallable(makeZeroTimeout)?makeZeroTimeout():function(task){setTimeout(task,0)})),PROMISE_IDENTITY=function(x){return x},PROMISE_THROWER=function(e){throw e},PROMISE_FAKE_CAPABILITY={},enqueuePromiseReactionJob=function(handler,capability,argument){enqueue(function(){promiseReactionJob(handler,capability,argument)})},promiseReactionJob=function(handler,promiseCapability,argument){var handlerResult,f;if(promiseCapability===PROMISE_FAKE_CAPABILITY)return handler(argument);try{handlerResult=handler(argument),f=promiseCapability.resolve}catch(e){handlerResult=e,f=promiseCapability.reject}f(handlerResult)},fulfillPromise=function(promise,value){var _promise=promise._promise,length=_promise.reactionLength;if(length>0&&(enqueuePromiseReactionJob(_promise.fulfillReactionHandler0,_promise.reactionCapability0,value),_promise.fulfillReactionHandler0=void 0,_promise.rejectReactions0=void 0,_promise.reactionCapability0=void 0,length>1))for(var i=1,idx=0;i<length;i++,idx+=3)enqueuePromiseReactionJob(_promise[idx+0],_promise[idx+2],value),promise[idx+0]=void 0,promise[idx+1]=void 0,promise[idx+2]=void 0;_promise.result=value,_promise.state=1,_promise.reactionLength=0},rejectPromise=function(promise,reason){var _promise=promise._promise,length=_promise.reactionLength;if(length>0&&(enqueuePromiseReactionJob(_promise.rejectReactionHandler0,_promise.reactionCapability0,reason),_promise.fulfillReactionHandler0=void 0,_promise.rejectReactions0=void 0,_promise.reactionCapability0=void 0,length>1))for(var i=1,idx=0;i<length;i++,idx+=3)enqueuePromiseReactionJob(_promise[idx+1],_promise[idx+2],reason),promise[idx+0]=void 0,promise[idx+1]=void 0,promise[idx+2]=void 0;_promise.result=reason,_promise.state=2,_promise.reactionLength=0},createResolvingFunctions=function(promise){var alreadyResolved=!1;return{resolve:function(resolution){var then;if(!alreadyResolved){if(alreadyResolved=!0,resolution===promise)return rejectPromise(promise,new TypeError("Self resolution"));if(!ES.TypeIsObject(resolution))return fulfillPromise(promise,resolution);try{then=resolution.then}catch(e){return rejectPromise(promise,e)}if(!ES.IsCallable(then))return fulfillPromise(promise,resolution);enqueue(function(){promiseResolveThenableJob(promise,resolution,then)})}},reject:function(reason){if(!alreadyResolved)return alreadyResolved=!0,rejectPromise(promise,reason)}}},optimizedThen=function(then,thenable,resolve,reject){then===Promise$prototype$then?_call(then,thenable,resolve,reject,PROMISE_FAKE_CAPABILITY):_call(then,thenable,resolve,reject)},promiseResolveThenableJob=function(promise,thenable,then){var resolvingFunctions=createResolvingFunctions(promise),resolve=resolvingFunctions.resolve,reject=resolvingFunctions.reject;try{optimizedThen(then,thenable,resolve,reject)}catch(e){reject(e)}},Promise=PromiseShim=function(resolver){if(!(this instanceof PromiseShim))throw new TypeError('Constructor Promise requires "new"');if(this&&this._promise)throw new TypeError("Bad construction");if(!ES.IsCallable(resolver))throw new TypeError("not a valid resolver");var promise=emulateES6construct(this,PromiseShim,Promise$prototype,{_promise:{result:void 0,state:0,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}}),resolvingFunctions=createResolvingFunctions(promise),reject=resolvingFunctions.reject;try{resolver(resolvingFunctions.resolve,reject)}catch(e){reject(e)}return promise};Promise$prototype=Promise.prototype;var _promiseAllResolver=function(index,values,capability,remaining){var alreadyCalled=!1;return function(x){if(!alreadyCalled&&(alreadyCalled=!0,values[index]=x,0==--remaining.count)){var resolve=capability.resolve;resolve(values)}}};return defineProperties(Promise,{all:function(iterable){var C=this;if(!ES.TypeIsObject(C))throw new TypeError("Promise is not object");var iterator,iteratorRecord,capability=new PromiseCapability(C);try{return iterator=ES.GetIterator(iterable),function(iteratorRecord,C,resultCapability){for(var next,nextValue,it=iteratorRecord.iterator,values=[],remaining={count:1},index=0;;){try{if(!1===(next=ES.IteratorStep(it))){iteratorRecord.done=!0;break}nextValue=next.value}catch(e){throw iteratorRecord.done=!0,e}values[index]=void 0;var nextPromise=C.resolve(nextValue),resolveElement=_promiseAllResolver(index,values,resultCapability,remaining);remaining.count+=1,optimizedThen(nextPromise.then,nextPromise,resolveElement,resultCapability.reject),index+=1}if(0==--remaining.count){var resolve=resultCapability.resolve;resolve(values)}return resultCapability.promise}(iteratorRecord={iterator:iterator,done:!1},C,capability)}catch(e){var exception=e;if(iteratorRecord&&!iteratorRecord.done)try{ES.IteratorClose(iterator,!0)}catch(ee){exception=ee}var reject=capability.reject;return reject(exception),capability.promise}},race:function(iterable){var C=this;if(!ES.TypeIsObject(C))throw new TypeError("Promise is not object");var iterator,iteratorRecord,capability=new PromiseCapability(C);try{return iterator=ES.GetIterator(iterable),function(iteratorRecord,C,resultCapability){for(var next,nextValue,nextPromise,it=iteratorRecord.iterator;;){try{if(!1===(next=ES.IteratorStep(it))){iteratorRecord.done=!0;break}nextValue=next.value}catch(e){throw iteratorRecord.done=!0,e}nextPromise=C.resolve(nextValue),optimizedThen(nextPromise.then,nextPromise,resultCapability.resolve,resultCapability.reject)}return resultCapability.promise}(iteratorRecord={iterator:iterator,done:!1},C,capability)}catch(e){var exception=e;if(iteratorRecord&&!iteratorRecord.done)try{ES.IteratorClose(iterator,!0)}catch(ee){exception=ee}var reject=capability.reject;return reject(exception),capability.promise}},reject:function(reason){if(!ES.TypeIsObject(this))throw new TypeError("Bad promise constructor");var capability=new PromiseCapability(this),rejectFunc=capability.reject;return rejectFunc(reason),capability.promise},resolve:function(v){var C=this;if(!ES.TypeIsObject(C))throw new TypeError("Bad promise constructor");if(ES.IsPromise(v)){var constructor=v.constructor;if(constructor===C)return v}var capability=new PromiseCapability(C),resolveFunc=capability.resolve;return resolveFunc(v),capability.promise}}),defineProperties(Promise$prototype,{catch:function(onRejected){return this.then(null,onRejected)},then:function(onFulfilled,onRejected){if(!ES.IsPromise(this))throw new TypeError("not a promise");var resultCapability,C=ES.SpeciesConstructor(this,Promise),returnValueIsIgnored=arguments.length>2&&arguments[2]===PROMISE_FAKE_CAPABILITY;resultCapability=returnValueIsIgnored&&C===Promise?PROMISE_FAKE_CAPABILITY:new PromiseCapability(C);var value,fulfillReactionHandler=ES.IsCallable(onFulfilled)?onFulfilled:PROMISE_IDENTITY,rejectReactionHandler=ES.IsCallable(onRejected)?onRejected:PROMISE_THROWER,_promise=this._promise;if(0===_promise.state){if(0===_promise.reactionLength)_promise.fulfillReactionHandler0=fulfillReactionHandler,_promise.rejectReactionHandler0=rejectReactionHandler,_promise.reactionCapability0=resultCapability;else{var idx=3*(_promise.reactionLength-1);_promise[idx+0]=fulfillReactionHandler,_promise[idx+1]=rejectReactionHandler,_promise[idx+2]=resultCapability}_promise.reactionLength+=1}else if(1===_promise.state)value=_promise.result,enqueuePromiseReactionJob(fulfillReactionHandler,resultCapability,value);else{if(2!==_promise.state)throw new TypeError("unexpected Promise state");value=_promise.result,enqueuePromiseReactionJob(rejectReactionHandler,resultCapability,value)}return resultCapability.promise}}),PROMISE_FAKE_CAPABILITY=new PromiseCapability(Promise),Promise$prototype$then=Promise$prototype.then,Promise}}();if(globals.Promise&&(delete globals.Promise.accept,delete globals.Promise.defer,delete globals.Promise.prototype.chain),"function"==typeof PromiseShim){defineProperties(globals,{Promise:PromiseShim});var promiseSupportsSubclassing=supportsSubclassing(globals.Promise,function(S){return S.resolve(42).then(function(){})instanceof S}),promiseIgnoresNonFunctionThenCallbacks=!throwsError(function(){return globals.Promise.reject(42).then(null,5).then(null,noop)}),promiseRequiresObjectContext=throwsError(function(){return globals.Promise.call(3,noop)}),promiseResolveBroken=function(Promise){var p=Promise.resolve(5);p.constructor={};var p2=Promise.resolve(p);try{p2.then(null,noop).then(null,noop)}catch(e){return!0}return p===p2}(globals.Promise),getsThenSynchronously=supportsDescriptors&&(count=0,thenable=Object.defineProperty({},"then",{get:function(){count+=1}}),Promise.resolve(thenable),1===count),BadResolverPromise=function BadResolverPromise(executor){var p=new Promise(executor);executor(3,function(){}),this.then=p.then,this.constructor=BadResolverPromise};BadResolverPromise.prototype=Promise.prototype,BadResolverPromise.all=Promise.all;var hasBadResolverPromise=valueOrFalseIfThrows(function(){return!!BadResolverPromise.all([1,2])});if(promiseSupportsSubclassing&&promiseIgnoresNonFunctionThenCallbacks&&promiseRequiresObjectContext&&!promiseResolveBroken&&getsThenSynchronously&&!hasBadResolverPromise||(Promise=PromiseShim,overrideNative(globals,"Promise",PromiseShim)),1!==Promise.all.length){var origAll=Promise.all;overrideNative(Promise,"all",function(iterable){return ES.Call(origAll,this,arguments)})}if(1!==Promise.race.length){var origRace=Promise.race;overrideNative(Promise,"race",function(iterable){return ES.Call(origRace,this,arguments)})}if(1!==Promise.resolve.length){var origResolve=Promise.resolve;overrideNative(Promise,"resolve",function(x){return ES.Call(origResolve,this,arguments)})}if(1!==Promise.reject.length){var origReject=Promise.reject;overrideNative(Promise,"reject",function(r){return ES.Call(origReject,this,arguments)})}ensureEnumerable(Promise,"all"),ensureEnumerable(Promise,"race"),ensureEnumerable(Promise,"resolve"),ensureEnumerable(Promise,"reject"),addDefaultSpecies(Promise)}var s,m,testOrder=function(a){var b=keys(_reduce(a,function(o,k){return o[k]=!0,o},{}));return a.join(":")===b.join(":")},preservesInsertionOrder=testOrder(["z","a","bb"]),preservesNumericInsertionOrder=testOrder(["z",1,"a","3",2]);if(supportsDescriptors){var fastkey=function(key,skipInsertionOrderCheck){return skipInsertionOrderCheck||preservesInsertionOrder?isNullOrUndefined(key)?"^"+ES.ToString(key):"string"==typeof key?"$"+key:"number"==typeof key?preservesNumericInsertionOrder?key:"n"+key:"boolean"==typeof key?"b"+key:null:null},emptyObject=function(){return Object.create?Object.create(null):{}},addIterableToMap=function(MapConstructor,map,iterable){if(isArray(iterable)||Type.string(iterable))_forEach(iterable,function(entry){if(!ES.TypeIsObject(entry))throw new TypeError("Iterator value "+entry+" is not an entry object");map.set(entry[0],entry[1])});else if(iterable instanceof MapConstructor)_call(MapConstructor.prototype.forEach,iterable,function(value,key){map.set(key,value)});else{var iter,adder;if(!isNullOrUndefined(iterable)){if(adder=map.set,!ES.IsCallable(adder))throw new TypeError("bad map");iter=ES.GetIterator(iterable)}if(void 0!==iter)for(;;){var next=ES.IteratorStep(iter);if(!1===next)break;var nextItem=next.value;try{if(!ES.TypeIsObject(nextItem))throw new TypeError("Iterator value "+nextItem+" is not an entry object");_call(adder,map,nextItem[0],nextItem[1])}catch(e){throw ES.IteratorClose(iter,!0),e}}}},addIterableToSet=function(SetConstructor,set,iterable){if(isArray(iterable)||Type.string(iterable))_forEach(iterable,function(value){set.add(value)});else if(iterable instanceof SetConstructor)_call(SetConstructor.prototype.forEach,iterable,function(value){set.add(value)});else{var iter,adder;if(!isNullOrUndefined(iterable)){if(adder=set.add,!ES.IsCallable(adder))throw new TypeError("bad set");iter=ES.GetIterator(iterable)}if(void 0!==iter)for(;;){var next=ES.IteratorStep(iter);if(!1===next)break;var nextValue=next.value;try{_call(adder,set,nextValue)}catch(e){throw ES.IteratorClose(iter,!0),e}}}},collectionShims={Map:function(){var empty={},MapEntry=function(key,value){this.key=key,this.value=value,this.next=null,this.prev=null};MapEntry.prototype.isRemoved=function(){return this.key===empty};var Map$prototype,requireMapSlot=function(map,method){if(!ES.TypeIsObject(map)||!function(map){return!!map._es6map}(map))throw new TypeError("Method Map.prototype."+method+" called on incompatible receiver "+ES.ToString(map))},MapIterator=function(map,kind){requireMapSlot(map,"[[MapIterator]]"),this.head=map._head,this.i=this.head,this.kind=kind};addIterator(MapIterator.prototype={isMapIterator:!0,next:function(){if(!this.isMapIterator)throw new TypeError("Not a MapIterator");var result,i=this.i,kind=this.kind,head=this.head;if(void 0===this.i)return iteratorResult();for(;i.isRemoved()&&i!==head;)i=i.prev;for(;i.next!==head;)if(!(i=i.next).isRemoved())return result="key"===kind?i.key:"value"===kind?i.value:[i.key,i.value],this.i=i,iteratorResult(result);return this.i=void 0,iteratorResult()}});var MapShim=function Map(){if(!(this instanceof Map))throw new TypeError('Constructor Map requires "new"');if(this&&this._es6map)throw new TypeError("Bad construction");var map=emulateES6construct(this,Map,Map$prototype,{_es6map:!0,_head:null,_map:OrigMap?new OrigMap:null,_size:0,_storage:emptyObject()}),head=new MapEntry(null,null);return head.next=head.prev=head,map._head=head,arguments.length>0&&addIterableToMap(Map,map,arguments[0]),map};return Value.getter(Map$prototype=MapShim.prototype,"size",function(){if(void 0===this._size)throw new TypeError("size method called on incompatible Map");return this._size}),defineProperties(Map$prototype,{get:function(key){var entry;requireMapSlot(this,"get");var fkey=fastkey(key,!0);if(null!==fkey)return(entry=this._storage[fkey])?entry.value:void 0;if(this._map)return(entry=origMapGet.call(this._map,key))?entry.value:void 0;for(var head=this._head,i=head;(i=i.next)!==head;)if(ES.SameValueZero(i.key,key))return i.value},has:function(key){requireMapSlot(this,"has");var fkey=fastkey(key,!0);if(null!==fkey)return void 0!==this._storage[fkey];if(this._map)return origMapHas.call(this._map,key);for(var head=this._head,i=head;(i=i.next)!==head;)if(ES.SameValueZero(i.key,key))return!0;return!1},set:function(key,value){requireMapSlot(this,"set");var entry,head=this._head,i=head,fkey=fastkey(key,!0);if(null!==fkey){if(void 0!==this._storage[fkey])return this._storage[fkey].value=value,this;entry=this._storage[fkey]=new MapEntry(key,value),i=head.prev}else this._map&&(origMapHas.call(this._map,key)?origMapGet.call(this._map,key).value=value:(entry=new MapEntry(key,value),origMapSet.call(this._map,key,entry),i=head.prev));for(;(i=i.next)!==head;)if(ES.SameValueZero(i.key,key))return i.value=value,this;return entry=entry||new MapEntry(key,value),ES.SameValue(-0,key)&&(entry.key=0),entry.next=this._head,entry.prev=this._head.prev,entry.prev.next=entry,entry.next.prev=entry,this._size+=1,this},delete:function(key){requireMapSlot(this,"delete");var head=this._head,i=head,fkey=fastkey(key,!0);if(null!==fkey){if(void 0===this._storage[fkey])return!1;i=this._storage[fkey].prev,delete this._storage[fkey]}else if(this._map){if(!origMapHas.call(this._map,key))return!1;i=origMapGet.call(this._map,key).prev,origMapDelete.call(this._map,key)}for(;(i=i.next)!==head;)if(ES.SameValueZero(i.key,key))return i.key=empty,i.value=empty,i.prev.next=i.next,i.next.prev=i.prev,this._size-=1,!0;return!1},clear:function(){requireMapSlot(this,"clear"),this._map=OrigMap?new OrigMap:null,this._size=0,this._storage=emptyObject();for(var head=this._head,i=head,p=i.next;(i=p)!==head;)i.key=empty,i.value=empty,p=i.next,i.next=i.prev=head;head.next=head.prev=head},keys:function(){return requireMapSlot(this,"keys"),new MapIterator(this,"key")},values:function(){return requireMapSlot(this,"values"),new MapIterator(this,"value")},entries:function(){return requireMapSlot(this,"entries"),new MapIterator(this,"key+value")},forEach:function(callback){requireMapSlot(this,"forEach");for(var context=arguments.length>1?arguments[1]:null,it=this.entries(),entry=it.next();!entry.done;entry=it.next())context?_call(callback,context,entry.value[1],entry.value[0],this):callback(entry.value[1],entry.value[0],this)}}),addIterator(Map$prototype,Map$prototype.entries),MapShim}(),Set:function(){var Set$prototype,requireSetSlot=function(set,method){if(!ES.TypeIsObject(set)||!function(set){return set._es6set&&void 0!==set._storage}(set))throw new TypeError("Set.prototype."+method+" called on incompatible receiver "+ES.ToString(set))},SetShim=function Set(){if(!(this instanceof Set))throw new TypeError('Constructor Set requires "new"');if(this&&this._es6set)throw new TypeError("Bad construction");var set=emulateES6construct(this,Set,Set$prototype,{_es6set:!0,"[[SetData]]":null,_storage:emptyObject()});if(!set._es6set)throw new TypeError("bad set");return arguments.length>0&&addIterableToSet(Set,set,arguments[0]),set};Set$prototype=SetShim.prototype;var ensureMap=function(set){if(!set["[[SetData]]"]){var m=new collectionShims.Map;set["[[SetData]]"]=m,_forEach(keys(set._storage),function(key){var k=function(key){var k=key;if("^null"===k)return null;if("^undefined"!==k){var first=k.charAt(0);return"$"===first?_strSlice(k,1):"n"===first?+_strSlice(k,1):"b"===first?"btrue"===k:+k}}(key);m.set(k,k)}),set["[[SetData]]"]=m}set._storage=null};Value.getter(SetShim.prototype,"size",function(){return requireSetSlot(this,"size"),this._storage?keys(this._storage).length:(ensureMap(this),this["[[SetData]]"].size)}),defineProperties(SetShim.prototype,{has:function(key){var fkey;return requireSetSlot(this,"has"),this._storage&&null!==(fkey=fastkey(key))?!!this._storage[fkey]:(ensureMap(this),this["[[SetData]]"].has(key))},add:function(key){var fkey;return requireSetSlot(this,"add"),this._storage&&null!==(fkey=fastkey(key))?(this._storage[fkey]=!0,this):(ensureMap(this),this["[[SetData]]"].set(key,key),this)},delete:function(key){var fkey;if(requireSetSlot(this,"delete"),this._storage&&null!==(fkey=fastkey(key))){var hasFKey=_hasOwnProperty(this._storage,fkey);return delete this._storage[fkey]&&hasFKey}return ensureMap(this),this["[[SetData]]"].delete(key)},clear:function(){requireSetSlot(this,"clear"),this._storage&&(this._storage=emptyObject()),this["[[SetData]]"]&&this["[[SetData]]"].clear()},values:function(){return requireSetSlot(this,"values"),ensureMap(this),new SetIterator(this["[[SetData]]"].values())},entries:function(){return requireSetSlot(this,"entries"),ensureMap(this),new SetIterator(this["[[SetData]]"].entries())},forEach:function(callback){requireSetSlot(this,"forEach");var context=arguments.length>1?arguments[1]:null,entireSet=this;ensureMap(entireSet),this["[[SetData]]"].forEach(function(value,key){context?_call(callback,context,key,key,entireSet):callback(key,key,entireSet)})}}),defineProperty(SetShim.prototype,"keys",SetShim.prototype.values,!0),addIterator(SetShim.prototype,SetShim.prototype.values);var SetIterator=function(it){this.it=it};return SetIterator.prototype={isSetIterator:!0,next:function(){if(!this.isSetIterator)throw new TypeError("Not a SetIterator");return this.it.next()}},addIterator(SetIterator.prototype),SetShim}()},isGoogleTranslate=globals.Set&&!Set.prototype.delete&&Set.prototype.remove&&Set.prototype.items&&Set.prototype.map&&Array.isArray((new Set).keys);if(isGoogleTranslate&&(globals.Set=collectionShims.Set),globals.Map||globals.Set){var mapAcceptsArguments=valueOrFalseIfThrows(function(){return 2===new Map([[1,2]]).get(1)});mapAcceptsArguments||(globals.Map=function Map(){if(!(this instanceof Map))throw new TypeError('Constructor Map requires "new"');var m=new OrigMap;return arguments.length>0&&addIterableToMap(Map,m,arguments[0]),delete m.constructor,Object.setPrototypeOf(m,globals.Map.prototype),m},globals.Map.prototype=create(OrigMap.prototype),defineProperty(globals.Map.prototype,"constructor",globals.Map,!0),Value.preserveToString(globals.Map,OrigMap));var testMap=new Map,mapUsesSameValueZero=((m=new Map([[1,0],[2,0],[3,0],[4,0]])).set(-0,m),m.get(0)===m&&m.get(-0)===m&&m.has(0)&&m.has(-0)),mapSupportsChaining=testMap.set(1,2)===testMap;mapUsesSameValueZero&&mapSupportsChaining||overrideNative(Map.prototype,"set",function(k,v){return _call(origMapSet,this,0===k?0:k,v),this}),mapUsesSameValueZero||(defineProperties(Map.prototype,{get:function(k){return _call(origMapGet,this,0===k?0:k)},has:function(k){return _call(origMapHas,this,0===k?0:k)}},!0),Value.preserveToString(Map.prototype.get,origMapGet),Value.preserveToString(Map.prototype.has,origMapHas));var testSet=new Set,setUsesSameValueZero=Set.prototype.delete&&Set.prototype.add&&Set.prototype.has&&((s=testSet).delete(0),s.add(-0),!s.has(0)),setSupportsChaining=testSet.add(1)===testSet;if(!setUsesSameValueZero||!setSupportsChaining){var origSetAdd=Set.prototype.add;Set.prototype.add=function(v){return _call(origSetAdd,this,0===v?0:v),this},Value.preserveToString(Set.prototype.add,origSetAdd)}if(!setUsesSameValueZero){var origSetHas=Set.prototype.has;Set.prototype.has=function(v){return _call(origSetHas,this,0===v?0:v)},Value.preserveToString(Set.prototype.has,origSetHas);var origSetDel=Set.prototype.delete;Set.prototype.delete=function(v){return _call(origSetDel,this,0===v?0:v)},Value.preserveToString(Set.prototype.delete,origSetDel)}var mapSupportsSubclassing=supportsSubclassing(globals.Map,function(M){var m=new M([]);return m.set(42,42),m instanceof M}),mapFailsToSupportSubclassing=Object.setPrototypeOf&&!mapSupportsSubclassing,mapRequiresNew=function(){try{return!(globals.Map()instanceof globals.Map)}catch(e){return e instanceof TypeError}}();0===globals.Map.length&&!mapFailsToSupportSubclassing&&mapRequiresNew||(globals.Map=function Map(){if(!(this instanceof Map))throw new TypeError('Constructor Map requires "new"');var m=new OrigMap;return arguments.length>0&&addIterableToMap(Map,m,arguments[0]),delete m.constructor,Object.setPrototypeOf(m,Map.prototype),m},globals.Map.prototype=OrigMap.prototype,defineProperty(globals.Map.prototype,"constructor",globals.Map,!0),Value.preserveToString(globals.Map,OrigMap));var setSupportsSubclassing=supportsSubclassing(globals.Set,function(S){var s=new S([]);return s.add(42,42),s instanceof S}),setFailsToSupportSubclassing=Object.setPrototypeOf&&!setSupportsSubclassing,setRequiresNew=function(){try{return!(globals.Set()instanceof globals.Set)}catch(e){return e instanceof TypeError}}();if(0!==globals.Set.length||setFailsToSupportSubclassing||!setRequiresNew){var OrigSet=globals.Set;globals.Set=function Set(){if(!(this instanceof Set))throw new TypeError('Constructor Set requires "new"');var s=new OrigSet;return arguments.length>0&&addIterableToSet(Set,s,arguments[0]),delete s.constructor,Object.setPrototypeOf(s,Set.prototype),s},globals.Set.prototype=OrigSet.prototype,defineProperty(globals.Set.prototype,"constructor",globals.Set,!0),Value.preserveToString(globals.Set,OrigSet)}var newMap=new globals.Map,mapIterationThrowsStopIterator=!valueOrFalseIfThrows(function(){return newMap.keys().next().done});if(("function"!=typeof globals.Map.prototype.clear||0!==(new globals.Set).size||0!==newMap.size||"function"!=typeof globals.Map.prototype.keys||"function"!=typeof globals.Set.prototype.keys||"function"!=typeof globals.Map.prototype.forEach||"function"!=typeof globals.Set.prototype.forEach||isCallableWithoutNew(globals.Map)||isCallableWithoutNew(globals.Set)||"function"!=typeof newMap.keys().next||mapIterationThrowsStopIterator||!mapSupportsSubclassing)&&defineProperties(globals,{Map:collectionShims.Map,Set:collectionShims.Set},!0),globals.Set.prototype.keys!==globals.Set.prototype.values&&defineProperty(globals.Set.prototype,"keys",globals.Set.prototype.values,!0),addIterator(Object.getPrototypeOf((new globals.Map).keys())),addIterator(Object.getPrototypeOf((new globals.Set).keys())),functionsHaveNames&&"has"!==globals.Set.prototype.has.name){var anonymousSetHas=globals.Set.prototype.has;overrideNative(globals.Set.prototype,"has",function(key){return _call(anonymousSetHas,this,key)})}}defineProperties(globals,collectionShims),addDefaultSpecies(globals.Map),addDefaultSpecies(globals.Set)}var throwUnlessTargetIsObject=function(target){if(!ES.TypeIsObject(target))throw new TypeError("target must be an object")},ReflectShims={apply:function(){return ES.Call(ES.Call,null,arguments)},construct:function(constructor,args){if(!ES.IsConstructor(constructor))throw new TypeError("First argument must be a constructor.");var newTarget=arguments.length>2?arguments[2]:constructor;if(!ES.IsConstructor(newTarget))throw new TypeError("new.target must be a constructor.");return ES.Construct(constructor,args,newTarget,"internal")},deleteProperty:function(target,key){if(throwUnlessTargetIsObject(target),supportsDescriptors){var desc=Object.getOwnPropertyDescriptor(target,key);if(desc&&!desc.configurable)return!1}return delete target[key]},has:function(target,key){return throwUnlessTargetIsObject(target),key in target}};Object.getOwnPropertyNames&&Object.assign(ReflectShims,{ownKeys:function(target){throwUnlessTargetIsObject(target);var keys=Object.getOwnPropertyNames(target);return ES.IsCallable(Object.getOwnPropertySymbols)&&_pushApply(keys,Object.getOwnPropertySymbols(target)),keys}});var callAndCatchException=function(func){return!throwsError(func)};if(Object.preventExtensions&&Object.assign(ReflectShims,{isExtensible:function(target){return throwUnlessTargetIsObject(target),Object.isExtensible(target)},preventExtensions:function(target){return throwUnlessTargetIsObject(target),callAndCatchException(function(){return Object.preventExtensions(target)})}}),supportsDescriptors){var internalGet=function(target,key,receiver){var desc=Object.getOwnPropertyDescriptor(target,key);if(!desc){var parent=Object.getPrototypeOf(target);if(null===parent)return;return internalGet(parent,key,receiver)}return"value"in desc?desc.value:desc.get?ES.Call(desc.get,receiver):void 0},internalSet=function(target,key,value,receiver){var desc=Object.getOwnPropertyDescriptor(target,key);if(!desc){var parent=Object.getPrototypeOf(target);if(null!==parent)return internalSet(parent,key,value,receiver);desc={value:void 0,writable:!0,enumerable:!0,configurable:!0}}if("value"in desc){if(!desc.writable)return!1;if(!ES.TypeIsObject(receiver))return!1;var existingDesc=Object.getOwnPropertyDescriptor(receiver,key);return existingDesc?Reflect.defineProperty(receiver,key,{value:value}):Reflect.defineProperty(receiver,key,{value:value,writable:!0,enumerable:!0,configurable:!0})}return!!desc.set&&(_call(desc.set,receiver,value),!0)};Object.assign(ReflectShims,{defineProperty:function(target,propertyKey,attributes){return throwUnlessTargetIsObject(target),callAndCatchException(function(){return Object.defineProperty(target,propertyKey,attributes)})},getOwnPropertyDescriptor:function(target,propertyKey){return throwUnlessTargetIsObject(target),Object.getOwnPropertyDescriptor(target,propertyKey)},get:function(target,key){throwUnlessTargetIsObject(target);var receiver=arguments.length>2?arguments[2]:target;return internalGet(target,key,receiver)},set:function(target,key,value){throwUnlessTargetIsObject(target);var receiver=arguments.length>3?arguments[3]:target;return internalSet(target,key,value,receiver)}})}if(Object.getPrototypeOf){var objectDotGetPrototypeOf=Object.getPrototypeOf;ReflectShims.getPrototypeOf=function(target){return throwUnlessTargetIsObject(target),objectDotGetPrototypeOf(target)}}Object.setPrototypeOf&&ReflectShims.getPrototypeOf&&Object.assign(ReflectShims,{setPrototypeOf:function(object,proto){if(throwUnlessTargetIsObject(object),null!==proto&&!ES.TypeIsObject(proto))throw new TypeError("proto must be an object or null");return proto===Reflect.getPrototypeOf(object)||!(Reflect.isExtensible&&!Reflect.isExtensible(object))&&!function(object,lastProto){for(var proto=lastProto;proto;){if(object===proto)return!0;proto=ReflectShims.getPrototypeOf(proto)}return!1}(object,proto)&&(Object.setPrototypeOf(object,proto),!0)}}),Object.keys(ReflectShims).forEach(function(key){!function(key,shim){if(ES.IsCallable(globals.Reflect[key])){var acceptsPrimitives=valueOrFalseIfThrows(function(){return globals.Reflect[key](1),globals.Reflect[key](NaN),globals.Reflect[key](!0),!0});acceptsPrimitives&&overrideNative(globals.Reflect,key,shim)}else defineProperty(globals.Reflect,key,shim)}(key,ReflectShims[key])});var originalReflectGetProto=globals.Reflect.getPrototypeOf;if(functionsHaveNames&&originalReflectGetProto&&"getPrototypeOf"!==originalReflectGetProto.name&&overrideNative(globals.Reflect,"getPrototypeOf",function(target){return _call(originalReflectGetProto,globals.Reflect,target)}),globals.Reflect.setPrototypeOf&&valueOrFalseIfThrows(function(){return globals.Reflect.setPrototypeOf(1,{}),!0})&&overrideNative(globals.Reflect,"setPrototypeOf",ReflectShims.setPrototypeOf),globals.Reflect.defineProperty&&(valueOrFalseIfThrows(function(){var basic=!globals.Reflect.defineProperty(1,"test",{value:1}),extensible="function"!=typeof Object.preventExtensions||!globals.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return basic&&extensible})||overrideNative(globals.Reflect,"defineProperty",ReflectShims.defineProperty)),globals.Reflect.construct&&(valueOrFalseIfThrows(function(){var F=function(){};return globals.Reflect.construct(function(){},[],F)instanceof F})||overrideNative(globals.Reflect,"construct",ReflectShims.construct)),"Invalid Date"!==String(new Date(NaN))){var dateToString=Date.prototype.toString;overrideNative(Date.prototype,"toString",function(){var valueOf=+this;return valueOf!=valueOf?"Invalid Date":ES.Call(dateToString,this)})}var stringHTMLshims={anchor:function(name){return ES.CreateHTML(this,"a","name",name)},big:function(){return ES.CreateHTML(this,"big","","")},blink:function(){return ES.CreateHTML(this,"blink","","")},bold:function(){return ES.CreateHTML(this,"b","","")},fixed:function(){return ES.CreateHTML(this,"tt","","")},fontcolor:function(color){return ES.CreateHTML(this,"font","color",color)},fontsize:function(size){return ES.CreateHTML(this,"font","size",size)},italics:function(){return ES.CreateHTML(this,"i","","")},link:function(url){return ES.CreateHTML(this,"a","href",url)},small:function(){return ES.CreateHTML(this,"small","","")},strike:function(){return ES.CreateHTML(this,"strike","","")},sub:function(){return ES.CreateHTML(this,"sub","","")},sup:function(){return ES.CreateHTML(this,"sup","","")}};_forEach(Object.keys(stringHTMLshims),function(key){var method=String.prototype[key],shouldOverwrite=!1;if(ES.IsCallable(method)){var output=_call(method,"",' " '),quotesCount=_concat([],output.match(/"/g)).length;shouldOverwrite=output!==output.toLowerCase()||quotesCount>2}else shouldOverwrite=!0;shouldOverwrite&&overrideNative(String.prototype,key,stringHTMLshims[key])});var JSONstringifiesSymbols=function(){if(!hasSymbols)return!1;var stringify="object"==typeof JSON&&"function"==typeof JSON.stringify?JSON.stringify:null;if(!stringify)return!1;if(void 0!==stringify(Symbol()))return!0;if("[null]"!==stringify([Symbol()]))return!0;var obj={a:Symbol()};return obj[Symbol()]=!0,"{}"!==stringify(obj)}(),JSONstringifyAcceptsObjectSymbol=valueOrFalseIfThrows(function(){return!hasSymbols||"{}"===JSON.stringify(Object(Symbol()))&&"[{}]"===JSON.stringify([Object(Symbol())])});if(JSONstringifiesSymbols||!JSONstringifyAcceptsObjectSymbol){var origStringify=JSON.stringify;overrideNative(JSON,"stringify",function(value){if("symbol"!=typeof value){var replacer;arguments.length>1&&(replacer=arguments[1]);var args=[value];if(isArray(replacer))args.push(replacer);else{var replaceFn=ES.IsCallable(replacer)?replacer:null;args.push(function(key,val){var parsedValue=replaceFn?_call(replaceFn,this,key,val):val;if("symbol"!=typeof parsedValue)return Type.symbol(parsedValue)?assignTo({})(parsedValue):parsedValue})}return arguments.length>2&&args.push(arguments[2]),origStringify.apply(this,args)}})}return globals})?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}).call(this,__webpack_require__(17),__webpack_require__(44))},function(module,exports,__webpack_require__){"use strict";var supportsDescriptors=__webpack_require__(23).supportsDescriptors,functionsHaveNames=__webpack_require__(233),getPolyfill=__webpack_require__(411),defineProperty=Object.defineProperty,TypeErr=TypeError;module.exports=function(){var polyfill=getPolyfill();if(functionsHaveNames)return polyfill;if(!supportsDescriptors)throw new TypeErr("Shimming Function.prototype.name support requires ES5 property descriptor support.");var functionProto=Function.prototype;return defineProperty(functionProto,"name",{configurable:!0,enumerable:!1,get:function(){var name=polyfill.call(this);return this!==functionProto&&defineProperty(this,"name",{configurable:!0,enumerable:!1,value:name,writable:!1}),name}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var toStr=Object.prototype.toString;module.exports=function(value){var str=toStr.call(value),isArgs="[object Arguments]"===str;return isArgs||(isArgs="[object Array]"!==str&&null!==value&&"object"==typeof value&&"number"==typeof value.length&&value.length>=0&&"[object Function]"===toStr.call(value.callee)),isArgs}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(412);module.exports=function(){return implementation}},function(module,exports,__webpack_require__){"use strict";var isCallable=__webpack_require__(119),functionsHaveNames=__webpack_require__(233),bind=__webpack_require__(38),functionToString=bind.call(Function.call,Function.prototype.toString),stringMatch=bind.call(Function.call,String.prototype.match),classRegex=/^class /,regex=/\s*function\s+([^(\s]*)\s*/,functionProto=Function.prototype;module.exports=function(){if(!function(fn){if(isCallable(fn))return!1;if("function"!=typeof fn)return!1;try{return!!stringMatch(functionToString(fn),classRegex)}catch(e){}return!1}(this)&&!isCallable(this))throw new TypeError("Function.prototype.name sham getter called on non-function");if(functionsHaveNames)return this.name;if(this===functionProto)return"";var str=functionToString(this),match=stringMatch(str,regex);return match&&match[1]}},function(module,exports,__webpack_require__){"use strict";var slice=Array.prototype.slice,toStr=Object.prototype.toString;module.exports=function(that){var target=this;if("function"!=typeof target||"[object Function]"!==toStr.call(target))throw new TypeError("Function.prototype.bind called on incompatible "+target);for(var bound,args=slice.call(arguments,1),boundLength=Math.max(0,target.length-args.length),boundArgs=[],i=0;i<boundLength;i++)boundArgs.push("$"+i);if(bound=Function("binder","return function ("+boundArgs.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof bound){var result=target.apply(this,args.concat(slice.call(arguments)));return Object(result)===result?result:this}return target.apply(that,args.concat(slice.call(arguments)))}),target.prototype){var Empty=function(){};Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null}return bound}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(415)(),__webpack_require__(427)},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(23),getPolyfill=__webpack_require__(416);module.exports=function(){var polyfill=getPolyfill();return define(Array.prototype,{includes:polyfill},{includes:function(){return Array.prototype.includes!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(417);module.exports=function(){return Array.prototype.includes||implementation}},function(module,exports,__webpack_require__){"use strict";(function(global){var ES=__webpack_require__(418),$isNaN=Number.isNaN||function(a){return a!=a},$isFinite=Number.isFinite||function(n){return"number"==typeof n&&global.isFinite(n)},indexOf=Array.prototype.indexOf;module.exports=function(searchElement){var fromIndex=arguments.length>1?ES.ToInteger(arguments[1]):0;if(indexOf&&!$isNaN(searchElement)&&$isFinite(fromIndex)&&void 0!==searchElement)return indexOf.apply(this,arguments)>-1;var O=ES.ToObject(this),length=ES.ToLength(O.length);if(0===length)return!1;for(var k=fromIndex>=0?fromIndex:Math.max(0,length+fromIndex);k<length;){if(ES.SameValueZero(searchElement,O[k]))return!0;k+=1}return!1}}).call(this,__webpack_require__(17))},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(152)},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(420)},function(module,exports,__webpack_require__){"use strict";var hasSymbols="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,isPrimitive=__webpack_require__(234),isCallable=__webpack_require__(119),isDate=__webpack_require__(421),isSymbol=__webpack_require__(422);module.exports=function(input){if(isPrimitive(input))return input;var exoticToPrim,hint="default";if(arguments.length>1&&(arguments[1]===String?hint="string":arguments[1]===Number&&(hint="number")),hasSymbols&&(Symbol.toPrimitive?exoticToPrim=function(O,P){var func=O[P];if(null!=func){if(!isCallable(func))throw new TypeError(func+" returned for property "+P+" of object "+O+" is not a function");return func}}(input,Symbol.toPrimitive):isSymbol(input)&&(exoticToPrim=Symbol.prototype.valueOf)),void 0!==exoticToPrim){var result=exoticToPrim.call(input,hint);if(isPrimitive(result))return result;throw new TypeError("unable to convert exotic object to primitive")}return"default"===hint&&(isDate(input)||isSymbol(input))&&(hint="string"),function(O,hint){if(null==O)throw new TypeError("Cannot call method on "+O);if("string"!=typeof hint||"number"!==hint&&"string"!==hint)throw new TypeError('hint must be "string" or "number"');var method,result,i,methodNames="string"===hint?["toString","valueOf"]:["valueOf","toString"];for(i=0;i<methodNames.length;++i)if(method=O[methodNames[i]],isCallable(method)&&(result=method.call(O),isPrimitive(result)))return result;throw new TypeError("No default value")}(input,"default"===hint?"number":hint)}},function(module,exports,__webpack_require__){"use strict";var getDay=Date.prototype.getDay,toStr=Object.prototype.toString,hasToStringTag="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;module.exports=function(value){return"object"==typeof value&&null!==value&&(hasToStringTag?function(value){try{return getDay.call(value),!0}catch(e){return!1}}(value):"[object Date]"===toStr.call(value))}},function(module,exports,__webpack_require__){"use strict";var toStr=Object.prototype.toString;if(__webpack_require__(63)()){var symToStr=Symbol.prototype.toString,symStringRegex=/^Symbol\(.*\)$/;module.exports=function(value){if("symbol"==typeof value)return!0;if("[object Symbol]"!==toStr.call(value))return!1;try{return function(value){return"symbol"==typeof value.valueOf()&&symStringRegex.test(symToStr.call(value))}(value)}catch(e){return!1}}}else module.exports=function(value){return!1}},function(module,exports,__webpack_require__){"use strict";module.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var obj={},sym=Symbol("test"),symObj=Object(sym);if("string"==typeof sym)return!1;if("[object Symbol]"!==Object.prototype.toString.call(sym))return!1;if("[object Symbol]"!==Object.prototype.toString.call(symObj))return!1;for(sym in obj[sym]=42,obj)return!1;if("function"==typeof Object.keys&&0!==Object.keys(obj).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(obj).length)return!1;var syms=Object.getOwnPropertySymbols(obj);if(1!==syms.length||syms[0]!==sym)return!1;if(!Object.prototype.propertyIsEnumerable.call(obj,sym))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var descriptor=Object.getOwnPropertyDescriptor(obj,sym);if(42!==descriptor.value||!0!==descriptor.enumerable)return!1}return!0}},function(module,exports){module.exports=function(value){return null===value||"function"!=typeof value&&"object"!=typeof value}},function(module,exports,__webpack_require__){"use strict";var toStr=Object.prototype.toString,isPrimitive=__webpack_require__(234),isCallable=__webpack_require__(119),ES5internalSlots___DefaultValue__=function(O){var actualHint;if((actualHint=arguments.length>1?arguments[1]:"[object Date]"===toStr.call(O)?String:Number)===String||actualHint===Number){var value,i,methods=actualHint===String?["toString","valueOf"]:["valueOf","toString"];for(i=0;i<methods.length;++i)if(isCallable(O[methods[i]])&&(value=O[methods[i]](),isPrimitive(value)))return value;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")};module.exports=function(input){return isPrimitive(input)?input:arguments.length>1?ES5internalSlots___DefaultValue__(input,arguments[1]):ES5internalSlots___DefaultValue__(input)}},function(module,exports,__webpack_require__){"use strict";var has=__webpack_require__(75),regexExec=RegExp.prototype.exec,gOPD=Object.getOwnPropertyDescriptor,toStr=Object.prototype.toString,hasToStringTag="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;module.exports=function(value){if(!value||"object"!=typeof value)return!1;if(!hasToStringTag)return"[object RegExp]"===toStr.call(value);var descriptor=gOPD(value,"lastIndex");return!(!descriptor||!has(descriptor,"value"))&&function(value){try{var lastIndex=value.lastIndex;return value.lastIndex=0,regexExec.call(value),!0}catch(e){return!1}finally{value.lastIndex=lastIndex}}(value)}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(428)(),__webpack_require__(431)(),__webpack_require__(434)(),__webpack_require__(437)(),__webpack_require__(440)(),__webpack_require__(443)},function(module,exports,__webpack_require__){"use strict";var getPolyfill=__webpack_require__(429),define=__webpack_require__(23);module.exports=function(){var polyfill=getPolyfill();return define(Object,{values:polyfill},{values:function(){return Object.values!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(430);module.exports=function(){return"function"==typeof Object.values?Object.values:implementation}},function(module,exports,__webpack_require__){"use strict";var ES=__webpack_require__(77),has=__webpack_require__(75),isEnumerable=__webpack_require__(38).call(Function.call,Object.prototype.propertyIsEnumerable);module.exports=function(O){var obj=ES.RequireObjectCoercible(O),vals=[];for(var key in obj)has(obj,key)&&isEnumerable(obj,key)&&vals.push(obj[key]);return vals}},function(module,exports,__webpack_require__){"use strict";var getPolyfill=__webpack_require__(432),define=__webpack_require__(23);module.exports=function(){var polyfill=getPolyfill();return define(Object,{entries:polyfill},{entries:function(){return Object.entries!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(433);module.exports=function(){return"function"==typeof Object.entries?Object.entries:implementation}},function(module,exports,__webpack_require__){"use strict";var ES=__webpack_require__(77),has=__webpack_require__(75),isEnumerable=__webpack_require__(38).call(Function.call,Object.prototype.propertyIsEnumerable);module.exports=function(O){var obj=ES.RequireObjectCoercible(O),entrys=[];for(var key in obj)has(obj,key)&&isEnumerable(obj,key)&&entrys.push([key,obj[key]]);return entrys}},function(module,exports,__webpack_require__){"use strict";var getPolyfill=__webpack_require__(435),define=__webpack_require__(23);module.exports=function(){var polyfill=getPolyfill();return define(String.prototype,{padStart:polyfill},{padStart:function(){return String.prototype.padStart!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(436);module.exports=function(){return"function"==typeof String.prototype.padStart?String.prototype.padStart:implementation}},function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(38),ES=__webpack_require__(77),slice=bind.call(Function.call,String.prototype.slice);module.exports=function(maxLength){var fillString,O=ES.RequireObjectCoercible(this),S=ES.ToString(O),stringLength=ES.ToLength(S.length);arguments.length>1&&(fillString=arguments[1]);var filler=void 0===fillString?"":ES.ToString(fillString);""===filler&&(filler=" ");var intMaxLength=ES.ToLength(maxLength);if(intMaxLength<=stringLength)return S;for(var fillLen=intMaxLength-stringLength;filler.length<fillLen;){var fLen=filler.length,remainingCodeUnits=fillLen-fLen;filler+=fLen>remainingCodeUnits?slice(filler,0,remainingCodeUnits):filler}return(filler.length>fillLen?slice(filler,0,fillLen):filler)+S}},function(module,exports,__webpack_require__){"use strict";var getPolyfill=__webpack_require__(438),define=__webpack_require__(23);module.exports=function(){var polyfill=getPolyfill();return define(String.prototype,{padEnd:polyfill},{padEnd:function(){return String.prototype.padEnd!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(439);module.exports=function(){return"function"==typeof String.prototype.padEnd?String.prototype.padEnd:implementation}},function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(38),ES=__webpack_require__(77),slice=bind.call(Function.call,String.prototype.slice);module.exports=function(maxLength){var fillString,O=ES.RequireObjectCoercible(this),S=ES.ToString(O),stringLength=ES.ToLength(S.length);arguments.length>1&&(fillString=arguments[1]);var filler=void 0===fillString?"":ES.ToString(fillString);""===filler&&(filler=" ");var intMaxLength=ES.ToLength(maxLength);if(intMaxLength<=stringLength)return S;for(var fillLen=intMaxLength-stringLength;filler.length<fillLen;){var fLen=filler.length,remainingCodeUnits=fillLen-fLen;filler+=fLen>remainingCodeUnits?slice(filler,0,remainingCodeUnits):filler}return S+(filler.length>fillLen?slice(filler,0,fillLen):filler)}},function(module,exports,__webpack_require__){"use strict";var getPolyfill=__webpack_require__(441),define=__webpack_require__(23);module.exports=function(){var polyfill=getPolyfill();return define(Object,{getOwnPropertyDescriptors:polyfill},{getOwnPropertyDescriptors:function(){return Object.getOwnPropertyDescriptors!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(442);module.exports=function(){return"function"==typeof Object.getOwnPropertyDescriptors?Object.getOwnPropertyDescriptors:implementation}},function(module,exports,__webpack_require__){"use strict";var ES=__webpack_require__(77),defineProperty=Object.defineProperty,getDescriptor=Object.getOwnPropertyDescriptor,getOwnNames=Object.getOwnPropertyNames,getSymbols=Object.getOwnPropertySymbols,concat=Function.call.bind(Array.prototype.concat),reduce=Function.call.bind(Array.prototype.reduce),getAll=getSymbols?function(obj){return concat(getOwnNames(obj),getSymbols(obj))}:getOwnNames,isES5=ES.IsCallable(getDescriptor)&&ES.IsCallable(getOwnNames);module.exports=function(value){if(ES.RequireObjectCoercible(value),!isES5)throw new TypeError("getOwnPropertyDescriptors requires Object.getOwnPropertyDescriptor");var O=ES.ToObject(value);return reduce(getAll(O),function(acc,key){var obj,prop,val,descriptor=getDescriptor(O,key);return void 0!==descriptor&&(obj=acc,prop=key,val=descriptor,defineProperty&&prop in obj?defineProperty(obj,prop,{configurable:!0,enumerable:!0,value:val,writable:!0}):obj[prop]=val),acc},{})}},function(module,exports,__webpack_require__){"use strict";"function"==typeof Promise&&__webpack_require__(444),__webpack_require__(448)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(445)()},function(module,exports,__webpack_require__){"use strict";var requirePromise=__webpack_require__(154),getPolyfill=__webpack_require__(446),define=__webpack_require__(23);module.exports=function(){requirePromise();var polyfill=getPolyfill();return define(Promise.prototype,{finally:polyfill},{finally:function(){return Promise.prototype.finally!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var requirePromise=__webpack_require__(154),implementation=__webpack_require__(447);module.exports=function(){return requirePromise(),"function"==typeof Promise.prototype.finally?Promise.prototype.finally:implementation}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(154)();var ES=__webpack_require__(77),bind=__webpack_require__(38),promiseResolve=function(C,value){return new C(function(resolve){resolve(value)})},OriginalPromise=Promise,then=bind.call(Function.call,OriginalPromise.prototype.then),promiseFinally=function(onFinally){then(this,null,function(){});var C=ES.SpeciesConstructor(this,OriginalPromise),thenFinally=onFinally,catchFinally=onFinally;return ES.IsCallable(onFinally)&&(thenFinally=function(C,onFinally){return function(value){var result=onFinally();return promiseResolve(C,result).then(function(){return value})}}(C,onFinally),catchFinally=function(C,onFinally){return function(reason){var result=onFinally();return promiseResolve(C,result).then(function(){throw reason})}}(C,onFinally)),this.then(thenFinally,catchFinally)};if(Object.getOwnPropertyDescriptor){var descriptor=Object.getOwnPropertyDescriptor(promiseFinally,"name");descriptor&&descriptor.configurable&&Object.defineProperty(promiseFinally,"name",{configurable:!0,value:"finally"})}module.exports=promiseFinally},function(module,exports,__webpack_require__){"use strict";__webpack_require__(449),__webpack_require__(453),__webpack_require__(457),__webpack_require__(461),__webpack_require__(470)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(450)()},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(23),getPolyfill=__webpack_require__(451);module.exports=function(){var polyfill=getPolyfill();return define(Array.prototype,{flat:polyfill},{flat:function(){return Array.prototype.flat!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(452);module.exports=function(){return Array.prototype.flat||implementation}},function(module,exports,__webpack_require__){"use strict";var ES=__webpack_require__(93),MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1;module.exports=function(){var O=ES.ToObject(this),sourceLen=ES.ToLength(ES.Get(O,"length")),depthNum=1;arguments.length>0&&void 0!==arguments[0]&&(depthNum=ES.ToInteger(arguments[0]));var A=ES.ArraySpeciesCreate(O,0);return function FlattenIntoArray(target,source,sourceLen,start,depth){for(var targetIndex=start,sourceIndex=0;sourceIndex<sourceLen;){var P=ES.ToString(sourceIndex);if(ES.HasProperty(source,P)){var element=ES.Get(source,P),shouldFlatten=!1;if(depth>0&&(shouldFlatten=ES.IsArray(element)),shouldFlatten)targetIndex=FlattenIntoArray(target,element,ES.ToLength(ES.Get(element,"length")),targetIndex,depth-1);else{if(targetIndex>=MAX_SAFE_INTEGER)throw new TypeError("index too large");ES.CreateDataPropertyOrThrow(target,ES.ToString(targetIndex),element),targetIndex+=1}}sourceIndex+=1}return targetIndex}(A,O,sourceLen,0,depthNum),A}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(454)()},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(23),getPolyfill=__webpack_require__(455);module.exports=function(){var polyfill=getPolyfill();return define(Array.prototype,{flatMap:polyfill},{flatMap:function(){return Array.prototype.flatMap!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(456);module.exports=function(){return Array.prototype.flatMap||implementation}},function(module,exports,__webpack_require__){"use strict";var ES=__webpack_require__(93),MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1;module.exports=function(callbackfn){var T,O=ES.ToObject(this),sourceLen=ES.ToLength(ES.Get(O,"length"));if(!ES.IsCallable(callbackfn))throw new TypeError("callback must be a function");arguments.length>1&&(T=arguments[1]);var A=ES.ArraySpeciesCreate(O,0);return function FlattenIntoArray(target,source,sourceLen,start,depth){var mapperFunction,targetIndex=start,sourceIndex=0;for(arguments.length>5&&(mapperFunction=arguments[5]);sourceIndex<sourceLen;){var P=ES.ToString(sourceIndex);if(ES.HasProperty(source,P)){var element=ES.Get(source,P);if(void 0!==mapperFunction){if(arguments.length<=6)throw new TypeError("Assertion failed: thisArg is required when mapperFunction is provided");element=ES.Call(mapperFunction,arguments[6],[element,sourceIndex,source])}var shouldFlatten=!1;if(depth>0&&(shouldFlatten=ES.IsArray(element)),shouldFlatten)targetIndex=FlattenIntoArray(target,element,ES.ToLength(ES.Get(element,"length")),targetIndex,depth-1);else{if(targetIndex>=MAX_SAFE_INTEGER)throw new TypeError("index too large");ES.CreateDataPropertyOrThrow(target,ES.ToString(targetIndex),element),targetIndex+=1}}sourceIndex+=1}return targetIndex}(A,O,sourceLen,0,1,callbackfn,T),A}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(458)()},function(module,exports,__webpack_require__){"use strict";var hasSymbols=__webpack_require__(63)(),polyfill=__webpack_require__(459),getInferredName=__webpack_require__(242),gOPD=Object.getOwnPropertyDescriptor,dP=Object.defineProperty,setProto=Object.setPrototypeOf,define=function(getter){dP(Symbol.prototype,"description",{configurable:!0,enumerable:!1,get:getter})};module.exports=function(){if(!hasSymbols)return!1;var desc=gOPD(Symbol.prototype,"description"),getter=polyfill(),isMissing=!desc||"function"!=typeof desc.get,isBroken=!isMissing&&(void 0!==Symbol().description||""!==Symbol("").description);if(isMissing||isBroken){if(!getInferredName)return function(getter){var origSym=Function.apply.bind(Symbol),emptyStrings=Object.create?Object.create(null):{},SymNew=function(){var sym=origSym(this,arguments);return arguments.length>0&&""===arguments[0]&&(emptyStrings[sym]=!0),sym};SymNew.prototype=Symbol.prototype,setProto(SymNew,Symbol),Symbol=SymNew;var boundGetter=Function.call.bind(getter),wrappedGetter=function(){var symbolDescription=boundGetter(this);return emptyStrings[this]?"":symbolDescription};return define(wrappedGetter),wrappedGetter}(getter);define(getter)}return getter}},function(module,exports,__webpack_require__){"use strict";var hasSymbols=__webpack_require__(63)(),implementation=__webpack_require__(460),gOPD=Object.getOwnPropertyDescriptor;module.exports=function(){if(!hasSymbols||"function"!=typeof gOPD)return null;var desc=gOPD(Symbol.prototype,"description");return desc&&"function"==typeof desc.get?void 0!==desc.get.call(Symbol())||""!==desc.get.call(Symbol())||"a"!==desc.get.call(Symbol("a"))?implementation:desc.get:implementation}},function(module,exports,__webpack_require__){"use strict";var symToStr=__webpack_require__(63)()?Function.call.bind(Symbol.prototype.toString):null,getInferredName=__webpack_require__(242);module.exports=function(){var str=symToStr(this);if(getInferredName){var name=getInferredName(this);if(""===name)return;return name.slice(1,-1)}var desc=str.slice(7,-1);if(desc)return desc}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(462)()},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(23),hasSymbols=__webpack_require__(63)(),getPolyfill=__webpack_require__(463),regexMatchAll=__webpack_require__(243),defineP=Object.defineProperty,gOPD=Object.getOwnPropertyDescriptor;module.exports=function(){var polyfill=getPolyfill();if(define(String.prototype,{matchAll:polyfill},{matchAll:function(){return String.prototype.matchAll!==polyfill}}),hasSymbols){var symbol=Symbol.matchAll||(Symbol.for?Symbol.for("Symbol.matchAll"):Symbol("Symbol.matchAll"));if(define(Symbol,{matchAll:symbol},{matchAll:function(){return Symbol.matchAll!==symbol}}),defineP&&gOPD){var desc=gOPD(Symbol,symbol);desc&&!desc.configurable||defineP(Symbol,symbol,{configurable:!1,enumerable:!1,value:symbol,writable:!1})}var func={};func[symbol]=RegExp.prototype[symbol]||regexMatchAll;var predicate={};predicate[symbol]=function(){return RegExp.prototype[symbol]!==regexMatchAll},define(RegExp.prototype,func,predicate)}return polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(464);module.exports=function(){return String.prototype.matchAll||implementation}},function(module,exports,__webpack_require__){"use strict";var ES=__webpack_require__(155),hasSymbols=__webpack_require__(63)(),regexMatchAll=__webpack_require__(243);module.exports=function(regexp){var matcher,O=ES.RequireObjectCoercible(this);if(null!=regexp&&(hasSymbols&&"symbol"==typeof Symbol.matchAll?matcher=ES.GetMethod(regexp,Symbol.matchAll):ES.IsRegExp(regexp)&&(matcher=regexMatchAll),void 0!==matcher))return ES.Call(matcher,regexp,[O]);var S=ES.ToString(O),rx=new RegExp(regexp,"g");return hasSymbols&&"symbol"==typeof Symbol.matchAll?ES.Invoke(rx,Symbol.matchAll,[S]):ES.Call(regexMatchAll,rx,[S])}},function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(38),keys=__webpack_require__(151),ES2017=__webpack_require__(93),assign=__webpack_require__(92),forEach=__webpack_require__(241),GetIntrinsic=__webpack_require__(76),$String=GetIntrinsic("%String%"),$Object=GetIntrinsic("%Object%"),$SymbolProto=GetIntrinsic("%SymbolPrototype%",!0),$SymbolValueOf=$SymbolProto?bind.call(Function.call,$SymbolProto.valueOf):null,$StringProto=GetIntrinsic("%StringPrototype%"),$charAt=bind.call(Function.call,$StringProto.charAt),$PromiseResolveOrig=GetIntrinsic("%Promise_resolve%",!0),$PromiseResolve=$PromiseResolveOrig?bind.call(Function.call,$PromiseResolveOrig):null,$isEnumerable=bind.call(Function.call,GetIntrinsic("%ObjectPrototype%").propertyIsEnumerable),$pushApply=bind.call(Function.apply,GetIntrinsic("%ArrayPrototype%").push),$gOPS=$SymbolValueOf?$Object.getOwnPropertySymbols:null,ES2018=assign(assign({},ES2017),{EnumerableOwnPropertyNames:ES2017.EnumerableOwnProperties,thisSymbolValue:function(value){if(!$SymbolValueOf)throw new SyntaxError("Symbols are not supported; thisSymbolValue requires that `value` be a Symbol or a Symbol object");return"Symbol"===this.Type(value)?value:$SymbolValueOf(value)},IsStringPrefix:function(p,q){if("String"!==this.Type(p))throw new TypeError('Assertion failed: "p" must be a String');if("String"!==this.Type(q))throw new TypeError('Assertion failed: "q" must be a String');if(p===q||""===p)return!0;var pLength=p.length;if(pLength>=q.length)return!1;for(var i=0;i<pLength;i+=1)if($charAt(p,i)!==$charAt(q,i))return!1;return!0},NumberToString:function(m){if("Number"!==this.Type(m))throw new TypeError('Assertion failed: "m" must be a String');return $String(m)},CopyDataProperties:function(target,source,excludedItems){if("Object"!==this.Type(target))throw new TypeError('Assertion failed: "target" must be an Object');if(!this.IsArray(excludedItems))throw new TypeError('Assertion failed: "excludedItems" must be a List of Property Keys');for(var i=0;i<excludedItems.length;i+=1)if(!this.IsPropertyKey(excludedItems[i]))throw new TypeError('Assertion failed: "excludedItems" must be a List of Property Keys');if(null==source)return target;var ES=this,fromObj=ES.ToObject(source),sourceKeys=function(ES,source){var ownKeys=keys(source);return $gOPS&&$pushApply(ownKeys,$gOPS(source)),ownKeys}(0,fromObj);return forEach(sourceKeys,function(nextKey){var excluded=!1;forEach(excludedItems,function(e){!0===ES.SameValue(e,nextKey)&&(excluded=!0)});var enumerable=$isEnumerable(fromObj,nextKey)||"string"==typeof source&&nextKey>=0&&ES.IsInteger(ES.ToNumber(nextKey));if(!1===excluded&&enumerable){var propValue=ES.Get(fromObj,nextKey);ES.CreateDataProperty(target,nextKey,propValue)}}),target},PromiseResolve:function(C,x){if(!$PromiseResolve)throw new SyntaxError("This environment does not support Promises.");return $PromiseResolve(C,x)}});delete ES2018.EnumerableOwnProperties,delete ES2018.IsPropertyDescriptor,module.exports=ES2018},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(23),implementation=__webpack_require__(244),getPolyfill=__webpack_require__(245),shim=__webpack_require__(467),flagsBound=Function.call.bind(implementation);define(flagsBound,{getPolyfill:getPolyfill,implementation:implementation,shim:shim}),module.exports=flagsBound},function(module,exports,__webpack_require__){"use strict";var supportsDescriptors=__webpack_require__(23).supportsDescriptors,getPolyfill=__webpack_require__(245),gOPD=Object.getOwnPropertyDescriptor,defineProperty=Object.defineProperty,TypeErr=TypeError,getProto=Object.getPrototypeOf,regex=/a/;module.exports=function(){if(!supportsDescriptors||!getProto)throw new TypeErr("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var polyfill=getPolyfill(),proto=getProto(regex),descriptor=gOPD(proto,"flags");return descriptor&&descriptor.get===polyfill||defineProperty(proto,"flags",{configurable:!0,enumerable:!1,get:polyfill}),polyfill}},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(23),ES=__webpack_require__(155),GetIntrinsic=__webpack_require__(76),hasSymbols=__webpack_require__(63)(),hidden=__webpack_require__(469)(),RegExpStringIterator=function(R,S,global,fullUnicode){if("String"!==ES.Type(S))throw new TypeError("S must be a string");if("Boolean"!==ES.Type(global))throw new TypeError("global must be a boolean");if("Boolean"!==ES.Type(fullUnicode))throw new TypeError("fullUnicode must be a boolean");hidden.set(this,"[[IteratingRegExp]]",R),hidden.set(this,"[[IteratedString]]",S),hidden.set(this,"[[Global]]",global),hidden.set(this,"[[Unicode]]",fullUnicode),hidden.set(this,"[[Done]]",!1)},IteratorPrototype=GetIntrinsic("%IteratorPrototype%",!0);if(IteratorPrototype&&(RegExpStringIterator.prototype=ES.ObjectCreate(IteratorPrototype)),define(RegExpStringIterator.prototype,{next:function(){var O=this;if("Object"!==ES.Type(O))throw new TypeError("receiver must be an object");if(!(O instanceof RegExpStringIterator&&hidden.has(O,"[[IteratingRegExp]]")&&hidden.has(O,"[[IteratedString]]")&&hidden.has(O,"[[Global]]")&&hidden.has(O,"[[Unicode]]")&&hidden.has(O,"[[Done]]")))throw new TypeError('"this" value must be a RegExpStringIterator instance');if(hidden.get(O,"[[Done]]"))return ES.CreateIterResultObject(void 0,!0);var R=hidden.get(O,"[[IteratingRegExp]]"),S=hidden.get(O,"[[IteratedString]]"),global=hidden.get(O,"[[Global]]"),fullUnicode=hidden.get(O,"[[Unicode]]"),match=ES.RegExpExec(R,S);if(null===match)return hidden.set(O,"[[Done]]",!0),ES.CreateIterResultObject(void 0,!0);if(global){if(""===ES.ToString(ES.Get(match,"0"))){var thisIndex=ES.ToLength(ES.Get(R,"lastIndex")),nextIndex=ES.AdvanceStringIndex(S,thisIndex,fullUnicode);ES.Set(R,"lastIndex",nextIndex,!0)}return ES.CreateIterResultObject(match,!1)}return hidden.set(O,"[[Done]]",!0),ES.CreateIterResultObject(match,!1)}}),hasSymbols){var defineP=Object.defineProperty;if(Symbol.toStringTag&&(defineP?defineP(RegExpStringIterator.prototype,Symbol.toStringTag,{configurable:!0,enumerable:!1,value:"RegExp String Iterator",writable:!1}):RegExpStringIterator.prototype[Symbol.toStringTag]="RegExp String Iterator"),!IteratorPrototype&&Symbol.iterator){var func={};func[Symbol.iterator]=RegExpStringIterator.prototype[Symbol.iterator]||function(){return this};var predicate={};predicate[Symbol.iterator]=function(){return RegExpStringIterator.prototype[Symbol.iterator]!==func[Symbol.iterator]},define(RegExpStringIterator.prototype,func,predicate)}}module.exports=RegExpStringIterator},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(23);module.exports=function(){var symbolCache={},makeKey=function(prop){return symbolCache["$"+prop]?symbolCache["$"+prop]:"function"==typeof Symbol?(symbolCache["$"+prop]=Symbol(prop),symbolCache["$"+prop]):"___ "+prop+" ___"};return{get:function(obj,prop){return obj[makeKey(prop)]},has:function(obj,prop){return makeKey(prop)in obj},set:function(obj,prop,value){var key=makeKey(prop);define.supportsDescriptors?Object.defineProperty(obj,key,{configurable:!1,enumerable:!1,value:value,writable:!0}):obj[key]=value}}}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(471)()},function(module,exports,__webpack_require__){"use strict";var getPolyfill=__webpack_require__(472),define=__webpack_require__(23);module.exports=function(){var polyfill=getPolyfill();return define(Object,{fromEntries:polyfill},{fromEntries:function(){return Object.fromEntries!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(473);module.exports=function(){return"function"==typeof Object.fromEntries?Object.fromEntries:implementation}},function(module,exports,__webpack_require__){"use strict";var ES=__webpack_require__(93),ThrowCompletion=function(error){throw error},hasSymbols="function"==typeof Symbol&&"symbol"==typeof Symbol("foo");module.exports=function(iterable){var obj={};if(!hasSymbols){if(!ES.IsArray(iterable))throw new TypeError("this environment lacks native Symbols, and can not support non-Array iterables");return function(obj,entries){for(var i=0;i<entries.length;++i){var entry=entries[i];if("Object"!==ES.Type(entry))throw new TypeError("iterator returned a non-object; entry expected");var key=ES.Get(entry,"0"),value=ES.Get(entry,"1"),propertyKey=ES.ToPropertyKey(key);ES.CreateDataPropertyOrThrow(obj,propertyKey,value)}}(obj,iterable),obj}for(var iter=ES.GetIterator(iterable);;){var next=ES.IteratorStep(iter);if(!1===next)return obj;var nextItem=ES.IteratorValue(next);if("Object"!==ES.Type(nextItem)){var error=new TypeError("iterator returned a non-object; entry expected");return ES.IteratorClose(iter,ThrowCompletion(error))}try{var key=ES.Get(nextItem,"0"),value=ES.Get(nextItem,"1"),propertyKey=ES.ToPropertyKey(key);ES.CreateDataPropertyOrThrow(obj,propertyKey,value)}catch(e){return ES.IteratorClose(iter,ThrowCompletion(e))}}}},function(module,exports,__webpack_require__){__webpack_require__(78),__webpack_require__(478),__webpack_require__(82),__webpack_require__(479),module.exports=__webpack_require__(55).Symbol},function(module,exports,__webpack_require__){var getKeys=__webpack_require__(79),gOPS=__webpack_require__(162),pIE=__webpack_require__(123);module.exports=function(it){var result=getKeys(it),getSymbols=gOPS.f;if(getSymbols)for(var key,symbols=getSymbols(it),isEnum=pIE.f,i=0;symbols.length>i;)isEnum.call(it,key=symbols[i++])&&result.push(key);return result}},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(159),max=Math.max,min=Math.min;module.exports=function(index,length){return(index=toInteger(index))<0?max(index+length,0):min(index,length)}},function(module,exports,__webpack_require__){var toIObject=__webpack_require__(80),gOPN=__webpack_require__(164).f,toString={}.toString,windowNames="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];module.exports.f=function(it){return windowNames&&"[object Window]"==toString.call(it)?function(it){try{return gOPN(it)}catch(e){return windowNames.slice()}}(it):gOPN(toIObject(it))}},function(module,exports,__webpack_require__){"use strict";var classof=__webpack_require__(124),test={};test[__webpack_require__(22)("toStringTag")]="z",test+""!="[object z]"&&__webpack_require__(39)(Object.prototype,"toString",function(){return"[object "+classof(this)+"]"},!0)},function(module,exports,__webpack_require__){__webpack_require__(158)("observable")},function(module,exports,__webpack_require__){"use strict";__webpack_require__(58).window.STORYBOOK_REACT_CLASSES={}},,function(module,exports){module.exports=function(originalModule){if(!originalModule.webpackPolyfill){var module=Object.create(originalModule);module.children||(module.children=[]),Object.defineProperty(module,"loaded",{enumerable:!0,get:function(){return module.l}}),Object.defineProperty(module,"id",{enumerable:!0,get:function(){return module.i}}),Object.defineProperty(module,"exports",{enumerable:!0}),module.webpackPolyfill=1}return module}},function(module,exports,__webpack_require__){var content=__webpack_require__(484);"string"==typeof content&&(content=[[module.i,content,""]]);var options={hmr:!0,transform:void 0,insertInto:void 0};__webpack_require__(486)(content,options);content.locals&&(module.exports=content.locals)},function(module,exports,__webpack_require__){(module.exports=__webpack_require__(485)(!1)).push([module.i,".mapboxgl-map {\n    font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;\n    overflow: hidden;\n    position: relative;\n    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n\n.mapboxgl-map:-webkit-full-screen {\n    width: 100%;\n    height: 100%;\n}\n\n.mapboxgl-canary {\n    background-color: salmon;\n}\n\n.mapboxgl-canvas-container.mapboxgl-interactive,\n.mapboxgl-ctrl-group > button.mapboxgl-ctrl-compass {\n    cursor: -webkit-grab;\n    cursor: -moz-grab;\n    cursor: grab;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n}\n\n.mapboxgl-canvas-container.mapboxgl-interactive:active,\n.mapboxgl-ctrl-group > button.mapboxgl-ctrl-compass:active {\n    cursor: -webkit-grabbing;\n    cursor: -moz-grabbing;\n    cursor: grabbing;\n}\n\n.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,\n.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas {\n    touch-action: pan-x pan-y;\n}\n\n.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,\n.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas {\n    touch-action: pinch-zoom;\n}\n\n.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,\n.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas {\n    touch-action: none;\n}\n\n.mapboxgl-ctrl-top-left,\n.mapboxgl-ctrl-top-right,\n.mapboxgl-ctrl-bottom-left,\n.mapboxgl-ctrl-bottom-right { position: absolute; pointer-events: none; z-index: 2; }\n.mapboxgl-ctrl-top-left     { top: 0; left: 0; }\n.mapboxgl-ctrl-top-right    { top: 0; right: 0; }\n.mapboxgl-ctrl-bottom-left  { bottom: 0; left: 0; }\n.mapboxgl-ctrl-bottom-right { right: 0; bottom: 0; }\n\n.mapboxgl-ctrl { clear: both; pointer-events: auto; }\n.mapboxgl-ctrl-top-left .mapboxgl-ctrl     { margin: 10px 0 0 10px; float: left; }\n.mapboxgl-ctrl-top-right .mapboxgl-ctrl    { margin: 10px 10px 0 0; float: right; }\n.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl  { margin: 0 0 10px 10px; float: left; }\n.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl { margin: 0 10px 10px 0; float: right; }\n\n.mapboxgl-ctrl-group {\n    border-radius: 4px;\n    overflow: hidden;\n    background: #fff;\n}\n\n.mapboxgl-ctrl-group:not(:empty) {\n    -moz-box-shadow: 0 0 2px rgba(0, 0, 0, 0.1);\n    -webkit-box-shadow: 0 0 2px rgba(0, 0, 0, 0.1);\n    box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1);\n}\n\n.mapboxgl-ctrl-group > button {\n    width: 30px;\n    height: 30px;\n    display: block;\n    padding: 0;\n    outline: none;\n    border: 0;\n    box-sizing: border-box;\n    background-color: transparent;\n    cursor: pointer;\n}\n\n.mapboxgl-ctrl-group > button + button {\n    border-top: 1px solid #ddd;\n}\n\n/* https://bugzilla.mozilla.org/show_bug.cgi?id=140562 */\n.mapboxgl-ctrl > button::-moz-focus-inner {\n    border: 0;\n    padding: 0;\n}\n\n.mapboxgl-ctrl > button:hover {\n    background-color: rgba(0, 0, 0, 0.05);\n}\n\n.mapboxgl-ctrl-icon,\n.mapboxgl-ctrl-icon > .mapboxgl-ctrl-compass-arrow {\n    speak: none;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n}\n\n.mapboxgl-ctrl-icon {\n    padding: 5px;\n}\n\n.mapboxgl-ctrl-icon.mapboxgl-ctrl-zoom-out {\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath style='fill:%23333333;' d='m 7,9 c -0.554,0 -1,0.446 -1,1 0,0.554 0.446,1 1,1 l 6,0 c 0.554,0 1,-0.446 1,-1 0,-0.554 -0.446,-1 -1,-1 z'/%3E %3C/svg%3E\");\n}\n\n.mapboxgl-ctrl-icon.mapboxgl-ctrl-zoom-in {\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath style='fill:%23333333;' d='M 10 6 C 9.446 6 9 6.4459904 9 7 L 9 9 L 7 9 C 6.446 9 6 9.446 6 10 C 6 10.554 6.446 11 7 11 L 9 11 L 9 13 C 9 13.55401 9.446 14 10 14 C 10.554 14 11 13.55401 11 13 L 11 11 L 13 11 C 13.554 11 14 10.554 14 10 C 14 9.446 13.554 9 13 9 L 11 9 L 11 7 C 11 6.4459904 10.554 6 10 6 z'/%3E %3C/svg%3E\");\n}\n\n.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate {\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E %3Cpath d='M10 4C9 4 9 5 9 5L9 5.1A5 5 0 0 0 5.1 9L5 9C5 9 4 9 4 10 4 11 5 11 5 11L5.1 11A5 5 0 0 0 9 14.9L9 15C9 15 9 16 10 16 11 16 11 15 11 15L11 14.9A5 5 0 0 0 14.9 11L15 11C15 11 16 11 16 10 16 9 15 9 15 9L14.9 9A5 5 0 0 0 11 5.1L11 5C11 5 11 4 10 4zM10 6.5A3.5 3.5 0 0 1 13.5 10 3.5 3.5 0 0 1 10 13.5 3.5 3.5 0 0 1 6.5 10 3.5 3.5 0 0 1 10 6.5zM10 8.3A1.8 1.8 0 0 0 8.3 10 1.8 1.8 0 0 0 10 11.8 1.8 1.8 0 0 0 11.8 10 1.8 1.8 0 0 0 10 8.3z'/%3E %3C/svg%3E\");\n}\n\n.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate:disabled {\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E %3Cpath d='M10 4C9 4 9 5 9 5L9 5.1A5 5 0 0 0 5.1 9L5 9C5 9 4 9 4 10 4 11 5 11 5 11L5.1 11A5 5 0 0 0 9 14.9L9 15C9 15 9 16 10 16 11 16 11 15 11 15L11 14.9A5 5 0 0 0 14.9 11L15 11C15 11 16 11 16 10 16 9 15 9 15 9L14.9 9A5 5 0 0 0 11 5.1L11 5C11 5 11 4 10 4zM10 6.5A3.5 3.5 0 0 1 13.5 10 3.5 3.5 0 0 1 10 13.5 3.5 3.5 0 0 1 6.5 10 3.5 3.5 0 0 1 10 6.5zM10 8.3A1.8 1.8 0 0 0 8.3 10 1.8 1.8 0 0 0 10 11.8 1.8 1.8 0 0 0 11.8 10 1.8 1.8 0 0 0 10 8.3z'/%3E %3C/svg%3E\");\n}\n\n.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active {\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E %3Cpath d='M10 4C9 4 9 5 9 5L9 5.1A5 5 0 0 0 5.1 9L5 9C5 9 4 9 4 10 4 11 5 11 5 11L5.1 11A5 5 0 0 0 9 14.9L9 15C9 15 9 16 10 16 11 16 11 15 11 15L11 14.9A5 5 0 0 0 14.9 11L15 11C15 11 16 11 16 10 16 9 15 9 15 9L14.9 9A5 5 0 0 0 11 5.1L11 5C11 5 11 4 10 4zM10 6.5A3.5 3.5 0 0 1 13.5 10 3.5 3.5 0 0 1 10 13.5 3.5 3.5 0 0 1 6.5 10 3.5 3.5 0 0 1 10 6.5zM10 8.3A1.8 1.8 0 0 0 8.3 10 1.8 1.8 0 0 0 10 11.8 1.8 1.8 0 0 0 11.8 10 1.8 1.8 0 0 0 10 8.3z'/%3E %3C/svg%3E\");\n}\n\n.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error {\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E %3Cpath d='M10 4C9 4 9 5 9 5L9 5.1A5 5 0 0 0 5.1 9L5 9C5 9 4 9 4 10 4 11 5 11 5 11L5.1 11A5 5 0 0 0 9 14.9L9 15C9 15 9 16 10 16 11 16 11 15 11 15L11 14.9A5 5 0 0 0 14.9 11L15 11C15 11 16 11 16 10 16 9 15 9 15 9L14.9 9A5 5 0 0 0 11 5.1L11 5C11 5 11 4 10 4zM10 6.5A3.5 3.5 0 0 1 13.5 10 3.5 3.5 0 0 1 10 13.5 3.5 3.5 0 0 1 6.5 10 3.5 3.5 0 0 1 10 6.5zM10 8.3A1.8 1.8 0 0 0 8.3 10 1.8 1.8 0 0 0 10 11.8 1.8 1.8 0 0 0 11.8 10 1.8 1.8 0 0 0 10 8.3z'/%3E %3C/svg%3E\");\n}\n\n.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background {\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E %3Cpath d='M 10,4 C 9,4 9,5 9,5 L 9,5.1 C 7.0357113,5.5006048 5.5006048,7.0357113 5.1,9 L 5,9 c 0,0 -1,0 -1,1 0,1 1,1 1,1 l 0.1,0 c 0.4006048,1.964289 1.9357113,3.499395 3.9,3.9 L 9,15 c 0,0 0,1 1,1 1,0 1,-1 1,-1 l 0,-0.1 c 1.964289,-0.400605 3.499395,-1.935711 3.9,-3.9 l 0.1,0 c 0,0 1,0 1,-1 C 16,9 15,9 15,9 L 14.9,9 C 14.499395,7.0357113 12.964289,5.5006048 11,5.1 L 11,5 c 0,0 0,-1 -1,-1 z m 0,2.5 c 1.932997,0 3.5,1.5670034 3.5,3.5 0,1.932997 -1.567003,3.5 -3.5,3.5 C 8.0670034,13.5 6.5,11.932997 6.5,10 6.5,8.0670034 8.0670034,6.5 10,6.5 Z'/%3E %3C/svg%3E\");\n}\n\n.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error {\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E %3Cpath d='M 10,4 C 9,4 9,5 9,5 L 9,5.1 C 7.0357113,5.5006048 5.5006048,7.0357113 5.1,9 L 5,9 c 0,0 -1,0 -1,1 0,1 1,1 1,1 l 0.1,0 c 0.4006048,1.964289 1.9357113,3.499395 3.9,3.9 L 9,15 c 0,0 0,1 1,1 1,0 1,-1 1,-1 l 0,-0.1 c 1.964289,-0.400605 3.499395,-1.935711 3.9,-3.9 l 0.1,0 c 0,0 1,0 1,-1 C 16,9 15,9 15,9 L 14.9,9 C 14.499395,7.0357113 12.964289,5.5006048 11,5.1 L 11,5 c 0,0 0,-1 -1,-1 z m 0,2.5 c 1.932997,0 3.5,1.5670034 3.5,3.5 0,1.932997 -1.567003,3.5 -3.5,3.5 C 8.0670034,13.5 6.5,11.932997 6.5,10 6.5,8.0670034 8.0670034,6.5 10,6.5 Z'/%3E %3C/svg%3E\");\n}\n\n.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting {\n    -webkit-animation: mapboxgl-spin 2s infinite linear;\n    -moz-animation: mapboxgl-spin 2s infinite linear;\n    -o-animation: mapboxgl-spin 2s infinite linear;\n    -ms-animation: mapboxgl-spin 2s infinite linear;\n    animation: mapboxgl-spin 2s infinite linear;\n}\n\n@-webkit-keyframes mapboxgl-spin {\n    0% { -webkit-transform: rotate(0deg); }\n    100% { -webkit-transform: rotate(360deg); }\n}\n\n@-moz-keyframes mapboxgl-spin {\n    0% { -moz-transform: rotate(0deg); }\n    100% { -moz-transform: rotate(360deg); }\n}\n\n@-o-keyframes mapboxgl-spin {\n    0% { -o-transform: rotate(0deg); }\n    100% { -o-transform: rotate(360deg); }\n}\n\n@-ms-keyframes mapboxgl-spin {\n    0% { -ms-transform: rotate(0deg); }\n    100% { -ms-transform: rotate(360deg); }\n}\n\n@keyframes mapboxgl-spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n}\n\n.mapboxgl-ctrl-icon.mapboxgl-ctrl-fullscreen {\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath d='M 5 4 C 4.5 4 4 4.5 4 5 L 4 6 L 4 9 L 4.5 9 L 5.7773438 7.296875 C 6.7771319 8.0602131 7.835765 8.9565728 8.890625 10 C 7.8257121 11.0633 6.7761791 11.951675 5.78125 12.707031 L 4.5 11 L 4 11 L 4 15 C 4 15.5 4.5 16 5 16 L 9 16 L 9 15.5 L 7.2734375 14.205078 C 8.0428931 13.187886 8.9395441 12.133481 9.9609375 11.068359 C 11.042371 12.14699 11.942093 13.2112 12.707031 14.21875 L 11 15.5 L 11 16 L 14 16 L 15 16 C 15.5 16 16 15.5 16 15 L 16 14 L 16 11 L 15.5 11 L 14.205078 12.726562 C 13.177985 11.949617 12.112718 11.043577 11.037109 10.009766 C 12.151856 8.981061 13.224345 8.0798624 14.228516 7.3046875 L 15.5 9 L 16 9 L 16 5 C 16 4.5 15.5 4 15 4 L 11 4 L 11 4.5 L 12.703125 5.7773438 C 11.932647 6.7864834 11.026693 7.8554712 9.9707031 8.9199219 C 8.9584739 7.8204943 8.0698767 6.7627188 7.3046875 5.7714844 L 9 4.5 L 9 4 L 6 4 L 5 4 z '/%3E %3C/svg%3E\");\n}\n\n.mapboxgl-ctrl-icon.mapboxgl-ctrl-shrink {\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath style='fill:%23000000;' d='M 4.2421875 3.4921875 A 0.750075 0.750075 0 0 0 3.71875 4.78125 L 5.9648438 7.0273438 L 4 8.5 L 4 9 L 8 9 C 8.500001 8.9999988 9 8.4999992 9 8 L 9 4 L 8.5 4 L 7.0175781 5.9550781 L 4.78125 3.71875 A 0.750075 0.750075 0 0 0 4.2421875 3.4921875 z M 15.734375 3.4921875 A 0.750075 0.750075 0 0 0 15.21875 3.71875 L 12.984375 5.953125 L 11.5 4 L 11 4 L 11 8 C 11 8.4999992 11.499999 8.9999988 12 9 L 16 9 L 16 8.5 L 14.035156 7.0273438 L 16.28125 4.78125 A 0.750075 0.750075 0 0 0 15.734375 3.4921875 z M 4 11 L 4 11.5 L 5.9648438 12.972656 L 3.71875 15.21875 A 0.75130096 0.75130096 0 1 0 4.78125 16.28125 L 7.0273438 14.035156 L 8.5 16 L 9 16 L 9 12 C 9 11.500001 8.500001 11.000001 8 11 L 4 11 z M 12 11 C 11.499999 11.000001 11 11.500001 11 12 L 11 16 L 11.5 16 L 12.972656 14.035156 L 15.21875 16.28125 A 0.75130096 0.75130096 0 1 0 16.28125 15.21875 L 14.035156 12.972656 L 16 11.5 L 16 11 L 12 11 z '/%3E %3C/svg%3E\");\n}\n\n.mapboxgl-ctrl-icon.mapboxgl-ctrl-compass > .mapboxgl-ctrl-compass-arrow {\n    width: 20px;\n    height: 20px;\n    margin: 5px;\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E %3Cpolygon fill='%23333333' points='6,9 10,1 14,9'/%3E %3Cpolygon fill='%23CCCCCC' points='6,11 10,19 14,11 '/%3E %3C/svg%3E\");\n    background-repeat: no-repeat;\n    display: inline-block;\n}\n\na.mapboxgl-ctrl-logo {\n    width: 85px;\n    height: 21px;\n    margin: 0 0 -3px -3px;\n    display: block;\n    background-repeat: no-repeat;\n    cursor: pointer;\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3C?xml version='1.0' encoding='utf-8'?%3E%3Csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 84.49 21' style='enable-background:new 0 0 84.49 21;' xml:space='preserve'%3E%3Cg%3E %3Cpath class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' d='M83.25,14.26c0,0.12-0.09,0.21-0.21,0.21h-1.61c-0.13,0-0.24-0.06-0.3-0.17l-1.44-2.39l-1.44,2.39 c-0.06,0.11-0.18,0.17-0.3,0.17h-1.61c-0.04,0-0.08-0.01-0.12-0.03c-0.09-0.06-0.13-0.19-0.06-0.28l0,0l2.43-3.68L76.2,6.84 c-0.02-0.03-0.03-0.07-0.03-0.12c0-0.12,0.09-0.21,0.21-0.21h1.61c0.13,0,0.24,0.06,0.3,0.17l1.41,2.36l1.4-2.35 c0.06-0.11,0.18-0.17,0.3-0.17H83c0.04,0,0.08,0.01,0.12,0.03c0.09,0.06,0.13,0.19,0.06,0.28l0,0l-2.37,3.63l2.43,3.67 C83.24,14.18,83.25,14.22,83.25,14.26z'/%3E %3Cpath class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' d='M66.24,9.59c-0.39-1.88-1.96-3.28-3.84-3.28c-1.03,0-2.03,0.42-2.73,1.18V3.51c0-0.13-0.1-0.23-0.23-0.23h-1.4 c-0.13,0-0.23,0.11-0.23,0.23v10.72c0,0.13,0.1,0.23,0.23,0.23h1.4c0.13,0,0.23-0.11,0.23-0.23V13.5c0.71,0.75,1.7,1.18,2.73,1.18 c1.88,0,3.45-1.41,3.84-3.29C66.37,10.79,66.37,10.18,66.24,9.59L66.24,9.59z M62.08,13c-1.32,0-2.39-1.11-2.41-2.48v-0.06 c0.02-1.38,1.09-2.48,2.41-2.48s2.42,1.12,2.42,2.51S63.41,13,62.08,13z'/%3E %3Cpath class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' d='M71.67,6.32c-1.98-0.01-3.72,1.35-4.16,3.29c-0.13,0.59-0.13,1.19,0,1.77c0.44,1.94,2.17,3.32,4.17,3.3 c2.35,0,4.26-1.87,4.26-4.19S74.04,6.32,71.67,6.32z M71.65,13.01c-1.33,0-2.42-1.12-2.42-2.51s1.08-2.52,2.42-2.52 c1.33,0,2.42,1.12,2.42,2.51S72.99,13,71.65,13.01L71.65,13.01z'/%3E %3Cpath class='st1' style='opacity:0.35; enable-background:new;' d='M62.08,7.98c-1.32,0-2.39,1.11-2.41,2.48v0.06C59.68,11.9,60.75,13,62.08,13s2.42-1.12,2.42-2.51 S63.41,7.98,62.08,7.98z M62.08,11.76c-0.63,0-1.14-0.56-1.17-1.25v-0.04c0.01-0.69,0.54-1.25,1.17-1.25 c0.63,0,1.17,0.57,1.17,1.27C63.24,11.2,62.73,11.76,62.08,11.76z'/%3E %3Cpath class='st1' style='opacity:0.35; enable-background:new;' d='M71.65,7.98c-1.33,0-2.42,1.12-2.42,2.51S70.32,13,71.65,13s2.42-1.12,2.42-2.51S72.99,7.98,71.65,7.98z M71.65,11.76c-0.64,0-1.17-0.57-1.17-1.27c0-0.7,0.53-1.26,1.17-1.26s1.17,0.57,1.17,1.27C72.82,11.21,72.29,11.76,71.65,11.76z'/%3E %3Cpath class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' d='M45.74,6.53h-1.4c-0.13,0-0.23,0.11-0.23,0.23v0.73c-0.71-0.75-1.7-1.18-2.73-1.18 c-2.17,0-3.94,1.87-3.94,4.19s1.77,4.19,3.94,4.19c1.04,0,2.03-0.43,2.73-1.19v0.73c0,0.13,0.1,0.23,0.23,0.23h1.4 c0.13,0,0.23-0.11,0.23-0.23V6.74c0-0.12-0.09-0.22-0.22-0.22C45.75,6.53,45.75,6.53,45.74,6.53z M44.12,10.53 C44.11,11.9,43.03,13,41.71,13s-2.42-1.12-2.42-2.51s1.08-2.52,2.4-2.52c1.33,0,2.39,1.11,2.41,2.48L44.12,10.53z'/%3E %3Cpath class='st1' style='opacity:0.35; enable-background:new;' d='M41.71,7.98c-1.33,0-2.42,1.12-2.42,2.51S40.37,13,41.71,13s2.39-1.11,2.41-2.48v-0.06 C44.1,9.09,43.03,7.98,41.71,7.98z M40.55,10.49c0-0.7,0.52-1.27,1.17-1.27c0.64,0,1.14,0.56,1.17,1.25v0.04 c-0.01,0.68-0.53,1.24-1.17,1.24C41.08,11.75,40.55,11.19,40.55,10.49z'/%3E %3Cpath class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' d='M52.41,6.32c-1.03,0-2.03,0.42-2.73,1.18V6.75c0-0.13-0.1-0.23-0.23-0.23h-1.4c-0.13,0-0.23,0.11-0.23,0.23 v10.72c0,0.13,0.1,0.23,0.23,0.23h1.4c0.13,0,0.23-0.1,0.23-0.23V13.5c0.71,0.75,1.7,1.18,2.74,1.18c2.17,0,3.94-1.87,3.94-4.19 S54.58,6.32,52.41,6.32z M52.08,13.01c-1.32,0-2.39-1.11-2.42-2.48v-0.07c0.02-1.38,1.09-2.49,2.4-2.49c1.32,0,2.41,1.12,2.41,2.51 S53.4,13,52.08,13.01L52.08,13.01z'/%3E %3Cpath class='st1' style='opacity:0.35; enable-background:new;' d='M52.08,7.98c-1.32,0-2.39,1.11-2.42,2.48v0.06c0.03,1.38,1.1,2.48,2.42,2.48s2.41-1.12,2.41-2.51 S53.4,7.98,52.08,7.98z M52.08,11.76c-0.63,0-1.14-0.56-1.17-1.25v-0.04c0.01-0.69,0.54-1.25,1.17-1.25c0.63,0,1.17,0.58,1.17,1.27 S52.72,11.76,52.08,11.76z'/%3E %3Cpath class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' d='M36.08,14.24c0,0.13-0.1,0.23-0.23,0.23h-1.41c-0.13,0-0.23-0.11-0.23-0.23V9.68c0-0.98-0.74-1.71-1.62-1.71 c-0.8,0-1.46,0.7-1.59,1.62l0.01,4.66c0,0.13-0.11,0.23-0.23,0.23h-1.41c-0.13,0-0.23-0.11-0.23-0.23V9.68 c0-0.98-0.74-1.71-1.62-1.71c-0.85,0-1.54,0.79-1.6,1.8v4.48c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.11-0.23-0.23V6.74 c0.01-0.13,0.1-0.22,0.23-0.22h1.4c0.13,0,0.22,0.11,0.23,0.22V7.4c0.5-0.68,1.3-1.09,2.16-1.1h0.03c1.09,0,2.09,0.6,2.6,1.55 c0.45-0.95,1.4-1.55,2.44-1.56c1.62,0,2.93,1.25,2.9,2.78L36.08,14.24z'/%3E %3Cpath class='st1' style='opacity:0.35; enable-background:new;' d='M84.34,13.59l-0.07-0.13l-1.96-2.99l1.94-2.95c0.44-0.67,0.26-1.56-0.41-2.02c-0.02,0-0.03,0-0.04-0.01 c-0.23-0.15-0.5-0.22-0.78-0.22h-1.61c-0.56,0-1.08,0.29-1.37,0.78L79.72,6.6l-0.34-0.56C79.09,5.56,78.57,5.27,78,5.27h-1.6 c-0.6,0-1.13,0.37-1.35,0.92c-2.19-1.66-5.28-1.47-7.26,0.45c-0.35,0.34-0.65,0.72-0.89,1.14c-0.9-1.62-2.58-2.72-4.5-2.72 c-0.5,0-1.01,0.07-1.48,0.23V3.51c0-0.82-0.66-1.48-1.47-1.48h-1.4c-0.81,0-1.47,0.66-1.47,1.47v3.75 c-0.95-1.36-2.5-2.18-4.17-2.19c-0.74,0-1.46,0.16-2.12,0.47c-0.24-0.17-0.54-0.26-0.84-0.26h-1.4c-0.45,0-0.87,0.21-1.15,0.56 c-0.02-0.03-0.04-0.05-0.07-0.08c-0.28-0.3-0.68-0.47-1.09-0.47h-1.39c-0.3,0-0.6,0.09-0.84,0.26c-0.67-0.3-1.39-0.46-2.12-0.46 c-1.83,0-3.43,1-4.37,2.5c-0.2-0.46-0.48-0.89-0.83-1.25c-0.8-0.81-1.89-1.25-3.02-1.25h-0.01c-0.89,0.01-1.75,0.33-2.46,0.88 c-0.74-0.57-1.64-0.88-2.57-0.88H28.1c-0.29,0-0.58,0.03-0.86,0.11c-0.28,0.06-0.56,0.16-0.82,0.28c-0.21-0.12-0.45-0.18-0.7-0.18 h-1.4c-0.82,0-1.47,0.66-1.47,1.47v7.5c0,0.82,0.66,1.47,1.47,1.47h1.4c0.82,0,1.48-0.66,1.48-1.48l0,0V9.79 c0.03-0.36,0.23-0.59,0.36-0.59c0.18,0,0.38,0.18,0.38,0.47v4.57c0,0.82,0.66,1.47,1.47,1.47h1.41c0.82,0,1.47-0.66,1.47-1.47 l-0.01-4.57c0.06-0.32,0.25-0.47,0.35-0.47c0.18,0,0.38,0.18,0.38,0.47v4.57c0,0.82,0.66,1.47,1.47,1.47h1.41 c0.82,0,1.47-0.66,1.47-1.47v-0.38c0.96,1.29,2.46,2.06,4.06,2.06c0.74,0,1.46-0.16,2.12-0.47c0.24,0.17,0.54,0.26,0.84,0.26h1.39 c0.3,0,0.6-0.09,0.84-0.26v2.01c0,0.82,0.66,1.47,1.47,1.47h1.4c0.82,0,1.47-0.66,1.47-1.47v-1.77c0.48,0.15,0.99,0.23,1.49,0.22 c1.7,0,3.22-0.87,4.17-2.2v0.52c0,0.82,0.66,1.47,1.47,1.47h1.4c0.3,0,0.6-0.09,0.84-0.26c0.66,0.31,1.39,0.47,2.12,0.47 c1.92,0,3.6-1.1,4.49-2.73c1.54,2.65,4.95,3.53,7.58,1.98c0.18-0.11,0.36-0.22,0.53-0.36c0.22,0.55,0.76,0.91,1.35,0.9H78 c0.56,0,1.08-0.29,1.37-0.78l0.37-0.61l0.37,0.61c0.29,0.48,0.81,0.78,1.38,0.78h1.6c0.81,0,1.46-0.66,1.45-1.46 C84.49,14.02,84.44,13.8,84.34,13.59L84.34,13.59z M35.86,14.47h-1.41c-0.13,0-0.23-0.11-0.23-0.23V9.68 c0-0.98-0.74-1.71-1.62-1.71c-0.8,0-1.46,0.7-1.59,1.62l0.01,4.66c0,0.13-0.1,0.23-0.23,0.23h-1.41c-0.13,0-0.23-0.11-0.23-0.23 V9.68c0-0.98-0.74-1.71-1.62-1.71c-0.85,0-1.54,0.79-1.6,1.8v4.48c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.11-0.23-0.23 V6.74c0.01-0.13,0.11-0.22,0.23-0.22h1.4c0.13,0,0.22,0.11,0.23,0.22V7.4c0.5-0.68,1.3-1.09,2.16-1.1h0.03 c1.09,0,2.09,0.6,2.6,1.55c0.45-0.95,1.4-1.55,2.44-1.56c1.62,0,2.93,1.25,2.9,2.78l0.01,5.16C36.09,14.36,35.98,14.46,35.86,14.47 L35.86,14.47z M45.97,14.24c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.11-0.23-0.23V13.5c-0.7,0.76-1.69,1.18-2.72,1.18 c-2.17,0-3.94-1.87-3.94-4.19s1.77-4.19,3.94-4.19c1.03,0,2.02,0.43,2.73,1.18V6.74c0-0.13,0.1-0.23,0.23-0.23h1.4 c0.12-0.01,0.22,0.08,0.23,0.21c0,0.01,0,0.01,0,0.02v7.51h-0.01V14.24z M52.41,14.67c-1.03,0-2.02-0.43-2.73-1.18v3.97 c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.1-0.23-0.23V6.75c0-0.13,0.1-0.22,0.23-0.22h1.4c0.13,0,0.23,0.11,0.23,0.23v0.73 c0.71-0.76,1.7-1.18,2.73-1.18c2.17,0,3.94,1.86,3.94,4.18S54.58,14.67,52.41,14.67z M66.24,11.39c-0.39,1.87-1.96,3.29-3.84,3.29 c-1.03,0-2.02-0.43-2.73-1.18v0.73c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.11-0.23-0.23V3.51c0-0.13,0.1-0.23,0.23-0.23 h1.4c0.13,0,0.23,0.11,0.23,0.23v3.97c0.71-0.75,1.7-1.18,2.73-1.17c1.88,0,3.45,1.4,3.84,3.28C66.37,10.19,66.37,10.8,66.24,11.39 L66.24,11.39L66.24,11.39z M71.67,14.68c-2,0.01-3.73-1.35-4.17-3.3c-0.13-0.59-0.13-1.19,0-1.77c0.44-1.94,2.17-3.31,4.17-3.3 c2.36,0,4.26,1.87,4.26,4.19S74.03,14.68,71.67,14.68L71.67,14.68z M83.04,14.47h-1.61c-0.13,0-0.24-0.06-0.3-0.17l-1.44-2.39 l-1.44,2.39c-0.06,0.11-0.18,0.17-0.3,0.17h-1.61c-0.04,0-0.08-0.01-0.12-0.03c-0.09-0.06-0.13-0.19-0.06-0.28l0,0l2.43-3.68 L76.2,6.84c-0.02-0.03-0.03-0.07-0.03-0.12c0-0.12,0.09-0.21,0.21-0.21h1.61c0.13,0,0.24,0.06,0.3,0.17l1.41,2.36l1.41-2.36 c0.06-0.11,0.18-0.17,0.3-0.17h1.61c0.04,0,0.08,0.01,0.12,0.03c0.09,0.06,0.13,0.19,0.06,0.28l0,0l-2.38,3.64l2.43,3.67 c0.02,0.03,0.03,0.07,0.03,0.12C83.25,14.38,83.16,14.47,83.04,14.47L83.04,14.47L83.04,14.47z'/%3E %3Cpath class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' d='M10.5,1.24c-5.11,0-9.25,4.15-9.25,9.25s4.15,9.25,9.25,9.25s9.25-4.15,9.25-9.25 C19.75,5.38,15.61,1.24,10.5,1.24z M14.89,12.77c-1.93,1.93-4.78,2.31-6.7,2.31c-0.7,0-1.41-0.05-2.1-0.16c0,0-1.02-5.64,2.14-8.81 c0.83-0.83,1.95-1.28,3.13-1.28c1.27,0,2.49,0.51,3.39,1.42C16.59,8.09,16.64,11,14.89,12.77z'/%3E %3Cpath class='st1' style='opacity:0.35; enable-background:new;' d='M10.5-0.01C4.7-0.01,0,4.7,0,10.49s4.7,10.5,10.5,10.5S21,16.29,21,10.49C20.99,4.7,16.3-0.01,10.5-0.01z M10.5,19.74c-5.11,0-9.25-4.15-9.25-9.25s4.14-9.26,9.25-9.26s9.25,4.15,9.25,9.25C19.75,15.61,15.61,19.74,10.5,19.74z'/%3E %3Cpath class='st1' style='opacity:0.35; enable-background:new;' d='M14.74,6.25C12.9,4.41,9.98,4.35,8.23,6.1c-3.16,3.17-2.14,8.81-2.14,8.81s5.64,1.02,8.81-2.14 C16.64,11,16.59,8.09,14.74,6.25z M12.47,10.34l-0.91,1.87l-0.9-1.87L8.8,9.43l1.86-0.9l0.9-1.87l0.91,1.87l1.86,0.9L12.47,10.34z'/%3E %3Cpolygon class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' points='14.33,9.43 12.47,10.34 11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 '/%3E%3C/g%3E%3C/svg%3E\");\n}\n\na.mapboxgl-ctrl-logo.mapboxgl-compact {\n    width: 21px;\n    height: 21px;\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3C?xml version='1.0' encoding='utf-8'?%3E %3Csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 21 21' style='enable-background:new 0 0 21 21;' xml:space='preserve'%3E%3Cg transform='translate(0,0.01)'%3E%3Cpath d='m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z' style='opacity:0.9;fill:%23ffffff;enable-background:new' class='st0'/%3E%3Cpath d='M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z' style='opacity:0.35;enable-background:new' class='st1'/%3E%3Cpath d='M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z' style='opacity:0.35;enable-background:new' class='st1'/%3E%3Cpolygon points='11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 ' style='opacity:0.9;fill:%23ffffff;enable-background:new' class='st0'/%3E%3C/g%3E%3C/svg%3E\");\n}\n\n.mapboxgl-ctrl.mapboxgl-ctrl-attrib {\n    padding: 0 5px;\n    background-color: rgba(255, 255, 255, 0.5);\n    margin: 0;\n}\n\n@media screen {\n    .mapboxgl-ctrl-attrib.mapboxgl-compact {\n        margin: 10px;\n        position: relative;\n        background-color: #fff;\n        border-radius: 3px 12px 12px 3px;\n    }\n\n    .mapboxgl-ctrl-attrib.mapboxgl-compact:hover {\n        padding: 2px 24px 2px 4px;\n        visibility: visible;\n    }\n\n    .mapboxgl-ctrl-top-left > .mapboxgl-ctrl-attrib.mapboxgl-compact:hover,\n    .mapboxgl-ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact:hover {\n        padding: 2px 4px 2px 24px;\n        border-radius: 12px 3px 3px 12px;\n    }\n\n    .mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner {\n        display: none;\n    }\n\n    .mapboxgl-ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner {\n        display: block;\n    }\n\n    .mapboxgl-ctrl-attrib.mapboxgl-compact::after {\n        content: '';\n        cursor: pointer;\n        position: absolute;\n        background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath fill='%23333333' fill-rule='evenodd' d='M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0'/%3E %3C/svg%3E\");\n        background-color: rgba(255, 255, 255, 0.5);\n        width: 24px;\n        height: 24px;\n        box-sizing: border-box;\n        border-radius: 12px;\n    }\n\n    .mapboxgl-ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after {\n        bottom: 0;\n        right: 0;\n    }\n\n    .mapboxgl-ctrl-top-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after {\n        top: 0;\n        right: 0;\n    }\n\n    .mapboxgl-ctrl-top-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after {\n        top: 0;\n        left: 0;\n    }\n\n    .mapboxgl-ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after {\n        bottom: 0;\n        left: 0;\n    }\n}\n\n.mapboxgl-ctrl-attrib a {\n    color: rgba(0, 0, 0, 0.75);\n    text-decoration: none;\n}\n\n.mapboxgl-ctrl-attrib a:hover {\n    color: inherit;\n    text-decoration: underline;\n}\n\n/* stylelint-disable-next-line selector-class-pattern */\n.mapboxgl-ctrl-attrib .mapbox-improve-map {\n    font-weight: bold;\n    margin-left: 2px;\n}\n\n.mapboxgl-attrib-empty {\n    display: none;\n}\n\n.mapboxgl-ctrl-scale {\n    background-color: rgba(255, 255, 255, 0.75);\n    font-size: 10px;\n    border-width: medium 2px 2px;\n    border-style: none solid solid;\n    border-color: #333;\n    padding: 0 5px;\n    color: #333;\n    box-sizing: border-box;\n}\n\n.mapboxgl-popup {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: -webkit-flex;\n    display: flex;\n    will-change: transform;\n    pointer-events: none;\n}\n\n.mapboxgl-popup-anchor-top,\n.mapboxgl-popup-anchor-top-left,\n.mapboxgl-popup-anchor-top-right {\n    -webkit-flex-direction: column;\n    flex-direction: column;\n}\n\n.mapboxgl-popup-anchor-bottom,\n.mapboxgl-popup-anchor-bottom-left,\n.mapboxgl-popup-anchor-bottom-right {\n    -webkit-flex-direction: column-reverse;\n    flex-direction: column-reverse;\n}\n\n.mapboxgl-popup-anchor-left {\n    -webkit-flex-direction: row;\n    flex-direction: row;\n}\n\n.mapboxgl-popup-anchor-right {\n    -webkit-flex-direction: row-reverse;\n    flex-direction: row-reverse;\n}\n\n.mapboxgl-popup-tip {\n    width: 0;\n    height: 0;\n    border: 10px solid transparent;\n    z-index: 1;\n}\n\n.mapboxgl-popup-anchor-top .mapboxgl-popup-tip {\n    -webkit-align-self: center;\n    align-self: center;\n    border-top: none;\n    border-bottom-color: #fff;\n}\n\n.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip {\n    -webkit-align-self: flex-start;\n    align-self: flex-start;\n    border-top: none;\n    border-left: none;\n    border-bottom-color: #fff;\n}\n\n.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip {\n    -webkit-align-self: flex-end;\n    align-self: flex-end;\n    border-top: none;\n    border-right: none;\n    border-bottom-color: #fff;\n}\n\n.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip {\n    -webkit-align-self: center;\n    align-self: center;\n    border-bottom: none;\n    border-top-color: #fff;\n}\n\n.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip {\n    -webkit-align-self: flex-start;\n    align-self: flex-start;\n    border-bottom: none;\n    border-left: none;\n    border-top-color: #fff;\n}\n\n.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip {\n    -webkit-align-self: flex-end;\n    align-self: flex-end;\n    border-bottom: none;\n    border-right: none;\n    border-top-color: #fff;\n}\n\n.mapboxgl-popup-anchor-left .mapboxgl-popup-tip {\n    -webkit-align-self: center;\n    align-self: center;\n    border-left: none;\n    border-right-color: #fff;\n}\n\n.mapboxgl-popup-anchor-right .mapboxgl-popup-tip {\n    -webkit-align-self: center;\n    align-self: center;\n    border-right: none;\n    border-left-color: #fff;\n}\n\n.mapboxgl-popup-close-button {\n    position: absolute;\n    right: 0;\n    top: 0;\n    border: 0;\n    border-radius: 0 3px 0 0;\n    cursor: pointer;\n    background-color: transparent;\n}\n\n.mapboxgl-popup-close-button:hover {\n    background-color: rgba(0, 0, 0, 0.05);\n}\n\n.mapboxgl-popup-content {\n    position: relative;\n    background: #fff;\n    border-radius: 3px;\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n    padding: 10px 10px 15px;\n    pointer-events: auto;\n}\n\n.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content {\n    border-top-left-radius: 0;\n}\n\n.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content {\n    border-top-right-radius: 0;\n}\n\n.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content {\n    border-bottom-left-radius: 0;\n}\n\n.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content {\n    border-bottom-right-radius: 0;\n}\n\n.mapboxgl-marker {\n    position: absolute;\n    top: 0;\n    left: 0;\n    will-change: transform;\n}\n\n.mapboxgl-user-location-dot {\n    background-color: #1da1f2;\n    width: 15px;\n    height: 15px;\n    border-radius: 50%;\n    box-shadow: 0 0 2px rgba(0, 0, 0, 0.25);\n}\n\n.mapboxgl-user-location-dot::before {\n    background-color: #1da1f2;\n    content: '';\n    width: 15px;\n    height: 15px;\n    border-radius: 50%;\n    position: absolute;\n    -webkit-animation: mapboxgl-user-location-dot-pulse 2s infinite;\n    -moz-animation: mapboxgl-user-location-dot-pulse 2s infinite;\n    -ms-animation: mapboxgl-user-location-dot-pulse 2s infinite;\n    animation: mapboxgl-user-location-dot-pulse 2s infinite;\n}\n\n.mapboxgl-user-location-dot::after {\n    border-radius: 50%;\n    border: 2px solid #fff;\n    content: '';\n    height: 19px;\n    left: -2px;\n    position: absolute;\n    top: -2px;\n    width: 19px;\n    box-sizing: border-box;\n}\n\n@-webkit-keyframes mapboxgl-user-location-dot-pulse {\n    0%   { -webkit-transform: scale(1); opacity: 1; }\n    70%  { -webkit-transform: scale(3); opacity: 0; }\n    100% { -webkit-transform: scale(1); opacity: 0; }\n}\n\n@-ms-keyframes mapboxgl-user-location-dot-pulse {\n    0%   { -ms-transform: scale(1); opacity: 1; }\n    70%  { -ms-transform: scale(3); opacity: 0; }\n    100% { -ms-transform: scale(1); opacity: 0; }\n}\n\n@keyframes mapboxgl-user-location-dot-pulse {\n    0%   { transform: scale(1); opacity: 1; }\n    70%  { transform: scale(3); opacity: 0; }\n    100% { transform: scale(1); opacity: 0; }\n}\n\n.mapboxgl-user-location-dot-stale {\n    background-color: #aaa;\n}\n\n.mapboxgl-user-location-dot-stale::after {\n    display: none;\n}\n\n.mapboxgl-crosshair,\n.mapboxgl-crosshair .mapboxgl-interactive,\n.mapboxgl-crosshair .mapboxgl-interactive:active {\n    cursor: crosshair;\n}\n\n.mapboxgl-boxzoom {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 0;\n    height: 0;\n    background: #fff;\n    border: 2px dotted #202020;\n    opacity: 0.5;\n}\n\n@media print {\n    /* stylelint-disable-next-line selector-class-pattern */\n    .mapbox-improve-map {\n        display: none;\n    }\n}\n",""])},function(module,exports){module.exports=function(useSourceMap){var list=[];return list.toString=function(){return this.map(function(item){var content=function(item,useSourceMap){var content=item[1]||"",cssMapping=item[3];if(!cssMapping)return content;if(useSourceMap&&"function"==typeof btoa){var sourceMapping=(sourceMap=cssMapping,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))+" */"),sourceURLs=cssMapping.sources.map(function(source){return"/*# sourceURL="+cssMapping.sourceRoot+source+" */"});return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}var sourceMap;return[content].join("\n")}(item,useSourceMap);return item[2]?"@media "+item[2]+"{"+content+"}":content}).join("")},list.i=function(modules,mediaQuery){"string"==typeof modules&&(modules=[[null,modules,""]]);for(var alreadyImportedModules={},i=0;i<this.length;i++){var id=this[i][0];"number"==typeof id&&(alreadyImportedModules[id]=!0)}for(i=0;i<modules.length;i++){var item=modules[i];"number"==typeof item[0]&&alreadyImportedModules[item[0]]||(mediaQuery&&!item[2]?item[2]=mediaQuery:mediaQuery&&(item[2]="("+item[2]+") and ("+mediaQuery+")"),list.push(item))}},list}},function(module,exports,__webpack_require__){var fn,memo,stylesInDom={},isOldIE=(fn=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===memo&&(memo=fn.apply(this,arguments)),memo}),getElement=function(fn){var memo={};return function(target,parent){if("function"==typeof target)return target();if(void 0===memo[target]){var styleTarget=function(target,parent){return parent?parent.querySelector(target):document.querySelector(target)}.call(this,target,parent);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement)try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}memo[target]=styleTarget}return memo[target]}}(),singleton=null,singletonCounter=0,stylesInsertedAtTop=[],fixUrls=__webpack_require__(487);function addStylesToDom(styles,options){for(var i=0;i<styles.length;i++){var item=styles[i],domStyle=stylesInDom[item.id];if(domStyle){domStyle.refs++;for(var j=0;j<domStyle.parts.length;j++)domStyle.parts[j](item.parts[j]);for(;j<item.parts.length;j++)domStyle.parts.push(addStyle(item.parts[j],options))}else{var parts=[];for(j=0;j<item.parts.length;j++)parts.push(addStyle(item.parts[j],options));stylesInDom[item.id]={id:item.id,refs:1,parts:parts}}}}function listToStyles(list,options){for(var styles=[],newStyles={},i=0;i<list.length;i++){var item=list[i],id=options.base?item[0]+options.base:item[0],part={css:item[1],media:item[2],sourceMap:item[3]};newStyles[id]?newStyles[id].parts.push(part):styles.push(newStyles[id]={id:id,parts:[part]})}return styles}function insertStyleElement(options,style){var target=getElement(options.insertInto);if(!target)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var lastStyleElementInsertedAtTop=stylesInsertedAtTop[stylesInsertedAtTop.length-1];if("top"===options.insertAt)lastStyleElementInsertedAtTop?lastStyleElementInsertedAtTop.nextSibling?target.insertBefore(style,lastStyleElementInsertedAtTop.nextSibling):target.appendChild(style):target.insertBefore(style,target.firstChild),stylesInsertedAtTop.push(style);else if("bottom"===options.insertAt)target.appendChild(style);else{if("object"!=typeof options.insertAt||!options.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var nextSibling=getElement(options.insertAt.before,target);target.insertBefore(style,nextSibling)}}function removeStyleElement(style){if(null===style.parentNode)return!1;style.parentNode.removeChild(style);var idx=stylesInsertedAtTop.indexOf(style);idx>=0&&stylesInsertedAtTop.splice(idx,1)}function createStyleElement(options){var style=document.createElement("style");if(void 0===options.attrs.type&&(options.attrs.type="text/css"),void 0===options.attrs.nonce){var nonce=function(){0;return __webpack_require__.nc}();nonce&&(options.attrs.nonce=nonce)}return addAttrs(style,options.attrs),insertStyleElement(options,style),style}function addAttrs(el,attrs){Object.keys(attrs).forEach(function(key){el.setAttribute(key,attrs[key])})}function addStyle(obj,options){var style,update,remove,result;if(options.transform&&obj.css){if(!(result="function"==typeof options.transform?options.transform(obj.css):options.transform.default(obj.css)))return function(){};obj.css=result}if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=createStyleElement(options)),update=applyToSingletonTag.bind(null,style,styleIndex,!1),remove=applyToSingletonTag.bind(null,style,styleIndex,!0)}else obj.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(style=function(options){var link=document.createElement("link");return void 0===options.attrs.type&&(options.attrs.type="text/css"),options.attrs.rel="stylesheet",addAttrs(link,options.attrs),insertStyleElement(options,link),link}(options),update=function(link,options,obj){var css=obj.css,sourceMap=obj.sourceMap,autoFixUrls=void 0===options.convertToAbsoluteUrls&&sourceMap;(options.convertToAbsoluteUrls||autoFixUrls)&&(css=fixUrls(css));sourceMap&&(css+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))+" */");var blob=new Blob([css],{type:"text/css"}),oldSrc=link.href;link.href=URL.createObjectURL(blob),oldSrc&&URL.revokeObjectURL(oldSrc)}.bind(null,style,options),remove=function(){removeStyleElement(style),style.href&&URL.revokeObjectURL(style.href)}):(style=createStyleElement(options),update=function(style,obj){var css=obj.css,media=obj.media;media&&style.setAttribute("media",media);if(style.styleSheet)style.styleSheet.cssText=css;else{for(;style.firstChild;)style.removeChild(style.firstChild);style.appendChild(document.createTextNode(css))}}.bind(null,style),remove=function(){removeStyleElement(style)});return update(obj),function(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap)return;update(obj=newObj)}else remove()}}module.exports=function(list,options){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(options=options||{}).attrs="object"==typeof options.attrs?options.attrs:{},options.singleton||"boolean"==typeof options.singleton||(options.singleton=isOldIE()),options.insertInto||(options.insertInto="head"),options.insertAt||(options.insertAt="bottom");var styles=listToStyles(list,options);return addStylesToDom(styles,options),function(newList){for(var mayRemove=[],i=0;i<styles.length;i++){var item=styles[i];(domStyle=stylesInDom[item.id]).refs--,mayRemove.push(domStyle)}newList&&addStylesToDom(listToStyles(newList,options),options);for(i=0;i<mayRemove.length;i++){var domStyle;if(0===(domStyle=mayRemove[i]).refs){for(var j=0;j<domStyle.parts.length;j++)domStyle.parts[j]();delete stylesInDom[domStyle.id]}}}};var textStore,replaceText=(textStore=[],function(index,replacement){return textStore[index]=replacement,textStore.filter(Boolean).join("\n")});function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.css;if(style.styleSheet)style.styleSheet.cssText=replaceText(index,css);else{var cssNode=document.createTextNode(css),childNodes=style.childNodes;childNodes[index]&&style.removeChild(childNodes[index]),childNodes.length?style.insertBefore(cssNode,childNodes[index]):style.appendChild(cssNode)}}},function(module,exports){module.exports=function(css){var location="undefined"!=typeof window&&window.location;if(!location)throw new Error("fixUrls requires window.location");if(!css||"string"!=typeof css)return css;var baseUrl=location.protocol+"//"+location.host,currentDir=baseUrl+location.pathname.replace(/\/[^\/]*$/,"/");return css.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(fullMatch,origUrl){var newUrl,unquotedOrigUrl=origUrl.trim().replace(/^"(.*)"$/,function(o,$1){return $1}).replace(/^'(.*)'$/,function(o,$1){return $1});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(unquotedOrigUrl)?fullMatch:(newUrl=0===unquotedOrigUrl.indexOf("//")?unquotedOrigUrl:0===unquotedOrigUrl.indexOf("/")?baseUrl+unquotedOrigUrl:currentDir+unquotedOrigUrl.replace(/^\.\//,""),"url("+JSON.stringify(newUrl)+")")})}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(13),Object.defineProperty(exports,"__esModule",{value:!0}),exports.forceReRender=exports.configure=exports.getStorybook=exports.clearDecorators=exports.addParameters=exports.addDecorator=exports.setAddon=exports.storiesOf=void 0;var _client=__webpack_require__(489);__webpack_require__(537);var obj,_render=(obj=__webpack_require__(538))&&obj.__esModule?obj:{default:obj};var _start=(0,_client.start)(_render.default),clientApi=_start.clientApi,configApi=_start.configApi,forceReRender=_start.forceReRender;exports.forceReRender=forceReRender;var storiesOf=clientApi.storiesOf,setAddon=clientApi.setAddon,addDecorator=clientApi.addDecorator,addParameters=clientApi.addParameters,clearDecorators=clientApi.clearDecorators,getStorybook=clientApi.getStorybook;exports.getStorybook=getStorybook,exports.clearDecorators=clearDecorators,exports.addParameters=addParameters,exports.addDecorator=addDecorator,exports.setAddon=setAddon,exports.storiesOf=storiesOf;var configure=configApi.configure;exports.configure=configure},function(module,exports,__webpack_require__){module.exports=__webpack_require__(490).default},function(module,exports,__webpack_require__){"use strict";var obj;__webpack_require__(13),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default=((obj=__webpack_require__(491))&&obj.__esModule?obj:{default:obj}).default;exports.default=_default},function(module,exports,__webpack_require__){"use strict";__webpack_require__(13),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _start=_interopRequireDefault(__webpack_require__(492)),Actions=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}(__webpack_require__(102)),_client_api=_interopRequireDefault(__webpack_require__(268)),_config_api=_interopRequireDefault(__webpack_require__(271)),_story_store=_interopRequireDefault(__webpack_require__(177)),_reducer=_interopRequireDefault(__webpack_require__(272)),_syncUrlWithStore=_interopRequireDefault(__webpack_require__(273));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default={start:_start.default,Actions:Actions,ClientApi:_client_api.default,ConfigApi:_config_api.default,StoryStore:_story_store.default,reducer:_reducer.default,syncUrlWithStore:_syncUrlWithStore.default};exports.default=_default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(render){var channel,decorateStory=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).decorateStory,isBrowser=_global.navigator&&_global.navigator.userAgent&&"storyshots"!==_global.navigator.userAgent&&!(_global.navigator.userAgent.indexOf("Node.js")>-1)&&!(_global.navigator.userAgent.indexOf("jsdom")>-1),storyStore=new _story_store.default,reduxStore=(0,_redux.createStore)(_reducer.default),context={storyStore:storyStore,reduxStore:reduxStore,decorateStory:decorateStory,showMain:showMain,showError:showError,showException:showException},clientApi=new _client_api.default(context);isBrowser&&((channel=(0,_channelPostmessage.default)({page:"preview"})).on(_coreEvents.default.SET_CURRENT_STORY,function(data){reduxStore.dispatch(Actions.selectStory(data.kind,data.story))}),_addons.default.setChannel(channel),Object.assign(context,{channel:channel}),(0,_syncUrlWithStore.default)(reduxStore),_global.window.onkeydown=(0,_key_events.handleKeyboardShortcuts)(channel));void 0!==_global.window&&(_global.window.__STORYBOOK_CLIENT_API__=clientApi,_global.window.__STORYBOOK_ADDONS_CHANNEL__=channel);var clearDecorators=clientApi.clearDecorators,configApi=new _config_api.default(_objectSpread({clearDecorators:clearDecorators},context)),previousKind="",previousStory="",previousRevision=-1,renderUI=function(forceRender){if(isBrowser){var _reduxStore$getState2=reduxStore.getState(),error=_reduxStore$getState2.error;if(error)return void showException(error);try{!function(forceRender){if(0===storyStore.size())return void showNopreview();var _reduxStore$getState=reduxStore.getState(),selectedKind=_reduxStore$getState.selectedKind,selectedStory=_reduxStore$getState.selectedStory,revision=storyStore.getRevision(),story=storyStore.getStoryWithContext(selectedKind,selectedStory);if(!story)return void showNopreview();if(!forceRender&&revision===previousRevision&&selectedKind===previousKind&&previousStory===selectedStory)return;forceRender||(_global.document.documentElement.scrollTop=0);previousRevision=revision,previousKind=selectedKind,previousStory=selectedStory,render(_objectSpread({},context,{story:story,selectedKind:selectedKind,selectedStory:selectedStory,forceRender:forceRender}))}(forceRender),_addons.default.getChannel().emit(_coreEvents.default.STORY_RENDERED)}catch(ex){showException(ex)}}},forceReRender=function(){return renderUI(!0)};isBrowser&&channel.on(_coreEvents.default.FORCE_RE_RENDER,forceReRender);return renderUI(),reduxStore.subscribe(renderUI),{context:context,clientApi:clientApi,configApi:configApi,forceReRender:forceReRender}},__webpack_require__(45),__webpack_require__(59),__webpack_require__(40),__webpack_require__(46),__webpack_require__(60),__webpack_require__(13),__webpack_require__(498),__webpack_require__(500);var _redux=__webpack_require__(501),_addons=_interopRequireDefault(__webpack_require__(168)),_global=__webpack_require__(58),_channelPostmessage=_interopRequireDefault(__webpack_require__(510)),_key_events=__webpack_require__(519),_clientLogger=__webpack_require__(266),_coreEvents=_interopRequireDefault(__webpack_require__(101)),_story_store=_interopRequireDefault(__webpack_require__(177)),_client_api=_interopRequireDefault(__webpack_require__(268)),_config_api=_interopRequireDefault(__webpack_require__(271)),_reducer=_interopRequireDefault(__webpack_require__(272)),Actions=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}(__webpack_require__(102)),_syncUrlWithStore=_interopRequireDefault(__webpack_require__(273));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var classes={MAIN:"sb-show-main",NOPREVIEW:"sb-show-nopreview",ERROR:"sb-show-errordisplay"};function showMain(){_global.document.body.classList.remove(classes.NOPREVIEW),_global.document.body.classList.remove(classes.ERROR),_global.document.body.classList.add(classes.MAIN)}function showNopreview(){_global.document.body.classList.remove(classes.MAIN),_global.document.body.classList.remove(classes.ERROR),_global.document.body.classList.add(classes.NOPREVIEW)}function showErrorDisplay(_ref){var message=_ref.message,stack=_ref.stack;_global.document.getElementById("error-message").textContent=message,_global.document.getElementById("error-stack").textContent=stack,_global.document.body.classList.remove(classes.MAIN),_global.document.body.classList.remove(classes.NOPREVIEW),_global.document.body.classList.add(classes.ERROR)}function showError(_ref2){var title=_ref2.title,description=_ref2.description;_addons.default.getChannel().emit(_coreEvents.default.STORY_ERRORED,{title:title,description:description}),showErrorDisplay({message:title,stack:description})}function showException(exception){_addons.default.getChannel().emit(_coreEvents.default.STORY_THREW_EXCEPTION,exception),showErrorDisplay(exception),_clientLogger.logger.error(exception.stack)}},function(module,exports,__webpack_require__){var speciesConstructor=__webpack_require__(494);module.exports=function(original,length){return new(speciesConstructor(original))(length)}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(28),isArray=__webpack_require__(163),SPECIES=__webpack_require__(22)("species");module.exports=function(original){var C;return isArray(original)&&("function"!=typeof(C=original.constructor)||C!==Array&&!isArray(C.prototype)||(C=void 0),isObject(C)&&null===(C=C[SPECIES])&&(C=void 0)),void 0===C?Array:C}},function(module,exports,__webpack_require__){var UNSCOPABLES=__webpack_require__(22)("unscopables"),ArrayProto=Array.prototype;null==ArrayProto[UNSCOPABLES]&&__webpack_require__(56)(ArrayProto,UNSCOPABLES,{}),module.exports=function(key){ArrayProto[UNSCOPABLES][key]=!0}},function(module,exports,__webpack_require__){"use strict";var create=__webpack_require__(99),descriptor=__webpack_require__(94),setToStringTag=__webpack_require__(97),IteratorPrototype={};__webpack_require__(56)(IteratorPrototype,__webpack_require__(22)("iterator"),function(){return this}),module.exports=function(Constructor,NAME,next){Constructor.prototype=create(IteratorPrototype,{next:descriptor(1,next)}),setToStringTag(Constructor,NAME+" Iterator")}},function(module,exports,__webpack_require__){var has=__webpack_require__(54),toObject=__webpack_require__(66),IE_PROTO=__webpack_require__(160)("IE_PROTO"),ObjectProto=Object.prototype;module.exports=Object.getPrototypeOf||function(O){return O=toObject(O),has(O,IE_PROTO)?O[IE_PROTO]:"function"==typeof O.constructor&&O instanceof O.constructor?O.constructor.prototype:O instanceof Object?ObjectProto:null}},function(module,exports,__webpack_require__){var $export=__webpack_require__(18);$export($export.S+$export.F,"Object",{assign:__webpack_require__(499)})},function(module,exports,__webpack_require__){"use strict";var getKeys=__webpack_require__(79),gOPS=__webpack_require__(162),pIE=__webpack_require__(123),toObject=__webpack_require__(66),IObject=__webpack_require__(122),$assign=Object.assign;module.exports=!$assign||__webpack_require__(33)(function(){var A={},B={},S=Symbol(),K="abcdefghijklmnopqrst";return A[S]=7,K.split("").forEach(function(k){B[k]=k}),7!=$assign({},A)[S]||Object.keys($assign({},B)).join("")!=K})?function(target,source){for(var T=toObject(target),aLen=arguments.length,index=1,getSymbols=gOPS.f,isEnum=pIE.f;aLen>index;)for(var key,S=IObject(arguments[index++]),keys=getSymbols?getKeys(S).concat(getSymbols(S)):getKeys(S),length=keys.length,j=0;length>j;)isEnum.call(S,key=keys[j++])&&(T[key]=S[key]);return T}:$assign},function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(18),$indexOf=__webpack_require__(249)(!1),$native=[].indexOf,NEGATIVE_ZERO=!!$native&&1/[1].indexOf(1,-0)<0;$export($export.P+$export.F*(NEGATIVE_ZERO||!__webpack_require__(83)($native)),"Array",{indexOf:function(searchElement){return NEGATIVE_ZERO?$native.apply(this,arguments)||0:$indexOf(this,searchElement,arguments[1])}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ex,$$observable=(ex=__webpack_require__(502))&&"object"==typeof ex&&"default"in ex?ex.default:ex,randomString=function(){return Math.random().toString(36).substring(7).split("").join(".")},ActionTypes={INIT:"@@redux/INIT"+randomString(),REPLACE:"@@redux/REPLACE"+randomString(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+randomString()}};function isPlainObject(obj){if("object"!=typeof obj||null===obj)return!1;for(var proto=obj;null!==Object.getPrototypeOf(proto);)proto=Object.getPrototypeOf(proto);return Object.getPrototypeOf(obj)===proto}function getUndefinedStateErrorMessage(key,action){var actionType=action&&action.type;return"Given "+(actionType&&'action "'+String(actionType)+'"'||"an action")+', reducer "'+key+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function bindActionCreator(actionCreator,dispatch){return function(){return dispatch(actionCreator.apply(this,arguments))}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function compose(){for(var _len=arguments.length,funcs=new Array(_len),_key=0;_key<_len;_key++)funcs[_key]=arguments[_key];return 0===funcs.length?function(arg){return arg}:1===funcs.length?funcs[0]:funcs.reduce(function(a,b){return function(){return a(b.apply(void 0,arguments))}})}exports.createStore=function createStore(reducer,preloadedState,enhancer){var _ref2;if("function"==typeof preloadedState&&"function"==typeof enhancer||"function"==typeof enhancer&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function");if("function"==typeof preloadedState&&void 0===enhancer&&(enhancer=preloadedState,preloadedState=void 0),void 0!==enhancer){if("function"!=typeof enhancer)throw new Error("Expected the enhancer to be a function.");return enhancer(createStore)(reducer,preloadedState)}if("function"!=typeof reducer)throw new Error("Expected the reducer to be a function.");var currentReducer=reducer,currentState=preloadedState,currentListeners=[],nextListeners=currentListeners,isDispatching=!1;function ensureCanMutateNextListeners(){nextListeners===currentListeners&&(nextListeners=currentListeners.slice())}function getState(){if(isDispatching)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return currentState}function subscribe(listener){if("function"!=typeof listener)throw new Error("Expected the listener to be a function.");if(isDispatching)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var isSubscribed=!0;return ensureCanMutateNextListeners(),nextListeners.push(listener),function(){if(isSubscribed){if(isDispatching)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");isSubscribed=!1,ensureCanMutateNextListeners();var index=nextListeners.indexOf(listener);nextListeners.splice(index,1)}}}function dispatch(action){if(!isPlainObject(action))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===action.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(isDispatching)throw new Error("Reducers may not dispatch actions.");try{isDispatching=!0,currentState=currentReducer(currentState,action)}finally{isDispatching=!1}for(var listeners=currentListeners=nextListeners,i=0;i<listeners.length;i++)(0,listeners[i])();return action}return dispatch({type:ActionTypes.INIT}),(_ref2={dispatch:dispatch,subscribe:subscribe,getState:getState,replaceReducer:function(nextReducer){if("function"!=typeof nextReducer)throw new Error("Expected the nextReducer to be a function.");currentReducer=nextReducer,dispatch({type:ActionTypes.REPLACE})}})[$$observable]=function(){var _ref,outerSubscribe=subscribe;return(_ref={subscribe:function(observer){if("object"!=typeof observer||null===observer)throw new TypeError("Expected the observer to be an object.");function observeState(){observer.next&&observer.next(getState())}return observeState(),{unsubscribe:outerSubscribe(observeState)}}})[$$observable]=function(){return this},_ref},_ref2},exports.combineReducers=function(reducers){for(var reducerKeys=Object.keys(reducers),finalReducers={},i=0;i<reducerKeys.length;i++){var key=reducerKeys[i];"function"==typeof reducers[key]&&(finalReducers[key]=reducers[key])}var shapeAssertionError,finalReducerKeys=Object.keys(finalReducers);try{!function(reducers){Object.keys(reducers).forEach(function(key){var reducer=reducers[key];if(void 0===reducer(void 0,{type:ActionTypes.INIT}))throw new Error('Reducer "'+key+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===reducer(void 0,{type:ActionTypes.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+key+"\" returned undefined when probed with a random type. Don't try to handle "+ActionTypes.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}(finalReducers)}catch(e){shapeAssertionError=e}return function(state,action){if(void 0===state&&(state={}),shapeAssertionError)throw shapeAssertionError;for(var hasChanged=!1,nextState={},_i=0;_i<finalReducerKeys.length;_i++){var _key=finalReducerKeys[_i],reducer=finalReducers[_key],previousStateForKey=state[_key],nextStateForKey=reducer(previousStateForKey,action);if(void 0===nextStateForKey){var errorMessage=getUndefinedStateErrorMessage(_key,action);throw new Error(errorMessage)}nextState[_key]=nextStateForKey,hasChanged=hasChanged||nextStateForKey!==previousStateForKey}return hasChanged?nextState:state}},exports.bindActionCreators=function(actionCreators,dispatch){if("function"==typeof actionCreators)return bindActionCreator(actionCreators,dispatch);if("object"!=typeof actionCreators||null===actionCreators)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===actionCreators?"null":typeof actionCreators)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var keys=Object.keys(actionCreators),boundActionCreators={},i=0;i<keys.length;i++){var key=keys[i],actionCreator=actionCreators[key];"function"==typeof actionCreator&&(boundActionCreators[key]=bindActionCreator(actionCreator,dispatch))}return boundActionCreators},exports.applyMiddleware=function(){for(var _len=arguments.length,middlewares=new Array(_len),_key=0;_key<_len;_key++)middlewares[_key]=arguments[_key];return function(createStore){return function(){var store=createStore.apply(void 0,arguments),_dispatch=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},middlewareAPI={getState:store.getState,dispatch:function(){return _dispatch.apply(void 0,arguments)}},chain=middlewares.map(function(middleware){return middleware(middlewareAPI)});return function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}({},store,{dispatch:_dispatch=compose.apply(void 0,chain)(store.dispatch)})}}},exports.compose=compose,exports.__DO_NOT_USE__ActionTypes=ActionTypes},function(module,exports,__webpack_require__){"use strict";(function(global,module){Object.defineProperty(exports,"__esModule",{value:!0});var obj,root,_ponyfill=__webpack_require__(503),_ponyfill2=(obj=_ponyfill)&&obj.__esModule?obj:{default:obj};root="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==global?global:module;var result=(0,_ponyfill2.default)(root);exports.default=result}).call(this,__webpack_require__(17),__webpack_require__(125)(module))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(root){var result,_Symbol=root.Symbol;"function"==typeof _Symbol?_Symbol.observable?result=_Symbol.observable:(result=_Symbol("observable"),_Symbol.observable=result):result="@@observable";return result}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(13),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){return new _channels.default({transport:{setHandler:function(){},send:function(){}}})};var obj,_channels=(obj=__webpack_require__(254))&&obj.__esModule?obj:{default:obj}},function(module,exports,__webpack_require__){(function(global){var scope=void 0!==global&&global||"undefined"!=typeof self&&self||window,apply=Function.prototype.apply;function Timeout(id,clearFn){this._id=id,this._clearFn=clearFn}exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,scope,arguments),clearTimeout)},exports.setInterval=function(){return new Timeout(apply.call(setInterval,scope,arguments),clearInterval)},exports.clearTimeout=exports.clearInterval=function(timeout){timeout&&timeout.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(scope,this._id)},exports.enroll=function(item,msecs){clearTimeout(item._idleTimeoutId),item._idleTimeout=msecs},exports.unenroll=function(item){clearTimeout(item._idleTimeoutId),item._idleTimeout=-1},exports._unrefActive=exports.active=function(item){clearTimeout(item._idleTimeoutId);var msecs=item._idleTimeout;msecs>=0&&(item._idleTimeoutId=setTimeout(function(){item._onTimeout&&item._onTimeout()},msecs))},__webpack_require__(506),exports.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==global&&global.setImmediate||this&&this.setImmediate,exports.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==global&&global.clearImmediate||this&&this.clearImmediate}).call(this,__webpack_require__(17))},function(module,exports,__webpack_require__){(function(global,process){!function(global,undefined){"use strict";if(!global.setImmediate){var registerImmediate,html,channel,messagePrefix,onGlobalMessage,nextHandle=1,tasksByHandle={},currentlyRunningATask=!1,doc=global.document,attachTo=Object.getPrototypeOf&&Object.getPrototypeOf(global);attachTo=attachTo&&attachTo.setTimeout?attachTo:global,"[object process]"==={}.toString.call(global.process)?registerImmediate=function(handle){process.nextTick(function(){runIfPresent(handle)})}:!function(){if(global.postMessage&&!global.importScripts){var postMessageIsAsynchronous=!0,oldOnMessage=global.onmessage;return global.onmessage=function(){postMessageIsAsynchronous=!1},global.postMessage("","*"),global.onmessage=oldOnMessage,postMessageIsAsynchronous}}()?global.MessageChannel?((channel=new MessageChannel).port1.onmessage=function(event){runIfPresent(event.data)},registerImmediate=function(handle){channel.port2.postMessage(handle)}):doc&&"onreadystatechange"in doc.createElement("script")?(html=doc.documentElement,registerImmediate=function(handle){var script=doc.createElement("script");script.onreadystatechange=function(){runIfPresent(handle),script.onreadystatechange=null,html.removeChild(script),script=null},html.appendChild(script)}):registerImmediate=function(handle){setTimeout(runIfPresent,0,handle)}:(messagePrefix="setImmediate$"+Math.random()+"$",onGlobalMessage=function(event){event.source===global&&"string"==typeof event.data&&0===event.data.indexOf(messagePrefix)&&runIfPresent(+event.data.slice(messagePrefix.length))},global.addEventListener?global.addEventListener("message",onGlobalMessage,!1):global.attachEvent("onmessage",onGlobalMessage),registerImmediate=function(handle){global.postMessage(messagePrefix+handle,"*")}),attachTo.setImmediate=function(callback){"function"!=typeof callback&&(callback=new Function(""+callback));for(var args=new Array(arguments.length-1),i=0;i<args.length;i++)args[i]=arguments[i+1];var task={callback:callback,args:args};return tasksByHandle[nextHandle]=task,registerImmediate(nextHandle),nextHandle++},attachTo.clearImmediate=clearImmediate}function clearImmediate(handle){delete tasksByHandle[handle]}function runIfPresent(handle){if(currentlyRunningATask)setTimeout(runIfPresent,0,handle);else{var task=tasksByHandle[handle];if(task){currentlyRunningATask=!0;try{!function(task){var callback=task.callback,args=task.args;switch(args.length){case 0:callback();break;case 1:callback(args[0]);break;case 2:callback(args[0],args[1]);break;case 3:callback(args[0],args[1],args[2]);break;default:callback.apply(undefined,args)}}(task)}finally{clearImmediate(handle),currentlyRunningATask=!1}}}}}("undefined"==typeof self?void 0===global?this:global:self)}).call(this,__webpack_require__(17),__webpack_require__(44))},function(module,exports,__webpack_require__){"use strict";var $defineProperty=__webpack_require__(34),createDesc=__webpack_require__(94);module.exports=function(object,index,value){index in object?$defineProperty.f(object,index,createDesc(0,value)):object[index]=value}},function(module,exports,__webpack_require__){__webpack_require__(31)&&"g"!=/./g.flags&&__webpack_require__(34).f(RegExp.prototype,"flags",{configurable:!0,get:__webpack_require__(172)})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(13),Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeDecorator=void 0,__webpack_require__(126);var obj,_utilDeprecate=(obj=__webpack_require__(260))&&obj.__esModule?obj:{default:obj};exports.makeDecorator=function(_ref){var name=_ref.name,parameterName=_ref.parameterName,wrapper=_ref.wrapper,_ref$skipIfNoParamete=_ref.skipIfNoParametersOrOptions,skipIfNoParametersOrOptions=void 0!==_ref$skipIfNoParamete&&_ref$skipIfNoParamete,_ref$allowDeprecatedU=_ref.allowDeprecatedUsage,allowDeprecatedUsage=void 0!==_ref$allowDeprecatedU&&_ref$allowDeprecatedU,decorator=function(options){return function(getStory,context){var parameters=context.parameters&&context.parameters[parameterName];return parameters&&parameters.disable?getStory(context):!skipIfNoParametersOrOptions||options||parameters?wrapper(getStory,context,{options:options,parameters:parameters}):getStory(context)}};return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return"function"==typeof args[0]?decorator().apply(void 0,args):function(){for(var _len2=arguments.length,innerArgs=new Array(_len2),_key2=0;_key2<_len2;_key2++)innerArgs[_key2]=arguments[_key2];if(innerArgs.length>1)return decorator.apply(void 0,args).apply(void 0,innerArgs);if(allowDeprecatedUsage)return(0,_utilDeprecate.default)(function(context){return decorator.apply(void 0,args)(innerArgs[0],context)},"Passing stories directly into ".concat(name,"() is deprecated, instead use addDecorator(").concat(name,") and pass options with the '").concat(parameterName,"' parameter"));throw new Error("Passing stories directly into ".concat(name,"() is not allowed, instead use addDecorator(").concat(name,") and pass options with the '").concat(parameterName,"' parameter"))}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(_ref){var page=_ref.page,transport=new PostmsgTransport({page:page});return new _channels.default({transport:transport})},exports.PostmsgTransport=exports.KEY=void 0,__webpack_require__(13),__webpack_require__(40),__webpack_require__(45),__webpack_require__(511),__webpack_require__(516);var _global=__webpack_require__(58),_channels=_interopRequireDefault(__webpack_require__(254)),_jsonStringifySafe=_interopRequireDefault(__webpack_require__(518));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var KEY="storybook-channel";exports.KEY=KEY;var PostmsgTransport=function(){function PostmsgTransport(config){var _this=this;if(function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PostmsgTransport),this._config=config,this._buffer=[],this._handler=null,_global.window.addEventListener("message",this._handleEvent.bind(this),!1),_global.document.addEventListener("DOMContentLoaded",function(){return _this._flush()}),"manager"!==config.page&&"preview"!==config.page)throw new Error('postmsg-channel: "config.page" cannot be "'.concat(config.page,'"'))}var Constructor,protoProps,staticProps;return Constructor=PostmsgTransport,(protoProps=[{key:"setHandler",value:function(handler){this._handler=handler}},{key:"send",value:function(event){var _this2=this,iframeWindow=this._getWindow();if(!iframeWindow)return new Promise(function(resolve,reject){_this2._buffer.push({event:event,resolve:resolve,reject:reject})});var data=(0,_jsonStringifySafe.default)({key:KEY,event:event});return iframeWindow.postMessage(data,"*"),Promise.resolve(null)}},{key:"_flush",value:function(){var _this3=this,buffer=this._buffer;this._buffer=[],buffer.forEach(function(item){_this3.send(item.event).then(item.resolve).catch(item.reject)})}},{key:"_getWindow",value:function(){if("manager"===this._config.page){var iframe=_global.document.getElementById("storybook-preview-iframe");return iframe?iframe.contentWindow:null}return _global.window.parent}},{key:"_handleEvent",value:function(rawEvent){try{var data=rawEvent.data,_JSON$parse=JSON.parse(data),key=_JSON$parse.key,event=_JSON$parse.event;key===KEY&&this._handler(event)}catch(error){}}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),PostmsgTransport}();exports.PostmsgTransport=PostmsgTransport},function(module,exports,__webpack_require__){"use strict";var Internal,newGenericPromiseCapability,OwnPromiseCapability,Wrapper,LIBRARY=__webpack_require__(96),global=__webpack_require__(26),ctx=__webpack_require__(57),classof=__webpack_require__(124),$export=__webpack_require__(18),isObject=__webpack_require__(28),aFunction=__webpack_require__(64),anInstance=__webpack_require__(174),forOf=__webpack_require__(175),speciesConstructor=__webpack_require__(261),task=__webpack_require__(262).set,microtask=__webpack_require__(512)(),newPromiseCapabilityModule=__webpack_require__(264),perform=__webpack_require__(513),userAgent=__webpack_require__(514),promiseResolve=__webpack_require__(515),TypeError=global.TypeError,process=global.process,versions=process&&process.versions,v8=versions&&versions.v8||"",$Promise=global.Promise,isNode="process"==classof(process),empty=function(){},newPromiseCapability=newGenericPromiseCapability=newPromiseCapabilityModule.f,USE_NATIVE=!!function(){try{var promise=$Promise.resolve(1),FakePromise=(promise.constructor={})[__webpack_require__(22)("species")]=function(exec){exec(empty,empty)};return(isNode||"function"==typeof PromiseRejectionEvent)&&promise.then(empty)instanceof FakePromise&&0!==v8.indexOf("6.6")&&-1===userAgent.indexOf("Chrome/66")}catch(e){}}(),isThenable=function(it){var then;return!(!isObject(it)||"function"!=typeof(then=it.then))&&then},notify=function(promise,isReject){if(!promise._n){promise._n=!0;var chain=promise._c;microtask(function(){for(var value=promise._v,ok=1==promise._s,i=0,run=function(reaction){var result,then,exited,handler=ok?reaction.ok:reaction.fail,resolve=reaction.resolve,reject=reaction.reject,domain=reaction.domain;try{handler?(ok||(2==promise._h&&onHandleUnhandled(promise),promise._h=1),!0===handler?result=value:(domain&&domain.enter(),result=handler(value),domain&&(domain.exit(),exited=!0)),result===reaction.promise?reject(TypeError("Promise-chain cycle")):(then=isThenable(result))?then.call(result,resolve,reject):resolve(result)):reject(value)}catch(e){domain&&!exited&&domain.exit(),reject(e)}};chain.length>i;)run(chain[i++]);promise._c=[],promise._n=!1,isReject&&!promise._h&&onUnhandled(promise)})}},onUnhandled=function(promise){task.call(global,function(){var result,handler,console,value=promise._v,unhandled=isUnhandled(promise);if(unhandled&&(result=perform(function(){isNode?process.emit("unhandledRejection",value,promise):(handler=global.onunhandledrejection)?handler({promise:promise,reason:value}):(console=global.console)&&console.error&&console.error("Unhandled promise rejection",value)}),promise._h=isNode||isUnhandled(promise)?2:1),promise._a=void 0,unhandled&&result.e)throw result.v})},isUnhandled=function(promise){return 1!==promise._h&&0===(promise._a||promise._c).length},onHandleUnhandled=function(promise){task.call(global,function(){var handler;isNode?process.emit("rejectionHandled",promise):(handler=global.onrejectionhandled)&&handler({promise:promise,reason:promise._v})})},$reject=function(value){var promise=this;promise._d||(promise._d=!0,(promise=promise._w||promise)._v=value,promise._s=2,promise._a||(promise._a=promise._c.slice()),notify(promise,!0))},$resolve=function(value){var then,promise=this;if(!promise._d){promise._d=!0,promise=promise._w||promise;try{if(promise===value)throw TypeError("Promise can't be resolved itself");(then=isThenable(value))?microtask(function(){var wrapper={_w:promise,_d:!1};try{then.call(value,ctx($resolve,wrapper,1),ctx($reject,wrapper,1))}catch(e){$reject.call(wrapper,e)}}):(promise._v=value,promise._s=1,notify(promise,!1))}catch(e){$reject.call({_w:promise,_d:!1},e)}}};USE_NATIVE||($Promise=function(executor){anInstance(this,$Promise,"Promise","_h"),aFunction(executor),Internal.call(this);try{executor(ctx($resolve,this,1),ctx($reject,this,1))}catch(err){$reject.call(this,err)}},(Internal=function(executor){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=__webpack_require__(176)($Promise.prototype,{then:function(onFulfilled,onRejected){var reaction=newPromiseCapability(speciesConstructor(this,$Promise));return reaction.ok="function"!=typeof onFulfilled||onFulfilled,reaction.fail="function"==typeof onRejected&&onRejected,reaction.domain=isNode?process.domain:void 0,this._c.push(reaction),this._a&&this._a.push(reaction),this._s&&notify(this,!1),reaction.promise},catch:function(onRejected){return this.then(void 0,onRejected)}}),OwnPromiseCapability=function(){var promise=new Internal;this.promise=promise,this.resolve=ctx($resolve,promise,1),this.reject=ctx($reject,promise,1)},newPromiseCapabilityModule.f=newPromiseCapability=function(C){return C===$Promise||C===Wrapper?new OwnPromiseCapability(C):newGenericPromiseCapability(C)}),$export($export.G+$export.W+$export.F*!USE_NATIVE,{Promise:$Promise}),__webpack_require__(97)($Promise,"Promise"),__webpack_require__(265)("Promise"),Wrapper=__webpack_require__(55).Promise,$export($export.S+$export.F*!USE_NATIVE,"Promise",{reject:function(r){var capability=newPromiseCapability(this);return(0,capability.reject)(r),capability.promise}}),$export($export.S+$export.F*(LIBRARY||!USE_NATIVE),"Promise",{resolve:function(x){return promiseResolve(LIBRARY&&this===Wrapper?$Promise:this,x)}}),$export($export.S+$export.F*!(USE_NATIVE&&__webpack_require__(170)(function(iter){$Promise.all(iter).catch(empty)})),"Promise",{all:function(iterable){var C=this,capability=newPromiseCapability(C),resolve=capability.resolve,reject=capability.reject,result=perform(function(){var values=[],index=0,remaining=1;forOf(iterable,!1,function(promise){var $index=index++,alreadyCalled=!1;values.push(void 0),remaining++,C.resolve(promise).then(function(value){alreadyCalled||(alreadyCalled=!0,values[$index]=value,--remaining||resolve(values))},reject)}),--remaining||resolve(values)});return result.e&&reject(result.v),capability.promise},race:function(iterable){var C=this,capability=newPromiseCapability(C),reject=capability.reject,result=perform(function(){forOf(iterable,!1,function(promise){C.resolve(promise).then(capability.resolve,reject)})});return result.e&&reject(result.v),capability.promise}})},function(module,exports,__webpack_require__){var global=__webpack_require__(26),macrotask=__webpack_require__(262).set,Observer=global.MutationObserver||global.WebKitMutationObserver,process=global.process,Promise=global.Promise,isNode="process"==__webpack_require__(65)(process);module.exports=function(){var head,last,notify,flush=function(){var parent,fn;for(isNode&&(parent=process.domain)&&parent.exit();head;){fn=head.fn,head=head.next;try{fn()}catch(e){throw head?notify():last=void 0,e}}last=void 0,parent&&parent.enter()};if(isNode)notify=function(){process.nextTick(flush)};else if(!Observer||global.navigator&&global.navigator.standalone)if(Promise&&Promise.resolve){var promise=Promise.resolve(void 0);notify=function(){promise.then(flush)}}else notify=function(){macrotask.call(global,flush)};else{var toggle=!0,node=document.createTextNode("");new Observer(flush).observe(node,{characterData:!0}),notify=function(){node.data=toggle=!toggle}}return function(fn){var task={fn:fn,next:void 0};last&&(last.next=task),head||(head=task,notify()),last=task}}},function(module,exports){module.exports=function(exec){try{return{e:!1,v:exec()}}catch(e){return{e:!0,v:e}}}},function(module,exports,__webpack_require__){var navigator=__webpack_require__(26).navigator;module.exports=navigator&&navigator.userAgent||""},function(module,exports,__webpack_require__){var anObject=__webpack_require__(35),isObject=__webpack_require__(28),newPromiseCapability=__webpack_require__(264);module.exports=function(C,x){if(anObject(C),isObject(x)&&x.constructor===C)return x;var promiseCapability=newPromiseCapability.f(C);return(0,promiseCapability.resolve)(x),promiseCapability.promise}},function(module,exports,__webpack_require__){var $export=__webpack_require__(18);$export($export.P,"Function",{bind:__webpack_require__(517)})},function(module,exports,__webpack_require__){"use strict";var aFunction=__webpack_require__(64),isObject=__webpack_require__(28),invoke=__webpack_require__(263),arraySlice=[].slice,factories={};module.exports=Function.bind||function(that){var fn=aFunction(this),partArgs=arraySlice.call(arguments,1),bound=function(){var args=partArgs.concat(arraySlice.call(arguments));return this instanceof bound?function(F,len,args){if(!(len in factories)){for(var n=[],i=0;i<len;i++)n[i]="a["+i+"]";factories[len]=Function("F,a","return new F("+n.join(",")+")")}return factories[len](F,args)}(fn,args.length,args):invoke(fn,args,that)};return isObject(fn.prototype)&&(bound.prototype=fn.prototype),bound}},function(module,exports){function serializer(replacer,cycleReplacer){var stack=[],keys=[];return null==cycleReplacer&&(cycleReplacer=function(key,value){return stack[0]===value?"[Circular ~]":"[Circular ~."+keys.slice(0,stack.indexOf(value)).join(".")+"]"}),function(key,value){if(stack.length>0){var thisPos=stack.indexOf(this);~thisPos?stack.splice(thisPos+1):stack.push(this),~thisPos?keys.splice(thisPos,1/0,key):keys.push(key),~stack.indexOf(value)&&(value=cycleReplacer.call(this,key,value))}else stack.push(value);return null==replacer?value:replacer.call(this,key,value)}}(module.exports=function(obj,replacer,spaces,cycleReplacer){return JSON.stringify(obj,serializer(replacer,cycleReplacer),spaces)}).getSerialize=serializer},function(module,exports,__webpack_require__){"use strict";__webpack_require__(13),Object.defineProperty(exports,"__esModule",{value:!0}),exports.isModifierPressed=isModifierPressed,exports.default=handle,exports.handleKeyboardShortcuts=function(channel){return function(event){var parsedEvent=handle(event);parsedEvent&&channel.emit(_coreEvents.default.APPLY_SHORTCUT,{event:parsedEvent})}},exports.features=void 0;var _keycode=_interopRequireDefault(__webpack_require__(520)),_coreEvents=_interopRequireDefault(__webpack_require__(101));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var features={FULLSCREEN:"FULLSCREEN",ADDON_PANEL:"ADDON_PANEL",STORIES_PANEL:"STORIES_PANEL",SHORTCUTS_HELP:"SHORTCUTS_HELP",ESCAPE:"ESCAPE",NEXT_STORY:"NEXT_STORY",PREV_STORY:"PREV_STORY",SHOW_SEARCH:"SHOW_SEARCH",ADDON_PANEL_IN_RIGHT:"ADDON_PANEL_IN_RIGHT"};function isModifierPressed(e){return(e.ctrlKey||91===e.keyCode||e.metaKey)&&e.shiftKey}function handle(e){if(e.keyCode===(0,_keycode.default)("escape"))return features.ESCAPE;if(function(e){return/input|textarea/i.test(e.target.tagName)||null!==e.target.getAttribute("contenteditable")}(e))return!1;if(!isModifierPressed(e))return!1;switch(e.keyCode){case(0,_keycode.default)("F"):return e.preventDefault(),features.FULLSCREEN;case(0,_keycode.default)("Z"):return e.preventDefault(),features.ADDON_PANEL;case(0,_keycode.default)("X"):return e.preventDefault(),features.STORIES_PANEL;case(0,_keycode.default)("right"):return e.preventDefault(),features.NEXT_STORY;case(0,_keycode.default)("left"):return e.preventDefault(),features.PREV_STORY;case(0,_keycode.default)("O"):return e.preventDefault(),features.SHOW_SEARCH;case(0,_keycode.default)("G"):return e.preventDefault(),features.ADDON_PANEL_IN_RIGHT;default:return!1}}exports.features=features},function(module,exports){function keyCode(searchInput){if(searchInput&&"object"==typeof searchInput){var hasKeyCode=searchInput.which||searchInput.keyCode||searchInput.charCode;hasKeyCode&&(searchInput=hasKeyCode)}if("number"==typeof searchInput)return names[searchInput];var foundNamedKey,search=String(searchInput);return(foundNamedKey=codes[search.toLowerCase()])?foundNamedKey:(foundNamedKey=aliases[search.toLowerCase()])||(1===search.length?search.charCodeAt(0):void 0)}keyCode.isEventKey=function(event,nameOrCode){if(event&&"object"==typeof event){var keyCode=event.which||event.keyCode||event.charCode;if(null==keyCode)return!1;if("string"==typeof nameOrCode){var foundNamedKey;if(foundNamedKey=codes[nameOrCode.toLowerCase()])return foundNamedKey===keyCode;if(foundNamedKey=aliases[nameOrCode.toLowerCase()])return foundNamedKey===keyCode}else if("number"==typeof nameOrCode)return nameOrCode===keyCode;return!1}};var codes=(exports=module.exports=keyCode).code=exports.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},aliases=exports.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};
/*!
 * Programatically add the following
 */
for(i=97;i<123;i++)codes[String.fromCharCode(i)]=i-32;for(var i=48;i<58;i++)codes[i-48]=i;for(i=1;i<13;i++)codes["f"+i]=i+111;for(i=0;i<10;i++)codes["numpad "+i]=i+96;var names=exports.names=exports.title={};for(i in codes)names[codes[i]]=i;for(var alias in aliases)codes[alias]=aliases[alias]},function(module,exports,__webpack_require__){var $export=__webpack_require__(18);$export($export.S,"Object",{create:__webpack_require__(99)})},function(module,exports,__webpack_require__){var $export=__webpack_require__(18);$export($export.S,"Object",{setPrototypeOf:__webpack_require__(267).set})},function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(18),aFunction=__webpack_require__(64),toObject=__webpack_require__(66),fails=__webpack_require__(33),$sort=[].sort,test=[1,2,3];$export($export.P+$export.F*(fails(function(){test.sort(void 0)})||!fails(function(){test.sort(null)})||!__webpack_require__(83)($sort)),"Array",{sort:function(comparefn){return void 0===comparefn?$sort.call(toObject(this)):$sort.call(toObject(this),aFunction(comparefn))}})},function(module,exports,__webpack_require__){"use strict";var has=Object.prototype.hasOwnProperty,prefix="~";function Events(){}function EE(fn,context,once){this.fn=fn,this.context=context,this.once=once||!1}function addListener(emitter,event,fn,context,once){if("function"!=typeof fn)throw new TypeError("The listener must be a function");var listener=new EE(fn,context||emitter,once),evt=prefix?prefix+event:event;return emitter._events[evt]?emitter._events[evt].fn?emitter._events[evt]=[emitter._events[evt],listener]:emitter._events[evt].push(listener):(emitter._events[evt]=listener,emitter._eventsCount++),emitter}function clearEvent(emitter,evt){0==--emitter._eventsCount?emitter._events=new Events:delete emitter._events[evt]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(prefix=!1)),EventEmitter.prototype.eventNames=function(){var events,name,names=[];if(0===this._eventsCount)return names;for(name in events=this._events)has.call(events,name)&&names.push(prefix?name.slice(1):name);return Object.getOwnPropertySymbols?names.concat(Object.getOwnPropertySymbols(events)):names},EventEmitter.prototype.listeners=function(event){var evt=prefix?prefix+event:event,handlers=this._events[evt];if(!handlers)return[];if(handlers.fn)return[handlers.fn];for(var i=0,l=handlers.length,ee=new Array(l);i<l;i++)ee[i]=handlers[i].fn;return ee},EventEmitter.prototype.listenerCount=function(event){var evt=prefix?prefix+event:event,listeners=this._events[evt];return listeners?listeners.fn?1:listeners.length:0},EventEmitter.prototype.emit=function(event,a1,a2,a3,a4,a5){var evt=prefix?prefix+event:event;if(!this._events[evt])return!1;var args,i,listeners=this._events[evt],len=arguments.length;if(listeners.fn){switch(listeners.once&&this.removeListener(event,listeners.fn,void 0,!0),len){case 1:return listeners.fn.call(listeners.context),!0;case 2:return listeners.fn.call(listeners.context,a1),!0;case 3:return listeners.fn.call(listeners.context,a1,a2),!0;case 4:return listeners.fn.call(listeners.context,a1,a2,a3),!0;case 5:return listeners.fn.call(listeners.context,a1,a2,a3,a4),!0;case 6:return listeners.fn.call(listeners.context,a1,a2,a3,a4,a5),!0}for(i=1,args=new Array(len-1);i<len;i++)args[i-1]=arguments[i];listeners.fn.apply(listeners.context,args)}else{var j,length=listeners.length;for(i=0;i<length;i++)switch(listeners[i].once&&this.removeListener(event,listeners[i].fn,void 0,!0),len){case 1:listeners[i].fn.call(listeners[i].context);break;case 2:listeners[i].fn.call(listeners[i].context,a1);break;case 3:listeners[i].fn.call(listeners[i].context,a1,a2);break;case 4:listeners[i].fn.call(listeners[i].context,a1,a2,a3);break;default:if(!args)for(j=1,args=new Array(len-1);j<len;j++)args[j-1]=arguments[j];listeners[i].fn.apply(listeners[i].context,args)}}return!0},EventEmitter.prototype.on=function(event,fn,context){return addListener(this,event,fn,context,!1)},EventEmitter.prototype.once=function(event,fn,context){return addListener(this,event,fn,context,!0)},EventEmitter.prototype.removeListener=function(event,fn,context,once){var evt=prefix?prefix+event:event;if(!this._events[evt])return this;if(!fn)return clearEvent(this,evt),this;var listeners=this._events[evt];if(listeners.fn)listeners.fn!==fn||once&&!listeners.once||context&&listeners.context!==context||clearEvent(this,evt);else{for(var i=0,events=[],length=listeners.length;i<length;i++)(listeners[i].fn!==fn||once&&!listeners[i].once||context&&listeners[i].context!==context)&&events.push(listeners[i]);events.length?this._events[evt]=1===events.length?events[0]:events:clearEvent(this,evt)}return this},EventEmitter.prototype.removeAllListeners=function(event){var evt;return event?(evt=prefix?prefix+event:event,this._events[evt]&&clearEvent(this,evt)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=prefix,EventEmitter.EventEmitter=EventEmitter,module.exports=EventEmitter},function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(18),$reduce=__webpack_require__(526);$export($export.P+$export.F*!__webpack_require__(83)([].reduce,!0),"Array",{reduce:function(callbackfn){return $reduce(this,callbackfn,arguments.length,arguments[1],!1)}})},function(module,exports,__webpack_require__){var aFunction=__webpack_require__(64),toObject=__webpack_require__(66),IObject=__webpack_require__(122),toLength=__webpack_require__(81);module.exports=function(that,callbackfn,aLen,memo,isRight){aFunction(callbackfn);var O=toObject(that),self=IObject(O),length=toLength(O.length),index=isRight?length-1:0,i=isRight?-1:1;if(aLen<2)for(;;){if(index in self){memo=self[index],index+=i;break}if(index+=i,isRight?index<0:length<=index)throw TypeError("Reduce of empty array with no initial value")}for(;isRight?index>=0:length>index;index+=i)index in self&&(memo=callbackfn(memo,self[index],index,O));return memo}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(13),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.createSubscriptionsStore=void 0,__webpack_require__(45),__webpack_require__(40),__webpack_require__(46),__webpack_require__(169),__webpack_require__(528);var createSubscriptionsStore=function(){var subscripions=new Map;return{register:function(subscribe){var subscription=subscripions.get(subscribe);subscription||(subscription={unsubscribe:subscribe()},subscripions.set(subscribe,subscription)),subscription.used=!0},markAllAsUnused:function(){subscripions.forEach(function(subscription){subscription.used=!1})},clearUnused:function(){subscripions.forEach(function(subscripion,key){subscripion.used||(subscripion.unsubscribe(),subscripions.delete(key))})}}};exports.createSubscriptionsStore=createSubscriptionsStore;var _default=createSubscriptionsStore();exports.default=_default},function(module,exports,__webpack_require__){"use strict";var strong=__webpack_require__(529),validate=__webpack_require__(269);module.exports=__webpack_require__(530)("Map",function(get){return function(){return get(this,arguments.length>0?arguments[0]:void 0)}},{get:function(key){var entry=strong.getEntry(validate(this,"Map"),key);return entry&&entry.v},set:function(key,value){return strong.def(validate(this,"Map"),0===key?0:key,value)}},strong,!0)},function(module,exports,__webpack_require__){"use strict";var dP=__webpack_require__(34).f,create=__webpack_require__(99),redefineAll=__webpack_require__(176),ctx=__webpack_require__(57),anInstance=__webpack_require__(174),forOf=__webpack_require__(175),$iterDefine=__webpack_require__(167),step=__webpack_require__(252),setSpecies=__webpack_require__(265),DESCRIPTORS=__webpack_require__(31),fastKey=__webpack_require__(121).fastKey,validate=__webpack_require__(269),SIZE=DESCRIPTORS?"_s":"size",getEntry=function(that,key){var entry,index=fastKey(key);if("F"!==index)return that._i[index];for(entry=that._f;entry;entry=entry.n)if(entry.k==key)return entry};module.exports={getConstructor:function(wrapper,NAME,IS_MAP,ADDER){var C=wrapper(function(that,iterable){anInstance(that,C,NAME,"_i"),that._t=NAME,that._i=create(null),that._f=void 0,that._l=void 0,that[SIZE]=0,null!=iterable&&forOf(iterable,IS_MAP,that[ADDER],that)});return redefineAll(C.prototype,{clear:function(){for(var that=validate(this,NAME),data=that._i,entry=that._f;entry;entry=entry.n)entry.r=!0,entry.p&&(entry.p=entry.p.n=void 0),delete data[entry.i];that._f=that._l=void 0,that[SIZE]=0},delete:function(key){var that=validate(this,NAME),entry=getEntry(that,key);if(entry){var next=entry.n,prev=entry.p;delete that._i[entry.i],entry.r=!0,prev&&(prev.n=next),next&&(next.p=prev),that._f==entry&&(that._f=next),that._l==entry&&(that._l=prev),that[SIZE]--}return!!entry},forEach:function(callbackfn){validate(this,NAME);for(var entry,f=ctx(callbackfn,arguments.length>1?arguments[1]:void 0,3);entry=entry?entry.n:this._f;)for(f(entry.v,entry.k,this);entry&&entry.r;)entry=entry.p},has:function(key){return!!getEntry(validate(this,NAME),key)}}),DESCRIPTORS&&dP(C.prototype,"size",{get:function(){return validate(this,NAME)[SIZE]}}),C},def:function(that,key,value){var prev,index,entry=getEntry(that,key);return entry?entry.v=value:(that._l=entry={i:index=fastKey(key,!0),k:key,v:value,p:prev=that._l,n:void 0,r:!1},that._f||(that._f=entry),prev&&(prev.n=entry),that[SIZE]++,"F"!==index&&(that._i[index]=entry)),that},getEntry:getEntry,setStrong:function(C,NAME,IS_MAP){$iterDefine(C,NAME,function(iterated,kind){this._t=validate(iterated,NAME),this._k=kind,this._l=void 0},function(){for(var kind=this._k,entry=this._l;entry&&entry.r;)entry=entry.p;return this._t&&(this._l=entry=entry?entry.n:this._t._f)?step(0,"keys"==kind?entry.k:"values"==kind?entry.v:[entry.k,entry.v]):(this._t=void 0,step(1))},IS_MAP?"entries":"values",!IS_MAP,!0),setSpecies(NAME)}}},function(module,exports,__webpack_require__){"use strict";var global=__webpack_require__(26),$export=__webpack_require__(18),redefine=__webpack_require__(39),redefineAll=__webpack_require__(176),meta=__webpack_require__(121),forOf=__webpack_require__(175),anInstance=__webpack_require__(174),isObject=__webpack_require__(28),fails=__webpack_require__(33),$iterDetect=__webpack_require__(170),setToStringTag=__webpack_require__(97),inheritIfRequired=__webpack_require__(270);module.exports=function(NAME,wrapper,methods,common,IS_MAP,IS_WEAK){var Base=global[NAME],C=Base,ADDER=IS_MAP?"set":"add",proto=C&&C.prototype,O={},fixMethod=function(KEY){var fn=proto[KEY];redefine(proto,KEY,"delete"==KEY?function(a){return!(IS_WEAK&&!isObject(a))&&fn.call(this,0===a?0:a)}:"has"==KEY?function(a){return!(IS_WEAK&&!isObject(a))&&fn.call(this,0===a?0:a)}:"get"==KEY?function(a){return IS_WEAK&&!isObject(a)?void 0:fn.call(this,0===a?0:a)}:"add"==KEY?function(a){return fn.call(this,0===a?0:a),this}:function(a,b){return fn.call(this,0===a?0:a,b),this})};if("function"==typeof C&&(IS_WEAK||proto.forEach&&!fails(function(){(new C).entries().next()}))){var instance=new C,HASNT_CHAINING=instance[ADDER](IS_WEAK?{}:-0,1)!=instance,THROWS_ON_PRIMITIVES=fails(function(){instance.has(1)}),ACCEPT_ITERABLES=$iterDetect(function(iter){new C(iter)}),BUGGY_ZERO=!IS_WEAK&&fails(function(){for(var $instance=new C,index=5;index--;)$instance[ADDER](index,index);return!$instance.has(-0)});ACCEPT_ITERABLES||((C=wrapper(function(target,iterable){anInstance(target,C,NAME);var that=inheritIfRequired(new Base,target,C);return null!=iterable&&forOf(iterable,IS_MAP,that[ADDER],that),that})).prototype=proto,proto.constructor=C),(THROWS_ON_PRIMITIVES||BUGGY_ZERO)&&(fixMethod("delete"),fixMethod("has"),IS_MAP&&fixMethod("get")),(BUGGY_ZERO||HASNT_CHAINING)&&fixMethod(ADDER),IS_WEAK&&proto.clear&&delete proto.clear}else C=common.getConstructor(wrapper,NAME,IS_MAP,ADDER),redefineAll(C.prototype,methods),meta.NEED=!0;return setToStringTag(C,NAME),O[NAME]=C,$export($export.G+$export.W+$export.F*(C!=Base),O),IS_WEAK||common.setStrong(C,NAME,IS_MAP),C}},function(module,exports,__webpack_require__){"use strict";var anObject=__webpack_require__(35),sameValue=__webpack_require__(532),regExpExec=__webpack_require__(274);__webpack_require__(275)("search",1,function(defined,SEARCH,$search,maybeCallNative){return[function(regexp){var O=defined(this),fn=null==regexp?void 0:regexp[SEARCH];return void 0!==fn?fn.call(regexp,O):new RegExp(regexp)[SEARCH](String(O))},function(regexp){var res=maybeCallNative($search,regexp,this);if(res.done)return res.value;var rx=anObject(regexp),S=String(this),previousLastIndex=rx.lastIndex;sameValue(previousLastIndex,0)||(rx.lastIndex=0);var result=regExpExec(rx,S);return sameValue(rx.lastIndex,previousLastIndex)||(rx.lastIndex=previousLastIndex),null===result?-1:result.index}]})},function(module,exports){module.exports=Object.is||function(x,y){return x===y?0!==x||1/x==1/y:x!=x&&y!=y}},function(module,exports,__webpack_require__){"use strict";var regexpExec=__webpack_require__(178);__webpack_require__(18)({target:"RegExp",proto:!0,forced:regexpExec!==/./.exec},{exec:regexpExec})},function(module,exports,__webpack_require__){"use strict";var stringify=__webpack_require__(535),parse=__webpack_require__(536),formats=__webpack_require__(277);module.exports={formats:formats,parse:parse,stringify:stringify}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(276),formats=__webpack_require__(277),arrayPrefixGenerators={brackets:function(prefix){return prefix+"[]"},indices:function(prefix,key){return prefix+"["+key+"]"},repeat:function(prefix){return prefix}},isArray=Array.isArray,push=Array.prototype.push,pushToArray=function(arr,valueOrArray){push.apply(arr,isArray(valueOrArray)?valueOrArray:[valueOrArray])},toISO=Date.prototype.toISOString,defaults={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:utils.encode,encodeValuesOnly:!1,indices:!1,serializeDate:function(date){return toISO.call(date)},skipNulls:!1,strictNullHandling:!1},stringify=function stringify(object,prefix,generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly,charset){var obj=object;if("function"==typeof filter?obj=filter(prefix,obj):obj instanceof Date&&(obj=serializeDate(obj)),null===obj){if(strictNullHandling)return encoder&&!encodeValuesOnly?encoder(prefix,defaults.encoder,charset):prefix;obj=""}if("string"==typeof obj||"number"==typeof obj||"boolean"==typeof obj||utils.isBuffer(obj))return encoder?[formatter(encodeValuesOnly?prefix:encoder(prefix,defaults.encoder,charset))+"="+formatter(encoder(obj,defaults.encoder,charset))]:[formatter(prefix)+"="+formatter(String(obj))];var objKeys,values=[];if(void 0===obj)return values;if(Array.isArray(filter))objKeys=filter;else{var keys=Object.keys(obj);objKeys=sort?keys.sort(sort):keys}for(var i=0;i<objKeys.length;++i){var key=objKeys[i];skipNulls&&null===obj[key]||(Array.isArray(obj)?pushToArray(values,stringify(obj[key],generateArrayPrefix(prefix,key),generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly,charset)):pushToArray(values,stringify(obj[key],prefix+(allowDots?"."+key:"["+key+"]"),generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly,charset)))}return values};module.exports=function(object,opts){var obj=object,options=opts?utils.assign({},opts):{};if(null!==options.encoder&&void 0!==options.encoder&&"function"!=typeof options.encoder)throw new TypeError("Encoder has to be a function.");var delimiter=void 0===options.delimiter?defaults.delimiter:options.delimiter,strictNullHandling="boolean"==typeof options.strictNullHandling?options.strictNullHandling:defaults.strictNullHandling,skipNulls="boolean"==typeof options.skipNulls?options.skipNulls:defaults.skipNulls,encode="boolean"==typeof options.encode?options.encode:defaults.encode,encoder="function"==typeof options.encoder?options.encoder:defaults.encoder,sort="function"==typeof options.sort?options.sort:null,allowDots=void 0===options.allowDots?defaults.allowDots:!!options.allowDots,serializeDate="function"==typeof options.serializeDate?options.serializeDate:defaults.serializeDate,encodeValuesOnly="boolean"==typeof options.encodeValuesOnly?options.encodeValuesOnly:defaults.encodeValuesOnly,charset=options.charset||defaults.charset;if(void 0!==options.charset&&"utf-8"!==options.charset&&"iso-8859-1"!==options.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");if(void 0===options.format)options.format=formats.default;else if(!Object.prototype.hasOwnProperty.call(formats.formatters,options.format))throw new TypeError("Unknown format option provided.");var objKeys,filter,formatter=formats.formatters[options.format];"function"==typeof options.filter?obj=(filter=options.filter)("",obj):Array.isArray(options.filter)&&(objKeys=filter=options.filter);var arrayFormat,keys=[];if("object"!=typeof obj||null===obj)return"";arrayFormat=options.arrayFormat in arrayPrefixGenerators?options.arrayFormat:"indices"in options?options.indices?"indices":"repeat":"indices";var generateArrayPrefix=arrayPrefixGenerators[arrayFormat];objKeys||(objKeys=Object.keys(obj)),sort&&objKeys.sort(sort);for(var i=0;i<objKeys.length;++i){var key=objKeys[i];skipNulls&&null===obj[key]||pushToArray(keys,stringify(obj[key],key,generateArrayPrefix,strictNullHandling,skipNulls,encode?encoder:null,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly,charset))}var joined=keys.join(delimiter),prefix=!0===options.addQueryPrefix?"?":"";return options.charsetSentinel&&(prefix+="iso-8859-1"===charset?"utf8=%26%2310003%3B&":"utf8=%E2%9C%93&"),joined.length>0?prefix+joined:""}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(276),has=Object.prototype.hasOwnProperty,defaults={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,decoder:utils.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},interpretNumericEntities=function(str){return str.replace(/&#(\d+);/g,function($0,numberStr){return String.fromCharCode(parseInt(numberStr,10))})},parseKeys=function(givenKey,val,options){if(givenKey){var key=options.allowDots?givenKey.replace(/\.([^.[]+)/g,"[$1]"):givenKey,child=/(\[[^[\]]*])/g,segment=/(\[[^[\]]*])/.exec(key),parent=segment?key.slice(0,segment.index):key,keys=[];if(parent){if(!options.plainObjects&&has.call(Object.prototype,parent)&&!options.allowPrototypes)return;keys.push(parent)}for(var i=0;null!==(segment=child.exec(key))&&i<options.depth;){if(i+=1,!options.plainObjects&&has.call(Object.prototype,segment[1].slice(1,-1))&&!options.allowPrototypes)return;keys.push(segment[1])}return segment&&keys.push("["+key.slice(segment.index)+"]"),function(chain,val,options){for(var leaf=val,i=chain.length-1;i>=0;--i){var obj,root=chain[i];if("[]"===root&&options.parseArrays)obj=[].concat(leaf);else{obj=options.plainObjects?Object.create(null):{};var cleanRoot="["===root.charAt(0)&&"]"===root.charAt(root.length-1)?root.slice(1,-1):root,index=parseInt(cleanRoot,10);options.parseArrays||""!==cleanRoot?!isNaN(index)&&root!==cleanRoot&&String(index)===cleanRoot&&index>=0&&options.parseArrays&&index<=options.arrayLimit?(obj=[])[index]=leaf:obj[cleanRoot]=leaf:obj={0:leaf}}leaf=obj}return leaf}(keys,val,options)}};module.exports=function(str,opts){var options=opts?utils.assign({},opts):{};if(null!==options.decoder&&void 0!==options.decoder&&"function"!=typeof options.decoder)throw new TypeError("Decoder has to be a function.");if(options.ignoreQueryPrefix=!0===options.ignoreQueryPrefix,options.delimiter="string"==typeof options.delimiter||utils.isRegExp(options.delimiter)?options.delimiter:defaults.delimiter,options.depth="number"==typeof options.depth?options.depth:defaults.depth,options.arrayLimit="number"==typeof options.arrayLimit?options.arrayLimit:defaults.arrayLimit,options.parseArrays=!1!==options.parseArrays,options.decoder="function"==typeof options.decoder?options.decoder:defaults.decoder,options.allowDots=void 0===options.allowDots?defaults.allowDots:!!options.allowDots,options.plainObjects="boolean"==typeof options.plainObjects?options.plainObjects:defaults.plainObjects,options.allowPrototypes="boolean"==typeof options.allowPrototypes?options.allowPrototypes:defaults.allowPrototypes,options.parameterLimit="number"==typeof options.parameterLimit?options.parameterLimit:defaults.parameterLimit,options.strictNullHandling="boolean"==typeof options.strictNullHandling?options.strictNullHandling:defaults.strictNullHandling,void 0!==options.charset&&"utf-8"!==options.charset&&"iso-8859-1"!==options.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");if(void 0===options.charset&&(options.charset=defaults.charset),""===str||null==str)return options.plainObjects?Object.create(null):{};for(var tempObj="string"==typeof str?function(str,options){var i,obj={},cleanStr=options.ignoreQueryPrefix?str.replace(/^\?/,""):str,limit=options.parameterLimit===1/0?void 0:options.parameterLimit,parts=cleanStr.split(options.delimiter,limit),skipIndex=-1,charset=options.charset;if(options.charsetSentinel)for(i=0;i<parts.length;++i)0===parts[i].indexOf("utf8=")&&("utf8=%E2%9C%93"===parts[i]?charset="utf-8":"utf8=%26%2310003%3B"===parts[i]&&(charset="iso-8859-1"),skipIndex=i,i=parts.length);for(i=0;i<parts.length;++i)if(i!==skipIndex){var key,val,part=parts[i],bracketEqualsPos=part.indexOf("]="),pos=-1===bracketEqualsPos?part.indexOf("="):bracketEqualsPos+1;-1===pos?(key=options.decoder(part,defaults.decoder,charset),val=options.strictNullHandling?null:""):(key=options.decoder(part.slice(0,pos),defaults.decoder,charset),val=options.decoder(part.slice(pos+1),defaults.decoder,charset)),val&&options.interpretNumericEntities&&"iso-8859-1"===charset&&(val=interpretNumericEntities(val)),has.call(obj,key)?obj[key]=utils.combine(obj[key],val):obj[key]=val}return obj}(str,options):str,obj=options.plainObjects?Object.create(null):{},keys=Object.keys(tempObj),i=0;i<keys.length;++i){var key=keys[i],newObj=parseKeys(key,tempObj[key],options);obj=utils.merge(obj,newObj,options)}return utils.compact(obj)}},function(module,exports,__webpack_require__){"use strict";var _global=__webpack_require__(58);if(_global.window&&_global.window.parent!==_global.window)try{_global.window.__REACT_DEVTOOLS_GLOBAL_HOOK__=_global.window.parent.__REACT_DEVTOOLS_GLOBAL_HOOK__}catch(error){}_global.window&&(_global.window.STORYBOOK_ENV="react")},function(module,exports,__webpack_require__){"use strict";__webpack_require__(13),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(_ref){var story=_ref.story,selectedKind=_ref.selectedKind,selectedStory=_ref.selectedStory,showMain=_ref.showMain,showError=_ref.showError,forceRender=_ref.forceRender,element=story();if(!element)return void showError({title:'Expecting a React element from the story: "'.concat(selectedStory,'" of "').concat(selectedKind,'".'),description:(0,_commonTags.stripIndents)(_templateObject())});if(!(0,_element_check.default)(element))return void showError({title:'Expecting a valid React element from the story: "'.concat(selectedStory,'" of "').concat(selectedKind,'".'),description:(0,_commonTags.stripIndents)(_templateObject2())});forceRender||_reactDom.default.unmountComponentAtNode(rootEl);showMain(),node=element,el=rootEl,_reactDom.default.render(Object({NODE_ENV:"production",NODE_PATH:"",PUBLIC_URL:"."}).STORYBOOK_EXAMPLE_APP?_react.default.createElement(_react.default.StrictMode,null,node):node,el);var node,el},__webpack_require__(539),__webpack_require__(540);var _global=__webpack_require__(58),_react=_interopRequireDefault(__webpack_require__(8)),_reactDom=_interopRequireDefault(__webpack_require__(542)),_commonTags=__webpack_require__(546),_element_check=_interopRequireDefault(__webpack_require__(586));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _templateObject2(){var data=_taggedTemplateLiteral(["\n         Seems like you are not returning a correct React element from the story.\n         Could you double check that?\n       "]);return _templateObject2=function(){return data},data}function _templateObject(){var data=_taggedTemplateLiteral(['\n        Did you forget to return the React element from the story?\n        Use "() => (<MyComp/>)" or "() => { return <MyComp/>; }" when defining the story.\n      ']);return _templateObject=function(){return data},data}function _taggedTemplateLiteral(strings,raw){return raw||(raw=strings.slice(0)),Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}var rootEl=_global.document?_global.document.getElementById("root"):null},function(module,exports,__webpack_require__){var $export=__webpack_require__(18);$export($export.S+$export.F*!__webpack_require__(31),"Object",{defineProperties:__webpack_require__(250)})},function(module,exports,__webpack_require__){var isObject=__webpack_require__(28),meta=__webpack_require__(121).onFreeze;__webpack_require__(253)("freeze",function($freeze){return function(it){return $freeze&&isObject(it)?$freeze(meta(it)):it}})},function(module,exports,__webpack_require__){"use strict";
/** @license React v16.7.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k=__webpack_require__(278),n="function"==typeof Symbol&&Symbol.for,p=n?Symbol.for("react.element"):60103,q=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,t=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,v=n?Symbol.for("react.provider"):60109,w=n?Symbol.for("react.context"):60110,x=n?Symbol.for("react.concurrent_mode"):60111,y=n?Symbol.for("react.forward_ref"):60112,z=n?Symbol.for("react.suspense"):60113,A=n?Symbol.for("react.memo"):60115,B=n?Symbol.for("react.lazy"):60116,C="function"==typeof Symbol&&Symbol.iterator;function D(a){for(var b=arguments.length-1,e="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=0;c<b;c++)e+="&args[]="+encodeURIComponent(arguments[c+1]);!function(a,b,e,c,d,g,h,f){if(!a){if(a=void 0,void 0===b)a=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[e,c,d,g,h,f],m=0;(a=Error(b.replace(/%s/g,function(){return l[m++]}))).name="Invariant Violation"}throw a.framesToPop=1,a}}(!1,"Minified React error #"+a+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",e)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F={};function G(a,b,e){this.props=a,this.context=b,this.refs=F,this.updater=e||E}function H(){}function I(a,b,e){this.props=a,this.context=b,this.refs=F,this.updater=e||E}G.prototype.isReactComponent={},G.prototype.setState=function(a,b){"object"!=typeof a&&"function"!=typeof a&&null!=a&&D("85"),this.updater.enqueueSetState(this,a,b,"setState")},G.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")},H.prototype=G.prototype;var J=I.prototype=new H;J.constructor=I,k(J,G.prototype),J.isPureReactComponent=!0;var K={current:null,currentDispatcher:null},L=Object.prototype.hasOwnProperty,M={key:!0,ref:!0,__self:!0,__source:!0};function N(a,b,e){var c=void 0,d={},g=null,h=null;if(null!=b)for(c in void 0!==b.ref&&(h=b.ref),void 0!==b.key&&(g=""+b.key),b)L.call(b,c)&&!M.hasOwnProperty(c)&&(d[c]=b[c]);var f=arguments.length-2;if(1===f)d.children=e;else if(1<f){for(var l=Array(f),m=0;m<f;m++)l[m]=arguments[m+2];d.children=l}if(a&&a.defaultProps)for(c in f=a.defaultProps)void 0===d[c]&&(d[c]=f[c]);return{$$typeof:p,type:a,key:g,ref:h,props:d,_owner:K.current}}function O(a){return"object"==typeof a&&null!==a&&a.$$typeof===p}var P=/\/+/g,Q=[];function R(a,b,e,c){if(Q.length){var d=Q.pop();return d.result=a,d.keyPrefix=b,d.func=e,d.context=c,d.count=0,d}return{result:a,keyPrefix:b,func:e,context:c,count:0}}function S(a){a.result=null,a.keyPrefix=null,a.func=null,a.context=null,a.count=0,10>Q.length&&Q.push(a)}function V(a,b,e){return null==a?0:function T(a,b,e,c){var d=typeof a;"undefined"!==d&&"boolean"!==d||(a=null);var g=!1;if(null===a)g=!0;else switch(d){case"string":case"number":g=!0;break;case"object":switch(a.$$typeof){case p:case q:g=!0}}if(g)return e(c,a,""===b?"."+U(a,0):b),1;if(g=0,b=""===b?".":b+":",Array.isArray(a))for(var h=0;h<a.length;h++){var f=b+U(d=a[h],h);g+=T(d,f,e,c)}else if(f=null===a||"object"!=typeof a?null:"function"==typeof(f=C&&a[C]||a["@@iterator"])?f:null,"function"==typeof f)for(a=f.call(a),h=0;!(d=a.next()).done;)g+=T(d=d.value,f=b+U(d,h++),e,c);else"object"===d&&D("31","[object Object]"==(e=""+a)?"object with keys {"+Object.keys(a).join(", ")+"}":e,"");return g}(a,"",b,e)}function U(a,b){return"object"==typeof a&&null!==a&&null!=a.key?function(a){var b={"=":"=0",":":"=2"};return"$"+(""+a).replace(/[=:]/g,function(a){return b[a]})}(a.key):b.toString(36)}function ca(a,b){a.func.call(a.context,b,a.count++)}function da(a,b,e){var c=a.result,d=a.keyPrefix;a=a.func.call(a.context,b,a.count++),Array.isArray(a)?W(a,c,e,function(a){return a}):null!=a&&(O(a)&&(a=function(a,b){return{$$typeof:p,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}(a,d+(!a.key||b&&b.key===a.key?"":(""+a.key).replace(P,"$&/")+"/")+e)),c.push(a))}function W(a,b,e,c,d){var g="";null!=e&&(g=(""+e).replace(P,"$&/")+"/"),V(a,da,b=R(b,g,c,d)),S(b)}var X={Children:{map:function(a,b,e){if(null==a)return a;var c=[];return W(a,c,null,b,e),c},forEach:function(a,b,e){if(null==a)return a;V(a,ca,b=R(null,null,b,e)),S(b)},count:function(a){return V(a,function(){return null},null)},toArray:function(a){var b=[];return W(a,b,null,function(a){return a}),b},only:function(a){return O(a)||D("143"),a}},createRef:function(){return{current:null}},Component:G,PureComponent:I,createContext:function(a,b){return void 0===b&&(b=null),(a={$$typeof:w,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:v,_context:a},a.Consumer=a},forwardRef:function(a){return{$$typeof:y,render:a}},lazy:function(a){return{$$typeof:B,_ctor:a,_status:-1,_result:null}},memo:function(a,b){return{$$typeof:A,type:a,compare:void 0===b?null:b}},Fragment:r,StrictMode:t,Suspense:z,createElement:N,cloneElement:function(a,b,e){null==a&&D("267",a);var c=void 0,d=k({},a.props),g=a.key,h=a.ref,f=a._owner;if(null!=b){void 0!==b.ref&&(h=b.ref,f=K.current),void 0!==b.key&&(g=""+b.key);var l=void 0;for(c in a.type&&a.type.defaultProps&&(l=a.type.defaultProps),b)L.call(b,c)&&!M.hasOwnProperty(c)&&(d[c]=void 0===b[c]&&void 0!==l?l[c]:b[c])}if(1===(c=arguments.length-2))d.children=e;else if(1<c){l=Array(c);for(var m=0;m<c;m++)l[m]=arguments[m+2];d.children=l}return{$$typeof:p,type:a.type,key:g,ref:h,props:d,_owner:f}},createFactory:function(a){var b=N.bind(null,a);return b.type=a,b},isValidElement:O,version:"16.7.0",unstable_ConcurrentMode:x,unstable_Profiler:u,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:K,assign:k}},Y={default:X},Z=Y&&X||Y;module.exports=Z.default||Z},function(module,exports,__webpack_require__){"use strict";!function checkDCE(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(err){console.error(err)}}(),module.exports=__webpack_require__(543)},function(module,exports,__webpack_require__){"use strict";
/** @license React v16.7.0
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=__webpack_require__(8),n=__webpack_require__(278),ba=__webpack_require__(544);function t(a){for(var b=arguments.length-1,c="https://reactjs.org/docs/error-decoder.html?invariant="+a,d=0;d<b;d++)c+="&args[]="+encodeURIComponent(arguments[d+1]);!function(a,b,c,d,e,f,g,h){if(!a){if(a=void 0,void 0===b)a=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var k=[c,d,e,f,g,h],l=0;(a=Error(b.replace(/%s/g,function(){return k[l++]}))).name="Invariant Violation"}throw a.framesToPop=1,a}}(!1,"Minified React error #"+a+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",c)}aa||t("227");var ea=!1,fa=null,ha=!1,ia=null,ja={onError:function(a){ea=!0,fa=a}};function ka(a,b,c,d,e,f,g,h,k){ea=!1,fa=null,function(a,b,c,d,e,f,g,h,k){var l=Array.prototype.slice.call(arguments,3);try{b.apply(c,l)}catch(m){this.onError(m)}}.apply(ja,arguments)}var ma=null,na={};function oa(){if(ma)for(var a in na){var b=na[a],c=ma.indexOf(a);if(-1<c||t("96",a),!pa[c])for(var d in b.extractEvents||t("97",a),pa[c]=b,c=b.eventTypes){var e=void 0,f=c[d],g=b,h=d;qa.hasOwnProperty(h)&&t("99",h),qa[h]=f;var k=f.phasedRegistrationNames;if(k){for(e in k)k.hasOwnProperty(e)&&ra(k[e],g,h);e=!0}else f.registrationName?(ra(f.registrationName,g,h),e=!0):e=!1;e||t("98",d,a)}}}function ra(a,b,c){sa[a]&&t("100",a),sa[a]=b,ta[a]=b.eventTypes[c].dependencies}var pa=[],qa={},sa={},ta={},ua=null,va=null,wa=null;function xa(a,b,c){var d=a.type||"unknown-event";a.currentTarget=wa(c),function(a,b,c,d,e,f,g,h,k){if(ka.apply(this,arguments),ea){if(ea){var l=fa;ea=!1,fa=null}else t("198"),l=void 0;ha||(ha=!0,ia=l)}}(d,b,void 0,a),a.currentTarget=null}function ya(a,b){return null==b&&t("30"),null==a?b:Array.isArray(a)?Array.isArray(b)?(a.push.apply(a,b),a):(a.push(b),a):Array.isArray(b)?[a].concat(b):[a,b]}function za(a,b,c){Array.isArray(a)?a.forEach(b,c):a&&b.call(c,a)}var Aa=null;function Ba(a){if(a){var b=a._dispatchListeners,c=a._dispatchInstances;if(Array.isArray(b))for(var d=0;d<b.length&&!a.isPropagationStopped();d++)xa(a,b[d],c[d]);else b&&xa(a,b,c);a._dispatchListeners=null,a._dispatchInstances=null,a.isPersistent()||a.constructor.release(a)}}var Ca={injectEventPluginOrder:function(a){ma&&t("101"),ma=Array.prototype.slice.call(a),oa()},injectEventPluginsByName:function(a){var c,b=!1;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];na.hasOwnProperty(c)&&na[c]===d||(na[c]&&t("102",c),na[c]=d,b=!0)}b&&oa()}};function Da(a,b){var c=a.stateNode;if(!c)return null;var d=ua(c);if(!d)return null;c=d[b];a:switch(b){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(d=!d.disabled)||(d=!("button"===(a=a.type)||"input"===a||"select"===a||"textarea"===a)),a=!d;break a;default:a=!1}return a?null:(c&&"function"!=typeof c&&t("231",b,typeof c),c)}function Ea(a){if(null!==a&&(Aa=ya(Aa,a)),a=Aa,Aa=null,a&&(za(a,Ba),Aa&&t("95"),ha))throw a=ia,ha=!1,ia=null,a}var Fa=Math.random().toString(36).slice(2),Ga="__reactInternalInstance$"+Fa,Ha="__reactEventHandlers$"+Fa;function Ia(a){if(a[Ga])return a[Ga];for(;!a[Ga];){if(!a.parentNode)return null;a=a.parentNode}return 5===(a=a[Ga]).tag||6===a.tag?a:null}function Ja(a){return!(a=a[Ga])||5!==a.tag&&6!==a.tag?null:a}function Ka(a){if(5===a.tag||6===a.tag)return a.stateNode;t("33")}function La(a){return a[Ha]||null}function Ma(a){do{a=a.return}while(a&&5!==a.tag);return a||null}function Na(a,b,c){(b=Da(a,c.dispatchConfig.phasedRegistrationNames[b]))&&(c._dispatchListeners=ya(c._dispatchListeners,b),c._dispatchInstances=ya(c._dispatchInstances,a))}function Oa(a){if(a&&a.dispatchConfig.phasedRegistrationNames){for(var b=a._targetInst,c=[];b;)c.push(b),b=Ma(b);for(b=c.length;0<b--;)Na(c[b],"captured",a);for(b=0;b<c.length;b++)Na(c[b],"bubbled",a)}}function Pa(a,b,c){a&&c&&c.dispatchConfig.registrationName&&(b=Da(a,c.dispatchConfig.registrationName))&&(c._dispatchListeners=ya(c._dispatchListeners,b),c._dispatchInstances=ya(c._dispatchInstances,a))}function Qa(a){a&&a.dispatchConfig.registrationName&&Pa(a._targetInst,null,a)}function Ra(a){za(a,Oa)}var Sa=!("undefined"==typeof window||!window.document||!window.document.createElement);function Ta(a,b){var c={};return c[a.toLowerCase()]=b.toLowerCase(),c["Webkit"+a]="webkit"+b,c["Moz"+a]="moz"+b,c}var Ua={animationend:Ta("Animation","AnimationEnd"),animationiteration:Ta("Animation","AnimationIteration"),animationstart:Ta("Animation","AnimationStart"),transitionend:Ta("Transition","TransitionEnd")},Va={},Wa={};function Xa(a){if(Va[a])return Va[a];if(!Ua[a])return a;var c,b=Ua[a];for(c in b)if(b.hasOwnProperty(c)&&c in Wa)return Va[a]=b[c];return a}Sa&&(Wa=document.createElement("div").style,"AnimationEvent"in window||(delete Ua.animationend.animation,delete Ua.animationiteration.animation,delete Ua.animationstart.animation),"TransitionEvent"in window||delete Ua.transitionend.transition);var Ya=Xa("animationend"),Za=Xa("animationiteration"),$a=Xa("animationstart"),ab=Xa("transitionend"),bb="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cb=null,eb=null,fb=null;function gb(){if(fb)return fb;var a,d,b=eb,c=b.length,e="value"in cb?cb.value:cb.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return fb=e.slice(a,1<d?1-d:void 0)}function hb(){return!0}function ib(){return!1}function z(a,b,c,d){for(var e in this.dispatchConfig=a,this._targetInst=b,this.nativeEvent=c,a=this.constructor.Interface)a.hasOwnProperty(e)&&((b=a[e])?this[e]=b(c):"target"===e?this.target=d:this[e]=c[e]);return this.isDefaultPrevented=(null!=c.defaultPrevented?c.defaultPrevented:!1===c.returnValue)?hb:ib,this.isPropagationStopped=ib,this}function kb(a,b,c,d){if(this.eventPool.length){var e=this.eventPool.pop();return this.call(e,a,b,c,d),e}return new this(a,b,c,d)}function lb(a){a instanceof this||t("279"),a.destructor(),10>this.eventPool.length&&this.eventPool.push(a)}function jb(a){a.eventPool=[],a.getPooled=kb,a.release=lb}n(z.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():"unknown"!=typeof a.returnValue&&(a.returnValue=!1),this.isDefaultPrevented=hb)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():"unknown"!=typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=hb)},persist:function(){this.isPersistent=hb},isPersistent:ib,destructor:function(){var b,a=this.constructor.Interface;for(b in a)this[b]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=ib,this._dispatchInstances=this._dispatchListeners=null}}),z.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},z.extend=function(a){function b(){}function c(){return d.apply(this,arguments)}var d=this;b.prototype=d.prototype;var e=new b;return n(e,c.prototype),c.prototype=e,c.prototype.constructor=c,c.Interface=n({},d.Interface,a),c.extend=d.extend,jb(c),c},jb(z);var mb=z.extend({data:null}),nb=z.extend({data:null}),ob=[9,13,27,32],pb=Sa&&"CompositionEvent"in window,qb=null;Sa&&"documentMode"in document&&(qb=document.documentMode);var rb=Sa&&"TextEvent"in window&&!qb,sb=Sa&&(!pb||qb&&8<qb&&11>=qb),tb=String.fromCharCode(32),ub={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},vb=!1;function wb(a,b){switch(a){case"keyup":return-1!==ob.indexOf(b.keyCode);case"keydown":return 229!==b.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function xb(a){return"object"==typeof(a=a.detail)&&"data"in a?a.data:null}var yb=!1;var Bb={eventTypes:ub,extractEvents:function(a,b,c,d){var e=void 0,f=void 0;if(pb)b:{switch(a){case"compositionstart":e=ub.compositionStart;break b;case"compositionend":e=ub.compositionEnd;break b;case"compositionupdate":e=ub.compositionUpdate;break b}e=void 0}else yb?wb(a,c)&&(e=ub.compositionEnd):"keydown"===a&&229===c.keyCode&&(e=ub.compositionStart);return e?(sb&&"ko"!==c.locale&&(yb||e!==ub.compositionStart?e===ub.compositionEnd&&yb&&(f=gb()):(eb="value"in(cb=d)?cb.value:cb.textContent,yb=!0)),e=mb.getPooled(e,b,c,d),f?e.data=f:null!==(f=xb(c))&&(e.data=f),Ra(e),f=e):f=null,(a=rb?function(a,b){switch(a){case"compositionend":return xb(b);case"keypress":return 32!==b.which?null:(vb=!0,tb);case"textInput":return(a=b.data)===tb&&vb?null:a;default:return null}}(a,c):function(a,b){if(yb)return"compositionend"===a||!pb&&wb(a,b)?(a=gb(),fb=eb=cb=null,yb=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case"compositionend":return sb&&"ko"!==b.locale?null:b.data;default:return null}}(a,c))?((b=nb.getPooled(ub.beforeInput,b,c,d)).data=a,Ra(b)):b=null,null===f?b:null===b?f:[f,b]}},Cb=null,Db=null,Eb=null;function Hb(a){if(a=va(a)){"function"!=typeof Cb&&t("280");var b=ua(a.stateNode);Cb(a.stateNode,a.type,b)}}function Ib(a){Db?Eb?Eb.push(a):Eb=[a]:Db=a}function Jb(){if(Db){var a=Db,b=Eb;if(Eb=Db=null,Hb(a),b)for(a=0;a<b.length;a++)Hb(b[a])}}function Kb(a,b){return a(b)}function Lb(a,b,c){return a(b,c)}function Mb(){}var Nb=!1;function Ob(a,b){if(Nb)return a(b);Nb=!0;try{return Kb(a,b)}finally{Nb=!1,(null!==Db||null!==Eb)&&(Mb(),Jb())}}var Pb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qb(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return"input"===b?!!Pb[a.type]:"textarea"===b}function Rb(a){return(a=a.target||a.srcElement||window).correspondingUseElement&&(a=a.correspondingUseElement),3===a.nodeType?a.parentNode:a}function Sb(a){if(!Sa)return!1;var b=(a="on"+a)in document;return b||((b=document.createElement("div")).setAttribute(a,"return;"),b="function"==typeof b[a]),b}function Tb(a){var b=a.type;return(a=a.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===b||"radio"===b)}function Vb(a){a._valueTracker||(a._valueTracker=function(a){var b=Tb(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=""+a[b];if(!a.hasOwnProperty(b)&&void 0!==c&&"function"==typeof c.get&&"function"==typeof c.set){var e=c.get,f=c.set;return Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=""+a,f.call(this,a)}}),Object.defineProperty(a,b,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(a){d=""+a},stopTracking:function(){a._valueTracker=null,delete a[b]}}}}(a))}function Wb(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue(),d="";return a&&(d=Tb(a)?a.checked?"true":"false":a.value),(a=d)!==c&&(b.setValue(a),!0)}var Xb=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yb=/^(.*)[\\\/]/,D="function"==typeof Symbol&&Symbol.for,Zb=D?Symbol.for("react.element"):60103,$b=D?Symbol.for("react.portal"):60106,ac=D?Symbol.for("react.fragment"):60107,bc=D?Symbol.for("react.strict_mode"):60108,cc=D?Symbol.for("react.profiler"):60114,dc=D?Symbol.for("react.provider"):60109,ec=D?Symbol.for("react.context"):60110,fc=D?Symbol.for("react.concurrent_mode"):60111,gc=D?Symbol.for("react.forward_ref"):60112,hc=D?Symbol.for("react.suspense"):60113,ic=D?Symbol.for("react.memo"):60115,jc=D?Symbol.for("react.lazy"):60116,kc="function"==typeof Symbol&&Symbol.iterator;function lc(a){return null===a||"object"!=typeof a?null:"function"==typeof(a=kc&&a[kc]||a["@@iterator"])?a:null}function mc(a){if(null==a)return null;if("function"==typeof a)return a.displayName||a.name||null;if("string"==typeof a)return a;switch(a){case fc:return"ConcurrentMode";case ac:return"Fragment";case $b:return"Portal";case cc:return"Profiler";case bc:return"StrictMode";case hc:return"Suspense"}if("object"==typeof a)switch(a.$$typeof){case ec:return"Context.Consumer";case dc:return"Context.Provider";case gc:var b=a.render;return b=b.displayName||b.name||"",a.displayName||(""!==b?"ForwardRef("+b+")":"ForwardRef");case ic:return mc(a.type);case jc:if(a=1===a._status?a._result:null)return mc(a)}return null}function nc(a){var b="";do{a:switch(a.tag){case 3:case 4:case 6:case 7:case 10:case 9:var c="";break a;default:var d=a._debugOwner,e=a._debugSource,f=mc(a.type);c=null,d&&(c=mc(d.type)),d=f,f="",e?f=" (at "+e.fileName.replace(Yb,"")+":"+e.lineNumber+")":c&&(f=" (created by "+c+")"),c="\n    in "+(d||"Unknown")+f}b+=c,a=a.return}while(a);return b}var oc=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pc=Object.prototype.hasOwnProperty,qc={},rc={};function E(a,b,c,d,e){this.acceptsBooleans=2===b||3===b||4===b,this.attributeName=d,this.attributeNamespace=e,this.mustUseProperty=c,this.propertyName=a,this.type=b}var F={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){F[a]=new E(a,0,!1,a,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var b=a[0];F[b]=new E(b,1,!1,a[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){F[a]=new E(a,2,!1,a.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){F[a]=new E(a,2,!1,a,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){F[a]=new E(a,3,!1,a.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(a){F[a]=new E(a,3,!0,a,null)}),["capture","download"].forEach(function(a){F[a]=new E(a,4,!1,a,null)}),["cols","rows","size","span"].forEach(function(a){F[a]=new E(a,6,!1,a,null)}),["rowSpan","start"].forEach(function(a){F[a]=new E(a,5,!1,a.toLowerCase(),null)});var vc=/[\-:]([a-z])/g;function wc(a){return a[1].toUpperCase()}function xc(a,b,c,d){var e=F.hasOwnProperty(b)?F[b]:null;(null!==e?0===e.type:!d&&(2<b.length&&("o"===b[0]||"O"===b[0])&&("n"===b[1]||"N"===b[1])))||(function(a,b,c,d){if(null==b||function(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case"function":case"symbol":return!0;case"boolean":return!d&&(null!==c?!c.acceptsBooleans:"data-"!==(a=a.toLowerCase().slice(0,5))&&"aria-"!==a);default:return!1}}(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}(b,c,e,d)&&(c=null),d||null===e?function(a){return!!pc.call(rc,a)||!pc.call(qc,a)&&(oc.test(a)?rc[a]=!0:(qc[a]=!0,!1))}(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,""+c)):e.mustUseProperty?a[e.propertyName]=null===c?3!==e.type&&"":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(c=3===(e=e.type)||4===e&&!0===c?"":""+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}function yc(a){switch(typeof a){case"boolean":case"number":case"object":case"string":case"undefined":return a;default:return""}}function zc(a,b){var c=b.checked;return n({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}function Ac(a,b){var c=null==b.defaultValue?"":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=yc(null!=b.value?b.value:c),a._wrapperState={initialChecked:d,initialValue:c,controlled:"checkbox"===b.type||"radio"===b.type?null!=b.checked:null!=b.value}}function Bc(a,b){null!=(b=b.checked)&&xc(a,"checked",b,!1)}function Cc(a,b){Bc(a,b);var c=yc(b.value),d=b.type;if(null!=c)"number"===d?(0===c&&""===a.value||a.value!=c)&&(a.value=""+c):a.value!==""+c&&(a.value=""+c);else if("submit"===d||"reset"===d)return void a.removeAttribute("value");b.hasOwnProperty("value")?Dc(a,b.type,c):b.hasOwnProperty("defaultValue")&&Dc(a,b.type,yc(b.defaultValue)),null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}function Ec(a,b,c){if(b.hasOwnProperty("value")||b.hasOwnProperty("defaultValue")){var d=b.type;if(!("submit"!==d&&"reset"!==d||void 0!==b.value&&null!==b.value))return;b=""+a._wrapperState.initialValue,c||b===a.value||(a.value=b),a.defaultValue=b}""!==(c=a.name)&&(a.name=""),a.defaultChecked=!a.defaultChecked,a.defaultChecked=!!a._wrapperState.initialChecked,""!==c&&(a.name=c)}function Dc(a,b,c){"number"===b&&a.ownerDocument.activeElement===a||(null==c?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+c&&(a.defaultValue=""+c))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var b=a.replace(vc,wc);F[b]=new E(b,1,!1,a,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var b=a.replace(vc,wc);F[b]=new E(b,1,!1,a,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(a){var b=a.replace(vc,wc);F[b]=new E(b,1,!1,a,"http://www.w3.org/XML/1998/namespace")}),F.tabIndex=new E("tabIndex",1,!1,"tabindex",null);var Fc={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Gc(a,b,c){return(a=z.getPooled(Fc.change,a,b,c)).type="change",Ib(c),Ra(a),a}var Jc=null,Kc=null;function Lc(a){Ea(a)}function Mc(a){if(Wb(Ka(a)))return a}function Nc(a,b){if("change"===a)return b}var Oc=!1;function Pc(){Jc&&(Jc.detachEvent("onpropertychange",Qc),Kc=Jc=null)}function Qc(a){"value"===a.propertyName&&Mc(Kc)&&Ob(Lc,a=Gc(Kc,a,Rb(a)))}function Rc(a,b,c){"focus"===a?(Pc(),Kc=c,(Jc=b).attachEvent("onpropertychange",Qc)):"blur"===a&&Pc()}function Sc(a){if("selectionchange"===a||"keyup"===a||"keydown"===a)return Mc(Kc)}function Tc(a,b){if("click"===a)return Mc(b)}function Uc(a,b){if("input"===a||"change"===a)return Mc(b)}Sa&&(Oc=Sb("input")&&(!document.documentMode||9<document.documentMode));var Vc={eventTypes:Fc,_isInputEventSupported:Oc,extractEvents:function(a,b,c,d){var e=b?Ka(b):window,f=void 0,g=void 0,h=e.nodeName&&e.nodeName.toLowerCase();if("select"===h||"input"===h&&"file"===e.type?f=Nc:Qb(e)?Oc?f=Uc:(f=Sc,g=Rc):(h=e.nodeName)&&"input"===h.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)&&(f=Tc),f&&(f=f(a,b)))return Gc(f,c,d);g&&g(a,e,b),"blur"===a&&(a=e._wrapperState)&&a.controlled&&"number"===e.type&&Dc(e,"number",e.value)}},Wc=z.extend({view:null,detail:null}),Xc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yc(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):!!(a=Xc[a])&&!!b[a]}function Zc(){return Yc}var $c=0,ad=0,bd=!1,cd=!1,dd=Wc.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Zc,button:null,buttons:null,relatedTarget:function(a){return a.relatedTarget||(a.fromElement===a.srcElement?a.toElement:a.fromElement)},movementX:function(a){if("movementX"in a)return a.movementX;var b=$c;return $c=a.screenX,bd?"mousemove"===a.type?a.screenX-b:0:(bd=!0,0)},movementY:function(a){if("movementY"in a)return a.movementY;var b=ad;return ad=a.screenY,cd?"mousemove"===a.type?a.screenY-b:0:(cd=!0,0)}}),ed=dd.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),fd={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},gd={eventTypes:fd,extractEvents:function(a,b,c,d){var e="mouseover"===a||"pointerover"===a,f="mouseout"===a||"pointerout"===a;if(e&&(c.relatedTarget||c.fromElement)||!f&&!e)return null;if(e=d.window===d?d:(e=d.ownerDocument)?e.defaultView||e.parentWindow:window,f?(f=b,b=(b=c.relatedTarget||c.toElement)?Ia(b):null):f=null,f===b)return null;var g=void 0,h=void 0,k=void 0,l=void 0;"mouseout"===a||"mouseover"===a?(g=dd,h=fd.mouseLeave,k=fd.mouseEnter,l="mouse"):"pointerout"!==a&&"pointerover"!==a||(g=ed,h=fd.pointerLeave,k=fd.pointerEnter,l="pointer");var m=null==f?e:Ka(f);if(e=null==b?e:Ka(b),(a=g.getPooled(h,f,c,d)).type=l+"leave",a.target=m,a.relatedTarget=e,(c=g.getPooled(k,b,c,d)).type=l+"enter",c.target=e,c.relatedTarget=m,d=b,f&&d)a:{for(e=d,l=0,g=b=f;g;g=Ma(g))l++;for(g=0,k=e;k;k=Ma(k))g++;for(;0<l-g;)b=Ma(b),l--;for(;0<g-l;)e=Ma(e),g--;for(;l--;){if(b===e||b===e.alternate)break a;b=Ma(b),e=Ma(e)}b=null}else b=null;for(e=b,b=[];f&&f!==e&&(null===(l=f.alternate)||l!==e);)b.push(f),f=Ma(f);for(f=[];d&&d!==e&&(null===(l=d.alternate)||l!==e);)f.push(d),d=Ma(d);for(d=0;d<b.length;d++)Pa(b[d],"bubbled",a);for(d=f.length;0<d--;)Pa(f[d],"captured",c);return[a,c]}},hd=Object.prototype.hasOwnProperty;function id(a,b){return a===b?0!==a||0!==b||1/a==1/b:a!=a&&b!=b}function jd(a,b){if(id(a,b))return!0;if("object"!=typeof a||null===a||"object"!=typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!hd.call(b,c[d])||!id(a[c[d]],b[c[d]]))return!1;return!0}function kd(a){var b=a;if(a.alternate)for(;b.return;)b=b.return;else{if(0!=(2&b.effectTag))return 1;for(;b.return;)if(0!=(2&(b=b.return).effectTag))return 1}return 3===b.tag?2:3}function ld(a){2!==kd(a)&&t("188")}function nd(a){if(!(a=function(a){var b=a.alternate;if(!b)return 3===(b=kd(a))&&t("188"),1===b?null:a;for(var c=a,d=b;;){var e=c.return,f=e?e.alternate:null;if(!e||!f)break;if(e.child===f.child){for(var g=e.child;g;){if(g===c)return ld(e),a;if(g===d)return ld(e),b;g=g.sibling}t("188")}if(c.return!==d.return)c=e,d=f;else{g=!1;for(var h=e.child;h;){if(h===c){g=!0,c=e,d=f;break}if(h===d){g=!0,d=e,c=f;break}h=h.sibling}if(!g){for(h=f.child;h;){if(h===c){g=!0,c=f,d=e;break}if(h===d){g=!0,d=f,c=e;break}h=h.sibling}g||t("189")}}c.alternate!==d&&t("190")}return 3!==c.tag&&t("188"),c.stateNode.current===c?a:b}(a)))return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return,b=b.sibling}}return null}var od=z.extend({animationName:null,elapsedTime:null,pseudoElement:null}),pd=z.extend({clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),qd=Wc.extend({relatedTarget:null});function rd(a){var b=a.keyCode;return"charCode"in a?0===(a=a.charCode)&&13===b&&(a=13):a=b,10===a&&(a=13),32<=a||13===a?a:0}var sd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},td={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ud=Wc.extend({key:function(a){if(a.key){var b=sd[a.key]||a.key;if("Unidentified"!==b)return b}return"keypress"===a.type?13===(a=rd(a))?"Enter":String.fromCharCode(a):"keydown"===a.type||"keyup"===a.type?td[a.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Zc,charCode:function(a){return"keypress"===a.type?rd(a):0},keyCode:function(a){return"keydown"===a.type||"keyup"===a.type?a.keyCode:0},which:function(a){return"keypress"===a.type?rd(a):"keydown"===a.type||"keyup"===a.type?a.keyCode:0}}),vd=dd.extend({dataTransfer:null}),wd=Wc.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Zc}),xd=z.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),yd=dd.extend({deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:null,deltaMode:null}),zd=[["abort","abort"],[Ya,"animationEnd"],[Za,"animationIteration"],[$a,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[ab,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],Ad={},Bd={};function Cd(a,b){var c=a[0],d="on"+((a=a[1])[0].toUpperCase()+a.slice(1));b={phasedRegistrationNames:{bubbled:d,captured:d+"Capture"},dependencies:[c],isInteractive:b},Ad[a]=b,Bd[c]=b}[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(a){Cd(a,!0)}),zd.forEach(function(a){Cd(a,!1)});var Dd={eventTypes:Ad,isInteractiveTopLevelEventType:function(a){return void 0!==(a=Bd[a])&&!0===a.isInteractive},extractEvents:function(a,b,c,d){var e=Bd[a];if(!e)return null;switch(a){case"keypress":if(0===rd(c))return null;case"keydown":case"keyup":a=ud;break;case"blur":case"focus":a=qd;break;case"click":if(2===c.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":a=dd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":a=vd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":a=wd;break;case Ya:case Za:case $a:a=od;break;case ab:a=xd;break;case"scroll":a=Wc;break;case"wheel":a=yd;break;case"copy":case"cut":case"paste":a=pd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":a=ed;break;default:a=z}return Ra(b=a.getPooled(e,b,c,d)),b}},Ed=Dd.isInteractiveTopLevelEventType,Fd=[];function Gd(a){var b=a.targetInst,c=b;do{if(!c){a.ancestors.push(c);break}var d;for(d=c;d.return;)d=d.return;if(!(d=3!==d.tag?null:d.stateNode.containerInfo))break;a.ancestors.push(c),c=Ia(d)}while(c);for(c=0;c<a.ancestors.length;c++){b=a.ancestors[c];var e=Rb(a.nativeEvent);d=a.topLevelType;for(var f=a.nativeEvent,g=null,h=0;h<pa.length;h++){var k=pa[h];k&&(k=k.extractEvents(d,b,f,e))&&(g=ya(g,k))}Ea(g)}}var Hd=!0;function H(a,b){if(!b)return null;var c=(Ed(a)?Id:Jd).bind(null,a);b.addEventListener(a,c,!1)}function Kd(a,b){if(!b)return null;var c=(Ed(a)?Id:Jd).bind(null,a);b.addEventListener(a,c,!0)}function Id(a,b){Lb(Jd,a,b)}function Jd(a,b){if(Hd){var c=Rb(b);if(null===(c=Ia(c))||"number"!=typeof c.tag||2===kd(c)||(c=null),Fd.length){var d=Fd.pop();d.topLevelType=a,d.nativeEvent=b,d.targetInst=c,a=d}else a={topLevelType:a,nativeEvent:b,targetInst:c,ancestors:[]};try{Ob(Gd,a)}finally{a.topLevelType=null,a.nativeEvent=null,a.targetInst=null,a.ancestors.length=0,10>Fd.length&&Fd.push(a)}}}var Ld={},Md=0,Nd="_reactListenersID"+(""+Math.random()).slice(2);function Od(a){return Object.prototype.hasOwnProperty.call(a,Nd)||(a[Nd]=Md++,Ld[a[Nd]]={}),Ld[a[Nd]]}function Pd(a){if(void 0===(a=a||("undefined"!=typeof document?document:void 0)))return null;try{return a.activeElement||a.body}catch(b){return a.body}}function Qd(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Rd(a,b){var d,c=Qd(a);for(a=0;c;){if(3===c.nodeType){if(d=a+c.textContent.length,a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=Qd(c)}}function Td(){for(var a=window,b=Pd();b instanceof a.HTMLIFrameElement;){try{a=b.contentDocument.defaultView}catch(c){break}b=Pd(a.document)}return b}function Ud(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&("input"===b&&("text"===a.type||"search"===a.type||"tel"===a.type||"url"===a.type||"password"===a.type)||"textarea"===b||"true"===a.contentEditable)}var Vd=Sa&&"documentMode"in document&&11>=document.documentMode,Wd={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Xd=null,Yd=null,Zd=null,$d=!1;function ae(a,b){var c=b.window===b?b.document:9===b.nodeType?b:b.ownerDocument;return $d||null==Xd||Xd!==Pd(c)?null:("selectionStart"in(c=Xd)&&Ud(c)?c={start:c.selectionStart,end:c.selectionEnd}:c={anchorNode:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset},Zd&&jd(Zd,c)?null:(Zd=c,(a=z.getPooled(Wd.select,Yd,a,b)).type="select",a.target=Xd,Ra(a),a))}var be={eventTypes:Wd,extractEvents:function(a,b,c,d){var f,e=d.window===d?d.document:9===d.nodeType?d:d.ownerDocument;if(!(f=!e)){a:{e=Od(e),f=ta.onSelect;for(var g=0;g<f.length;g++){var h=f[g];if(!e.hasOwnProperty(h)||!e[h]){e=!1;break a}}e=!0}f=!e}if(f)return null;switch(e=b?Ka(b):window,a){case"focus":(Qb(e)||"true"===e.contentEditable)&&(Xd=e,Yd=b,Zd=null);break;case"blur":Zd=Yd=Xd=null;break;case"mousedown":$d=!0;break;case"contextmenu":case"mouseup":case"dragend":return $d=!1,ae(c,d);case"selectionchange":if(Vd)break;case"keydown":case"keyup":return ae(c,d)}return null}};function ee(a,b){return a=n({children:void 0},b),(b=function(a){var b="";return aa.Children.forEach(a,function(a){null!=a&&(b+=a)}),b}(b.children))&&(a.children=b),a}function fe(a,b,c,d){if(a=a.options,b){b={};for(var e=0;e<c.length;e++)b["$"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty("$"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{for(c=""+yc(c),b=null,e=0;e<a.length;e++){if(a[e].value===c)return a[e].selected=!0,void(d&&(a[e].defaultSelected=!0));null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}function ge(a,b){return null!=b.dangerouslySetInnerHTML&&t("91"),n({},b,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function he(a,b){var c=b.value;null==c&&(c=b.defaultValue,null!=(b=b.children)&&(null!=c&&t("92"),Array.isArray(b)&&(1>=b.length||t("93"),b=b[0]),c=b),null==c&&(c="")),a._wrapperState={initialValue:yc(c)}}function ie(a,b){var c=yc(b.value),d=yc(b.defaultValue);null!=c&&((c=""+c)!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c)),null!=d&&(a.defaultValue=""+d)}function je(a){var b=a.textContent;b===a._wrapperState.initialValue&&(a.value=b)}Ca.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),ua=La,va=Ja,wa=Ka,Ca.injectEventPluginsByName({SimpleEventPlugin:Dd,EnterLeaveEventPlugin:gd,ChangeEventPlugin:Vc,SelectEventPlugin:be,BeforeInputEventPlugin:Bb});var ke={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function le(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function me(a,b){return null==a||"http://www.w3.org/1999/xhtml"===a?le(b):"http://www.w3.org/2000/svg"===a&&"foreignObject"===b?"http://www.w3.org/1999/xhtml":a}var a,ne=void 0,oe=(a=function(a,b){if(a.namespaceURI!==ke.svg||"innerHTML"in a)a.innerHTML=b;else{for((ne=ne||document.createElement("div")).innerHTML="<svg>"+b+"</svg>",b=ne.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c)})}:a);function pe(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType)return void(c.nodeValue=b)}a.textContent=b}var qe={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},re=["Webkit","ms","Moz","O"];function se(a,b,c){return null==b||"boolean"==typeof b||""===b?"":c||"number"!=typeof b||0===b||qe.hasOwnProperty(a)&&qe[a]?(""+b).trim():b+"px"}function te(a,b){for(var c in a=a.style,b)if(b.hasOwnProperty(c)){var d=0===c.indexOf("--"),e=se(c,b[c],d);"float"===c&&(c="cssFloat"),d?a.setProperty(c,e):a[c]=e}}Object.keys(qe).forEach(function(a){re.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1),qe[b]=qe[a]})});var ue=n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(a,b){b&&(ue[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML)&&t("137",a,""),null!=b.dangerouslySetInnerHTML&&(null!=b.children&&t("60"),"object"==typeof b.dangerouslySetInnerHTML&&"__html"in b.dangerouslySetInnerHTML||t("61")),null!=b.style&&"object"!=typeof b.style&&t("62",""))}function we(a,b){if(-1===a.indexOf("-"))return"string"==typeof b.is;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function xe(a,b){var c=Od(a=9===a.nodeType||11===a.nodeType?a:a.ownerDocument);b=ta[b];for(var d=0;d<b.length;d++){var e=b[d];if(!c.hasOwnProperty(e)||!c[e]){switch(e){case"scroll":Kd("scroll",a);break;case"focus":case"blur":Kd("focus",a),Kd("blur",a),c.blur=!0,c.focus=!0;break;case"cancel":case"close":Sb(e)&&Kd(e,a);break;case"invalid":case"submit":case"reset":break;default:-1===bb.indexOf(e)&&H(e,a)}c[e]=!0}}}function ye(){}var ze=null,Ae=null;function Be(a,b){switch(a){case"button":case"input":case"select":case"textarea":return!!b.autoFocus}return!1}function Ce(a,b){return"textarea"===a||"option"===a||"noscript"===a||"string"==typeof b.children||"number"==typeof b.children||"object"==typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}var De="function"==typeof setTimeout?setTimeout:void 0,Ee="function"==typeof clearTimeout?clearTimeout:void 0;function Ge(a){for(a=a.nextSibling;a&&1!==a.nodeType&&3!==a.nodeType;)a=a.nextSibling;return a}function He(a){for(a=a.firstChild;a&&1!==a.nodeType&&3!==a.nodeType;)a=a.nextSibling;return a}new Set;var Ie=[],Je=-1;function I(a){0>Je||(a.current=Ie[Je],Ie[Je]=null,Je--)}function J(a,b){Ie[++Je]=a.current,a.current=b}var Ke={},K={current:Ke},L={current:!1},Le=Ke;function Me(a,b){var c=a.type.contextTypes;if(!c)return Ke;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var f,e={};for(f in c)e[f]=b[f];return d&&((a=a.stateNode).__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e),e}function M(a){return null!=(a=a.childContextTypes)}function Ne(a){I(L),I(K)}function Oe(a){I(L),I(K)}function Pe(a,b,c){K.current!==Ke&&t("168"),J(K,b),J(L,c)}function Qe(a,b,c){var d=a.stateNode;if(a=b.childContextTypes,"function"!=typeof d.getChildContext)return c;for(var e in d=d.getChildContext())e in a||t("108",mc(b)||"Unknown",e);return n({},c,d)}function Re(a){var b=a.stateNode;return b=b&&b.__reactInternalMemoizedMergedChildContext||Ke,Le=K.current,J(K,b),J(L,L.current),!0}function Se(a,b,c){var d=a.stateNode;d||t("169"),c?(b=Qe(a,b,Le),d.__reactInternalMemoizedMergedChildContext=b,I(L),I(K),J(K,b)):I(L),J(L,c)}var Te=null,Ue=null;function Ve(a){return function(b){try{return a(b)}catch(c){}}}function Xe(a,b,c,d){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=b,this.firstContextDependency=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function N(a,b,c,d){return new Xe(a,b,c,d)}function Ye(a){return!(!(a=a.prototype)||!a.isReactComponent)}function $e(a,b){var c=a.alternate;return null===c?((c=N(a.tag,b,a.key,a.mode)).elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.effectTag=0,c.nextEffect=null,c.firstEffect=null,c.lastEffect=null),c.childExpirationTime=a.childExpirationTime,c.expirationTime=a.expirationTime,c.child=a.child,c.memoizedProps=a.memoizedProps,c.memoizedState=a.memoizedState,c.updateQueue=a.updateQueue,c.firstContextDependency=a.firstContextDependency,c.sibling=a.sibling,c.index=a.index,c.ref=a.ref,c}function af(a,b,c,d,e,f){var g=2;if(d=a,"function"==typeof a)Ye(a)&&(g=1);else if("string"==typeof a)g=5;else a:switch(a){case ac:return bf(c.children,e,f,b);case fc:return cf(c,3|e,f,b);case bc:return cf(c,2|e,f,b);case cc:return(a=N(12,c,b,4|e)).elementType=cc,a.type=cc,a.expirationTime=f,a;case hc:return(a=N(13,c,b,e)).elementType=hc,a.type=hc,a.expirationTime=f,a;default:if("object"==typeof a&&null!==a)switch(a.$$typeof){case dc:g=10;break a;case ec:g=9;break a;case gc:g=11;break a;case ic:g=14;break a;case jc:g=16,d=null;break a}t("130",null==a?a:typeof a,"")}return(b=N(g,c,b,e)).elementType=a,b.type=d,b.expirationTime=f,b}function bf(a,b,c,d){return(a=N(7,a,d,b)).expirationTime=c,a}function cf(a,b,c,d){return a=N(8,a,d,b),b=0==(1&b)?bc:fc,a.elementType=b,a.type=b,a.expirationTime=c,a}function df(a,b,c){return(a=N(6,a,null,b)).expirationTime=c,a}function ef(a,b,c){return(b=N(4,null!==a.children?a.children:[],a.key,b)).expirationTime=c,b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},b}function ff(a,b){a.didError=!1;var c=a.earliestPendingTime;0===c?a.earliestPendingTime=a.latestPendingTime=b:c<b?a.earliestPendingTime=b:a.latestPendingTime>b&&(a.latestPendingTime=b),gf(b,a)}function hf(a,b){a.didError=!1,a.latestPingedTime>=b&&(a.latestPingedTime=0);var c=a.earliestPendingTime,d=a.latestPendingTime;c===b?a.earliestPendingTime=d===b?a.latestPendingTime=0:d:d===b&&(a.latestPendingTime=c),c=a.earliestSuspendedTime,d=a.latestSuspendedTime,0===c?a.earliestSuspendedTime=a.latestSuspendedTime=b:c<b?a.earliestSuspendedTime=b:d>b&&(a.latestSuspendedTime=b),gf(b,a)}function jf(a,b){var c=a.earliestPendingTime;return c>b&&(b=c),(a=a.earliestSuspendedTime)>b&&(b=a),b}function gf(a,b){var c=b.earliestSuspendedTime,d=b.latestSuspendedTime,e=b.earliestPendingTime,f=b.latestPingedTime;0===(e=0!==e?e:f)&&(0===a||d<a)&&(e=d),0!==(a=e)&&c>a&&(a=c),b.nextExpirationTimeToWorkOn=e,b.expirationTime=a}var kf=!1;function lf(a){return{baseState:a,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function mf(a){return{baseState:a.baseState,firstUpdate:a.firstUpdate,lastUpdate:a.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function nf(a){return{expirationTime:a,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function of(a,b){null===a.lastUpdate?a.firstUpdate=a.lastUpdate=b:(a.lastUpdate.next=b,a.lastUpdate=b)}function pf(a,b){var c=a.alternate;if(null===c){var d=a.updateQueue,e=null;null===d&&(d=a.updateQueue=lf(a.memoizedState))}else d=a.updateQueue,e=c.updateQueue,null===d?null===e?(d=a.updateQueue=lf(a.memoizedState),e=c.updateQueue=lf(c.memoizedState)):d=a.updateQueue=mf(e):null===e&&(e=c.updateQueue=mf(d));null===e||d===e?of(d,b):null===d.lastUpdate||null===e.lastUpdate?(of(d,b),of(e,b)):(of(d,b),e.lastUpdate=b)}function qf(a,b){var c=a.updateQueue;null===(c=null===c?a.updateQueue=lf(a.memoizedState):rf(a,c)).lastCapturedUpdate?c.firstCapturedUpdate=c.lastCapturedUpdate=b:(c.lastCapturedUpdate.next=b,c.lastCapturedUpdate=b)}function rf(a,b){var c=a.alternate;return null!==c&&b===c.updateQueue&&(b=a.updateQueue=mf(b)),b}function sf(a,b,c,d,e,f){switch(c.tag){case 1:return"function"==typeof(a=c.payload)?a.call(f,d,e):a;case 3:a.effectTag=-2049&a.effectTag|64;case 0:if(null==(e="function"==typeof(a=c.payload)?a.call(f,d,e):a))break;return n({},d,e);case 2:kf=!0}return d}function tf(a,b,c,d,e){kf=!1;for(var f=(b=rf(a,b)).baseState,g=null,h=0,k=b.firstUpdate,l=f;null!==k;){var m=k.expirationTime;m<e?(null===g&&(g=k,f=l),h<m&&(h=m)):(l=sf(a,0,k,l,c,d),null!==k.callback&&(a.effectTag|=32,k.nextEffect=null,null===b.lastEffect?b.firstEffect=b.lastEffect=k:(b.lastEffect.nextEffect=k,b.lastEffect=k))),k=k.next}for(m=null,k=b.firstCapturedUpdate;null!==k;){var r=k.expirationTime;r<e?(null===m&&(m=k,null===g&&(f=l)),h<r&&(h=r)):(l=sf(a,0,k,l,c,d),null!==k.callback&&(a.effectTag|=32,k.nextEffect=null,null===b.lastCapturedEffect?b.firstCapturedEffect=b.lastCapturedEffect=k:(b.lastCapturedEffect.nextEffect=k,b.lastCapturedEffect=k))),k=k.next}null===g&&(b.lastUpdate=null),null===m?b.lastCapturedUpdate=null:a.effectTag|=32,null===g&&null===m&&(f=l),b.baseState=f,b.firstUpdate=g,b.firstCapturedUpdate=m,a.expirationTime=h,a.memoizedState=l}function uf(a,b,c){null!==b.firstCapturedUpdate&&(null!==b.lastUpdate&&(b.lastUpdate.next=b.firstCapturedUpdate,b.lastUpdate=b.lastCapturedUpdate),b.firstCapturedUpdate=b.lastCapturedUpdate=null),vf(b.firstEffect,c),b.firstEffect=b.lastEffect=null,vf(b.firstCapturedEffect,c),b.firstCapturedEffect=b.lastCapturedEffect=null}function vf(a,b){for(;null!==a;){var c=a.callback;if(null!==c){a.callback=null;var d=b;"function"!=typeof c&&t("191",c),c.call(d)}a=a.nextEffect}}function wf(a,b){return{value:a,source:b,stack:nc(b)}}var xf={current:null},yf=null,zf=null,Af=null;function Bf(a,b){var c=a.type._context;J(xf,c._currentValue),c._currentValue=b}function Cf(a){var b=xf.current;I(xf),a.type._context._currentValue=b}function Df(a){yf=a,Af=zf=null,a.firstContextDependency=null}function Ef(a,b){return Af!==a&&!1!==b&&0!==b&&("number"==typeof b&&1073741823!==b||(Af=a,b=1073741823),b={context:a,observedBits:b,next:null},null===zf?(null===yf&&t("293"),yf.firstContextDependency=zf=b):zf=zf.next=b),a._currentValue}var Ff={},O={current:Ff},Gf={current:Ff},Hf={current:Ff};function If(a){return a===Ff&&t("174"),a}function Jf(a,b){J(Hf,b),J(Gf,a),J(O,Ff);var c=b.nodeType;switch(c){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:me(null,"");break;default:b=me(b=(c=8===c?b.parentNode:b).namespaceURI||null,c=c.tagName)}I(O),J(O,b)}function Kf(a){I(O),I(Gf),I(Hf)}function Lf(a){If(Hf.current);var b=If(O.current),c=me(b,a.type);b!==c&&(J(Gf,a),J(O,c))}function Mf(a){Gf.current===a&&(I(O),I(Gf))}function P(a,b){if(a&&a.defaultProps)for(var c in b=n({},b),a=a.defaultProps)void 0===b[c]&&(b[c]=a[c]);return b}var Of=Xb.ReactCurrentOwner,Pf=(new aa.Component).refs;function Qf(a,b,c,d){c=null==(c=c(d,b=a.memoizedState))?b:n({},b,c),a.memoizedState=c,null!==(d=a.updateQueue)&&0===a.expirationTime&&(d.baseState=c)}var Vf={isMounted:function(a){return!!(a=a._reactInternalFiber)&&2===kd(a)},enqueueSetState:function(a,b,c){a=a._reactInternalFiber;var d=Rf(),e=nf(d=Sf(d,a));e.payload=b,null!=c&&(e.callback=c),Tf(),pf(a,e),Uf(a,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternalFiber;var d=Rf(),e=nf(d=Sf(d,a));e.tag=1,e.payload=b,null!=c&&(e.callback=c),Tf(),pf(a,e),Uf(a,d)},enqueueForceUpdate:function(a,b){a=a._reactInternalFiber;var c=Rf(),d=nf(c=Sf(c,a));d.tag=2,null!=b&&(d.callback=b),Tf(),pf(a,d),Uf(a,c)}};function Wf(a,b,c,d,e,f,g){return"function"==typeof(a=a.stateNode).shouldComponentUpdate?a.shouldComponentUpdate(d,f,g):!b.prototype||!b.prototype.isPureReactComponent||(!jd(c,d)||!jd(e,f))}function Xf(a,b,c){var d=!1,e=Ke,f=b.contextType;return"object"==typeof f&&null!==f?f=Of.currentDispatcher.readContext(f):(e=M(b)?Le:K.current,f=(d=null!=(d=b.contextTypes))?Me(a,e):Ke),b=new b(c,f),a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null,b.updater=Vf,a.stateNode=b,b._reactInternalFiber=a,d&&((a=a.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f),b}function Zf(a,b,c,d){a=b.state,"function"==typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d),"function"==typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d),b.state!==a&&Vf.enqueueReplaceState(b,b.state,null)}function $f(a,b,c,d){var e=a.stateNode;e.props=c,e.state=a.memoizedState,e.refs=Pf;var f=b.contextType;"object"==typeof f&&null!==f?e.context=Of.currentDispatcher.readContext(f):(f=M(b)?Le:K.current,e.context=Me(a,f)),null!==(f=a.updateQueue)&&(tf(a,f,c,e,d),e.state=a.memoizedState),"function"==typeof(f=b.getDerivedStateFromProps)&&(Qf(a,b,f,c),e.state=a.memoizedState),"function"==typeof b.getDerivedStateFromProps||"function"==typeof e.getSnapshotBeforeUpdate||"function"!=typeof e.UNSAFE_componentWillMount&&"function"!=typeof e.componentWillMount||(b=e.state,"function"==typeof e.componentWillMount&&e.componentWillMount(),"function"==typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Vf.enqueueReplaceState(e,e.state,null),null!==(f=a.updateQueue)&&(tf(a,f,c,e,d),e.state=a.memoizedState)),"function"==typeof e.componentDidMount&&(a.effectTag|=4)}var ag=Array.isArray;function bg(a,b,c){if(null!==(a=c.ref)&&"function"!=typeof a&&"object"!=typeof a){if(c._owner){c=c._owner;var d=void 0;c&&(1!==c.tag&&t("289"),d=c.stateNode),d||t("147",a);var e=""+a;return null!==b&&null!==b.ref&&"function"==typeof b.ref&&b.ref._stringRef===e?b.ref:((b=function(a){var b=d.refs;b===Pf&&(b=d.refs={}),null===a?delete b[e]:b[e]=a})._stringRef=e,b)}"string"!=typeof a&&t("284"),c._owner||t("290",a)}return a}function cg(a,b){"textarea"!==a.type&&t("31","[object Object]"===Object.prototype.toString.call(b)?"object with keys {"+Object.keys(b).join(", ")+"}":b,"")}function dg(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c,c.nextEffect=null,c.effectTag=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b,c){return(a=$e(a,b)).index=0,a.sibling=null,a}function f(b,c,d){return b.index=d,a?null!==(d=b.alternate)?(d=d.index)<c?(b.effectTag=2,c):d:(b.effectTag=2,c):c}function g(b){return a&&null===b.alternate&&(b.effectTag=2),b}function h(a,b,c,d){return null===b||6!==b.tag?((b=df(c,a.mode,d)).return=a,b):((b=e(b,c)).return=a,b)}function k(a,b,c,d){return null!==b&&b.elementType===c.type?((d=e(b,c.props)).ref=bg(a,b,c),d.return=a,d):((d=af(c.type,c.key,c.props,null,a.mode,d)).ref=bg(a,b,c),d.return=a,d)}function l(a,b,c,d){return null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation?((b=ef(c,a.mode,d)).return=a,b):((b=e(b,c.children||[])).return=a,b)}function m(a,b,c,d,g){return null===b||7!==b.tag?((b=bf(c,a.mode,d,g)).return=a,b):((b=e(b,c)).return=a,b)}function r(a,b,c){if("string"==typeof b||"number"==typeof b)return(b=df(""+b,a.mode,c)).return=a,b;if("object"==typeof b&&null!==b){switch(b.$$typeof){case Zb:return(c=af(b.type,b.key,b.props,null,a.mode,c)).ref=bg(a,null,b),c.return=a,c;case $b:return(b=ef(b,a.mode,c)).return=a,b}if(ag(b)||lc(b))return(b=bf(b,a.mode,c,null)).return=a,b;cg(a,b)}return null}function w(a,b,c,d){var e=null!==b?b.key:null;if("string"==typeof c||"number"==typeof c)return null!==e?null:h(a,b,""+c,d);if("object"==typeof c&&null!==c){switch(c.$$typeof){case Zb:return c.key===e?c.type===ac?m(a,b,c.props.children,d,e):k(a,b,c,d):null;case $b:return c.key===e?l(a,b,c,d):null}if(ag(c)||lc(c))return null!==e?null:m(a,b,c,d,null);cg(a,c)}return null}function y(a,b,c,d,e){if("string"==typeof d||"number"==typeof d)return h(b,a=a.get(c)||null,""+d,e);if("object"==typeof d&&null!==d){switch(d.$$typeof){case Zb:return a=a.get(null===d.key?c:d.key)||null,d.type===ac?m(b,a,d.props.children,e,d.key):k(b,a,d,e);case $b:return l(b,a=a.get(null===d.key?c:d.key)||null,d,e)}if(ag(d)||lc(d))return m(b,a=a.get(c)||null,d,e,null);cg(b,d)}return null}function B(e,g,h,k){for(var l=null,q=null,m=g,u=g=0,p=null;null!==m&&u<h.length;u++){m.index>u?(p=m,m=null):p=m.sibling;var v=w(e,m,h[u],k);if(null===v){null===m&&(m=p);break}a&&m&&null===v.alternate&&b(e,m),g=f(v,g,u),null===q?l=v:q.sibling=v,q=v,m=p}if(u===h.length)return c(e,m),l;if(null===m){for(;u<h.length;u++)(m=r(e,h[u],k))&&(g=f(m,g,u),null===q?l=m:q.sibling=m,q=m);return l}for(m=d(e,m);u<h.length;u++)(p=y(m,e,u,h[u],k))&&(a&&null!==p.alternate&&m.delete(null===p.key?u:p.key),g=f(p,g,u),null===q?l=p:q.sibling=p,q=p);return a&&m.forEach(function(a){return b(e,a)}),l}function R(e,g,h,k){var l=lc(h);"function"!=typeof l&&t("150"),null==(h=l.call(h))&&t("151");for(var m=l=null,q=g,u=g=0,p=null,v=h.next();null!==q&&!v.done;u++,v=h.next()){q.index>u?(p=q,q=null):p=q.sibling;var A=w(e,q,v.value,k);if(null===A){q||(q=p);break}a&&q&&null===A.alternate&&b(e,q),g=f(A,g,u),null===m?l=A:m.sibling=A,m=A,q=p}if(v.done)return c(e,q),l;if(null===q){for(;!v.done;u++,v=h.next())null!==(v=r(e,v.value,k))&&(g=f(v,g,u),null===m?l=v:m.sibling=v,m=v);return l}for(q=d(e,q);!v.done;u++,v=h.next())null!==(v=y(q,e,u,v.value,k))&&(a&&null!==v.alternate&&q.delete(null===v.key?u:v.key),g=f(v,g,u),null===m?l=v:m.sibling=v,m=v);return a&&q.forEach(function(a){return b(e,a)}),l}return function(a,d,f,h){var k="object"==typeof f&&null!==f&&f.type===ac&&null===f.key;k&&(f=f.props.children);var l="object"==typeof f&&null!==f;if(l)switch(f.$$typeof){case Zb:a:{for(l=f.key,k=d;null!==k;){if(k.key===l){if(7===k.tag?f.type===ac:k.elementType===f.type){c(a,k.sibling),(d=e(k,f.type===ac?f.props.children:f.props)).ref=bg(a,k,f),d.return=a,a=d;break a}c(a,k);break}b(a,k),k=k.sibling}f.type===ac?((d=bf(f.props.children,a.mode,h,f.key)).return=a,a=d):((h=af(f.type,f.key,f.props,null,a.mode,h)).ref=bg(a,d,f),h.return=a,a=h)}return g(a);case $b:a:{for(k=f.key;null!==d;){if(d.key===k){if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling),(d=e(d,f.children||[])).return=a,a=d;break a}c(a,d);break}b(a,d),d=d.sibling}(d=ef(f,a.mode,h)).return=a,a=d}return g(a)}if("string"==typeof f||"number"==typeof f)return f=""+f,null!==d&&6===d.tag?(c(a,d.sibling),(d=e(d,f)).return=a,a=d):(c(a,d),(d=df(f,a.mode,h)).return=a,a=d),g(a);if(ag(f))return B(a,d,f,h);if(lc(f))return R(a,d,f,h);if(l&&cg(a,f),void 0===f&&!k)switch(a.tag){case 1:case 0:t("152",(h=a.type).displayName||h.name||"Component")}return c(a,d)}}var eg=dg(!0),fg=dg(!1),gg=null,hg=null,ig=!1;function jg(a,b){var c=N(5,null,null,0);c.elementType="DELETED",c.type="DELETED",c.stateNode=b,c.return=a,c.effectTag=8,null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}function kg(a,b){switch(a.tag){case 5:var c=a.type;return null!==(b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b)&&(a.stateNode=b,!0);case 6:return null!==(b=""===a.pendingProps||3!==b.nodeType?null:b)&&(a.stateNode=b,!0);default:return!1}}function lg(a){if(ig){var b=hg;if(b){var c=b;if(!kg(a,b)){if(!(b=Ge(c))||!kg(a,b))return a.effectTag|=2,ig=!1,void(gg=a);jg(gg,c)}gg=a,hg=He(b)}else a.effectTag|=2,ig=!1,gg=a}}function mg(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag;)a=a.return;gg=a}function ng(a){if(a!==gg)return!1;if(!ig)return mg(a),ig=!0,!1;var b=a.type;if(5!==a.tag||"head"!==b&&"body"!==b&&!Ce(b,a.memoizedProps))for(b=hg;b;)jg(a,b),b=Ge(b);return mg(a),hg=gg?Ge(a.stateNode):null,!0}function og(){hg=gg=null,ig=!1}var pg=Xb.ReactCurrentOwner;function Q(a,b,c,d){b.child=null===a?fg(b,null,c,d):eg(b,a.child,c,d)}function qg(a,b,c,d,e){c=c.render;var f=b.ref;return Df(b),d=c(d,f),b.effectTag|=1,Q(a,b,d,e),b.child}function rg(a,b,c,d,e,f){if(null===a){var g=c.type;return"function"!=typeof g||Ye(g)||void 0!==g.defaultProps||null!==c.compare||void 0!==c.defaultProps?((a=af(c.type,null,d,null,b.mode,f)).ref=b.ref,a.return=b,b.child=a):(b.tag=15,b.type=g,sg(a,b,g,d,e,f))}return g=a.child,e<f&&(e=g.memoizedProps,(c=null!==(c=c.compare)?c:jd)(e,d)&&a.ref===b.ref)?tg(a,b,f):(b.effectTag|=1,(a=$e(g,d)).ref=b.ref,a.return=b,b.child=a)}function sg(a,b,c,d,e,f){return null!==a&&e<f&&jd(a.memoizedProps,d)&&a.ref===b.ref?tg(a,b,f):ug(a,b,c,d,f)}function vg(a,b){var c=b.ref;(null===a&&null!==c||null!==a&&a.ref!==c)&&(b.effectTag|=128)}function ug(a,b,c,d,e){var f=M(c)?Le:K.current;return f=Me(b,f),Df(b),c=c(d,f),b.effectTag|=1,Q(a,b,c,e),b.child}function wg(a,b,c,d,e){if(M(c)){var f=!0;Re(b)}else f=!1;if(Df(b),null===b.stateNode)null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),Xf(b,c,d),$f(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var k=g.context,l=c.contextType;"object"==typeof l&&null!==l?l=Of.currentDispatcher.readContext(l):l=Me(b,l=M(c)?Le:K.current);var m=c.getDerivedStateFromProps,r="function"==typeof m||"function"==typeof g.getSnapshotBeforeUpdate;r||"function"!=typeof g.UNSAFE_componentWillReceiveProps&&"function"!=typeof g.componentWillReceiveProps||(h!==d||k!==l)&&Zf(b,g,d,l),kf=!1;var w=b.memoizedState;k=g.state=w;var y=b.updateQueue;null!==y&&(tf(b,y,d,g,e),k=b.memoizedState),h!==d||w!==k||L.current||kf?("function"==typeof m&&(Qf(b,c,m,d),k=b.memoizedState),(h=kf||Wf(b,c,h,d,w,k,l))?(r||"function"!=typeof g.UNSAFE_componentWillMount&&"function"!=typeof g.componentWillMount||("function"==typeof g.componentWillMount&&g.componentWillMount(),"function"==typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),"function"==typeof g.componentDidMount&&(b.effectTag|=4)):("function"==typeof g.componentDidMount&&(b.effectTag|=4),b.memoizedProps=d,b.memoizedState=k),g.props=d,g.state=k,g.context=l,d=h):("function"==typeof g.componentDidMount&&(b.effectTag|=4),d=!1)}else g=b.stateNode,h=b.memoizedProps,g.props=b.type===b.elementType?h:P(b.type,h),k=g.context,"object"==typeof(l=c.contextType)&&null!==l?l=Of.currentDispatcher.readContext(l):l=Me(b,l=M(c)?Le:K.current),(r="function"==typeof(m=c.getDerivedStateFromProps)||"function"==typeof g.getSnapshotBeforeUpdate)||"function"!=typeof g.UNSAFE_componentWillReceiveProps&&"function"!=typeof g.componentWillReceiveProps||(h!==d||k!==l)&&Zf(b,g,d,l),kf=!1,k=b.memoizedState,w=g.state=k,null!==(y=b.updateQueue)&&(tf(b,y,d,g,e),w=b.memoizedState),h!==d||k!==w||L.current||kf?("function"==typeof m&&(Qf(b,c,m,d),w=b.memoizedState),(m=kf||Wf(b,c,h,d,k,w,l))?(r||"function"!=typeof g.UNSAFE_componentWillUpdate&&"function"!=typeof g.componentWillUpdate||("function"==typeof g.componentWillUpdate&&g.componentWillUpdate(d,w,l),"function"==typeof g.UNSAFE_componentWillUpdate&&g.UNSAFE_componentWillUpdate(d,w,l)),"function"==typeof g.componentDidUpdate&&(b.effectTag|=4),"function"==typeof g.getSnapshotBeforeUpdate&&(b.effectTag|=256)):("function"!=typeof g.componentDidUpdate||h===a.memoizedProps&&k===a.memoizedState||(b.effectTag|=4),"function"!=typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&k===a.memoizedState||(b.effectTag|=256),b.memoizedProps=d,b.memoizedState=w),g.props=d,g.state=w,g.context=l,d=m):("function"!=typeof g.componentDidUpdate||h===a.memoizedProps&&k===a.memoizedState||(b.effectTag|=4),"function"!=typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&k===a.memoizedState||(b.effectTag|=256),d=!1);return xg(a,b,c,d,f,e)}function xg(a,b,c,d,e,f){vg(a,b);var g=0!=(64&b.effectTag);if(!d&&!g)return e&&Se(b,c,!1),tg(a,b,f);d=b.stateNode,pg.current=b;var h=g&&"function"!=typeof c.getDerivedStateFromError?null:d.render();return b.effectTag|=1,null!==a&&g?(b.child=eg(b,a.child,null,f),b.child=eg(b,null,h,f)):Q(a,b,h,f),b.memoizedState=d.state,e&&Se(b,c,!0),b.child}function yg(a){var b=a.stateNode;b.pendingContext?Pe(0,b.pendingContext,b.pendingContext!==b.context):b.context&&Pe(0,b.context,!1),Jf(a,b.containerInfo)}function zg(a,b,c){var d=b.mode,e=b.pendingProps,f=b.memoizedState;if(0==(64&b.effectTag)){f=null;var g=!1}else f={timedOutAt:null!==f?f.timedOutAt:0},g=!0,b.effectTag&=-65;if(null===a)if(g){var h=e.fallback;a=bf(null,d,0,null),0==(1&b.mode)&&(a.child=null!==b.memoizedState?b.child.child:b.child),d=bf(h,d,c,null),a.sibling=d,(c=a).return=d.return=b}else c=d=fg(b,null,e.children,c);else null!==a.memoizedState?(h=(d=a.child).sibling,g?(c=e.fallback,e=$e(d,d.pendingProps),0==(1&b.mode)&&((g=null!==b.memoizedState?b.child.child:b.child)!==d.child&&(e.child=g)),d=e.sibling=$e(h,c,h.expirationTime),c=e,e.childExpirationTime=0,c.return=d.return=b):c=d=eg(b,d.child,e.children,c)):(h=a.child,g?(g=e.fallback,(e=bf(null,d,0,null)).child=h,0==(1&b.mode)&&(e.child=null!==b.memoizedState?b.child.child:b.child),(d=e.sibling=bf(g,d,c,null)).effectTag|=2,c=e,e.childExpirationTime=0,c.return=d.return=b):d=c=eg(b,h,e.children,c)),b.stateNode=a.stateNode;return b.memoizedState=f,b.child=c,d}function tg(a,b,c){if(null!==a&&(b.firstContextDependency=a.firstContextDependency),b.childExpirationTime<c)return null;if(null!==a&&b.child!==a.child&&t("153"),null!==b.child){for(c=$e(a=b.child,a.pendingProps,a.expirationTime),b.child=c,c.return=b;null!==a.sibling;)a=a.sibling,(c=c.sibling=$e(a,a.pendingProps,a.expirationTime)).return=b;c.sibling=null}return b.child}function Ag(a,b,c){var d=b.expirationTime;if(null!==a&&a.memoizedProps===b.pendingProps&&!L.current&&d<c){switch(b.tag){case 3:yg(b),og();break;case 5:Lf(b);break;case 1:M(b.type)&&Re(b);break;case 4:Jf(b,b.stateNode.containerInfo);break;case 10:Bf(b,b.memoizedProps.value);break;case 13:if(null!==b.memoizedState)return 0!==(d=b.child.childExpirationTime)&&d>=c?zg(a,b,c):null!==(b=tg(a,b,c))?b.sibling:null}return tg(a,b,c)}switch(b.expirationTime=0,b.tag){case 2:d=b.elementType,null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),a=b.pendingProps;var e=Me(b,K.current);if(Df(b),e=d(a,e),b.effectTag|=1,"object"==typeof e&&null!==e&&"function"==typeof e.render&&void 0===e.$$typeof){if(b.tag=1,M(d)){var f=!0;Re(b)}else f=!1;b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null;var g=d.getDerivedStateFromProps;"function"==typeof g&&Qf(b,d,g,a),e.updater=Vf,b.stateNode=e,e._reactInternalFiber=b,$f(b,d,a,c),b=xg(null,b,d,!0,f,c)}else b.tag=0,Q(null,b,e,c),b=b.child;return b;case 16:switch(e=b.elementType,null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),f=b.pendingProps,a=function(a){var b=a._result;switch(a._status){case 1:return b;case 2:case 0:throw b;default:throw a._status=0,(b=(b=a._ctor)()).then(function(b){0===a._status&&(b=b.default,a._status=1,a._result=b)},function(b){0===a._status&&(a._status=2,a._result=b)}),a._result=b,b}}(e),b.type=a,e=b.tag=function(a){if("function"==typeof a)return Ye(a)?1:0;if(null!=a){if((a=a.$$typeof)===gc)return 11;if(a===ic)return 14}return 2}(a),f=P(a,f),g=void 0,e){case 0:g=ug(null,b,a,f,c);break;case 1:g=wg(null,b,a,f,c);break;case 11:g=qg(null,b,a,f,c);break;case 14:g=rg(null,b,a,P(a.type,f),d,c);break;default:t("306",a,"")}return g;case 0:return d=b.type,e=b.pendingProps,ug(a,b,d,e=b.elementType===d?e:P(d,e),c);case 1:return d=b.type,e=b.pendingProps,wg(a,b,d,e=b.elementType===d?e:P(d,e),c);case 3:return yg(b),null===(d=b.updateQueue)&&t("282"),e=null!==(e=b.memoizedState)?e.element:null,tf(b,d,b.pendingProps,null,c),(d=b.memoizedState.element)===e?(og(),b=tg(a,b,c)):(e=b.stateNode,(e=(null===a||null===a.child)&&e.hydrate)&&(hg=He(b.stateNode.containerInfo),gg=b,e=ig=!0),e?(b.effectTag|=2,b.child=fg(b,null,d,c)):(Q(a,b,d,c),og()),b=b.child),b;case 5:return Lf(b),null===a&&lg(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:null,g=e.children,Ce(d,e)?g=null:null!==f&&Ce(d,f)&&(b.effectTag|=16),vg(a,b),1!==c&&1&b.mode&&e.hidden?(b.expirationTime=1,b=null):(Q(a,b,g,c),b=b.child),b;case 6:return null===a&&lg(b),null;case 13:return zg(a,b,c);case 4:return Jf(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=eg(b,null,d,c):Q(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,qg(a,b,d,e=b.elementType===d?e:P(d,e),c);case 7:return Q(a,b,b.pendingProps,c),b.child;case 8:case 12:return Q(a,b,b.pendingProps.children,c),b.child;case 10:a:{if(d=b.type._context,e=b.pendingProps,g=b.memoizedProps,Bf(b,f=e.value),null!==g){var h=g.value;if(0===(f=h===f&&(0!==h||1/h==1/f)||h!=h&&f!=f?0:0|("function"==typeof d._calculateChangedBits?d._calculateChangedBits(h,f):1073741823))){if(g.children===e.children&&!L.current){b=tg(a,b,c);break a}}else for(null!==(g=b.child)&&(g.return=b);null!==g;){if(null!==(h=g.firstContextDependency))do{if(h.context===d&&0!=(h.observedBits&f)){if(1===g.tag){var k=nf(c);k.tag=2,pf(g,k)}g.expirationTime<c&&(g.expirationTime=c),null!==(k=g.alternate)&&k.expirationTime<c&&(k.expirationTime=c);for(var l=g.return;null!==l;){if(k=l.alternate,l.childExpirationTime<c)l.childExpirationTime=c,null!==k&&k.childExpirationTime<c&&(k.childExpirationTime=c);else{if(!(null!==k&&k.childExpirationTime<c))break;k.childExpirationTime=c}l=l.return}}k=g.child,h=h.next}while(null!==h);else k=10===g.tag&&g.type===b.type?null:g.child;if(null!==k)k.return=g;else for(k=g;null!==k;){if(k===b){k=null;break}if(null!==(g=k.sibling)){g.return=k.return,k=g;break}k=k.return}g=k}}Q(a,b,e.children,c),b=b.child}return b;case 9:return e=b.type,d=(f=b.pendingProps).children,Df(b),d=d(e=Ef(e,f.unstable_observedBits)),b.effectTag|=1,Q(a,b,d,c),b.child;case 14:return f=P(e=b.type,b.pendingProps),rg(a,b,e,f=P(e.type,f),d,c);case 15:return sg(a,b,b.type,b.pendingProps,d,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:P(d,e),null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),b.tag=1,M(d)?(a=!0,Re(b)):a=!1,Df(b),Xf(b,d,e),$f(b,d,e,c),xg(null,b,d,!0,a,c);default:t("156")}}function Bg(a){a.effectTag|=4}var Cg=void 0,Gg=void 0,Hg=void 0,Ig=void 0;Cg=function(a,b){for(var c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c,c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Gg=function(){},Hg=function(a,b,c,d,e){var f=a.memoizedProps;if(f!==d){var g=b.stateNode;switch(If(O.current),a=null,c){case"input":f=zc(g,f),d=zc(g,d),a=[];break;case"option":f=ee(g,f),d=ee(g,d),a=[];break;case"select":f=n({},f,{value:void 0}),d=n({},d,{value:void 0}),a=[];break;case"textarea":f=ge(g,f),d=ge(g,d),a=[];break;default:"function"!=typeof f.onClick&&"function"==typeof d.onClick&&(g.onclick=ye)}ve(c,d),g=c=void 0;var h=null;for(c in f)if(!d.hasOwnProperty(c)&&f.hasOwnProperty(c)&&null!=f[c])if("style"===c){var k=f[c];for(g in k)k.hasOwnProperty(g)&&(h||(h={}),h[g]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(sa.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in d){var l=d[c];if(k=null!=f?f[c]:void 0,d.hasOwnProperty(c)&&l!==k&&(null!=l||null!=k))if("style"===c)if(k){for(g in k)!k.hasOwnProperty(g)||l&&l.hasOwnProperty(g)||(h||(h={}),h[g]="");for(g in l)l.hasOwnProperty(g)&&k[g]!==l[g]&&(h||(h={}),h[g]=l[g])}else h||(a||(a=[]),a.push(c,h)),h=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,k=k?k.__html:void 0,null!=l&&k!==l&&(a=a||[]).push(c,""+l)):"children"===c?k===l||"string"!=typeof l&&"number"!=typeof l||(a=a||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(sa.hasOwnProperty(c)?(null!=l&&xe(e,c),a||k===l||(a=[])):(a=a||[]).push(c,l))}h&&(a=a||[]).push("style",h),e=a,(b.updateQueue=e)&&Bg(b)}},Ig=function(a,b,c,d){c!==d&&Bg(b)};var Jg="function"==typeof WeakSet?WeakSet:Set;function Kg(a,b){var c=b.source,d=b.stack;null===d&&null!==c&&(d=nc(c)),null!==c&&mc(c.type),b=b.value,null!==a&&1===a.tag&&mc(a.type);try{console.error(b)}catch(e){setTimeout(function(){throw e})}}function Lg(a){var b=a.ref;if(null!==b)if("function"==typeof b)try{b(null)}catch(c){Mg(a,c)}else b.current=null}function Og(a){switch("function"==typeof Ue&&Ue(a),a.tag){case 0:case 11:case 14:case 15:var b=a.updateQueue;if(null!==b&&null!==(b=b.lastEffect)){var c=b=b.next;do{var d=c.destroy;if(null!==d){var e=a;try{d()}catch(f){Mg(e,f)}}c=c.next}while(c!==b)}break;case 1:if(Lg(a),"function"==typeof(b=a.stateNode).componentWillUnmount)try{b.props=a.memoizedProps,b.state=a.memoizedState,b.componentWillUnmount()}catch(f){Mg(a,f)}break;case 5:Lg(a);break;case 4:Pg(a)}}function Qg(a){return 5===a.tag||3===a.tag||4===a.tag}function Rg(a){a:{for(var b=a.return;null!==b;){if(Qg(b)){var c=b;break a}b=b.return}t("160"),c=void 0}var d=b=void 0;switch(c.tag){case 5:b=c.stateNode,d=!1;break;case 3:case 4:b=c.stateNode.containerInfo,d=!0;break;default:t("161")}16&c.effectTag&&(pe(b,""),c.effectTag&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c.return||Qg(c.return)){c=null;break a}c=c.return}for(c.sibling.return=c.return,c=c.sibling;5!==c.tag&&6!==c.tag;){if(2&c.effectTag)continue b;if(null===c.child||4===c.tag)continue b;c.child.return=c,c=c.child}if(!(2&c.effectTag)){c=c.stateNode;break a}}for(var e=a;;){if(5===e.tag||6===e.tag)if(c)if(d){var f=b,g=e.stateNode,h=c;8===f.nodeType?f.parentNode.insertBefore(g,h):f.insertBefore(g,h)}else b.insertBefore(e.stateNode,c);else d?(g=b,h=e.stateNode,8===g.nodeType?(f=g.parentNode).insertBefore(h,g):(f=g).appendChild(h),null!=(g=g._reactRootContainer)||null!==f.onclick||(f.onclick=ye)):b.appendChild(e.stateNode);else if(4!==e.tag&&null!==e.child){e.child.return=e,e=e.child;continue}if(e===a)break;for(;null===e.sibling;){if(null===e.return||e.return===a)return;e=e.return}e.sibling.return=e.return,e=e.sibling}}function Pg(a){for(var b=a,c=!1,d=void 0,e=void 0;;){if(!c){c=b.return;a:for(;;){switch(null===c&&t("160"),c.tag){case 5:d=c.stateNode,e=!1;break a;case 3:case 4:d=c.stateNode.containerInfo,e=!0;break a}c=c.return}c=!0}if(5===b.tag||6===b.tag){a:for(var f=b,g=f;;)if(Og(g),null!==g.child&&4!==g.tag)g.child.return=g,g=g.child;else{if(g===f)break;for(;null===g.sibling;){if(null===g.return||g.return===f)break a;g=g.return}g.sibling.return=g.return,g=g.sibling}e?(f=d,g=b.stateNode,8===f.nodeType?f.parentNode.removeChild(g):f.removeChild(g)):d.removeChild(b.stateNode)}else if(4===b.tag?(d=b.stateNode.containerInfo,e=!0):Og(b),null!==b.child){b.child.return=b,b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return;4===(b=b.return).tag&&(c=!1)}b.sibling.return=b.return,b=b.sibling}}function Sg(a,b){switch(b.tag){case 0:case 11:case 14:case 15:case 1:break;case 5:var c=b.stateNode;if(null!=c){var d=b.memoizedProps;a=null!==a?a.memoizedProps:d;var e=b.type,f=b.updateQueue;b.updateQueue=null,null!==f&&function(a,b,c,d,e){a[Ha]=e,"input"===c&&"radio"===e.type&&null!=e.name&&Bc(a,e),we(c,d),d=we(c,e);for(var f=0;f<b.length;f+=2){var g=b[f],h=b[f+1];"style"===g?te(a,h):"dangerouslySetInnerHTML"===g?oe(a,h):"children"===g?pe(a,h):xc(a,g,h,d)}switch(c){case"input":Cc(a,e);break;case"textarea":ie(a,e);break;case"select":b=a._wrapperState.wasMultiple,a._wrapperState.wasMultiple=!!e.multiple,null!=(c=e.value)?fe(a,!!e.multiple,c,!1):b!==!!e.multiple&&(null!=e.defaultValue?fe(a,!!e.multiple,e.defaultValue,!0):fe(a,!!e.multiple,e.multiple?[]:"",!1))}}(c,f,e,a,d)}break;case 6:null===b.stateNode&&t("162"),b.stateNode.nodeValue=b.memoizedProps;break;case 3:case 12:break;case 13:if(c=b.memoizedState,d=void 0,a=b,null===c?d=!1:(d=!0,a=b.child,0===c.timedOutAt&&(c.timedOutAt=Rf())),null!==a&&function(a,b){for(var c=a;;){if(5===c.tag){var d=c.stateNode;if(b)d.style.display="none";else{d=c.stateNode;var e=c.memoizedProps.style;e=null!=e&&e.hasOwnProperty("display")?e.display:null,d.style.display=se("display",e)}}else if(6===c.tag)c.stateNode.nodeValue=b?"":c.memoizedProps;else{if(13===c.tag&&null!==c.memoizedState){(d=c.child.sibling).return=c,c=d;continue}if(null!==c.child){c.child.return=c,c=c.child;continue}}if(c===a)break;for(;null===c.sibling;){if(null===c.return||c.return===a)return;c=c.return}c.sibling.return=c.return,c=c.sibling}}(a,d),null!==(c=b.updateQueue)){b.updateQueue=null;var g=b.stateNode;null===g&&(g=b.stateNode=new Jg),c.forEach(function(a){var c=function(a,b){var c=a.stateNode;null!==c&&c.delete(b),b=Sf(b=Rf(),a),null!==(a=th(a,b))&&(ff(a,b),0!==(b=a.expirationTime)&&sh(a,b))}.bind(null,b,a);g.has(a)||(g.add(a),a.then(c,c))})}break;case 17:break;default:t("163")}}var Ug="function"==typeof WeakMap?WeakMap:Map;function Vg(a,b,c){(c=nf(c)).tag=3,c.payload={element:null};var d=b.value;return c.callback=function(){Wg(d),Kg(a,b)},c}function Xg(a,b,c){(c=nf(c)).tag=3;var d=a.type.getDerivedStateFromError;if("function"==typeof d){var e=b.value;c.payload=function(){return d(e)}}var f=a.stateNode;return null!==f&&"function"==typeof f.componentDidCatch&&(c.callback=function(){"function"!=typeof d&&(null===Yg?Yg=new Set([this]):Yg.add(this));var c=b.value,e=b.stack;Kg(a,b),this.componentDidCatch(c,{componentStack:null!==e?e:""})}),c}function Zg(a){switch(a.tag){case 1:M(a.type)&&Ne();var b=a.effectTag;return 2048&b?(a.effectTag=-2049&b|64,a):null;case 3:return Kf(),Oe(),0!=(64&(b=a.effectTag))&&t("285"),a.effectTag=-2049&b|64,a;case 5:return Mf(a),null;case 13:return 2048&(b=a.effectTag)?(a.effectTag=-2049&b|64,a):null;case 4:return Kf(),null;case 10:return Cf(a),null;default:return null}}var $g={readContext:Ef},ah=Xb.ReactCurrentOwner,bh=1073741822,ch=0,dh=!1,S=null,T=null,U=0,eh=-1,fh=!1,V=null,gh=!1,hh=null,ih=null,Yg=null;function jh(){if(null!==S)for(var a=S.return;null!==a;){var b=a;switch(b.tag){case 1:var c=b.type.childContextTypes;null!=c&&Ne();break;case 3:Kf(),Oe();break;case 5:Mf(b);break;case 4:Kf();break;case 10:Cf(b)}a=a.return}T=null,U=0,eh=-1,fh=!1,S=null}function Tf(){null!==ih&&(ba.unstable_cancelCallback(hh),ih())}function kh(a){for(;;){var b=a.alternate,c=a.return,d=a.sibling;if(0==(1024&a.effectTag)){S=a;a:{var e=b,f=U,g=(b=a).pendingProps;switch(b.tag){case 2:case 16:break;case 15:case 0:break;case 1:M(b.type)&&Ne();break;case 3:Kf(),Oe(),(g=b.stateNode).pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),null!==e&&null!==e.child||(ng(b),b.effectTag&=-3),Gg(b);break;case 5:Mf(b);var h=If(Hf.current);if(f=b.type,null!==e&&null!=b.stateNode)Hg(e,b,f,g,h),e.ref!==b.ref&&(b.effectTag|=128);else if(g){var k=If(O.current);if(ng(b)){e=(g=b).stateNode;var l=g.type,m=g.memoizedProps,r=h;switch(e[Ga]=g,e[Ha]=m,f=void 0,h=l){case"iframe":case"object":H("load",e);break;case"video":case"audio":for(l=0;l<bb.length;l++)H(bb[l],e);break;case"source":H("error",e);break;case"img":case"image":case"link":H("error",e),H("load",e);break;case"form":H("reset",e),H("submit",e);break;case"details":H("toggle",e);break;case"input":Ac(e,m),H("invalid",e),xe(r,"onChange");break;case"select":e._wrapperState={wasMultiple:!!m.multiple},H("invalid",e),xe(r,"onChange");break;case"textarea":he(e,m),H("invalid",e),xe(r,"onChange")}for(f in ve(h,m),l=null,m)m.hasOwnProperty(f)&&(k=m[f],"children"===f?"string"==typeof k?e.textContent!==k&&(l=["children",k]):"number"==typeof k&&e.textContent!==""+k&&(l=["children",""+k]):sa.hasOwnProperty(f)&&null!=k&&xe(r,f));switch(h){case"input":Vb(e),Ec(e,m,!0);break;case"textarea":Vb(e),je(e);break;case"select":case"option":break;default:"function"==typeof m.onClick&&(e.onclick=ye)}f=l,g.updateQueue=f,(g=null!==f)&&Bg(b)}else{m=b,e=f,r=g,l=9===h.nodeType?h:h.ownerDocument,k===ke.html&&(k=le(e)),k===ke.html?"script"===e?((e=l.createElement("div")).innerHTML="<script><\/script>",l=e.removeChild(e.firstChild)):"string"==typeof r.is?l=l.createElement(e,{is:r.is}):(l=l.createElement(e),"select"===e&&r.multiple&&(l.multiple=!0)):l=l.createElementNS(k,e),(e=l)[Ga]=m,e[Ha]=g,Cg(e,b,!1,!1),r=e;var w=h,y=we(l=f,m=g);switch(l){case"iframe":case"object":H("load",r),h=m;break;case"video":case"audio":for(h=0;h<bb.length;h++)H(bb[h],r);h=m;break;case"source":H("error",r),h=m;break;case"img":case"image":case"link":H("error",r),H("load",r),h=m;break;case"form":H("reset",r),H("submit",r),h=m;break;case"details":H("toggle",r),h=m;break;case"input":Ac(r,m),h=zc(r,m),H("invalid",r),xe(w,"onChange");break;case"option":h=ee(r,m);break;case"select":r._wrapperState={wasMultiple:!!m.multiple},h=n({},m,{value:void 0}),H("invalid",r),xe(w,"onChange");break;case"textarea":he(r,m),h=ge(r,m),H("invalid",r),xe(w,"onChange");break;default:h=m}ve(l,h),k=void 0;var B=l,R=r,v=h;for(k in v)if(v.hasOwnProperty(k)){var q=v[k];"style"===k?te(R,q):"dangerouslySetInnerHTML"===k?null!=(q=q?q.__html:void 0)&&oe(R,q):"children"===k?"string"==typeof q?("textarea"!==B||""!==q)&&pe(R,q):"number"==typeof q&&pe(R,""+q):"suppressContentEditableWarning"!==k&&"suppressHydrationWarning"!==k&&"autoFocus"!==k&&(sa.hasOwnProperty(k)?null!=q&&xe(w,k):null!=q&&xc(R,k,q,y))}switch(l){case"input":Vb(r),Ec(r,m,!1);break;case"textarea":Vb(r),je(r);break;case"option":null!=m.value&&r.setAttribute("value",""+yc(m.value));break;case"select":(h=r).multiple=!!m.multiple,null!=(r=m.value)?fe(h,!!m.multiple,r,!1):null!=m.defaultValue&&fe(h,!!m.multiple,m.defaultValue,!0);break;default:"function"==typeof h.onClick&&(r.onclick=ye)}(g=Be(f,g))&&Bg(b),b.stateNode=e}null!==b.ref&&(b.effectTag|=128)}else null===b.stateNode&&t("166");break;case 6:e&&null!=b.stateNode?Ig(e,b,e.memoizedProps,g):("string"!=typeof g&&(null===b.stateNode&&t("166")),e=If(Hf.current),If(O.current),ng(b)?(f=(g=b).stateNode,e=g.memoizedProps,f[Ga]=g,(g=f.nodeValue!==e)&&Bg(b)):(f=b,(g=(9===e.nodeType?e:e.ownerDocument).createTextNode(g))[Ga]=b,f.stateNode=g));break;case 11:break;case 13:if(g=b.memoizedState,0!=(64&b.effectTag)){b.expirationTime=f,S=b;break a}g=null!==g,f=null!==e&&null!==e.memoizedState,null!==e&&!g&&f&&(null!==(e=e.child.sibling)&&(null!==(h=b.firstEffect)?(b.firstEffect=e,e.nextEffect=h):(b.firstEffect=b.lastEffect=e,e.nextEffect=null),e.effectTag=8)),(g!==f||0==(1&b.effectTag)&&g)&&(b.effectTag|=4);break;case 7:case 8:case 12:break;case 4:Kf(),Gg(b);break;case 10:Cf(b);break;case 9:case 14:break;case 17:M(b.type)&&Ne();break;default:t("156")}S=null}if(b=a,1===U||1!==b.childExpirationTime){for(g=0,f=b.child;null!==f;)(e=f.expirationTime)>g&&(g=e),(h=f.childExpirationTime)>g&&(g=h),f=f.sibling;b.childExpirationTime=g}if(null!==S)return S;null!==c&&0==(1024&c.effectTag)&&(null===c.firstEffect&&(c.firstEffect=a.firstEffect),null!==a.lastEffect&&(null!==c.lastEffect&&(c.lastEffect.nextEffect=a.firstEffect),c.lastEffect=a.lastEffect),1<a.effectTag&&(null!==c.lastEffect?c.lastEffect.nextEffect=a:c.firstEffect=a,c.lastEffect=a))}else{if(null!==(a=Zg(a)))return a.effectTag&=1023,a;null!==c&&(c.firstEffect=c.lastEffect=null,c.effectTag|=1024)}if(null!==d)return d;if(null===c)break;a=c}return null}function lh(a){var b=Ag(a.alternate,a,U);return a.memoizedProps=a.pendingProps,null===b&&(b=kh(a)),ah.current=null,b}function mh(a,b){dh&&t("243"),Tf(),dh=!0,ah.currentDispatcher=$g;var c=a.nextExpirationTimeToWorkOn;c===U&&a===T&&null!==S||(jh(),U=c,S=$e((T=a).current,null),a.pendingCommitExpirationTime=0);for(var d=!1;;){try{if(b)for(;null!==S&&!nh();)S=lh(S);else for(;null!==S;)S=lh(S)}catch(B){if(Af=zf=yf=null,null===S)d=!0,Wg(B);else{null===S&&t("271");var e=S,f=e.return;if(null!==f){a:{var g=a,h=f,k=e,l=B;if(f=U,k.effectTag|=1024,k.firstEffect=k.lastEffect=null,null!==l&&"object"==typeof l&&"function"==typeof l.then){var m=l;l=h;var r=-1,w=-1;do{if(13===l.tag){var y=l.alternate;if(null!==y&&null!==(y=y.memoizedState)){w=10*(1073741822-y.timedOutAt);break}"number"==typeof(y=l.pendingProps.maxDuration)&&(0>=y?r=0:(-1===r||y<r)&&(r=y))}l=l.return}while(null!==l);l=h;do{if((y=13===l.tag)&&(y=void 0!==l.memoizedProps.fallback&&null===l.memoizedState),y){if(null===(h=l.updateQueue)?l.updateQueue=new Set([m]):h.add(m),0==(1&l.mode)){l.effectTag|=64,k.effectTag&=-1957,1===k.tag&&(null===k.alternate?k.tag=17:((f=nf(1073741823)).tag=2,pf(k,f))),k.expirationTime=1073741823;break a}null===(k=g.pingCache)?(k=g.pingCache=new Ug,h=new Set,k.set(m,h)):void 0===(h=k.get(m))&&(h=new Set,k.set(m,h)),h.has(f)||(h.add(f),k=oh.bind(null,g,m,f),m.then(k,k)),-1===r?g=1073741823:(-1===w&&(w=10*(1073741822-jf(g,f))-5e3),g=w+r),0<=g&&eh<g&&(eh=g),l.effectTag|=2048,l.expirationTime=f;break a}l=l.return}while(null!==l);l=Error((mc(k.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+nc(k))}fh=!0,l=wf(l,k),g=h;do{switch(g.tag){case 3:g.effectTag|=2048,g.expirationTime=f,qf(g,f=Vg(g,l,f));break a;case 1:if(m=l,r=g.type,w=g.stateNode,0==(64&g.effectTag)&&("function"==typeof r.getDerivedStateFromError||null!==w&&"function"==typeof w.componentDidCatch&&(null===Yg||!Yg.has(w)))){g.effectTag|=2048,g.expirationTime=f,qf(g,f=Xg(g,m,f));break a}}g=g.return}while(null!==g)}S=kh(e);continue}d=!0,Wg(B)}}break}if(dh=!1,Af=zf=yf=ah.currentDispatcher=null,d)T=null,a.finishedWork=null;else if(null!==S)a.finishedWork=null;else{if(null===(d=a.current.alternate)&&t("281"),T=null,fh){if(e=a.latestPendingTime,f=a.latestSuspendedTime,g=a.latestPingedTime,0!==e&&e<c||0!==f&&f<c||0!==g&&g<c)return hf(a,c),void ph(a,d,c,a.expirationTime,-1);if(!a.didError&&b)return a.didError=!0,c=a.nextExpirationTimeToWorkOn=c,b=a.expirationTime=1073741823,void ph(a,d,c,b,-1)}b&&-1!==eh?(hf(a,c),(b=10*(1073741822-jf(a,c)))<eh&&(eh=b),b=10*(1073741822-Rf()),b=eh-b,ph(a,d,c,a.expirationTime,0>b?0:b)):(a.pendingCommitExpirationTime=c,a.finishedWork=d)}}function Mg(a,b){for(var c=a.return;null!==c;){switch(c.tag){case 1:var d=c.stateNode;if("function"==typeof c.type.getDerivedStateFromError||"function"==typeof d.componentDidCatch&&(null===Yg||!Yg.has(d)))return pf(c,a=Xg(c,a=wf(b,a),1073741823)),void Uf(c,1073741823);break;case 3:return pf(c,a=Vg(c,a=wf(b,a),1073741823)),void Uf(c,1073741823)}c=c.return}3===a.tag&&(pf(a,c=Vg(a,c=wf(b,a),1073741823)),Uf(a,1073741823))}function Sf(a,b){return 0!==ch?a=ch:dh?a=gh?1073741823:U:1&b.mode?(a=qh?1073741822-10*(1+((1073741822-a+15)/10|0)):1073741822-25*(1+((1073741822-a+500)/25|0)),null!==T&&a===U&&--a):a=1073741823,qh&&(0===rh||a<rh)&&(rh=a),a}function oh(a,b,c){var d=a.pingCache;null!==d&&d.delete(b),null!==T&&U===c?T=null:(b=a.earliestSuspendedTime,d=a.latestSuspendedTime,0!==b&&c<=b&&c>=d&&(a.didError=!1,(0===(b=a.latestPingedTime)||b>c)&&(a.latestPingedTime=c),gf(c,a),0!==(c=a.expirationTime)&&sh(a,c)))}function th(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);var d=a.return,e=null;if(null===d&&3===a.tag)e=a.stateNode;else for(;null!==d;){if(c=d.alternate,d.childExpirationTime<b&&(d.childExpirationTime=b),null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b),null===d.return&&3===d.tag){e=d.stateNode;break}d=d.return}return e}function Uf(a,b){null!==(a=th(a,b))&&(!dh&&0!==U&&b>U&&jh(),ff(a,b),dh&&!gh&&T===a||sh(a,a.expirationTime),uh>vh&&(uh=0,t("185")))}function wh(a,b,c,d,e){var f=ch;ch=1073741823;try{return a(b,c,d,e)}finally{ch=f}}var xh=null,W=null,yh=0,zh=void 0,X=!1,Ah=null,Y=0,rh=0,Bh=!1,Ch=null,Z=!1,Dh=!1,qh=!1,Eh=null,Fh=ba.unstable_now(),Gh=1073741822-(Fh/10|0),Hh=Gh,vh=50,uh=0,Ih=null;function Jh(){Gh=1073741822-((ba.unstable_now()-Fh)/10|0)}function Kh(a,b){if(0!==yh){if(b<yh)return;null!==zh&&ba.unstable_cancelCallback(zh)}yh=b,a=ba.unstable_now()-Fh,zh=ba.unstable_scheduleCallback(Lh,{timeout:10*(1073741822-b)-a})}function ph(a,b,c,d,e){a.expirationTime=d,0!==e||nh()?0<e&&(a.timeoutHandle=De(function(a,b,c){a.pendingCommitExpirationTime=c,a.finishedWork=b,Jh(),Hh=Gh,Nh(a,c)}.bind(null,a,b,c),e)):(a.pendingCommitExpirationTime=c,a.finishedWork=b)}function Rf(){return X?Hh:(Oh(),0!==Y&&1!==Y||(Jh(),Hh=Gh),Hh)}function sh(a,b){null===a.nextScheduledRoot?(a.expirationTime=b,null===W?(xh=W=a,a.nextScheduledRoot=a):(W=W.nextScheduledRoot=a).nextScheduledRoot=xh):b>a.expirationTime&&(a.expirationTime=b),X||(Z?Dh&&(Ah=a,Y=1073741823,Ph(a,1073741823,!1)):1073741823===b?Qh(1073741823,!1):Kh(a,b))}function Oh(){var a=0,b=null;if(null!==W)for(var c=W,d=xh;null!==d;){var e=d.expirationTime;if(0===e){if((null===c||null===W)&&t("244"),d===d.nextScheduledRoot){xh=W=d.nextScheduledRoot=null;break}if(d===xh)xh=e=d.nextScheduledRoot,W.nextScheduledRoot=e,d.nextScheduledRoot=null;else{if(d===W){(W=c).nextScheduledRoot=xh,d.nextScheduledRoot=null;break}c.nextScheduledRoot=d.nextScheduledRoot,d.nextScheduledRoot=null}d=c.nextScheduledRoot}else{if(e>a&&(a=e,b=d),d===W)break;if(1073741823===a)break;c=d,d=d.nextScheduledRoot}}Ah=b,Y=a}var Rh=!1;function nh(){return!!Rh||!!ba.unstable_shouldYield()&&(Rh=!0)}function Lh(){try{if(!nh()&&null!==xh){Jh();var a=xh;do{var b=a.expirationTime;0!==b&&Gh<=b&&(a.nextExpirationTimeToWorkOn=Gh),a=a.nextScheduledRoot}while(a!==xh)}Qh(0,!0)}finally{Rh=!1}}function Qh(a,b){if(Oh(),b)for(Jh(),Hh=Gh;null!==Ah&&0!==Y&&a<=Y&&!(Rh&&Gh>Y);)Ph(Ah,Y,Gh>Y),Oh(),Jh(),Hh=Gh;else for(;null!==Ah&&0!==Y&&a<=Y;)Ph(Ah,Y,!1),Oh();if(b&&(yh=0,zh=null),0!==Y&&Kh(Ah,Y),uh=0,Ih=null,null!==Eh)for(a=Eh,Eh=null,b=0;b<a.length;b++){var c=a[b];try{c._onComplete()}catch(d){Bh||(Bh=!0,Ch=d)}}if(Bh)throw a=Ch,Ch=null,Bh=!1,a}function Nh(a,b){X&&t("253"),Ah=a,Y=b,Ph(a,b,!1),Qh(1073741823,!1)}function Ph(a,b,c){if(X&&t("245"),X=!0,c){var d=a.finishedWork;null!==d?Sh(a,d,b):(a.finishedWork=null,-1!==(d=a.timeoutHandle)&&(a.timeoutHandle=-1,Ee(d)),mh(a,c),null!==(d=a.finishedWork)&&(nh()?a.finishedWork=d:Sh(a,d,b)))}else null!==(d=a.finishedWork)?Sh(a,d,b):(a.finishedWork=null,-1!==(d=a.timeoutHandle)&&(a.timeoutHandle=-1,Ee(d)),mh(a,c),null!==(d=a.finishedWork)&&Sh(a,d,b));X=!1}function Sh(a,b,c){var d=a.firstBatch;if(null!==d&&d._expirationTime>=c&&(null===Eh?Eh=[d]:Eh.push(d),d._defer))return a.finishedWork=b,void(a.expirationTime=0);a.finishedWork=null,a===Ih?uh++:(Ih=a,uh=0),gh=dh=!0,a.current===b&&t("177"),0===(c=a.pendingCommitExpirationTime)&&t("261"),a.pendingCommitExpirationTime=0,d=b.expirationTime;var e=b.childExpirationTime;if(d=e>d?e:d,a.didError=!1,0===d?(a.earliestPendingTime=0,a.latestPendingTime=0,a.earliestSuspendedTime=0,a.latestSuspendedTime=0,a.latestPingedTime=0):(d<a.latestPingedTime&&(a.latestPingedTime=0),0!==(e=a.latestPendingTime)&&(e>d?a.earliestPendingTime=a.latestPendingTime=0:a.earliestPendingTime>d&&(a.earliestPendingTime=a.latestPendingTime)),0===(e=a.earliestSuspendedTime)?ff(a,d):d<a.latestSuspendedTime?(a.earliestSuspendedTime=0,a.latestSuspendedTime=0,a.latestPingedTime=0,ff(a,d)):d>e&&ff(a,d)),gf(0,a),ah.current=null,1<b.effectTag?null!==b.lastEffect?(b.lastEffect.nextEffect=b,d=b.firstEffect):d=b:d=b.firstEffect,ze=Hd,Ud(e=Td())){if("selectionStart"in e)var f={start:e.selectionStart,end:e.selectionEnd};else a:{var g=(f=(f=e.ownerDocument)&&f.defaultView||window).getSelection&&f.getSelection();if(g&&0!==g.rangeCount){f=g.anchorNode;var h=g.anchorOffset,k=g.focusNode;g=g.focusOffset;try{f.nodeType,k.nodeType}catch(db){f=null;break a}var l=0,m=-1,r=-1,w=0,y=0,B=e,R=null;b:for(;;){for(var v;B!==f||0!==h&&3!==B.nodeType||(m=l+h),B!==k||0!==g&&3!==B.nodeType||(r=l+g),3===B.nodeType&&(l+=B.nodeValue.length),null!==(v=B.firstChild);)R=B,B=v;for(;;){if(B===e)break b;if(R===f&&++w===h&&(m=l),R===k&&++y===g&&(r=l),null!==(v=B.nextSibling))break;R=(B=R).parentNode}B=v}f=-1===m||-1===r?null:{start:m,end:r}}else f=null}f=f||{start:0,end:0}}else f=null;for(Ae={focusedElem:e,selectionRange:f},Hd=!1,V=d;null!==V;){e=!1,f=void 0;try{for(;null!==V;){if(256&V.effectTag)a:{var q=V.alternate;switch((h=V).tag){case 0:case 11:case 15:break a;case 1:if(256&h.effectTag&&null!==q){var u=q.memoizedProps,A=q.memoizedState,Yf=h.stateNode,Vh=Yf.getSnapshotBeforeUpdate(h.elementType===h.type?u:P(h.type,u),A);Yf.__reactInternalSnapshotBeforeUpdate=Vh}break a;case 3:case 5:case 6:case 4:case 17:break a;default:t("163")}}V=V.nextEffect}}catch(db){e=!0,f=db}e&&(null===V&&t("178"),Mg(V,f),null!==V&&(V=V.nextEffect))}for(V=d;null!==V;){q=!1,u=void 0;try{for(;null!==V;){var x=V.effectTag;if(16&x&&pe(V.stateNode,""),128&x){var C=V.alternate;if(null!==C){var p=C.ref;null!==p&&("function"==typeof p?p(null):p.current=null)}}switch(14&x){case 2:Rg(V),V.effectTag&=-3;break;case 6:Rg(V),V.effectTag&=-3,Sg(V.alternate,V);break;case 4:Sg(V.alternate,V);break;case 8:Pg(A=V),A.return=null,A.child=null,A.memoizedState=null,A.updateQueue=null;var G=A.alternate;null!==G&&(G.return=null,G.child=null,G.memoizedState=null,G.updateQueue=null)}V=V.nextEffect}}catch(db){q=!0,u=db}q&&(null===V&&t("178"),Mg(V,u),null!==V&&(V=V.nextEffect))}if(p=Ae,C=Td(),x=p.focusedElem,q=p.selectionRange,C!==x&&x&&x.ownerDocument&&function Sd(a,b){return!(!a||!b)&&(a===b||(!a||3!==a.nodeType)&&(b&&3===b.nodeType?Sd(a,b.parentNode):"contains"in a?a.contains(b):!!a.compareDocumentPosition&&!!(16&a.compareDocumentPosition(b))))}(x.ownerDocument.documentElement,x)){null!==q&&Ud(x)&&(C=q.start,void 0===(p=q.end)&&(p=C),"selectionStart"in x?(x.selectionStart=C,x.selectionEnd=Math.min(p,x.value.length)):(p=(C=x.ownerDocument||document)&&C.defaultView||window).getSelection&&(p=p.getSelection(),u=x.textContent.length,G=Math.min(q.start,u),q=void 0===q.end?G:Math.min(q.end,u),!p.extend&&G>q&&(u=q,q=G,G=u),u=Rd(x,G),A=Rd(x,q),u&&A&&(1!==p.rangeCount||p.anchorNode!==u.node||p.anchorOffset!==u.offset||p.focusNode!==A.node||p.focusOffset!==A.offset)&&((C=C.createRange()).setStart(u.node,u.offset),p.removeAllRanges(),G>q?(p.addRange(C),p.extend(A.node,A.offset)):(C.setEnd(A.node,A.offset),p.addRange(C))))),C=[];for(p=x;p=p.parentNode;)1===p.nodeType&&C.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"==typeof x.focus&&x.focus(),x=0;x<C.length;x++)(p=C[x]).element.scrollLeft=p.left,p.element.scrollTop=p.top}for(Ae=null,Hd=!!ze,ze=null,a.current=b,V=d;null!==V;){d=!1,x=void 0;try{for(C=c;null!==V;){var Fb=V.effectTag;if(36&Fb){var Gb=V.alternate;switch(G=C,(p=V).tag){case 0:case 11:case 15:break;case 1:var Hc=p.stateNode;if(4&p.effectTag)if(null===Gb)Hc.componentDidMount();else{var ii=p.elementType===p.type?Gb.memoizedProps:P(p.type,Gb.memoizedProps);Hc.componentDidUpdate(ii,Gb.memoizedState,Hc.__reactInternalSnapshotBeforeUpdate)}var Dg=p.updateQueue;null!==Dg&&uf(0,Dg,Hc);break;case 3:var Eg=p.updateQueue;if(null!==Eg){if(q=null,null!==p.child)switch(p.child.tag){case 5:q=p.child.stateNode;break;case 1:q=p.child.stateNode}uf(0,Eg,q)}break;case 5:var ji=p.stateNode;null===Gb&&4&p.effectTag&&Be(p.type,p.memoizedProps)&&ji.focus();break;case 6:case 4:case 12:case 13:case 17:break;default:t("163")}}if(128&Fb){var Ic=V.ref;if(null!==Ic){var Fg=V.stateNode;switch(V.tag){case 5:var ce=Fg;break;default:ce=Fg}"function"==typeof Ic?Ic(ce):Ic.current=ce}}V=V.nextEffect}}catch(db){d=!0,x=db}d&&(null===V&&t("178"),Mg(V,x),null!==V&&(V=V.nextEffect))}dh=gh=!1,"function"==typeof Te&&Te(b.stateNode),Fb=b.expirationTime,0===(b=(b=b.childExpirationTime)>Fb?b:Fb)&&(Yg=null),a.expirationTime=b,a.finishedWork=null}function Wg(a){null===Ah&&t("246"),Ah.expirationTime=0,Bh||(Bh=!0,Ch=a)}function Th(a,b){var c=Z;Z=!0;try{return a(b)}finally{(Z=c)||X||Qh(1073741823,!1)}}function Uh(a,b){if(Z&&!Dh){Dh=!0;try{return a(b)}finally{Dh=!1}}return a(b)}function Wh(a,b,c){if(qh)return a(b,c);Z||X||0===rh||(Qh(rh,!1),rh=0);var d=qh,e=Z;Z=qh=!0;try{return a(b,c)}finally{qh=d,(Z=e)||X||Qh(1073741823,!1)}}function Xh(a,b,c,d,e){var f=b.current;a:if(c){b:{2===kd(c=c._reactInternalFiber)&&1===c.tag||t("170");var g=c;do{switch(g.tag){case 3:g=g.stateNode.context;break b;case 1:if(M(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break b}}g=g.return}while(null!==g);t("171"),g=void 0}if(1===c.tag){var h=c.type;if(M(h)){c=Qe(c,h,g);break a}}c=g}else c=Ke;return null===b.context?b.context=c:b.pendingContext=c,b=e,(e=nf(d)).payload={element:a},null!==(b=void 0===b?null:b)&&(e.callback=b),Tf(),pf(f,e),Uf(f,d),d}function Yh(a,b,c,d){var e=b.current;return Xh(a,b,c,e=Sf(Rf(),e),d)}function Zh(a){if(!(a=a.current).child)return null;switch(a.child.tag){case 5:default:return a.child.stateNode}}function ai(a){var b=1073741822-25*(1+((1073741822-Rf()+500)/25|0));b>=bh&&(b=bh-1),this._expirationTime=bh=b,this._root=a,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function bi(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function ci(a,b,c){a={current:b=N(3,null,null,b?3:0),containerInfo:a,pendingChildren:null,pingCache:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:c,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=b.stateNode=a}function di(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||" react-mount-point-unstable "!==a.nodeValue))}function fi(a,b,c,d,e){di(c)||t("200");var f=c._reactRootContainer;if(f){if("function"==typeof e){var g=e;e=function(){var a=Zh(f._internalRoot);g.call(a)}}null!=a?f.legacy_renderSubtreeIntoContainer(a,b,e):f.render(b,e)}else{if(f=c._reactRootContainer=function(a,b){if(b||(b=!(!(b=a?9===a.nodeType?a.documentElement:a.firstChild:null)||1!==b.nodeType||!b.hasAttribute("data-reactroot"))),!b)for(var c;c=a.lastChild;)a.removeChild(c);return new ci(a,!1,b)}(c,d),"function"==typeof e){var h=e;e=function(){var a=Zh(f._internalRoot);h.call(a)}}Uh(function(){null!=a?f.legacy_renderSubtreeIntoContainer(a,b,e):f.render(b,e)})}return Zh(f._internalRoot)}function gi(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return di(b)||t("200"),function(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:$b,key:null==d?null:""+d,children:a,containerInfo:b,implementation:c}}(a,b,null,c)}Cb=function(a,b,c){switch(b){case"input":if(Cc(a,c),b=c.name,"radio"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+b)+'][type="radio"]'),b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=La(d);e||t("90"),Wb(d),Cc(d,e)}}}break;case"textarea":ie(a,c);break;case"select":null!=(b=c.value)&&fe(a,!!c.multiple,b,!1)}},ai.prototype.render=function(a){this._defer||t("250"),this._hasChildren=!0,this._children=a;var b=this._root._internalRoot,c=this._expirationTime,d=new bi;return Xh(a,b,null,c,d._onCommit),d},ai.prototype.then=function(a){if(this._didComplete)a();else{var b=this._callbacks;null===b&&(b=this._callbacks=[]),b.push(a)}},ai.prototype.commit=function(){var a=this._root._internalRoot,b=a.firstBatch;if(this._defer&&null!==b||t("251"),this._hasChildren){var c=this._expirationTime;if(b!==this){this._hasChildren&&(c=this._expirationTime=b._expirationTime,this.render(this._children));for(var d=null,e=b;e!==this;)d=e,e=e._next;null===d&&t("251"),d._next=e._next,this._next=b,a.firstBatch=this}this._defer=!1,Nh(a,c),b=this._next,this._next=null,null!==(b=a.firstBatch=b)&&b._hasChildren&&b.render(b._children)}else this._next=null,this._defer=!1},ai.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var a=this._callbacks;if(null!==a)for(var b=0;b<a.length;b++)(0,a[b])()}},bi.prototype.then=function(a){if(this._didCommit)a();else{var b=this._callbacks;null===b&&(b=this._callbacks=[]),b.push(a)}},bi.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var a=this._callbacks;if(null!==a)for(var b=0;b<a.length;b++){var c=a[b];"function"!=typeof c&&t("191",c),c()}}},ci.prototype.render=function(a,b){var c=this._internalRoot,d=new bi;return null!==(b=void 0===b?null:b)&&d.then(b),Yh(a,c,null,d._onCommit),d},ci.prototype.unmount=function(a){var b=this._internalRoot,c=new bi;return null!==(a=void 0===a?null:a)&&c.then(a),Yh(null,b,null,c._onCommit),c},ci.prototype.legacy_renderSubtreeIntoContainer=function(a,b,c){var d=this._internalRoot,e=new bi;return null!==(c=void 0===c?null:c)&&e.then(c),Yh(b,d,a,e._onCommit),e},ci.prototype.createBatch=function(){var a=new ai(this),b=a._expirationTime,c=this._internalRoot,d=c.firstBatch;if(null===d)c.firstBatch=a,a._next=null;else{for(c=null;null!==d&&d._expirationTime>=b;)c=d,d=d._next;a._next=d,null!==c&&(c._next=a)}return a},Kb=Th,Lb=Wh,Mb=function(){X||0===rh||(Qh(rh,!1),rh=0)};var ki={createPortal:gi,findDOMNode:function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternalFiber;return void 0===b&&("function"==typeof a.render?t("188"):t("268",Object.keys(a))),a=null===(a=nd(b))?null:a.stateNode},hydrate:function(a,b,c){return fi(null,a,b,!0,c)},render:function(a,b,c){return fi(null,a,b,!1,c)},unstable_renderSubtreeIntoContainer:function(a,b,c,d){return(null==a||void 0===a._reactInternalFiber)&&t("38"),fi(a,b,c,!1,d)},unmountComponentAtNode:function(a){return di(a)||t("40"),!!a._reactRootContainer&&(Uh(function(){fi(null,null,a,!1,function(){a._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return gi.apply(void 0,arguments)},unstable_batchedUpdates:Th,unstable_interactiveUpdates:Wh,flushSync:function(a,b){X&&t("187");var c=Z;Z=!0;try{return wh(a,b)}finally{Z=c,Qh(1073741823,!1)}},unstable_createRoot:function(a,b){return di(a)||t("299","unstable_createRoot"),new ci(a,!0,null!=b&&!0===b.hydrate)},unstable_flushControlled:function(a){var b=Z;Z=!0;try{wh(a)}finally{(Z=b)||X||Qh(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[Ja,Ka,La,Ca.injectEventPluginsByName,qa,Ra,function(a){za(a,Qa)},Ib,Jb,Jd,Ea]}};!function(a){var b=a.findFiberByHostInstance;(function(a){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)return!0;try{var c=b.inject(a);Te=Ve(function(a){return b.onCommitFiberRoot(c,a)}),Ue=Ve(function(a){return b.onCommitFiberUnmount(c,a)})}catch(d){}})(n({},a,{overrideProps:null,findHostInstanceByFiber:function(a){return null===(a=nd(a))?null:a.stateNode},findFiberByHostInstance:function(a){return b?b(a):null}}))}({findFiberByHostInstance:Ia,bundleType:0,version:"16.7.0",rendererPackageName:"react-dom"});var li={default:ki},mi=li&&ki||li;module.exports=mi.default||mi},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(545)},function(module,exports,__webpack_require__){"use strict";(function(global){
/** @license React v0.12.0
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
Object.defineProperty(exports,"__esModule",{value:!0});var c=null,f=!1,h=3,k=-1,l=-1,m=!1,n=!1;function p(){if(!m){var a=c.expirationTime;n?q():n=!0,r(t,a)}}function u(){var a=c,b=c.next;if(c===b)c=null;else{var d=c.previous;c=d.next=b,b.previous=d}a.next=a.previous=null,d=a.callback,b=a.expirationTime,a=a.priorityLevel;var e=h,Q=l;h=a,l=b;try{var g=d()}finally{h=e,l=Q}if("function"==typeof g)if(g={callback:g,priorityLevel:a,expirationTime:b,next:null,previous:null},null===c)c=g.next=g.previous=g;else{d=null,a=c;do{if(a.expirationTime>=b){d=a;break}a=a.next}while(a!==c);null===d?d=c:d===c&&(c=g,p()),(b=d.previous).next=d.previous=g,g.next=d,g.previous=b}}function v(){if(-1===k&&null!==c&&1===c.priorityLevel){m=!0;try{do{u()}while(null!==c&&1===c.priorityLevel)}finally{m=!1,null!==c?p():n=!1}}}function t(a){m=!0;var b=f;f=a;try{if(a)for(;null!==c;){var d=exports.unstable_now();if(!(c.expirationTime<=d))break;do{u()}while(null!==c&&c.expirationTime<=d)}else if(null!==c)do{u()}while(null!==c&&!w())}finally{m=!1,f=b,null!==c?p():n=!1,v()}}var C,D,x=Date,y="function"==typeof setTimeout?setTimeout:void 0,z="function"==typeof clearTimeout?clearTimeout:void 0,A="function"==typeof requestAnimationFrame?requestAnimationFrame:void 0,B="function"==typeof cancelAnimationFrame?cancelAnimationFrame:void 0;function E(a){C=A(function(b){z(D),a(b)}),D=y(function(){B(C),a(exports.unstable_now())},100)}if("object"==typeof performance&&"function"==typeof performance.now){var F=performance;exports.unstable_now=function(){return F.now()}}else exports.unstable_now=function(){return x.now()};var r,q,w,G=null;if("undefined"!=typeof window?G=window:void 0!==global&&(G=global),G&&G._schedMock){var H=G._schedMock;r=H[0],q=H[1],w=H[2],exports.unstable_now=H[3]}else if("undefined"==typeof window||"function"!=typeof MessageChannel){var I=null,J=function(a){if(null!==I)try{I(a)}finally{I=null}};r=function(a){null!==I?setTimeout(r,0,a):(I=a,setTimeout(J,0,!1))},q=function(){I=null},w=function(){return!1}}else{"undefined"!=typeof console&&("function"!=typeof A&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof B&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var K=null,L=!1,M=-1,N=!1,O=!1,P=0,R=33,S=33;w=function(){return P<=exports.unstable_now()};var T=new MessageChannel,U=T.port2;T.port1.onmessage=function(){L=!1;var a=K,b=M;K=null,M=-1;var d=exports.unstable_now(),e=!1;if(0>=P-d){if(!(-1!==b&&b<=d))return N||(N=!0,E(V)),K=a,void(M=b);e=!0}if(null!==a){O=!0;try{a(e)}finally{O=!1}}};var V=function(a){if(null!==K){E(V);var b=a-P+S;b<S&&R<S?(8>b&&(b=8),S=b<R?R:b):R=b,P=a+S,L||(L=!0,U.postMessage(void 0))}else N=!1};r=function(a,b){K=a,M=b,O||0>b?U.postMessage(void 0):N||(N=!0,E(V))},q=function(){K=null,L=!1,M=-1}}exports.unstable_ImmediatePriority=1,exports.unstable_UserBlockingPriority=2,exports.unstable_NormalPriority=3,exports.unstable_IdlePriority=5,exports.unstable_LowPriority=4,exports.unstable_runWithPriority=function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var d=h,e=k;h=a,k=exports.unstable_now();try{return b()}finally{h=d,k=e,v()}},exports.unstable_scheduleCallback=function(a,b){var d=-1!==k?k:exports.unstable_now();if("object"==typeof b&&null!==b&&"number"==typeof b.timeout)b=d+b.timeout;else switch(h){case 1:b=d+-1;break;case 2:b=d+250;break;case 5:b=d+1073741823;break;case 4:b=d+1e4;break;default:b=d+5e3}if(a={callback:a,priorityLevel:h,expirationTime:b,next:null,previous:null},null===c)c=a.next=a.previous=a,p();else{d=null;var e=c;do{if(e.expirationTime>b){d=e;break}e=e.next}while(e!==c);null===d?d=c:d===c&&(c=a,p()),(b=d.previous).next=d.previous=a,a.next=d,a.previous=b}return a},exports.unstable_cancelCallback=function(a){var b=a.next;if(null!==b){if(b===a)c=null;else{a===c&&(c=b);var d=a.previous;d.next=b,b.previous=d}a.next=a.previous=null}},exports.unstable_wrapCallback=function(a){var b=h;return function(){var d=h,e=k;h=b,k=exports.unstable_now();try{return a.apply(this,arguments)}finally{h=d,k=e,v()}}},exports.unstable_getCurrentPriorityLevel=function(){return h},exports.unstable_shouldYield=function(){return!f&&(null!==c&&c.expirationTime<l||w())},exports.unstable_continueExecution=function(){null!==c&&p()},exports.unstable_pauseExecution=function(){},exports.unstable_getFirstCallbackNode=function(){return c}}).call(this,__webpack_require__(17))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stripIndents=exports.stripIndent=exports.oneLineInlineLists=exports.inlineLists=exports.oneLineCommaListsAnd=exports.oneLineCommaListsOr=exports.oneLineCommaLists=exports.oneLineTrim=exports.oneLine=exports.safeHtml=exports.source=exports.codeBlock=exports.html=exports.commaListsOr=exports.commaListsAnd=exports.commaLists=exports.removeNonPrintingValuesTransformer=exports.splitStringTransformer=exports.inlineArrayTransformer=exports.replaceStringTransformer=exports.replaceSubstitutionTransformer=exports.replaceResultTransformer=exports.stripIndentTransformer=exports.trimResultTransformer=exports.TemplateTag=void 0;var _TemplateTag3=_interopRequireDefault(__webpack_require__(29)),_trimResultTransformer3=_interopRequireDefault(__webpack_require__(30)),_stripIndentTransformer3=_interopRequireDefault(__webpack_require__(48)),_replaceResultTransformer3=_interopRequireDefault(__webpack_require__(67)),_replaceSubstitutionTransformer3=_interopRequireDefault(__webpack_require__(279)),_replaceStringTransformer3=_interopRequireDefault(__webpack_require__(552)),_inlineArrayTransformer3=_interopRequireDefault(__webpack_require__(41)),_splitStringTransformer3=_interopRequireDefault(__webpack_require__(179)),_removeNonPrintingValuesTransformer3=_interopRequireDefault(__webpack_require__(280)),_commaLists3=_interopRequireDefault(__webpack_require__(557)),_commaListsAnd3=_interopRequireDefault(__webpack_require__(559)),_commaListsOr3=_interopRequireDefault(__webpack_require__(561)),_html3=_interopRequireDefault(__webpack_require__(180)),_codeBlock3=_interopRequireDefault(__webpack_require__(564)),_source3=_interopRequireDefault(__webpack_require__(565)),_safeHtml3=_interopRequireDefault(__webpack_require__(566)),_oneLine3=_interopRequireDefault(__webpack_require__(568)),_oneLineTrim3=_interopRequireDefault(__webpack_require__(570)),_oneLineCommaLists3=_interopRequireDefault(__webpack_require__(572)),_oneLineCommaListsOr3=_interopRequireDefault(__webpack_require__(574)),_oneLineCommaListsAnd3=_interopRequireDefault(__webpack_require__(576)),_inlineLists3=_interopRequireDefault(__webpack_require__(578)),_oneLineInlineLists3=_interopRequireDefault(__webpack_require__(580)),_stripIndent3=_interopRequireDefault(__webpack_require__(582)),_stripIndents3=_interopRequireDefault(__webpack_require__(584));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.TemplateTag=_TemplateTag3.default,exports.trimResultTransformer=_trimResultTransformer3.default,exports.stripIndentTransformer=_stripIndentTransformer3.default,exports.replaceResultTransformer=_replaceResultTransformer3.default,exports.replaceSubstitutionTransformer=_replaceSubstitutionTransformer3.default,exports.replaceStringTransformer=_replaceStringTransformer3.default,exports.inlineArrayTransformer=_inlineArrayTransformer3.default,exports.splitStringTransformer=_splitStringTransformer3.default,exports.removeNonPrintingValuesTransformer=_removeNonPrintingValuesTransformer3.default,exports.commaLists=_commaLists3.default,exports.commaListsAnd=_commaListsAnd3.default,exports.commaListsOr=_commaListsOr3.default,exports.html=_html3.default,exports.codeBlock=_codeBlock3.default,exports.source=_source3.default,exports.safeHtml=_safeHtml3.default,exports.oneLine=_oneLine3.default,exports.oneLineTrim=_oneLineTrim3.default,exports.oneLineCommaLists=_oneLineCommaLists3.default,exports.oneLineCommaListsOr=_oneLineCommaListsOr3.default,exports.oneLineCommaListsAnd=_oneLineCommaListsAnd3.default,exports.inlineLists=_inlineLists3.default,exports.oneLineInlineLists=_oneLineInlineLists3.default,exports.stripIndent=_stripIndent3.default,exports.stripIndents=_stripIndents3.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var strings,raw,_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject=(strings=["",""],raw=["",""],Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}})));var TemplateTag=function(){function TemplateTag(){for(var _this=this,_len=arguments.length,transformers=Array(_len),_key=0;_key<_len;_key++)transformers[_key]=arguments[_key];return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TemplateTag),this.tag=function(strings){for(var _len2=arguments.length,expressions=Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)expressions[_key2-1]=arguments[_key2];return"function"==typeof strings?_this.interimTag.bind(_this,strings):"string"==typeof strings?_this.transformEndResult(strings):(strings=strings.map(_this.transformString.bind(_this)),_this.transformEndResult(strings.reduce(_this.processSubstitutions.bind(_this,expressions))))},transformers.length>0&&Array.isArray(transformers[0])&&(transformers=transformers[0]),this.transformers=transformers.map(function(transformer){return"function"==typeof transformer?transformer():transformer}),this.tag}return _createClass(TemplateTag,[{key:"interimTag",value:function(previousTag,template){for(var _len3=arguments.length,substitutions=Array(_len3>2?_len3-2:0),_key3=2;_key3<_len3;_key3++)substitutions[_key3-2]=arguments[_key3];return this.tag(_templateObject,previousTag.apply(void 0,[template].concat(substitutions)))}},{key:"processSubstitutions",value:function(substitutions,resultSoFar,remainingPart){var substitution=this.transformSubstitution(substitutions.shift(),resultSoFar);return"".concat(resultSoFar,substitution,remainingPart)}},{key:"transformString",value:function(str){return this.transformers.reduce(function(res,transform){return transform.onString?transform.onString(res):res},str)}},{key:"transformSubstitution",value:function(substitution,resultSoFar){return this.transformers.reduce(function(res,transform){return transform.onSubstitution?transform.onSubstitution(res,resultSoFar):res},substitution)}},{key:"transformEndResult",value:function(endResult){return this.transformers.reduce(function(res,transform){return transform.onEndResult?transform.onEndResult(res):res},endResult)}}]),TemplateTag}();exports.default=TemplateTag,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=function(){var side=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{onEndResult:function(endResult){if(""===side)return endResult.trim();if("start"===(side=side.toLowerCase())||"left"===side)return endResult.replace(/^\s*/,"");if("end"===side||"right"===side)return endResult.replace(/\s*$/,"");throw new Error("Side not supported: "+side)}}},module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=function(){var type=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"initial";return{onEndResult:function(endResult){if("initial"===type){var match=endResult.match(/^[^\S\n]*(?=\S)/gm),indent=match&&Math.min.apply(Math,function(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}(match.map(function(el){return el.length})));if(indent){var regexp=new RegExp("^.{"+indent+"}","gm");return endResult.replace(regexp,"")}return endResult}if("all"===type)return endResult.replace(/^[^\S\n]+/gm,"");throw new Error("Unknown type: "+type)}}},module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=function(replaceWhat,replaceWith){return{onEndResult:function(endResult){if(null==replaceWhat||null==replaceWith)throw new Error("replaceResultTransformer requires at least 2 arguments.");return endResult.replace(replaceWhat,replaceWith)}}},module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=function(replaceWhat,replaceWith){return{onSubstitution:function(substitution,resultSoFar){if(null==replaceWhat||null==replaceWith)throw new Error("replaceSubstitutionTransformer requires at least 2 arguments.");return null==substitution?substitution:substitution.toString().replace(replaceWhat,replaceWith)}}},module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var obj,_replaceStringTransformer=__webpack_require__(553),_replaceStringTransformer2=(obj=_replaceStringTransformer)&&obj.__esModule?obj:{default:obj};exports.default=_replaceStringTransformer2.default,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=function(replaceWhat,replaceWith){return{onString:function(str){if(null==replaceWhat||null==replaceWith)throw new Error("replaceStringTransformer requires at least 2 arguments.");return str.replace(replaceWhat,replaceWith)}}},module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var defaults={separator:"",conjunction:"",serial:!1};exports.default=function(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:defaults;return{onSubstitution:function(substitution,resultSoFar){if(Array.isArray(substitution)){var arrayLength=substitution.length,separator=opts.separator,conjunction=opts.conjunction,serial=opts.serial,indent=resultSoFar.match(/(\n?[^\S\n]+)$/);if(substitution=indent?substitution.join(separator+indent[1]):substitution.join(separator+" "),conjunction&&arrayLength>1){var separatorIndex=substitution.lastIndexOf(separator);substitution=substitution.slice(0,separatorIndex)+(serial?separator:"")+" "+conjunction+substitution.slice(separatorIndex+1)}}return substitution}}},module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=function(splitBy){return{onSubstitution:function(substitution,resultSoFar){if(null==splitBy||"string"!=typeof splitBy)throw new Error("You need to specify a string character to split by.");return"string"==typeof substitution&&substitution.includes(splitBy)&&(substitution=substitution.split(splitBy)),substitution}}},module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var isValidValue=function(x){return null!=x&&!Number.isNaN(x)&&"boolean"!=typeof x};exports.default=function(){return{onSubstitution:function(substitution){return Array.isArray(substitution)?substitution.filter(isValidValue):isValidValue(substitution)?substitution:""}}},module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var obj,_commaLists=__webpack_require__(558),_commaLists2=(obj=_commaLists)&&obj.__esModule?obj:{default:obj};exports.default=_commaLists2.default,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _TemplateTag2=_interopRequireDefault(__webpack_require__(29)),_stripIndentTransformer2=_interopRequireDefault(__webpack_require__(48)),_inlineArrayTransformer2=_interopRequireDefault(__webpack_require__(41)),_trimResultTransformer2=_interopRequireDefault(__webpack_require__(30));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var commaLists=new _TemplateTag2.default((0,_inlineArrayTransformer2.default)({separator:","}),_stripIndentTransformer2.default,_trimResultTransformer2.default);exports.default=commaLists,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var obj,_commaListsAnd=__webpack_require__(560),_commaListsAnd2=(obj=_commaListsAnd)&&obj.__esModule?obj:{default:obj};exports.default=_commaListsAnd2.default,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _TemplateTag2=_interopRequireDefault(__webpack_require__(29)),_stripIndentTransformer2=_interopRequireDefault(__webpack_require__(48)),_inlineArrayTransformer2=_interopRequireDefault(__webpack_require__(41)),_trimResultTransformer2=_interopRequireDefault(__webpack_require__(30));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var commaListsAnd=new _TemplateTag2.default((0,_inlineArrayTransformer2.default)({separator:",",conjunction:"and"}),_stripIndentTransformer2.default,_trimResultTransformer2.default);exports.default=commaListsAnd,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var obj,_commaListsOr=__webpack_require__(562),_commaListsOr2=(obj=_commaListsOr)&&obj.__esModule?obj:{default:obj};exports.default=_commaListsOr2.default,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _TemplateTag2=_interopRequireDefault(__webpack_require__(29)),_stripIndentTransformer2=_interopRequireDefault(__webpack_require__(48)),_inlineArrayTransformer2=_interopRequireDefault(__webpack_require__(41)),_trimResultTransformer2=_interopRequireDefault(__webpack_require__(30));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var commaListsOr=new _TemplateTag2.default((0,_inlineArrayTransformer2.default)({separator:",",conjunction:"or"}),_stripIndentTransformer2.default,_trimResultTransformer2.default);exports.default=commaListsOr,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _TemplateTag2=_interopRequireDefault(__webpack_require__(29)),_stripIndentTransformer2=_interopRequireDefault(__webpack_require__(48)),_inlineArrayTransformer2=_interopRequireDefault(__webpack_require__(41)),_trimResultTransformer2=_interopRequireDefault(__webpack_require__(30)),_splitStringTransformer2=_interopRequireDefault(__webpack_require__(179)),_removeNonPrintingValuesTransformer2=_interopRequireDefault(__webpack_require__(280));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var html=new _TemplateTag2.default((0,_splitStringTransformer2.default)("\n"),_removeNonPrintingValuesTransformer2.default,_inlineArrayTransformer2.default,_stripIndentTransformer2.default,_trimResultTransformer2.default);exports.default=html,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var obj,_html=__webpack_require__(180),_html2=(obj=_html)&&obj.__esModule?obj:{default:obj};exports.default=_html2.default,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var obj,_html=__webpack_require__(180),_html2=(obj=_html)&&obj.__esModule?obj:{default:obj};exports.default=_html2.default,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var obj,_safeHtml=__webpack_require__(567),_safeHtml2=(obj=_safeHtml)&&obj.__esModule?obj:{default:obj};exports.default=_safeHtml2.default,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _TemplateTag2=_interopRequireDefault(__webpack_require__(29)),_stripIndentTransformer2=_interopRequireDefault(__webpack_require__(48)),_inlineArrayTransformer2=_interopRequireDefault(__webpack_require__(41)),_trimResultTransformer2=_interopRequireDefault(__webpack_require__(30)),_splitStringTransformer2=_interopRequireDefault(__webpack_require__(179)),_replaceSubstitutionTransformer2=_interopRequireDefault(__webpack_require__(279));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var safeHtml=new _TemplateTag2.default((0,_splitStringTransformer2.default)("\n"),_inlineArrayTransformer2.default,_stripIndentTransformer2.default,_trimResultTransformer2.default,(0,_replaceSubstitutionTransformer2.default)(/&/g,"&amp;"),(0,_replaceSubstitutionTransformer2.default)(/</g,"&lt;"),(0,_replaceSubstitutionTransformer2.default)(/>/g,"&gt;"),(0,_replaceSubstitutionTransformer2.default)(/"/g,"&quot;"),(0,_replaceSubstitutionTransformer2.default)(/'/g,"&#x27;"),(0,_replaceSubstitutionTransformer2.default)(/`/g,"&#x60;"));exports.default=safeHtml,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var obj,_oneLine=__webpack_require__(569),_oneLine2=(obj=_oneLine)&&obj.__esModule?obj:{default:obj};exports.default=_oneLine2.default,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _TemplateTag2=_interopRequireDefault(__webpack_require__(29)),_trimResultTransformer2=_interopRequireDefault(__webpack_require__(30)),_replaceResultTransformer2=_interopRequireDefault(__webpack_require__(67));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var oneLine=new _TemplateTag2.default((0,_replaceResultTransformer2.default)(/(?:\n(?:\s*))+/g," "),_trimResultTransformer2.default);exports.default=oneLine,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var obj,_oneLineTrim=__webpack_require__(571),_oneLineTrim2=(obj=_oneLineTrim)&&obj.__esModule?obj:{default:obj};exports.default=_oneLineTrim2.default,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _TemplateTag2=_interopRequireDefault(__webpack_require__(29)),_trimResultTransformer2=_interopRequireDefault(__webpack_require__(30)),_replaceResultTransformer2=_interopRequireDefault(__webpack_require__(67));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var oneLineTrim=new _TemplateTag2.default((0,_replaceResultTransformer2.default)(/(?:\n\s*)/g,""),_trimResultTransformer2.default);exports.default=oneLineTrim,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var obj,_oneLineCommaLists=__webpack_require__(573),_oneLineCommaLists2=(obj=_oneLineCommaLists)&&obj.__esModule?obj:{default:obj};exports.default=_oneLineCommaLists2.default,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _TemplateTag2=_interopRequireDefault(__webpack_require__(29)),_inlineArrayTransformer2=_interopRequireDefault(__webpack_require__(41)),_trimResultTransformer2=_interopRequireDefault(__webpack_require__(30)),_replaceResultTransformer2=_interopRequireDefault(__webpack_require__(67));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var oneLineCommaLists=new _TemplateTag2.default((0,_inlineArrayTransformer2.default)({separator:","}),(0,_replaceResultTransformer2.default)(/(?:\s+)/g," "),_trimResultTransformer2.default);exports.default=oneLineCommaLists,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var obj,_oneLineCommaListsOr=__webpack_require__(575),_oneLineCommaListsOr2=(obj=_oneLineCommaListsOr)&&obj.__esModule?obj:{default:obj};exports.default=_oneLineCommaListsOr2.default,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _TemplateTag2=_interopRequireDefault(__webpack_require__(29)),_inlineArrayTransformer2=_interopRequireDefault(__webpack_require__(41)),_trimResultTransformer2=_interopRequireDefault(__webpack_require__(30)),_replaceResultTransformer2=_interopRequireDefault(__webpack_require__(67));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var oneLineCommaListsOr=new _TemplateTag2.default((0,_inlineArrayTransformer2.default)({separator:",",conjunction:"or"}),(0,_replaceResultTransformer2.default)(/(?:\s+)/g," "),_trimResultTransformer2.default);exports.default=oneLineCommaListsOr,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var obj,_oneLineCommaListsAnd=__webpack_require__(577),_oneLineCommaListsAnd2=(obj=_oneLineCommaListsAnd)&&obj.__esModule?obj:{default:obj};exports.default=_oneLineCommaListsAnd2.default,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _TemplateTag2=_interopRequireDefault(__webpack_require__(29)),_inlineArrayTransformer2=_interopRequireDefault(__webpack_require__(41)),_trimResultTransformer2=_interopRequireDefault(__webpack_require__(30)),_replaceResultTransformer2=_interopRequireDefault(__webpack_require__(67));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var oneLineCommaListsAnd=new _TemplateTag2.default((0,_inlineArrayTransformer2.default)({separator:",",conjunction:"and"}),(0,_replaceResultTransformer2.default)(/(?:\s+)/g," "),_trimResultTransformer2.default);exports.default=oneLineCommaListsAnd,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var obj,_inlineLists=__webpack_require__(579),_inlineLists2=(obj=_inlineLists)&&obj.__esModule?obj:{default:obj};exports.default=_inlineLists2.default,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _TemplateTag2=_interopRequireDefault(__webpack_require__(29)),_stripIndentTransformer2=_interopRequireDefault(__webpack_require__(48)),_inlineArrayTransformer2=_interopRequireDefault(__webpack_require__(41)),_trimResultTransformer2=_interopRequireDefault(__webpack_require__(30));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var inlineLists=new _TemplateTag2.default(_inlineArrayTransformer2.default,_stripIndentTransformer2.default,_trimResultTransformer2.default);exports.default=inlineLists,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var obj,_oneLineInlineLists=__webpack_require__(581),_oneLineInlineLists2=(obj=_oneLineInlineLists)&&obj.__esModule?obj:{default:obj};exports.default=_oneLineInlineLists2.default,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _TemplateTag2=_interopRequireDefault(__webpack_require__(29)),_inlineArrayTransformer2=_interopRequireDefault(__webpack_require__(41)),_trimResultTransformer2=_interopRequireDefault(__webpack_require__(30)),_replaceResultTransformer2=_interopRequireDefault(__webpack_require__(67));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var oneLineInlineLists=new _TemplateTag2.default(_inlineArrayTransformer2.default,(0,_replaceResultTransformer2.default)(/(?:\s+)/g," "),_trimResultTransformer2.default);exports.default=oneLineInlineLists,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var obj,_stripIndent=__webpack_require__(583),_stripIndent2=(obj=_stripIndent)&&obj.__esModule?obj:{default:obj};exports.default=_stripIndent2.default,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _TemplateTag2=_interopRequireDefault(__webpack_require__(29)),_stripIndentTransformer2=_interopRequireDefault(__webpack_require__(48)),_trimResultTransformer2=_interopRequireDefault(__webpack_require__(30));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var stripIndent=new _TemplateTag2.default(_stripIndentTransformer2.default,_trimResultTransformer2.default);exports.default=stripIndent,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var obj,_stripIndents=__webpack_require__(585),_stripIndents2=(obj=_stripIndents)&&obj.__esModule?obj:{default:obj};exports.default=_stripIndents2.default,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _TemplateTag2=_interopRequireDefault(__webpack_require__(29)),_stripIndentTransformer2=_interopRequireDefault(__webpack_require__(48)),_trimResultTransformer2=_interopRequireDefault(__webpack_require__(30));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var stripIndents=new _TemplateTag2.default((0,_stripIndentTransformer2.default)("all"),_trimResultTransformer2.default);exports.default=stripIndents,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";__webpack_require__(13),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.isPriorToFiber=exports.isValidFiberElement=void 0,__webpack_require__(82),__webpack_require__(78),__webpack_require__(40),__webpack_require__(59),__webpack_require__(127),__webpack_require__(128),__webpack_require__(587),__webpack_require__(590);var _react=_interopRequireDefault(__webpack_require__(8)),_flattenDeep=_interopRequireDefault(__webpack_require__(593));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var isValidFiberElement=function(element){return"string"==typeof element||"number"==typeof element||_react.default.isValidElement(element)};exports.isValidFiberElement=isValidFiberElement;var isPriorToFiber=function(version){var majorVersion=_slicedToArray(version.split("."),1)[0];return Number(majorVersion)<16};exports.isPriorToFiber=isPriorToFiber;var _default=function isReactRenderable(element){if(isPriorToFiber(_react.default.version))return _react.default.isValidElement(element);if(!Array.isArray(element))return isValidFiberElement(element);var elementsList=element.map(isReactRenderable);return!(0,_flattenDeep.default)(elementsList).filter(function(elementIsRenderable){return!1===elementIsRenderable}).length};exports.default=_default},function(module,exports,__webpack_require__){"use strict";var global=__webpack_require__(26),has=__webpack_require__(54),cof=__webpack_require__(65),inheritIfRequired=__webpack_require__(270),toPrimitive=__webpack_require__(120),fails=__webpack_require__(33),gOPN=__webpack_require__(164).f,gOPD=__webpack_require__(165).f,dP=__webpack_require__(34).f,$trim=__webpack_require__(588).trim,$Number=global.Number,Base=$Number,proto=$Number.prototype,BROKEN_COF="Number"==cof(__webpack_require__(99)(proto)),TRIM="trim"in String.prototype,toNumber=function(argument){var it=toPrimitive(argument,!1);if("string"==typeof it&&it.length>2){var third,radix,maxCode,first=(it=TRIM?it.trim():$trim(it,3)).charCodeAt(0);if(43===first||45===first){if(88===(third=it.charCodeAt(2))||120===third)return NaN}else if(48===first){switch(it.charCodeAt(1)){case 66:case 98:radix=2,maxCode=49;break;case 79:case 111:radix=8,maxCode=55;break;default:return+it}for(var code,digits=it.slice(2),i=0,l=digits.length;i<l;i++)if((code=digits.charCodeAt(i))<48||code>maxCode)return NaN;return parseInt(digits,radix)}}return+it};if(!$Number(" 0o1")||!$Number("0b1")||$Number("+0x1")){$Number=function(value){var it=arguments.length<1?0:value,that=this;return that instanceof $Number&&(BROKEN_COF?fails(function(){proto.valueOf.call(that)}):"Number"!=cof(that))?inheritIfRequired(new Base(toNumber(it)),that,$Number):toNumber(it)};for(var key,keys=__webpack_require__(31)?gOPN(Base):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),j=0;keys.length>j;j++)has(Base,key=keys[j])&&!has($Number,key)&&dP($Number,key,gOPD(Base,key));$Number.prototype=proto,proto.constructor=$Number,__webpack_require__(39)(global,"Number",$Number)}},function(module,exports,__webpack_require__){var $export=__webpack_require__(18),defined=__webpack_require__(98),fails=__webpack_require__(33),spaces=__webpack_require__(589),space="["+spaces+"]",ltrim=RegExp("^"+space+space+"*"),rtrim=RegExp(space+space+"*$"),exporter=function(KEY,exec,ALIAS){var exp={},FORCE=fails(function(){return!!spaces[KEY]()||"​"!="​"[KEY]()}),fn=exp[KEY]=FORCE?exec(trim):spaces[KEY];ALIAS&&(exp[ALIAS]=fn),$export($export.P+$export.F*FORCE,"String",exp)},trim=exporter.trim=function(string,TYPE){return string=String(defined(string)),1&TYPE&&(string=string.replace(ltrim,"")),2&TYPE&&(string=string.replace(rtrim,"")),string};module.exports=exporter},function(module,exports){module.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(module,exports,__webpack_require__){"use strict";var isRegExp=__webpack_require__(591),anObject=__webpack_require__(35),speciesConstructor=__webpack_require__(261),advanceStringIndex=__webpack_require__(592),toLength=__webpack_require__(81),callRegExpExec=__webpack_require__(274),regexpExec=__webpack_require__(178),$min=Math.min,$push=[].push,SUPPORTS_Y=!!function(){try{return new RegExp("x","y")}catch(e){}}();__webpack_require__(275)("split",2,function(defined,SPLIT,$split,maybeCallNative){var internalSplit;return internalSplit="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(separator,limit){var string=String(this);if(void 0===separator&&0===limit)return[];if(!isRegExp(separator))return $split.call(string,separator,limit);for(var match,lastIndex,lastLength,output=[],flags=(separator.ignoreCase?"i":"")+(separator.multiline?"m":"")+(separator.unicode?"u":"")+(separator.sticky?"y":""),lastLastIndex=0,splitLimit=void 0===limit?4294967295:limit>>>0,separatorCopy=new RegExp(separator.source,flags+"g");(match=regexpExec.call(separatorCopy,string))&&!((lastIndex=separatorCopy.lastIndex)>lastLastIndex&&(output.push(string.slice(lastLastIndex,match.index)),match.length>1&&match.index<string.length&&$push.apply(output,match.slice(1)),lastLength=match[0].length,lastLastIndex=lastIndex,output.length>=splitLimit));)separatorCopy.lastIndex===match.index&&separatorCopy.lastIndex++;return lastLastIndex===string.length?!lastLength&&separatorCopy.test("")||output.push(""):output.push(string.slice(lastLastIndex)),output.length>splitLimit?output.slice(0,splitLimit):output}:"0".split(void 0,0).length?function(separator,limit){return void 0===separator&&0===limit?[]:$split.call(this,separator,limit)}:$split,[function(separator,limit){var O=defined(this),splitter=null==separator?void 0:separator[SPLIT];return void 0!==splitter?splitter.call(separator,O,limit):internalSplit.call(String(O),separator,limit)},function(regexp,limit){var res=maybeCallNative(internalSplit,regexp,this,limit,internalSplit!==$split);if(res.done)return res.value;var rx=anObject(regexp),S=String(this),C=speciesConstructor(rx,RegExp),unicodeMatching=rx.unicode,flags=(rx.ignoreCase?"i":"")+(rx.multiline?"m":"")+(rx.unicode?"u":"")+(SUPPORTS_Y?"y":"g"),splitter=new C(SUPPORTS_Y?rx:"^(?:"+rx.source+")",flags),lim=void 0===limit?4294967295:limit>>>0;if(0===lim)return[];if(0===S.length)return null===callRegExpExec(splitter,S)?[S]:[];for(var p=0,q=0,A=[];q<S.length;){splitter.lastIndex=SUPPORTS_Y?q:0;var e,z=callRegExpExec(splitter,SUPPORTS_Y?S:S.slice(q));if(null===z||(e=$min(toLength(splitter.lastIndex+(SUPPORTS_Y?0:q)),S.length))===p)q=advanceStringIndex(S,q,unicodeMatching);else{if(A.push(S.slice(p,q)),A.length===lim)return A;for(var i=1;i<=z.length-1;i++)if(A.push(z[i]),A.length===lim)return A;q=p=e}}return A.push(S.slice(p)),A}]})},function(module,exports,__webpack_require__){var isObject=__webpack_require__(28),cof=__webpack_require__(65),MATCH=__webpack_require__(22)("match");module.exports=function(it){var isRegExp;return isObject(it)&&(void 0!==(isRegExp=it[MATCH])?!!isRegExp:"RegExp"==cof(it))}},function(module,exports,__webpack_require__){"use strict";var at=__webpack_require__(255)(!0);module.exports=function(S,index,unicode){return index+(unicode?at(S,index).length:1)}},function(module,exports,__webpack_require__){var baseFlatten=__webpack_require__(594),INFINITY=1/0;module.exports=function(array){return null!=array&&array.length?baseFlatten(array,INFINITY):[]}},function(module,exports,__webpack_require__){var arrayPush=__webpack_require__(595),isFlattenable=__webpack_require__(596);module.exports=function baseFlatten(array,depth,predicate,isStrict,result){var index=-1,length=array.length;for(predicate||(predicate=isFlattenable),result||(result=[]);++index<length;){var value=array[index];depth>0&&predicate(value)?depth>1?baseFlatten(value,depth-1,predicate,isStrict,result):arrayPush(result,value):isStrict||(result[result.length]=value)}return result}},function(module,exports){module.exports=function(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(181),isArguments=__webpack_require__(599),isArray=__webpack_require__(604),spreadableSymbol=Symbol?Symbol.isConcatSpreadable:void 0;module.exports=function(value){return isArray(value)||isArguments(value)||!!(spreadableSymbol&&value&&value[spreadableSymbol])}},function(module,exports,__webpack_require__){var freeGlobal=__webpack_require__(598),freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();module.exports=root},function(module,exports,__webpack_require__){(function(global){var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global;module.exports=freeGlobal}).call(this,__webpack_require__(17))},function(module,exports,__webpack_require__){var baseIsArguments=__webpack_require__(600),isObjectLike=__webpack_require__(281),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,propertyIsEnumerable=objectProto.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")};module.exports=isArguments},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(601),isObjectLike=__webpack_require__(281),argsTag="[object Arguments]";module.exports=function(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(181),getRawTag=__webpack_require__(602),objectToString=__webpack_require__(603),nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol?Symbol.toStringTag:void 0;module.exports=function(value){return null==value?void 0===value?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(181),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=Symbol?Symbol.toStringTag:void 0;module.exports=function(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=void 0;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}},function(module,exports){var nativeObjectToString=Object.prototype.toString;module.exports=function(value){return nativeObjectToString.call(value)}},function(module,exports){var isArray=Array.isArray;module.exports=isArray},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=function(){},exports.withOptions=exports.setOptions=void 0,__webpack_require__(45),__webpack_require__(59),__webpack_require__(40),__webpack_require__(46),__webpack_require__(60),__webpack_require__(13),__webpack_require__(171),__webpack_require__(173);var obj,_utilDeprecate=(obj=__webpack_require__(260))&&obj.__esModule?obj:{default:obj},_addons=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}(__webpack_require__(168)),_shared=__webpack_require__(606);function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function withRegexProp(object,propName){return function(object,propName){return Object.prototype.hasOwnProperty.call(object,propName)}(object,propName)?_defineProperty({},propName,"string"==typeof(exp=object[propName])?exp:"[object RegExp]"===Object.prototype.toString.call(exp)?exp.source:null):{};var exp}function emitOptions(options){var channel=_addons.default.getChannel();if(!channel)throw new Error("Failed to find addon channel. This may be due to https://github.com/storybooks/storybook/issues/1192.");channel.emit(_shared.EVENT_ID,{options:_objectSpread({},options,withRegexProp(options,"hierarchySeparator"),withRegexProp(options,"hierarchyRootSeparator"))})}var globalOptions={},setOptions=(0,_utilDeprecate.default)(function(options){globalOptions=options,emitOptions(options)},"`setOptions(options)` is deprecated. Please use the `withOptions(options)` decorator globally.");exports.setOptions=setOptions;var withOptions=(0,_addons.makeDecorator)({name:"withOptions",parameterName:"options",skipIfNoParametersOrOptions:!1,wrapper:function(getStory,context,_ref2){var inputOptions=_ref2.options,parameters=_ref2.parameters;return emitOptions(_objectSpread({},globalOptions,inputOptions,parameters)),getStory(context)}});exports.withOptions=withOptions},function(module,exports,__webpack_require__){"use strict";__webpack_require__(13),Object.defineProperty(exports,"__esModule",{value:!0}),exports.EVENT_ID=exports.ADDON_ID=void 0;var ADDON_ID="storybooks/storybook-addon-options";exports.ADDON_ID=ADDON_ID;var EVENT_ID="".concat(ADDON_ID,"/options-event");exports.EVENT_ID=EVENT_ID},,function(module,exports,__webpack_require__){"use strict";var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=__webpack_require__(84),React=__importStar(__webpack_require__(8)),Disc_1=__importDefault(__webpack_require__(386)),styles={outer:{display:"flex",flexDirection:"column"},item:{outer:{display:"flex",flexDirection:"row",padding:"3px 0",alignItems:"center"},caption:{marginLeft:2}}};exports.default=function(_a){var diff=_a.diff,colors=_a.colors,aboutEqualText=_a.aboutEqualText,moreOutgoingText=_a.moreOutgoingText,moreIncomingText=_a.moreIncomingText,colorsRGBA=diff?core_1.getDiffColorsRGBA(colors):core_1.getColorsRGBA(colors),pos=core_1.isDiffColorsRGBA(colorsRGBA)?colorsRGBA.positive.locationCircles:colorsRGBA.locationCircles,neg=core_1.isDiffColorsRGBA(colorsRGBA)?colorsRGBA.negative.locationCircles:void 0;return React.createElement("div",{style:styles.outer},React.createElement("div",null,React.createElement("div",{style:styles.item.outer},React.createElement(Disc_1.default,{size:20,inner:pos.inner,outer:pos.inner,outline:pos.inner}),neg&&React.createElement(Disc_1.default,{size:20,inner:neg.inner,outer:neg.inner,outline:neg.inner}),React.createElement("div",{style:styles.item.caption},aboutEqualText||"outgoing ≅ incoming")),React.createElement("div",{style:styles.item.outer},React.createElement(Disc_1.default,{size:20,inner:pos.inner,outer:pos.outgoing,outline:pos.inner}),neg&&React.createElement(Disc_1.default,{size:20,inner:neg.inner,outer:neg.outgoing,outline:neg.inner}),React.createElement("div",{style:styles.item.caption},moreOutgoingText||"more outgoing")),React.createElement("div",{style:styles.item.outer},React.createElement(Disc_1.default,{size:20,inner:pos.inner,outer:pos.incoming,outline:pos.incoming}),neg&&React.createElement(Disc_1.default,{size:20,inner:neg.inner,outer:neg.incoming,outline:neg.incoming}),React.createElement("div",{style:styles.item.caption},moreIncomingText||"more incoming"))))}},function(module,exports,__webpack_require__){"use strict";(function(process,global){var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.document=exports.global=exports.window=exports.isBrowser=void 0;var _typeof2=_interopRequireDefault(__webpack_require__(27)),isBrowser="object"!==(void 0===process?"undefined":(0,_typeof2.default)(process))||"[object process]"!==String(process)||process.browser;exports.isBrowser=isBrowser;var window_="undefined"!=typeof window?window:global;exports.window=window_;var global_=void 0!==global?global:window;exports.global=global_;var document_="undefined"!=typeof document?document:{};exports.document=document_}).call(this,__webpack_require__(44),__webpack_require__(17))},function(module,exports,__webpack_require__){"use strict";__webpack_require__(103).global.probe={}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.isMobile=function(){return void 0!==_globals.window.orientation},exports.default=function(mockUserAgent){if(!mockUserAgent&&!(0,_isBrowser.default)())return"Node";if((0,_isElectron.default)(mockUserAgent))return"Electron";var navigator_="undefined"!=typeof navigator?navigator:{},userAgent=mockUserAgent||navigator_.userAgent||"";if(userAgent.indexOf("Edge")>-1)return"Edge";var isMSIE=-1!==userAgent.indexOf("MSIE "),isTrident=-1!==userAgent.indexOf("Trident/");if(isMSIE||isTrident)return"IE";if(_globals.window.chrome)return"Chrome";if(_globals.window.safari)return"Safari";if(_globals.window.mozInnerScreenX)return"Firefox";return"Unknown"};var _globals=__webpack_require__(185),_isBrowser=_interopRequireDefault(__webpack_require__(183)),_isElectron=_interopRequireDefault(__webpack_require__(184))},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_stat=_interopRequireDefault(__webpack_require__(613)),Stats=function(){function Stats(_ref){var id=_ref.id;(0,_classCallCheck2.default)(this,Stats),this.id=id,this.stats={},Object.seal(this)}return(0,_createClass2.default)(Stats,[{key:"get",value:function(name){return this.stats[name]=this.stats[name]||new _stat.default(name),this.stats[name]}},{key:"reset",value:function(){for(var key in this.stats)this.stats[key].reset();return this}},{key:"forEach",value:function(fn){for(var key in this.stats)fn(this.stats[key])}},{key:"getTable",value:function(){var table={};return this.forEach(function(stat){table[stat.name]={time:stat.time||0,count:stat.count||0,average:stat.getAverageTime()||0,hz:stat.getHz()||0}}),table}}]),Stats}();exports.default=Stats},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_hiResTimestamp=_interopRequireDefault(__webpack_require__(186)),Stat=function(){function Stat(name){(0,_classCallCheck2.default)(this,Stat),this.name=name,this.reset()}return(0,_createClass2.default)(Stat,[{key:"incrementCount",value:function(){this.addCount(1)}},{key:"decrementCount",value:function(){this.subtractCount(1)}},{key:"addCount",value:function(value){this.count+=value}},{key:"subtractCount",value:function(value){this.count-=value}},{key:"addTime",value:function(time){this.time+=time,this.lastTiming=time,this.count++}},{key:"timeStart",value:function(){this._startTime=(0,_hiResTimestamp.default)(),this._timerPending=!0}},{key:"timeEnd",value:function(){this._timerPending&&(this.addTime((0,_hiResTimestamp.default)()-this._startTime),this._timerPending=!1)}},{key:"getAverageTime",value:function(){return this.count>0?this.time/this.count:0}},{key:"getHz",value:function(){return this.time>0?this.count/(this.time/1e3):0}},{key:"reset",value:function(){this.time=0,this.count=0,this.lastTiming=0,this._startTime=0,this._timerPending=!1}}]),Stat}();exports.default=Stat},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _typeof2=_interopRequireDefault(__webpack_require__(27)),_toConsumableArray2=_interopRequireDefault(__webpack_require__(49)),_defineProperty2=_interopRequireDefault(__webpack_require__(6)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_globals=__webpack_require__(103),_localStorage=_interopRequireDefault(__webpack_require__(286)),_formatters=__webpack_require__(287),_color=__webpack_require__(288),_autobind=__webpack_require__(289),_assert2=_interopRequireDefault(__webpack_require__(285)),_hiResTimestamp=_interopRequireDefault(__webpack_require__(186)),originalConsole={debug:_globals.isBrowser&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},DEFAULT_SETTINGS={enabled:!1,priority:0};function noop(){}var cache={};var Log=function(){function Log(){var id=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id;(0,_classCallCheck2.default)(this,Log),this.id=id,this.VERSION=_globals.VERSION,this._startTs=(0,_hiResTimestamp.default)(),this._deltaTs=(0,_hiResTimestamp.default)(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new _localStorage.default("__probe-".concat(this.id,"__"),DEFAULT_SETTINGS),this.userData={},this.timeStamp("".concat(this.id," started")),(0,_autobind.autobind)(this),Object.seal(this)}return(0,_createClass2.default)(Log,[{key:"isEnabled",value:function(){return this._storage.config.enabled}},{key:"getPriority",value:function(){return this._storage.config.priority}},{key:"getLevel",value:function(){return this._storage.config.priority}},{key:"getTotal",value:function(){return Number(((0,_hiResTimestamp.default)()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function(){return Number(((0,_hiResTimestamp.default)()-this._deltaTs).toPrecision(10))}},{key:"enable",value:function(){var enabled=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.updateConfiguration({enabled:enabled}),this}},{key:"setLevel",value:function(level){return this._storage.updateConfiguration({priority:level}),this}},{key:"assert",value:function(condition,message){(0,_assert2.default)(condition,message)}},{key:"warn",value:function(message){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];return this._getLogFunction({message:message,args:args,method:originalConsole.warn,once:!0})}},{key:"error",value:function(message){for(var _len2=arguments.length,args=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)args[_key2-1]=arguments[_key2];return this._getLogFunction({message:message,args:args,method:originalConsole.error})}},{key:"deprecated",value:function(oldUsage,newUsage){return this.warn("`".concat(oldUsage,"` is deprecated and will be removed in a later version. Use `").concat(newUsage,"` instead"))}},{key:"removed",value:function(oldUsage,newUsage){return this.error("`".concat(oldUsage,"` has been removed. Use `").concat(newUsage,"` instead"))}},{key:"probe",value:function(priority,message){for(var _len3=arguments.length,args=new Array(_len3>2?_len3-2:0),_key3=2;_key3<_len3;_key3++)args[_key3-2]=arguments[_key3];return this._getLogFunction({priority:priority,message:message,args:args,method:originalConsole.log,time:!0,once:!0})}},{key:"log",value:function(priority,message){for(var _len4=arguments.length,args=new Array(_len4>2?_len4-2:0),_key4=2;_key4<_len4;_key4++)args[_key4-2]=arguments[_key4];return this._getLogFunction({priority:priority,message:message,args:args,method:originalConsole.debug})}},{key:"info",value:function(priority,message){for(var _len5=arguments.length,args=new Array(_len5>2?_len5-2:0),_key5=2;_key5<_len5;_key5++)args[_key5-2]=arguments[_key5];return this._getLogFunction({priority:priority,message:message,args:args,method:console.info})}},{key:"once",value:function(priority,message){for(var _len6=arguments.length,args=new Array(_len6>2?_len6-2:0),_key6=2;_key6<_len6;_key6++)args[_key6-2]=arguments[_key6];return this._getLogFunction({priority:priority,message:message,args:args,method:originalConsole.debug||originalConsole.info,once:!0})}},{key:"table",value:function(priority,_table,columns){if(_table){var tag=function(table){for(var key in table)for(var title in table[key])return title||"untitled";return"empty"}(_table);return this._getLogFunction({priority:priority,message:_table,args:columns&&[columns],tag:tag,method:console.table||noop})}return noop}},{key:"image",value:function(_ref2){var priority=_ref2.priority,_image=_ref2.image,_ref2$message=_ref2.message,message=void 0===_ref2$message?"":_ref2$message,_ref2$scale=_ref2.scale,scale=void 0===_ref2$scale?1:_ref2$scale;return priority>this.getPriority()?noop:_globals.isBrowser?this._logImageInBrowser({image:_image,message:message,scale:scale}):this._logImageInNode({image:_image,message:message,scale:scale})}},{key:"settings",value:function(){console.table?console.table(this._storage.config):console.log(this._storage.config)}},{key:"get",value:function(setting){return this._storage.config[setting]}},{key:"set",value:function(setting,value){this._storage.updateConfiguration((0,_defineProperty2.default)({},setting,value))}},{key:"_logImageInNode",value:function(_ref3){var image=_ref3.image,_ref3$scale=(_ref3.message,_ref3.scale),scale=void 0===_ref3$scale?1:_ref3$scale,asciify=null;try{asciify=__webpack_require__(618)}catch(error){}return asciify?function(){return asciify(image,{fit:"box",width:"".concat(Math.round(80*scale),"%")}).then(function(data){return console.log(data)})}:noop}},{key:"_logImageInBrowser",value:function(_ref4){var image=_ref4.image,_ref4$message=_ref4.message,message=void 0===_ref4$message?"":_ref4$message,_ref4$scale=_ref4.scale,scale=void 0===_ref4$scale?1:_ref4$scale;if("string"==typeof image){var img=new Image;return img.onload=function(){var _console,args=(0,_formatters.formatImage)(img,message,scale);(_console=console).log.apply(_console,(0,_toConsumableArray2.default)(args))},img.src=image,noop}var _console2,element=image.nodeName||"";if("img"===element.toLowerCase())return(_console2=console).log.apply(_console2,(0,_toConsumableArray2.default)((0,_formatters.formatImage)(image,message,scale))),noop;if("canvas"===element.toLowerCase()){var _img=new Image;return _img.onload=function(){var _console3;return(_console3=console).log.apply(_console3,(0,_toConsumableArray2.default)((0,_formatters.formatImage)(_img,message,scale)))},_img.src=image.toDataURL(),noop}return noop}},{key:"time",value:function(priority,message){return this._getLogFunction({priority:priority,message:message,method:console.time?console.time:console.info})}},{key:"timeEnd",value:function(priority,message){return this._getLogFunction({priority:priority,message:message,method:console.timeEnd?console.timeEnd:console.info})}},{key:"timeStamp",value:function(priority,message){return this._getLogFunction({priority:priority,message:message,method:console.timeStamp||noop})}},{key:"group",value:function(priority,message){var opts=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1},collapsed=(opts=this._normalizeArguments({priority:priority,message:message,opts:opts})).collapsed;return this._getLogFunction({priority:priority,message:message,opts:opts,method:(collapsed?console.groupCollapsed:console.group)||console.info})}},{key:"groupCollapsed",value:function(priority,message){var opts=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(priority,message,Object.assign({},opts,{collapsed:!0}))}},{key:"groupEnd",value:function(priority){return this._getLogFunction({priority:priority,message:"",method:console.groupEnd||noop})}},{key:"withGroup",value:function(priority,message,func){var opts=this._normalizeArguments({priority:priority,message:message});this.group(opts);try{func()}finally{this.groupEnd(opts.message)}}},{key:"trace",value:function(){console.trace&&console.trace()}},{key:"_shouldLog",value:function(priority){return 0===(priority=this._normalizePriority(priority))||this.isEnabled()&&this.getPriority()>=priority}},{key:"_getElapsedTime",value:function(){var total=this.getTotal(),delta=this.getDelta();return this._deltaTs=(0,_hiResTimestamp.default)(),{total:total,delta:delta}}},{key:"_getLogFunction",value:function(opts){if(this._shouldLog(opts.priority)){var method=opts.method;opts=this._parseArguments(opts),(0,_assert2.default)(method);var message=opts.message,tag=opts.tag||opts.message;if(opts.once){if(cache[tag])return noop;cache[tag]=(0,_hiResTimestamp.default)()}return message=this._decorateMessage(message,opts),method.bind.apply(method,[console,message].concat((0,_toConsumableArray2.default)(opts.args)))}return noop}},{key:"_parseArguments",value:function(options){var normOpts=this._normalizeArguments(options),_this$_getElapsedTime=this._getElapsedTime(),delta=_this$_getElapsedTime.delta,total=_this$_getElapsedTime.total;return Object.assign(options,normOpts,{delta:delta,total:total})}},{key:"_normalizePriority",value:function(priority){var resolvedPriority;switch((0,_typeof2.default)(priority)){case"number":resolvedPriority=priority;break;case"object":resolvedPriority=priority.priority||0;break;default:resolvedPriority=0}return(0,_assert2.default)(Number.isFinite(resolvedPriority)&&resolvedPriority>=0),resolvedPriority}},{key:"_normalizeArguments",value:function(_ref5){var priority=_ref5.priority,message=_ref5.message,_ref5$args=_ref5.args,args=void 0===_ref5$args?[]:_ref5$args,opts=_ref5.opts,newOpts={priority:this._normalizePriority(priority),message:message,args:args};switch((0,_typeof2.default)(priority)){case"string":case"function":void 0!==message&&args.unshift(message),Object.assign(newOpts,{message:priority});break;case"object":Object.assign(newOpts,priority)}return"function"==typeof newOpts.message&&(newOpts.message=this._shouldLog(newOpts.priority)?newOpts.message():""),(0,_assert2.default)("string"==typeof newOpts.message||"object"===(0,_typeof2.default)(newOpts.message)),Object.assign(newOpts,opts)}},{key:"_decorateMessage",value:function(message,opts){if("string"==typeof message){var time="";if(opts.time){var total=this._getElapsedTime().total;time=(0,_formatters.leftPad)((0,_formatters.formatTime)(total))}message=opts.time?"".concat(this.id,": ").concat(time,"  ").concat(message):"".concat(this.id,": ").concat(message),message=(0,_color.addColor)(message,opts.color,opts.background)}return message}},{key:"priority",set:function(newPriority){return this._storage.updateConfiguration({priority:newPriority}),this},get:function(){return this._storage.config.priority}}]),Log}();exports.default=Log,Log.VERSION=_globals.VERSION},function(module,exports){module.exports=function(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}},function(module,exports){module.exports=function(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}},function(module,exports){module.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},,function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.initializeShaderModules=initializeShaderModules,Object.defineProperty(exports,"fp32",{enumerable:!0,get:function(){return _core.fp32}}),Object.defineProperty(exports,"fp64",{enumerable:!0,get:function(){return _core.fp64}}),Object.defineProperty(exports,"picking",{enumerable:!0,get:function(){return _core.picking}}),Object.defineProperty(exports,"gouraudlighting",{enumerable:!0,get:function(){return _core.gouraudlighting}}),Object.defineProperty(exports,"phonglighting",{enumerable:!0,get:function(){return _core.phonglighting}}),Object.defineProperty(exports,"project",{enumerable:!0,get:function(){return _project.default}}),Object.defineProperty(exports,"project64",{enumerable:!0,get:function(){return _project3.default}});var _core=__webpack_require__(7),_project=_interopRequireDefault(__webpack_require__(139)),_project2=_interopRequireDefault(__webpack_require__(724)),_project3=_interopRequireDefault(__webpack_require__(330));function initializeShaderModules(){(0,_core.registerShaderModules)([_core.fp32,_core.fp64,_project.default,_project2.default,_project3.default,_core.gouraudlighting,_core.phonglighting,_core.picking]),(0,_core.setDefaultShaderModules)([_project.default])}initializeShaderModules()},function(module,exports,__webpack_require__){"use strict";(function(process){var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _typeof2=_interopRequireDefault(__webpack_require__(27));var _default="undefined"!=typeof window&&"object"===(0,_typeof2.default)(window.process)&&"renderer"===window.process.type||!(void 0===process||"object"!==(0,_typeof2.default)(process.versions)||!Boolean(process.versions.electron))||"object"===("undefined"==typeof navigator?"undefined":(0,_typeof2.default)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0;exports.default=_default}).call(this,__webpack_require__(44))},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"polyfillContext",{enumerable:!0,get:function(){return _polyfillContext.default}}),Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return _polyfillContext.default}});var _polyfillContext=_interopRequireDefault(__webpack_require__(622))},function(module,exports,__webpack_require__){"use strict";(function(global){var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=polyfillContext;var _assert=_interopRequireDefault(__webpack_require__(291)),_polyfillTable=__webpack_require__(623);function polyfillContext(gl){return gl.luma=gl.luma||{},function(gl){gl.luma.extensions={};var EXTENSIONS=gl.getSupportedExtensions()||[],_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=EXTENSIONS[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var extension=_step.value;gl.luma[extension]=gl.getExtension(extension)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}(gl),gl.luma.polyfilled||(!function(gl,polyfills){var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=Object.getOwnPropertyNames(polyfills)[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var extension=_step2.value;"overrides"!==extension&&polyfillExtension(gl,{extension:extension,target:gl.luma,target2:gl})}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}(gl,_polyfillTable.WEBGL2_CONTEXT_POLYFILLS),function(gl,_ref){var target=_ref.target,target2=_ref.target2;Object.keys(_polyfillTable.WEBGL2_CONTEXT_OVERRIDES).forEach(function(key){if("function"==typeof _polyfillTable.WEBGL2_CONTEXT_OVERRIDES[key]){var originalFunc=gl[key]?gl[key].bind(gl):function(){},polyfill=_polyfillTable.WEBGL2_CONTEXT_OVERRIDES[key].bind(null,gl,originalFunc);target[key]=polyfill,target2[key]=polyfill}})}(gl,{target:gl.luma,target2:gl}),gl.luma.polyfilled=!0),gl}function polyfillExtension(gl,_ref2){var extension=_ref2.extension,target=_ref2.target,target2=_ref2.target2,defaults=_polyfillTable.WEBGL2_CONTEXT_POLYFILLS[extension];(0,_assert.default)(defaults);for(var _defaults$meta=defaults.meta,_meta$suffix=(void 0===_defaults$meta?{}:_defaults$meta).suffix,suffix=void 0===_meta$suffix?"":_meta$suffix,ext=gl.getExtension(extension),_loop=function(){var key=_Object$keys[_i],extKey="".concat(key).concat(suffix),polyfill=null;"meta"===key||"function"==typeof gl[key]||(ext&&"function"==typeof ext[extKey]?polyfill=function(){return ext[extKey].apply(ext,arguments)}:"function"==typeof defaults[key]&&(polyfill=defaults[key].bind(target))),polyfill&&(target[key]=polyfill,target2[key]=polyfill)},_i=0,_Object$keys=Object.keys(defaults);_i<_Object$keys.length;_i++)_loop()}(void 0!==global?global:window).polyfillContext=polyfillContext}).call(this,__webpack_require__(17))},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.WEBGL2_CONTEXT_OVERRIDES=exports.WEBGL2_CONTEXT_POLYFILLS=void 0;var _WEBGL2_CONTEXT_POLYF,_defineProperty2=_interopRequireDefault(__webpack_require__(6)),_assert=_interopRequireDefault(__webpack_require__(291)),_getParameterPolyfill=__webpack_require__(624);function isWebGL2(gl){return Boolean(gl&&2===gl._version)}var WEBGL2_CONTEXT_POLYFILLS=(_WEBGL2_CONTEXT_POLYF={},(0,_defineProperty2.default)(_WEBGL2_CONTEXT_POLYF,"OES_vertex_array_object",{meta:{suffix:"OES"},createVertexArray:function(){(0,_assert.default)(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:function(){},bindVertexArray:function(){},isVertexArray:function(){return!1}}),(0,_defineProperty2.default)(_WEBGL2_CONTEXT_POLYF,"ANGLE_instanced_arrays",{meta:{suffix:"ANGLE"},vertexAttribDivisor:function(location,divisor){(0,_assert.default)(0===divisor,"WebGL instanced rendering not supported")},drawElementsInstanced:function(){},drawArraysInstanced:function(){}}),(0,_defineProperty2.default)(_WEBGL2_CONTEXT_POLYF,"WEBGL_draw_buffers",{meta:{suffix:"WEBGL"},drawBuffers:function(){(0,_assert.default)(!1)}}),(0,_defineProperty2.default)(_WEBGL2_CONTEXT_POLYF,"EXT_disjoint_timer_query",{meta:{suffix:"EXT"},createQuery:function(){(0,_assert.default)(!1)},deleteQuery:function(){(0,_assert.default)(!1)},beginQuery:function(){(0,_assert.default)(!1)},endQuery:function(){},getQuery:function(handle,pname){return this.getQueryObject(handle,pname)},getQueryParameter:function(handle,pname){return this.getQueryObject(handle,pname)},getQueryObject:function(){}}),_WEBGL2_CONTEXT_POLYF);exports.WEBGL2_CONTEXT_POLYFILLS=WEBGL2_CONTEXT_POLYFILLS;var WEBGL2_CONTEXT_OVERRIDES={readBuffer:function(gl,originalFunc,attachment){isWebGL2(gl)&&originalFunc(attachment)},getVertexAttrib:function(gl,originalFunc,location,pname){var result,_getExtensionData=function(gl,extension){return{webgl2:isWebGL2(gl),ext:gl.getExtension(extension)}}(gl,"ANGLE_instanced_arrays"),webgl2=_getExtensionData.webgl2,ext=_getExtensionData.ext;switch(pname){case 35069:result=!!webgl2&&void 0;break;case 35070:result=webgl2||ext?void 0:0}return void 0!==result?result:originalFunc(location,pname)},getProgramParameter:function(gl,originalFunc,program,pname){if(!isWebGL2(gl))switch(pname){case 35967:return 35981;case 35971:case 35382:return 0}return originalFunc(program,pname)},getInternalformatParameter:function(gl,originalFunc,target,format,pname){if(!isWebGL2(gl))switch(pname){case 32937:return new Int32Array([0])}return gl.getInternalformatParameter(target,format,pname)},getTexParameter:function(gl,originalFunc,target,pname){switch(pname){case 34046:var ext=gl.luma.extensions.EXT_texture_filter_anisotropic;pname=ext&&ext.TEXTURE_MAX_ANISOTROPY_EXT||34046}return originalFunc(target,pname)},getParameter:_getParameterPolyfill.getParameterPolyfill,hint:function(gl,originalFunc,pname,value){return originalFunc(pname,value)}};exports.WEBGL2_CONTEXT_OVERRIDES=WEBGL2_CONTEXT_OVERRIDES},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.getParameterPolyfill=function(gl,originalGetParameter,pname){var limit=WEBGL_PARAMETERS[pname],value="function"==typeof limit?limit(gl,originalGetParameter,pname):limit;return void 0!==value?value:originalGetParameter(pname)};var _WEBGL_PARAMETERS,_defineProperty2=_interopRequireDefault(__webpack_require__(6)),getWebGL2ValueOrZero=function(gl){return isWebGL2(gl)?void 0:0},WEBGL_PARAMETERS=(_WEBGL_PARAMETERS={},(0,_defineProperty2.default)(_WEBGL_PARAMETERS,3074,function(gl){return isWebGL2(gl)?void 0:36064}),(0,_defineProperty2.default)(_WEBGL_PARAMETERS,35723,function(gl){return isWebGL2(gl)?void 0:4352}),(0,_defineProperty2.default)(_WEBGL_PARAMETERS,35977,getWebGL2ValueOrZero),(0,_defineProperty2.default)(_WEBGL_PARAMETERS,32937,getWebGL2ValueOrZero),(0,_defineProperty2.default)(_WEBGL_PARAMETERS,36795,function(gl,getParameter){var ext=isWebGL2(gl)?gl.getExtension("EXT_disjoint_timer_query_webgl2"):gl.getExtension("EXT_disjoint_timer_query");return ext&&ext.GPU_DISJOINT_EXT?getParameter(ext.GPU_DISJOINT_EXT):0}),(0,_defineProperty2.default)(_WEBGL_PARAMETERS,37445,function(gl,getParameter){var ext=gl.getExtension("WEBGL_debug_renderer_info");return getParameter(ext&&ext.UNMASKED_VENDOR_WEBGL||7936)}),(0,_defineProperty2.default)(_WEBGL_PARAMETERS,37446,function(gl,getParameter){var ext=gl.getExtension("WEBGL_debug_renderer_info");return getParameter(ext&&ext.UNMASKED_RENDERER_WEBGL||7937)}),(0,_defineProperty2.default)(_WEBGL_PARAMETERS,34047,function(gl,getParameter){var ext=gl.luma.extensions.EXT_texture_filter_anisotropic;return ext?getParameter(ext.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1}),(0,_defineProperty2.default)(_WEBGL_PARAMETERS,32883,getWebGL2ValueOrZero),(0,_defineProperty2.default)(_WEBGL_PARAMETERS,35071,getWebGL2ValueOrZero),(0,_defineProperty2.default)(_WEBGL_PARAMETERS,37447,getWebGL2ValueOrZero),(0,_defineProperty2.default)(_WEBGL_PARAMETERS,36063,function(gl,getParameter){if(!isWebGL2(gl)){var ext=gl.getExtension("WEBGL_draw_buffers");return ext?getParameter(ext.MAX_COLOR_ATTACHMENTS_WEBGL):0}}),(0,_defineProperty2.default)(_WEBGL_PARAMETERS,35379,getWebGL2ValueOrZero),(0,_defineProperty2.default)(_WEBGL_PARAMETERS,35374,getWebGL2ValueOrZero),(0,_defineProperty2.default)(_WEBGL_PARAMETERS,35377,getWebGL2ValueOrZero),(0,_defineProperty2.default)(_WEBGL_PARAMETERS,34852,function(gl){if(!isWebGL2(gl)){var ext=gl.getExtension("WEBGL_draw_buffers");return ext?ext.MAX_DRAW_BUFFERS_WEBGL:0}}),(0,_defineProperty2.default)(_WEBGL_PARAMETERS,36203,function(gl){return gl.getExtension("OES_element_index")?2147483647:65535}),(0,_defineProperty2.default)(_WEBGL_PARAMETERS,33001,function(gl){return gl.getExtension("OES_element_index")?16777216:65535}),(0,_defineProperty2.default)(_WEBGL_PARAMETERS,33e3,function(gl){return 16777216}),(0,_defineProperty2.default)(_WEBGL_PARAMETERS,37157,getWebGL2ValueOrZero),(0,_defineProperty2.default)(_WEBGL_PARAMETERS,35373,getWebGL2ValueOrZero),(0,_defineProperty2.default)(_WEBGL_PARAMETERS,35657,getWebGL2ValueOrZero),(0,_defineProperty2.default)(_WEBGL_PARAMETERS,36183,getWebGL2ValueOrZero),(0,_defineProperty2.default)(_WEBGL_PARAMETERS,37137,getWebGL2ValueOrZero),(0,_defineProperty2.default)(_WEBGL_PARAMETERS,34045,getWebGL2ValueOrZero),(0,_defineProperty2.default)(_WEBGL_PARAMETERS,35978,getWebGL2ValueOrZero),(0,_defineProperty2.default)(_WEBGL_PARAMETERS,35979,getWebGL2ValueOrZero),(0,_defineProperty2.default)(_WEBGL_PARAMETERS,35968,getWebGL2ValueOrZero),(0,_defineProperty2.default)(_WEBGL_PARAMETERS,35376,getWebGL2ValueOrZero),(0,_defineProperty2.default)(_WEBGL_PARAMETERS,35375,getWebGL2ValueOrZero),(0,_defineProperty2.default)(_WEBGL_PARAMETERS,35659,getWebGL2ValueOrZero),(0,_defineProperty2.default)(_WEBGL_PARAMETERS,37154,getWebGL2ValueOrZero),(0,_defineProperty2.default)(_WEBGL_PARAMETERS,35371,getWebGL2ValueOrZero),(0,_defineProperty2.default)(_WEBGL_PARAMETERS,35658,getWebGL2ValueOrZero),(0,_defineProperty2.default)(_WEBGL_PARAMETERS,35076,getWebGL2ValueOrZero),(0,_defineProperty2.default)(_WEBGL_PARAMETERS,35077,getWebGL2ValueOrZero),(0,_defineProperty2.default)(_WEBGL_PARAMETERS,35380,getWebGL2ValueOrZero),_WEBGL_PARAMETERS);function isWebGL2(gl){return Boolean(gl&&2===gl._version)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(condition,message){if(!condition)throw new Error(message||"luma.gl: assertion failed.")}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isObjectEmpty=function(object){for(var key in object)return!1;return!0},exports.isWebGL2=function(gl){return Boolean(gl&&2===gl._version)}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _slicedToArray2=_interopRequireDefault(__webpack_require__(11)),_toConsumableArray2=_interopRequireDefault(__webpack_require__(49));function isArray(array){return Array.isArray(array)||ArrayBuffer.isView(array)}var _default={framebuffer:function(gl,_framebuffer){var handle=_framebuffer&&"handle"in _framebuffer?_framebuffer.handle:_framebuffer;return gl.bindFramebuffer(36160,handle)},blend:function(gl,value){return value?gl.enable(3042):gl.disable(3042)},blendColor:function(gl,value){return gl.blendColor.apply(gl,(0,_toConsumableArray2.default)(value))},blendEquation:function(gl,args){args=isArray(args)?args:[args,args],gl.blendEquationSeparate.apply(gl,(0,_toConsumableArray2.default)(args))},blendFunc:function(gl,args){args=isArray(args)&&2===args.length?[].concat((0,_toConsumableArray2.default)(args),(0,_toConsumableArray2.default)(args)):args,gl.blendFuncSeparate.apply(gl,(0,_toConsumableArray2.default)(args))},clearColor:function(gl,value){return gl.clearColor.apply(gl,(0,_toConsumableArray2.default)(value))},clearDepth:function(gl,value){return gl.clearDepth(value)},clearStencil:function(gl,value){return gl.clearStencil(value)},colorMask:function(gl,value){return gl.colorMask.apply(gl,(0,_toConsumableArray2.default)(value))},cull:function(gl,value){return value?gl.enable(2884):gl.disable(2884)},cullFace:function(gl,value){return gl.cullFace(value)},depthTest:function(gl,value){return value?gl.enable(2929):gl.disable(2929)},depthFunc:function(gl,value){return gl.depthFunc(value)},depthMask:function(gl,value){return gl.depthMask(value)},depthRange:function(gl,value){return gl.depthRange.apply(gl,(0,_toConsumableArray2.default)(value))},dither:function(gl,value){return value?gl.enable(3024):gl.disable(3024)},derivativeHint:function(gl,value){gl.hint(35723,value)},frontFace:function(gl,value){return gl.frontFace(value)},mipmapHint:function(gl,value){return gl.hint(33170,value)},lineWidth:function(gl,value){return gl.lineWidth(value)},polygonOffsetFill:function(gl,value){return value?gl.enable(32823):gl.disable(32823)},polygonOffset:function(gl,value){return gl.polygonOffset.apply(gl,(0,_toConsumableArray2.default)(value))},sampleCoverage:function(gl,value){return gl.sampleCoverage.apply(gl,(0,_toConsumableArray2.default)(value))},scissorTest:function(gl,value){return value?gl.enable(3089):gl.disable(3089)},scissor:function(gl,value){return gl.scissor.apply(gl,(0,_toConsumableArray2.default)(value))},stencilTest:function(gl,value){return value?gl.enable(2960):gl.disable(2960)},stencilMask:function(gl,value){var _value=value=isArray(value)?value:[value,value],_value2=(0,_slicedToArray2.default)(_value,2),mask=_value2[0],backMask=_value2[1];gl.stencilMaskSeparate(1028,mask),gl.stencilMaskSeparate(1029,backMask)},stencilFunc:function(gl,args){var _args=args=isArray(args)&&3===args.length?[].concat((0,_toConsumableArray2.default)(args),(0,_toConsumableArray2.default)(args)):args,_args2=(0,_slicedToArray2.default)(_args,6),func=_args2[0],ref=_args2[1],mask=_args2[2],backFunc=_args2[3],backRef=_args2[4],backMask=_args2[5];gl.stencilFuncSeparate(1028,func,ref,mask),gl.stencilFuncSeparate(1029,backFunc,backRef,backMask)},stencilOp:function(gl,args){var _args3=args=isArray(args)&&3===args.length?[].concat((0,_toConsumableArray2.default)(args),(0,_toConsumableArray2.default)(args)):args,_args4=(0,_slicedToArray2.default)(_args3,6),sfail=_args4[0],dpfail=_args4[1],dppass=_args4[2],backSfail=_args4[3],backDpfail=_args4[4],backDppass=_args4[5];gl.stencilOpSeparate(1028,sfail,dpfail,dppass),gl.stencilOpSeparate(1029,backSfail,backDpfail,backDppass)},viewport:function(gl,value){return gl.viewport.apply(gl,(0,_toConsumableArray2.default)(value))}};exports.default=_default},function(module,exports){module.exports=function(arr){if(Array.isArray(arr))return arr}},function(module,exports){module.exports=function(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}},function(module,exports){module.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(6)),_default={enable:function(update,capability){return update((0,_defineProperty2.default)({},capability,!0))},disable:function(update,capability){return update((0,_defineProperty2.default)({},capability,!1))},pixelStorei:function(update,pname,value){return update((0,_defineProperty2.default)({},pname,value))},hint:function(update,pname,_hint){return update((0,_defineProperty2.default)({},pname,_hint))},bindFramebuffer:function(update,target,framebuffer){var _update5;switch(target){case 36160:return update((_update5={},(0,_defineProperty2.default)(_update5,36006,framebuffer),(0,_defineProperty2.default)(_update5,36010,framebuffer),_update5));case 36009:return update((0,_defineProperty2.default)({},36006,framebuffer));case 36008:return update((0,_defineProperty2.default)({},36010,framebuffer));default:return null}},blendColor:function(update,r,g,b,a){return update((0,_defineProperty2.default)({},32773,new Float32Array([r,g,b,a])))},blendEquation:function(update,mode){var _update9;return update((_update9={},(0,_defineProperty2.default)(_update9,32777,mode),(0,_defineProperty2.default)(_update9,34877,mode),_update9))},blendEquationSeparate:function(update,modeRGB,modeAlpha){var _update10;return update((_update10={},(0,_defineProperty2.default)(_update10,32777,modeRGB),(0,_defineProperty2.default)(_update10,34877,modeAlpha),_update10))},blendFunc:function(update,src,dst){var _update11;return update((_update11={},(0,_defineProperty2.default)(_update11,32969,src),(0,_defineProperty2.default)(_update11,32968,dst),(0,_defineProperty2.default)(_update11,32971,src),(0,_defineProperty2.default)(_update11,32970,dst),_update11))},blendFuncSeparate:function(update,srcRGB,dstRGB,srcAlpha,dstAlpha){var _update12;return update((_update12={},(0,_defineProperty2.default)(_update12,32969,srcRGB),(0,_defineProperty2.default)(_update12,32968,dstRGB),(0,_defineProperty2.default)(_update12,32971,srcAlpha),(0,_defineProperty2.default)(_update12,32970,dstAlpha),_update12))},clearColor:function(update,r,g,b,a){return update((0,_defineProperty2.default)({},3106,new Float32Array([r,g,b,a])))},clearDepth:function(update,depth){return update((0,_defineProperty2.default)({},2931,depth))},clearStencil:function(update,s){return update((0,_defineProperty2.default)({},2961,s))},colorMask:function(update,r,g,b,a){return update((0,_defineProperty2.default)({},3107,[r,g,b,a]))},cullFace:function(update,mode){return update((0,_defineProperty2.default)({},2885,mode))},depthFunc:function(update,func){return update((0,_defineProperty2.default)({},2932,func))},depthRange:function(update,zNear,zFar){return update((0,_defineProperty2.default)({},2928,new Float32Array([zNear,zFar])))},depthMask:function(update,mask){return update((0,_defineProperty2.default)({},2930,mask))},frontFace:function(update,face){return update((0,_defineProperty2.default)({},2886,face))},lineWidth:function(update,width){return update((0,_defineProperty2.default)({},2849,width))},polygonOffset:function(update,factor,units){var _update23;return update((_update23={},(0,_defineProperty2.default)(_update23,32824,factor),(0,_defineProperty2.default)(_update23,10752,units),_update23))},sampleCoverage:function(update,value,invert){var _update24;return update((_update24={},(0,_defineProperty2.default)(_update24,32938,value),(0,_defineProperty2.default)(_update24,32939,invert),_update24))},scissor:function(update,x,y,width,height){return update((0,_defineProperty2.default)({},3088,new Int32Array([x,y,width,height])))},stencilMask:function(update,mask){var _update26;return update((_update26={},(0,_defineProperty2.default)(_update26,2968,mask),(0,_defineProperty2.default)(_update26,36005,mask),_update26))},stencilMaskSeparate:function(update,face,mask){return update((0,_defineProperty2.default)({},1028===face?2968:36005,mask))},stencilFunc:function(update,func,ref,mask){var _update28;return update((_update28={},(0,_defineProperty2.default)(_update28,2962,func),(0,_defineProperty2.default)(_update28,2967,ref),(0,_defineProperty2.default)(_update28,2963,mask),(0,_defineProperty2.default)(_update28,34816,func),(0,_defineProperty2.default)(_update28,36003,ref),(0,_defineProperty2.default)(_update28,36004,mask),_update28))},stencilFuncSeparate:function(update,face,func,ref,mask){var _update29;return update((_update29={},(0,_defineProperty2.default)(_update29,1028===face?2962:34816,func),(0,_defineProperty2.default)(_update29,1028===face?2967:36003,ref),(0,_defineProperty2.default)(_update29,1028===face?2963:36004,mask),_update29))},stencilOp:function(update,fail,zfail,zpass){var _update30;return update((_update30={},(0,_defineProperty2.default)(_update30,2964,fail),(0,_defineProperty2.default)(_update30,2965,zfail),(0,_defineProperty2.default)(_update30,2966,zpass),(0,_defineProperty2.default)(_update30,34817,fail),(0,_defineProperty2.default)(_update30,34818,zfail),(0,_defineProperty2.default)(_update30,34819,zpass),_update30))},stencilOpSeparate:function(update,face,fail,zfail,zpass){var _update31;return update((_update31={},(0,_defineProperty2.default)(_update31,1028===face?2964:34817,fail),(0,_defineProperty2.default)(_update31,1028===face?2965:34818,zfail),(0,_defineProperty2.default)(_update31,1028===face?2966:34819,zpass),_update31))},viewport:function(update,x,y,width,height){return update((0,_defineProperty2.default)({},2978,new Int32Array([x,y,width,height])))}};exports.default=_default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.withParameters=function(gl,parameters,func){if((0,_utils.isObjectEmpty)(parameters))return func(gl);var value,_parameters$nocatch=parameters.nocatch,nocatch=void 0===_parameters$nocatch||_parameters$nocatch;if((0,_utils.assert)(!parameters.frameBuffer),(0,_trackContextState.pushContextState)(gl),(0,_setParameters.setParameters)(gl,parameters),nocatch)value=func(gl),(0,_trackContextState.popContextState)(gl);else try{value=func(gl)}finally{(0,_trackContextState.popContextState)(gl)}return value};var _trackContextState=__webpack_require__(295),_setParameters=__webpack_require__(294),_utils=__webpack_require__(131)},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createHeadlessContext=function(options){var width=options.width,height=options.height,webgl1=options.webgl1,webgl2=options.webgl2,onError=options.onError;if(webgl2&&!webgl1)return onError("headless-gl does not support WebGL2");if(!_webglTypes.headlessGL)return onError(ERR_HEADLESSGL_NOT_AVAILABLE);var gl=(0,_webglTypes.headlessGL)(width,height,options);if(!gl)return onError(ERR_HEADLESSGL_FAILED);return gl};var _webglTypes=__webpack_require__(188),ERR_HEADLESSGL_NOT_AVAILABLE="Failed to create WebGL context in Node.js, headless gl not available",ERR_HEADLESSGL_FAILED="Failed to create WebGL context in Node.js, headless gl returned null"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},navigator=_globals.window.navigator||{},userAgent=opts.userAgent||navigator.userAgent||"",isMSIE=-1!==userAgent.indexOf("MSIE "),isTrident=-1!==userAgent.indexOf("Trident/");return isMSIE||isTrident};var _globals=__webpack_require__(104)},function(module,exports,__webpack_require__){"use strict";function formatValue(v){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_opts$isInteger=opts.isInteger,isInteger=void 0!==_opts$isInteger&&_opts$isInteger;if(Array.isArray(v)||ArrayBuffer.isView(v))return function(v,opts){for(var _opts$maxElts=opts.maxElts,maxElts=void 0===_opts$maxElts?16:_opts$maxElts,_opts$size=opts.size,size=void 0===_opts$size?1:_opts$size,string="[",i=0;i<v.length&&i<maxElts;++i)i>0&&(string+=",".concat(i%size==0?" ":"")),string+=formatValue(v[i],opts);var terminator=v.length>maxElts?"...":"]";return"".concat(string).concat(terminator)}(v,opts);if(!Number.isFinite(v))return String(v);if(Math.abs(v)<1e-16)return isInteger?"0":"0.";if(isInteger)return v.toFixed(0);if(Math.abs(v)>100&&Math.abs(v)<1e4)return v.toFixed(0);var string=v.toPrecision(2);return string.indexOf(".0")===string.length-2?string.slice(0,-1):string}Object.defineProperty(exports,"__esModule",{value:!0}),exports.formatValue=formatValue},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.stubRemovedMethods=function(instance,className,version,methodNames){var upgradeMessage="See luma.gl ".concat(version," Upgrade Guide at http://uber.github.io/luma.gl/#/documentation/overview/upgrade-guide"),prototype=Object.getPrototypeOf(instance);methodNames.forEach(function(methodName){prototype.methodName||(prototype[methodName]=function(){throw _log.default.removed("Calling removed method ".concat(className,".").concat(methodName,": "),upgradeMessage)(),new Error(methodName)})})};var _log=_interopRequireDefault(__webpack_require__(105))},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkProps=function(className,props,propChecks){var _propChecks$removedPr=propChecks.removedProps,removedProps=void 0===_propChecks$removedPr?{}:_propChecks$removedPr,_propChecks$deprecate=propChecks.deprecatedProps,deprecatedProps=void 0===_propChecks$deprecate?{}:_propChecks$deprecate,_propChecks$replacedP=propChecks.replacedProps,replacedProps=void 0===_propChecks$replacedP?{}:_propChecks$replacedP;for(var propName in removedProps)if(propName in props){var replacementProp=removedProps[propName],replacement=replacementProp?"".concat(className,".").concat(removedProps[propName]):"N/A";_log.default.removed("".concat(className,".").concat(propName),replacement)()}for(var _propName in deprecatedProps)if(_propName in props){var _replacementProp=deprecatedProps[_propName];_log.default.deprecated("".concat(className,".").concat(_propName),"".concat(className,".").concat(_replacementProp))()}var newProps=null;for(var _propName2 in replacedProps)if(_propName2 in props){var _replacementProp2=replacedProps[_propName2];_log.default.deprecated("".concat(className,".").concat(_propName2),"".concat(className,".").concat(_replacementProp2))(),(newProps=newProps||Object.assign({},props))[_replacementProp2]=props[_propName2],delete newProps[_propName2]}return newProps||props};var _log=_interopRequireDefault(__webpack_require__(105))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createBrowserContext=function(canvas,options){var _options$onError=options.onError,onError=void 0===_options$onError?function(message){return null}:_options$onError,onCreateError=function(error){return onError("WebGL context: ".concat(error.statusMessage||"error"))};canvas.addEventListener("webglcontextcreationerror",onCreateError,!1);var _options$webgl=options.webgl1,webgl1=void 0===_options$webgl||_options$webgl,_options$webgl2=options.webgl2,webgl2=void 0===_options$webgl2||_options$webgl2,gl=null;webgl2&&(gl=(gl=gl||canvas.getContext("webgl2",options))||canvas.getContext("experimental-webgl2",options));webgl1&&(gl=(gl=gl||canvas.getContext("webgl",options))||canvas.getContext("experimental-webgl",options));if(canvas.removeEventListener("webglcontextcreationerror",onCreateError,!1),!gl)return onError("Failed to create ".concat(webgl2&&!webgl1?"WebGL2":"WebGL"," context"));return gl}},function(module,exports,__webpack_require__){var setPrototypeOf=__webpack_require__(302);function _construct(Parent,args,Class){return!function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?module.exports=_construct=function(Parent,args,Class){var a=[null];a.push.apply(a,args);var instance=new(Function.bind.apply(Parent,a));return Class&&setPrototypeOf(instance,Class.prototype),instance}:module.exports=_construct=Reflect.construct,_construct.apply(null,arguments)}module.exports=_construct},function(module,exports,__webpack_require__){var g=function(){return this||"object"==typeof self&&self}()||Function("return this")(),hadRuntime=g.regeneratorRuntime&&Object.getOwnPropertyNames(g).indexOf("regeneratorRuntime")>=0,oldRuntime=hadRuntime&&g.regeneratorRuntime;if(g.regeneratorRuntime=void 0,module.exports=__webpack_require__(232),hadRuntime)g.regeneratorRuntime=oldRuntime;else try{delete g.regeneratorRuntime}catch(e){g.regeneratorRuntime=void 0}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _$33190$36012$,_defineProperty2=_interopRequireDefault(__webpack_require__(6)),EXT_FLOAT_WEBGL2="EXT_color_buffer_float",_default=(_$33190$36012$={},(0,_defineProperty2.default)(_$33190$36012$,33189,{bpp:2}),(0,_defineProperty2.default)(_$33190$36012$,33190,{gl2:!0,bpp:3}),(0,_defineProperty2.default)(_$33190$36012$,36012,{gl2:!0,bpp:4}),(0,_defineProperty2.default)(_$33190$36012$,36168,{bpp:1}),(0,_defineProperty2.default)(_$33190$36012$,34041,{bpp:4}),(0,_defineProperty2.default)(_$33190$36012$,35056,{gl2:!0,bpp:4}),(0,_defineProperty2.default)(_$33190$36012$,36013,{gl2:!0,bpp:5}),(0,_defineProperty2.default)(_$33190$36012$,32854,{bpp:2}),(0,_defineProperty2.default)(_$33190$36012$,36194,{bpp:2}),(0,_defineProperty2.default)(_$33190$36012$,32855,{bpp:2}),(0,_defineProperty2.default)(_$33190$36012$,33321,{gl2:!0,bpp:1}),(0,_defineProperty2.default)(_$33190$36012$,33330,{gl2:!0,bpp:1}),(0,_defineProperty2.default)(_$33190$36012$,33329,{gl2:!0,bpp:1}),(0,_defineProperty2.default)(_$33190$36012$,33332,{gl2:!0,bpp:2}),(0,_defineProperty2.default)(_$33190$36012$,33331,{gl2:!0,bpp:2}),(0,_defineProperty2.default)(_$33190$36012$,33334,{gl2:!0,bpp:4}),(0,_defineProperty2.default)(_$33190$36012$,33333,{gl2:!0,bpp:4}),(0,_defineProperty2.default)(_$33190$36012$,33323,{gl2:!0,bpp:2}),(0,_defineProperty2.default)(_$33190$36012$,33336,{gl2:!0,bpp:2}),(0,_defineProperty2.default)(_$33190$36012$,33335,{gl2:!0,bpp:2}),(0,_defineProperty2.default)(_$33190$36012$,33338,{gl2:!0,bpp:4}),(0,_defineProperty2.default)(_$33190$36012$,33337,{gl2:!0,bpp:4}),(0,_defineProperty2.default)(_$33190$36012$,33340,{gl2:!0,bpp:8}),(0,_defineProperty2.default)(_$33190$36012$,33339,{gl2:!0,bpp:8}),(0,_defineProperty2.default)(_$33190$36012$,32849,{gl2:!0,bpp:3}),(0,_defineProperty2.default)(_$33190$36012$,32856,{gl2:!0,bpp:4}),(0,_defineProperty2.default)(_$33190$36012$,32857,{gl2:!0,bpp:4}),(0,_defineProperty2.default)(_$33190$36012$,36220,{gl2:!0,bpp:4}),(0,_defineProperty2.default)(_$33190$36012$,36238,{gl2:!0,bpp:4}),(0,_defineProperty2.default)(_$33190$36012$,36975,{gl2:!0,bpp:4}),(0,_defineProperty2.default)(_$33190$36012$,36214,{gl2:!0,bpp:8}),(0,_defineProperty2.default)(_$33190$36012$,36232,{gl2:!0,bpp:8}),(0,_defineProperty2.default)(_$33190$36012$,36226,{gl2:!0,bpp:16}),(0,_defineProperty2.default)(_$33190$36012$,36208,{gl2:!0,bpp:16}),(0,_defineProperty2.default)(_$33190$36012$,33325,{gl2:EXT_FLOAT_WEBGL2,bpp:2}),(0,_defineProperty2.default)(_$33190$36012$,33327,{gl2:EXT_FLOAT_WEBGL2,bpp:4}),(0,_defineProperty2.default)(_$33190$36012$,34842,{gl2:EXT_FLOAT_WEBGL2,bpp:8}),(0,_defineProperty2.default)(_$33190$36012$,33326,{gl2:EXT_FLOAT_WEBGL2,bpp:4}),(0,_defineProperty2.default)(_$33190$36012$,33328,{gl2:EXT_FLOAT_WEBGL2,bpp:8}),(0,_defineProperty2.default)(_$33190$36012$,34836,{gl2:EXT_FLOAT_WEBGL2,bpp:16}),(0,_defineProperty2.default)(_$33190$36012$,35898,{gl2:EXT_FLOAT_WEBGL2,bpp:4}),_$33190$36012$);exports.default=_default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.glFormatToComponents=function(format){switch(format){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return(0,_utils.assert)(!1),0}},exports.glTypeToBytes=function(type){switch(type){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return(0,_utils.assert)(!1),0}};var _utils=__webpack_require__(10)},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _$33901$3379$,_defineProperty2=_interopRequireDefault(__webpack_require__(6)),_default=(_$33901$3379$={},(0,_defineProperty2.default)(_$33901$3379$,33902,{gl1:new Float32Array([1,1])}),(0,_defineProperty2.default)(_$33901$3379$,33901,{gl1:new Float32Array([1,1])}),(0,_defineProperty2.default)(_$33901$3379$,3379,{gl1:64,gl2:2048}),(0,_defineProperty2.default)(_$33901$3379$,34076,{gl1:16}),(0,_defineProperty2.default)(_$33901$3379$,34930,{gl1:8}),(0,_defineProperty2.default)(_$33901$3379$,35661,{gl1:8}),(0,_defineProperty2.default)(_$33901$3379$,35660,{gl1:0}),(0,_defineProperty2.default)(_$33901$3379$,34024,{gl1:1}),(0,_defineProperty2.default)(_$33901$3379$,36348,{gl1:8}),(0,_defineProperty2.default)(_$33901$3379$,34921,{gl1:8}),(0,_defineProperty2.default)(_$33901$3379$,36347,{gl1:128}),(0,_defineProperty2.default)(_$33901$3379$,36349,{gl1:16}),(0,_defineProperty2.default)(_$33901$3379$,3386,{gl1:new Int32Array([0,0])}),(0,_defineProperty2.default)(_$33901$3379$,32883,{gl1:0,gl2:256}),(0,_defineProperty2.default)(_$33901$3379$,35071,{gl1:0,gl2:256}),(0,_defineProperty2.default)(_$33901$3379$,37447,{gl1:0,gl2:0}),(0,_defineProperty2.default)(_$33901$3379$,36063,{gl1:0,gl2:4}),(0,_defineProperty2.default)(_$33901$3379$,35379,{gl1:0,gl2:0}),(0,_defineProperty2.default)(_$33901$3379$,35374,{gl1:0,gl2:0}),(0,_defineProperty2.default)(_$33901$3379$,35377,{gl1:0,gl2:0}),(0,_defineProperty2.default)(_$33901$3379$,34852,{gl1:0,gl2:4}),(0,_defineProperty2.default)(_$33901$3379$,36203,{gl1:0,gl2:0}),(0,_defineProperty2.default)(_$33901$3379$,33001,{gl1:0,gl2:0}),(0,_defineProperty2.default)(_$33901$3379$,33e3,{gl1:0,gl2:0}),(0,_defineProperty2.default)(_$33901$3379$,37157,{gl1:0,gl2:0}),(0,_defineProperty2.default)(_$33901$3379$,35373,{gl1:0,gl2:0}),(0,_defineProperty2.default)(_$33901$3379$,35657,{gl1:0,gl2:0}),(0,_defineProperty2.default)(_$33901$3379$,36183,{gl1:0,gl2:0}),(0,_defineProperty2.default)(_$33901$3379$,37137,{gl1:0,gl2:0}),(0,_defineProperty2.default)(_$33901$3379$,34045,{gl1:0,gl2:0}),(0,_defineProperty2.default)(_$33901$3379$,35978,{gl1:0,gl2:0}),(0,_defineProperty2.default)(_$33901$3379$,35979,{gl1:0,gl2:0}),(0,_defineProperty2.default)(_$33901$3379$,35968,{gl1:0,gl2:0}),(0,_defineProperty2.default)(_$33901$3379$,35376,{gl1:0,gl2:0}),(0,_defineProperty2.default)(_$33901$3379$,35375,{gl1:0,gl2:0}),(0,_defineProperty2.default)(_$33901$3379$,35659,{gl1:0,gl2:0}),(0,_defineProperty2.default)(_$33901$3379$,37154,{gl1:0,gl2:0}),(0,_defineProperty2.default)(_$33901$3379$,35371,{gl1:0,gl2:0}),(0,_defineProperty2.default)(_$33901$3379$,35658,{gl1:0,gl2:0}),(0,_defineProperty2.default)(_$33901$3379$,35076,{gl1:0,gl2:-8,negative:!0}),(0,_defineProperty2.default)(_$33901$3379$,35077,{gl1:0,gl2:7}),(0,_defineProperty2.default)(_$33901$3379$,35380,{gl1:0,gl2:0}),_$33901$3379$);exports.default=_default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},navigator="undefined"!=typeof window&&window.navigator||{},userAgent=opts.userAgent||navigator.userAgent||"",isMSIE=-1!==userAgent.indexOf("MSIE "),isTrident=-1!==userAgent.indexOf("Trident/");return isMSIE||isTrident}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0),_interopRequireWildcard=__webpack_require__(9);Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"formatGLSLCompilerError",{enumerable:!0,get:function(){return _formatGlslError.default}}),Object.defineProperty(exports,"parseGLSLCompilerError",{enumerable:!0,get:function(){return _formatGlslError.parseGLSLCompilerError}}),Object.defineProperty(exports,"getShaderName",{enumerable:!0,get:function(){return _getShaderName.default}}),Object.defineProperty(exports,"getShaderVersion",{enumerable:!0,get:function(){return _getShaderVersion.default}}),Object.defineProperty(exports,"getShaderTypeName",{enumerable:!0,get:function(){return _getShaderTypeName.default}});var _formatGlslError=_interopRequireWildcard(__webpack_require__(648)),_getShaderName=_interopRequireDefault(__webpack_require__(195)),_getShaderVersion=_interopRequireDefault(__webpack_require__(315)),_getShaderTypeName=_interopRequireDefault(__webpack_require__(314))},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(errLog,src,shaderType){var _parseGLSLCompilerErr=parseGLSLCompilerError(errLog,src,shaderType),shaderName=_parseGLSLCompilerErr.shaderName,errors=_parseGLSLCompilerErr.errors,warnings=_parseGLSLCompilerErr.warnings;return"GLSL compilation error in ".concat(shaderName,"\n\n").concat(errors,"\n").concat(warnings)},exports.parseGLSLCompilerError=parseGLSLCompilerError;var _getShaderName=_interopRequireDefault(__webpack_require__(195)),_getShaderTypeName=_interopRequireDefault(__webpack_require__(314));function parseGLSLCompilerError(errLog,src,shaderType,shaderName){for(var errorStrings=errLog.split(/\r?\n/),errors={},warnings={},name=shaderName||(0,_getShaderName.default)(src)||"(unnamed)",shaderDescription="".concat((0,_getShaderTypeName.default)(shaderType)," shader ").concat(name),i=0;i<errorStrings.length;i++){var errorString=errorStrings[i];if(!(errorString.length<=1)){var segments=errorString.split(":"),type=segments[0],line=parseInt(segments[2],10);if(isNaN(line))throw new Error("GLSL compilation error in ".concat(shaderDescription,": ").concat(errLog));"WARNING"!==type?errors[line]=errorString:warnings[line]=errorString}}var lines=function(string){var start=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,delim=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ",lines=string.split(/\r?\n/),maxDigits=String(lines.length+start-1).length;return lines.map(function(line,i){var lineNumber=i+start,digits=String(lineNumber).length,prefix=padLeft(lineNumber,maxDigits-digits);return prefix+delim+line})}(src);return{shaderName:shaderDescription,errors:formatErrors(errors,lines),warnings:formatErrors(warnings,lines)}}function formatErrors(errors,lines){for(var message="",i=0;i<lines.length;i++){var line=lines[i];if((errors[i+3]||errors[i+2]||errors[i+1])&&(message+="".concat(line,"\n"),errors[i+1])){var error=errors[i+1],segments=error.split(":",3),type=segments[0],column=parseInt(segments[1],10)||0,err=error.substring(segments.join(":").length+1).trim();message+=padLeft("^^^ ".concat(type,": ").concat(err,"\n\n"),column)}}return message}function padLeft(string,digits){for(var result="",i=0;i<digits;++i)result+=" ";return"".concat(result).concat(string)}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_assertThisInitialized2=_interopRequireDefault(__webpack_require__(12)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_get2=_interopRequireDefault(__webpack_require__(16)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_resource=_interopRequireDefault(__webpack_require__(50)),_texture=_interopRequireDefault(__webpack_require__(86)),_framebuffer=_interopRequireDefault(__webpack_require__(107)),_uniforms=__webpack_require__(316),_shader=__webpack_require__(313),_programConfiguration=_interopRequireDefault(__webpack_require__(651)),_context=__webpack_require__(106),_webglUtils=__webpack_require__(14),_attributeUtils=__webpack_require__(108),_utils=__webpack_require__(10),V6_DEPRECATED_METHODS=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"],Program=function(_Resource){function Program(gl){var _this,props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,_classCallCheck2.default)(this,Program),(_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Program).call(this,gl,props))).stubRemovedMethods("Program","v6.0",V6_DEPRECATED_METHODS),_this._isCached=!1,_this.initialize(props),Object.seal((0,_assertThisInitialized2.default)(_this)),_this._setId(props.id),_this}return(0,_inherits2.default)(Program,_Resource),(0,_createClass2.default)(Program,[{key:"initialize",value:function(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},vs=props.vs,fs=props.fs,varyings=props.varyings,_props$bufferMode=props.bufferMode,bufferMode=void 0===_props$bufferMode?35981:_props$bufferMode;return this.vs="string"==typeof vs?new _shader.VertexShader(this.gl,{id:"".concat(props.id,"-vs"),source:vs}):vs,this.fs="string"==typeof fs?new _shader.FragmentShader(this.gl,{id:"".concat(props.id,"-fs"),source:fs}):fs,(0,_utils.assert)(this.vs instanceof _shader.VertexShader),(0,_utils.assert)(this.fs instanceof _shader.FragmentShader),this.uniforms={},varyings&&((0,_webglUtils.assertWebGL2Context)(this.gl),this.varyings=varyings,this.gl.transformFeedbackVaryings(this.handle,varyings,bufferMode)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new _programConfiguration.default(this),this.setProps(props)}},{key:"delete",value:function(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:(0,_get2.default)((0,_getPrototypeOf2.default)(Program.prototype),"delete",this).call(this,options)}},{key:"setProps",value:function(props){return"uniforms"in props&&this.setUniforms(props.uniforms),this}},{key:"draw",value:function(_ref){var _this2=this,logPriority=_ref.logPriority,_ref$drawMode=_ref.drawMode,drawMode=void 0===_ref$drawMode?4:_ref$drawMode,vertexCount=_ref.vertexCount,_ref$offset=_ref.offset,offset=void 0===_ref$offset?0:_ref$offset,start=_ref.start,end=_ref.end,_ref$isIndexed=_ref.isIndexed,isIndexed=void 0!==_ref$isIndexed&&_ref$isIndexed,_ref$indexType=_ref.indexType,indexType=void 0===_ref$indexType?5123:_ref$indexType,_ref$isInstanced=_ref.isInstanced,isInstanced=void 0!==_ref$isInstanced&&_ref$isInstanced,_ref$instanceCount=_ref.instanceCount,instanceCount=void 0===_ref$instanceCount?0:_ref$instanceCount,_ref$vertexArray=_ref.vertexArray,vertexArray=void 0===_ref$vertexArray?null:_ref$vertexArray,transformFeedback=_ref.transformFeedback,framebuffer=_ref.framebuffer,_ref$parameters=_ref.parameters,parameters=void 0===_ref$parameters?{}:_ref$parameters,uniforms=_ref.uniforms,samplers=_ref.samplers;if((uniforms||samplers)&&(_utils.log.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(uniforms||{})),void 0!==logPriority){var fb=framebuffer?framebuffer.id:"default",message="mode=".concat((0,_webglUtils.getKey)(this.gl,drawMode)," verts=").concat(vertexCount," ")+"instances=".concat(instanceCount," indexType=").concat((0,_webglUtils.getKey)(this.gl,indexType)," ")+"isInstanced=".concat(isInstanced," isIndexed=").concat(isIndexed," ")+"Framebuffer=".concat(fb);_utils.log.log(logPriority,message)()}return(0,_utils.assert)(vertexArray),this.gl.useProgram(this.handle),!!this._areTexturesRenderable()&&(vertexArray.bindForDraw(vertexCount,instanceCount,function(){if(void 0!==framebuffer&&(parameters=Object.assign({},parameters,{framebuffer:framebuffer})),transformFeedback){var primitiveMode=(0,_attributeUtils.getPrimitiveDrawMode)(drawMode);transformFeedback.begin(primitiveMode)}_this2._bindTextures(),(0,_context.withParameters)(_this2.gl,parameters,function(){isIndexed&&isInstanced?_this2.gl.drawElementsInstanced(drawMode,vertexCount,indexType,offset,instanceCount):isIndexed&&(0,_webglUtils.isWebGL2)(_this2.gl)&&!isNaN(start)&&!isNaN(end)?_this2.gl.drawRangeElements(drawMode,start,end,vertexCount,indexType,offset):isIndexed?_this2.gl.drawElements(drawMode,vertexCount,indexType,offset):isInstanced?_this2.gl.drawArraysInstanced(drawMode,offset,vertexCount,instanceCount):_this2.gl.drawArrays(drawMode,offset,vertexCount)}),transformFeedback&&transformFeedback.end()}),!0)}},{key:"setUniforms",value:function(){var uniforms=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_onChangeCallback=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},somethingChanged=!1,changedUniforms={};for(var key in uniforms)(0,_uniforms.areUniformsEqual)(this.uniforms[key],uniforms[key])||(somethingChanged=!0,changedUniforms[key]=uniforms[key],this.uniforms[key]=(0,_uniforms.getUniformCopy)(uniforms[key]));return somethingChanged&&(_onChangeCallback(),(0,_uniforms.checkUniformValues)(changedUniforms,this.id,this._uniformSetters),this._setUniforms(changedUniforms)),this}},{key:"reset",value:function(){}},{key:"_areTexturesRenderable",value:function(){var texturesRenderable=!0;for(var uniformName in this.uniforms){var uniformSetter=this._uniformSetters[uniformName];if(uniformSetter&&void 0!==uniformSetter.textureIndex){var uniform=this.uniforms[uniformName];if(uniform instanceof _framebuffer.default)uniform=uniform.texture;if(uniform instanceof _texture.default)texturesRenderable=texturesRenderable&&uniform.loaded}}return texturesRenderable}},{key:"_bindTextures",value:function(){for(var uniformName in this.uniforms){var uniformSetter=this._uniformSetters[uniformName];if(uniformSetter&&void 0!==uniformSetter.textureIndex){var uniform=this.uniforms[uniformName];if(uniform instanceof _framebuffer.default&&(uniform=uniform.texture),uniform instanceof _texture.default)uniform.bind(uniformSetter.textureIndex)}}}},{key:"_setUniforms",value:function(uniforms){for(var uniformName in this.gl.useProgram(this.handle),uniforms){var uniform=uniforms[uniformName],uniformSetter=this._uniformSetters[uniformName];if(uniformSetter)if(uniform instanceof _framebuffer.default&&(uniform=uniform.texture),uniform instanceof _texture.default){void 0===uniformSetter.textureIndex&&(uniformSetter.textureIndex=this._textureIndexCounter++);var texture=uniform,textureIndex=uniformSetter.textureIndex;texture.bind(textureIndex),uniformSetter(textureIndex)}else uniformSetter(uniform)}return this}},{key:"_createHandle",value:function(){return this.gl.createProgram()}},{key:"_deleteHandle",value:function(){this.gl.deleteProgram(this.handle)}},{key:"_getOptionsFromHandle",value:function(handle){var shaderHandles=this.gl.getAttachedShaders(handle),opts={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=shaderHandles[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var shaderHandle=_step.value;switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:opts.vs=new _shader.VertexShader({handle:shaderHandle});break;case 35632:opts.fs=new _shader.FragmentShader({handle:shaderHandle})}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return opts}},{key:"_getParameter",value:function(pname){return this.gl.getProgramParameter(this.handle,pname)}},{key:"_setId",value:function(id){if(!id){var programName=this._getName();this.id=(0,_utils.uid)(programName)}}},{key:"_getName",value:function(){var programName=this.vs.getName()||this.fs.getName();return programName=(programName=programName.replace(/shader/i,""))?"".concat(programName,"-program"):"program"}},{key:"_compileAndLink",value:function(){var gl=this.gl;if((gl.attachShader(this.handle,this.vs.handle),gl.attachShader(this.handle,this.fs.handle),_utils.log.time(4,"linkProgram for ".concat(this._getName()))(),gl.linkProgram(this.handle),_utils.log.timeEnd(4,"linkProgram for ".concat(this._getName()))(),gl.debug||_utils.log.priority>0)&&(gl.validateProgram(this.handle),!gl.getProgramParameter(this.handle,35714)))throw new Error("Error linking: ".concat(gl.getProgramInfoLog(this.handle)))}},{key:"_readUniformLocationsFromLinkedProgram",value:function(){var gl=this.gl;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(var i=0;i<this._uniformCount;i++){var info=this.gl.getActiveUniform(this.handle,i),_parseUniformName=(0,_uniforms.parseUniformName)(info.name),name=_parseUniformName.name,isArray=_parseUniformName.isArray,location=gl.getUniformLocation(this.handle,name);this._uniformSetters[name]=(0,_uniforms.getUniformSetter)(gl,location,info,isArray)}this._textureIndexCounter=0}},{key:"getActiveUniforms",value:function(uniformIndices,pname){return this.gl.getActiveUniforms(this.handle,uniformIndices,pname)}},{key:"getUniformBlockIndex",value:function(blockName){return this.gl.getUniformBlockIndex(this.handle,blockName)}},{key:"getActiveUniformBlockParameter",value:function(blockIndex,pname){return this.gl.getActiveUniformBlockParameter(this.handle,blockIndex,pname)}},{key:"uniformBlockBinding",value:function(blockIndex,blockBinding){this.gl.uniformBlockBinding(this.handle,blockIndex,blockBinding)}}]),Program}(_resource.default);exports.default=Program},function(module,exports,__webpack_require__){var getPrototypeOf=__webpack_require__(3);module.exports=function(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=getPrototypeOf(object)););return object}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_accessor=_interopRequireDefault(__webpack_require__(132)),_webglUtils=__webpack_require__(14),_attributeUtils=__webpack_require__(108),ProgramConfiguration=function(){function ProgramConfiguration(program){(0,_classCallCheck2.default)(this,ProgramConfiguration),this.id=program.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(program),this._readVaryingsFromProgram(program)}return(0,_createClass2.default)(ProgramConfiguration,[{key:"getAttributeInfo",value:function(locationOrName){var location=Number(locationOrName);return Number.isFinite(location)?this.attributeInfosByLocation[location]:this.attributeInfosByName[locationOrName]||null}},{key:"getAttributeLocation",value:function(locationOrName){var attributeInfo=this.getAttributeInfo(locationOrName);return attributeInfo?attributeInfo.location:-1}},{key:"getAttributeAccessor",value:function(locationOrName){var attributeInfo=this.getAttributeInfo(locationOrName);return attributeInfo?attributeInfo.accessor:null}},{key:"getVaryingInfo",value:function(locationOrName){var location=Number(locationOrName);return Number.isFinite(location)?this.varyingInfos[location]:this.varyingInfosByName[locationOrName]||null}},{key:"getVaryingIndex",value:function(locationOrName){var varying=this.getVaryingInfo();return varying?varying.location:-1}},{key:"getVaryingAccessor",value:function(locationOrName){var varying=this.getVaryingInfo();return varying?varying.accessor:null}},{key:"_readAttributesFromProgram",value:function(program){for(var gl=program.gl,count=gl.getProgramParameter(program.handle,35721),index=0;index<count;index++){var _gl$getActiveAttrib=gl.getActiveAttrib(program.handle,index),name=_gl$getActiveAttrib.name,type=_gl$getActiveAttrib.type,size=_gl$getActiveAttrib.size,location=gl.getAttribLocation(program.handle,name);location>=0&&this._addAttribute(location,name,type,size)}this.attributeInfos.sort(function(a,b){return a.location-b.location})}},{key:"_readVaryingsFromProgram",value:function(program){var gl=program.gl;if((0,_webglUtils.isWebGL2)(gl)){for(var count=gl.getProgramParameter(program.handle,35971),location=0;location<count;location++){var _gl$getTransformFeedb=gl.getTransformFeedbackVarying(program.handle,location),name=_gl$getTransformFeedb.name,type=_gl$getTransformFeedb.type,size=_gl$getTransformFeedb.size;this._addVarying(location,name,type,size)}this.varyingInfos.sort(function(a,b){return a.location-b.location})}}},{key:"_addAttribute",value:function(location,name,compositeType,size){var _decomposeCompositeGL=(0,_attributeUtils.decomposeCompositeGLType)(compositeType),accessor={type:_decomposeCompositeGL.type,size:size*_decomposeCompositeGL.components};this._inferProperties(location,name,accessor);var attributeInfo={location:location,name:name,accessor:new _accessor.default(accessor)};this.attributeInfos.push(attributeInfo),this.attributeInfosByLocation[location]=attributeInfo,this.attributeInfosByName[attributeInfo.name]=attributeInfo}},{key:"_inferProperties",value:function(location,name,accessor){/instance/i.test(name)&&(accessor.divisor=1)}},{key:"_addVarying",value:function(location,name,compositeType,size){var _decomposeCompositeGL2=(0,_attributeUtils.decomposeCompositeGLType)(compositeType),type=_decomposeCompositeGL2.type,components=_decomposeCompositeGL2.components,varying={location:location,name:name,accessor:new _accessor.default({type:type,size:size*components})};this.varyingInfos.push(varying),this.varyingInfosByName[varying.name]=varying}}]),ProgramConfiguration}();exports.default=ProgramConfiguration},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_assertThisInitialized2=_interopRequireDefault(__webpack_require__(12)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_resource=_interopRequireDefault(__webpack_require__(50)),_features=__webpack_require__(309),_webglUtils=__webpack_require__(14),_utils=__webpack_require__(10),Query=function(_Resource){function Query(gl){var _this,opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,_classCallCheck2.default)(this,Query),(_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Query).call(this,gl,opts))).target=null,_this._queryPending=!1,_this._pollingPromise=null,Object.seal((0,_assertThisInitialized2.default)(_this)),_this}return(0,_inherits2.default)(Query,_Resource),(0,_createClass2.default)(Query,null,[{key:"isSupported",value:function(gl){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],webgl2=(0,_webglUtils.isWebGL2)(gl),hasTimerQuery=(0,_features.hasFeatures)(gl,_features.FEATURES.TIMER_QUERY),supported=webgl2||hasTimerQuery,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=opts[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){switch(_step.value){case"queries":supported=supported&&webgl2;break;case"timers":supported=supported&&hasTimerQuery;break;default:(0,_utils.assert)(!1)}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return supported}}]),(0,_createClass2.default)(Query,[{key:"beginTimeElapsedQuery",value:function(){return this.begin(35007)}},{key:"beginOcclusionQuery",value:function(){var _ref$conservative=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).conservative,conservative=void 0!==_ref$conservative&&_ref$conservative;return this.begin(conservative?36202:35887)}},{key:"beginTransformFeedbackQuery",value:function(){return this.begin(35976)}},{key:"begin",value:function(target){return this._queryPending?this:(this.target=target,this.gl.beginQuery(this.target,this.handle),this)}},{key:"end",value:function(){return this._queryPending?this:(this.target&&(this.gl.endQuery(this.target),this.target=null,this._queryPending=!0),this)}},{key:"isResultAvailable",value:function(){if(!this._queryPending)return!1;var resultAvailable=this.gl.getQueryParameter(this.handle,34919);return resultAvailable&&(this._queryPending=!1),resultAvailable}},{key:"isTimerDisjoint",value:function(){return this.gl.getParameter(36795)}},{key:"getResult",value:function(){return this.gl.getQueryParameter(this.handle,34918)}},{key:"getTimerMilliseconds",value:function(){return this.getResult()/1e6}},{key:"createPoll",value:function(){var _this2=this,limit=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;var counter=0;return this._pollingPromise=new Promise(function(resolve,reject){requestAnimationFrame(function poll(){_this2.isResultAvailable()?(resolve(_this2.getResult()),_this2._pollingPromise=null):counter++>limit?(reject("Timed out"),_this2._pollingPromise=null):requestAnimationFrame(poll)})}),this._pollingPromise}},{key:"_createHandle",value:function(){return Query.isSupported(this.gl)?this.gl.createQuery():null}},{key:"_deleteHandle",value:function(){this.gl.deleteQuery(this.handle)}}]),Query}(_resource.default);exports.default=Query},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_assertThisInitialized2=_interopRequireDefault(__webpack_require__(12)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_resource=_interopRequireDefault(__webpack_require__(50)),_buffer=_interopRequireDefault(__webpack_require__(61)),_webglUtils=__webpack_require__(14),_utils=__webpack_require__(10),TransformFeedback=function(_Resource){function TransformFeedback(gl){var _this,props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,_classCallCheck2.default)(this,TransformFeedback),(0,_webglUtils.assertWebGL2Context)(gl),(_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(TransformFeedback).call(this,gl,props))).initialize(props),_this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal((0,_assertThisInitialized2.default)(_this)),_this}return(0,_inherits2.default)(TransformFeedback,_Resource),(0,_createClass2.default)(TransformFeedback,null,[{key:"isSupported",value:function(gl){return(0,_webglUtils.isWebGL2)(gl)}}]),(0,_createClass2.default)(TransformFeedback,[{key:"initialize",value:function(){var _this2=this,props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,(0,_utils.isObjectEmpty)(this.buffers)||this.bind(function(){return _this2._unbindBuffers()}),this.setProps(props),this}},{key:"setProps",value:function(props){"program"in props&&(this.configuration=props.program&&props.program.configuration),"configuration"in props&&(this.configuration=props.configuration),"bindOnUse"in props&&(props=props.bindOnUse),"buffers"in props&&this.setBuffers(props.buffers)}},{key:"setBuffers",value:function(){var _this3=this,buffers=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind(function(){for(var bufferName in buffers)_this3.setBuffer(bufferName,buffers[bufferName])}),this}},{key:"setBuffer",value:function(locationOrName,bufferOrParams){var _this4=this,location=this._getVaryingIndex(locationOrName),_this$_getBufferParam=this._getBufferParams(bufferOrParams),buffer=_this$_getBufferParam.buffer,byteSize=_this$_getBufferParam.byteSize,byteOffset=_this$_getBufferParam.byteOffset;return location<0?(this.unused[locationOrName]=buffer,_utils.log.warn(function(){return"".concat(_this4.id," unused varying buffer ").concat(locationOrName)})(),this):(this.buffers[location]=bufferOrParams,this.bindOnUse||this._bindBuffer(location,buffer,byteOffset,byteSize),this)}},{key:"begin",value:function(){var primitiveMode=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(primitiveMode),this}},{key:"end",value:function(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}},{key:"_getBufferParams",value:function(bufferOrParams){var byteOffset,byteSize,buffer;return bufferOrParams instanceof _buffer.default==!1?(buffer=bufferOrParams.buffer,byteSize=bufferOrParams.byteSize,byteOffset=bufferOrParams.byteOffset):buffer=bufferOrParams,void 0===byteOffset&&void 0===byteSize||(byteOffset=byteOffset||0,byteSize=byteSize||buffer.byteLength-byteOffset),{buffer:buffer,byteOffset:byteOffset,byteSize:byteSize}}},{key:"_getVaryingInfo",value:function(locationOrName){return this.configuration&&this.configuration.getVaryingInfo(locationOrName)}},{key:"_getVaryingIndex",value:function(locationOrName){if(this.configuration)return this.configuration.getVaryingInfo(locationOrName).location;var location=Number(locationOrName);return Number.isFinite(location)?location:-1}},{key:"_bindBuffers",value:function(){if(this.bindOnUse)for(var bufferIndex in this.buffers){var _this$_getBufferParam2=this._getBufferParams(this.buffers[bufferIndex]),buffer=_this$_getBufferParam2.buffer,byteSize=_this$_getBufferParam2.byteSize,byteOffset=_this$_getBufferParam2.byteOffset;this._bindBuffer(bufferIndex,buffer,byteOffset,byteSize)}}},{key:"_unbindBuffers",value:function(){if(this.bindOnUse)for(var bufferIndex in this.buffers)this._bindBuffer(bufferIndex,null)}},{key:"_bindBuffer",value:function(index,buffer){var byteOffset=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,byteSize=arguments.length>3?arguments[3]:void 0,handle=buffer&&buffer.handle;return handle&&void 0!==byteSize?this.gl.bindBufferRange(35982,index,handle,byteOffset,byteSize):this.gl.bindBufferBase(35982,index,handle),this}},{key:"_createHandle",value:function(){return this.gl.createTransformFeedback()}},{key:"_deleteHandle",value:function(){this.gl.deleteTransformFeedback(this.handle)}},{key:"_bindHandle",value:function(handle){this.gl.bindTransformFeedback(36386,this.handle)}}]),TransformFeedback}(_resource.default);exports.default=TransformFeedback},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getScratchArrayBuffer=getScratchArrayBuffer,exports.getScratchArray=function(Type,length){var scratchArrayBuffer=getScratchArrayBuffer(Type.BYTES_PER_ELEMENT*length);return new Type(scratchArrayBuffer,0,length)},exports.fillArray=function(_ref){for(var target=_ref.target,source=_ref.source,_ref$start=_ref.start,start=void 0===_ref$start?0:_ref$start,_ref$count=_ref.count,count=void 0===_ref$count?1:_ref$count,length=source.length,total=count*length,copied=0,i=start;copied<length;copied++)target[i++]=source[copied];for(;copied<total;)copied<total-copied?(target.copyWithin(start+copied,start,start+copied),copied*=2):(target.copyWithin(start+copied,start,start+total-copied),copied=total);return target};var arrayBuffer=null;function getScratchArrayBuffer(byteLength){return(!arrayBuffer||arrayBuffer.byteLength<byteLength)&&(arrayBuffer=new ArrayBuffer(byteLength)),arrayBuffer}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_accessor2=_interopRequireDefault(__webpack_require__(132)),_buffer=_interopRequireDefault(__webpack_require__(61)),_vertexArrayObject=_interopRequireDefault(__webpack_require__(317)),_utils=__webpack_require__(10),MULTI_LOCATION_ATTRIBUTE_REGEXP=/^(.+)__LOCATION_([0-9]+)$/,DEPRECATIONS_V6=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"],VertexArray=function(){function VertexArray(gl){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,_classCallCheck2.default)(this,VertexArray);var id=opts.id||opts.program&&opts.program.id;this.id=id,this.gl=gl,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.vertexArrayObject=_vertexArrayObject.default.isSupported(gl)?new _vertexArrayObject.default(gl):_vertexArrayObject.default.getDefaultArray(gl),(0,_utils.stubRemovedMethods)(this,"VertexArray","v6.0",DEPRECATIONS_V6),this.initialize(opts),Object.seal(this)}return(0,_createClass2.default)(VertexArray,[{key:"delete",value:function(){this.buffer&&this.buffer.delete()}},{key:"initialize",value:function(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(props)}},{key:"reset",value:function(){this.elements=null,this.elementsAccessor=null;var MAX_ATTRIBUTES=this.vertexArrayObject.MAX_ATTRIBUTES;return this.values=new Array(MAX_ATTRIBUTES).fill(null),this.accessors=new Array(MAX_ATTRIBUTES).fill(null),this.unused={},this.drawParams=null,this}},{key:"setProps",value:function(props){return"program"in props&&(this.configuration=props.program&&props.program.configuration),"configuration"in props&&(this.configuration=props.configuration),"attributes"in props&&this.setAttributes(props.attributes),"elements"in props&&this.setElementBuffer(props.elements),"bindOnUse"in props&&(props=props.bindOnUse),this}},{key:"clearDrawParams",value:function(){this.drawParams=null}},{key:"getDrawParams",value:function(appParameters){return this.drawParams=this.drawParams||this._updateDrawParams(),Object.assign({},this.drawParams,appParameters)}},{key:"setAttributes",value:function(attributes){var _this=this;return this.vertexArrayObject.bind(function(){for(var locationOrName in attributes){var value=attributes[locationOrName];_this._setAttribute(locationOrName,value)}_this.gl.bindBuffer(34962,null)}),this}},{key:"setElementBuffer",value:function(){var elementBuffer=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,accessor=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=elementBuffer,this.elementsAccessor=accessor,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.setElementBuffer(elementBuffer,accessor),this}},{key:"setBuffer",value:function(locationOrName,buffer){var appAccessor=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===buffer.target)return this.setElementBuffer(buffer,appAccessor);var _this$_resolveLocatio=this._resolveLocationAndAccessor(locationOrName,buffer,buffer.accessor,appAccessor),location=_this$_resolveLocatio.location,accessor=_this$_resolveLocatio.accessor;return location>=0&&(this.values[location]=buffer,this.accessors[location]=accessor,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.setBuffer(location,buffer,accessor)),this}},{key:"setConstant",value:function(locationOrName,arrayValue){var appAccessor=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},_this$_resolveLocatio2=this._resolveLocationAndAccessor(locationOrName,arrayValue,Object.assign({size:arrayValue.length},appAccessor)),location=_this$_resolveLocatio2.location,accessor=_this$_resolveLocatio2.accessor;return location>=0&&(arrayValue=this.vertexArrayObject._normalizeConstantArrayValue(arrayValue,accessor),this.values[location]=arrayValue,this.accessors[location]=accessor,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.enable(location,!1)),this}},{key:"unbindBuffers",value:function(){var _this2=this;return this.vertexArrayObject.bind(function(){_this2.elements&&_this2.setElementBuffer(null),_this2.buffer=_this2.buffer||new _buffer.default(_this2.gl,{size:4});for(var location=0;location<_this2.vertexArrayObject.MAX_ATTRIBUTES;location++)_this2.values[location]instanceof _buffer.default&&(_this2.gl.disableVertexAttribArray(location),_this2.gl.bindBuffer(34962,_this2.buffer.handle),_this2.gl.vertexAttribPointer(location,1,5126,!1,0,0))}),this}},{key:"bindBuffers",value:function(){var _this3=this;return this.vertexArrayObject.bind(function(){_this3.elements&&_this3.setElementBuffer(_this3.elements);for(var location=0;location<_this3.vertexArrayObject.MAX_ATTRIBUTES;location++){var buffer=_this3.values[location];buffer instanceof _buffer.default&&_this3.setBuffer(location,buffer)}}),this}},{key:"bindForDraw",value:function(vertexCount,instanceCount,func){var value,_this4=this;return this.vertexArrayObject.bind(function(){_this4._setConstantAttributes(vertexCount,instanceCount),_this4.vertexArrayObject.hasVertexArrays||_this4.bindBuffers(),value=func(),_this4.vertexArrayObject.hasVertexArrays||_this4.unbindBuffers()}),value}},{key:"_resolveLocationAndAccessor",value:function(locationOrName,value,valueAccessor,appAccessor){var _this5=this,_this$_getAttributeIn=this._getAttributeIndex(locationOrName),location=_this$_getAttributeIn.location,name=_this$_getAttributeIn.name;if(!Number.isFinite(location)||location<0)return this.unused[locationOrName]=value,_utils.log.once(3,function(){return"unused value ".concat(locationOrName," in ").concat(_this5.id)})(),this;var accessInfo=this._getAttributeInfo(name||location);if(!accessInfo)return{location:-1,accessor:null};var accessor=_accessor2.default.resolve(accessInfo.accessor,valueAccessor,appAccessor),size=accessor.size,type=accessor.type;return(0,_utils.assert)(Number.isFinite(size)&&Number.isFinite(type)),{location:location,accessor:accessor}}},{key:"_getAttributeInfo",value:function(attributeName){return this.configuration&&this.configuration.getAttributeInfo(attributeName)}},{key:"_getAttributeIndex",value:function(locationOrName){var location=Number(locationOrName);if(Number.isFinite(location))return{location:location};var multiLocation=MULTI_LOCATION_ATTRIBUTE_REGEXP.exec(locationOrName),name=multiLocation?multiLocation[1]:locationOrName,locationOffset=multiLocation?Number(multiLocation[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(name)+locationOffset,name:name}:{location:-1}}},{key:"_setAttribute",value:function(locationOrName,value){if(value instanceof _buffer.default)this.setBuffer(locationOrName,value);else if(Array.isArray(value)&&value.length&&value[0]instanceof _buffer.default){var buffer=value[0],accessor=value[1];this.setBuffer(locationOrName,buffer,accessor)}else if(ArrayBuffer.isView(value)||Array.isArray(value)){var constant=value;this.setConstant(locationOrName,constant)}else{if(!(value.buffer instanceof _buffer.default))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");var _accessor=value;this.setBuffer(locationOrName,_accessor.buffer,_accessor)}}},{key:"_setConstantAttributes",value:function(vertexCount,instanceCount){var elementCount=Math.max(0|vertexCount,0|instanceCount),constant=this.values[0];ArrayBuffer.isView(constant)&&this._setConstantAttributeZero(constant,elementCount);for(var location=1;location<this.vertexArrayObject.MAX_ATTRIBUTES;location++)constant=this.values[location],ArrayBuffer.isView(constant)&&this._setConstantAttribute(location,constant)}},{key:"_setConstantAttributeZero",value:function(constant,elementCount){if(_vertexArrayObject.default.isSupported(this.gl,{constantAttributeZero:!0}))this._setConstantAttribute(0,constant);else{var buffer=this.vertexArrayObject.getConstantBuffer(elementCount,constant);this.vertexArrayObject.setBuffer(0,buffer,this.accessors[0])}}},{key:"_setConstantAttribute",value:function(location,constant){_vertexArrayObject.default.setConstant(this.gl,location,constant),this.vertexArrayObject.isDefault&&this.vertexArrayObject.enable(location,!1)}},{key:"_updateDrawParams",value:function(){for(var drawParams={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0},location=0;location<this.vertexArrayObject.MAX_ATTRIBUTES;location++)this._updateDrawParamsForLocation(drawParams,location);return this.elements&&(drawParams.elementCount=this.elements.getElementCount(this.elements.accessor),drawParams.isIndexed=!0,drawParams.indexType=this.elementsAccessor.type||this.elements.accessor.type,drawParams.indexOffset=this.elementsAccessor.offset||0),drawParams.indexCount===1/0&&(drawParams.indexCount=0),drawParams.vertexCount===1/0&&(drawParams.vertexCount=0),drawParams.instanceCount===1/0&&(drawParams.instanceCount=0),drawParams}},{key:"_updateDrawParamsForLocation",value:function(drawParams,location){var value=this.values[location],accessor=this.accessors[location];if(value){var isInstanced=accessor.divisor>0;if(drawParams.isInstanced=drawParams.isInstanced||isInstanced,value instanceof _buffer.default){var buffer=value;if(isInstanced){var instanceCount=buffer.getVertexCount(accessor);drawParams.instanceCount=Math.min(drawParams.instanceCount,instanceCount)}else{var vertexCount=buffer.getVertexCount(accessor);drawParams.vertexCount=Math.min(drawParams.vertexCount,vertexCount)}}}}},{key:"setElements",value:function(){var elementBuffer=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,accessor=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _utils.log.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(elementBuffer,accessor)}}]),VertexArray}();exports.default=VertexArray},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(6)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_attributeUtils=__webpack_require__(108),_utils=__webpack_require__(10),GL_FLOAT=5126,GL_INT=5124,GL_UNSIGNED_INT=5125,UniformBufferLayout=function(){function UniformBufferLayout(layout){var _this$typedArray;for(var key in(0,_classCallCheck2.default)(this,UniformBufferLayout),this.layout={},this.size=0,layout)this._addUniform(key,layout[key]);this.size+=(4-this.size%4)%4;var data=new Float32Array(this.size);this.typedArray=(_this$typedArray={},(0,_defineProperty2.default)(_this$typedArray,GL_FLOAT,data),(0,_defineProperty2.default)(_this$typedArray,GL_INT,new Int32Array(data.buffer)),(0,_defineProperty2.default)(_this$typedArray,GL_UNSIGNED_INT,new Uint32Array(data.buffer)),_this$typedArray)}return(0,_createClass2.default)(UniformBufferLayout,[{key:"getBytes",value:function(){return 4*this.size}},{key:"getData",value:function(){return this.typedArray[GL_FLOAT]}},{key:"getSubData",value:function(index){var data,offset;if(void 0===index)data=this.data,offset=0;else{var begin=this.offsets[index],end=begin+this.sizes[index];data=this.data.subarray(begin,end),offset=4*begin}return{data:data,offset:offset}}},{key:"setUniforms",value:function(values){for(var key in values)this._setValue(key,values[key]);return this}},{key:"_setValue",value:function(key,value){var layout=this.layout[key];(0,_utils.assert)(layout,"UniformLayoutStd140 illegal argument");var typedArray=this.typedArray[layout.type];1===layout.size?typedArray[layout.offset]=value:typedArray.set(value,layout.offset)}},{key:"_addUniform",value:function(key,uniformType){var typeAndComponents=(0,_attributeUtils.decomposeCompositeGLType)(uniformType);(0,_utils.assert)(typeAndComponents,"UniformBufferLayout illegal argument");var type=typeAndComponents.type,count=typeAndComponents.components;this.size=this._alignTo(this.size,count);var offset=this.size;this.size+=count,this.layout[key]={type:type,size:count,offset:offset}}},{key:"_alignTo",value:function(size,count){switch(count){case 1:return size;case 2:return size+size%2;default:return size+(4-size%4)%4}}}]),UniformBufferLayout}();exports.default=UniformBufferLayout},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDebugTableForUniforms=function(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$header=_ref.header,header=void 0===_ref$header?"Uniforms":_ref$header,program=_ref.program,uniforms=_ref.uniforms,_ref$undefinedOnly=_ref.undefinedOnly,undefinedOnly=void 0!==_ref$undefinedOnly&&_ref$undefinedOnly;(0,_utils.assert)(program);var uniformLocations=program._uniformSetters,table={},uniformNames=Object.keys(uniformLocations).sort(),count=0,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=uniformNames[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _uniformName=_step.value;_uniformName.match(".*_.*")||_uniformName.match(".*Matrix")||addUniformToTable({table:table,header:header,uniforms:uniforms,uniformName:_uniformName,undefinedOnly:undefinedOnly})&&count++}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=uniformNames[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var _uniformName2=_step2.value;_uniformName2.match(".*Matrix")&&addUniformToTable({table:table,header:header,uniforms:uniforms,uniformName:_uniformName2,undefinedOnly:undefinedOnly})&&count++}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=uniformNames[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var _uniformName3=_step3.value;table[_uniformName3]||addUniformToTable({table:table,header:header,uniforms:uniforms,uniformName:_uniformName3,undefinedOnly:undefinedOnly})&&count++}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{_iteratorNormalCompletion3||null==_iterator3.return||_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}var unusedCount=0,unusedTable={};if(!undefinedOnly)for(var uniformName in uniforms){var uniform=uniforms[uniformName];table[uniformName]||(unusedCount++,unusedTable[uniformName]=(0,_defineProperty2.default)({Type:"NOT USED: ".concat(uniform)},header,(0,_utils.formatValue)(uniform)))}return{table:table,count:count,unusedTable:unusedTable,unusedCount:unusedCount}};var _defineProperty2=_interopRequireDefault(__webpack_require__(6)),_utils=__webpack_require__(10);function addUniformToTable(_ref2){var _table$uniformName,table=_ref2.table,header=_ref2.header,uniforms=_ref2.uniforms,uniformName=_ref2.uniformName,undefinedOnly=_ref2.undefinedOnly,value=uniforms[uniformName],isDefined=function(value){return null!=value}(value);return(!undefinedOnly||!isDefined)&&(table[uniformName]=(_table$uniformName={},(0,_defineProperty2.default)(_table$uniformName,header,isDefined?(0,_utils.formatValue)(value):"N/A"),(0,_defineProperty2.default)(_table$uniformName,"Uniform Type",isDefined?value:"NOT PROVIDED"),_table$uniformName),!0)}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDebugTableForVertexArray=function(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},vertexArray=_ref.vertexArray,_ref$header=_ref.header,header=void 0===_ref$header?"Attributes":_ref$header;if(!vertexArray.configuration)return{};var table={};vertexArray.elements&&(table.ELEMENT_ARRAY_BUFFER=getDebugTableRow(vertexArray,vertexArray.elements,null,header));var attributes=vertexArray.values;for(var attributeLocation in attributes){var info=vertexArray._getAttributeInfo(attributeLocation);if(info){var rowHeader="".concat(attributeLocation,": ").concat(info.name),accessor=vertexArray.accessors[info.location];accessor&&(rowHeader="".concat(attributeLocation,": ").concat(getGLSLDeclaration(info.name,accessor))),table[rowHeader]=getDebugTableRow(vertexArray,attributes[attributeLocation],accessor,header)}}return table};var _defineProperty2=_interopRequireDefault(__webpack_require__(6)),_buffer=_interopRequireDefault(__webpack_require__(61)),_webglUtils=__webpack_require__(14),_attributeUtils=__webpack_require__(108),_utils=__webpack_require__(10);function getDebugTableRow(vertexArray,attribute,accessor,header){var _ref3,isInteger,marker,value,gl=vertexArray.gl,type="NOT PROVIDED",size="N/A",verts="N/A",bytes="N/A";if(accessor&&(type=accessor.type,size=accessor.size,isInteger=-1!==(type=String(type).replace("Array","")).indexOf("nt")),attribute instanceof _buffer.default){var _ref2,format,buffer=attribute,_buffer$getDebugData=buffer.getDebugData(),data=_buffer$getDebugData.data;if(marker=_buffer$getDebugData.modified?"*":"",value=data,verts=(bytes=buffer.byteLength)/data.BYTES_PER_ELEMENT/size,accessor){var instanced=accessor.divisor>0;format="".concat(instanced?"I ":"P "," ").concat(verts," (x").concat(size,"=").concat(bytes," bytes ").concat((0,_webglUtils.getKey)(gl,type),")")}else isInteger=!0,format="".concat(bytes," bytes");return _ref2={},(0,_defineProperty2.default)(_ref2,header,"".concat(marker).concat((0,_utils.formatValue)(value,{size:size,isInteger:isInteger}))),(0,_defineProperty2.default)(_ref2,"Format ",format),_ref2}return value=attribute,size=attribute.length,isInteger=-1!==(type=String(attribute.constructor.name).replace("Array","")).indexOf("nt"),_ref3={},(0,_defineProperty2.default)(_ref3,header,"".concat((0,_utils.formatValue)(value,{size:size,isInteger:isInteger})," (constant)")),(0,_defineProperty2.default)(_ref3,"Format ","".concat(size,"x").concat(type," (constant)")),_ref3}function getGLSLDeclaration(name,accessor){var type=accessor.type,size=accessor.size,typeAndName=(0,_attributeUtils.getCompositeGLType)(type,size);return typeAndName?"".concat(name," (").concat(typeAndName.name,")"):name}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDebugTableForProgramConfiguration=function(config){var table={},header="Accessors for ".concat(config.id),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=config.attributeInfos[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var attributeInfo=_step.value;if(attributeInfo){var glslDeclaration=getGLSLDeclaration(attributeInfo);table["in ".concat(glslDeclaration)]=(0,_defineProperty2.default)({},header,JSON.stringify(attributeInfo.accessor))}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=config.varyingInfos[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var varyingInfo=_step2.value;if(varyingInfo){var _glslDeclaration=getGLSLDeclaration(varyingInfo);table["out ".concat(_glslDeclaration)]=(0,_defineProperty2.default)({},header,JSON.stringify(varyingInfo.accessor))}}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return table};var _defineProperty2=_interopRequireDefault(__webpack_require__(6)),_attributeUtils=__webpack_require__(108);function getGLSLDeclaration(attributeInfo){var _attributeInfo$access=attributeInfo.accessor,type=_attributeInfo$access.type,size=_attributeInfo$access.size,typeAndName=(0,_attributeUtils.getCompositeGLType)(type,size);return typeAndName?"".concat(typeAndName.name," ").concat(attributeInfo.name):attributeInfo.name}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.PointLight=exports.DirectionalLight=exports.AmbientLight=void 0;var _createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_math=__webpack_require__(25),_utils=__webpack_require__(19),DEFAULT_LIGHT_COLOR=[255,255,255],DEFAULT_ATTENUATION=[0,0,1],DEFAULT_LIGHT_DIRECTION=[0,0,-1],DEFAULT_LIGHT_POSITION=[0,0,1],Light=function Light(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,_classCallCheck2.default)(this,Light),this.id=props.id||(0,_utils.uid)("light");var _props$color=props.color,color=void 0===_props$color?DEFAULT_LIGHT_COLOR:_props$color;this.color=color;var _props$intensity=props.intensity,intensity=void 0===_props$intensity?1:_props$intensity;this.intensity=intensity},AmbientLight=function(_Light){function AmbientLight(){var _this,props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,_classCallCheck2.default)(this,AmbientLight),(_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(AmbientLight).call(this,props))).type="ambient",_this}return(0,_inherits2.default)(AmbientLight,_Light),AmbientLight}(Light);exports.AmbientLight=AmbientLight;var DirectionalLight=function(_Light2){function DirectionalLight(){var _this2,props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,_classCallCheck2.default)(this,DirectionalLight),(_this2=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(DirectionalLight).call(this,props))).type="directional";var _props$direction=props.direction,direction=void 0===_props$direction?DEFAULT_LIGHT_DIRECTION:_props$direction;return _this2.direction=new _math.Vector3(direction).normalize().toArray(),_this2}return(0,_inherits2.default)(DirectionalLight,_Light2),DirectionalLight}(Light);exports.DirectionalLight=DirectionalLight;var PointLight=function(_Light3){function PointLight(){var _this3,props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,_classCallCheck2.default)(this,PointLight),(_this3=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(PointLight).call(this,props))).type="point";var _props$position=props.position,position=void 0===_props$position?DEFAULT_LIGHT_POSITION:_props$position;return _this3.position=position,_this3.attenuation=_this3._getAttenuation(props),_this3}return(0,_inherits2.default)(PointLight,_Light3),(0,_createClass2.default)(PointLight,[{key:"_getAttenuation",value:function(props){return"attenuation"in props?props.attenuation:"intensity"in props?[0,0,props.intensity]:DEFAULT_ATTENUATION}}]),PointLight}(Light);exports.PointLight=PointLight},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(9),_interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateMatrix3=function(m){return 9===m.length&&Number.isFinite(m[0])&&Number.isFinite(m[1])&&Number.isFinite(m[2])&&Number.isFinite(m[3])&&Number.isFinite(m[4])&&Number.isFinite(m[5])&&Number.isFinite(m[6])&&Number.isFinite(m[7])&&Number.isFinite(m[8])},exports.default=void 0;var _toConsumableArray2=_interopRequireDefault(__webpack_require__(49)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_mathArray=_interopRequireDefault(__webpack_require__(109)),_validators=__webpack_require__(319),_common=__webpack_require__(43),_vector=_interopRequireDefault(__webpack_require__(197)),_vector2=_interopRequireDefault(__webpack_require__(88)),mat3=_interopRequireWildcard(__webpack_require__(320)),vec2=_interopRequireWildcard(__webpack_require__(69)),vec3=_interopRequireWildcard(__webpack_require__(70)),IDENTITY=[1,0,0,0,1,0,0,0,1];var Matrix3=function(_MathArray){function Matrix3(){for(var _this,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(0,_classCallCheck2.default)(this,Matrix3),_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Matrix3).call(this)),Array.isArray(args[0])&&1===arguments.length?_this.copy(args[0]):_this.identity(),_this}return(0,_inherits2.default)(Matrix3,_MathArray),(0,_createClass2.default)(Matrix3,[{key:"setRowMajor",value:function(){var m00=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,m01=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,m02=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,m10=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,m11=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,m12=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,m20=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,m21=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,m22=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1;return this[0]=m00,this[1]=m10,this[2]=m20,this[3]=m01,this[4]=m11,this[5]=m21,this[6]=m02,this[7]=m12,this[8]=m22,this.check()}},{key:"setColumnMajor",value:function(){var m00=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,m10=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,m20=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,m01=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,m11=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,m21=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,m02=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,m12=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,m22=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1;return this[0]=m00,this[1]=m10,this[2]=m20,this[3]=m01,this[4]=m11,this[5]=m21,this[6]=m02,this[7]=m12,this[8]=m22,this.check()}},{key:"copy",value:function(array){return this.setColumnMajor.apply(this,(0,_toConsumableArray2.default)(array))}},{key:"set",value:function(){return this.setColumnMajor.apply(this,arguments)}},{key:"getElement",value:function(i,j){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?this[3*i+j]:this[3*j+i]}},{key:"setElement",value:function(i,j,value){return arguments.length>3&&void 0!==arguments[3]&&arguments[3]?this[3*i+j]=(0,_common.checkNumber)(value):this[3*j+i]=(0,_common.checkNumber)(value),this}},{key:"determinant",value:function(){return mat3.determinant(this)}},{key:"identity",value:function(){for(var i=0;i<IDENTITY.length;++i)this[i]=IDENTITY[i];return this.check()}},{key:"fromQuaternion",value:function(q){return mat3.fromQuat(this,q),this.check()}},{key:"transpose",value:function(){return mat3.transpose(this,this),this.check()}},{key:"invert",value:function(){return mat3.invert(this,this),this.check()}},{key:"multiplyLeft",value:function(a){return mat3.multiply(this,a,this),this.check()}},{key:"multiplyRight",value:function(a){return mat3.multiply(this,this,a),this.check()}},{key:"rotate",value:function(radians){return mat3.rotate(this,this,radians),this.check()}},{key:"scale",value:function(factor){return Array.isArray(factor)?mat3.scale(this,this,factor):mat3.scale(this,this,[factor,factor,factor]),this.check()}},{key:"translate",value:function(vec){return mat3.translate(this,this,vec),this.check()}},{key:"transformVector2",value:function(vector,out){return out=out||new _vector.default,vec2.transformMat3(out,vector,this),(0,_validators.validateVector)(out,2),out}},{key:"transformVector3",value:function(vector,out){return out=out||new _vector2.default,vec3.transformMat3(out,vector,this),(0,_validators.validateVector)(out,3),out}},{key:"transformVector",value:function(vector,out){switch(vector.length){case 2:return this.transformVector2(vector,out);case 3:return this.transformVector3(vector,out);default:throw new Error("Illegal vector")}}},{key:"ELEMENTS",get:function(){return 9}}]),Matrix3}(_mathArray.default);exports.default=Matrix3},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=create,exports.identity=function(out){return out[0]=0,out[1]=0,out[2]=0,out[3]=1,out},exports.setAxisAngle=setAxisAngle,exports.getAxisAngle=function(out_axis,q){var rad=2*Math.acos(q[3]),s=Math.sin(rad/2);s>glMatrix.EPSILON?(out_axis[0]=q[0]/s,out_axis[1]=q[1]/s,out_axis[2]=q[2]/s):(out_axis[0]=1,out_axis[1]=0,out_axis[2]=0);return rad},exports.multiply=multiply,exports.rotateX=function(out,a,rad){rad*=.5;var ax=a[0],ay=a[1],az=a[2],aw=a[3],bx=Math.sin(rad),bw=Math.cos(rad);return out[0]=ax*bw+aw*bx,out[1]=ay*bw+az*bx,out[2]=az*bw-ay*bx,out[3]=aw*bw-ax*bx,out},exports.rotateY=function(out,a,rad){rad*=.5;var ax=a[0],ay=a[1],az=a[2],aw=a[3],by=Math.sin(rad),bw=Math.cos(rad);return out[0]=ax*bw-az*by,out[1]=ay*bw+aw*by,out[2]=az*bw+ax*by,out[3]=aw*bw-ay*by,out},exports.rotateZ=function(out,a,rad){rad*=.5;var ax=a[0],ay=a[1],az=a[2],aw=a[3],bz=Math.sin(rad),bw=Math.cos(rad);return out[0]=ax*bw+ay*bz,out[1]=ay*bw-ax*bz,out[2]=az*bw+aw*bz,out[3]=aw*bw-az*bz,out},exports.calculateW=function(out,a){var x=a[0],y=a[1],z=a[2];return out[0]=x,out[1]=y,out[2]=z,out[3]=Math.sqrt(Math.abs(1-x*x-y*y-z*z)),out},exports.slerp=slerp,exports.random=function(out){var u1=glMatrix.RANDOM(),u2=glMatrix.RANDOM(),u3=glMatrix.RANDOM(),sqrt1MinusU1=Math.sqrt(1-u1),sqrtU1=Math.sqrt(u1);return out[0]=sqrt1MinusU1*Math.sin(2*Math.PI*u2),out[1]=sqrt1MinusU1*Math.cos(2*Math.PI*u2),out[2]=sqrtU1*Math.sin(2*Math.PI*u3),out[3]=sqrtU1*Math.cos(2*Math.PI*u3),out},exports.invert=function(out,a){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],dot=a0*a0+a1*a1+a2*a2+a3*a3,invDot=dot?1/dot:0;return out[0]=-a0*invDot,out[1]=-a1*invDot,out[2]=-a2*invDot,out[3]=a3*invDot,out},exports.conjugate=function(out,a){return out[0]=-a[0],out[1]=-a[1],out[2]=-a[2],out[3]=a[3],out},exports.fromMat3=fromMat3,exports.fromEuler=function(out,x,y,z){var halfToRad=.5*Math.PI/180;x*=halfToRad,y*=halfToRad,z*=halfToRad;var sx=Math.sin(x),cx=Math.cos(x),sy=Math.sin(y),cy=Math.cos(y),sz=Math.sin(z),cz=Math.cos(z);return out[0]=sx*cy*cz-cx*sy*sz,out[1]=cx*sy*cz+sx*cy*sz,out[2]=cx*cy*sz-sx*sy*cz,out[3]=cx*cy*cz+sx*sy*sz,out},exports.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},exports.setAxes=exports.sqlerp=exports.rotationTo=exports.equals=exports.exactEquals=exports.normalize=exports.sqrLen=exports.squaredLength=exports.len=exports.length=exports.lerp=exports.dot=exports.scale=exports.mul=exports.add=exports.set=exports.copy=exports.fromValues=exports.clone=void 0;var glMatrix=_interopRequireWildcard(__webpack_require__(87)),mat3=_interopRequireWildcard(__webpack_require__(320)),vec3=_interopRequireWildcard(__webpack_require__(70)),vec4=_interopRequireWildcard(__webpack_require__(90));function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}function create(){var out=new glMatrix.ARRAY_TYPE(4);return glMatrix.ARRAY_TYPE!=Float32Array&&(out[0]=0,out[1]=0,out[2]=0),out[3]=1,out}function setAxisAngle(out,axis,rad){rad*=.5;var s=Math.sin(rad);return out[0]=s*axis[0],out[1]=s*axis[1],out[2]=s*axis[2],out[3]=Math.cos(rad),out}function multiply(out,a,b){var ax=a[0],ay=a[1],az=a[2],aw=a[3],bx=b[0],by=b[1],bz=b[2],bw=b[3];return out[0]=ax*bw+aw*bx+ay*bz-az*by,out[1]=ay*bw+aw*by+az*bx-ax*bz,out[2]=az*bw+aw*bz+ax*by-ay*bx,out[3]=aw*bw-ax*bx-ay*by-az*bz,out}function slerp(out,a,b,t){var omega,cosom,sinom,scale0,scale1,ax=a[0],ay=a[1],az=a[2],aw=a[3],bx=b[0],by=b[1],bz=b[2],bw=b[3];return(cosom=ax*bx+ay*by+az*bz+aw*bw)<0&&(cosom=-cosom,bx=-bx,by=-by,bz=-bz,bw=-bw),1-cosom>glMatrix.EPSILON?(omega=Math.acos(cosom),sinom=Math.sin(omega),scale0=Math.sin((1-t)*omega)/sinom,scale1=Math.sin(t*omega)/sinom):(scale0=1-t,scale1=t),out[0]=scale0*ax+scale1*bx,out[1]=scale0*ay+scale1*by,out[2]=scale0*az+scale1*bz,out[3]=scale0*aw+scale1*bw,out}function fromMat3(out,m){var fRoot,fTrace=m[0]+m[4]+m[8];if(fTrace>0)fRoot=Math.sqrt(fTrace+1),out[3]=.5*fRoot,fRoot=.5/fRoot,out[0]=(m[5]-m[7])*fRoot,out[1]=(m[6]-m[2])*fRoot,out[2]=(m[1]-m[3])*fRoot;else{var i=0;m[4]>m[0]&&(i=1),m[8]>m[3*i+i]&&(i=2);var j=(i+1)%3,k=(i+2)%3;fRoot=Math.sqrt(m[3*i+i]-m[3*j+j]-m[3*k+k]+1),out[i]=.5*fRoot,fRoot=.5/fRoot,out[3]=(m[3*j+k]-m[3*k+j])*fRoot,out[j]=(m[3*j+i]+m[3*i+j])*fRoot,out[k]=(m[3*k+i]+m[3*i+k])*fRoot}return out}var clone=vec4.clone;exports.clone=clone;var fromValues=vec4.fromValues;exports.fromValues=fromValues;var copy=vec4.copy;exports.copy=copy;var set=vec4.set;exports.set=set;var add=vec4.add;exports.add=add;var mul=multiply;exports.mul=mul;var scale=vec4.scale;exports.scale=scale;var dot=vec4.dot;exports.dot=dot;var lerp=vec4.lerp;exports.lerp=lerp;var length=vec4.length;exports.length=length;var len=length;exports.len=len;var squaredLength=vec4.squaredLength;exports.squaredLength=squaredLength;var sqrLen=squaredLength;exports.sqrLen=sqrLen;var normalize=vec4.normalize;exports.normalize=normalize;var exactEquals=vec4.exactEquals;exports.exactEquals=exactEquals;var equals=vec4.equals;exports.equals=equals;var tmpvec3,xUnitVec3,yUnitVec3,rotationTo=(tmpvec3=vec3.create(),xUnitVec3=vec3.fromValues(1,0,0),yUnitVec3=vec3.fromValues(0,1,0),function(out,a,b){var dot=vec3.dot(a,b);return dot<-.999999?(vec3.cross(tmpvec3,xUnitVec3,a),vec3.len(tmpvec3)<1e-6&&vec3.cross(tmpvec3,yUnitVec3,a),vec3.normalize(tmpvec3,tmpvec3),setAxisAngle(out,tmpvec3,Math.PI),out):dot>.999999?(out[0]=0,out[1]=0,out[2]=0,out[3]=1,out):(vec3.cross(tmpvec3,a,b),out[0]=tmpvec3[0],out[1]=tmpvec3[1],out[2]=tmpvec3[2],out[3]=1+dot,normalize(out,out))});exports.rotationTo=rotationTo;var temp1,temp2,sqlerp=(temp1=create(),temp2=create(),function(out,a,b,c,d,t){return slerp(temp1,a,d,t),slerp(temp2,b,c,t),slerp(out,temp1,temp2,2*t*(1-t)),out});exports.sqlerp=sqlerp;var matr,setAxes=(matr=mat3.create(),function(out,view,right,up){return matr[0]=right[0],matr[3]=right[1],matr[6]=right[2],matr[1]=up[0],matr[4]=up[1],matr[7]=up[2],matr[2]=-view[0],matr[5]=-view[1],matr[8]=-view[2],normalize(out,fromMat3(out,matr))});exports.setAxes=setAxes},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(9),_interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _slicedToArray2=_interopRequireDefault(__webpack_require__(11)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_common=__webpack_require__(43),_vector=_interopRequireDefault(__webpack_require__(88)),vec3=_interopRequireWildcard(__webpack_require__(70)),EARTH_RADIUS_METERS=6371e3,SphericalCoordinates=function(){function SphericalCoordinates(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},phi=_ref.phi,theta=_ref.theta,radius=_ref.radius,bearing=_ref.bearing,pitch=_ref.pitch,_ref$radiusScale=(_ref.altitude,_ref.radiusScale),radiusScale=void 0===_ref$radiusScale?EARTH_RADIUS_METERS:_ref$radiusScale;(0,_classCallCheck2.default)(this,SphericalCoordinates),0===arguments.length?(this.phi=0,this.theta=0,this.radius=1):Number.isFinite(phi)||Number.isFinite(theta)?(this.phi=phi||0,this.theta=theta||0):(Number.isFinite(bearing)||Number.isFinite(pitch))&&(this.bearing=bearing||0,this.pitch=pitch||0),this.radius=radius||1,this.radiusScale=radiusScale||1,this.check()}return(0,_createClass2.default)(SphericalCoordinates,[{key:"toString",value:function(){return this.formatString(_common.config)}},{key:"formatString",value:function(_ref2){var printTypes=_ref2.printTypes,f=(_ref2.printDegrees,_common.formatValue);return"".concat(printTypes?"Spherical":"","[rho:").concat(f(this.radius),",theta:").concat(f(this.theta),",phi:").concat(f(this.phi),"]")}},{key:"equals",value:function(other){return(0,_common.equals)(this.radius,other.radius)&&(0,_common.equals)(this.theta,other.theta)&&(0,_common.equals)(this.phi,other.phi)}},{key:"exactEquals",value:function(other){return this.radius===other.radius&&this.theta===other.theta&&this.phi===other.phi}},{key:"set",value:function(radius,phi,theta){return this.radius=radius,this.phi=phi,this.theta=theta,this.check()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(other){return this.radius=other.radius,this.phi=other.phi,this.theta=other.theta,this.check()}},{key:"fromLngLatZ",value:function(_ref3){var _ref4=(0,_slicedToArray2.default)(_ref3,3),lng=_ref4[0],lat=_ref4[1],z=_ref4[2];this.radius=1+z/this.radiusScale,this.phi=(0,_common.radians)(lat),this.theta=(0,_common.radians)(lng)}},{key:"fromVector3",value:function(v){return this.radius=vec3.length(v),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(v[0],v[1]),this.phi=Math.acos((0,_common.clamp)(v[2]/this.radius,-1,1))),this.check()}},{key:"toVector3",value:function(){return new _vector.default(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}},{key:"makeSafe",value:function(){this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi))}},{key:"check",value:function(){if(!(Number.isFinite(this.phi)&&Number.isFinite(this.theta)&&this.radius>0))throw new Error("SphericalCoordinates: some fields set to invalid numbers");return this}},{key:"bearing",get:function(){return 180-(0,_common.degrees)(this.phi)},set:function(v){this.phi=Math.PI-(0,_common.radians)(v)}},{key:"pitch",get:function(){return(0,_common.degrees)(this.theta)},set:function(v){this.theta=(0,_common.radians)(v)}},{key:"longitude",get:function(){return(0,_common.degrees)(this.phi)}},{key:"latitude",get:function(){return(0,_common.degrees)(this.theta)}},{key:"lng",get:function(){return(0,_common.degrees)(this.phi)}},{key:"lat",get:function(){return(0,_common.degrees)(this.theta)}},{key:"z",get:function(){return(this.radius-1)*this.radiusScale}}]),SphericalCoordinates}();exports.default=SphericalCoordinates},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_matrix=_interopRequireDefault(__webpack_require__(199)),_vector=_interopRequireDefault(__webpack_require__(88)),_euler=_interopRequireDefault(__webpack_require__(322)),Pose=function(){function Pose(_ref){var _ref$x=_ref.x,x=void 0===_ref$x?0:_ref$x,_ref$y=_ref.y,y=void 0===_ref$y?0:_ref$y,_ref$z=_ref.z,z=void 0===_ref$z?0:_ref$z,_ref$roll=_ref.roll,roll=void 0===_ref$roll?0:_ref$roll,_ref$pitch=_ref.pitch,pitch=void 0===_ref$pitch?0:_ref$pitch,_ref$yaw=_ref.yaw,yaw=void 0===_ref$yaw?0:_ref$yaw,position=_ref.position,orientation=_ref.orientation;(0,_classCallCheck2.default)(this,Pose),Array.isArray(position)&&3===position.length?this.position=new _vector.default(position):this.position=new _vector.default(x,y,z),Array.isArray(orientation)&&4===orientation.length?this.orientation=new _euler.default(orientation,orientation[3]):this.orientation=new _euler.default(roll,pitch,yaw,_euler.default.RollPitchYaw)}return(0,_createClass2.default)(Pose,[{key:"getPosition",value:function(){return this.position}},{key:"getOrientation",value:function(){return this.orientation}},{key:"equals",value:function(pose){return!!pose&&(this.position.equals(pose.position)&&this.orientation.equals(pose.orientation))}},{key:"exactEquals",value:function(pose){return!!pose&&(this.position.exactEquals(pose.position)&&this.orientation.exactEquals(pose.orientation))}},{key:"getTransformationMatrix",value:function(){var sr=Math.sin(this.roll),sp=Math.sin(this.pitch),sw=Math.sin(this.yaw),cr=Math.cos(this.roll),cp=Math.cos(this.pitch),cw=Math.cos(this.yaw);return(new _matrix.default).setRowMajor(cw*cp,-sw*cr+cw*sp*sr,sw*sr+cw*sp*cr,this.x,sw*cp,cw*cr+sw*sp*sr,-cw*sr+sw*sp*cr,this.y,-sp,cp*sr,cp*cr,this.z,0,0,0,1)}},{key:"getTransformationMatrixFromPose",value:function(pose){return(new _matrix.default).multiplyRight(this.getTransformationMatrix()).multiplyRight(pose.getTransformationMatrix().invert())}},{key:"getTransformationMatrixToPose",value:function(pose){return(new _matrix.default).multiplyRight(pose.getTransformationMatrix()).multiplyRight(this.getTransformationMatrix().invert())}},{key:"x",get:function(){return this.position.x},set:function(value){return this.position.x=value}},{key:"y",get:function(){return this.position.y},set:function(value){return this.position.y=value}},{key:"z",get:function(){return this.position.z},set:function(value){return this.position.z=value}},{key:"roll",get:function(){return this.orientation.roll},set:function(value){return this.orientation.roll=value}},{key:"pitch",get:function(){return this.orientation.pitch},set:function(value){return this.orientation.pitch=value}},{key:"yaw",get:function(){return this.orientation.yaw},set:function(value){return this.orientation.yaw=value}}]),Pose}();exports.default=Pose},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_common=__webpack_require__(43),Polygon=function(){function Polygon(points){(0,_classCallCheck2.default)(this,Polygon),this.points=points,this.isClosed=(0,_common.equals)(this.points[this.points.length-1],this.points[0]),Object.freeze(this)}return(0,_createClass2.default)(Polygon,[{key:"getSignedArea",value:function(){var area=0;return this.forEachSegment(function(p1,p2){area+=(p1[0]+p2[0])*(p1[1]-p2[1])}),area/2}},{key:"getArea",value:function(){return Math.abs(this.getSignedArea())}},{key:"getWindingDirection",value:function(){return Math.sign(this.getSignedArea())}},{key:"forEachSegment",value:function(visitor){for(var length=this.points.length,i=0;i<length-1;i++)visitor(this.points[i],this.points[i+1],i,i+1);this.isPolygon&&!this.isClosed()&&visitor(this.points[length-1],this.points[0],length-1,0)}}]),Polygon}();exports.default=Polygon},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _typeof2=_interopRequireDefault(__webpack_require__(27)),_regenerator=_interopRequireDefault(__webpack_require__(133)),_asyncToGenerator2=_interopRequireDefault(__webpack_require__(134)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_webgl=__webpack_require__(42),_utils=__webpack_require__(19),statIdCounter=0,AnimationLoop=function(){function AnimationLoop(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,_classCallCheck2.default)(this,AnimationLoop);var _props$onCreateContex=props.onCreateContext,onCreateContext=void 0===_props$onCreateContex?function(opts){return(0,_webgl.createGLContext)(opts)}:_props$onCreateContex,_props$onAddHTML=props.onAddHTML,onAddHTML=void 0===_props$onAddHTML?null:_props$onAddHTML,_props$onInitialize=props.onInitialize,onInitialize=void 0===_props$onInitialize?function(){}:_props$onInitialize,_props$onRender=props.onRender,onRender=void 0===_props$onRender?function(){}:_props$onRender,_props$onFinalize=props.onFinalize,onFinalize=void 0===_props$onFinalize?function(){}:_props$onFinalize,_props$gl=props.gl,gl=void 0===_props$gl?null:_props$gl,_props$glOptions=props.glOptions,glOptions=void 0===_props$glOptions?{}:_props$glOptions,_props$debug=props.debug,debug=void 0!==_props$debug&&_props$debug,_props$createFramebuf=props.createFramebuffer,createFramebuffer=void 0!==_props$createFramebuf&&_props$createFramebuf,_props$autoResizeView=props.autoResizeViewport,autoResizeViewport=void 0===_props$autoResizeView||_props$autoResizeView,_props$autoResizeDraw=props.autoResizeDrawingBuffer,autoResizeDrawingBuffer=void 0===_props$autoResizeDraw||_props$autoResizeDraw,_props$stats=props.stats,stats=void 0===_props$stats?_webgl.lumaStats.get("animation-loop-".concat(statIdCounter++)):_props$stats,_props$useDevicePixel=props.useDevicePixels,useDevicePixels=void 0===_props$useDevicePixel||_props$useDevicePixel;"useDevicePixelRatio"in props&&(_utils.log.deprecated("useDevicePixelRatio","useDevicePixels")(),useDevicePixels=props.useDevicePixelRatio),this.props={onCreateContext:onCreateContext,onAddHTML:onAddHTML,onInitialize:onInitialize,onRender:onRender,onFinalize:onFinalize,gl:gl,glOptions:glOptions,debug:debug,createFramebuffer:createFramebuffer},this.gl=gl,this.needsRedraw=null,this.stats=stats,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:autoResizeViewport,autoResizeDrawingBuffer:autoResizeDrawingBuffer,useDevicePixels:useDevicePixels}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}return(0,_createClass2.default)(AnimationLoop,[{key:"delete",value:function(){this.stop(),this._setDisplay(null)}},{key:"setNeedsRedraw",value:function(reason){return(0,_utils.assert)("string"==typeof reason),this.needsRedraw=this.needsRedraw||reason,this}},{key:"setProps",value:function(props){return"autoResizeViewport"in props&&(this.autoResizeViewport=props.autoResizeViewport),"autoResizeDrawingBuffer"in props&&(this.autoResizeDrawingBuffer=props.autoResizeDrawingBuffer),"useDevicePixels"in props&&(this.useDevicePixels=props.useDevicePixels),this}},{key:"start",value:function(){var _this=this,opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._running?this:(this._running=!0,(0,_webgl.getPageLoadPromise)().then(function(){return!_this._running||_this._initialized?null:(_this._createWebGLContext(opts),_this._createFramebuffer(),_this._startEventHandling(),_this._initializeCallbackData(),_this._updateCallbackData(),_this._resizeCanvasDrawingBuffer(),_this._resizeViewport(),_this._gpuTimeQuery=_webgl.Query.isSupported(_this.gl,["timers"])?new _webgl.Query(_this.gl):null,_this._initialized=!0,_this.onInitialize(_this.animationProps))}).then(function(appContext){_this._running&&(_this._addCallbackData(appContext||{}),!1!==appContext&&_this._startLoop())}),this)}},{key:"redraw",value:function(){return this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this}},{key:"stop",value:function(){return this._running&&(this._finalizeCallbackData(),(0,_webgl.cancelAnimationFrame)(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}},{key:"waitForRender",value:function(){var _this2=this;return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(function(resolve){_this2._resolveNextFrame=resolve})),this._nextFramePromise}},{key:"toDataURL",value:function(){var _toDataURL=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee(){return _regenerator.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return this.setNeedsRedraw("toDataURL"),_context.next=3,this.waitForRender();case 3:return _context.abrupt("return",this.gl.canvas.toDataURL());case 4:case"end":return _context.stop()}},_callee,this)}));return function(){return _toDataURL.apply(this,arguments)}}()},{key:"onCreateContext",value:function(){var _this$props;return(_this$props=this.props).onCreateContext.apply(_this$props,arguments)}},{key:"onInitialize",value:function(){var _this$props2;return(_this$props2=this.props).onInitialize.apply(_this$props2,arguments)}},{key:"onRender",value:function(){var _this$props3;return(_this$props3=this.props).onRender.apply(_this$props3,arguments)}},{key:"onFinalize",value:function(){var _this$props4;return(_this$props4=this.props).onFinalize.apply(_this$props4,arguments)}},{key:"getHTMLControlValue",value:function(id){var defaultValue=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,element=document.getElementById(id);return element?Number(element.value):defaultValue}},{key:"setViewParameters",value:function(){return _utils.log.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}},{key:"_startLoop",value:function(){var _this3=this;(0,_webgl.cancelAnimationFrame)(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(function renderFrame(){_this3._running&&(_this3.redraw(),_this3._animationFrameId=_this3._requestAnimationFrame(renderFrame))})}},{key:"_setDisplay",value:function(display){this.display&&(this.display.delete(),this.display.animationLoop=null),display&&(display.animationLoop=this),this.display=display}},{key:"_requestAnimationFrame",value:function(renderFrameCallback){this.display&&this.display.requestAnimationFrame(renderFrameCallback)||(0,_webgl.requestAnimationFrame)(renderFrameCallback)}},{key:"_renderFrame",value:function(){var _this$display;this.display?(_this$display=this.display)._renderFrame.apply(_this$display,arguments):this.onRender.apply(this,arguments)}},{key:"_clearNeedsRedraw",value:function(){this.needsRedraw=null}},{key:"_setupFrame",value:function(){this._onSetupFrame?this._onSetupFrame(this.animationProps):(this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer())}},{key:"_initializeCallbackData",value:function(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),time:0,tick:0,tock:0,_loop:this,_animationLoop:this,_mousePosition:null}}},{key:"_updateCallbackData",value:function(){var _this$_getSizeAndAspe=this._getSizeAndAspect(),width=_this$_getSizeAndAspe.width,height=_this$_getSizeAndAspe.height,aspect=_this$_getSizeAndAspe.aspect;width===this.animationProps.width&&height===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),aspect!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=width,this.animationProps.height=height,this.animationProps.aspect=aspect,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.time=Date.now()-this.animationProps.startTime,this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps._offScreen=this.offScreen}},{key:"_finalizeCallbackData",value:function(){this.onFinalize(this.animationProps)}},{key:"_addCallbackData",value:function(appContext){"object"===(0,_typeof2.default)(appContext)&&null!==appContext&&(this.animationProps=Object.assign({},this.animationProps,appContext))}},{key:"_createWebGLContext",value:function(opts){if(this.offScreen=opts.canvas&&"undefined"!=typeof OffscreenCanvas&&opts.canvas instanceof OffscreenCanvas,opts=Object.assign({},opts,this.props.glOptions),this.gl=this.props.gl?(0,_webgl.instrumentGLContext)(this.props.gl,opts):this.onCreateContext(opts),!(0,_webgl.isWebGL)(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");(0,_webgl.resetParameters)(this.gl),this._createInfoDiv()}},{key:"_createInfoDiv",value:function(){if(this.gl.canvas&&this.props.onAddHTML){var wrapperDiv=document.createElement("div");document.body.appendChild(wrapperDiv),wrapperDiv.style.position="relative";var div=document.createElement("div");div.style.position="absolute",div.style.left="10px",div.style.bottom="10px",div.style.width="300px",div.style.background="white",wrapperDiv.appendChild(this.gl.canvas),wrapperDiv.appendChild(div);var html=this.props.onAddHTML(div);html&&(div.innerHTML=html)}}},{key:"_getSizeAndAspect",value:function(){var width=this.gl.drawingBufferWidth,height=this.gl.drawingBufferHeight,aspect=1,_this$gl$canvas=this.gl.canvas,clientWidth=_this$gl$canvas.clientWidth,clientHeight=_this$gl$canvas.clientHeight;return clientWidth>0&&clientHeight>0?aspect=clientWidth/clientHeight:width>0&&height>0&&(aspect=width/height),{width:width,height:height,aspect:aspect}}},{key:"_resizeViewport",value:function(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}},{key:"_resizeCanvasDrawingBuffer",value:function(){this.autoResizeDrawingBuffer&&(0,_webgl.resizeGLContext)(this.gl,{useDevicePixels:this.useDevicePixels})}},{key:"_createFramebuffer",value:function(){this.props.createFramebuffer&&(this.framebuffer=new _webgl.Framebuffer(this.gl))}},{key:"_resizeFramebuffer",value:function(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}},{key:"_beginTimers",value:function(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}},{key:"_endTimers",value:function(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}},{key:"_startEventHandling",value:function(){this.gl.canvas.addEventListener("mousemove",this._onMousemove),this.gl.canvas.addEventListener("mouseleave",this._onMouseleave)}},{key:"_onMousemove",value:function(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}},{key:"_onMouseleave",value:function(e){this.animationProps._mousePosition=null}}]),AnimationLoop}();exports.default=AnimationLoop},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.encodePickingColor=function(i){return[i+1&255,i+1>>8&255,i+1>>16&255]},exports.decodePickingColor=function(color){var _color=(0,_slicedToArray2.default)(color,3),i1=_color[0],i2=_color[1],i3=_color[2];return i1+256*i2+65536*i3-1},exports.getNullPickingColor=function(){return NULL_PICKING_COLOR};var _slicedToArray2=_interopRequireDefault(__webpack_require__(11)),NULL_PICKING_COLOR=new Uint8Array([0,0,0])},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.getBuffersFromGeometry=function(gl,geometry,options){var buffers={};for(var name in geometry.attributes){var attribute=geometry.attributes[name],remappedName=mapAttributeName(name,options);if(attribute.constant)buffers[remappedName]=attribute.value;else{var typedArray=attribute.value,accessor=(0,_objectSpread2.default)({},attribute);delete accessor.value,buffers[remappedName]=[new _webgl.Buffer(gl,typedArray),accessor],inferAttributeAccessor(name,accessor)}}geometry.indices&&(buffers.indices=new _webgl.Buffer(gl,{data:geometry.indices.value||geometry.indices,target:34963}));return buffers},exports.inferAttributeAccessor=inferAttributeAccessor;var _objectSpread2=_interopRequireDefault(__webpack_require__(36)),_webgl=__webpack_require__(42),_utils=__webpack_require__(19),GLTF_TO_LUMA_ATTRIBUTE_MAP={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function mapAttributeName(name,options){var _ref$attributeMap=(options||{}).attributeMap,attributeMap=void 0===_ref$attributeMap?GLTF_TO_LUMA_ATTRIBUTE_MAP:_ref$attributeMap;return attributeMap&&attributeMap[name]||name}function inferAttributeAccessor(attributeName,attribute){var category;switch(attributeName){case"indices":category=category||"indices";break;case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":category="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":category="vectors"}switch(category){case"vectors":attribute.size=attribute.size||3;break;case"uvs":attribute.size=attribute.size||2;break;case"indices":attribute.size=attribute.size||1,attribute.isIndexed=void 0===attribute.isIndexed||attribute.isIndexed,(0,_utils.assert)(attribute.value instanceof Uint16Array||attribute.value instanceof Uint32Array,'attribute array for "indices" must be of integer type')}(0,_utils.assert)(Number.isFinite(attribute.size),"attribute ".concat(attributeName," needs size"))}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(6)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_webgl=__webpack_require__(42),_shadertools=__webpack_require__(110),_seerIntegration=__webpack_require__(700),_utils=__webpack_require__(19),DEPRECATED_PICKING_UNIFORMS=["renderPickingBuffer","pickingEnabled"],BaseModel=function(){function BaseModel(gl){var props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,_classCallCheck2.default)(this,BaseModel),(0,_utils.assert)((0,_webgl.isWebGL)(gl));var _props$id=props.id,id=void 0===_props$id?(0,_utils.uid)("base-model"):_props$id;this.id=id,this.gl=gl,this.id=props.id||(0,_utils.uid)("Model"),this.lastLogTime=0,this.initialize(props),this._setBaseModelProps(props)}return(0,_createClass2.default)(BaseModel,[{key:"initialize",value:function(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.props={},this.program=this._createProgram(props),this.vertexArray=new _webgl.VertexArray(this.gl,{program:this.program}),this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.animatedUniforms={},this.animated=!1,this.animationLoop=null,this.timerQueryEnabled=!1,this.timeElapsedQuery=void 0,this.lastQueryReturned=!0,this.stats={accumulatedFrameTime:0,averageFrameTime:0,profileFrameCount:0},this.pickable=!0,this._setBaseModelProps(props),this.setUniforms(Object.assign({},this.getModuleUniforms(),this.getModuleUniforms(props.moduleSettings)))}},{key:"setProps",value:function(props){this._setBaseModelProps(props)}},{key:"delete",value:function(){for(var key in this._attributes)this._attributes[key]!==this.attributes[key]&&this._attributes[key].delete();this.program.delete(),this.vertexArray.delete(),(0,_seerIntegration.removeModel)(this.id)}},{key:"destroy",value:function(){this.delete()}},{key:"isAnimated",value:function(){return this.animated}},{key:"getProgram",value:function(){return this.program}},{key:"getUniforms",value:function(){return this.program.getUniforms()}},{key:"setUniforms",value:function(){var _this=this,uniforms=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return uniforms=Object.assign({},uniforms),(0,_seerIntegration.getOverrides)(this.id,uniforms),uniforms=this._extractAnimatedUniforms(uniforms),this.program.setUniforms(uniforms,function(){_this._checkForDeprecatedUniforms(uniforms)}),this}},{key:"updateModuleSettings",value:function(opts){var uniforms=this.getModuleUniforms(opts||{});return this.setUniforms(uniforms)}},{key:"clear",value:function(opts){return(0,_webgl.clear)(this.program.gl,opts),this}},{key:"drawGeometry",value:function(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_opts$moduleSettings=opts.moduleSettings,moduleSettings=void 0===_opts$moduleSettings?null:_opts$moduleSettings,framebuffer=opts.framebuffer,_opts$uniforms=opts.uniforms,uniforms=void 0===_opts$uniforms?{}:_opts$uniforms,_opts$attributes=opts.attributes,attributes=void 0===_opts$attributes?{}:_opts$attributes,_opts$transformFeedba=opts.transformFeedback,transformFeedback=void 0===_opts$transformFeedba?this.transformFeedback:_opts$transformFeedba,_opts$parameters=opts.parameters,parameters=void 0===_opts$parameters?{}:_opts$parameters,_opts$vertexArray=opts.vertexArray,vertexArray=void 0===_opts$vertexArray?this.vertexArray:_opts$vertexArray,animationProps=opts.animationProps;(0,_seerIntegration.addModel)(this),this.setAttributes(attributes),this.updateModuleSettings(moduleSettings),this.setUniforms(uniforms),this._refreshAnimationProps(animationProps);var logPriority=this._logDrawCallStart(2),drawParams=this.vertexArray.getDrawParams(this.props);drawParams.isInstanced&&!this.isInstanced&&_utils.log.warn("Found instanced attributes on non-instanced model",this.id)();var isIndexed=drawParams.isIndexed,indexType=drawParams.indexType,indexOffset=drawParams.indexOffset,isInstanced=this.isInstanced,instanceCount=this.instanceCount,noop=function(){},_this$props=this.props,_this$props$onBeforeR=_this$props.onBeforeRender,onBeforeRender=void 0===_this$props$onBeforeR?noop:_this$props$onBeforeR,_this$props$onAfterRe=_this$props.onAfterRender,onAfterRender=void 0===_this$props$onAfterRe?noop:_this$props$onAfterRe;onBeforeRender(),this._timerQueryStart();var didDraw=this.program.draw(Object.assign({},opts,{logPriority:logPriority,uniforms:null,framebuffer:framebuffer,parameters:parameters,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:vertexArray,transformFeedback:transformFeedback,isIndexed:isIndexed,indexType:indexType,isInstanced:isInstanced,instanceCount:instanceCount,offset:isIndexed?indexOffset:0}));return this._timerQueryEnd(),onAfterRender(),this._logDrawCallEnd(logPriority,vertexArray,framebuffer),didDraw}},{key:"transform",value:function(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_opts$discard=opts.discard,discard=void 0===_opts$discard||_opts$discard,feedbackBuffers=opts.feedbackBuffers,_opts$unbindModels=opts.unbindModels,unbindModels=void 0===_opts$unbindModels?[]:_opts$unbindModels,parameters=opts.parameters;feedbackBuffers&&this._setFeedbackBuffers(feedbackBuffers),discard&&(parameters=Object.assign({},parameters,(0,_defineProperty2.default)({},35977,discard))),unbindModels.forEach(function(model){return model.vertexArray.unbindBuffers()});try{this.draw(Object.assign({},opts,{parameters:parameters}))}finally{unbindModels.forEach(function(model){return model.vertexArray.bindBuffers()})}return this}},{key:"_setBaseModelProps",value:function(props){Object.assign(this.props,props),"uniforms"in props&&this.setUniforms(props.uniforms),"pickable"in props&&(this.pickable=props.pickable),"timerQueryEnabled"in props&&(this.timerQueryEnabled=props.timerQueryEnabled&&_webgl.Query.isSupported(this.gl,["timers"]),props.timerQueryEnabled&&!this.timerQueryEnabled&&_utils.log.warn("GPU timer not supported")()),"_animationProps"in props&&this._setAnimationProps(props._animationProps),"_animationLoop"in props&&(this.animationLoop=props._animationLoop)}},{key:"_createProgram",value:function(_ref){var _ref$vs=_ref.vs,vs=void 0===_ref$vs?null:_ref$vs,_ref$fs=_ref.fs,fs=void 0===_ref$fs?null:_ref$fs,_ref$modules=_ref.modules,modules=void 0===_ref$modules?null:_ref$modules,_ref$defines=_ref.defines,defines=void 0===_ref$defines?{}:_ref$defines,_ref$inject=_ref.inject,inject=void 0===_ref$inject?{}:_ref$inject,_ref$shaderCache=_ref.shaderCache,shaderCache=void 0===_ref$shaderCache?null:_ref$shaderCache,_ref$varyings=_ref.varyings,varyings=void 0===_ref$varyings?null:_ref$varyings,_ref$bufferMode=_ref.bufferMode,bufferMode=void 0===_ref$bufferMode?35981:_ref$bufferMode,_ref$program=_ref.program,program=void 0===_ref$program?null:_ref$program;this.getModuleUniforms=function(x){};var id=this.id;if(!program){vs=vs||_shadertools.MODULAR_SHADERS.vs,fs=fs||_shadertools.MODULAR_SHADERS.fs;var assembleResult=(0,_shadertools.assembleShaders)(this.gl,{vs:vs,fs:fs,modules:modules,inject:inject,defines:defines,log:_utils.log});vs=assembleResult.vs,fs=assembleResult.fs,program=shaderCache?shaderCache.getProgram(this.gl,{id:id,vs:vs,fs:fs}):new _webgl.Program(this.gl,{id:id,vs:vs,fs:fs,varyings:varyings,bufferMode:bufferMode}),this.getModuleUniforms=assembleResult.getUniforms||function(x){}}return(0,_utils.assert)(program instanceof _webgl.Program,"Model needs a program"),program}},{key:"_checkForDeprecatedUniforms",value:function(uniforms){DEPRECATED_PICKING_UNIFORMS.forEach(function(uniform){uniform in uniforms&&_utils.log.deprecated(uniform,"use picking shader module and Model class updateModuleSettings()")()})}},{key:"_refreshAnimationProps",value:function(animationProps){(animationProps=animationProps||this.animationLoop&&this.animationLoop.animationProps)&&this._setAnimationProps(animationProps)}},{key:"_evaluateAnimateUniforms",value:function(animationProps){if(!this.animated)return{};var animatedUniforms={};for(var uniformName in this.animatedUniforms){var valueFunction=this.animatedUniforms[uniformName];animatedUniforms[uniformName]=valueFunction(animationProps)}return animatedUniforms}},{key:"_extractAnimatedUniforms",value:function(uniforms){var foundAnimated=!1;for(var uniformName in uniforms){var newValue=uniforms[uniformName];"function"==typeof newValue?(this.animatedUniforms[uniformName]=newValue,foundAnimated=!0):delete this.animatedUniforms[uniformName]}if(this.animated=!(0,_utils.isObjectEmpty)(this.animatedUniforms),!foundAnimated)return uniforms;var staticUniforms={};for(var _uniformName in uniforms)this.animatedUniforms[_uniformName]||(staticUniforms[_uniformName]=uniforms[_uniformName]);return staticUniforms}},{key:"_timerQueryStart",value:function(){!0===this.timerQueryEnabled&&(this.timeElapsedQuery||(this.timeElapsedQuery=new _webgl.Query(this.gl)),this.lastQueryReturned&&(this.lastQueryReturned=!1,this.timeElapsedQuery.beginTimeElapsedQuery()))}},{key:"_timerQueryEnd",value:function(){if(!0===this.timerQueryEnabled&&(this.timeElapsedQuery.end(),this.timeElapsedQuery.isResultAvailable())){this.lastQueryReturned=!0;var elapsedTime=this.timeElapsedQuery.getTimerMilliseconds();this.stats.lastFrameTime=elapsedTime,this.stats.accumulatedFrameTime+=elapsedTime,this.stats.profileFrameCount++,this.stats.averageFrameTime=this.stats.accumulatedFrameTime/this.stats.profileFrameCount,_utils.log.log(2,"GPU time ".concat(this.program.id,": ").concat(this.stats.lastFrameTime,"ms average ").concat(this.stats.averageFrameTime,"ms accumulated: ").concat(this.stats.accumulatedFrameTime,"ms count: ").concat(this.stats.profileFrameCount))()}}},{key:"_logDrawCallStart",value:function(priority){var logDrawTimeout=priority>3?0:1e4;if(!(_utils.log.priority<priority||Date.now()-this.lastLogTime<logDrawTimeout))return this.lastLogTime=Date.now(),_utils.log.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:_utils.log.priority<=2})(),priority}},{key:"_logDrawCallEnd",value:function(priority,vertexArray,uniforms,framebuffer){if(void 0!==priority){var attributeTable=(0,_webgl.getDebugTableForVertexArray)({vertexArray:vertexArray,header:"".concat(this.id," attributes"),attributes:this._attributes}),_getDebugTableForUnif=(0,_webgl.getDebugTableForUniforms)({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,uniforms)}),uniformTable=_getDebugTableForUnif.table,unusedTable=_getDebugTableForUnif.unusedTable,unusedCount=_getDebugTableForUnif.unusedCount,_getDebugTableForUnif2=(0,_webgl.getDebugTableForUniforms)({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,uniforms),undefinedOnly:!0}),missingTable=_getDebugTableForUnif2.table;_getDebugTableForUnif2.count>0&&_utils.log.log("MISSING UNIFORMS",Object.keys(missingTable))(),unusedCount>0&&_utils.log.log("UNUSED UNIFORMS",Object.keys(unusedTable))();var configTable=(0,_webgl.getDebugTableForProgramConfiguration)(this.vertexArray.configuration);_utils.log.table(priority,attributeTable)(),_utils.log.table(priority,uniformTable)(),_utils.log.table(priority+1,configTable)(),(0,_seerIntegration.logModel)(this,uniforms),framebuffer&&framebuffer.log({priority:2,message:"Rendered to ".concat(framebuffer.id)}),_utils.log.groupEnd(2,">>> DRAWING MODEL ".concat(this.id))()}}}]),BaseModel}();exports.default=BaseModel},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default="#define SHADER_NAME luma_modular_vertex\n\n// object attributes\nattribute vec3 positions;\nattribute vec3 normals;\nattribute vec4 colors;\nattribute vec2 texCoords;\nattribute vec3 pickingColors;\n\nvoid main(void) {\n\n  // Set up position\n#ifdef MODULE_GEOMETRY\n  geometry_setPosition(positions);\n  geometry_setNormal(normals);\n#endif\n\n#ifdef MODULE_PROJECT\n  project_setPositionAndNormal_Model(positions, normals);\n  gl_Position = project_model_to_clipspace(positions);\n#endif\n\n  // Set up depth\n#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n\n#ifdef MODULE_DIFFUSE\n  diffuse_setTextureCoordinate(texCoords);\n#endif\n\n  // Set up color calculations\n#ifdef MODULE_MATERIAL\n  material_setDiffuseColor(colors);\n  material_setDiffuseTextureCoordinates(texCoords);\n#endif\n\n#ifdef MODULE_LIGHTING\n  lighting_setPositionAndNormal(positions, normals);\n  lighting_apply_light(positions);\n  lighting_apply_reflection(positions);\n#endif\n\n#ifdef MODULE_PICKING\n  picking_setPickingColor(pickingColors);\n#endif\n\n}\n"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default="#define SHADER_NAME luma-modular-fragment\n\nprecision highp float;\n\n// varyings\nvarying vec4 vColor;\n\nvoid main(){\n  gl_FragColor = vec4(1., 0., 1., 1.);\n\n#ifdef MODULE_DIFFUSE\n  gl_FragColor = diffuse_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth(gl_Position);\n#endif\n}\n"},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_shaderModule=_interopRequireDefault(__webpack_require__(673)),_utils=__webpack_require__(111),ShaderModuleRegistry=function(){function ShaderModuleRegistry(){(0,_classCallCheck2.default)(this,ShaderModuleRegistry),this.shaderModules={},this.defaultShaderModules=[]}return(0,_createClass2.default)(ShaderModuleRegistry,[{key:"setDefaultShaderModules",value:function(modules){this.defaultShaderModules=this.resolveModules(modules)}},{key:"registerShaderModules",value:function(shaderModuleList){var _ref$ignoreMultipleRe=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ignoreMultipleRegistrations,ignoreMultipleRegistrations=void 0!==_ref$ignoreMultipleRe&&_ref$ignoreMultipleRe,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=shaderModuleList[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var shaderModule=_step.value;this._registerShaderModule(shaderModule,ignoreMultipleRegistrations)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}},{key:"getShaderModule",value:function(moduleOrName){if(moduleOrName instanceof _shaderModule.default)return moduleOrName;if("string"!=typeof moduleOrName)return this._registerShaderModule(moduleOrName,!0);var module=this.shaderModules[moduleOrName];return module||(0,_utils.assert)(!1,"Unknown shader module ".concat(moduleOrName)),module}},{key:"resolveModules",value:function(modules){var _this=this;return modules.map(function(moduleOrName){return _this.getShaderModule(moduleOrName)})}},{key:"_registerShaderModule",value:function(module){var ignoreMultipleRegistrations=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(module instanceof _shaderModule.default)return module;if((0,_utils.assert)(module.name,"shader module has no name"),this.shaderModules[module.name]&&!ignoreMultipleRegistrations)throw new Error("shader module ".concat(module.name," already registered"));return(module=new _shaderModule.default(module)).dependencies=this.resolveModules(module.dependencies),this.shaderModules[module.name]=module,this.shaderModules[module.name]}}]),ShaderModuleRegistry}();exports.default=ShaderModuleRegistry},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_transpileShader=_interopRequireDefault(__webpack_require__(674)),_utils=__webpack_require__(111),ShaderModule=function(){function ShaderModule(_ref){var name=_ref.name,vs=_ref.vs,fs=_ref.fs,_ref$dependencies=_ref.dependencies,dependencies=void 0===_ref$dependencies?[]:_ref$dependencies,_ref$getUniforms=_ref.getUniforms,getUniforms=void 0===_ref$getUniforms?function(){return{}}:_ref$getUniforms,_ref$deprecations=_ref.deprecations,deprecations=void 0===_ref$deprecations?[]:_ref$deprecations,_ref$defines=_ref.defines,defines=void 0===_ref$defines?{}:_ref$defines,vertexShader=_ref.vertexShader,fragmentShader=_ref.fragmentShader;(0,_classCallCheck2.default)(this,ShaderModule),(0,_utils.assert)("string"==typeof name),this.name=name,this.vs=vs||vertexShader,this.fs=fs||fragmentShader,this.getModuleUniforms=getUniforms,this.dependencies=dependencies,this.deprecations=this._parseDeprecationDefinitions(deprecations),this.defines=defines}return(0,_createClass2.default)(ShaderModule,[{key:"getModuleSource",value:function(type,targetGLSLVersion){var moduleSource;switch(type){case"vs":moduleSource=(0,_transpileShader.default)(this.vs||"",targetGLSLVersion,!0);break;case"fs":moduleSource=(0,_transpileShader.default)(this.fs||"",targetGLSLVersion,!1);break;default:(0,_utils.assert)(!1)}return"string"!=typeof moduleSource?"":"#define MODULE_".concat(this.name.toUpperCase(),"\n").concat(moduleSource,"// END MODULE_").concat(this.name,"\n\n")}},{key:"getUniforms",value:function(opts,uniforms){return this.getModuleUniforms(opts,uniforms)}},{key:"getDefines",value:function(){return this.defines}},{key:"checkDeprecations",value:function(shaderSource,log){this.deprecations.forEach(function(def){def.regex.test(shaderSource)&&(def.deprecated&&log?log.deprecated(def.old,def.new)():log&&log.removed(def.old,def.new)())})}},{key:"_parseDeprecationDefinitions",value:function(){var deprecations=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return deprecations.forEach(function(def){switch(def.type){case"function":def.regex=new RegExp("\\b".concat(def.old,"\\("));break;default:def.regex=new RegExp("".concat(def.type," ").concat(def.old,";"))}}),deprecations}}]),ShaderModule}();exports.default=ShaderModule},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(source,targetGLSLVersion,isVertex){switch(targetGLSLVersion){case 300:return isVertex?function(source){return source.replace(/attribute\s+/g,"in ").replace(/varying\s+/g,"out ").replace(/texture2D\(/g,"texture(").replace(/textureCube\(+/g,"texture(").replace(/texture2DLodEXT\(/g,"textureLod(").replace(/textureCubeLodEXT\(/g,"textureLod(")}(source):function(source){return source.replace(/varying\s+/g,"in ").replace(/texture2D\(/g,"texture(").replace(/textureCube\(/g,"texture(").replace(/texture2DLodEXT\(/g,"textureLod(").replace(/textureCubeLodEXT\(/g,"textureLod(")}(source);case 100:return isVertex?function(source){return source.replace(/^in\s+/gm,"attribute ").replace(/^out\s+/gm,"varying ").replace(/texture\(/g,"texture2D(")}(source):function(source){return source.replace(/^in\s+/gm,"varying ").replace(/texture\(/g,"texture2D(")}(source);default:throw new Error("unknown GLSL version ".concat(targetGLSLVersion))}}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.assembleShaders=function(gl){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},vs=opts.vs,fs=opts.fs,modules=(0,_resolveModules.resolveModules)(opts.modules||[]);return{gl:gl,vs:assembleShader(gl,Object.assign({},opts,{source:vs,type:_constants.VERTEX_SHADER,modules:modules})),fs:assembleShader(gl,Object.assign({},opts,{source:fs,type:_constants.FRAGMENT_SHADER,modules:modules})),getUniforms:assembleGetUniforms(modules),modules:assembleModuleMap(modules)}};var _SHADER_TYPE,_defineProperty2=_interopRequireDefault(__webpack_require__(6)),_constants=__webpack_require__(325),_resolveModules=__webpack_require__(323),_platformDefines=__webpack_require__(676),_injectShader=_interopRequireDefault(__webpack_require__(326)),_utils=__webpack_require__(111),SHADER_TYPE=(_SHADER_TYPE={},(0,_defineProperty2.default)(_SHADER_TYPE,_constants.VERTEX_SHADER,"vertex"),(0,_defineProperty2.default)(_SHADER_TYPE,_constants.FRAGMENT_SHADER,"fragment"),_SHADER_TYPE),FRAGMENT_SHADER_PROLOGUE="precision highp float;\n\n";function assembleShader(gl,_ref){var id=_ref.id,source=_ref.source,type=_ref.type,_ref$modules=_ref.modules,modules=void 0===_ref$modules?[]:_ref$modules,_ref$defines=_ref.defines,defines=void 0===_ref$defines?{}:_ref$defines,_ref$inject=_ref.inject,inject=void 0===_ref$inject?{}:_ref$inject,_ref$prologue=_ref.prologue,prologue=void 0===_ref$prologue||_ref$prologue,log=_ref.log;(0,_utils.assert)("string"==typeof source,"shader source must be a string");var isVertex=type===_constants.VERTEX_SHADER,sourceLines=source.split("\n"),glslVersion=100,versionLine="",coreSource=source;0===sourceLines[0].indexOf("#version ")&&(glslVersion=300,versionLine=sourceLines[0],coreSource=sourceLines.slice(1).join("\n"));var allDefines={};modules.forEach(function(module){Object.assign(allDefines,module.getDefines())}),Object.assign(allDefines,defines);var assembledSource=prologue?"".concat(versionLine,"\n").concat(function(_ref3){var id=_ref3.id,source=_ref3.source,type=_ref3.type;return id&&"string"==typeof id&&-1===source.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(id,"_").concat(SHADER_TYPE[type],"\n\n"):""}({id:id,source:source,type:type}),"\n").concat(function(_ref2){var type=_ref2.type;return"\n#define SHADER_TYPE_".concat(SHADER_TYPE[type].toUpperCase(),"\n")}({type:type}),"\n").concat((0,_platformDefines.getPlatformShaderDefines)(gl),"\n").concat((0,_platformDefines.getVersionDefines)(gl,glslVersion,!isVertex),"\n").concat(function(){var defines=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},count=0,sourceText="";for(var define in defines){0===count&&(sourceText+="\n// APPLICATION DEFINES\n"),count++;var value=defines[define];(value||Number.isFinite(value))&&(sourceText+="#define ".concat(define.toUpperCase()," ").concat(defines[define],"\n"))}0===count&&(sourceText+="\n");return sourceText}(allDefines),"\n").concat(isVertex?"":FRAGMENT_SHADER_PROLOGUE,"\n"):"".concat(versionLine,"\n"),injectStandardStubs=!1,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=modules[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var module=_step.value;switch(module.name){case"inject":injectStandardStubs=!0;break;default:module.checkDeprecations(coreSource,log),assembledSource+=module.getModuleSource(type,glslVersion)}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return assembledSource+=coreSource,assembledSource=(0,_injectShader.default)(assembledSource,type,inject,injectStandardStubs)}function assembleGetUniforms(modules){return function(opts){var uniforms={},_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=modules[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var moduleUniforms=_step2.value.getUniforms(opts,uniforms);Object.assign(uniforms,moduleUniforms)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return uniforms}}function assembleModuleMap(modules){var result={},_iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=modules[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var moduleName=_step3.value,shaderModule=(0,_resolveModules.getShaderModule)(moduleName);result[moduleName]=shaderModule}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{_iteratorNormalCompletion3||null==_iterator3.return||_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}return result}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPlatformShaderDefines=function(gl){switch((0,_webglInfo.getContextInfo)(gl).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}},exports.getVersionDefines=function(gl,glslVersion,isFragment){var versionDefines="#if (__VERSION__ > 120)\n\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";(0,_webglInfo.hasFeatures)(gl,_webglInfo.FEATURES.GLSL_FRAG_DEPTH)&&(versionDefines+="// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n");(0,_webglInfo.hasFeatures)(gl,_webglInfo.FEATURES.GLSL_DERIVATIVES)&&(0,_webglInfo.canCompileGLGSExtension)(gl,_webglInfo.FEATURES.GLSL_DERIVATIVES)&&(versionDefines+="// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define DERIVATIVES\n#endif\n");(0,_webglInfo.hasFeatures)(gl,_webglInfo.FEATURES.GLSL_FRAG_DATA)&&(0,_webglInfo.canCompileGLGSExtension)(gl,_webglInfo.FEATURES.GLSL_FRAG_DATA,{behavior:"require"})&&(versionDefines+="// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define DRAW_BUFFERS\n#endif\n");(0,_webglInfo.hasFeatures)(gl,_webglInfo.FEATURES.GLSL_TEXTURE_LOD)&&(versionDefines+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n# define TEXTURE_LOD\n#define texture2DLod texture2DLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define textureCubeLod textureCubeLodEXT\n#define texture2DGrad texture2DGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define textureCubeGrad textureCubeGradEXT\n#endif\n");return versionDefines};var _webglInfo=__webpack_require__(677)},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.getContextInfo=function(gl){var info=gl.getExtension("WEBGL_debug_renderer_info"),vendor=gl.getParameter(info&&info.UNMASKED_VENDOR_WEBGL||GL_VENDOR),renderer=gl.getParameter(info&&info.UNMASKED_RENDERER_WEBGL||GL_RENDERER);return{gpuVendor:identifyGPUVendor(vendor,renderer),vendor:vendor,renderer:renderer,version:gl.getParameter(GL_VERSION),shadingLanguageVersion:gl.getParameter(GL_SHADING_LANGUAGE_VERSION)}},exports.canCompileGLGSExtension=function(gl,cap){var opts=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},feature=WEBGL_FEATURES[cap];if((0,_assert.default)(feature,cap),!(0,_isOldIe.default)(opts))return!0;if(cap in compiledGlslExtensions)return compiledGlslExtensions[cap];var extensionName=feature[0],behavior=opts.behavior||"enable",source="#extension GL_".concat(extensionName," : ").concat(behavior,"\nvoid main(void) {}"),shader=gl.createShader(35633);gl.shaderSource(shader,source),gl.compileShader(shader);var canCompile=gl.getShaderParameter(shader,35713);return gl.deleteShader(shader),compiledGlslExtensions[cap]=canCompile,canCompile},exports.hasFeatures=function(gl,features){return(features=Array.isArray(features)?features:[features]).every(function(feature){return function(gl,cap){var feature=WEBGL_FEATURES[cap];(0,_assert.default)(feature,cap);var extensionName=function(gl){return Boolean(gl&&2===gl._version)}(gl)&&feature[1]||feature[0],value="string"==typeof extensionName?Boolean(gl.getExtension(extensionName)):extensionName;return(0,_assert.default)(!1===value||!0===value),value}(gl,feature)})},exports.FEATURES=void 0;var _isOldIe=_interopRequireDefault(__webpack_require__(678)),_assert=_interopRequireDefault(__webpack_require__(324)),GL_VENDOR=7936,GL_RENDERER=7937,GL_VERSION=7938,GL_SHADING_LANGUAGE_VERSION=35724,WEBGL_FEATURES={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},FEATURES={};function identifyGPUVendor(vendor,renderer){return vendor.match(/NVIDIA/i)||renderer.match(/NVIDIA/i)?"NVIDIA":vendor.match(/INTEL/i)||renderer.match(/INTEL/i)?"INTEL":vendor.match(/AMD/i)||renderer.match(/AMD/i)||vendor.match(/ATI/i)||renderer.match(/ATI/i)?"AMD":"UNKNOWN GPU"}exports.FEATURES=FEATURES,Object.keys(WEBGL_FEATURES).forEach(function(key){FEATURES[key]=key});var compiledGlslExtensions={}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},navigator="undefined"!=typeof window&&window.navigator||{},userAgent=opts.userAgent||navigator.userAgent||"",isMSIE=-1!==userAgent.indexOf("MSIE "),isTrident=-1!==userAgent.indexOf("Trident/");return isMSIE||isTrident}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MODULE_INJECTORS_FS=exports.MODULE_INJECTORS_VS=void 0;exports.MODULE_INJECTORS_VS="#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n";exports.MODULE_INJECTORS_FS="#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.normalizeShaderModule=function(module){if(!module.normalized){if(module.normalized=!0,module.uniforms){var _parsePropTypes=(0,_propTypes.parsePropTypes)(module.uniforms),propTypes=_parsePropTypes.propTypes;module.uniforms=propTypes}module.uniforms&&!module.getUniforms&&(module.getUniforms=function(module,props){var uniforms={};if(void 0===props){for(var key in module.uniforms)uniforms[key]=module.uniforms[key].value;return uniforms}for(var _key in props)uniforms[_key]=props[_key];return uniforms}.bind(null,module))}return module};var _propTypes=__webpack_require__(681)},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.parsePropTypes=function(propDefs){for(var propTypes={},defaultProps={},_i=0,_Object$entries=Object.entries(propDefs);_i<_Object$entries.length;_i++){var _Object$entries$_i=(0,_slicedToArray2.default)(_Object$entries[_i],2),propName=_Object$entries$_i[0],propDef=_Object$entries$_i[1],propType=parsePropType(propName,propDef);propTypes[propName]=propType,defaultProps[propName]=propType.value}return{propTypes:propTypes,defaultProps:defaultProps}};var _typeof2=_interopRequireDefault(__webpack_require__(27)),_slicedToArray2=_interopRequireDefault(__webpack_require__(11)),TYPE_DEFINITIONS={boolean:{validate:function(value,propType){return!0}},number:{validateType:function(value,propType){return"value"in propType&&(!("max"in propType)||Number.isFinite(propType.max))&&(!("min"in propType)||Number.isFinite(propType.min))},validate:function(value,propType){return Number.isFinite(value)&&(!("max"in propType)||value<=propType.max)&&(!("min"in propType)||value>=propType.min)}}};function parsePropType(name,propDef){switch(getTypeOf(propDef)){case"object":return function(propDef){var type=propDef.type;(TYPE_DEFINITIONS[type]||{}).typeValidator;return propDef}(propDef=function(name,propDef){if(!("type"in propDef))return"value"in propDef?Object.assign({name:name,type:getTypeOf(propDef.value)},propDef):{name:name,type:"object",value:propDef};return Object.assign({name:name},propDef)}(name,propDef));case"array":return function(name,array){if(/color/i.test(name)&&(3===array.length||4===array.length))return{name:name,type:"color",value:array};return{name:name,type:"array",value:array}}(name,propDef);case"boolean":return{name:name,type:"boolean",value:propDef};case"number":return function(name,value){var max=/radius|scale|width|height|pixel|size|miter/i.test(name)&&/^((?!scale).)*$/.test(name)?100:1;return{name:name,type:"number",max:Math.max(value,max),min:Math.min(value,0),value:value}}(name,propDef);case"function":return{name:name,type:"function",value:propDef};default:return{name:name,type:"unknown",value:propDef}}}function getTypeOf(value){return Array.isArray(value)||ArrayBuffer.isView(value)?"array":null===value?"null":(0,_typeof2.default)(value)}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.getQualifierDetails=function(line,qualifiers){qualifiers=Array.isArray(qualifiers)?qualifiers:[qualifiers];var words=line.replace(/^\s+/,"").split(/\s+/),_words=(0,_slicedToArray2.default)(words,3),qualifier=_words[0],type=_words[1],definition=_words[2];if(!qualifiers.includes(qualifier)||!type||!definition)return null;var name=definition.split(";")[0];return{qualifier:qualifier,type:type,name:name}},exports.getPassthroughFS=function(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$version=_ref.version,version=void 0===_ref$version?100:_ref$version,input=_ref.input,inputType=_ref.inputType,output=_ref.output;if(!input)return 300===version?FS300:FS100;var outputValue=convertToVec4(input,inputType);if(300===version)return"#version 300 es\nin ".concat(inputType," ").concat(input,";\nout vec4 ").concat(output,";\nvoid main() {\n  ").concat(output," = ").concat(outputValue,";\n}");return"varying ".concat(inputType," ").concat(input,";\nvoid main() {\n  gl_FragColor = ").concat(outputValue,";\n}")},exports.typeToChannelSuffix=function(type){switch(type){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return(0,_utils.assert)(!1),null}},exports.typeToChannelCount=function(type){switch(type){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return(0,_utils.assert)(!1),null}},exports.convertToVec4=convertToVec4;var _slicedToArray2=_interopRequireDefault(__webpack_require__(11)),_utils=__webpack_require__(111),FS100="void main() {}",FS300="#version 300 es\n".concat(FS100);function convertToVec4(variable,type){switch(type){case"float":return"vec4(".concat(variable,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(variable,", 0.0, 1.0)");case"vec3":return"vec4(".concat(variable,", 1.0)");case"vec4":return variable;default:return(0,_utils.assert)(!1),null}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 0.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 0.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null};exports.default=_default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"fp64ify",{enumerable:!0,get:function(){return _fp64Utils.fp64ify}}),Object.defineProperty(exports,"fp64LowPart",{enumerable:!0,get:function(){return _fp64Utils.fp64LowPart}}),Object.defineProperty(exports,"fp64ifyMatrix4",{enumerable:!0,get:function(){return _fp64Utils.fp64ifyMatrix4}}),exports.fp64fs=exports.fp64arithmetic=exports.default=void 0;var _fp64Utils=__webpack_require__(685),_fp64Arithmetic=_interopRequireDefault(__webpack_require__(686)),_fp64Functions=_interopRequireDefault(__webpack_require__(687)),fp64shader="".concat(_fp64Arithmetic.default,"\n").concat(_fp64Functions.default),CONST_UNIFORMS={ONE:1};var _default={name:"fp64",vs:fp64shader,fs:null,fp64ify:_fp64Utils.fp64ify,fp64LowPart:_fp64Utils.fp64LowPart,fp64ifyMatrix4:_fp64Utils.fp64ifyMatrix4,getUniforms:function(){return Object.assign({},CONST_UNIFORMS)}};exports.default=_default;var fp64arithmetic={name:"fp64-arithmetic",vs:"".concat(_fp64Arithmetic.default),fs:null};exports.fp64arithmetic=fp64arithmetic;var fp64fs={name:"fp64-fs",vs:null,fs:fp64shader};exports.fp64fs=fp64fs},function(module,exports,__webpack_require__){"use strict";function fp64ify(a){var out=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],startIndex=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,hiPart=Math.fround(a),loPart=a-hiPart;return out[startIndex]=hiPart,out[startIndex+1]=loPart,out}Object.defineProperty(exports,"__esModule",{value:!0}),exports.fp64ify=fp64ify,exports.fp64LowPart=function(a){return a-Math.fround(a)},exports.fp64ifyMatrix4=function(matrix){for(var matrixFP64=new Float32Array(32),i=0;i<4;++i)for(var j=0;j<4;++j){var index=4*i+j;fp64ify(matrix[4*j+i],matrixFP64,2*index)}return matrixFP64}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default="uniform float ONE;\nvec2 split(float a) {\n  const float SPLIT = 4097.0;\n  float t = a * SPLIT;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float a_hi = t * ONE - (t - a);\n  float a_lo = a * ONE - a_hi;\n#else\n  float a_hi = t - (t - a);\n  float a_lo = a - a_hi;\n#endif\n  return vec2(a_hi, a_lo);\n}\nvec2 split2(vec2 a) {\n  vec2 b = split(a.x);\n  b.y += a.y;\n  return b;\n}\nvec2 quickTwoSum(float a, float b) {\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float sum = (a + b) * ONE;\n  float err = b - (sum - a) * ONE;\n#else\n  float sum = a + b;\n  float err = b - (sum - a);\n#endif\n  return vec2(sum, err);\n}\nvec2 twoSum(float a, float b) {\n  float s = (a + b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) + (b - v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSub(float a, float b) {\n  float s = (a - b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) - (b + v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSqr(float a) {\n  float prod = a * a;\n  vec2 a_fp64 = split(a);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *\n    a_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;\n#else\n  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\n#endif\n  return vec2(prod, err);\n}\n\nvec2 twoProd(float a, float b) {\n  float prod = a * b;\n  vec2 a_fp64 = split(a);\n  vec2 b_fp64 = split(b);\n  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\n    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\n  return vec2(prod, err);\n}\n\nvec2 sum_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSum(a.x, b.x);\n  t = twoSum(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 sub_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSub(a.x, b.x);\n  t = twoSub(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 mul_fp64(vec2 a, vec2 b) {\n  vec2 prod = twoProd(a.x, b.x);\n  prod.y += a.x * b.y;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  prod.y += a.y * b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  return prod;\n}\n\nvec2 div_fp64(vec2 a, vec2 b) {\n  float xn = 1.0 / b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  vec2 yn = mul_fp64(a, vec2(xn, 0));\n#else\n  vec2 yn = a * xn;\n#endif\n  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;\n  vec2 prod = twoProd(xn, diff);\n  return sum_fp64(yn, prod);\n}\n\nvec2 sqrt_fp64(vec2 a) {\n  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n\n  float x = 1.0 / sqrt(a.x);\n  float yn = a.x * x;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  vec2 yn_sqr = twoSqr(yn) * ONE;\n#else\n  vec2 yn_sqr = twoSqr(yn);\n#endif\n  float diff = sub_fp64(a, yn_sqr).x;\n  vec2 prod = twoProd(x * 0.5, diff);\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  return sum_fp64(split(yn), prod);\n#else\n  return sum_fp64(vec2(yn, 0.0), prod);\n#endif\n}\n"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default="const vec2 E_FP64 = vec2(2.7182817459106445e+00, 8.254840366817007e-08);\nconst vec2 LOG2_FP64 = vec2(0.6931471824645996e+00, -1.9046542121259336e-09);\nconst vec2 PI_FP64 = vec2(3.1415927410125732, -8.742278012618954e-8);\nconst vec2 TWO_PI_FP64 = vec2(6.2831854820251465, -1.7484556025237907e-7);\nconst vec2 PI_2_FP64 = vec2(1.5707963705062866, -4.371139006309477e-8);\nconst vec2 PI_4_FP64 = vec2(0.7853981852531433, -2.1855695031547384e-8);\nconst vec2 PI_16_FP64 = vec2(0.19634954631328583, -5.463923757886846e-9);\nconst vec2 PI_16_2_FP64 = vec2(0.39269909262657166, -1.0927847515773692e-8);\nconst vec2 PI_16_3_FP64 = vec2(0.5890486240386963, -1.4906100798128818e-9);\nconst vec2 PI_180_FP64 = vec2(0.01745329238474369, 1.3519960498364902e-10);\n\nconst vec2 SIN_TABLE_0_FP64 = vec2(0.19509032368659973, -1.6704714833615242e-9);\nconst vec2 SIN_TABLE_1_FP64 = vec2(0.3826834261417389, 6.22335089017767e-9);\nconst vec2 SIN_TABLE_2_FP64 = vec2(0.5555702447891235, -1.1769521357507529e-8);\nconst vec2 SIN_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617041793133e-8);\n\nconst vec2 COS_TABLE_0_FP64 = vec2(0.9807852506637573, 2.9739473106360492e-8);\nconst vec2 COS_TABLE_1_FP64 = vec2(0.9238795042037964, 2.8307490351764386e-8);\nconst vec2 COS_TABLE_2_FP64 = vec2(0.8314695954322815, 1.6870263741530778e-8);\nconst vec2 COS_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617152815436e-8);\n\nconst vec2 INVERSE_FACTORIAL_3_FP64 = vec2(1.666666716337204e-01, -4.967053879312289e-09);\nconst vec2 INVERSE_FACTORIAL_4_FP64 = vec2(4.16666679084301e-02, -1.2417634698280722e-09);\nconst vec2 INVERSE_FACTORIAL_5_FP64 = vec2(8.333333767950535e-03, -4.34617203337595e-10);\nconst vec2 INVERSE_FACTORIAL_6_FP64 = vec2(1.3888889225199819e-03, -3.3631094437103215e-11);\nconst vec2 INVERSE_FACTORIAL_7_FP64 = vec2(1.9841270113829523e-04,  -2.725596874933456e-12);\nconst vec2 INVERSE_FACTORIAL_8_FP64 = vec2(2.4801587642286904e-05, -3.406996025904184e-13);\nconst vec2 INVERSE_FACTORIAL_9_FP64 = vec2(2.75573188446287533e-06, 3.7935713937038186e-14);\nconst vec2 INVERSE_FACTORIAL_10_FP64 = vec2(2.755731998149713e-07, -7.575112367869873e-15);\n\nfloat nint(float d) {\n    if (d == floor(d)) return d;\n    return floor(d + 0.5);\n}\n\nvec2 nint_fp64(vec2 a) {\n    float hi = nint(a.x);\n    float lo;\n    vec2 tmp;\n    if (hi == a.x) {\n        lo = nint(a.y);\n        tmp = quickTwoSum(hi, lo);\n    } else {\n        lo = 0.0;\n        if (abs(hi - a.x) == 0.5 && a.y < 0.0) {\n            hi -= 1.0;\n        }\n        tmp = vec2(hi, lo);\n    }\n    return tmp;\n}\n\nvec2 exp_fp64(vec2 a) {\n\n  const int k_power = 4;\n  const float k = 16.0;\n\n  const float inv_k = 1.0 / k;\n\n  if (a.x <= -88.0) return vec2(0.0, 0.0);\n  if (a.x >= 88.0) return vec2(1.0 / 0.0, 1.0 / 0.0);\n  if (a.x == 0.0 && a.y == 0.0) return vec2(1.0, 0.0);\n  if (a.x == 1.0 && a.y == 0.0) return E_FP64;\n\n  float m = floor(a.x / LOG2_FP64.x + 0.5);\n  vec2 r = sub_fp64(a, mul_fp64(LOG2_FP64, vec2(m, 0.0))) * inv_k;\n  vec2 s, t, p;\n\n  p = mul_fp64(r, r);\n  s = sum_fp64(r, p * 0.5);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_3_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_4_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_5_FP64);\n\n\n\n\n\n\n  s = sum_fp64(s, t);\n  for (int i = 0; i < k_power; i++) {\n    s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  }\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = sum_fp64(s, vec2(ONE, 0.0));\n#else\n  s = sum_fp64(s, vec2(1.0, 0.0));\n#endif\n\n  return s * pow(2.0, m);\n}\n\nvec2 log_fp64(vec2 a)\n{\n  if (a.x == 1.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x <= 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n  vec2 x = vec2(log(a.x), 0.0);\n  vec2 s;\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = vec2(ONE, 0.0);\n#else\n  s = vec2(1.0, 0.0);\n#endif\n\n  x = sub_fp64(sum_fp64(x, mul_fp64(a, exp_fp64(-x))), s);\n  return x;\n}\n\nvec2 sin_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(0.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  s = a;\n  r = a;\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_3_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_5_FP64);\n  s = sum_fp64(s, t);\n\n\n\n\n\n\n  return s;\n}\n\nvec2 cos_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(1.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  r = x;\n  s = sum_fp64(vec2(1.0, 0.0), r * 0.5);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_4_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_6_FP64);\n  s = sum_fp64(s, t);\n\n\n\n\n\n\n  return s;\n}\n\nvoid sincos_taylor_fp64(vec2 a, out vec2 sin_t, out vec2 cos_t) {\n  if (a.x == 0.0 && a.y == 0.0) {\n    sin_t = vec2(0.0, 0.0);\n    cos_t = vec2(1.0, 0.0);\n  }\n\n  sin_t = sin_taylor_fp64(a);\n  cos_t = sqrt_fp64(sub_fp64(vec2(1.0, 0.0), mul_fp64(sin_t, sin_t)));\n}\n\nvec2 sin_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return sin_taylor_fp64(t);\n        } else if (j == 1) {\n            return cos_taylor_fp64(t);\n        } else if (j == -1) {\n            return -cos_taylor_fp64(t);\n        } else {\n            return -sin_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 cos_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(1.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return cos_taylor_fp64(t);\n        } else if (j == 1) {\n            return -sin_taylor_fp64(t);\n        } else if (j == -1) {\n            return sin_taylor_fp64(t);\n        } else {\n            return -cos_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 tan_fp64(vec2 a) {\n    vec2 sin_a;\n    vec2 cos_a;\n\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n    vec2 sin_t, cos_t;\n    vec2 s, c;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#else\n        if (abs_k == 1) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs_k == 2) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs_k == 3) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs_k == 4) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#endif\n        if (k > 0) {\n            s = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            s = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return div_fp64(sin_a, cos_a);\n}\n\nvec2 radians_fp64(vec2 degree) {\n  return mul_fp64(degree, PI_180_FP64);\n}\n\nvec2 mix_fp64(vec2 a, vec2 b, float x) {\n  vec2 range = sub_fp64(b, a);\n  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));\n}\n\nvoid vec2_sum_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sum_fp64(a[0], b[0]);\n    out_val[1] = sum_fp64(a[1], b[1]);\n}\n\nvoid vec2_sub_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sub_fp64(a[0], b[0]);\n    out_val[1] = sub_fp64(a[1], b[1]);\n}\n\nvoid vec2_mul_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = mul_fp64(a[0], b[0]);\n    out_val[1] = mul_fp64(a[1], b[1]);\n}\n\nvoid vec2_div_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = div_fp64(a[0], b[0]);\n    out_val[1] = div_fp64(a[1], b[1]);\n}\n\nvoid vec2_mix_fp64(vec2 x[2], vec2 y[2], float a, out vec2 out_val[2]) {\n  vec2 range[2];\n  vec2_sub_fp64(y, x, range);\n  vec2 portion[2];\n  portion[0] = range[0] * a;\n  portion[1] = range[1] * a;\n  vec2_sum_fp64(x, portion, out_val);\n}\n\nvec2 vec2_length_fp64(vec2 x[2]) {\n  return sqrt_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])));\n}\n\nvoid vec2_normalize_fp64(vec2 x[2], out vec2 out_val[2]) {\n  vec2 length = vec2_length_fp64(x);\n  vec2 length_vec2[2];\n  length_vec2[0] = length;\n  length_vec2[1] = length;\n\n  vec2_div_fp64(x, length_vec2, out_val);\n}\n\nvec2 vec2_distance_fp64(vec2 x[2], vec2 y[2]) {\n  vec2 diff[2];\n  vec2_sub_fp64(x, y, diff);\n  return vec2_length_fp64(diff);\n}\n\nvec2 vec2_dot_fp64(vec2 a[2], vec2 b[2]) {\n  vec2 v[2];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n\n  return sum_fp64(v[0], v[1]);\n}\nvoid vec3_sub_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec3_sum_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvec2 vec3_length_fp64(vec2 x[3]) {\n  return sqrt_fp64(sum_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])),\n    mul_fp64(x[2], x[2])));\n}\n\nvec2 vec3_distance_fp64(vec2 x[3], vec2 y[3]) {\n  vec2 diff[3];\n  vec3_sub_fp64(x, y, diff);\n  return vec3_length_fp64(diff);\n}\nvoid vec4_fp64(vec4 a, out vec2 out_val[4]) {\n  out_val[0].x = a[0];\n  out_val[0].y = 0.0;\n\n  out_val[1].x = a[1];\n  out_val[1].y = 0.0;\n\n  out_val[2].x = a[2];\n  out_val[2].y = 0.0;\n\n  out_val[3].x = a[3];\n  out_val[3].y = 0.0;\n}\n\nvoid vec4_scalar_mul_fp64(vec2 a[4], vec2 b, out vec2 out_val[4]) {\n  out_val[0] = mul_fp64(a[0], b);\n  out_val[1] = mul_fp64(a[1], b);\n  out_val[2] = mul_fp64(a[2], b);\n  out_val[3] = mul_fp64(a[3], b);\n}\n\nvoid vec4_sum_fp64(vec2 a[4], vec2 b[4], out vec2 out_val[4]) {\n  for (int i = 0; i < 4; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec4_dot_fp64(vec2 a[4], vec2 b[4], out vec2 out_val) {\n  vec2 v[4];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n  v[2] = mul_fp64(a[2], b[2]);\n  v[3] = mul_fp64(a[3], b[3]);\n\n  out_val = sum_fp64(sum_fp64(v[0], v[1]), sum_fp64(v[2], v[3]));\n}\n\nvoid mat4_vec4_mul_fp64(vec2 b[16], vec2 a[4], out vec2 out_val[4]) {\n  vec2 tmp[4];\n\n  for (int i = 0; i < 4; i++)\n  {\n    for (int j = 0; j < 4; j++)\n    {\n      tmp[j] = b[j + i * 4];\n    }\n    vec4_dot_fp64(a, tmp, out_val[i]);\n  }\n}\n"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n"},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _project=_interopRequireDefault(__webpack_require__(327)),DEFAULT_MODULE_OPTIONS={lightDirection:new Float32Array([1,1,2])};var _default={name:"dirlight",vs:null,fs:"uniform vec3 dirlight_uLightDirection;\nvec4 dirlight_filterColor(vec4 color) {\n  vec3 normal = project_getNormal_World();\n  float d = abs(dot(normalize(normal), normalize(dirlight_uLightDirection)));\n  return vec4(color.rgb * d, color.a);\n}\n",getUniforms:function(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DEFAULT_MODULE_OPTIONS,uniforms={};return opts.lightDirection&&(uniforms.dirlight_uLightDirection=opts.lightDirection),uniforms},dependencies:[_project.default]};exports.default=_default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var DEFAULT_MODULE_OPTIONS={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingThreshold:1,pickingActive:!1};var _default={name:"picking",vs:"uniform vec3 picking_uSelectedColor;\nuniform float picking_uThreshold;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Aselected;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    abs(vertexColor.r - picking_uSelectedColor.r) < picking_uThreshold &&\n    abs(vertexColor.g - picking_uSelectedColor.g) < picking_uThreshold &&\n    abs(vertexColor.b - picking_uSelectedColor.b) < picking_uThreshold;\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  picking_vRGBcolor_Aselected.a =\n    float(isVertexPicked(pickingColor));\n  picking_vRGBcolor_Aselected.rgb = pickingColor * COLOR_SCALE;\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Aselected;\n\nconst float COLOR_SCALE = 1. / 255.;\nvec4 picking_filterHighlightColor(vec4 color) {\n  bool selected = bool(picking_vRGBcolor_Aselected.a);\n\n  if (selected) {\n    vec4 highLightColor = picking_uHighlightColor * COLOR_SCALE;\n\n    float highLightAlpha = highLightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  vec3 pickingColor = picking_vRGBcolor_Aselected.rgb;\n  if (picking_uActive && length(pickingColor) < 0.001) {\n    discard;\n  }\n  return picking_uActive ? vec4(pickingColor, 1.0) : color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DEFAULT_MODULE_OPTIONS,uniforms={};if(void 0!==opts.pickingSelectedColor)if(null===opts.pickingSelectedColor)uniforms.picking_uSelectedColorValid=0;else{var selectedColor=[opts.pickingSelectedColor[0],opts.pickingSelectedColor[1],opts.pickingSelectedColor[2]];uniforms.picking_uSelectedColorValid=1,uniforms.picking_uSelectedColor=selectedColor}return void 0!==opts.pickingHighlightColor&&(uniforms.picking_uHighlightColor=opts.pickingHighlightColor),void 0!==opts.pickingThreshold&&(uniforms.picking_uThreshold=opts.pickingThreshold),void 0!==opts.pickingActive&&(uniforms.picking_uActive=opts.pickingActive?1:0),uniforms}};exports.default=_default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var DEFAULT_MODULE_OPTIONS={diffuseTexture:null,diffuseColor:[.5,.5,.5,1]};var _default={name:"diffuse",getUniforms:function(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DEFAULT_MODULE_OPTIONS,uniforms={};return void 0!==opts.diffuseTexture&&(uniforms.diffuse_uHasTexture=Boolean(opts.diffuseTexture),uniforms.diffuse_uTexture=opts.diffuseTexture),void 0!==opts.diffuseColor&&(uniforms.diffuse_uColor=opts.diffuseColor),uniforms},vs:"out vec2 diffuse_vTexCoord;\nvoid diffuse_setTextureCoordinate(vec2 uv) {\n  diffuse_vTexCoord = uv;\n}\n",fs:"uniform vec4 diffuse_uColor;\nuniform bool diffuse_uHasTexture;\nuniform sampler2D diffuse_uTexture;\n\nin vec2 diffuse_vTexCoord;\n\n\n\nvec4 diffuse_getColor() {\n  vec2 texCoord = diffuse_vTexCoord;\n  return diffuse_uHasTexture ?\n    texture2D(diffuse_uTexture, vec2(texCoord.s, texCoord.t)) :\n    diffuse_uColor;\n}\n\nvec4 diffuse_filterColor(vec4 color) {\n  return diffuse_getColor();\n}\n"};exports.default=_default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.phonglighting=exports.gouraudlighting=void 0;var _lights=_interopRequireDefault(__webpack_require__(200)),_phongLighting=_interopRequireDefault(__webpack_require__(693)),gouraudlighting={name:"gouraud-lighting",dependencies:[_lights.default],vs:_phongLighting.default,defines:{LIGHTING_VERTEX:1},getUniforms:getUniforms};exports.gouraudlighting=gouraudlighting;var phonglighting={name:"phong-lighting",dependencies:[_lights.default],fs:_phongLighting.default,defines:{LIGHTING_FRAGMENT:1},getUniforms:getUniforms};exports.phonglighting=phonglighting;var INITIAL_MODULE_OPTIONS={};function getUniforms(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:INITIAL_MODULE_OPTIONS;if(!("material"in opts))return{};var material=opts.material;return material?function(material){var materialUniforms={};return materialUniforms.lighting_uAmbient=material.ambient,materialUniforms.lighting_uDiffuse=material.diffuse,materialUniforms.lighting_uShininess=material.shininess,materialUniforms.lighting_uSpecularColor=material.specularColor,materialUniforms}(material):{lighting_uEnabled:!1}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default="\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n"},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _project=_interopRequireDefault(__webpack_require__(695)),_lights=_interopRequireDefault(__webpack_require__(200)),_pbrVertex=_interopRequireDefault(__webpack_require__(697)),_pbrFragment=_interopRequireDefault(__webpack_require__(698)),_default={name:"pbr",vs:_pbrVertex.default,fs:_pbrFragment.default,defines:{LIGHTING_FRAGMENT:1},dependencies:[_project.default,_lights.default]};exports.default=_default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _project2Vertex=_interopRequireDefault(__webpack_require__(696)),_default={name:"project2",vs:_project2Vertex.default,fs:_project2Vertex.default};exports.default=_default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default="uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default="varying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default="#if (__VERSION__ < 300)\n#extension GL_EXT_shader_texture_lod: enable\n#extension GL_OES_standard_derivatives : enable\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLodEXT(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n\n\n  float perceptualRoughness = u_MetallicRoughnessValues.y;\n  float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n  vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n  perceptualRoughness = mrSample.g * perceptualRoughness;\n  metallic = mrSample.b * metallic;\n#endif\n  perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n  metallic = clamp(metallic, 0.0, 1.0);\n\n  float alphaRoughness = perceptualRoughness * perceptualRoughness;\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 f0 = vec3(0.04);\n  vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n  diffuseColor *= 1.0 - metallic;\n  vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n  float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n  float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n  vec3 specularEnvironmentR0 = specularColor.rgb;\n  vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n  vec3 n = getNormal();\n  vec3 v = normalize(u_Camera - pbr_vPosition);\n\n  float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n  vec3 reflection = -normalize(reflect(v, n));\n\n  PBRInfo pbrInputs = PBRInfo(\n    0.0,\n    NdotV,\n    0.0,\n    0.0,\n    0.0,\n    perceptualRoughness,\n    metallic,\n    specularEnvironmentR0,\n    specularEnvironmentR90,\n    alphaRoughness,\n    diffuseColor,\n    specularColor,\n    n,\n    v\n  );\n\n  vec3 color = vec3(0, 0, 0);\n\n#ifdef USE_LIGHTS\n  PBRInfo_setAmbientLight(pbrInputs);\n  color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n  SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n    if (i < lighting_uDirectionalLightCount) {\n      PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n      color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n    }\n  }\n  SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n    if (i < lighting_uPointLightCount) {\n      PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n      float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n      color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n    }\n  }\n#endif\n#ifdef USE_IBL\n  color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n  float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n  color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n  vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n  color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n  color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n  color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n  color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null};exports.default=_default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.getOverrides=exports.setOverride=exports.removeModel=exports.logModel=exports.addModel=void 0;var _seer=_interopRequireDefault(__webpack_require__(201)),_utils=__webpack_require__(19),models={};exports.addModel=function(model){models[model.id]||(models[model.id]=model,_seer.default.listItem("luma.gl",model.id))};exports.logModel=function(model,uniforms){if(_seer.default.isReady()&&!_seer.default.throttle("luma.gl:".concat(model.id),1e3)){var attributesObject=model.geometry?Object.assign({},model.geometry.attributes,model.attributes):model.attributes,uniformsObject=Object.assign({},model.uniforms,uniforms);_seer.default.multiUpdate("luma.gl",model.id,[{path:"objects.uniforms",data:uniformsObject},{path:"objects.attributes",data:attributesObject}])}};exports.removeModel=function(id){delete models[id],_seer.default.deleteItem("luma.gl",id)};var recursiveSet=function recursiveSet(obj,path,value){obj&&(path.length>1?recursiveSet(obj[path[0]],path.slice(1),value):obj[path[0]]=value)},overrides=new Map,setOverride=function(id,valuePath,value){_utils.window.__SEER_INITIALIZED__&&(overrides.has(id)||overrides.set(id,new Map),overrides.get(id).set(valuePath,value))};exports.setOverride=setOverride;exports.getOverrides=function(id,uniforms){if(_utils.window.__SEER_INITIALIZED__&&id){var overs=overrides.get(id);overs&&overs.forEach(function(value,valuePath){recursiveSet(uniforms,valuePath,value)})}},_seer.default.listenFor("luma.gl",function(payload){var model=models[payload.itemKey];if(model&&"edit"===payload.type&&"uniforms"===payload.valuePath[0]){var valuePath=payload.valuePath.slice(1);setOverride(payload.itemKey,valuePath,payload.value);var uniforms=model.getUniforms();recursiveSet(uniforms,valuePath,payload.value),model.setUniforms(uniforms)}})},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _SRC_TEX_PARAMETER_OV,_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_defineProperty2=_interopRequireDefault(__webpack_require__(6)),_shadertools=__webpack_require__(110),_webgl=__webpack_require__(42),_utils=__webpack_require__(19),_model=_interopRequireDefault(__webpack_require__(136)),_transformShaderUtils=__webpack_require__(702),SRC_TEX_PARAMETER_OVERRIDES=(_SRC_TEX_PARAMETER_OV={},(0,_defineProperty2.default)(_SRC_TEX_PARAMETER_OV,10241,9728),(0,_defineProperty2.default)(_SRC_TEX_PARAMETER_OV,10240,9728),(0,_defineProperty2.default)(_SRC_TEX_PARAMETER_OV,10242,33071),(0,_defineProperty2.default)(_SRC_TEX_PARAMETER_OV,10243,33071),_SRC_TEX_PARAMETER_OV),Transform=function(){function Transform(gl){var props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,_classCallCheck2.default)(this,Transform),(0,_utils.assert)((0,_webgl.isWebGL2)(gl)),this.gl=gl,this.model=null,this.elementCount=0,this.currentIndex=0,this.sourceBuffers=new Array(2),this.sourceTextures=new Array(2),this.feedbackBuffers=new Array(2),this.targetTextures=new Array(2),this.transformFeedbacks=new Array(2),this.framebuffers=new Array(2),this._createdBuffers={},this.elementIDBuffer=null,this._targetRefTexName=null,this._initialize(props),Object.seal(this)}return(0,_createClass2.default)(Transform,null,[{key:"isSupported",value:function(gl){return(0,_webgl.isWebGL2)(gl)}}]),(0,_createClass2.default)(Transform,[{key:"delete",value:function(){for(var name in this._createdBuffers)this._createdBuffers[name].delete();this.model.delete()}},{key:"getBuffer",value:function(){var varyingName=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,bufferOrParams=varyingName?this.feedbackBuffers[this.currentIndex][varyingName]:null;return bufferOrParams?bufferOrParams instanceof _webgl.Buffer?bufferOrParams:bufferOrParams.buffer:null}},{key:"_getTargetTexture",value:function(){return this.framebuffers[this.currentIndex]?this.framebuffers[this.currentIndex].attachments[36064]:null}},{key:"getData",value:function(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$varyingName=_ref.varyingName,varyingName=void 0===_ref$varyingName?null:_ref$varyingName,_ref$packed=_ref.packed,packed=void 0!==_ref$packed&&_ref$packed,buffer=this.getBuffer(varyingName);if(buffer)return buffer.getData();(0,_utils.assert)(!varyingName||varyingName===this.targetTextureVarying);var pixels=(0,_webgl.readPixelsToArray)(this.framebuffers[this.currentIndex]);if(!packed)return pixels;for(var ArrayType=pixels.constructor,channelCount=(0,_shadertools.typeToChannelCount)(this.targetTextureType),packedPixels=new ArrayType(pixels.length*channelCount/4),packCount=0,i=0;i<pixels.length;i+=4)for(var j=0;j<channelCount;j++)packedPixels[packCount++]=pixels[i+j];return packedPixels}},{key:"getFramebuffer",value:function(){return this.framebuffers[this.currentIndex]}},{key:"_getInputs",value:function(){var uniforms={},current=this.currentIndex,attributes=Object.assign({},this.sourceBuffers[current]);if(this.hasSourceTextures||this.targetTextureVarying){for(var sampler in attributes.transform_elementID=this.elementIDBuffer,this.samplerTextureMap){var textureName=this.samplerTextureMap[sampler];uniforms[sampler]=this.sourceTextures[current][textureName]}this._setSourceTextureParameters();var sizeUniforms=(0,_transformShaderUtils.getSizeUniforms)({sourceTextureMap:this.sourceTextures[current],targetTextureVarying:this.targetTextureVarying,targetTexture:this.targetTextures[current]});Object.assign(uniforms,sizeUniforms)}return{attributes:attributes,uniforms:uniforms}}},{key:"run",value:function(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_this$_getInputs=this._getInputs(),attributes=_this$_getInputs.attributes,uniforms=_this$_getInputs.uniforms;Object.assign(uniforms,opts.uniforms);var parameters=Object.assign({},opts.parameters),_opts$clearRenderTarg=opts.clearRenderTarget,clearRenderTarget=void 0===_opts$clearRenderTarg||_opts$clearRenderTarg,framebuffer=null,discard=!0;this.renderingToTexture&&(discard=!1,framebuffer=this.framebuffers[this.currentIndex],(0,_utils.assert)(framebuffer),parameters.viewport=[0,0,framebuffer.width,framebuffer.height],clearRenderTarget&&this.gl.clear(this.gl.COLOR_BUFFER_BIT)),this.model.setAttributes(attributes),this.model.transform(Object.assign({},opts,{transformFeedback:this.transformFeedbacks[this.currentIndex],uniforms:uniforms,discard:discard,framebuffer:framebuffer,parameters:parameters}))}},{key:"swapBuffers",value:function(){_utils.log.deprecated("swapBuffers()","swap()")(),this.swap()}},{key:"swap",value:function(){(0,_utils.assert)(this.feedbackMap||this._swapTexture),this.currentIndex=(this.currentIndex+1)%2}},{key:"update",value:function(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};opts.elementCount&&this._setElementCount(opts.elementCount);var _opts$sourceBuffers=opts.sourceBuffers,sourceBuffers=void 0===_opts$sourceBuffers?null:_opts$sourceBuffers,_opts$feedbackBuffers=opts.feedbackBuffers,feedbackBuffers=void 0===_opts$feedbackBuffers?null:_opts$feedbackBuffers,currentIndex=this.currentIndex;if(sourceBuffers||feedbackBuffers){for(var bufferName in feedbackBuffers)(0,_utils.assert)(feedbackBuffers[bufferName]instanceof _webgl.Buffer||feedbackBuffers[bufferName].buffer instanceof _webgl.Buffer);Object.assign(this.sourceBuffers[currentIndex],sourceBuffers),Object.assign(this.feedbackBuffers[currentIndex],feedbackBuffers),this._createFeedbackBuffers({feedbackBuffers:feedbackBuffers}),this.transformFeedbacks[currentIndex]&&this.transformFeedbacks[currentIndex].setBuffers(this.feedbackBuffers[currentIndex]),this._setupSwapBuffers()}var _sourceTextures=opts._sourceTextures,_targetTexture=opts._targetTexture;(_sourceTextures||_targetTexture)&&(Object.assign(this.sourceTextures[currentIndex],_sourceTextures),this._updateTargetTexture(_targetTexture||this._targetRefTexName,currentIndex),this._setupSwapTextures())}},{key:"_setSourceTextureParameters",value:function(){var index=this.currentIndex;for(var name in this.sourceTextures[index])this.sourceTextures[index][name].setParameters(SRC_TEX_PARAMETER_OVERRIDES)}},{key:"_setElementCount",value:function(elementCount){this.elementCount!==elementCount&&(this.elementCount<elementCount&&this._updateElementIDBuffer(elementCount),this.model.setVertexCount(elementCount),this.elementCount=elementCount)}},{key:"_updateTargetTexture",value:function(texture,index){var targetTexture=this._buildTargetTexture(texture);targetTexture&&(this.targetTextures[index]=targetTexture,this.framebuffers[index]&&(this.framebuffers[index].update({attachments:(0,_defineProperty2.default)({},36064,this.targetTextures[index]),resizeAttachments:!1}),this.framebuffers[index].resize({width:targetTexture.width,height:targetTexture.height})))}},{key:"_initialize",value:function(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_this$_validateProps=this._validateProps(props),feedbackBuffers=_this$_validateProps.feedbackBuffers,feedbackMap=_this$_validateProps.feedbackMap,sourceBuffers=props.sourceBuffers,varyings=props.varyings,_targetTexture=props._targetTexture,_targetTextureVarying=props._targetTextureVarying,_swapTexture=props._swapTexture,varyingsArray=varyings;feedbackMap&&!Array.isArray(varyings)&&(varyingsArray=Object.values(feedbackMap)),this.varyingsArray=varyingsArray,this.feedbackMap=feedbackMap,this._swapTexture=_swapTexture,_targetTexture&&(this.targetTextureVarying=_targetTextureVarying,this.renderingToTexture=!0,(0,_utils.assert)(this.targetTextureVarying)),this._setupBuffers({sourceBuffers:sourceBuffers,feedbackBuffers:feedbackBuffers}),this._setupTextures(props),this._setupSwapBuffers(),this._setupSwapTextures(),this._buildModel(Object.assign({},props,{id:props.id||"transform-model",drawMode:props.drawMode||0,varyings:varyingsArray}))}},{key:"_validateProps",value:function(props){var feedbackBuffers=props.feedbackBuffers,feedbackMap=props.feedbackMap,destinationBuffers=props.destinationBuffers,sourceDestinationMap=props.sourceDestinationMap;destinationBuffers&&(_utils.log.deprecated("destinationBuffers","feedbackBuffers")(),feedbackBuffers=feedbackBuffers||destinationBuffers),sourceDestinationMap&&(_utils.log.deprecated("sourceDestinationMap","feedbackMap")(),feedbackMap=feedbackMap||sourceDestinationMap);var vs=props.vs,elementCount=props.elementCount,varyings=props.varyings,_sourceTextures=props._sourceTextures,_targetTexture=props._targetTexture,_targetTextureVarying=props._targetTextureVarying,_swapTexture=props._swapTexture;for(var bufferName in(0,_utils.assert)(vs&&(varyings||feedbackMap||_targetTexture)&&elementCount),feedbackBuffers||{})(0,_utils.assert)(feedbackBuffers[bufferName]instanceof _webgl.Buffer||feedbackBuffers[bufferName].buffer instanceof _webgl.Buffer);for(var textureName in _sourceTextures||{})(0,_utils.assert)(_sourceTextures[textureName]instanceof _webgl.Texture2D);return(0,_utils.assert)(!_targetTexture||_targetTextureVarying),(0,_utils.assert)(!_swapTexture||_sourceTextures[_swapTexture]),{feedbackBuffers:feedbackBuffers,feedbackMap:feedbackMap}}},{key:"_setupBuffers",value:function(_ref2){var _ref2$sourceBuffers=_ref2.sourceBuffers,sourceBuffers=void 0===_ref2$sourceBuffers?null:_ref2$sourceBuffers,_ref2$feedbackBuffers=_ref2.feedbackBuffers,feedbackBuffers=void 0===_ref2$feedbackBuffers?null:_ref2$feedbackBuffers;this.sourceBuffers[0]=Object.assign({},sourceBuffers),this.feedbackBuffers[0]=Object.assign({},feedbackBuffers),this._createFeedbackBuffers({feedbackBuffers:feedbackBuffers}),this.sourceBuffers[1]={},this.feedbackBuffers[1]={}}},{key:"_setupTextures",value:function(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_sourceTextures=props._sourceTextures,_targetTexture=props._targetTexture;if(this.sourceTextures[0]=Object.assign({},_sourceTextures),this.sourceTextures[1]={},this.hasSourceTextures=Object.keys(this.sourceTextures[0]).length>0,this.targetTextureVarying){var texture=this._buildTargetTexture(_targetTexture);(0,_utils.assert)(texture),this.targetTextures[0]=texture,this.targetTextures[1]=null}}},{key:"_buildTargetTexture",value:function(textureOrAttribute){var _parameters;if(textureOrAttribute instanceof _webgl.Texture2D)return textureOrAttribute;var refTexture=this.sourceTextures[0][textureOrAttribute];return refTexture?(this._targetRefTexName=textureOrAttribute,(0,_webgl.cloneTextureFrom)(refTexture,{parameters:(_parameters={},(0,_defineProperty2.default)(_parameters,10241,9728),(0,_defineProperty2.default)(_parameters,10240,9728),(0,_defineProperty2.default)(_parameters,10242,33071),(0,_defineProperty2.default)(_parameters,10243,33071),_parameters),pixelStore:(0,_defineProperty2.default)({},37440,!1)})):null}},{key:"_createFeedbackBuffers",value:function(_ref3){var feedbackBuffers=_ref3.feedbackBuffers;if(this.feedbackMap){var current=this.currentIndex;for(var sourceBufferName in this.feedbackMap){var feedbackBufferName=this.feedbackMap[sourceBufferName];if(!(feedbackBufferName===this.targetTextureVarying||feedbackBuffers&&feedbackBuffers[feedbackBufferName])){var sourceBuffer=this.sourceBuffers[current][sourceBufferName],byteLength=sourceBuffer.byteLength,usage=sourceBuffer.usage,accessor=sourceBuffer.accessor,buffer=new _webgl.Buffer(this.gl,{byteLength:byteLength,usage:usage,accessor:accessor});this._createdBuffers[feedbackBufferName]&&this._createdBuffers[feedbackBufferName].delete(),this._createdBuffers[feedbackBufferName]=buffer,this.feedbackBuffers[current][feedbackBufferName]=buffer}}}}},{key:"_createNewBuffer",value:function(name,opts){var buffer=new _webgl.Buffer(this.gl,opts);return this._createdBuffers[name]&&(this._createdBuffers[name].delete(),this._createdBuffers[name]=buffer),buffer}},{key:"_setupSwapBuffers",value:function(){if(this.feedbackMap){var current=this.currentIndex,next=(current+1)%2;for(var srcName in Object.assign(this.sourceBuffers[next],this.sourceBuffers[current]),Object.assign(this.feedbackBuffers[next],this.feedbackBuffers[current]),this.feedbackMap){var dstName=this.feedbackMap[srcName];dstName!==this.targetTextureVarying&&(this.sourceBuffers[next][srcName]=this.feedbackBuffers[current][dstName],this.feedbackBuffers[next][dstName]=this.sourceBuffers[current][srcName],(0,_utils.assert)(this.feedbackBuffers[next][dstName]instanceof _webgl.Buffer))}this.transformFeedbacks[next]&&this.transformFeedbacks[next].setBuffers(this.feedbackBuffers[next])}}},{key:"_setupSwapTextures",value:function(){if(this._swapTexture&&this.targetTextureVarying){var current=this.currentIndex,next=(current+1)%2;Object.assign(this.sourceTextures[next],this.sourceTextures[current]),this.sourceTextures[next][this._swapTexture]=this.targetTextures[current],this._updateTargetTexture(this.sourceTextures[current][this._swapTexture],next)}}},{key:"_buildModel",value:function(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_this$_getShaders=this._getShaders(props),vs=_this$_getShaders.vs,fs=_this$_getShaders.fs,modules=_this$_getShaders.modules,uniforms=_this$_getShaders.uniforms,inject=_this$_getShaders.inject,samplerTextureMap=_this$_getShaders.samplerTextureMap;this.model=new _model.default(this.gl,Object.assign({},props,{vs:vs,fs:fs,vertexCount:props.elementCount,modules:modules,uniforms:uniforms,inject:inject})),this.samplerTextureMap=samplerTextureMap,this._setupTransformFeedback(),this._setupFramebuffers(),this._setElementCount(props.elementCount)}},{key:"_setupTransformFeedback",value:function(){(0,_utils.isObjectEmpty)(this.feedbackBuffers[0])||(this.transformFeedbacks[0]=new _webgl.TransformFeedback(this.gl,{program:this.model.program,buffers:this.feedbackBuffers[0]}),this.feedbackMap&&(this.transformFeedbacks[1]=new _webgl.TransformFeedback(this.gl,{program:this.model.program,buffers:this.feedbackBuffers[1]})))}},{key:"_setupFramebuffers",value:function(){if(this.renderingToTexture){var _this$targetTextures$=this.targetTextures[0],width=_this$targetTextures$.width,height=_this$targetTextures$.height;if(this.framebuffers[0]=new _webgl.Framebuffer(this.gl,{id:"".concat(this.id||"transform","-framebuffer-0"),width:width,height:height,attachments:(0,_defineProperty2.default)({},36064,this.targetTextures[0])}),this._swapTexture){var _this$targetTextures$2=this.targetTextures[1];width=_this$targetTextures$2.width,height=_this$targetTextures$2.height,this.framebuffers[1]=new _webgl.Framebuffer(this.gl,{id:"".concat(this.id||"transform","-framebuffer-1"),width:width,height:height,attachments:(0,_defineProperty2.default)({},36064,this.targetTextures[1])})}}}},{key:"_updateElementIDBuffer",value:function(elementCount){if(this.hasSourceTextures||this.targetTextureVarying){var elementIds=new Float32Array(elementCount);elementIds.forEach(function(_,index,array){array[index]=index}),this.elementIDBuffer?this.elementIDBuffer.setData({data:elementIds}):this.elementIDBuffer=new _webgl.Buffer(this.gl,{data:elementIds,size:1})}}},{key:"_getShaders",value:function(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_this$_processVertexS=this._processVertexShader(props.vs),vs=_this$_processVertexS.vs,uniforms=_this$_processVertexS.uniforms,targetTextureType=_this$_processVertexS.targetTextureType,inject=_this$_processVertexS.inject,samplerTextureMap=_this$_processVertexS.samplerTextureMap,combinedInject=(0,_shadertools.combineInjects)([props.inject||{},inject]);return this.targetTextureType=targetTextureType,{vs:vs,fs:(0,_shadertools.getPassthroughFS)({version:(0,_webgl.getShaderVersion)(vs),input:this.targetTextureVarying,inputType:targetTextureType,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[_shadertools._transform].concat(props.modules||[]):props.modules,uniforms:uniforms,inject:combinedInject,samplerTextureMap:samplerTextureMap}}},{key:"_processVertexShader",value:function(vs){return(0,_transformShaderUtils.updateForTextures)({vs:vs,sourceTextureMap:this.sourceTextures[this.currentIndex],targetTextureVarying:this.targetTextureVarying,targetTexture:this.targetTextures[this.currentIndex]})}}]),Transform}();exports.default=Transform},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.updateForTextures=function(_ref){var vs=_ref.vs,sourceTextureMap=_ref.sourceTextureMap,targetTextureVarying=_ref.targetTextureVarying,targetTexture=_ref.targetTexture,sourceCount=Object.keys(sourceTextureMap).length,targetTextureType=null,samplerTextureMap={},updatedVs=vs,finalInject={};if(sourceCount>0||targetTextureVarying){var vsLines=updatedVs.split("\n"),updateVsLines=vsLines.slice();if(vsLines.forEach(function(line,index,lines){if(sourceCount>0){var updated=processAttributeDefinition(line,sourceTextureMap);if(updated){var updatedLine=updated.updatedLine,inject=updated.inject;updateVsLines[index]=updatedLine,finalInject=(0,_shadertools.combineInjects)([finalInject,inject]),Object.assign(samplerTextureMap,updated.samplerTextureMap),sourceCount--}}targetTextureVarying&&!targetTextureType&&(targetTextureType=getVaryingType(line,targetTextureVarying))}),targetTextureVarying){(0,_utils.assert)(targetTexture);var sizeName="".concat(SIZE_UNIFORM_PREFIX).concat(targetTextureVarying),uniformDeclaration="uniform vec2 ".concat(sizeName,";\n"),posInstructions="     vec2 ".concat(VS_POS_VARIABLE," = transform_getPos(").concat(sizeName,");\n     gl_Position = vec4(").concat(VS_POS_VARIABLE,", 0, 1.);\n"),inject={"vs:#decl":uniformDeclaration,"vs:#main-start":posInstructions};finalInject=(0,_shadertools.combineInjects)([finalInject,inject])}updatedVs=updateVsLines.join("\n")}return{vs:updatedVs,targetTextureType:targetTextureType,inject:finalInject,samplerTextureMap:samplerTextureMap}},exports.getSizeUniforms=function(_ref2){var width,height,sourceTextureMap=_ref2.sourceTextureMap,targetTextureVarying=_ref2.targetTextureVarying,targetTexture=_ref2.targetTexture,uniforms={};targetTextureVarying&&(width=targetTexture.width,height=targetTexture.height,uniforms["".concat(SIZE_UNIFORM_PREFIX).concat(targetTextureVarying)]=[width,height]);for(var textureName in sourceTextureMap){var _sourceTextureMap$tex=sourceTextureMap[textureName];width=_sourceTextureMap$tex.width,height=_sourceTextureMap$tex.height,uniforms["".concat(SIZE_UNIFORM_PREFIX).concat(textureName)]=[width,height]}return uniforms},exports.getVaryingType=getVaryingType,exports.processAttributeDefinition=processAttributeDefinition;var _utils=__webpack_require__(19),_shadertools=__webpack_require__(110),SAMPLER_UNIFORM_PREFIX="transform_uSampler_",SIZE_UNIFORM_PREFIX="transform_uSize_",VS_POS_VARIABLE="transform_position";function getVaryingType(line,varying){var qualaiferDetails=(0,_shadertools.getQualifierDetails)(line,["varying","out"]);return qualaiferDetails&&qualaiferDetails.name===varying?qualaiferDetails.type:null}function processAttributeDefinition(line,textureMap){var samplerTextureMap={},attributeData=function(line){return(0,_shadertools.getQualifierDetails)(line,["attribute","in"])}(line);if(!attributeData)return null;var type=attributeData.type,name=attributeData.name;if(name&&textureMap[name]){var updatedLine="// ".concat(line," => Replaced by Transform with a sampler"),_getSamplerDecleratio=function(textureName){var samplerName="".concat(SAMPLER_UNIFORM_PREFIX).concat(textureName),sizeName="".concat(SIZE_UNIFORM_PREFIX).concat(textureName);return{samplerName:samplerName,sizeName:sizeName,uniformDeclerations:"  uniform sampler2D ".concat(samplerName,";\n  uniform vec2 ").concat(sizeName,";")}}(name),samplerName=_getSamplerDecleratio.samplerName,sizeName=_getSamplerDecleratio.sizeName,uniformDeclerations=_getSamplerDecleratio.uniformDeclerations,channels=(0,_shadertools.typeToChannelSuffix)(type),sampleInstruction="  ".concat(type," ").concat(name," = transform_getInput(").concat(samplerName,", ").concat(sizeName,").").concat(channels,";\n");return samplerTextureMap[samplerName]=name,{updatedLine:updatedLine,inject:{"vs:#decl":uniformDeclerations,"vs:#main-start":sampleInstruction},samplerTextureMap:samplerTextureMap}}return null}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_webgl=__webpack_require__(42),_utils=__webpack_require__(19),ShaderCache=function(){function ShaderCache(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},gl=_ref.gl,_ref$_cachePrograms=_ref._cachePrograms,_cachePrograms=void 0!==_ref$_cachePrograms&&_ref$_cachePrograms;(0,_classCallCheck2.default)(this,ShaderCache),(0,_utils.assert)(gl),this.gl=gl,this.vertexShaders={},this.fragmentShaders={},this.programs={},this._cachePrograms=_cachePrograms}return(0,_createClass2.default)(ShaderCache,[{key:"delete",value:function(){return this}},{key:"getVertexShader",value:function(gl,source){(0,_utils.assert)("string"==typeof source),(0,_utils.assert)(this._compareContexts(gl,this.gl));var shader=this.vertexShaders[source];return shader||(shader=new _webgl.VertexShader(gl,source),this.vertexShaders[source]=shader),shader}},{key:"getFragmentShader",value:function(gl,source){(0,_utils.assert)("string"==typeof source),(0,_utils.assert)(this._compareContexts(gl,this.gl));var shader=this.fragmentShaders[source];return shader||(shader=new _webgl.FragmentShader(gl,source),this.fragmentShaders[source]=shader),shader}},{key:"getProgram",value:function(gl,opts){(0,_utils.assert)(this._compareContexts(gl,this.gl)),(0,_utils.assert)("string"==typeof opts.vs),(0,_utils.assert)("string"==typeof opts.fs),(0,_utils.assert)("string"==typeof opts.id);var cacheKey=this._getProgramKey(opts),program=this.programs[cacheKey];return program?(this._resetProgram(program),program):(program=this._createNewProgram(gl,opts),this._cachePrograms&&this._checkProgramProp(program)&&(program._isCached=!0,this.programs[cacheKey]=program),program)}},{key:"_getProgramKey",value:function(opts){return"".concat(opts.id,"-").concat(opts.vs,"-").concat(opts.fs)}},{key:"_checkProgramProp",value:function(program){return!program.varyings}},{key:"_createNewProgram",value:function(gl,opts){var vs=opts.vs,fs=opts.fs,vertexShader=this.getVertexShader(gl,vs),fragmentShader=this.getFragmentShader(gl,fs);return new _webgl.Program(this.gl,Object.assign({},opts,{vs:vertexShader,fs:fragmentShader}))}},{key:"_resetProgram",value:function(program,opts){program.reset()}},{key:"_compareContexts",value:function(gl1,gl2){return(gl1.gl||gl1)===(gl2.gl||gl2)}}]),ShaderCache}();exports.default=ShaderCache},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _typeof2=_interopRequireDefault(__webpack_require__(27)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_webgl=__webpack_require__(42),_utils=__webpack_require__(19),AnimationLoopProxy=function(){function AnimationLoopProxy(worker){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,_classCallCheck2.default)(this,AnimationLoopProxy);var _opts$onInitialize=opts.onInitialize,onInitialize=void 0===_opts$onInitialize?function(){}:_opts$onInitialize,_opts$onFinalize=opts.onFinalize,onFinalize=void 0===_opts$onFinalize?function(){}:_opts$onFinalize,_opts$useDevicePixels=opts.useDevicePixels,useDevicePixels=void 0===_opts$useDevicePixels||_opts$useDevicePixels,_opts$autoResizeDrawi=opts.autoResizeDrawingBuffer,autoResizeDrawingBuffer=void 0===_opts$autoResizeDrawi||_opts$autoResizeDrawi;this.props={onInitialize:onInitialize,onFinalize:onFinalize},this.setProps({autoResizeDrawingBuffer:autoResizeDrawingBuffer,useDevicePixels:useDevicePixels}),(0,_utils.assert)(worker instanceof Worker),this.worker=worker,this.canvas=null,this.width=null,this.height=null,this._running=!1,this._animationFrameId=null,this._resolveNextFrame=null,this._nextFramePromise=null,this._onMessage=this._onMessage.bind(this),this._onEvent=this._onEvent.bind(this),this._updateFrame=this._updateFrame.bind(this)}return(0,_createClass2.default)(AnimationLoopProxy,null,[{key:"createWorker",value:function(animationLoop){return function(self){animationLoop.setProps({useDevicePixels:!1,autoResizeDrawingBuffer:!1}),self.canvas=null,self.addEventListener("message",function(evt){switch(evt.data.command){case"start":canvas=evt.data.opts.canvas,eventHandlers=new Map,canvas.addEventListener=function(type,handler){self.postMessage({command:"addEventListener",type:type}),eventHandlers.has(type)||eventHandlers.set(type,[]),eventHandlers.get(type).push(handler)},canvas.removeEventListener=function(type,handler){self.postMessage({command:"removeEventListener",type:type});var handlers=eventHandlers.get(type);handlers&&handlers.splice(handlers.indexOf(handler),1)},canvas.dispatchEvent=function(type,event){var handlers=eventHandlers.get(type);handlers&&handlers.forEach(function(handler){return handler(event)})},self.canvas=canvas,animationLoop.start(evt.data.opts);break;case"stop":animationLoop.stop();break;case"resize":self.canvas.width=evt.data.width,self.canvas.height=evt.data.height;break;case"event":self.canvas.dispatchEvent(evt.data.type,evt.data.event)}var canvas,eventHandlers})}}}]),(0,_createClass2.default)(AnimationLoopProxy,[{key:"setProps",value:function(props){return"autoResizeDrawingBuffer"in props&&(this.autoResizeDrawingBuffer=props.autoResizeDrawingBuffer),"useDevicePixels"in props&&(this.useDevicePixels=props.useDevicePixels),this}},{key:"start",value:function(){var _this=this,opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._running?this:(this._running=!0,this.worker.onmessage=this._onMessage,(0,_webgl.getPageLoadPromise)().then(function(){return _this._running?(_this._createAndTransferCanvas(opts),_this.props.onInitialize(_this)):null}).then(function(){_this._running&&(_this._animationFrameId=(0,_webgl.requestAnimationFrame)(_this._updateFrame))}),this)}},{key:"stop",value:function(){return this._running&&((0,_webgl.cancelAnimationFrame)(this._animationFrameId),this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._running=!1,this.props.onFinalize(this)),this.worker.postMessage({command:"stop"}),this}},{key:"waitForRender",value:function(){var _this2=this;return this._nextFramePromise||(this._nextFramePromise=new Promise(function(resolve){_this2._resolveNextFrame=resolve})),this._nextFramePromise}},{key:"_onMessage",value:function(evt){switch(evt.data.command){case"addEventListener":this.canvas.addEventListener(evt.data.type,this._onEvent);break;case"removeEventListener":this.canvas.removeEventListener(evt.data.type,this._onEvent)}}},{key:"_onEvent",value:function(evt){var devicePixelRatio=this.useDevicePixels&&window.devicePixelRatio||1,type=evt.type,safeEvent={};for(var key in evt){var value=evt[key],valueType=(0,_typeof2.default)(value);"offsetX"!==key&&"offsetY"!==key||(value*=devicePixelRatio),"number"!==valueType&&"boolean"!==valueType&&"string"!==valueType||(safeEvent[key]=value)}this.worker.postMessage({command:"event",type:type,event:safeEvent})}},{key:"_updateFrame",value:function(){this._resizeCanvasDrawingBuffer(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._animationFrameId=(0,_webgl.requestAnimationFrame)(this._updateFrame)}},{key:"_createAndTransferCanvas",value:function(opts){var screenCanvas=(0,_webgl.getCanvas)(opts);screenCanvas.transferControlToOffscreen||_utils.log.error("OffscreenCanvas is not available in your browser.")();var offscreenCanvas=screenCanvas.transferControlToOffscreen();this.worker.postMessage({command:"start",opts:Object.assign({},opts,{canvas:offscreenCanvas})},[offscreenCanvas]),this.canvas=screenCanvas}},{key:"_resizeCanvasDrawingBuffer",value:function(){if(this.autoResizeDrawingBuffer){var devicePixelRatio=this.useDevicePixels&&window.devicePixelRatio||1,width=this.canvas.clientWidth*devicePixelRatio,height=this.canvas.clientHeight*devicePixelRatio;this.width===width&&this.height===height||(this.width=width,this.height=height,this.worker.postMessage({command:"resize",width:width,height:height}))}}}]),AnimationLoopProxy}();exports.default=AnimationLoopProxy},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_compositePass=_interopRequireDefault(__webpack_require__(202)),_renderState=_interopRequireDefault(__webpack_require__(328)),MultiPassRenderer=function(_CompositePass){function MultiPassRenderer(gl,props){var _this;return(0,_classCallCheck2.default)(this,MultiPassRenderer),props=Array.isArray(props)?{passes:props}:props,(_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(MultiPassRenderer).call(this,gl,Object.assign({id:"multi-pass"},props)))).renderState=new _renderState.default(gl,props),_this}return(0,_inherits2.default)(MultiPassRenderer,_CompositePass),(0,_createClass2.default)(MultiPassRenderer,[{key:"render",value:function(animationProps){this.renderState.reset();var _this$props$passes=this.props.passes,passes=void 0===_this$props$passes?[]:_this$props$passes,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=passes[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){_step.value.render(this.renderState,animationProps)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return this}}]),MultiPassRenderer}(_compositePass.default);exports.default=MultiPassRenderer},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),ClearPass=function(_Pass){function ClearPass(gl){var props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,_classCallCheck2.default)(this,ClearPass),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(ClearPass).call(this,gl,Object.assign({id:"clear-pass"},props)))}return(0,_inherits2.default)(ClearPass,_Pass),(0,_createClass2.default)(ClearPass,[{key:"_renderPass",value:function(_ref){var gl=_ref.gl,_this$props$clearBits=this.props.clearBits,clearBits=void 0===_this$props$clearBits?16640:_this$props$clearBits;gl.clear(clearBits)}}]),ClearPass}(_interopRequireDefault(__webpack_require__(71)).default);exports.default=ClearPass},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),RenderPass=function(_Pass){function RenderPass(gl){var props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,_classCallCheck2.default)(this,RenderPass),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(RenderPass).call(this,gl,Object.assign({id:"render-pass"},props)))}return(0,_inherits2.default)(RenderPass,_Pass),(0,_createClass2.default)(RenderPass,[{key:"_renderPass",value:function(_ref){var animationProps=_ref.animationProps,_this$props=this.props,_this$props$models=_this$props.models,models=void 0===_this$props$models?[]:_this$props$models,drawParams=_this$props.drawParams,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=models[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){_step.value.draw(Object.assign({},drawParams,{animationProps:animationProps}))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}}]),RenderPass}(_interopRequireDefault(__webpack_require__(71)).default);exports.default=RenderPass},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_clipSpace=_interopRequireDefault(__webpack_require__(137)),_pass=_interopRequireDefault(__webpack_require__(71)),fs="uniform sampler2D uDiffuseSampler;\nuniform float uOpacity;\n\nvarying vec2 uv;\n\nvoid main() {\n  vec4 texel = texture2D(uDiffuseSampler, uv);\n  gl_FragColor = uOpacity * texel;\n}\n",CopyPass=function(_Pass){function CopyPass(gl){var _this,props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,_classCallCheck2.default)(this,CopyPass),(_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(CopyPass).call(this,gl,Object.assign({id:"copy-pass",swap:!0},props)))).clipspace=new _clipSpace.default(gl,{id:"copy-pass",fs:fs}),_this}return(0,_inherits2.default)(CopyPass,_Pass),(0,_createClass2.default)(CopyPass,[{key:"_renderPass",value:function(_ref){var inputBuffer=_ref.inputBuffer,_this$props$opacity=this.props.opacity,opacity=void 0===_this$props$opacity?1:_this$props$opacity;this.clipspace.draw({uniforms:{uDiffuseSampler:inputBuffer,uOpacity:opacity},parameters:{depthWrite:!1,depthTest:!1}})}}]),CopyPass}(_pass.default);exports.default=CopyPass},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_clipSpace=_interopRequireDefault(__webpack_require__(137)),_pass=_interopRequireDefault(__webpack_require__(71)),fs="uniform sampler2D uDiffuseSampler;\nuniform float uOpacity;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 texel = texture2D(uDiffuseSampler, uv);\n  gl_FragColor = uOpacity * texel;\n}\n",TexturePass=function(_Pass){function TexturePass(gl){var _this,options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,_classCallCheck2.default)(this,TexturePass),_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(TexturePass).call(this,gl,Object.assign({id:"texture-pass"},options)));var texture=options.texture,_options$opacity=options.opacity,opacity=void 0===_options$opacity?1:_options$opacity;return _this.clipspace=new _clipSpace.default(gl,{id:"texture-pass",fs:fs,uniforms:{uDiffuseSampler:texture,uOpacity:opacity}}),_this}return(0,_inherits2.default)(TexturePass,_Pass),(0,_createClass2.default)(TexturePass,[{key:"_renderPass",value:function(){this.clipspace.draw({parameters:{depthWrite:!1,depthTest:!1}})}}]),TexturePass}(_pass.default);exports.default=TexturePass},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_pass=_interopRequireDefault(__webpack_require__(71)),_compositePass=_interopRequireDefault(__webpack_require__(202)),_clipSpace=_interopRequireDefault(__webpack_require__(137)),_shadertools=__webpack_require__(110),ShaderModuleSinglePass=function(_Pass){function ShaderModuleSinglePass(gl){var props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,_classCallCheck2.default)(this,ShaderModuleSinglePass),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(ShaderModuleSinglePass).call(this,gl,Object.assign({swap:!0},props)))}return(0,_inherits2.default)(ShaderModuleSinglePass,_Pass),(0,_createClass2.default)(ShaderModuleSinglePass,[{key:"_renderPass",value:function(_ref){var inputBuffer=_ref.inputBuffer;_ref.swapBuffers;this.props.model.setUniforms(this.props),this.props.model.draw({uniforms:{texture:inputBuffer,texSize:[inputBuffer.width,inputBuffer.height]},parameters:{depthWrite:!1,depthTest:!1}})}}]),ShaderModuleSinglePass}(_pass.default),ShaderModulePass=function(_CompositePass){function ShaderModulePass(gl,module){var _this,props=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,_classCallCheck2.default)(this,ShaderModulePass);var id="".concat(module.name,"-pass");(0,_shadertools.normalizeShaderModule)(module);var passes=function(gl,module,id,props){if(module.filter||module.sampler){var fs=getFragmentShaderForRenderPass(module),pass=new ShaderModuleSinglePass(gl,{id:id,model:getModel(gl,module,fs,id,props),uniforms:null});return[pass]}var passes=module.passes||[];return passes.map(function(pass){var fs=getFragmentShaderForRenderPass(module,pass),idn="".concat(id,"-").concat(passes.length+1);return new ShaderModuleSinglePass(gl,Object.assign({id:idn,model:getModel(gl,module,fs,idn,props),uniforms:pass.uniforms},props))})}(gl,module,id,props);return(_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(ShaderModulePass).call(this,gl,Object.assign({id:id,passes:passes},props)))).module=module,_this}return(0,_inherits2.default)(ShaderModulePass,_CompositePass),(0,_createClass2.default)(ShaderModulePass,[{key:"_renderPass",value:function(_ref2){var inputBuffer=_ref2.inputBuffer,swapBuffers=_ref2.swapBuffers,first=!0,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.module.passes[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var pass=_step.value;first||swapBuffers(),first=!1,pass.uniforms&&pass.model.setUniforms(pass.uniforms),pass.model.draw({uniforms:{texture:inputBuffer,texSize:[inputBuffer.width,inputBuffer.height]},parameters:{depthWrite:!1,depthTest:!1}})}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}}]),ShaderModulePass}(_compositePass.default);function getModel(gl,module,fs,id,props){var model=new _clipSpace.default(gl,{id:id,fs:fs,modules:[module]}),uniforms=Object.assign(module.getUniforms(),module.getUniforms(props));return model.setUniforms(uniforms),model}exports.default=ShaderModulePass;var FILTER_FS_TEMPLATE=function(func){return"uniform sampler2D texture;\nuniform vec2 texSize;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main() {\n  vec2 texCoord = coordinate;\n\n  gl_FragColor = texture2D(texture, texCoord);\n  gl_FragColor = ".concat(func,"(gl_FragColor, texSize, texCoord);\n}\n")},SAMPLER_FS_TEMPLATE=function(func){return"uniform sampler2D texture;\nuniform vec2 texSize;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main() {\n  vec2 texCoord = coordinate;\n\n  gl_FragColor = ".concat(func,"(texture, texSize, texCoord);\n}\n")};function getFragmentShaderForRenderPass(module){var pass=arguments.length>1&&void 0!==arguments[1]?arguments[1]:module;if(pass.filter){var func="string"==typeof pass.filter?pass.filter:"".concat(module.name,"_filterColor");return FILTER_FS_TEMPLATE(func)}if(pass.sampler){var _func="string"==typeof pass.sampler?pass.sampler:"".concat(module.name,"_sampleColor");return SAMPLER_FS_TEMPLATE(_func)}return null}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _objectSpread2=_interopRequireDefault(__webpack_require__(36)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_truncatedConeGeometry=_interopRequireDefault(__webpack_require__(203)),_utils=__webpack_require__(19),ConeGeometry=function(_TruncatedConeGeometr){function ConeGeometry(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,_classCallCheck2.default)(this,ConeGeometry);var _props$id=props.id,id=void 0===_props$id?(0,_utils.uid)("cone-geometry"):_props$id,_props$radius=props.radius,radius=void 0===_props$radius?1:_props$radius,_props$cap=props.cap,cap=void 0===_props$cap||_props$cap;return(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(ConeGeometry).call(this,(0,_objectSpread2.default)({},props,{id:id,topRadius:0,topCap:Boolean(cap),bottomCap:Boolean(cap),bottomRadius:radius})))}return(0,_inherits2.default)(ConeGeometry,_TruncatedConeGeometr),ConeGeometry}(_truncatedConeGeometry.default);exports.default=ConeGeometry},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _objectSpread2=_interopRequireDefault(__webpack_require__(36)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_geometry=_interopRequireDefault(__webpack_require__(68)),_utils=__webpack_require__(19),CUBE_INDICES=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),CUBE_POSITIONS=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),CUBE_NORMALS=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),CUBE_TEX_COORDS=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),ATTRIBUTES={POSITION:{size:3,value:new Float32Array(CUBE_POSITIONS)},NORMAL:{size:3,value:new Float32Array(CUBE_NORMALS)},TEXCOORD_0:{size:2,value:new Float32Array(CUBE_TEX_COORDS)}},CubeGeometry=function(_Geometry){function CubeGeometry(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,_classCallCheck2.default)(this,CubeGeometry);var _props$id=props.id,id=void 0===_props$id?(0,_utils.uid)("cube-geometry"):_props$id;return(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(CubeGeometry).call(this,(0,_objectSpread2.default)({},props,{id:id,indices:{size:1,value:new Uint16Array(CUBE_INDICES)},attributes:(0,_objectSpread2.default)({},ATTRIBUTES,props.attributes)})))}return(0,_inherits2.default)(CubeGeometry,_Geometry),CubeGeometry}(_geometry.default);exports.default=CubeGeometry},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _objectSpread2=_interopRequireDefault(__webpack_require__(36)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_truncatedConeGeometry=_interopRequireDefault(__webpack_require__(203)),_utils=__webpack_require__(19),CylinderGeometry=function(_TruncatedConeGeometr){function CylinderGeometry(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,_classCallCheck2.default)(this,CylinderGeometry);var _props$id=props.id,id=void 0===_props$id?(0,_utils.uid)("cylinder-geometry"):_props$id,_props$radius=props.radius,radius=void 0===_props$radius?1:_props$radius;return(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(CylinderGeometry).call(this,(0,_objectSpread2.default)({},props,{id:id,bottomRadius:radius,topRadius:radius})))}return(0,_inherits2.default)(CylinderGeometry,_TruncatedConeGeometr),CylinderGeometry}(_truncatedConeGeometry.default);exports.default=CylinderGeometry},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _objectSpread2=_interopRequireDefault(__webpack_require__(36)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_math=__webpack_require__(25),_geometry=_interopRequireDefault(__webpack_require__(68)),_utils=__webpack_require__(19),ICO_POSITIONS=[-1,0,0,0,1,0,0,0,-1,0,0,1,0,-1,0,1,0,0],ICO_INDICES=[3,4,5,3,5,1,3,1,0,3,0,4,4,0,2,4,2,5,2,0,1,5,2,1],IcoSphereGeometry=function(_Geometry){function IcoSphereGeometry(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,_classCallCheck2.default)(this,IcoSphereGeometry);var _props$id=props.id,id=void 0===_props$id?(0,_utils.uid)("ico-sphere-geometry"):_props$id,_tesselateIcosaHedron=function(){var _props$iterations=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).iterations,iterations=void 0===_props$iterations?0:_props$iterations,PI=Math.PI,PI2=2*PI,positions=[].concat(ICO_POSITIONS),indices=[].concat(ICO_INDICES);positions.push(),indices.push();for(var getMiddlePoint=function(){var pointMemo={};return function(i1,i2){var mini=(i1*=3)<(i2*=3)?i1:i2,maxi=i1>i2?i1:i2,key="".concat(mini,"|").concat(maxi);if(key in pointMemo)return pointMemo[key];var x1=positions[i1],y1=positions[i1+1],z1=positions[i1+2],x2=positions[i2],y2=positions[i2+1],z2=positions[i2+2],xm=(x1+x2)/2,ym=(y1+y2)/2,zm=(z1+z2)/2,len=Math.sqrt(xm*xm+ym*ym+zm*zm);return xm/=len,ym/=len,zm/=len,positions.push(xm,ym,zm),pointMemo[key]=positions.length/3-1}}(),i=0;i<iterations;i++){for(var indices2=[],j=0;j<indices.length;j+=3){var a=getMiddlePoint(indices[j+0],indices[j+1]),b=getMiddlePoint(indices[j+1],indices[j+2]),c=getMiddlePoint(indices[j+2],indices[j+0]);indices2.push(c,indices[j+0],a,a,indices[j+1],b,b,indices[j+2],c,a,b,c)}indices=indices2}for(var normals=new Array(3*indices.length),texCoords=new Array(2*indices.length),_i=indices.length-3;_i>=0;_i-=3){var i1=indices[_i+0],i2=indices[_i+1],i3=indices[_i+2],in1=3*i1,in2=3*i2,in3=3*i3,iu1=2*i1,iu2=2*i2,iu3=2*i3,x1=positions[in1+0],y1=positions[in1+1],z1=positions[in1+2],theta1=Math.acos(z1/Math.sqrt(x1*x1+y1*y1+z1*z1)),phi1=Math.atan2(y1,x1)+PI,v1=theta1/PI,u1=1-phi1/PI2,x2=positions[in2+0],y2=positions[in2+1],z2=positions[in2+2],theta2=Math.acos(z2/Math.sqrt(x2*x2+y2*y2+z2*z2)),phi2=Math.atan2(y2,x2)+PI,v2=theta2/PI,u2=1-phi2/PI2,x3=positions[in3+0],y3=positions[in3+1],z3=positions[in3+2],theta3=Math.acos(z3/Math.sqrt(x3*x3+y3*y3+z3*z3)),phi3=Math.atan2(y3,x3)+PI,v3=theta3/PI,u3=1-phi3/PI2,vec1=[x3-x2,y3-y2,z3-z2],vec2=[x1-x2,y1-y2,z1-z2],normal=new _math.Vector3(vec1).cross(vec2).normalize(),newIndex=void 0;(0===u1||0===u2||0===u3)&&(0===u1||u1>.5)&&(0===u2||u2>.5)&&(0===u3||u3>.5)&&(positions.push(positions[in1+0],positions[in1+1],positions[in1+2]),newIndex=positions.length/3-1,indices.push(newIndex),texCoords[2*newIndex+0]=1,texCoords[2*newIndex+1]=v1,normals[3*newIndex+0]=normal.x,normals[3*newIndex+1]=normal.y,normals[3*newIndex+2]=normal.z,positions.push(positions[in2+0],positions[in2+1],positions[in2+2]),newIndex=positions.length/3-1,indices.push(newIndex),texCoords[2*newIndex+0]=1,texCoords[2*newIndex+1]=v2,normals[3*newIndex+0]=normal.x,normals[3*newIndex+1]=normal.y,normals[3*newIndex+2]=normal.z,positions.push(positions[in3+0],positions[in3+1],positions[in3+2]),newIndex=positions.length/3-1,indices.push(newIndex),texCoords[2*newIndex+0]=1,texCoords[2*newIndex+1]=v3,normals[3*newIndex+0]=normal.x,normals[3*newIndex+1]=normal.y,normals[3*newIndex+2]=normal.z),normals[in1+0]=normals[in2+0]=normals[in3+0]=normal.x,normals[in1+1]=normals[in2+1]=normals[in3+1]=normal.y,normals[in1+2]=normals[in2+2]=normals[in3+2]=normal.z,texCoords[iu1+0]=u1,texCoords[iu1+1]=v1,texCoords[iu2+0]=u2,texCoords[iu2+1]=v2,texCoords[iu3+0]=u3,texCoords[iu3+1]=v3}return{indices:{size:1,value:new Uint16Array(indices)},attributes:{POSITION:{size:3,value:new Float32Array(positions)},NORMAL:{size:3,value:new Float32Array(normals)},TEXCOORD_0:{size:2,value:new Float32Array(texCoords)}}}}(props),indices=_tesselateIcosaHedron.indices,attributes=_tesselateIcosaHedron.attributes;return(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(IcoSphereGeometry).call(this,(0,_objectSpread2.default)({},props,{id:id,indices:indices,attributes:(0,_objectSpread2.default)({},attributes,props.attributes)})))}return(0,_inherits2.default)(IcoSphereGeometry,_Geometry),IcoSphereGeometry}(_geometry.default);exports.default=IcoSphereGeometry},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _objectSpread2=_interopRequireDefault(__webpack_require__(36)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_geometry=_interopRequireDefault(__webpack_require__(68)),_geometryUtils=__webpack_require__(716),_utils=__webpack_require__(19),PlaneGeometry=function(_Geometry){function PlaneGeometry(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,_classCallCheck2.default)(this,PlaneGeometry);var _props$id=props.id,id=void 0===_props$id?(0,_utils.uid)("plane-geometry"):_props$id,_tesselatePlane=function(props){var _props$type=props.type,type=void 0===_props$type?"x,y":_props$type,_props$offset=props.offset,offset=void 0===_props$offset?0:_props$offset,_props$flipCull=props.flipCull,flipCull=void 0!==_props$flipCull&&_props$flipCull,_props$unpack=props.unpack,unpack=void 0!==_props$unpack&&_props$unpack,coords=type.split(","),c1len=props["".concat(coords[0],"len")],c2len=props["".concat(coords[1],"len")],subdivisions1=props["n".concat(coords[0])]||1,subdivisions2=props["n".concat(coords[1])]||1,numVertices=(subdivisions1+1)*(subdivisions2+1),positions=new Float32Array(3*numVertices),normals=new Float32Array(3*numVertices),texCoords=new Float32Array(2*numVertices);flipCull&&(c1len=-c1len);for(var i2=0,i3=0,z=0;z<=subdivisions2;z++)for(var x=0;x<=subdivisions1;x++){var u=x/subdivisions1,v=z/subdivisions2;switch(texCoords[i2+0]=flipCull?1-u:u,texCoords[i2+1]=v,type){case"x,y":positions[i3+0]=c1len*u-.5*c1len,positions[i3+1]=c2len*v-.5*c2len,positions[i3+2]=offset,normals[i3+0]=0,normals[i3+1]=0,normals[i3+2]=flipCull?1:-1;break;case"x,z":positions[i3+0]=c1len*u-.5*c1len,positions[i3+1]=offset,positions[i3+2]=c2len*v-.5*c2len,normals[i3+0]=0,normals[i3+1]=flipCull?1:-1,normals[i3+2]=0;break;case"y,z":positions[i3+0]=offset,positions[i3+1]=c1len*u-.5*c1len,positions[i3+2]=c2len*v-.5*c2len,normals[i3+0]=flipCull?1:-1,normals[i3+1]=0,normals[i3+2]=0}i2+=2,i3+=3}for(var numVertsAcross=subdivisions1+1,indices=new Uint16Array(subdivisions1*subdivisions2*6),_z=0;_z<subdivisions2;_z++)for(var _x=0;_x<subdivisions1;_x++){var index=6*(_z*subdivisions1+_x);indices[index+0]=(_z+0)*numVertsAcross+_x,indices[index+1]=(_z+1)*numVertsAcross+_x,indices[index+2]=(_z+0)*numVertsAcross+_x+1,indices[index+3]=(_z+1)*numVertsAcross+_x,indices[index+4]=(_z+1)*numVertsAcross+_x+1,indices[index+5]=(_z+0)*numVertsAcross+_x+1}var geometry={indices:{size:1,value:indices},attributes:{POSITION:{size:3,value:positions},NORMAL:{size:3,value:normals},TEXCOORD_0:{size:2,value:texCoords}}};return unpack?(0,_geometryUtils.unpackIndexedGeometry)(geometry):geometry}(props),indices=_tesselatePlane.indices,attributes=_tesselatePlane.attributes;return(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(PlaneGeometry).call(this,(0,_objectSpread2.default)({},props,{id:id,indices:indices,attributes:(0,_objectSpread2.default)({},attributes,props.attributes)})))}return(0,_inherits2.default)(PlaneGeometry,_Geometry),PlaneGeometry}(_geometry.default);exports.default=PlaneGeometry},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unpackIndexedGeometry=function(geometry){var indices=geometry.indices,attributes=geometry.attributes;if(!indices)return geometry;for(var POSITION=attributes.POSITION,NORMAL=attributes.NORMAL,TEXCOORD_0=attributes.TEXCOORD_0,unpackedPositions=new Float32Array(3*indices.length),unpackedNormals=new Float32Array(3*indices.length),unpackedTexCoords=new Float32Array(2*indices.length),x=0;x<indices.length;++x){var index=indices[x];unpackedPositions[3*x+0]=POSITION[3*index+0],unpackedPositions[3*x+1]=POSITION[3*index+1],unpackedPositions[3*x+2]=POSITION[3*index+2],unpackedNormals[3*x+0]=NORMAL[3*index+0],unpackedNormals[3*x+1]=NORMAL[3*index+1],unpackedNormals[3*x+2]=NORMAL[3*index+2],unpackedTexCoords[2*x+0]=TEXCOORD_0[2*index+0],unpackedTexCoords[2*x+1]=TEXCOORD_0[2*index+1]}return{attributes:{POSITION:unpackedPositions,NORMAL:unpackedNormals,TEXCOORD_0:unpackedTexCoords}}}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _objectSpread2=_interopRequireDefault(__webpack_require__(36)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_geometry=_interopRequireDefault(__webpack_require__(68)),_utils=__webpack_require__(19),SphereGeometry=function(_Geometry){function SphereGeometry(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,_classCallCheck2.default)(this,SphereGeometry);var _props$id=props.id,id=void 0===_props$id?(0,_utils.uid)("sphere-geometry"):_props$id,_tesselateSphere=function(props){var _props$nlat=props.nlat,nlat=void 0===_props$nlat?10:_props$nlat,_props$nlong=props.nlong,nlong=void 0===_props$nlong?10:_props$nlong,_props$radius=props.radius,radius=void 0===_props$radius?1:_props$radius,latRange=Math.PI-0,longRange=2*Math.PI-0,numVertices=(nlat+1)*(nlong+1);if("number"==typeof radius){var value=radius;radius=function(n1,n2,n3,u,v){return value}}for(var positions=new Float32Array(3*numVertices),normals=new Float32Array(3*numVertices),texCoords=new Float32Array(2*numVertices),indices=new Uint16Array(nlat*nlong*6),y=0;y<=nlat;y++)for(var x=0;x<=nlong;x++){var u=x/nlong,v=y/nlat,index=x+y*(nlong+1),i2=2*index,i3=3*index,theta=longRange*u,phi=latRange*v,sinTheta=Math.sin(theta),cosTheta=Math.cos(theta),sinPhi=Math.sin(phi),cosPhi=Math.cos(phi),ux=cosTheta*sinPhi,uy=cosPhi,uz=sinTheta*sinPhi,r=radius(ux,uy,uz,u,v);positions[i3+0]=r*ux,positions[i3+1]=r*uy,positions[i3+2]=r*uz,normals[i3+0]=ux,normals[i3+1]=uy,normals[i3+2]=uz,texCoords[i2+0]=u,texCoords[i2+1]=1-v}for(var numVertsAround=nlat+1,_x=0;_x<nlat;_x++)for(var _y=0;_y<nlong;_y++){var _index=6*(_x*nlong+_y);indices[_index+0]=_y*numVertsAround+_x,indices[_index+1]=_y*numVertsAround+_x+1,indices[_index+2]=(_y+1)*numVertsAround+_x,indices[_index+3]=(_y+1)*numVertsAround+_x,indices[_index+4]=_y*numVertsAround+_x+1,indices[_index+5]=(_y+1)*numVertsAround+_x+1}return{indices:{size:1,value:indices},attributes:{POSITION:{size:3,value:positions},NORMAL:{size:3,value:normals},TEXCOORD_0:{size:2,value:texCoords}}}}(props),indices=_tesselateSphere.indices,attributes=_tesselateSphere.attributes;return(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(SphereGeometry).call(this,(0,_objectSpread2.default)({},props,{id:id,indices:indices,attributes:(0,_objectSpread2.default)({},attributes,props.attributes)})))}return(0,_inherits2.default)(SphereGeometry,_Geometry),SphereGeometry}(_geometry.default);exports.default=SphereGeometry},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_assertThisInitialized2=_interopRequireDefault(__webpack_require__(12)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_material=_interopRequireDefault(__webpack_require__(196)),defaultProps={ambient:.35,diffuse:.6,shininess:32,specularColor:[30,30,30]},PhongMaterial=function(_Material){function PhongMaterial(props){var _this;return(0,_classCallCheck2.default)(this,PhongMaterial),_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(PhongMaterial).call(this,props)),props=Object.assign({},defaultProps,props),Object.assign((0,_assertThisInitialized2.default)(_this),props),_this}return(0,_inherits2.default)(PhongMaterial,_Material),PhongMaterial}(_material.default);exports.default=PhongMaterial},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),PBRMaterial=function(_Material){function PBRMaterial(){return(0,_classCallCheck2.default)(this,PBRMaterial),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(PBRMaterial).apply(this,arguments))}return(0,_inherits2.default)(PBRMaterial,_Material),PBRMaterial}(_interopRequireDefault(__webpack_require__(196)).default);exports.default=PBRMaterial},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _toConsumableArray2=_interopRequireDefault(__webpack_require__(49)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_get2=_interopRequireDefault(__webpack_require__(16)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_math=__webpack_require__(25),_utils=__webpack_require__(19),_scenegraphNode=_interopRequireDefault(__webpack_require__(138)),GroupNode=function(_ScenegraphNode){function GroupNode(){var _this,props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,_classCallCheck2.default)(this,GroupNode);var _props$children=(props=Array.isArray(props)?{children:props}:props).children,children=void 0===_props$children?[]:_props$children;return children.every(function(child){return(0,_utils.assert)(child instanceof _scenegraphNode.default)}),(_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(GroupNode).call(this,props))).children=children,_this}return(0,_inherits2.default)(GroupNode,_ScenegraphNode),(0,_createClass2.default)(GroupNode,[{key:"add",value:function(){for(var _len=arguments.length,children=new Array(_len),_key=0;_key<_len;_key++)children[_key]=arguments[_key];for(var _i=0,_children=children;_i<_children.length;_i++){var child=_children[_i];Array.isArray(child)?this.add.apply(this,(0,_toConsumableArray2.default)(child)):this.children.push(child)}return this}},{key:"remove",value:function(child){var children=this.children,indexOf=children.indexOf(child);return indexOf>-1&&children.splice(indexOf,1),this}},{key:"removeAll",value:function(){return this.children=[],this}},{key:"delete",value:function(){this.children.forEach(function(child){return child.delete()}),this.removeAll(),(0,_get2.default)((0,_getPrototypeOf2.default)(GroupNode.prototype),"delete",this).call(this)}},{key:"traverse",value:function(visitor){var _ref$worldMatrix=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).worldMatrix,worldMatrix=void 0===_ref$worldMatrix?new _math.Matrix4:_ref$worldMatrix,modelMatrix=new _math.Matrix4(worldMatrix).multiplyRight(this.matrix),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.children[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var child=_step.value;child instanceof GroupNode?child.traverse(visitor,{worldMatrix:modelMatrix}):visitor(child,{worldMatrix:modelMatrix})}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}},{key:"traverseReverse",value:function(visitor,opts){return _utils.log.warn("traverseReverse is not reverse")(),this.traverse(visitor,opts)}}]),GroupNode}(_scenegraphNode.default);exports.default=GroupNode},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_get2=_interopRequireDefault(__webpack_require__(16)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_model=_interopRequireDefault(__webpack_require__(136)),ModelNode=function(_ScenegraphNode){function ModelNode(gl){var _this,props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,_classCallCheck2.default)(this,ModelNode),(_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(ModelNode).call(this,props))).onBeforeRender=null,_this.AfterRender=null,gl instanceof _model.default?(_this.model=gl,_this._setModelNodeProps(props)):_this.model=new _model.default(gl,props),_this.managedResources=props.managedResources||[],_this}return(0,_inherits2.default)(ModelNode,_ScenegraphNode),(0,_createClass2.default)(ModelNode,[{key:"setProps",value:function(props){return(0,_get2.default)((0,_getPrototypeOf2.default)(ModelNode.prototype),"setProps",this).call(this,props),this._setModelNodeProps(props),this}},{key:"delete",value:function(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(function(resource){return resource.delete()}),this.managedResources=[]}},{key:"draw",value:function(){var _this$model;return(_this$model=this.model).draw.apply(_this$model,arguments)}},{key:"setUniforms",value:function(){var _this$model2;return(_this$model2=this.model).setUniforms.apply(_this$model2,arguments),this}},{key:"setAttributes",value:function(){var _this$model3;return(_this$model3=this.model).setAttributes.apply(_this$model3,arguments),this}},{key:"updateModuleSettings",value:function(){var _this$model4;return(_this$model4=this.model).updateModuleSettings.apply(_this$model4,arguments),this}},{key:"_setModelNodeProps",value:function(props){this.model.setProps(props)}}]),ModelNode}(_interopRequireDefault(__webpack_require__(138)).default);exports.default=ModelNode},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),CameraNode=function(_ScenegraphNode){function CameraNode(){var _this,props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,_classCallCheck2.default)(this,CameraNode),(_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(CameraNode).call(this,props))).projectionMatrix=props.projectionMatrix,_this}return(0,_inherits2.default)(CameraNode,_ScenegraphNode),CameraNode}(_interopRequireDefault(__webpack_require__(138)).default);exports.default=CameraNode},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _constants=__webpack_require__(329),COORDINATE_SYSTEM_GLSL_CONSTANTS=Object.keys(_constants.PROJECT_COORDINATE_SYSTEM).map(function(key){return"const float COORDINATE_SYSTEM_".concat(key," = ").concat(_constants.PROJECT_COORDINATE_SYSTEM[key],".;")}).join(""),_default="".concat(COORDINATE_SYSTEM_GLSL_CONSTANTS,"\n\nuniform float project_uCoordinateSystem;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform float project_uAntimeridian;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec2 project_uCoordinateOrigin;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec2 ZERO_64_XY_LOW = vec2(0.0, 0.0);\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z;\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy;\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter;\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nvec3 project_normal(vec3 vector) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNG_LAT ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_AUTO_OFFSET) {\n    return normalize(vector * project_uCommonUnitsPerWorldUnit);\n  }\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  return normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_AUTO_OFFSET) {\n    dy = clamp(dy, -1., 1.);\n  }\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x - project_uAntimeridian, 360.0) + project_uAntimeridian;\n  }\n  return vec2(\n    radians(x) + PI,\n    PI - log(tan_fp32(PI * 0.25 + radians(lnglat.y) * 0.5))\n  );\n}\nvec4 project_position(vec4 position, vec2 position64xyLow) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNG_LAT) {\n    return project_uModelMatrix * vec4(\n      project_mercator_(position.xy) * WORLD_SCALE * project_uScale,\n      project_size(position.z),\n      position.w\n    );\n  }\n\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_AUTO_OFFSET) {\n    float X = position.x - project_uCoordinateOrigin.x;\n    float Y = position.y - project_uCoordinateOrigin.y;\n    return project_offset_(vec4(X + position64xyLow.x, Y + position64xyLow.y, position.z, position.w));\n  }\n\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return project_offset_(position);\n  }\n  vec4 position_modelspace = project_uModelMatrix * position;\n  return project_offset_(position_modelspace);\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_XY_LOW);\n}\n\nvec3 project_position(vec3 position, vec2 position64xyLow) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64xyLow);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_XY_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_XY_LOW);\n  return projected_position.xy;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_METER_OFFSETS ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    position.w *= project_uCommonUnitsPerMeter.z;\n  }\n  return project_uViewProjectionMatrix * position + project_uCenter;\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters);\n}\nfloat project_pixel_size(float pixels) {\n  return pixels;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels;\n}\nfloat project_scale(float meters) {\n  return project_size(meters);\n}\nvec2 project_scale(vec2 meters) {\n  return project_size(meters);\n}\nvec3 project_scale(vec3 meters) {\n  return project_size(meters);\n}\nvec4 project_scale(vec4 meters) {\n  return project_size(meters);\n}\nvec4 project_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position);\n}\nvec4 project_pixel_to_clipspace(vec2 pixels) {\n  return vec4(project_pixel_size_to_clipspace(pixels), 0.0, 0.0);\n}\n");exports.default=_default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default={name:"project32",dependencies:[_interopRequireDefault(__webpack_require__(139)).default],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64xyLow);\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64xyLow, offset, commonPosition);\n}\n"};exports.default=_default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default="\nconst vec2 WORLD_SCALE_FP64 = vec2(81.4873275756836, 0.0000032873668232014097);\n\nuniform vec2 project64_uScale;\nuniform vec2 project_uViewProjectionMatrixFP64[16];\nvoid mercatorProject_fp64(vec4 lnglat_fp64, out vec2 out_val[2]) {\n\n#if defined(NVIDIA_FP64_WORKAROUND)\n  out_val[0] = sum_fp64(radians_fp64(lnglat_fp64.xy), PI_FP64 * ONE);\n#else\n  out_val[0] = sum_fp64(radians_fp64(lnglat_fp64.xy), PI_FP64);\n#endif\n  out_val[1] = sub_fp64(PI_FP64,\n    log_fp64(tan_fp64(sum_fp64(PI_4_FP64, radians_fp64(lnglat_fp64.zw) / 2.0))));\n  return;\n}\n\nvoid project_position_fp64(vec4 position_fp64, out vec2 out_val[2]) {\n  vec2 pos_fp64[2];\n  mercatorProject_fp64(position_fp64, pos_fp64);\n  vec2 x_fp64 = mul_fp64(pos_fp64[0], project64_uScale);\n  vec2 y_fp64 = mul_fp64(pos_fp64[1], project64_uScale);\n  out_val[0] = mul_fp64(x_fp64, WORLD_SCALE_FP64);\n  out_val[1] = mul_fp64(y_fp64, WORLD_SCALE_FP64);\n\n  return;\n}\n\nvoid project_position_fp64(vec2 position, vec2 position64xyLow, out vec2 out_val[2]) {\n  vec4 position64xy = vec4(\n    position.x, position64xyLow.x,\n    position.y, position64xyLow.y);\n\n  project_position_fp64(position64xy, out_val);\n}\n\nvec4 project_common_position_to_clipspace_fp64(vec2 vertex_pos_modelspace[4]) {\n  vec2 vertex_pos_clipspace[4];\n  mat4_vec4_mul_fp64(project_uViewProjectionMatrixFP64, vertex_pos_modelspace,\n    vertex_pos_clipspace);\n  return vec4(\n    vertex_pos_clipspace[0].x,\n    vertex_pos_clipspace[1].x,\n    vertex_pos_clipspace[2].x,\n    vertex_pos_clipspace[3].x\n    );\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset, out vec4 commonPosition\n) {\n  vec2 offset64[4];\n  vec4_fp64(vec4(offset, 0.0), offset64);\n\n  float z = project_size(position.z);\n  vec2 projectedPosition64xy[2];\n  project_position_fp64(position.xy, position64xyLow, projectedPosition64xy);\n\n  vec2 commonPosition64[4];\n  commonPosition64[0] = sum_fp64(offset64[0], projectedPosition64xy[0]);\n  commonPosition64[1] = sum_fp64(offset64[1], projectedPosition64xy[1]);\n  commonPosition64[2] = sum_fp64(offset64[2], vec2(z, 0.0));\n  commonPosition64[3] = vec2(1.0, 0.0);\n\n  commonPosition = vec4(projectedPosition64xy[0].x, projectedPosition64xy[1].x, z, 1.0);\n\n  return project_common_position_to_clipspace_fp64(commonPosition64);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(\n    position, position64xyLow, offset, commonPosition\n  );\n}\nvec4 project_to_clipspace_fp64(vec2 vertex_pos_modelspace[4]) {\n  return project_common_position_to_clipspace_fp64(vertex_pos_modelspace);\n}\n"},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(9),_interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _slicedToArray2=_interopRequireDefault(__webpack_require__(11)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_mathUtils=__webpack_require__(140),_webMercatorUtils=__webpack_require__(141),mat4=_interopRequireWildcard(__webpack_require__(89)),IDENTITY=(0,_mathUtils.createMat4)(),Viewport=function(){function Viewport(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},width=_ref.width,height=_ref.height,_ref$viewMatrix=_ref.viewMatrix,viewMatrix=void 0===_ref$viewMatrix?IDENTITY:_ref$viewMatrix,_ref$projectionMatrix=_ref.projectionMatrix,projectionMatrix=void 0===_ref$projectionMatrix?IDENTITY:_ref$projectionMatrix;(0,_classCallCheck2.default)(this,Viewport),this.width=width||1,this.height=height||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=viewMatrix,this.projectionMatrix=projectionMatrix;var vpm=(0,_mathUtils.createMat4)();mat4.multiply(vpm,vpm,this.projectionMatrix),mat4.multiply(vpm,vpm,this.viewMatrix),this.viewProjectionMatrix=vpm;var m=(0,_mathUtils.createMat4)();mat4.scale(m,m,[this.width/2,-this.height/2,1]),mat4.translate(m,m,[1,-1,0]),mat4.multiply(m,m,this.viewProjectionMatrix);var mInverse=mat4.invert((0,_mathUtils.createMat4)(),m);if(!mInverse)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=m,this.pixelUnprojectionMatrix=mInverse,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return(0,_createClass2.default)(Viewport,[{key:"equals",value:function(viewport){return viewport instanceof Viewport&&(viewport.width===this.width&&viewport.height===this.height&&mat4.equals(viewport.projectionMatrix,this.projectionMatrix)&&mat4.equals(viewport.viewMatrix,this.viewMatrix))}},{key:"project",value:function(xyz){var _ref2$topLeft=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,topLeft=void 0===_ref2$topLeft||_ref2$topLeft,worldPosition=this.projectPosition(xyz),coord=(0,_webMercatorUtils.worldToPixels)(worldPosition,this.pixelProjectionMatrix),_coord=(0,_slicedToArray2.default)(coord,2),x=_coord[0],y=_coord[1],y2=topLeft?y:this.height-y;return 2===xyz.length?[x,y2]:[x,y2,coord[2]]}},{key:"unproject",value:function(xyz){var _ref3=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref3$topLeft=_ref3.topLeft,topLeft=void 0===_ref3$topLeft||_ref3$topLeft,targetZ=_ref3.targetZ,_xyz=(0,_slicedToArray2.default)(xyz,3),x=_xyz[0],y=_xyz[1],z=_xyz[2],y2=topLeft?y:this.height-y,targetZWorld=targetZ&&targetZ*this.pixelsPerMeter,coord=(0,_webMercatorUtils.pixelsToWorld)([x,y2,z],this.pixelUnprojectionMatrix,targetZWorld),_this$unprojectPositi=this.unprojectPosition(coord),_this$unprojectPositi2=(0,_slicedToArray2.default)(_this$unprojectPositi,3),X=_this$unprojectPositi2[0],Y=_this$unprojectPositi2[1],Z=_this$unprojectPositi2[2];return Number.isFinite(z)?[X,Y,Z]:Number.isFinite(targetZ)?[X,Y,targetZ]:[X,Y]}},{key:"projectPosition",value:function(xyz){var _this$projectFlat=this.projectFlat(xyz),_this$projectFlat2=(0,_slicedToArray2.default)(_this$projectFlat,2);return[_this$projectFlat2[0],_this$projectFlat2[1],(xyz[2]||0)*this.pixelsPerMeter]}},{key:"unprojectPosition",value:function(xyz){var _this$unprojectFlat=this.unprojectFlat(xyz),_this$unprojectFlat2=(0,_slicedToArray2.default)(_this$unprojectFlat,2);return[_this$unprojectFlat2[0],_this$unprojectFlat2[1],(xyz[2]||0)/this.pixelsPerMeter]}},{key:"projectFlat",value:function(xyz){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return xyz}},{key:"unprojectFlat",value:function(xyz){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return xyz}}]),Viewport}();exports.default=Viewport},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(_ref){var width=_ref.width,height=_ref.height,longitude=_ref.longitude,latitude=_ref.latitude,zoom=_ref.zoom,_ref$pitch=_ref.pitch,pitch=void 0===_ref$pitch?0:_ref$pitch,_ref$bearing=_ref.bearing,bearing=void 0===_ref$bearing?0:_ref$bearing;(longitude<-180||longitude>180)&&(longitude=(0,_mathUtils.mod)(longitude+180,360)-180);(bearing<-180||bearing>180)&&(bearing=(0,_mathUtils.mod)(bearing+180,360)-180);var flatViewport=new _webMercatorViewport.default({width:width,height:height,longitude:longitude,latitude:latitude,zoom:zoom}),topY=flatViewport.project([longitude,MAX_LATITUDE])[1],bottomY=flatViewport.project([longitude,MIN_LATITUDE])[1],shiftY=0;bottomY-topY<height&&(zoom+=Math.log2(height/(bottomY-topY)),flatViewport=new _webMercatorViewport.default({width:width,height:height,longitude:longitude,latitude:latitude,zoom:zoom}),topY=flatViewport.project([longitude,MAX_LATITUDE])[1],bottomY=flatViewport.project([longitude,MIN_LATITUDE])[1]);topY>0?shiftY=topY:bottomY<height&&(shiftY=bottomY-height);shiftY&&(latitude=flatViewport.unproject([width/2,height/2+shiftY])[1]);return{width:width,height:height,longitude:longitude,latitude:latitude,zoom:zoom,pitch:pitch,bearing:bearing}};var _webMercatorViewport=_interopRequireDefault(__webpack_require__(207)),_mathUtils=__webpack_require__(140),MAX_LATITUDE=85.05113,MIN_LATITUDE=-85.05113},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(9);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(startProps,endProps,t){var viewport={},startZoom=startProps.zoom,startCenter=[startProps.longitude,startProps.latitude],startScale=(0,_webMercatorUtils.zoomToScale)(startZoom),endZoom=endProps.zoom,endCenter=[endProps.longitude,endProps.latitude],scale=(0,_webMercatorUtils.zoomToScale)(endZoom-startZoom),startCenterXY=(0,_webMercatorUtils.lngLatToWorld)(startCenter,startScale),endCenterXY=(0,_webMercatorUtils.lngLatToWorld)(endCenter,startScale),uDelta=vec2.sub([],endCenterXY,startCenterXY),w0=Math.max(startProps.width,startProps.height),w1=w0/scale,u1=vec2.length(uDelta);if(Math.abs(u1)<EPSILON){for(var _i=0;_i<VIEWPORT_TRANSITION_PROPS.length;_i++){var key=VIEWPORT_TRANSITION_PROPS[_i],startValue=startProps[key],endValue=endProps[key];viewport[key]=(0,_mathUtils.lerp)(startValue,endValue,t)}return viewport}var rho2=1.414*1.414,b0=(w1*w1-w0*w0+rho2*rho2*u1*u1)/(2*w0*rho2*u1),b1=(w1*w1-w0*w0-rho2*rho2*u1*u1)/(2*w1*rho2*u1),r0=Math.log(Math.sqrt(b0*b0+1)-b0),r1=Math.log(Math.sqrt(b1*b1+1)-b1),s=t*((r1-r0)/1.414),w=Math.cosh(r0)/Math.cosh(r0+1.414*s),u=w0*((Math.cosh(r0)*Math.tanh(r0+1.414*s)-Math.sinh(r0))/rho2)/u1,scaleIncrement=1/w,newZoom=startZoom+(0,_webMercatorUtils.scaleToZoom)(scaleIncrement),newCenterWorld=vec2.scale([],uDelta,u);vec2.add(newCenterWorld,newCenterWorld,startCenterXY),vec2.scale(newCenterWorld,newCenterWorld,scaleIncrement);var newCenter=(0,_webMercatorUtils.worldToLngLat)(newCenterWorld,(0,_webMercatorUtils.zoomToScale)(newZoom));return viewport.longitude=newCenter[0],viewport.latitude=newCenter[1],viewport.zoom=newZoom,viewport};var _mathUtils=__webpack_require__(140),_webMercatorUtils=__webpack_require__(141),vec2=_interopRequireWildcard(__webpack_require__(69)),EPSILON=.01,VIEWPORT_TRANSITION_PROPS=["longitude","latitude","zoom"]},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"COORDINATE_SYSTEM",{enumerable:!0,get:function(){return _constants.COORDINATE_SYSTEM}}),Object.defineProperty(exports,"Layer",{enumerable:!0,get:function(){return _layer.default}}),Object.defineProperty(exports,"CompositeLayer",{enumerable:!0,get:function(){return _compositeLayer.default}}),Object.defineProperty(exports,"AttributeManager",{enumerable:!0,get:function(){return _attributeManager.default}}),Object.defineProperty(exports,"LayerManager",{enumerable:!0,get:function(){return _layerManager.default}}),__webpack_require__(284);var _constants=__webpack_require__(91),_layer=_interopRequireDefault(__webpack_require__(142)),_compositeLayer=_interopRequireDefault(__webpack_require__(343)),_attributeManager=_interopRequireDefault(__webpack_require__(208)),_layerManager=_interopRequireDefault(__webpack_require__(211))},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_core=__webpack_require__(7),_attributeTransitionUtils=__webpack_require__(731),_attribute=_interopRequireDefault(__webpack_require__(337)),_baseAttribute=_interopRequireDefault(__webpack_require__(338)),_transition=_interopRequireDefault(__webpack_require__(339)),_log=_interopRequireDefault(__webpack_require__(24)),_assert=_interopRequireDefault(__webpack_require__(20)),noop=function(){},DEFAULT_TRANSITION_SETTINGS={duration:0,easing:function(t){return t},onStart:noop,onEnd:noop,onInterrupt:noop},AttributeTransitionManager=function(){function AttributeTransitionManager(gl,_ref){var id=_ref.id;(0,_classCallCheck2.default)(this,AttributeTransitionManager),this.id=id,this.gl=gl,this.attributeTransitions={},this.needsRedraw=!1,this.transform=null,this.numInstances=0,_core.Transform.isSupported(gl)?this.isSupported=!0:gl&&_log.default.warn("WebGL2 not supported by this browser. Transition animation is disabled.")()}return(0,_createClass2.default)(AttributeTransitionManager,[{key:"finalize",value:function(){for(var attributeName in this.transform&&this.transform.delete(),this.attributeTransitions)this._removeTransition(attributeName)}},{key:"update",value:function(_ref2){var attributes=_ref2.attributes,_ref2$transitions=_ref2.transitions,transitions=void 0===_ref2$transitions?{}:_ref2$transitions,numInstances=_ref2.numInstances;if(this.opts=transitions,this.numInstances=numInstances||1,this.isSupported){var attributeTransitions=this.attributeTransitions,changedTransitions={};for(var attributeName in attributes){this._updateAttribute(attributeName,attributes[attributeName])&&(changedTransitions[attributeName]=attributeTransitions[attributeName])}for(var _attributeName in attributeTransitions){var attribute=attributes[_attributeName];attribute&&attribute.supportsTransition()||this._removeTransition(_attributeName)}if(this.transform){if(this.transform){var _getBuffers=(0,_attributeTransitionUtils.getBuffers)(changedTransitions),sourceBuffers=_getBuffers.sourceBuffers,feedbackBuffers=_getBuffers.feedbackBuffers;this.transform.update({elementCount:this.numInstances,sourceBuffers:sourceBuffers,feedbackBuffers:feedbackBuffers})}}else this._createModel()}}},{key:"hasAttribute",value:function(attributeName){return attributeName in this.attributeTransitions}},{key:"getAttributes",value:function(){var animatedAttributes={};for(var attributeName in this.attributeTransitions){var transition=this.attributeTransitions[attributeName];transition.buffer&&(animatedAttributes[attributeName]=transition.attributeInTransition)}return animatedAttributes}},{key:"setCurrentTime",value:function(currentTime){if(!this.transform||0===this.numInstances)return!1;var uniforms={},needsRedraw=this.needsRedraw;for(var attributeName in this.needsRedraw=!1,this.attributeTransitions){var transition=this.attributeTransitions[attributeName];transition.update(currentTime)&&(uniforms["".concat(attributeName,"Time")]=transition.time,needsRedraw=!0)}return needsRedraw&&this.transform.run({uniforms:uniforms}),needsRedraw}},{key:"_createTransition",value:function(attributeName,attribute){var transition=this.attributeTransitions[attributeName];return transition?null:(transition=new _transition.default({name:attributeName,attribute:attribute,attributeInTransition:new _attribute.default(this.gl,attribute),bufferLayout:attribute.bufferLayout}),this.attributeTransitions[attributeName]=transition,this._invalidateModel(),transition)}},{key:"_removeTransition",value:function(attributeName){var transition=this.attributeTransitions[attributeName];transition&&(transition.buffer&&transition.buffer.delete(),transition._swapBuffer&&transition._swapBuffer.delete(),delete this.attributeTransitions[attributeName],this._invalidateModel())}},{key:"_updateAttribute",value:function(attributeName,attribute){var settings=attribute.getTransitionSetting(this.opts);if(settings){var hasChanged,transition=this.attributeTransitions[attributeName];if(transition?hasChanged=attribute.needsRedraw():(transition=this._createTransition(attributeName,attribute),hasChanged=!0),hasChanged)return this._triggerTransition(transition,settings),!0}return!1}},{key:"_invalidateModel",value:function(){this.transform&&(this.transform.delete(),this.transform=null)}},{key:"_createModel",value:function(){0!==Object.keys(this.attributeTransitions).length&&(this.transform=new _core.Transform(this.gl,Object.assign({elementCount:this.numInstances},(0,_attributeTransitionUtils.getBuffers)(this.attributeTransitions),(0,_attributeTransitionUtils.getShaders)(this.attributeTransitions))))}},{key:"_getNextTransitionStates",value:function(transition,settings){var toState,attribute=transition.attribute,size=attribute.size;toState=attribute.constant?new _baseAttribute.default(this.gl,{constant:!0,value:attribute.value,size:size}):new _baseAttribute.default(this.gl,{constant:!1,buffer:attribute.getBuffer(),divisor:0,size:size,value:attribute.externalBuffer?null:attribute.value});var fromState=transition.buffer||toState,toLength=this.numInstances*size,fromLength=fromState instanceof _core.Buffer&&fromState.getElementCount()||toLength,buffer=transition._swapBuffer;return transition._swapBuffer=transition.buffer,buffer?buffer.getElementCount()<toLength&&buffer.setData({data:new Float32Array(toLength)}):buffer=new _core.Buffer(this.gl,{data:new Float32Array(toLength),usage:35050}),transition.attributeInTransition.update({buffer:buffer}),(0,_attributeTransitionUtils.padBuffer)({fromState:fromState,toState:toState,fromLength:fromLength,toLength:toLength,fromBufferLayout:transition.bufferLayout,toBufferLayout:attribute.bufferLayout,getData:settings.enter}),transition.bufferLayout=attribute.bufferLayout,{fromState:fromState,toState:toState,buffer:buffer}}},{key:"_triggerTransition",value:function(transition,settings){(0,_assert.default)(settings&&settings.duration>0),this.needsRedraw=!0;var transitionSettings=Object.assign({},DEFAULT_TRANSITION_SETTINGS,settings);transition.start(Object.assign({},this._getNextTransitionStates(transition,settings),transitionSettings))}}]),AttributeTransitionManager}();exports.default=AttributeTransitionManager},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getShaders=function(transitions){var varyings=[],attributeDeclarations=[],uniformsDeclarations=[],varyingDeclarations=[],calculations=[];for(var attributeName in transitions){var transition=transitions[attributeName],attributeType=ATTRIBUTE_MAPPING[transition.attribute.size];attributeType&&(transition.bufferIndex=varyings.length,varyings.push(attributeName),attributeDeclarations.push("attribute ".concat(attributeType," ").concat(attributeName,"From;")),attributeDeclarations.push("attribute ".concat(attributeType," ").concat(attributeName,"To;")),uniformsDeclarations.push("uniform float ".concat(attributeName,"Time;")),varyingDeclarations.push("varying ".concat(attributeType," ").concat(attributeName,";")),calculations.push("".concat(attributeName," = mix(").concat(attributeName,"From, ").concat(attributeName,"To,\n        ").concat(attributeName,"Time);")))}var vs="\n#define SHADER_NAME feedback-vertex-shader\n".concat(attributeDeclarations.join("\n"),"\n").concat(uniformsDeclarations.join("\n"),"\n").concat(varyingDeclarations.join("\n"),"\n\nvoid main(void) {\n  ").concat(calculations.join("\n"),"\n  gl_Position = vec4(0.0);\n}\n"),fs="#define SHADER_NAME feedback-fragment-shader\n\nprecision highp float;\n\n".concat(varyingDeclarations.join("\n"),"\n\nvoid main(void) {\n  gl_FragColor = vec4(0.0);\n}\n");return{vs:vs,fs:fs,varyings:varyings}},exports.getBuffers=function(transitions){var sourceBuffers={},feedbackBuffers={};for(var attributeName in transitions){var _transitions$attribut=transitions[attributeName],fromState=_transitions$attribut.fromState,toState=_transitions$attribut.toState,buffer=_transitions$attribut.buffer;sourceBuffers["".concat(attributeName,"From")]=fromState instanceof _core.Buffer?[fromState,{divisor:0}]:fromState,sourceBuffers["".concat(attributeName,"To")]=toState,feedbackBuffers["".concat(attributeName)]=buffer}return{sourceBuffers:sourceBuffers,feedbackBuffers:feedbackBuffers}},exports.padBuffer=function(_ref){var fromState=_ref.fromState,toState=_ref.toState,fromLength=_ref.fromLength,toLength=_ref.toLength,fromBufferLayout=_ref.fromBufferLayout,toBufferLayout=_ref.toBufferLayout,_ref$getData=_ref.getData,getData=void 0===_ref$getData?function(x){return x}:_ref$getData;if((!fromBufferLayout||!toBufferLayout)&&fromLength>=toLength||!(fromState instanceof _core.Buffer))return;var data=new Float32Array(toLength),fromData=fromState.getData({}),size=toState.size,constant=toState.constant,toData=constant?toState.getValue():toState.getBuffer().getData({}),getMissingData=constant?function(i,chunk){return getData(toData,chunk)}:function(i,chunk){return getData(toData.subarray(i,i+size),chunk)};(0,_arrayUtils.padArray)({source:fromData,target:data,sourceLayout:fromBufferLayout,targetLayout:toBufferLayout,size:toState.size,getData:getMissingData}),fromState.setData({data:data})};var _core=__webpack_require__(7),_arrayUtils=__webpack_require__(732),ATTRIBUTE_MAPPING={1:"float",2:"vec2",3:"vec3",4:"vec4"}},function(module,exports,__webpack_require__){"use strict";function padArrayChunk(_ref){var source=_ref.source,target=_ref.target,_ref$start=_ref.start,start=void 0===_ref$start?0:_ref$start,end=_ref.end,getData=_ref.getData;end=end||target.length;var sourceLength=source.length,targetLength=end-start;if(sourceLength>targetLength)target.set(source.subarray(0,targetLength),start);else if(target.set(source,start),getData)for(var i=sourceLength;i<targetLength;)for(var datum=getData(i,source),j=0;j<datum.length;j++)target[start+i]=datum[j],i++}Object.defineProperty(exports,"__esModule",{value:!0}),exports.padArray=function(_ref2){var source=_ref2.source,target=_ref2.target,size=_ref2.size,getData=_ref2.getData,sourceLayout=_ref2.sourceLayout,targetLayout=_ref2.targetLayout;if(!Array.isArray(targetLayout))return padArrayChunk({source:source,target:target,getData:getData}),target;for(var sourceIndex=0,targetIndex=0,getChunkData=getData&&function(i,chunk){return getData(i+targetIndex,chunk)},n=Math.min(sourceLayout.length,targetLayout.length),i=0;i<n;i++){var sourceChunkLength=sourceLayout[i]*size,targetChunkLength=targetLayout[i]*size;padArrayChunk({source:source.subarray(sourceIndex,sourceIndex+sourceChunkLength),target:target,start:targetIndex,end:targetIndex+targetChunkLength,getData:getChunkData}),sourceIndex+=sourceChunkLength,targetIndex+=targetChunkLength}targetIndex<target.length&&padArrayChunk({source:[],target:target,start:targetIndex,getData:getChunkData});return target}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateProps=function(props){var propTypes=getPropTypes(props);for(var propName in propTypes){var propType=propTypes[propName],validate=propType.validate;if(validate&&!validate(props[propName],propType))throw new Error("Invalid prop ".concat(propName,": ").concat(props[propName]))}},exports.diffProps=function(props,oldProps){var propsChangedReason=compareProps({newProps:props,oldProps:oldProps,propTypes:getPropTypes(props),ignoreProps:{data:null,updateTriggers:null}}),dataChangedReason=function(props,oldProps){if(null===oldProps)return"oldProps is null, initial diff";var dataComparator=props.dataComparator;if(dataComparator){if(!dataComparator(props.data,oldProps.data))return"Data comparator detected a change"}else if(props.data!==oldProps.data)return"A new data container was supplied";return null}(props,oldProps),updateTriggersChangedReason=!1;dataChangedReason||(updateTriggersChangedReason=function(props,oldProps){if(null===oldProps)return"oldProps is null, initial diff";if("all"in props.updateTriggers){var diffReason=diffUpdateTrigger(props,oldProps,"all");if(diffReason)return{all:!0}}var triggerChanged={},reason=!1;for(var triggerName in props.updateTriggers)if("all"!==triggerName){var _diffReason=diffUpdateTrigger(props,oldProps,triggerName);_diffReason&&(triggerChanged[triggerName]=!0,reason=triggerChanged)}return reason}(props,oldProps));return{dataChanged:dataChangedReason,propsChanged:propsChangedReason,updateTriggersChanged:updateTriggersChangedReason}},exports.compareProps=compareProps;var _typeof2=_interopRequireDefault(__webpack_require__(27)),_assert=_interopRequireDefault(__webpack_require__(20));function compareProps(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},newProps=_ref.newProps,oldProps=_ref.oldProps,_ref$ignoreProps=_ref.ignoreProps,ignoreProps=void 0===_ref$ignoreProps?{}:_ref$ignoreProps,_ref$propTypes=_ref.propTypes,propTypes=void 0===_ref$propTypes?{}:_ref$propTypes,_ref$triggerName=_ref.triggerName,triggerName=void 0===_ref$triggerName?"props":_ref$triggerName;if((0,_assert.default)(void 0!==oldProps&&void 0!==newProps,"compareProps args"),oldProps===newProps)return null;if("object"!==(0,_typeof2.default)(newProps)||null===newProps)return"".concat(triggerName," changed shallowly");if("object"!==(0,_typeof2.default)(oldProps)||null===oldProps)return"".concat(triggerName," changed shallowly");for(var key in oldProps)if(!(key in ignoreProps)){if(!(key in newProps))return"".concat(triggerName,".").concat(key," dropped");var newProp=newProps[key],oldProp=oldProps[key],propType=propTypes[key],equal=propType&&propType.equal;if(equal&&!equal(newProp,oldProp,propType))return"".concat(triggerName,".").concat(key," changed deeply");if(!equal&&(equal=newProp&&oldProp&&newProp.equals)&&!equal.call(newProp,oldProp))return"".concat(triggerName,".").concat(key," changed deeply");if(!equal&&oldProp!==newProp)return"".concat(triggerName,".").concat(key," changed shallowly")}for(var _key in newProps)if(!(_key in ignoreProps||_key in oldProps))return"".concat(triggerName,".").concat(_key," added: undefined -> ").concat(newProps[_key]);return null}function diffUpdateTrigger(props,oldProps,triggerName){var newTriggers=props.updateTriggers[triggerName];newTriggers=null==newTriggers?{}:newTriggers;var oldTriggers=oldProps.updateTriggers[triggerName];return compareProps({oldProps:oldTriggers=null==oldTriggers?{}:oldTriggers,newProps:newTriggers,triggerName:triggerName})}function getPropTypes(props){var layer=props._component,LayerType=layer&&layer.constructor;return LayerType?LayerType._propTypes:{}}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_constants=__webpack_require__(341),_createProps=__webpack_require__(735),_componentState=_interopRequireDefault(__webpack_require__(342)),counter=0,Component=function(){function Component(){(0,_classCallCheck2.default)(this,Component),this.props=_createProps.createProps.apply(this,arguments),this.id=this.props.id,this.count=counter++,this.lifecycle=_constants.LIFECYCLE.NO_STATE,this.parent=null,this.context=null,this.state=null,this.internalState=null,Object.seal(this)}return(0,_createClass2.default)(Component,[{key:"clone",value:function(newProps){var props=this.props,asyncProps={};for(var key in props._asyncPropDefaultValues)key in props._asyncPropResolvedValues?asyncProps[key]=props._asyncPropResolvedValues[key]:key in props._asyncPropOriginalValues&&(asyncProps[key]=props._asyncPropOriginalValues[key]);return new this.constructor(Object.assign({},props,asyncProps,newProps))}},{key:"_initState",value:function(){this.internalState=new _componentState.default({})}},{key:"stats",get:function(){return this.internalState.stats}}]),Component}();exports.default=Component,Component.componentName="Component",Component.defaultProps={}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.createProps=function(){for(var propTypeDefs=getPropsPrototypeAndTypes(this.constructor),propsPrototype=propTypeDefs.defaultProps,propsInstance=Object.create(propsPrototype,{_component:{enumerable:!1,value:this},_asyncPropOriginalValues:{enumerable:!1,value:{}},_asyncPropResolvedValues:{enumerable:!1,value:{}}}),i=0;i<arguments.length;++i)Object.assign(propsInstance,arguments[i]);var layerName=this.constructor.layerName,deprecatedProps=propTypeDefs.deprecatedProps;return checkDeprecatedProps(layerName,propsInstance,deprecatedProps),checkDeprecatedProps(layerName,propsInstance.updateTriggers,deprecatedProps),checkDeprecatedProps(layerName,propsInstance.transitions,deprecatedProps),(0,_seerIntegration.applyPropOverrides)(propsInstance),Object.freeze(propsInstance),propsInstance};var _seerIntegration=__webpack_require__(210),_log=_interopRequireDefault(__webpack_require__(24)),_propTypes=__webpack_require__(736);function checkDeprecatedProps(layerName,propsInstance,deprecatedProps){if(propsInstance)for(var name in deprecatedProps)if(hasOwnProperty(propsInstance,name)){var nameStr="".concat(layerName||"Layer",": ").concat(name),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=deprecatedProps[name][Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var newPropName=_step.value;hasOwnProperty(propsInstance,newPropName)||(propsInstance[newPropName]=propsInstance[name])}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}_log.default.deprecated(nameStr,deprecatedProps[name].join("/"))()}}function getPropsPrototypeAndTypes(componentClass){var props=getOwnProperty(componentClass,"_mergedDefaultProps");return props?{defaultProps:props,propTypes:getOwnProperty(componentClass,"_propTypes"),deprecatedProps:getOwnProperty(componentClass,"_deprecatedProps")}:function(componentClass){var parent=componentClass.prototype;if(!parent)return{defaultProps:{}};var parentClass=Object.getPrototypeOf(componentClass),parentPropDefs=parent&&getPropsPrototypeAndTypes(parentClass)||null,componentDefaultProps=getOwnProperty(componentClass,"defaultProps")||{},componentPropDefs=(0,_propTypes.parsePropTypes)(componentDefaultProps),propTypes=Object.assign({},parentPropDefs&&parentPropDefs.propTypes,componentPropDefs.propTypes),defaultProps=function(props,parentProps,propTypes,componentClass){var defaultProps=Object.create(null);Object.assign(defaultProps,parentProps,props);var id=function(componentClass){var componentName=getOwnProperty(componentClass,"layerName")||getOwnProperty(componentClass,"componentName");componentName||_log.default.once(0,"".concat(componentClass.name,".componentName not specified"))();return componentName||componentClass.name}(componentClass);return delete props.id,Object.defineProperties(defaultProps,{id:{configurable:!1,writable:!0,value:id}}),function(defaultProps,propTypes){var defaultValues={},descriptors={_asyncPropDefaultValues:{enumerable:!1,value:defaultValues},_asyncPropOriginalValues:{enumerable:!1,value:{}}};for(var propName in propTypes){var propType=propTypes[propName],name=propType.name,value=propType.value;propType.async&&(defaultValues[name]=value,descriptors[name]=getDescriptorForAsyncProp(name))}Object.defineProperties(defaultProps,descriptors)}(defaultProps,propTypes),defaultProps}(componentPropDefs.defaultProps,parentPropDefs&&parentPropDefs.defaultProps,propTypes,componentClass),deprecatedProps=Object.assign({},parentPropDefs&&parentPropDefs.deprecatedProps,componentPropDefs.deprecatedProps);return componentClass._mergedDefaultProps=defaultProps,componentClass._propTypes=propTypes,componentClass._deprecatedProps=deprecatedProps,{propTypes:propTypes,defaultProps:defaultProps,deprecatedProps:deprecatedProps}}(componentClass)}function getDescriptorForAsyncProp(name){return{configurable:!1,enumerable:!0,set:function(newValue){"string"==typeof newValue||newValue instanceof Promise?this._asyncPropOriginalValues[name]=newValue:this._asyncPropResolvedValues[name]=newValue},get:function(){if(this._asyncPropResolvedValues){if(name in this._asyncPropResolvedValues){var value=this._asyncPropResolvedValues[name];return"data"===name?value||this._asyncPropDefaultValues[name]:value}if(name in this._asyncPropOriginalValues){var state=this._component&&this._component.internalState;if(state&&state.hasAsyncProp(name))return state.getAsyncProp(name)}}return this._asyncPropDefaultValues[name]}}}function hasOwnProperty(object,prop){return Object.prototype.hasOwnProperty.call(object,prop)}function getOwnProperty(object,prop){return hasOwnProperty(object,prop)&&object[prop]}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.parsePropTypes=function(propDefs){for(var propTypes={},defaultProps={},deprecatedProps={},_arr=Object.entries(propDefs),_i=0;_i<_arr.length;_i++){var _arr$_i=(0,_slicedToArray2.default)(_arr[_i],2),propName=_arr$_i[0],propDef=_arr$_i[1];if(propDef&&propDef.deprecatedFor)deprecatedProps[propName]=Array.isArray(propDef.deprecatedFor)?propDef.deprecatedFor:[propDef.deprecatedFor];else{var propType=parsePropType(propName,propDef);propTypes[propName]=propType,defaultProps[propName]=propType.value}}return{propTypes:propTypes,defaultProps:defaultProps,deprecatedProps:deprecatedProps}};var _typeof2=_interopRequireDefault(__webpack_require__(27)),_slicedToArray2=_interopRequireDefault(__webpack_require__(11)),TYPE_DEFINITIONS={boolean:{validate:function(value,propType){return!0},equal:function(value1,value2,propType){return Boolean(value1)===Boolean(value2)}},number:{validate:function(value,propType){return Number.isFinite(value)&&(!("max"in propType)||value<=propType.max)&&(!("min"in propType)||value>=propType.min)}},color:{validate:function(value,propType){return isArray(value)&&(3===value.length||4===value.length)},equal:function(value1,value2,propType){return arrayEqual(value1,value2)}},accessor:{validate:function(value,propType){var valueType=getTypeOf(value);return"function"===valueType||valueType===getTypeOf(propType.value)},equal:function(value1,value2,propType){return"function"==typeof value2||arrayEqual(value1,value2)}},array:{validate:function(value,propType){return propType.optional&&!value||isArray(value)},equal:function(value1,value2,propType){return propType.compare?arrayEqual(value1,value2):value1===value2}},function:{validate:function(value,propType){return propType.optional&&!value||"function"==typeof value},equal:function(value1,value2,propType){return!propType.compare||value1===value2}}};function arrayEqual(array1,array2){if(array1===array2)return!0;if(!isArray(array1)||!isArray(array2))return!1;var len=array1.length;if(len!==array2.length)return!1;for(var i=0;i<len;i++)if(array1[i]!==array2[i])return!1;return!0}function parsePropType(name,propDef){switch(getTypeOf(propDef)){case"object":return normalizePropDefinition(name,propDef);case"array":return normalizePropDefinition(name,{type:"array",value:propDef,compare:!1});case"boolean":return normalizePropDefinition(name,{type:"boolean",value:propDef});case"number":return normalizePropDefinition(name,{type:"number",value:propDef});case"function":return normalizePropDefinition(name,{type:"function",value:propDef,compare:!0});default:return{name:name,type:"unknown",value:propDef}}}function normalizePropDefinition(name,propDef){return"type"in propDef?Object.assign({name:name},TYPE_DEFINITIONS[propDef.type],propDef):"value"in propDef?Object.assign({name:name,type:getTypeOf(propDef.value)},propDef):{name:name,type:"object",value:propDef}}function isArray(value){return Array.isArray(value)||ArrayBuffer.isView(value)}function getTypeOf(value){return isArray(value)?"array":null===value?"null":(0,_typeof2.default)(value)}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),LayerState=function(_ComponentState){function LayerState(_ref){var _this,attributeManager=_ref.attributeManager,layer=_ref.layer;return(0,_classCallCheck2.default)(this,LayerState),(_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(LayerState).call(this,layer))).attributeManager=attributeManager,_this.model=null,_this.needsRedraw=!0,_this.subLayers=null,_this}return(0,_inherits2.default)(LayerState,_ComponentState),(0,_createClass2.default)(LayerState,[{key:"layer",get:function(){return this.component},set:function(layer){this.component=layer}}]),LayerState}(_interopRequireDefault(__webpack_require__(342)).default);exports.default=LayerState},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0),_interopRequireWildcard=__webpack_require__(9);Object.defineProperty(exports,"__esModule",{value:!0}),exports.transformVector=function(matrix,vector){if(!matrix)return null;var result=vec4.transformMat4([0,0,0,0],vector,matrix),scale=1/result[3];return vec4.multiply(result,result,[scale,scale,scale,scale]),result},exports.createMat4=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},exports.extractCameraVectors=function(_ref){var viewMatrix=_ref.viewMatrix,viewMatrixInverse=_ref.viewMatrixInverse;return{eye:[viewMatrixInverse[12],viewMatrixInverse[13],viewMatrixInverse[14]],direction:[viewMatrix[2],viewMatrix[6],viewMatrix[10]],up:[viewMatrix[1],viewMatrix[5],viewMatrix[9]]}},exports.mod=function(value,divisor){(0,_assert.default)(Number.isFinite(value)&&Number.isFinite(divisor));var modulus=value%divisor;return modulus<0?divisor+modulus:modulus};var vec4=_interopRequireWildcard(__webpack_require__(90)),_assert=_interopRequireDefault(__webpack_require__(20))},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_pointLight=_interopRequireDefault(__webpack_require__(333)),_viewportUniforms=__webpack_require__(204),CameraLight=function(_PointLight){function CameraLight(){return(0,_classCallCheck2.default)(this,CameraLight),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(CameraLight).apply(this,arguments))}return(0,_inherits2.default)(CameraLight,_PointLight),(0,_createClass2.default)(CameraLight,[{key:"getProjectedLight",value:function(_ref){var layer=_ref.layer,viewport=layer.context.viewport,_layer$props=layer.props,coordinateSystem=_layer$props.coordinateSystem,coordinateOrigin=_layer$props.coordinateOrigin,modelMatrix=_layer$props.modelMatrix,project_uCameraPosition=(0,_viewportUniforms.getUniformsFromViewport)({viewport:viewport,modelMatrix:modelMatrix,coordinateSystem:coordinateSystem,coordinateOrigin:coordinateOrigin}).project_uCameraPosition;return this.projectedLight.color=this.color,this.projectedLight.intensity=this.intensity,this.projectedLight.position=project_uCameraPosition,this.projectedLight}}]),CameraLight}(_pointLight.default);exports.default=CameraLight},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _objectWithoutProperties2=_interopRequireDefault(__webpack_require__(741)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_core=__webpack_require__(7),_suncalc=__webpack_require__(743),SunLight=function(_DirectionalLight){function SunLight(_ref){var _this,timestamp=_ref.timestamp,others=(0,_objectWithoutProperties2.default)(_ref,["timestamp"]);return(0,_classCallCheck2.default)(this,SunLight),(_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(SunLight).call(this,others))).timestamp=timestamp,_this}return(0,_inherits2.default)(SunLight,_DirectionalLight),(0,_createClass2.default)(SunLight,[{key:"getProjectedLight",value:function(_ref2){var _layer$context$viewpo=_ref2.layer.context.viewport,latitude=_layer$context$viewpo.latitude,longitude=_layer$context$viewpo.longitude;return this.direction=(0,_suncalc.getSunlightDirection)(this.timestamp,latitude,longitude),this}}]),SunLight}(_core.DirectionalLight);exports.default=SunLight},function(module,exports,__webpack_require__){var objectWithoutPropertiesLoose=__webpack_require__(742);module.exports=function(source,excluded){if(null==source)return{};var key,i,target=objectWithoutPropertiesLoose(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}},function(module,exports){module.exports=function(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSolarPosition=getSolarPosition,exports.getSunlightDirection=function(timestamp,latitude,longitude){var _getSolarPosition=getSolarPosition(timestamp,latitude,longitude),azimuth=_getSolarPosition.azimuth,altitude=_getSolarPosition.altitude,azimuthN=azimuth+Math.PI;return[-Math.sin(azimuthN),-Math.cos(azimuthN),-Math.sin(altitude)]};var DEGREES_TO_RADIANS=Math.PI/180,DAY_IN_MS=864e5,JD1970=2440588,JD2000=2451545,e=23.4397*DEGREES_TO_RADIANS,M0=357.5291,M1=.98560028,THETA0=280.147,THETA1=360.9856235;function getSolarPosition(timestamp,latitude,longitude){var M,C,L,eclipticLongitude,b,lambda,longitudeWestInRadians=DEGREES_TO_RADIANS*-longitude,phi=DEGREES_TO_RADIANS*latitude,d=function(timestamp){return function(timestamp){return timestamp/DAY_IN_MS-.5+JD1970}(timestamp)-JD2000}(timestamp),c=(M=DEGREES_TO_RADIANS*(M0+M1*d),C=DEGREES_TO_RADIANS*(1.9148*Math.sin(M)+.02*Math.sin(2*M)+3e-4*Math.sin(3*M)),L=M+C+102.9372*DEGREES_TO_RADIANS+Math.PI,{declination:(eclipticLongitude=L,b=0,lambda=eclipticLongitude,Math.asin(Math.sin(b)*Math.cos(e)+Math.cos(b)*Math.sin(e)*Math.sin(lambda))),rightAscension:getRightAscension(L,0)}),H=function(dates,longitudeWestInRadians){return DEGREES_TO_RADIANS*(THETA0+THETA1*dates)-longitudeWestInRadians}(d,longitudeWestInRadians)-c.rightAscension;return{azimuth:getAzimuth(H,phi,c.declination),altitude:getAltitude(H,phi,c.declination)}}function getRightAscension(eclipticLongitude,b){var lambda=eclipticLongitude;return Math.atan2(Math.sin(lambda)*Math.cos(e)-Math.tan(b)*Math.sin(e),Math.cos(lambda))}function getAzimuth(hourAngle,latitudeInRadians,declination){var H=hourAngle,phi=latitudeInRadians,delta=declination;return Math.atan2(Math.sin(H),Math.cos(H)*Math.sin(phi)-Math.tan(delta)*Math.cos(phi))}function getAltitude(hourAngle,latitudeInRadians,declination){var H=hourAngle,phi=latitudeInRadians,delta=declination;return Math.asin(Math.sin(phi)*Math.sin(delta)+Math.cos(phi)*Math.cos(delta)*Math.cos(H))}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_layerManager=_interopRequireDefault(__webpack_require__(211)),_viewManager=_interopRequireDefault(__webpack_require__(745)),_mapView=_interopRequireDefault(__webpack_require__(344)),_effectManager=_interopRequireDefault(__webpack_require__(747)),_effect=_interopRequireDefault(__webpack_require__(206)),_deckRenderer=_interopRequireDefault(__webpack_require__(348)),_deckPicker=_interopRequireDefault(__webpack_require__(750)),_log=_interopRequireDefault(__webpack_require__(24)),_core=__webpack_require__(7),_probe=__webpack_require__(85),_mjolnir=__webpack_require__(352),_assert=_interopRequireDefault(__webpack_require__(20)),_constants=__webpack_require__(91);function noop(){}var defaultProps={id:"deckgl-overlay",width:"100%",height:"100%",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,_animate:!1,onWebGLInitialized:noop,onResize:noop,onViewStateChange:noop,onBeforeRender:noop,onAfterRender:noop,onLoad:noop,_onMetrics:null,getCursor:function(_ref){return _ref.isDragging?"grabbing":"grab"},debug:!1,drawPickingColors:!1},Deck=function(){function Deck(props){(0,_classCallCheck2.default)(this,Deck),props=Object.assign({},defaultProps,props),this.width=0,this.height=0,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this._needsRedraw=!0,this._pickRequest={},this._lastPointerDownInfo=null,this.viewState=props.initialViewState||null,this.interactiveState={isDragging:!1},this._onEvent=this._onEvent.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerLeave=this._onPointerLeave.bind(this),this._pickAndCallback=this._pickAndCallback.bind(this),this._onRendererInitialized=this._onRendererInitialized.bind(this),this._onRenderFrame=this._onRenderFrame.bind(this),this._onViewStateChange=this._onViewStateChange.bind(this),this._onInteractiveStateChange=this._onInteractiveStateChange.bind(this),props.gl||"undefined"!=typeof document&&(this.canvas=this._createCanvas(props)),this.animationLoop=this._createAnimationLoop(props),this.stats=new _probe.Stats({id:"deck.gl"}),this.setProps(props),this.animationLoop.start()}return(0,_createClass2.default)(Deck,[{key:"finalize",value:function(){this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null),this.viewManager&&(this.viewManager.finalize(),this.viewManager=null),this.eventManager&&this.eventManager.destroy(),this.props.canvas||this.props.gl||!this.canvas||(this.canvas.parentElement.removeChild(this.canvas),this.canvas=null)}},{key:"setProps",value:function(props){this.stats.get("setProps Time").timeStart(),"onLayerHover"in props&&_log.default.removed("onLayerHover","onHover")(),"onLayerClick"in props&&_log.default.removed("onLayerClick","onClick")(),props=Object.assign({},this.props,props),this.props=props,this._setCanvasSize(props);var newProps=Object.assign({},props,{views:this._getViews(props),width:this.width,height:this.height}),viewState=this._getViewState(props);viewState&&(newProps.viewState=viewState),this.viewManager&&this.viewManager.setProps(newProps),this.layerManager&&this.layerManager.setProps(newProps),this.effectManager&&this.effectManager.setProps(newProps),this.animationLoop&&this.animationLoop.setProps(newProps),this.deckRenderer&&this.deckRenderer.setProps(newProps),this.deckPicker&&this.deckPicker.setProps(newProps),this.stats.get("setProps Time").timeEnd()}},{key:"needsRedraw",value:function(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};if(this.props._animate)return"Deck._animate";var redraw=this._needsRedraw;opts.clearRedrawFlags&&(this._needsRedraw=!1);var viewManagerNeedsRedraw=this.viewManager.needsRedraw(opts),layerManagerNeedsRedraw=this.layerManager.needsRedraw(opts),effectManagerNeedsRedraw=this.effectManager.needsRedraw(opts),deckRendererNeedsRedraw=this.deckRenderer.needsRedraw(opts);return redraw=redraw||viewManagerNeedsRedraw||layerManagerNeedsRedraw||effectManagerNeedsRedraw||deckRendererNeedsRedraw}},{key:"redraw",value:function(force){if(this.layerManager){var redrawReason=force||this.needsRedraw({clearRedrawFlags:!0});redrawReason&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(redrawReason):this._drawLayers(redrawReason))}}},{key:"getViews",value:function(){return this.viewManager.views}},{key:"getViewports",value:function(rect){return this.viewManager.getViewports(rect)}},{key:"pickObject",value:function(_ref2){var x=_ref2.x,y=_ref2.y,_ref2$radius=_ref2.radius,radius=void 0===_ref2$radius?0:_ref2$radius,_ref2$layerIds=_ref2.layerIds,layerIds=void 0===_ref2$layerIds?null:_ref2$layerIds;this.stats.get("pickObject Time").timeStart();var layers=this.layerManager.getLayers({layerIds:layerIds}),activateViewport=this.layerManager.activateViewport,selectedInfos=this.deckPicker.pickObject({x:x,y:y,radius:radius,layers:layers,viewports:this.getViewports({x:x,y:y}),activateViewport:activateViewport,mode:"query",depth:1}).result;return this.stats.get("pickObject Time").timeEnd(),selectedInfos.length?selectedInfos[0]:null}},{key:"pickMultipleObjects",value:function(_ref3){var x=_ref3.x,y=_ref3.y,_ref3$radius=_ref3.radius,radius=void 0===_ref3$radius?0:_ref3$radius,_ref3$layerIds=_ref3.layerIds,layerIds=void 0===_ref3$layerIds?null:_ref3$layerIds,_ref3$depth=_ref3.depth,depth=void 0===_ref3$depth?10:_ref3$depth;this.stats.get("pickMultipleObjects Time").timeStart();var layers=this.layerManager.getLayers({layerIds:layerIds}),activateViewport=this.layerManager.activateViewport,selectedInfos=this.deckPicker.pickObject({x:x,y:y,radius:radius,layers:layers,viewports:this.getViewports({x:x,y:y}),activateViewport:activateViewport,mode:"query",depth:depth}).result;return this.stats.get("pickMultipleObjects Time").timeEnd(),selectedInfos}},{key:"pickObjects",value:function(_ref4){var x=_ref4.x,y=_ref4.y,_ref4$width=_ref4.width,width=void 0===_ref4$width?1:_ref4$width,_ref4$height=_ref4.height,height=void 0===_ref4$height?1:_ref4$height,_ref4$layerIds=_ref4.layerIds,layerIds=void 0===_ref4$layerIds?null:_ref4$layerIds;this.stats.get("pickObjects Time").timeStart();var layers=this.layerManager.getLayers({layerIds:layerIds}),activateViewport=this.layerManager.activateViewport,infos=this.deckPicker.pickObjects({x:x,y:y,width:width,height:height,layers:layers,viewports:this.getViewports({x:x,y:y,width:width,height:height}),activateViewport:activateViewport});return this.stats.get("pickObjects Time").timeEnd(),infos}},{key:"_createCanvas",value:function(props){var canvas=props.canvas;("string"==typeof canvas&&(canvas=document.getElementById(canvas),(0,_assert.default)(canvas)),canvas)||(canvas=document.createElement("canvas"),(props.parent||document.body).appendChild(canvas));var id=props.id,style=props.style;return canvas.id=id,Object.assign(canvas.style,style),canvas}},{key:"_setCanvasSize",value:function(props){if(this.canvas){var width=props.width,height=props.height;(width||0===width)&&(width=Number.isFinite(width)?"".concat(width,"px"):width,this.canvas.style.width=width),(height||0===height)&&(height=Number.isFinite(height)?"".concat(height,"px"):height,this.canvas.style.position="absolute",this.canvas.style.height=height)}}},{key:"_updateCanvasSize",value:function(){if(this._checkForCanvasSizeChange()){var width=this.width,height=this.height;this.viewManager.setProps({width:width,height:height}),this.props.onResize({width:this.width,height:this.height})}}},{key:"_checkForCanvasSizeChange",value:function(){var canvas=this.canvas;if(!canvas)return!1;var newWidth=canvas.clientWidth||canvas.width,newHeight=canvas.clientHeight||canvas.height;return(newWidth!==this.width||newHeight!==this.height)&&(this.width=newWidth,this.height=newHeight,!0)}},{key:"_createAnimationLoop",value:function(props){var _this=this,width=props.width,height=props.height,gl=props.gl,glOptions=props.glOptions,debug=props.debug,useDevicePixels=props.useDevicePixels,autoResizeDrawingBuffer=props.autoResizeDrawingBuffer;return new _core.AnimationLoop({width:width,height:height,useDevicePixels:useDevicePixels,autoResizeDrawingBuffer:autoResizeDrawingBuffer,gl:gl,onCreateContext:function(opts){return(0,_core.createGLContext)(Object.assign({},glOptions,opts,{canvas:_this.canvas,debug:debug}))},onInitialize:this._onRendererInitialized,onRender:this._onRenderFrame,onBeforeRender:props.onBeforeRender,onAfterRender:props.onAfterRender})}},{key:"_getViewState",value:function(props){return props.viewState||this.viewState}},{key:"_getViews",value:function(props){var views=props.views||[new _mapView.default({id:"default-view"})];return(views=Array.isArray(views)?views:[views]).length&&props.controller&&(views[0].props.controller=props.controller),views}},{key:"_requestPick",value:function(_ref5){var event=_ref5.event,callback=_ref5.callback,mode=_ref5.mode,_pickRequest=this._pickRequest;if("pointerleave"===event.type)_pickRequest.x=-1,_pickRequest.y=-1,_pickRequest.radius=0;else{var pos=event.offsetCenter;if(!pos)return;_pickRequest.x=pos.x,_pickRequest.y=pos.y,_pickRequest.radius=this.props.pickingRadius}_pickRequest.callback=callback,_pickRequest.event=event,_pickRequest.mode=mode}},{key:"_pickAndCallback",value:function(){var _pickRequest=this._pickRequest;if(_pickRequest.mode){var _this$deckPicker$pick=this.deckPicker.pickObject(Object.assign({layers:this.layerManager.getLayers(),viewports:this.getViewports(_pickRequest),activateViewport:this.layerManager.activateViewport,depth:1},_pickRequest)),result=_this$deckPicker$pick.result,emptyInfo=_this$deckPicker$pick.emptyInfo;if(_pickRequest.callback){var pickedInfo=result.find(function(info){return info.index>=0})||emptyInfo;_pickRequest.callback(pickedInfo,_pickRequest.event)}_pickRequest.mode=null}}},{key:"_updateCursor",value:function(){this.canvas&&(this.canvas.style.cursor=this.props.getCursor(this.interactiveState))}},{key:"_updateAnimationProps",value:function(animationProps){this.layerManager.context.animationProps=animationProps}},{key:"_setGLContext",value:function(gl){if(!this.layerManager){for(var eventType in this.canvas||(this.canvas=gl.canvas,(0,_core.trackContextState)(gl,{enable:!0,copyState:!0})),(0,_core.setParameters)(gl,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(gl),this.eventManager=new _mjolnir.EventManager(gl.canvas,{events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerLeave}}),_constants.EVENTS)this.eventManager.on(eventType,this._onEvent);this.viewManager=new _viewManager.default({eventManager:this.eventManager,onViewStateChange:this._onViewStateChange,onInteractiveStateChange:this._onInteractiveStateChange,views:this._getViews(this.props),viewState:this._getViewState(this.props),width:this.width,height:this.height}),(0,_assert.default)(this.viewManager);var viewport=this.viewManager.getViewports()[0];this.layerManager=new _layerManager.default(gl,{deck:this,stats:this.stats,viewport:viewport}),this.effectManager=new _effectManager.default,this.deckRenderer=new _deckRenderer.default(gl),this.deckPicker=new _deckPicker.default(gl),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}}},{key:"_drawLayers",value:function(redrawReason,renderOptions){var gl=this.layerManager.context.gl;(0,_core.setParameters)(gl,this.props.parameters),this.props.onBeforeRender({gl:gl});var layers=this.layerManager.getLayers(),activateViewport=this.layerManager.activateViewport;this.deckRenderer.renderLayers(Object.assign({layers:layers,viewports:this.viewManager.getViewports(),activateViewport:activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:redrawReason,effects:this.effectManager.getEffects()},renderOptions)),this.props.onAfterRender({gl:gl})}},{key:"_onRendererInitialized",value:function(_ref6){var gl=_ref6.gl;this._setGLContext(gl)}},{key:"_onRenderFrame",value:function(animationProps){if(this.stats.get("frameRate").timeEnd(),this.stats.get("frameRate").timeStart(),animationProps.tick%60==0){var table={};this.stats.forEach(function(stat){table[stat.name]={time:stat.time||0,count:stat.count||0,average:stat.getAverageTime()||0,hz:stat.getHz()||0}}),this.stats.reset(),_log.default.table(3,table)(),this.props._onMetrics&&this.props._onMetrics(table)}this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(animationProps),this._updateAnimationProps(animationProps),this._pickAndCallback(),this.redraw(!1),this.viewManager&&this.viewManager.updateViewStates(animationProps)}},{key:"_onViewStateChange",value:function(params){var viewState=this.props.onViewStateChange(params)||params.viewState;this.viewState&&(this.viewState[params.viewId]=viewState,this.viewManager.setProps({viewState:viewState}))}},{key:"_onInteractiveStateChange",value:function(_ref7){var _ref7$isDragging=_ref7.isDragging,isDragging=void 0!==_ref7$isDragging&&_ref7$isDragging;isDragging!==this.interactiveState.isDragging&&(this.interactiveState.isDragging=isDragging)}},{key:"_onEvent",value:function(event){var eventOptions=_constants.EVENTS[event.type],pos=event.offsetCenter;if(eventOptions&&pos){var layers=this.layerManager.getLayers(),info=this.deckPicker.getLastPickedObject({x:pos.x,y:pos.y,layers:layers,viewports:this.getViewports(pos)},this._lastPointerDownInfo),layer=info.layer,layerHandler=layer&&(layer[eventOptions.handler]||layer.props[eventOptions.handler]),rootHandler=this.props[eventOptions.handler],handled=!1;layerHandler&&(handled=layerHandler.call(layer,info,event)),!handled&&rootHandler&&rootHandler(info,event)}}},{key:"_onPointerDown",value:function(event){var pos=event.offsetCenter;this._lastPointerDownInfo=this.pickObject({x:pos.x,y:pos.y})}},{key:"_onPointerMove",value:function(event){event.leftButton||event.rightButton||this._requestPick({callback:this.props.onHover,event:event,mode:"hover"})}},{key:"_onPointerLeave",value:function(event){this._requestPick({callback:this.props.onHover,event:event,mode:"hover"})}}]),Deck}();exports.default=Deck,Deck.getPropTypes=function(PropTypes){return{id:PropTypes.string,width:PropTypes.oneOfType([PropTypes.number,PropTypes.string]),height:PropTypes.oneOfType([PropTypes.number,PropTypes.string]),layers:PropTypes.oneOfType([PropTypes.object,PropTypes.array]),layerFilter:PropTypes.func,views:PropTypes.oneOfType([PropTypes.object,PropTypes.array]),viewState:PropTypes.object,effects:PropTypes.arrayOf(PropTypes.instanceOf(_effect.default)),controller:PropTypes.oneOfType([PropTypes.func,PropTypes.bool,PropTypes.object]),gl:PropTypes.object,glOptions:PropTypes.object,parameters:PropTypes.object,pickingRadius:PropTypes.number,useDevicePixels:PropTypes.bool,onWebGLInitialized:PropTypes.func,onResize:PropTypes.func,onViewStateChange:PropTypes.func,onBeforeRender:PropTypes.func,onAfterRender:PropTypes.func,onLoad:PropTypes.func,debug:PropTypes.bool,drawPickingColors:PropTypes.bool,_animate:PropTypes.bool}},Deck.defaultProps=defaultProps},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_assert=_interopRequireDefault(__webpack_require__(20)),_deepEqual=__webpack_require__(212),_view=_interopRequireDefault(__webpack_require__(62)),_viewport=_interopRequireDefault(__webpack_require__(47)),_log=_interopRequireDefault(__webpack_require__(24)),_flatten=__webpack_require__(112),ViewManager=function(){function ViewManager(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,_classCallCheck2.default)(this,ViewManager),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="Initial render",this._needsUpdate=!0,this._eventManager=props.eventManager,this._eventCallbacks={onViewStateChange:props.onViewStateChange,onInteractiveStateChange:props.onInteractiveStateChange},Object.seal(this),this.setProps(props)}return(0,_createClass2.default)(ViewManager,[{key:"finalize",value:function(){for(var key in this.controllers)this.controllers[key]&&this.controllers[key].finalize();this.controllers={}}},{key:"needsRedraw",value:function(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},redraw=this._needsRedraw;return opts.clearRedrawFlags&&(this._needsRedraw=!1),redraw}},{key:"setNeedsUpdate",value:function(reason){this._needsUpdate=this._needsUpdate||reason,this._needsRedraw=this._needsRedraw||reason}},{key:"updateViewStates",value:function(){var animationProps=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("time"in animationProps)for(var viewId in this.controllers){var controller=this.controllers[viewId];controller&&controller.updateTransition(animationProps.time)}}},{key:"getViewports",value:function(rect){return rect?this._viewports.filter(function(viewport){return viewport.containsPixel(rect)}):this._viewports}},{key:"getViews",value:function(){var viewMap={};return this.views.forEach(function(view){viewMap[view.id]=view}),viewMap}},{key:"getView",value:function(viewOrViewId){return"string"==typeof viewOrViewId?this.views.find(function(view){return view.id===viewOrViewId}):viewOrViewId}},{key:"getViewState",value:function(viewId){var view=this.getView(viewId),viewState=view&&this.viewState[view.getViewStateId()]||this.viewState;return view?view.filterViewState(viewState):viewState}},{key:"getViewport",value:function(viewId){return this._viewportMap[viewId]}},{key:"project",value:function(xyz){for(var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{topLeft:!0},viewports=this.getViewports(),i=viewports.length-1;i>=0;--i){var viewport=viewports[i];if(viewport.contains(xyz,opts))return viewport.project(xyz,opts)}return null}},{key:"unproject",value:function(xyz,opts){for(var viewports=this.getViewports(),i=viewports.length-1;i>=0;--i){var viewport=viewports[i];if(viewport.containsPixel(xyz,opts))return viewport.unproject(xyz)}return null}},{key:"setProps",value:function(props){"views"in props&&this._setViews(props.views),"viewState"in props&&this._setViewState(props.viewState),("width"in props||"height"in props)&&this._setSize(props.width,props.height),this._isUpdating||this._update()}},{key:"_update",value:function(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}},{key:"_setSize",value:function(width,height){(0,_assert.default)(Number.isFinite(width)&&Number.isFinite(height)),width===this.width&&height===this.height||(this.width=width,this.height=height,this.setNeedsUpdate("Size changed"))}},{key:"_setViews",value:function(views){views=(0,_flatten.flatten)(views,{filter:Boolean}).map(function(view){return view instanceof _viewport.default?new _view.default({viewportInstance:view}):view}),this._diffViews(views,this.views)&&this.setNeedsUpdate("views changed"),this.views=views}},{key:"_setViewState",value:function(viewState){viewState?(!(0,_deepEqual.deepEqual)(viewState,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=viewState):_log.default.warn("setting null viewState")()}},{key:"_onViewStateChange",value:function(viewId,event){event.viewId=viewId,this._eventCallbacks.onViewStateChange(event)}},{key:"_createController",value:function(props){return new(0,props.type)(Object.assign({eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,props.id),onStateChange:this._eventCallbacks.onInteractiveStateChange},props))}},{key:"_updateController",value:function(view,viewState,viewport,controller){if(view.controller){var controllerProps=Object.assign({},view.controller,viewState,{id:view.id,x:viewport.x,y:viewport.y,width:viewport.width,height:viewport.height});return controller?controller.setProps(controllerProps):controller=this._createController(controllerProps),controller}return null}},{key:"_rebuildViewports",value:function(){var _this=this,width=this.width,height=this.height,views=this.views,oldControllers=this.controllers;for(var id in this.controllers={},this._viewports=views.map(function(view){var viewState=_this.getViewState(view),viewport=view.makeViewport({width:width,height:height,viewState:viewState});return _this.controllers[view.id]=_this._updateController(view,viewState,viewport,oldControllers[view.id]),viewport}),oldControllers)oldControllers[id]&&!this.controllers[id]&&oldControllers[id].finalize();this._buildViewportMap()}},{key:"_buildViewportMap",value:function(){var _this2=this;this._viewportMap={},this._viewports.forEach(function(viewport){viewport.id&&(_this2._viewportMap[viewport.id]=_this2._viewportMap[viewport.id]||viewport)})}},{key:"_diffViews",value:function(newViews,oldViews){return newViews.length!==oldViews.length||newViews.some(function(_,i){return!newViews[i].equals(oldViews[i])})}}]),ViewManager}();exports.default=ViewManager},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.parsePosition=function(value){switch((0,_typeof2.default)(value)){case"number":return{position:value,relative:!1};case"string":var match=value.match(PERCENT_OR_PIXELS_REGEX);if(match&&match.length>=3){var relative="%"===match[2],position=parseFloat(match[1]);return{position:relative?position/100:position,relative:relative}}default:throw new Error("Could not parse position string ".concat(value))}},exports.getPosition=function(position,extent){return position.relative?Math.round(position.position*extent):position.position};var _typeof2=_interopRequireDefault(__webpack_require__(27)),PERCENT_OR_PIXELS_REGEX=/([0-9]+\.?[0-9]*)(%|px)/},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_deepEqual=__webpack_require__(212),_lightingEffect=_interopRequireDefault(__webpack_require__(331)),EffectManager=function(){function EffectManager(){(0,_classCallCheck2.default)(this,EffectManager),this.effects=[],this._needsRedraw="Initial render",this.defaultLightingEffect=new _lightingEffect.default,this.needApplyDefaultLighting=!1}return(0,_createClass2.default)(EffectManager,[{key:"setProps",value:function(props){"effects"in props&&(props.effects.length===this.effects.length&&(0,_deepEqual.deepEqual)(props.effects,this.effects)||(this.setEffects(props.effects),this._needsRedraw="effects changed")),this.checkLightingEffect()}},{key:"needsRedraw",value:function(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},redraw=this._needsRedraw;return opts.clearRedrawFlags&&(this._needsRedraw=!1),redraw}},{key:"getEffects",value:function(){var effects=this.effects;return this.needApplyDefaultLighting&&(effects=this.effects.slice()).push(this.defaultLightingEffect),effects}},{key:"setEffects",value:function(){var effects=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.effects=effects}},{key:"checkLightingEffect",value:function(){var hasEffect=!1,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.effects[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){if(_step.value instanceof _lightingEffect.default){hasEffect=!0;break}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.needApplyDefaultLighting=!hasEffect}}]),EffectManager}();exports.default=EffectManager},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_get2=_interopRequireDefault(__webpack_require__(16)),_inherits2=_interopRequireDefault(__webpack_require__(5)),DrawLayersPass=function(_LayersPass){function DrawLayersPass(){return(0,_classCallCheck2.default)(this,DrawLayersPass),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(DrawLayersPass).apply(this,arguments))}return(0,_inherits2.default)(DrawLayersPass,_LayersPass),(0,_createClass2.default)(DrawLayersPass,[{key:"getModuleParameters",value:function(layer,effects,effectProps){var moduleParameters=(0,_get2.default)((0,_getPrototypeOf2.default)(DrawLayersPass.prototype),"getModuleParameters",this).call(this,layer);Object.assign(moduleParameters,this.getObjectHighlightParameters(layer),effectProps);var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=effects[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var effect=_step.value;Object.assign(moduleParameters,effect.getParameters(layer))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return moduleParameters}},{key:"getObjectHighlightParameters",value:function(layer){var _layer$props=layer.props,highlightedObjectIndex=_layer$props.highlightedObjectIndex,highlightColor=_layer$props.highlightColor,parameters={pickingHighlightColor:[highlightColor[0],highlightColor[1],highlightColor[2],highlightColor[3]||255]};return Number.isInteger(highlightedObjectIndex)&&(parameters.pickingSelectedColor=highlightedObjectIndex>=0?layer.encodePickingColor(highlightedObjectIndex):null),parameters}}]),DrawLayersPass}(_interopRequireDefault(__webpack_require__(349)).default);exports.default=DrawLayersPass},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),Pass=function(){function Pass(gl){var props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,_classCallCheck2.default)(this,Pass);var _props$id=props.id,id=void 0===_props$id?"pass":_props$id;this.id=id,this.gl=gl,this.props={},Object.assign(this.props,props)}return(0,_createClass2.default)(Pass,[{key:"setProps",value:function(props){Object.assign(this.props,props)}},{key:"render",value:function(){}}]),Pass}();exports.default=Pass},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_core=__webpack_require__(7),_getPixelRatio=_interopRequireDefault(__webpack_require__(351)),_assert=_interopRequireDefault(__webpack_require__(20)),_pickLayersPass=_interopRequireDefault(__webpack_require__(350)),_queryObject=__webpack_require__(751),_pickInfo=__webpack_require__(752),DeckPicker=function(){function DeckPicker(gl){(0,_classCallCheck2.default)(this,DeckPicker),this.gl=gl,this.pickingFBO=null,this.pickLayersPass=new _pickLayersPass.default(gl),this.pixelRatio=null,this.layerFilter=null,this.pickingEvent=null,this.lastPickedInfo={index:-1,layerId:null,info:null}}return(0,_createClass2.default)(DeckPicker,[{key:"setProps",value:function(props){"useDevicePixels"in props&&(this.pixelRatio=(0,_getPixelRatio.default)(props.useDevicePixels)),"layerFilter"in props&&(this.layerFilter=props.layerFilter),this.pickLayersPass.setProps({pixelRatio:this.pixelRatio,layerFilter:this.layerFilter})}},{key:"pickObject",value:function(_ref){var x=_ref.x,y=_ref.y,mode=_ref.mode,_ref$radius=_ref.radius,radius=void 0===_ref$radius?0:_ref$radius,layers=_ref.layers,viewports=_ref.viewports,activateViewport=_ref.activateViewport,_ref$depth=_ref.depth,depth=void 0===_ref$depth?1:_ref$depth,_ref$event=_ref.event,event=void 0===_ref$event?null:_ref$event;this.pickingEvent=event;var result=this.pickClosestObject({x:x,y:y,radius:radius,layers:layers,mode:mode,depth:depth,viewports:viewports,onViewportActive:activateViewport});return this.pickingEvent=null,result}},{key:"pickObjects",value:function(_ref2){var x=_ref2.x,y=_ref2.y,width=_ref2.width,height=_ref2.height,layers=_ref2.layers,viewports=_ref2.viewports,activateViewport=_ref2.activateViewport;return this.pickVisibleObjects({x:x,y:y,width:width,height:height,layers:layers,mode:"pickObjects",viewports:viewports,onViewportActive:activateViewport})}},{key:"getLastPickedObject",value:function(_ref3){var x=_ref3.x,y=_ref3.y,layers=_ref3.layers,viewports=_ref3.viewports,lastPickedInfo=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.lastPickedInfo.info,lastPickedLayerId=lastPickedInfo&&lastPickedInfo.layer&&lastPickedInfo.layer.id,layer=lastPickedLayerId?layers.find(function(l){return l.id===lastPickedLayerId}):null,coordinate=viewports[0]&&viewports[0].unproject([x,y]),info={x:x,y:y,coordinate:coordinate,lngLat:coordinate,layer:layer};return layer?Object.assign({},lastPickedInfo,info):Object.assign(info,{color:null,object:null,index:-1})}},{key:"updatePickingBuffer",value:function(){var gl=this.gl;return this.pickingFBO||(this.pickingFBO=new _core.Framebuffer(gl)),this.pickingFBO.resize({width:gl.canvas.width,height:gl.canvas.height}),this.pickingFBO}},{key:"pickClosestObject",value:function(_ref4){var layers=_ref4.layers,viewports=_ref4.viewports,x=_ref4.x,y=_ref4.y,radius=_ref4.radius,_ref4$depth=_ref4.depth,depth=void 0===_ref4$depth?1:_ref4$depth,mode=_ref4.mode,onViewportActive=_ref4.onViewportActive;this.updatePickingBuffer();for(var infos,pixelRatio=this.pixelRatio,deviceX=Math.round(x*pixelRatio),deviceY=Math.round(this.gl.canvas.height-y*pixelRatio),deviceRadius=Math.round(radius*pixelRatio),_this$pickingFBO=this.pickingFBO,width=_this$pickingFBO.width,height=_this$pickingFBO.height,deviceRect=this.getPickingRect({deviceX:deviceX,deviceY:deviceY,deviceRadius:deviceRadius,deviceWidth:width,deviceHeight:height}),result=[],affectedLayers={},i=0;i<depth;i++){var pickedColors=deviceRect&&this.drawAndSamplePickingBuffer({layers:layers,viewports:viewports,onViewportActive:onViewportActive,deviceRect:deviceRect,redrawReason:mode}),pickInfo=(0,_queryObject.getClosestObject)({pickedColors:pickedColors,layers:layers,deviceX:deviceX,deviceY:deviceY,deviceRadius:deviceRadius,deviceRect:deviceRect});if(pickInfo.pickedColor&&i+1<depth){var layerId=pickInfo.pickedColor[3]-1;affectedLayers[layerId]||(affectedLayers[layerId]=layers[layerId].copyPickingColors()),layers[layerId].clearPickingColor(pickInfo.pickedColor)}infos=(0,_pickInfo.processPickInfo)({pickInfo:pickInfo,lastPickedInfo:this.lastPickedInfo,mode:mode,layers:layers,viewports:viewports,x:x,y:y,deviceX:deviceX,deviceY:deviceY,pixelRatio:pixelRatio});var processedPickInfos=this.callLayerPickingCallbacks(infos,mode);if(processedPickInfos&&processedPickInfos.forEach(function(info){return result.push(info)}),!pickInfo.pickedColor)break}return Object.keys(affectedLayers).forEach(function(layerId){return layers[layerId].restorePickingColors(affectedLayers[layerId])}),{result:result,emptyInfo:infos&&infos.get(null)}}},{key:"pickVisibleObjects",value:function(_ref5){var layers=_ref5.layers,viewports=_ref5.viewports,x=_ref5.x,y=_ref5.y,width=_ref5.width,height=_ref5.height,mode=_ref5.mode,onViewportActive=_ref5.onViewportActive;this.updatePickingBuffer();var pixelRatio=this.pixelRatio,deviceLeft=Math.round(x*pixelRatio),deviceBottom=Math.round(this.gl.canvas.height-y*pixelRatio),deviceRight=Math.round((x+width)*pixelRatio),deviceTop=Math.round(this.gl.canvas.height-(y+height)*pixelRatio),deviceRect={x:deviceLeft,y:deviceTop,width:deviceRight-deviceLeft,height:deviceBottom-deviceTop},pickedColors=this.drawAndSamplePickingBuffer({layers:layers,viewports:viewports,onViewportActive:onViewportActive,deviceRect:deviceRect,redrawReason:mode}),pickInfos=(0,_queryObject.getUniqueObjects)({pickedColors:pickedColors,layers:layers}),uniqueInfos=new Map;return pickInfos.forEach(function(pickInfo){var info={color:pickInfo.pickedColor,layer:null,index:pickInfo.pickedObjectIndex,picked:!0,x:x,y:y,width:width,height:height,pixelRatio:pixelRatio};info=(0,_pickInfo.getLayerPickingInfo)({layer:pickInfo.pickedLayer,info:info,mode:mode}),uniqueInfos.has(info.object)||uniqueInfos.set(info.object,info)}),Array.from(uniqueInfos.values())}},{key:"drawAndSamplePickingBuffer",value:function(_ref6){var layers=_ref6.layers,viewports=_ref6.viewports,onViewportActive=_ref6.onViewportActive,deviceRect=_ref6.deviceRect,redrawReason=_ref6.redrawReason;if((0,_assert.default)(deviceRect),(0,_assert.default)(Number.isFinite(deviceRect.width)&&deviceRect.width>0,"`width` must be > 0"),(0,_assert.default)(Number.isFinite(deviceRect.height)&&deviceRect.height>0,"`height` must be > 0"),layers.filter(function(layer){return layer.isPickable()}).length<1)return null;var pickingFBO=this.pickingFBO;this.pickLayersPass.render({layers:layers,viewports:viewports,onViewportActive:onViewportActive,pickingFBO:pickingFBO,deviceRect:deviceRect,redrawReason:redrawReason,effectProps:{lightSources:{}}});var x=deviceRect.x,y=deviceRect.y,width=deviceRect.width,height=deviceRect.height,pickedColors=new Uint8Array(width*height*4);return(0,_core.readPixelsToArray)(pickingFBO,{sourceX:x,sourceY:y,sourceWidth:width,sourceHeight:height,target:pickedColors}),pickedColors}},{key:"getPickingRect",value:function(_ref7){var deviceX=_ref7.deviceX,deviceY=_ref7.deviceY,deviceRadius=_ref7.deviceRadius,deviceWidth=_ref7.deviceWidth,deviceHeight=_ref7.deviceHeight;if(!(deviceX>=0&&deviceY>=0&&deviceX<deviceWidth&&deviceY<deviceHeight))return null;var x=Math.max(0,deviceX-deviceRadius),y=Math.max(0,deviceY-deviceRadius);return{x:x,y:y,width:Math.min(deviceWidth,deviceX+deviceRadius)-x+1,height:Math.min(deviceHeight,deviceY+deviceRadius)-y+1}}},{key:"callLayerPickingCallbacks",value:function(infos,mode){var unhandledPickInfos=[],pickingEvent=this.pickingEvent;return infos.forEach(function(info){if(info.layer){var handled=!1;switch(mode){case"hover":handled=info.layer.onHover(info,pickingEvent);break;case"query":break;default:throw new Error("unknown pick type")}handled||unhandledPickInfos.push(info)}}),unhandledPickInfos}}]),DeckPicker}();exports.default=DeckPicker},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.getClosestObject=function(_ref){var pickedColors=_ref.pickedColors,layers=_ref.layers,deviceX=_ref.deviceX,deviceY=_ref.deviceY,deviceRadius=_ref.deviceRadius,deviceRect=_ref.deviceRect;if(pickedColors){for(var x=deviceRect.x,y=deviceRect.y,width=deviceRect.width,height=deviceRect.height,minSquareDistanceToCenter=deviceRadius*deviceRadius,closestPixelIndex=-1,i=0,row=0;row<height;row++){var dy=row+y-deviceY,dy2=dy*dy;if(dy2>minSquareDistanceToCenter)i+=4*width;else for(var col=0;col<width;col++){var pickedLayerIndex=pickedColors[i+3]-1;if(pickedLayerIndex>=0){var dx=col+x-deviceX,d2=dx*dx+dy2;d2<=minSquareDistanceToCenter&&(minSquareDistanceToCenter=d2,closestPixelIndex=i)}i+=4}}if(closestPixelIndex>=0){var _pickedLayerIndex=pickedColors[closestPixelIndex+3]-1,pickedColor=pickedColors.slice(closestPixelIndex,closestPixelIndex+4),pickedLayer=layers[_pickedLayerIndex];if(pickedLayer){var pickedObjectIndex=pickedLayer.decodePickingColor(pickedColor);return{pickedColor:pickedColor,pickedLayer:pickedLayer,pickedObjectIndex:pickedObjectIndex}}_log.default.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return NO_PICKED_OBJECT},exports.getUniqueObjects=function(_ref2){var pickedColors=_ref2.pickedColors,layers=_ref2.layers,uniqueColors=new Map;if(pickedColors)for(var i=0;i<pickedColors.length;i+=4){var pickedLayerIndex=pickedColors[i+3]-1;if(pickedLayerIndex>=0){var pickedColor=pickedColors.slice(i,i+4),colorKey=pickedColor.join(",");if(!uniqueColors.has(colorKey)){var pickedLayer=layers[pickedLayerIndex];pickedLayer?uniqueColors.set(colorKey,{pickedColor:pickedColor,pickedLayer:pickedLayer,pickedObjectIndex:pickedLayer.decodePickingColor(pickedColor)}):_log.default.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(uniqueColors.values())};var _log=_interopRequireDefault(__webpack_require__(24)),NO_PICKED_OBJECT={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1}},function(module,exports,__webpack_require__){"use strict";function getLayerPickingInfo(_ref2){for(var layer=_ref2.layer,info=_ref2.info,mode=_ref2.mode;layer&&info;){var sourceLayer=info.layer||layer;info.layer=layer,info=layer.pickLayer({info:info,mode:mode,sourceLayer:sourceLayer}),layer=layer.parent}return info}Object.defineProperty(exports,"__esModule",{value:!0}),exports.processPickInfo=function(_ref){var pickInfo=_ref.pickInfo,lastPickedInfo=_ref.lastPickedInfo,mode=_ref.mode,layers=_ref.layers,viewports=_ref.viewports,x=_ref.x,y=_ref.y,deviceX=_ref.deviceX,deviceY=_ref.deviceY,pixelRatio=_ref.pixelRatio,pickedColor=pickInfo.pickedColor,pickedLayer=pickInfo.pickedLayer,pickedObjectIndex=pickInfo.pickedObjectIndex,affectedLayers=pickedLayer?[pickedLayer]:[];if("hover"===mode){var lastPickedObjectIndex=lastPickedInfo.index,lastPickedLayerId=lastPickedInfo.layerId,pickedLayerId=pickedLayer&&pickedLayer.props.id;if(pickedLayerId!==lastPickedLayerId||pickedObjectIndex!==lastPickedObjectIndex){if(pickedLayerId!==lastPickedLayerId){var lastPickedLayer=layers.find(function(layer){return layer.props.id===lastPickedLayerId});lastPickedLayer&&affectedLayers.unshift(lastPickedLayer)}lastPickedInfo.layerId=pickedLayerId,lastPickedInfo.index=pickedObjectIndex,lastPickedInfo.info=null}}var viewport=(_ref3={viewports:viewports},_ref3.viewports[0]),coordinate=viewport&&viewport.unproject([x,y]),baseInfo={color:null,layer:null,index:-1,picked:!1,x:x,y:y,pixel:[x,y],coordinate:coordinate,lngLat:coordinate,devicePixel:[deviceX,deviceY],pixelRatio:pixelRatio},infos=new Map;var _ref3;return infos.set(null,baseInfo),affectedLayers.forEach(function(layer){var info=Object.assign({},baseInfo);if(layer===pickedLayer&&(info.color=pickedColor,info.index=pickedObjectIndex,info.picked=!0),info=getLayerPickingInfo({layer:layer,info:info,mode:mode}),layer===pickedLayer&&"hover"===mode&&(lastPickedInfo.info=info),info&&infos.set(info.layer.id,info),"hover"===mode){var pickingSelectedColor=layer.props.autoHighlight&&pickedLayer===layer?pickedColor:null;layer.setModuleParameters({pickingSelectedColor:pickingSelectedColor}),layer.setNeedsRedraw()}}),infos},exports.getLayerPickingInfo=getLayerPickingInfo},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _slicedToArray2=_interopRequireDefault(__webpack_require__(11)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_hammer=_interopRequireDefault(__webpack_require__(353)),_hammerManagerMock=_interopRequireDefault(__webpack_require__(756)),_wheelInput=_interopRequireDefault(__webpack_require__(757)),_moveInput=_interopRequireDefault(__webpack_require__(759)),_keyInput=_interopRequireDefault(__webpack_require__(760)),_contextmenuInput=_interopRequireDefault(__webpack_require__(761)),_eventRegistrar=_interopRequireDefault(__webpack_require__(762)),_constants=__webpack_require__(143),DEFAULT_OPTIONS={events:null,recognizers:null,Manager:_hammer.default?_hammer.default.Manager:_hammerManagerMock.default,touchAction:"none"},EventManager=function(){function EventManager(){var element=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,_classCallCheck2.default)(this,EventManager),this.options=Object.assign({},DEFAULT_OPTIONS,options),this.events=new Map,this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(element);var events=options.events;events&&this.on(events)}return(0,_createClass2.default)(EventManager,[{key:"setElement",value:function(element){var _this=this;if(this.element&&this.destroy(),this.element=element,element){var options=this.options,ManagerClass=options.Manager;this.manager=new ManagerClass(element,{touchAction:options.touchAction,recognizers:options.recognizers||_constants.RECOGNIZERS}).on("hammer.input",this._onBasicInput),options.recognizers||Object.keys(_constants.RECOGNIZER_COMPATIBLE_MAP).forEach(function(name){var recognizer=_this.manager.get(name);recognizer&&_constants.RECOGNIZER_COMPATIBLE_MAP[name].forEach(function(otherName){recognizer.recognizeWith(otherName)})}),this.wheelInput=new _wheelInput.default(element,this._onOtherEvent,{enable:!1}),this.moveInput=new _moveInput.default(element,this._onOtherEvent,{enable:!1}),this.keyInput=new _keyInput.default(element,this._onOtherEvent,{enable:!1}),this.contextmenuInput=new _contextmenuInput.default(element,this._onOtherEvent,{enable:!1});var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.events[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _step$value=(0,_slicedToArray2.default)(_step.value,2),eventAlias=_step$value[0],eventRegistrar=_step$value[1];eventRegistrar.isEmpty()||(this._toggleRecognizer(eventRegistrar.recognizerName,!0),this.manager.on(eventAlias,eventRegistrar.handleEvent))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}}},{key:"destroy",value:function(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}},{key:"on",value:function(event,handler,srcElement){if("string"==typeof event)this._addEventHandler(event,handler,srcElement);else for(var eventName in srcElement=handler,event)this._addEventHandler(eventName,event[eventName],srcElement)}},{key:"off",value:function(event,handler){if("string"==typeof event)this._removeEventHandler(event,handler);else for(var eventName in event)this._removeEventHandler(eventName,event[eventName])}},{key:"_toggleRecognizer",value:function(name,enabled){var manager=this.manager;if(manager){var recognizer=manager.get(name);if(recognizer&&recognizer.options.enable!==enabled){recognizer.set({enable:enabled});var fallbackRecognizers=_constants.RECOGNIZER_FALLBACK_MAP[name];fallbackRecognizers&&!this.options.recognizers&&fallbackRecognizers.forEach(function(otherName){var otherRecognizer=manager.get(otherName);enabled?(otherRecognizer.requireFailure(name),recognizer.dropRequireFailure(otherName)):otherRecognizer.dropRequireFailure(name)})}this.wheelInput.enableEventType(name,enabled),this.moveInput.enableEventType(name,enabled),this.keyInput.enableEventType(name,enabled),this.contextmenuInput.enableEventType(name,enabled)}}},{key:"_addEventHandler",value:function(event,handler,srcElement){var manager=this.manager,events=this.events,eventAlias=_constants.GESTURE_EVENT_ALIASES[event]||event,eventRegistrar=events.get(eventAlias);eventRegistrar||(eventRegistrar=new _eventRegistrar.default(this),events.set(eventAlias,eventRegistrar),eventRegistrar.recognizerName=_constants.EVENT_RECOGNIZER_MAP[eventAlias]||eventAlias,manager&&manager.on(eventAlias,eventRegistrar.handleEvent)),this._toggleRecognizer(eventRegistrar.recognizerName,!0),eventRegistrar.add(event,handler,srcElement)}},{key:"_removeEventHandler",value:function(event,handler){var events=this.events,eventAlias=_constants.GESTURE_EVENT_ALIASES[event]||event,eventRegistrar=events.get(eventAlias);if(eventRegistrar&&(eventRegistrar.remove(event,handler),eventRegistrar.isEmpty())){var recognizerName=eventRegistrar.recognizerName,isRecognizerUsed=!1,_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=events.values()[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var eh=_step2.value;if(eh.recognizerName===recognizerName&&!eh.isEmpty()){isRecognizerUsed=!0;break}}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}isRecognizerUsed||this._toggleRecognizer(recognizerName,!1)}}},{key:"_onBasicInput",value:function(event){var srcEvent=event.srcEvent,alias=_constants.BASIC_EVENT_ALIASES[srcEvent.type];alias&&this.manager.emit(alias,event)}},{key:"_onOtherEvent",value:function(event){this.manager.emit(event.type,event)}}]),EventManager}();exports.default=EventManager},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.enhancePointerEventInput=function(PointerEventInput){var oldHandler=PointerEventInput.prototype.handler;PointerEventInput.prototype.handler=function(ev){var store=this.store;ev.button>0&&(function(array,predict){for(var i=0;i<array.length;i++)if(predict(array[i]))return!0;return!1}(store,function(e){return e.pointerId===ev.pointerId})||store.push(ev)),oldHandler.call(this,ev)}},exports.enhanceMouseInput=function(MouseInput){MouseInput.prototype.handler=function(ev){var eventType=MOUSE_INPUT_MAP[ev.type];eventType&INPUT_START&&ev.button>=0&&(this.pressed=!0),eventType&INPUT_MOVE&&0===ev.which&&(eventType=INPUT_END),this.pressed&&(eventType&INPUT_END&&(this.pressed=!1),this.callback(this.manager,eventType,{pointers:[ev],changedPointers:[ev],pointerType:"mouse",srcEvent:ev}))}};var INPUT_START=1,INPUT_MOVE=2,INPUT_END=4,MOUSE_INPUT_MAP={mousedown:INPUT_START,mousemove:INPUT_MOVE,mouseup:INPUT_END}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
!function(window,document,exportName,undefined){"use strict";var assign,VENDOR_PREFIXES=["","webkit","Moz","MS","ms","o"],TEST_ELEMENT=document.createElement("div"),TYPE_FUNCTION="function",round=Math.round,abs=Math.abs,now=Date.now;function setTimeoutContext(fn,timeout,context){return setTimeout(bindFn(fn,context),timeout)}function invokeArrayArg(arg,fn,context){return!!Array.isArray(arg)&&(each(arg,context[fn],context),!0)}function each(obj,iterator,context){var i;if(obj)if(obj.forEach)obj.forEach(iterator,context);else if(obj.length!==undefined)for(i=0;i<obj.length;)iterator.call(context,obj[i],i,obj),i++;else for(i in obj)obj.hasOwnProperty(i)&&iterator.call(context,obj[i],i,obj)}function deprecate(method,name,message){var deprecationMessage="DEPRECATED METHOD: "+name+"\n"+message+" AT \n";return function(){var e=new Error("get-stack-trace"),stack=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",log=window.console&&(window.console.warn||window.console.log);return log&&log.call(window.console,deprecationMessage,stack),method.apply(this,arguments)}}assign="function"!=typeof Object.assign?function(target){if(target===undefined||null===target)throw new TypeError("Cannot convert undefined or null to object");for(var output=Object(target),index=1;index<arguments.length;index++){var source=arguments[index];if(source!==undefined&&null!==source)for(var nextKey in source)source.hasOwnProperty(nextKey)&&(output[nextKey]=source[nextKey])}return output}:Object.assign;var extend=deprecate(function(dest,src,merge){for(var keys=Object.keys(src),i=0;i<keys.length;)(!merge||merge&&dest[keys[i]]===undefined)&&(dest[keys[i]]=src[keys[i]]),i++;return dest},"extend","Use `assign`."),merge=deprecate(function(dest,src){return extend(dest,src,!0)},"merge","Use `assign`.");function inherit(child,base,properties){var childP,baseP=base.prototype;(childP=child.prototype=Object.create(baseP)).constructor=child,childP._super=baseP,properties&&assign(childP,properties)}function bindFn(fn,context){return function(){return fn.apply(context,arguments)}}function boolOrFn(val,args){return typeof val==TYPE_FUNCTION?val.apply(args&&args[0]||undefined,args):val}function ifUndefined(val1,val2){return val1===undefined?val2:val1}function addEventListeners(target,types,handler){each(splitStr(types),function(type){target.addEventListener(type,handler,!1)})}function removeEventListeners(target,types,handler){each(splitStr(types),function(type){target.removeEventListener(type,handler,!1)})}function hasParent(node,parent){for(;node;){if(node==parent)return!0;node=node.parentNode}return!1}function inStr(str,find){return str.indexOf(find)>-1}function splitStr(str){return str.trim().split(/\s+/g)}function inArray(src,find,findByKey){if(src.indexOf&&!findByKey)return src.indexOf(find);for(var i=0;i<src.length;){if(findByKey&&src[i][findByKey]==find||!findByKey&&src[i]===find)return i;i++}return-1}function toArray(obj){return Array.prototype.slice.call(obj,0)}function uniqueArray(src,key,sort){for(var results=[],values=[],i=0;i<src.length;){var val=key?src[i][key]:src[i];inArray(values,val)<0&&results.push(src[i]),values[i]=val,i++}return sort&&(results=key?results.sort(function(a,b){return a[key]>b[key]}):results.sort()),results}function prefixed(obj,property){for(var prefix,prop,camelProp=property[0].toUpperCase()+property.slice(1),i=0;i<VENDOR_PREFIXES.length;){if((prop=(prefix=VENDOR_PREFIXES[i])?prefix+camelProp:property)in obj)return prop;i++}return undefined}var _uniqueId=1;function getWindowForElement(element){var doc=element.ownerDocument||element;return doc.defaultView||doc.parentWindow||window}var SUPPORT_TOUCH="ontouchstart"in window,SUPPORT_POINTER_EVENTS=prefixed(window,"PointerEvent")!==undefined,SUPPORT_ONLY_TOUCH=SUPPORT_TOUCH&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),COMPUTE_INTERVAL=25,INPUT_START=1,INPUT_MOVE=2,INPUT_END=4,INPUT_CANCEL=8,DIRECTION_NONE=1,DIRECTION_LEFT=2,DIRECTION_RIGHT=4,DIRECTION_UP=8,DIRECTION_DOWN=16,DIRECTION_HORIZONTAL=DIRECTION_LEFT|DIRECTION_RIGHT,DIRECTION_VERTICAL=DIRECTION_UP|DIRECTION_DOWN,DIRECTION_ALL=DIRECTION_HORIZONTAL|DIRECTION_VERTICAL,PROPS_XY=["x","y"],PROPS_CLIENT_XY=["clientX","clientY"];function Input(manager,callback){var self=this;this.manager=manager,this.callback=callback,this.element=manager.element,this.target=manager.options.inputTarget,this.domHandler=function(ev){boolOrFn(manager.options.enable,[manager])&&self.handler(ev)},this.init()}function inputHandler(manager,eventType,input){var pointersLen=input.pointers.length,changedPointersLen=input.changedPointers.length,isFirst=eventType&INPUT_START&&pointersLen-changedPointersLen==0,isFinal=eventType&(INPUT_END|INPUT_CANCEL)&&pointersLen-changedPointersLen==0;input.isFirst=!!isFirst,input.isFinal=!!isFinal,isFirst&&(manager.session={}),input.eventType=eventType,function(manager,input){var session=manager.session,pointers=input.pointers,pointersLength=pointers.length;session.firstInput||(session.firstInput=simpleCloneInputData(input));pointersLength>1&&!session.firstMultiple?session.firstMultiple=simpleCloneInputData(input):1===pointersLength&&(session.firstMultiple=!1);var firstInput=session.firstInput,firstMultiple=session.firstMultiple,offsetCenter=firstMultiple?firstMultiple.center:firstInput.center,center=input.center=getCenter(pointers);input.timeStamp=now(),input.deltaTime=input.timeStamp-firstInput.timeStamp,input.angle=getAngle(offsetCenter,center),input.distance=getDistance(offsetCenter,center),function(session,input){var center=input.center,offset=session.offsetDelta||{},prevDelta=session.prevDelta||{},prevInput=session.prevInput||{};input.eventType!==INPUT_START&&prevInput.eventType!==INPUT_END||(prevDelta=session.prevDelta={x:prevInput.deltaX||0,y:prevInput.deltaY||0},offset=session.offsetDelta={x:center.x,y:center.y});input.deltaX=prevDelta.x+(center.x-offset.x),input.deltaY=prevDelta.y+(center.y-offset.y)}(session,input),input.offsetDirection=getDirection(input.deltaX,input.deltaY);var overallVelocity=getVelocity(input.deltaTime,input.deltaX,input.deltaY);input.overallVelocityX=overallVelocity.x,input.overallVelocityY=overallVelocity.y,input.overallVelocity=abs(overallVelocity.x)>abs(overallVelocity.y)?overallVelocity.x:overallVelocity.y,input.scale=firstMultiple?(start=firstMultiple.pointers,end=pointers,getDistance(end[0],end[1],PROPS_CLIENT_XY)/getDistance(start[0],start[1],PROPS_CLIENT_XY)):1,input.rotation=firstMultiple?function(start,end){return getAngle(end[1],end[0],PROPS_CLIENT_XY)+getAngle(start[1],start[0],PROPS_CLIENT_XY)}(firstMultiple.pointers,pointers):0,input.maxPointers=session.prevInput?input.pointers.length>session.prevInput.maxPointers?input.pointers.length:session.prevInput.maxPointers:input.pointers.length,function(session,input){var velocity,velocityX,velocityY,direction,last=session.lastInterval||input,deltaTime=input.timeStamp-last.timeStamp;if(input.eventType!=INPUT_CANCEL&&(deltaTime>COMPUTE_INTERVAL||last.velocity===undefined)){var deltaX=input.deltaX-last.deltaX,deltaY=input.deltaY-last.deltaY,v=getVelocity(deltaTime,deltaX,deltaY);velocityX=v.x,velocityY=v.y,velocity=abs(v.x)>abs(v.y)?v.x:v.y,direction=getDirection(deltaX,deltaY),session.lastInterval=input}else velocity=last.velocity,velocityX=last.velocityX,velocityY=last.velocityY,direction=last.direction;input.velocity=velocity,input.velocityX=velocityX,input.velocityY=velocityY,input.direction=direction}(session,input);var start,end;var target=manager.element;hasParent(input.srcEvent.target,target)&&(target=input.srcEvent.target);input.target=target}(manager,input),manager.emit("hammer.input",input),manager.recognize(input),manager.session.prevInput=input}function simpleCloneInputData(input){for(var pointers=[],i=0;i<input.pointers.length;)pointers[i]={clientX:round(input.pointers[i].clientX),clientY:round(input.pointers[i].clientY)},i++;return{timeStamp:now(),pointers:pointers,center:getCenter(pointers),deltaX:input.deltaX,deltaY:input.deltaY}}function getCenter(pointers){var pointersLength=pointers.length;if(1===pointersLength)return{x:round(pointers[0].clientX),y:round(pointers[0].clientY)};for(var x=0,y=0,i=0;i<pointersLength;)x+=pointers[i].clientX,y+=pointers[i].clientY,i++;return{x:round(x/pointersLength),y:round(y/pointersLength)}}function getVelocity(deltaTime,x,y){return{x:x/deltaTime||0,y:y/deltaTime||0}}function getDirection(x,y){return x===y?DIRECTION_NONE:abs(x)>=abs(y)?x<0?DIRECTION_LEFT:DIRECTION_RIGHT:y<0?DIRECTION_UP:DIRECTION_DOWN}function getDistance(p1,p2,props){props||(props=PROPS_XY);var x=p2[props[0]]-p1[props[0]],y=p2[props[1]]-p1[props[1]];return Math.sqrt(x*x+y*y)}function getAngle(p1,p2,props){props||(props=PROPS_XY);var x=p2[props[0]]-p1[props[0]],y=p2[props[1]]-p1[props[1]];return 180*Math.atan2(y,x)/Math.PI}Input.prototype={handler:function(){},init:function(){this.evEl&&addEventListeners(this.element,this.evEl,this.domHandler),this.evTarget&&addEventListeners(this.target,this.evTarget,this.domHandler),this.evWin&&addEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&removeEventListeners(this.element,this.evEl,this.domHandler),this.evTarget&&removeEventListeners(this.target,this.evTarget,this.domHandler),this.evWin&&removeEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler)}};var MOUSE_INPUT_MAP={mousedown:INPUT_START,mousemove:INPUT_MOVE,mouseup:INPUT_END},MOUSE_ELEMENT_EVENTS="mousedown",MOUSE_WINDOW_EVENTS="mousemove mouseup";function MouseInput(){this.evEl=MOUSE_ELEMENT_EVENTS,this.evWin=MOUSE_WINDOW_EVENTS,this.pressed=!1,Input.apply(this,arguments)}inherit(MouseInput,Input,{handler:function(ev){var eventType=MOUSE_INPUT_MAP[ev.type];eventType&INPUT_START&&0===ev.button&&(this.pressed=!0),eventType&INPUT_MOVE&&1!==ev.which&&(eventType=INPUT_END),this.pressed&&(eventType&INPUT_END&&(this.pressed=!1),this.callback(this.manager,eventType,{pointers:[ev],changedPointers:[ev],pointerType:"mouse",srcEvent:ev}))}});var POINTER_INPUT_MAP={pointerdown:INPUT_START,pointermove:INPUT_MOVE,pointerup:INPUT_END,pointercancel:INPUT_CANCEL,pointerout:INPUT_CANCEL},IE10_POINTER_TYPE_ENUM={2:"touch",3:"pen",4:"mouse",5:"kinect"},POINTER_ELEMENT_EVENTS="pointerdown",POINTER_WINDOW_EVENTS="pointermove pointerup pointercancel";function PointerEventInput(){this.evEl=POINTER_ELEMENT_EVENTS,this.evWin=POINTER_WINDOW_EVENTS,Input.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}window.MSPointerEvent&&!window.PointerEvent&&(POINTER_ELEMENT_EVENTS="MSPointerDown",POINTER_WINDOW_EVENTS="MSPointerMove MSPointerUp MSPointerCancel"),inherit(PointerEventInput,Input,{handler:function(ev){var store=this.store,removePointer=!1,eventTypeNormalized=ev.type.toLowerCase().replace("ms",""),eventType=POINTER_INPUT_MAP[eventTypeNormalized],pointerType=IE10_POINTER_TYPE_ENUM[ev.pointerType]||ev.pointerType,isTouch="touch"==pointerType,storeIndex=inArray(store,ev.pointerId,"pointerId");eventType&INPUT_START&&(0===ev.button||isTouch)?storeIndex<0&&(store.push(ev),storeIndex=store.length-1):eventType&(INPUT_END|INPUT_CANCEL)&&(removePointer=!0),storeIndex<0||(store[storeIndex]=ev,this.callback(this.manager,eventType,{pointers:store,changedPointers:[ev],pointerType:pointerType,srcEvent:ev}),removePointer&&store.splice(storeIndex,1))}});var SINGLE_TOUCH_INPUT_MAP={touchstart:INPUT_START,touchmove:INPUT_MOVE,touchend:INPUT_END,touchcancel:INPUT_CANCEL},SINGLE_TOUCH_TARGET_EVENTS="touchstart",SINGLE_TOUCH_WINDOW_EVENTS="touchstart touchmove touchend touchcancel";function SingleTouchInput(){this.evTarget=SINGLE_TOUCH_TARGET_EVENTS,this.evWin=SINGLE_TOUCH_WINDOW_EVENTS,this.started=!1,Input.apply(this,arguments)}inherit(SingleTouchInput,Input,{handler:function(ev){var type=SINGLE_TOUCH_INPUT_MAP[ev.type];if(type===INPUT_START&&(this.started=!0),this.started){var touches=function(ev,type){var all=toArray(ev.touches),changed=toArray(ev.changedTouches);type&(INPUT_END|INPUT_CANCEL)&&(all=uniqueArray(all.concat(changed),"identifier",!0));return[all,changed]}.call(this,ev,type);type&(INPUT_END|INPUT_CANCEL)&&touches[0].length-touches[1].length==0&&(this.started=!1),this.callback(this.manager,type,{pointers:touches[0],changedPointers:touches[1],pointerType:"touch",srcEvent:ev})}}});var TOUCH_INPUT_MAP={touchstart:INPUT_START,touchmove:INPUT_MOVE,touchend:INPUT_END,touchcancel:INPUT_CANCEL},TOUCH_TARGET_EVENTS="touchstart touchmove touchend touchcancel";function TouchInput(){this.evTarget=TOUCH_TARGET_EVENTS,this.targetIds={},Input.apply(this,arguments)}inherit(TouchInput,Input,{handler:function(ev){var type=TOUCH_INPUT_MAP[ev.type],touches=function(ev,type){var allTouches=toArray(ev.touches),targetIds=this.targetIds;if(type&(INPUT_START|INPUT_MOVE)&&1===allTouches.length)return targetIds[allTouches[0].identifier]=!0,[allTouches,allTouches];var i,targetTouches,changedTouches=toArray(ev.changedTouches),changedTargetTouches=[],target=this.target;if(targetTouches=allTouches.filter(function(touch){return hasParent(touch.target,target)}),type===INPUT_START)for(i=0;i<targetTouches.length;)targetIds[targetTouches[i].identifier]=!0,i++;i=0;for(;i<changedTouches.length;)targetIds[changedTouches[i].identifier]&&changedTargetTouches.push(changedTouches[i]),type&(INPUT_END|INPUT_CANCEL)&&delete targetIds[changedTouches[i].identifier],i++;if(!changedTargetTouches.length)return;return[uniqueArray(targetTouches.concat(changedTargetTouches),"identifier",!0),changedTargetTouches]}.call(this,ev,type);touches&&this.callback(this.manager,type,{pointers:touches[0],changedPointers:touches[1],pointerType:"touch",srcEvent:ev})}});var DEDUP_TIMEOUT=2500,DEDUP_DISTANCE=25;function TouchMouseInput(){Input.apply(this,arguments);var handler=bindFn(this.handler,this);this.touch=new TouchInput(this.manager,handler),this.mouse=new MouseInput(this.manager,handler),this.primaryTouch=null,this.lastTouches=[]}function setLastTouch(eventData){var touch=eventData.changedPointers[0];if(touch.identifier===this.primaryTouch){var lastTouch={x:touch.clientX,y:touch.clientY};this.lastTouches.push(lastTouch);var lts=this.lastTouches;setTimeout(function(){var i=lts.indexOf(lastTouch);i>-1&&lts.splice(i,1)},DEDUP_TIMEOUT)}}inherit(TouchMouseInput,Input,{handler:function(manager,inputEvent,inputData){var isTouch="touch"==inputData.pointerType,isMouse="mouse"==inputData.pointerType;if(!(isMouse&&inputData.sourceCapabilities&&inputData.sourceCapabilities.firesTouchEvents)){if(isTouch)(function(eventType,eventData){eventType&INPUT_START?(this.primaryTouch=eventData.changedPointers[0].identifier,setLastTouch.call(this,eventData)):eventType&(INPUT_END|INPUT_CANCEL)&&setLastTouch.call(this,eventData)}).call(this,inputEvent,inputData);else if(isMouse&&function(eventData){for(var x=eventData.srcEvent.clientX,y=eventData.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var t=this.lastTouches[i],dx=Math.abs(x-t.x),dy=Math.abs(y-t.y);if(dx<=DEDUP_DISTANCE&&dy<=DEDUP_DISTANCE)return!0}return!1}.call(this,inputData))return;this.callback(manager,inputEvent,inputData)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var PREFIXED_TOUCH_ACTION=prefixed(TEST_ELEMENT.style,"touchAction"),NATIVE_TOUCH_ACTION=PREFIXED_TOUCH_ACTION!==undefined,TOUCH_ACTION_AUTO="auto",TOUCH_ACTION_MANIPULATION="manipulation",TOUCH_ACTION_NONE="none",TOUCH_ACTION_PAN_X="pan-x",TOUCH_ACTION_PAN_Y="pan-y",TOUCH_ACTION_MAP=function(){if(!NATIVE_TOUCH_ACTION)return!1;var touchMap={},cssSupports=window.CSS&&window.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(val){touchMap[val]=!cssSupports||window.CSS.supports("touch-action",val)}),touchMap}();function TouchAction(manager,value){this.manager=manager,this.set(value)}TouchAction.prototype={set:function(value){"compute"==value&&(value=this.compute()),NATIVE_TOUCH_ACTION&&this.manager.element.style&&TOUCH_ACTION_MAP[value]&&(this.manager.element.style[PREFIXED_TOUCH_ACTION]=value),this.actions=value.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var actions=[];return each(this.manager.recognizers,function(recognizer){boolOrFn(recognizer.options.enable,[recognizer])&&(actions=actions.concat(recognizer.getTouchAction()))}),function(actions){if(inStr(actions,TOUCH_ACTION_NONE))return TOUCH_ACTION_NONE;var hasPanX=inStr(actions,TOUCH_ACTION_PAN_X),hasPanY=inStr(actions,TOUCH_ACTION_PAN_Y);if(hasPanX&&hasPanY)return TOUCH_ACTION_NONE;if(hasPanX||hasPanY)return hasPanX?TOUCH_ACTION_PAN_X:TOUCH_ACTION_PAN_Y;if(inStr(actions,TOUCH_ACTION_MANIPULATION))return TOUCH_ACTION_MANIPULATION;return TOUCH_ACTION_AUTO}(actions.join(" "))},preventDefaults:function(input){var srcEvent=input.srcEvent,direction=input.offsetDirection;if(this.manager.session.prevented)srcEvent.preventDefault();else{var actions=this.actions,hasNone=inStr(actions,TOUCH_ACTION_NONE)&&!TOUCH_ACTION_MAP[TOUCH_ACTION_NONE],hasPanY=inStr(actions,TOUCH_ACTION_PAN_Y)&&!TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y],hasPanX=inStr(actions,TOUCH_ACTION_PAN_X)&&!TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];if(hasNone){var isTapPointer=1===input.pointers.length,isTapMovement=input.distance<2,isTapTouchTime=input.deltaTime<250;if(isTapPointer&&isTapMovement&&isTapTouchTime)return}if(!hasPanX||!hasPanY)return hasNone||hasPanY&&direction&DIRECTION_HORIZONTAL||hasPanX&&direction&DIRECTION_VERTICAL?this.preventSrc(srcEvent):void 0}},preventSrc:function(srcEvent){this.manager.session.prevented=!0,srcEvent.preventDefault()}};var STATE_POSSIBLE=1,STATE_BEGAN=2,STATE_CHANGED=4,STATE_ENDED=8,STATE_RECOGNIZED=STATE_ENDED,STATE_CANCELLED=16;function Recognizer(options){this.options=assign({},this.defaults,options||{}),this.id=_uniqueId++,this.manager=null,this.options.enable=ifUndefined(this.options.enable,!0),this.state=STATE_POSSIBLE,this.simultaneous={},this.requireFail=[]}function stateStr(state){return state&STATE_CANCELLED?"cancel":state&STATE_ENDED?"end":state&STATE_CHANGED?"move":state&STATE_BEGAN?"start":""}function directionStr(direction){return direction==DIRECTION_DOWN?"down":direction==DIRECTION_UP?"up":direction==DIRECTION_LEFT?"left":direction==DIRECTION_RIGHT?"right":""}function getRecognizerByNameIfManager(otherRecognizer,recognizer){var manager=recognizer.manager;return manager?manager.get(otherRecognizer):otherRecognizer}function AttrRecognizer(){Recognizer.apply(this,arguments)}function PanRecognizer(){AttrRecognizer.apply(this,arguments),this.pX=null,this.pY=null}function PinchRecognizer(){AttrRecognizer.apply(this,arguments)}function PressRecognizer(){Recognizer.apply(this,arguments),this._timer=null,this._input=null}function RotateRecognizer(){AttrRecognizer.apply(this,arguments)}function SwipeRecognizer(){AttrRecognizer.apply(this,arguments)}function TapRecognizer(){Recognizer.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Hammer(element,options){return(options=options||{}).recognizers=ifUndefined(options.recognizers,Hammer.defaults.preset),new Manager(element,options)}Recognizer.prototype={defaults:{},set:function(options){return assign(this.options,options),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,"recognizeWith",this))return this;var simultaneous=this.simultaneous;return simultaneous[(otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this)).id]||(simultaneous[otherRecognizer.id]=otherRecognizer,otherRecognizer.recognizeWith(this)),this},dropRecognizeWith:function(otherRecognizer){return invokeArrayArg(otherRecognizer,"dropRecognizeWith",this)?this:(otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this),delete this.simultaneous[otherRecognizer.id],this)},requireFailure:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,"requireFailure",this))return this;var requireFail=this.requireFail;return-1===inArray(requireFail,otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this))&&(requireFail.push(otherRecognizer),otherRecognizer.requireFailure(this)),this},dropRequireFailure:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,"dropRequireFailure",this))return this;otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);var index=inArray(this.requireFail,otherRecognizer);return index>-1&&this.requireFail.splice(index,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(otherRecognizer){return!!this.simultaneous[otherRecognizer.id]},emit:function(input){var self=this,state=this.state;function emit(event){self.manager.emit(event,input)}state<STATE_ENDED&&emit(self.options.event+stateStr(state)),emit(self.options.event),input.additionalEvent&&emit(input.additionalEvent),state>=STATE_ENDED&&emit(self.options.event+stateStr(state))},tryEmit:function(input){if(this.canEmit())return this.emit(input);this.state=32},canEmit:function(){for(var i=0;i<this.requireFail.length;){if(!(this.requireFail[i].state&(32|STATE_POSSIBLE)))return!1;i++}return!0},recognize:function(inputData){var inputDataClone=assign({},inputData);if(!boolOrFn(this.options.enable,[this,inputDataClone]))return this.reset(),void(this.state=32);this.state&(STATE_RECOGNIZED|STATE_CANCELLED|32)&&(this.state=STATE_POSSIBLE),this.state=this.process(inputDataClone),this.state&(STATE_BEGAN|STATE_CHANGED|STATE_ENDED|STATE_CANCELLED)&&this.tryEmit(inputDataClone)},process:function(inputData){},getTouchAction:function(){},reset:function(){}},inherit(AttrRecognizer,Recognizer,{defaults:{pointers:1},attrTest:function(input){var optionPointers=this.options.pointers;return 0===optionPointers||input.pointers.length===optionPointers},process:function(input){var state=this.state,eventType=input.eventType,isRecognized=state&(STATE_BEGAN|STATE_CHANGED),isValid=this.attrTest(input);return isRecognized&&(eventType&INPUT_CANCEL||!isValid)?state|STATE_CANCELLED:isRecognized||isValid?eventType&INPUT_END?state|STATE_ENDED:state&STATE_BEGAN?state|STATE_CHANGED:STATE_BEGAN:32}}),inherit(PanRecognizer,AttrRecognizer,{defaults:{event:"pan",threshold:10,pointers:1,direction:DIRECTION_ALL},getTouchAction:function(){var direction=this.options.direction,actions=[];return direction&DIRECTION_HORIZONTAL&&actions.push(TOUCH_ACTION_PAN_Y),direction&DIRECTION_VERTICAL&&actions.push(TOUCH_ACTION_PAN_X),actions},directionTest:function(input){var options=this.options,hasMoved=!0,distance=input.distance,direction=input.direction,x=input.deltaX,y=input.deltaY;return direction&options.direction||(options.direction&DIRECTION_HORIZONTAL?(direction=0===x?DIRECTION_NONE:x<0?DIRECTION_LEFT:DIRECTION_RIGHT,hasMoved=x!=this.pX,distance=Math.abs(input.deltaX)):(direction=0===y?DIRECTION_NONE:y<0?DIRECTION_UP:DIRECTION_DOWN,hasMoved=y!=this.pY,distance=Math.abs(input.deltaY))),input.direction=direction,hasMoved&&distance>options.threshold&&direction&options.direction},attrTest:function(input){return AttrRecognizer.prototype.attrTest.call(this,input)&&(this.state&STATE_BEGAN||!(this.state&STATE_BEGAN)&&this.directionTest(input))},emit:function(input){this.pX=input.deltaX,this.pY=input.deltaY;var direction=directionStr(input.direction);direction&&(input.additionalEvent=this.options.event+direction),this._super.emit.call(this,input)}}),inherit(PinchRecognizer,AttrRecognizer,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[TOUCH_ACTION_NONE]},attrTest:function(input){return this._super.attrTest.call(this,input)&&(Math.abs(input.scale-1)>this.options.threshold||this.state&STATE_BEGAN)},emit:function(input){if(1!==input.scale){var inOut=input.scale<1?"in":"out";input.additionalEvent=this.options.event+inOut}this._super.emit.call(this,input)}}),inherit(PressRecognizer,Recognizer,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[TOUCH_ACTION_AUTO]},process:function(input){var options=this.options,validPointers=input.pointers.length===options.pointers,validMovement=input.distance<options.threshold,validTime=input.deltaTime>options.time;if(this._input=input,!validMovement||!validPointers||input.eventType&(INPUT_END|INPUT_CANCEL)&&!validTime)this.reset();else if(input.eventType&INPUT_START)this.reset(),this._timer=setTimeoutContext(function(){this.state=STATE_RECOGNIZED,this.tryEmit()},options.time,this);else if(input.eventType&INPUT_END)return STATE_RECOGNIZED;return 32},reset:function(){clearTimeout(this._timer)},emit:function(input){this.state===STATE_RECOGNIZED&&(input&&input.eventType&INPUT_END?this.manager.emit(this.options.event+"up",input):(this._input.timeStamp=now(),this.manager.emit(this.options.event,this._input)))}}),inherit(RotateRecognizer,AttrRecognizer,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[TOUCH_ACTION_NONE]},attrTest:function(input){return this._super.attrTest.call(this,input)&&(Math.abs(input.rotation)>this.options.threshold||this.state&STATE_BEGAN)}}),inherit(SwipeRecognizer,AttrRecognizer,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:DIRECTION_HORIZONTAL|DIRECTION_VERTICAL,pointers:1},getTouchAction:function(){return PanRecognizer.prototype.getTouchAction.call(this)},attrTest:function(input){var velocity,direction=this.options.direction;return direction&(DIRECTION_HORIZONTAL|DIRECTION_VERTICAL)?velocity=input.overallVelocity:direction&DIRECTION_HORIZONTAL?velocity=input.overallVelocityX:direction&DIRECTION_VERTICAL&&(velocity=input.overallVelocityY),this._super.attrTest.call(this,input)&&direction&input.offsetDirection&&input.distance>this.options.threshold&&input.maxPointers==this.options.pointers&&abs(velocity)>this.options.velocity&&input.eventType&INPUT_END},emit:function(input){var direction=directionStr(input.offsetDirection);direction&&this.manager.emit(this.options.event+direction,input),this.manager.emit(this.options.event,input)}}),inherit(TapRecognizer,Recognizer,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[TOUCH_ACTION_MANIPULATION]},process:function(input){var options=this.options,validPointers=input.pointers.length===options.pointers,validMovement=input.distance<options.threshold,validTouchTime=input.deltaTime<options.time;if(this.reset(),input.eventType&INPUT_START&&0===this.count)return this.failTimeout();if(validMovement&&validTouchTime&&validPointers){if(input.eventType!=INPUT_END)return this.failTimeout();var validInterval=!this.pTime||input.timeStamp-this.pTime<options.interval,validMultiTap=!this.pCenter||getDistance(this.pCenter,input.center)<options.posThreshold;if(this.pTime=input.timeStamp,this.pCenter=input.center,validMultiTap&&validInterval?this.count+=1:this.count=1,this._input=input,0===this.count%options.taps)return this.hasRequireFailures()?(this._timer=setTimeoutContext(function(){this.state=STATE_RECOGNIZED,this.tryEmit()},options.interval,this),STATE_BEGAN):STATE_RECOGNIZED}return 32},failTimeout:function(){return this._timer=setTimeoutContext(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==STATE_RECOGNIZED&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Hammer.VERSION="2.0.7",Hammer.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[RotateRecognizer,{enable:!1}],[PinchRecognizer,{enable:!1},["rotate"]],[SwipeRecognizer,{direction:DIRECTION_HORIZONTAL}],[PanRecognizer,{direction:DIRECTION_HORIZONTAL},["swipe"]],[TapRecognizer],[TapRecognizer,{event:"doubletap",taps:2},["tap"]],[PressRecognizer]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Manager(element,options){var manager;this.options=assign({},Hammer.defaults,options||{}),this.options.inputTarget=this.options.inputTarget||element,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=element,this.input=new((manager=this).options.inputClass||(SUPPORT_POINTER_EVENTS?PointerEventInput:SUPPORT_ONLY_TOUCH?TouchInput:SUPPORT_TOUCH?TouchMouseInput:MouseInput))(manager,inputHandler),this.touchAction=new TouchAction(this,this.options.touchAction),toggleCssProps(this,!0),each(this.options.recognizers,function(item){var recognizer=this.add(new item[0](item[1]));item[2]&&recognizer.recognizeWith(item[2]),item[3]&&recognizer.requireFailure(item[3])},this)}function toggleCssProps(manager,add){var prop,element=manager.element;element.style&&(each(manager.options.cssProps,function(value,name){prop=prefixed(element.style,name),add?(manager.oldCssProps[prop]=element.style[prop],element.style[prop]=value):element.style[prop]=manager.oldCssProps[prop]||""}),add||(manager.oldCssProps={}))}Manager.prototype={set:function(options){return assign(this.options,options),options.touchAction&&this.touchAction.update(),options.inputTarget&&(this.input.destroy(),this.input.target=options.inputTarget,this.input.init()),this},stop:function(force){this.session.stopped=force?2:1},recognize:function(inputData){var session=this.session;if(!session.stopped){var recognizer;this.touchAction.preventDefaults(inputData);var recognizers=this.recognizers,curRecognizer=session.curRecognizer;(!curRecognizer||curRecognizer&&curRecognizer.state&STATE_RECOGNIZED)&&(curRecognizer=session.curRecognizer=null);for(var i=0;i<recognizers.length;)recognizer=recognizers[i],2===session.stopped||curRecognizer&&recognizer!=curRecognizer&&!recognizer.canRecognizeWith(curRecognizer)?recognizer.reset():recognizer.recognize(inputData),!curRecognizer&&recognizer.state&(STATE_BEGAN|STATE_CHANGED|STATE_ENDED)&&(curRecognizer=session.curRecognizer=recognizer),i++}},get:function(recognizer){if(recognizer instanceof Recognizer)return recognizer;for(var recognizers=this.recognizers,i=0;i<recognizers.length;i++)if(recognizers[i].options.event==recognizer)return recognizers[i];return null},add:function(recognizer){if(invokeArrayArg(recognizer,"add",this))return this;var existing=this.get(recognizer.options.event);return existing&&this.remove(existing),this.recognizers.push(recognizer),recognizer.manager=this,this.touchAction.update(),recognizer},remove:function(recognizer){if(invokeArrayArg(recognizer,"remove",this))return this;if(recognizer=this.get(recognizer)){var recognizers=this.recognizers,index=inArray(recognizers,recognizer);-1!==index&&(recognizers.splice(index,1),this.touchAction.update())}return this},on:function(events,handler){if(events!==undefined&&handler!==undefined){var handlers=this.handlers;return each(splitStr(events),function(event){handlers[event]=handlers[event]||[],handlers[event].push(handler)}),this}},off:function(events,handler){if(events!==undefined){var handlers=this.handlers;return each(splitStr(events),function(event){handler?handlers[event]&&handlers[event].splice(inArray(handlers[event],handler),1):delete handlers[event]}),this}},emit:function(event,data){this.options.domEvents&&function(event,data){var gestureEvent=document.createEvent("Event");gestureEvent.initEvent(event,!0,!0),gestureEvent.gesture=data,data.target.dispatchEvent(gestureEvent)}(event,data);var handlers=this.handlers[event]&&this.handlers[event].slice();if(handlers&&handlers.length){data.type=event,data.preventDefault=function(){data.srcEvent.preventDefault()};for(var i=0;i<handlers.length;)handlers[i](data),i++}},destroy:function(){this.element&&toggleCssProps(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},assign(Hammer,{INPUT_START:INPUT_START,INPUT_MOVE:INPUT_MOVE,INPUT_END:INPUT_END,INPUT_CANCEL:INPUT_CANCEL,STATE_POSSIBLE:STATE_POSSIBLE,STATE_BEGAN:STATE_BEGAN,STATE_CHANGED:STATE_CHANGED,STATE_ENDED:STATE_ENDED,STATE_RECOGNIZED:STATE_RECOGNIZED,STATE_CANCELLED:STATE_CANCELLED,STATE_FAILED:32,DIRECTION_NONE:DIRECTION_NONE,DIRECTION_LEFT:DIRECTION_LEFT,DIRECTION_RIGHT:DIRECTION_RIGHT,DIRECTION_UP:DIRECTION_UP,DIRECTION_DOWN:DIRECTION_DOWN,DIRECTION_HORIZONTAL:DIRECTION_HORIZONTAL,DIRECTION_VERTICAL:DIRECTION_VERTICAL,DIRECTION_ALL:DIRECTION_ALL,Manager:Manager,Input:Input,TouchAction:TouchAction,TouchInput:TouchInput,MouseInput:MouseInput,PointerEventInput:PointerEventInput,TouchMouseInput:TouchMouseInput,SingleTouchInput:SingleTouchInput,Recognizer:Recognizer,AttrRecognizer:AttrRecognizer,Tap:TapRecognizer,Pan:PanRecognizer,Swipe:SwipeRecognizer,Pinch:PinchRecognizer,Rotate:RotateRecognizer,Press:PressRecognizer,on:addEventListeners,off:removeEventListeners,each:each,merge:merge,extend:extend,assign:assign,inherit:inherit,bindFn:bindFn,prefixed:prefixed}),(void 0!==window?window:"undefined"!=typeof self?self:{}).Hammer=Hammer,(__WEBPACK_AMD_DEFINE_RESULT__=function(){return Hammer}.call(exports,__webpack_require__,exports,module))===undefined||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}(window,document)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(m){var instance={},chainedNoop=function(){return instance};return instance.get=function(){return null},instance.set=chainedNoop,instance.on=chainedNoop,instance.off=chainedNoop,instance.destroy=chainedNoop,instance.emit=chainedNoop,instance}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_constants=__webpack_require__(143),_globals=__webpack_require__(758),firefox=-1!==_globals.userAgent.indexOf("firefox"),WHEEL_EVENTS=_constants.INPUT_EVENT_TYPES.WHEEL_EVENTS,WheelInput=function(){function WheelInput(element,callback){var _this=this,options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,_classCallCheck2.default)(this,WheelInput),this.element=element,this.callback=callback,this.options=Object.assign({enable:!0},options),this.events=WHEEL_EVENTS.concat(options.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(function(event){return element.addEventListener(event,_this.handleEvent,!!_globals.passiveSupported&&{passive:!1})})}return(0,_createClass2.default)(WheelInput,[{key:"destroy",value:function(){var _this2=this;this.events.forEach(function(event){return _this2.element.removeEventListener(event,_this2.handleEvent)})}},{key:"enableEventType",value:function(eventType,enabled){"wheel"===eventType&&(this.options.enable=enabled)}},{key:"handleEvent",value:function(event){if(this.options.enable){var value=event.deltaY;_globals.window.WheelEvent&&(firefox&&event.deltaMode===_globals.window.WheelEvent.DOM_DELTA_PIXEL&&(value/=_globals.window.devicePixelRatio),event.deltaMode===_globals.window.WheelEvent.DOM_DELTA_LINE&&(value*=40));var wheelPosition={x:event.clientX,y:event.clientY};0!==value&&value%4.000244140625==0&&(value=Math.floor(value/4.000244140625)),event.shiftKey&&value&&(value*=.25),this._onWheel(event,-value,wheelPosition)}}},{key:"_onWheel",value:function(srcEvent,delta,position){this.callback({type:"wheel",center:position,delta:delta,srcEvent:srcEvent,pointerType:"mouse",target:srcEvent.target})}}]),WheelInput}();exports.default=WheelInput},function(module,exports,__webpack_require__){"use strict";(function(global){Object.defineProperty(exports,"__esModule",{value:!0}),exports.passiveSupported=exports.document=exports.global=exports.window=exports.userAgent=void 0;var userAgent="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"";exports.userAgent=userAgent;var window_="undefined"!=typeof window?window:global;exports.window=window_;var global_=void 0!==global?global:window;exports.global=global_;var document_="undefined"!=typeof document?document:{};exports.document=document_;var passiveSupported=!1;exports.passiveSupported=passiveSupported;try{var options={get passive(){exports.passiveSupported=passiveSupported=!0}};window_.addEventListener("test",options,options),window_.removeEventListener("test",options,options)}catch(err){}}).call(this,__webpack_require__(17))},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),MOUSE_EVENTS=__webpack_require__(143).INPUT_EVENT_TYPES.MOUSE_EVENTS,MoveInput=function(){function MoveInput(element,callback){var _this=this,options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,_classCallCheck2.default)(this,MoveInput),this.element=element,this.callback=callback,this.pressed=!1,this.options=Object.assign({enable:!0},options),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.enableOutEvent=this.options.enable,this.enableOverEvent=this.options.enable,this.events=MOUSE_EVENTS.concat(options.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(function(event){return element.addEventListener(event,_this.handleEvent)})}return(0,_createClass2.default)(MoveInput,[{key:"destroy",value:function(){var _this2=this;this.events.forEach(function(event){return _this2.element.removeEventListener(event,_this2.handleEvent)})}},{key:"enableEventType",value:function(eventType,enabled){"pointermove"===eventType&&(this.enableMoveEvent=enabled),"pointerover"===eventType&&(this.enableOverEvent=enabled),"pointerout"===eventType&&(this.enableOutEvent=enabled),"pointerleave"===eventType&&(this.enableLeaveEvent=enabled)}},{key:"handleEvent",value:function(event){this.handleOverEvent(event),this.handleOutEvent(event),this.handleLeaveEvent(event),this.handleMoveEvent(event)}},{key:"handleOverEvent",value:function(event){this.enableOverEvent&&"mouseover"===event.type&&this.callback({type:"pointerover",srcEvent:event,pointerType:"mouse",target:event.target})}},{key:"handleOutEvent",value:function(event){this.enableOutEvent&&"mouseout"===event.type&&this.callback({type:"pointerout",srcEvent:event,pointerType:"mouse",target:event.target})}},{key:"handleLeaveEvent",value:function(event){this.enableLeaveEvent&&"mouseleave"===event.type&&this.callback({type:"pointerleave",srcEvent:event,pointerType:"mouse",target:event.target})}},{key:"handleMoveEvent",value:function(event){if(this.enableMoveEvent)switch(event.type){case"mousedown":event.button>=0&&(this.pressed=!0);break;case"mousemove":0===event.which&&(this.pressed=!1),this.pressed||this.callback({type:"pointermove",srcEvent:event,pointerType:"mouse",target:event.target});break;case"mouseup":this.pressed=!1}}}]),MoveInput}();exports.default=MoveInput},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),KEY_EVENTS=__webpack_require__(143).INPUT_EVENT_TYPES.KEY_EVENTS,KeyInput=function(){function KeyInput(element,callback){var _this=this,options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,_classCallCheck2.default)(this,KeyInput),this.element=element,this.callback=callback,this.options=Object.assign({enable:!0},options),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=KEY_EVENTS.concat(options.events||[]),this.handleEvent=this.handleEvent.bind(this),element.tabIndex=1,element.style.outline="none",this.events.forEach(function(event){return element.addEventListener(event,_this.handleEvent)})}return(0,_createClass2.default)(KeyInput,[{key:"destroy",value:function(){var _this2=this;this.events.forEach(function(event){return _this2.element.removeEventListener(event,_this2.handleEvent)})}},{key:"enableEventType",value:function(eventType,enabled){"keydown"===eventType&&(this.enableDownEvent=enabled),"keyup"===eventType&&(this.enableUpEvent=enabled)}},{key:"handleEvent",value:function(event){var targetElement=event.target||event.srcElement;"INPUT"===targetElement.tagName&&"text"===targetElement.type||"TEXTAREA"===targetElement.tagName||(this.enableDownEvent&&"keydown"===event.type&&this.callback({type:"keydown",srcEvent:event,key:event.key,target:event.target}),this.enableUpEvent&&"keyup"===event.type&&this.callback({type:"keyup",srcEvent:event,key:event.key,target:event.target}))}}]),KeyInput}();exports.default=KeyInput},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),ContextmenuInput=function(){function ContextmenuInput(element,callback){var options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,_classCallCheck2.default)(this,ContextmenuInput),this.element=element,this.callback=callback,this.options=Object.assign({enable:!0},options),this.handleEvent=this.handleEvent.bind(this),element.addEventListener("contextmenu",this.handleEvent)}return(0,_createClass2.default)(ContextmenuInput,[{key:"destroy",value:function(){this.element.removeEventListener("contextmenu",this.handleEvent)}},{key:"enableEventType",value:function(eventType,enabled){"contextmenu"===eventType&&(this.options.enable=enabled)}},{key:"handleEvent",value:function(event){this.options.enable&&this.callback({type:"contextmenu",center:{x:event.clientX,y:event.clientY},srcEvent:event,pointerType:"mouse",target:event.target})}}]),ContextmenuInput}();exports.default=ContextmenuInput},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_eventUtils=__webpack_require__(763),EventRegistrar=function(){function EventRegistrar(eventManager){(0,_classCallCheck2.default)(this,EventRegistrar),this.eventManager=eventManager,this.handlers=[],this.handlersByElement=new Map,this.handleEvent=this.handleEvent.bind(this)}return(0,_createClass2.default)(EventRegistrar,[{key:"isEmpty",value:function(){return 0===this.handlers.length}},{key:"add",value:function(type,handler){var srcElement=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"root",handlers=this.handlers,handlersByElement=this.handlersByElement;handlersByElement.has(srcElement)||handlersByElement.set(srcElement,[]);var entry={type:type,handler:handler,srcElement:srcElement};handlers.push(entry),handlersByElement.get(srcElement).push(entry)}},{key:"remove",value:function(type,handler){for(var handlers=this.handlers,handlersByElement=this.handlersByElement,i=handlers.length-1;i>=0;i--){var entry=handlers[i];if(entry.type===type&&entry.handler===handler){handlers.splice(i,1);var entries=handlersByElement.get(entry.srcElement);entries.splice(entries.indexOf(entry),1),0===entries.length&&handlersByElement.delete(entry.srcElement)}}}},{key:"handleEvent",value:function(event){if(!this.isEmpty()){for(var mjolnirEvent=this._normalizeEvent(event),target=event.srcEvent.target;target&&target!==mjolnirEvent.rootElement;){if(this._emit(mjolnirEvent,target),mjolnirEvent.handled)return;target=target.parentNode}this._emit(mjolnirEvent,"root")}}},{key:"_emit",value:function(event,srcElement){var entries=this.handlersByElement.get(srcElement);if(entries)for(var immediatePropagationStopped=!1,stopPropagation=function(){event.handled=!0},stopImmediatePropagation=function(){event.handled=!0,immediatePropagationStopped=!0},i=0;i<entries.length;i++){var _entries$i=entries[i],type=_entries$i.type;if((0,_entries$i.handler)(Object.assign({},event,{type:type,stopPropagation:stopPropagation,stopImmediatePropagation:stopImmediatePropagation})),immediatePropagationStopped)break}}},{key:"_normalizeEvent",value:function(event){var rootElement=this.eventManager.element;return Object.assign({},event,(0,_eventUtils.whichButtons)(event),(0,_eventUtils.getOffsetPosition)(event,rootElement),{handled:!1,rootElement:rootElement})}}]),EventRegistrar}();exports.default=EventRegistrar},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.whichButtons=function(event){var eventType=MOUSE_EVENTS[event.srcEvent.type];if(!eventType)return null;var _event$srcEvent=event.srcEvent,buttons=_event$srcEvent.buttons,button=_event$srcEvent.button,which=_event$srcEvent.which,leftButton=!1,middleButton=!1,rightButton=!1;eventType===UP_EVENT||eventType===MOVE_EVENT&&!Number.isFinite(buttons)?(leftButton=which===MOUSE_EVENT_WHICH_LEFT,middleButton=which===MOUSE_EVENT_WHICH_MIDDLE,rightButton=which===MOUSE_EVENT_WHICH_RIGHT):eventType===MOVE_EVENT?(leftButton=Boolean(buttons&MOUSE_EVENT_BUTTONS_LEFT_MASK),middleButton=Boolean(buttons&MOUSE_EVENT_BUTTONS_MIDDLE_MASK),rightButton=Boolean(buttons&MOUSE_EVENT_BUTTONS_RIGHT_MASK)):eventType===DOWN_EVENT&&(leftButton=button===MOUSE_EVENT_BUTTON_LEFT,middleButton=button===MOUSE_EVENT_BUTTON_MIDDLE,rightButton=button===MOUSE_EVENT_BUTTON_RIGHT);return{leftButton:leftButton,middleButton:middleButton,rightButton:rightButton}},exports.getOffsetPosition=function(event,rootElement){var srcEvent=event.srcEvent;if(!event.center&&!Number.isFinite(srcEvent.clientX))return null;var center=event.center||{x:srcEvent.clientX,y:srcEvent.clientY},rect=rootElement.getBoundingClientRect(),scaleX=rect.width/rootElement.offsetWidth,scaleY=rect.height/rootElement.offsetHeight,offsetCenter={x:(center.x-rect.left-rootElement.clientLeft)/scaleX,y:(center.y-rect.top-rootElement.clientTop)/scaleY};return{center:center,offsetCenter:offsetCenter}};var DOWN_EVENT=1,MOVE_EVENT=2,UP_EVENT=4,MOUSE_EVENTS={pointerdown:DOWN_EVENT,pointermove:MOVE_EVENT,pointerup:UP_EVENT,mousedown:DOWN_EVENT,mousemove:MOVE_EVENT,mouseup:UP_EVENT},MOUSE_EVENT_WHICH_LEFT=1,MOUSE_EVENT_WHICH_MIDDLE=2,MOUSE_EVENT_WHICH_RIGHT=3,MOUSE_EVENT_BUTTON_LEFT=0,MOUSE_EVENT_BUTTON_MIDDLE=1,MOUSE_EVENT_BUTTON_RIGHT=2,MOUSE_EVENT_BUTTONS_LEFT_MASK=1,MOUSE_EVENT_BUTTONS_RIGHT_MASK=2,MOUSE_EVENT_BUTTONS_MIDDLE_MASK=4},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_view=_interopRequireDefault(__webpack_require__(62)),_viewport=_interopRequireDefault(__webpack_require__(47)),_math=__webpack_require__(25),_firstPersonController=_interopRequireDefault(__webpack_require__(354));var FirstPersonView=function(_View){function FirstPersonView(){return(0,_classCallCheck2.default)(this,FirstPersonView),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(FirstPersonView).apply(this,arguments))}return(0,_inherits2.default)(FirstPersonView,_View),(0,_createClass2.default)(FirstPersonView,[{key:"_getViewport",value:function(props){var _props$viewState=props.viewState,_props$viewState$mode=_props$viewState.modelMatrix,modelMatrix=void 0===_props$viewState$mode?null:_props$viewState$mode,bearing=_props$viewState.bearing,_props$viewState$up=_props$viewState.up,up=void 0===_props$viewState$up?[0,0,1]:_props$viewState$up,dir=function(_ref){var bearing=_ref.bearing,pitch=_ref.pitch;return new _math._SphericalCoordinates({bearing:bearing,pitch:pitch}).toVector3().normalize()}({bearing:bearing,pitch:89}),center=modelMatrix?modelMatrix.transformDirection(dir):dir,viewMatrix=(new _math.Matrix4).lookAt({eye:[0,0,0],center:center,up:up});return new _viewport.default(Object.assign({},props,{zoom:null,viewMatrix:viewMatrix}))}},{key:"controller",get:function(){return this._getControllerProps({type:_firstPersonController.default})}}]),FirstPersonView}(_view.default);exports.default=FirstPersonView,FirstPersonView.displayName="FirstPersonView"},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_view=_interopRequireDefault(__webpack_require__(62)),_viewport=_interopRequireDefault(__webpack_require__(47)),_math=__webpack_require__(25);var ThirdPersonView=function(_View){function ThirdPersonView(){return(0,_classCallCheck2.default)(this,ThirdPersonView),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(ThirdPersonView).apply(this,arguments))}return(0,_inherits2.default)(ThirdPersonView,_View),(0,_createClass2.default)(ThirdPersonView,[{key:"_getViewport",value:function(props){var _props$viewState=props.viewState,bearing=_props$viewState.bearing,pitch=_props$viewState.pitch,position=_props$viewState.position,up=_props$viewState.up,distance=50*_props$viewState.zoom,eye=function(_ref){var bearing=_ref.bearing,pitch=_ref.pitch;return new _math._SphericalCoordinates({bearing:bearing,pitch:pitch}).toVector3().normalize()}({bearing:bearing,pitch:pitch}).scale(-distance).multiply(new _math.Vector3(1,1,-1)),viewMatrix=(new _math.Matrix4).multiplyRight((new _math.Matrix4).lookAt({eye:eye,center:position,up:up}));return new _viewport.default(Object.assign({},props,{id:this.id,zoom:null,viewMatrix:viewMatrix}))}}]),ThirdPersonView}(_view.default);exports.default=ThirdPersonView,ThirdPersonView.displayName="ThirdPersonView"},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createClass2=_interopRequireDefault(__webpack_require__(2)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_view=_interopRequireDefault(__webpack_require__(62)),_viewport=_interopRequireDefault(__webpack_require__(47)),_math=__webpack_require__(25),_orbitController=_interopRequireDefault(__webpack_require__(214)),DEGREES_TO_RADIANS=Math.PI/180;function getViewMatrix(_ref){var height=_ref.height,fovy=_ref.fovy,orbitAxis=_ref.orbitAxis,rotationX=_ref.rotationX,rotationOrbit=_ref.rotationOrbit,distance=(_ref.zoom,.5/Math.tan(fovy*DEGREES_TO_RADIANS/2)),viewMatrix=(new _math.Matrix4).lookAt({eye:[0,0,distance]});viewMatrix.rotateX(rotationX*DEGREES_TO_RADIANS),"Z"===orbitAxis?viewMatrix.rotateZ(rotationOrbit*DEGREES_TO_RADIANS):viewMatrix.rotateY(rotationOrbit*DEGREES_TO_RADIANS);var projectionScale=1/(height||1);return viewMatrix.scale([projectionScale,projectionScale,projectionScale]),viewMatrix}var OrbitViewport=function(_Viewport){function OrbitViewport(props){(0,_classCallCheck2.default)(this,OrbitViewport);var id=props.id,x=props.x,y=props.y,width=props.width,height=props.height,_props$fovy=props.fovy,fovy=void 0===_props$fovy?50:_props$fovy,near=props.near,far=props.far,_props$orbitAxis=props.orbitAxis,orbitAxis=void 0===_props$orbitAxis?"Z":_props$orbitAxis,_props$target=props.target,target=void 0===_props$target?[0,0,0]:_props$target,_props$rotationX=props.rotationX,rotationX=void 0===_props$rotationX?0:_props$rotationX,_props$rotationOrbit=props.rotationOrbit,rotationOrbit=void 0===_props$rotationOrbit?0:_props$rotationOrbit,_props$zoom=props.zoom,zoom=void 0===_props$zoom?0:_props$zoom;return(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(OrbitViewport).call(this,{id:id,viewMatrix:getViewMatrix({height:height,fovy:fovy,orbitAxis:orbitAxis,rotationX:rotationX,rotationOrbit:rotationOrbit,zoom:zoom}),fovy:fovy,near:near,far:far,x:x,y:y,position:target,width:width,height:height,zoom:zoom}))}return(0,_inherits2.default)(OrbitViewport,_Viewport),OrbitViewport}(_viewport.default),OrbitView=function(_View){function OrbitView(props){return(0,_classCallCheck2.default)(this,OrbitView),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(OrbitView).call(this,Object.assign({},props,{type:OrbitViewport})))}return(0,_inherits2.default)(OrbitView,_View),(0,_createClass2.default)(OrbitView,[{key:"controller",get:function(){return this._getControllerProps({type:_orbitController.default,ViewportType:OrbitViewport})}}]),OrbitView}(_view.default);exports.default=OrbitView,OrbitView.displayName="OrbitView"},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(9),_interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_view=_interopRequireDefault(__webpack_require__(62)),_viewport=_interopRequireDefault(__webpack_require__(47)),mat4=_interopRequireWildcard(__webpack_require__(89)),DEGREES_TO_RADIANS=Math.PI/180,PerspectiveView=function(_View){function PerspectiveView(){return(0,_classCallCheck2.default)(this,PerspectiveView),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(PerspectiveView).apply(this,arguments))}return(0,_inherits2.default)(PerspectiveView,_View),(0,_createClass2.default)(PerspectiveView,[{key:"_getViewport",value:function(props){var x=props.x,y=props.y,width=props.width,height=props.height,viewState=props.viewState,eye=viewState.eye,_viewState$lookAt=viewState.lookAt,lookAt=void 0===_viewState$lookAt?[0,0,0]:_viewState$lookAt,_viewState$up=viewState.up,up=void 0===_viewState$up?[0,1,0]:_viewState$up,fovy=props.fovy||viewState.fovy||75,near=props.near||viewState.near||1,far=props.far||viewState.far||100,aspect=Number.isFinite(viewState.aspect)?viewState.aspect:width/height,fovyRadians=fovy*DEGREES_TO_RADIANS;return new _viewport.default({id:this.id,x:x,y:y,width:width,height:height,viewMatrix:mat4.lookAt([],eye,lookAt,up),projectionMatrix:mat4.perspective([],fovyRadians,aspect,near,far)})}}]),PerspectiveView}(_view.default);exports.default=PerspectiveView,PerspectiveView.displayName="PerspectiveView"},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createClass2=_interopRequireDefault(__webpack_require__(2)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_view=_interopRequireDefault(__webpack_require__(62)),_viewport=_interopRequireDefault(__webpack_require__(47)),_math=__webpack_require__(25),_orthographicController=_interopRequireDefault(__webpack_require__(355)),viewMatrix=(new _math.Matrix4).lookAt({eye:[0,0,1]});function getProjectionMatrix(_ref){var width=_ref.width,height=_ref.height,near=_ref.near,far=_ref.far;return width=width||1,height=height||1,(new _math.Matrix4).ortho({left:-width/2,right:width/2,bottom:height/2,top:-height/2,near:near,far:far})}var OrthographicViewport=function(_Viewport){function OrthographicViewport(_ref2){var id=_ref2.id,x=_ref2.x,y=_ref2.y,width=_ref2.width,height=_ref2.height,_ref2$near=_ref2.near,near=void 0===_ref2$near?.1:_ref2$near,_ref2$far=_ref2.far,far=void 0===_ref2$far?1e3:_ref2$far,_ref2$zoom=_ref2.zoom,zoom=void 0===_ref2$zoom?0:_ref2$zoom,_ref2$target=_ref2.target,target=void 0===_ref2$target?[0,0,0]:_ref2$target;return(0,_classCallCheck2.default)(this,OrthographicViewport),(0,_possibleConstructorReturn2.default)(void 0,new _viewport.default({id:id,x:x,y:y,width:width,height:height,position:target,viewMatrix:viewMatrix,projectionMatrix:getProjectionMatrix({width:width,height:height,near:near,far:far}),zoom:zoom}))}return(0,_inherits2.default)(OrthographicViewport,_Viewport),OrthographicViewport}(_viewport.default),OrthographicView=function(_View){function OrthographicView(props){return(0,_classCallCheck2.default)(this,OrthographicView),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(OrthographicView).call(this,Object.assign({},props,{type:OrthographicViewport})))}return(0,_inherits2.default)(OrthographicView,_View),(0,_createClass2.default)(OrthographicView,[{key:"controller",get:function(){return this._getControllerProps({type:_orthographicController.default,ViewportType:OrthographicViewport})}}]),OrthographicView}(_view.default);exports.default=OrthographicView,OrthographicView.displayName="OrthographicView"},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_transitionInterpolator=_interopRequireDefault(__webpack_require__(347)),_math=__webpack_require__(25),_viewportMercatorProject=__webpack_require__(37),LINEARLY_INTERPOLATED_PROPS=["bearing","pitch"],FlyToInterpolator=function(_TransitionInterpolat){function FlyToInterpolator(){return(0,_classCallCheck2.default)(this,FlyToInterpolator),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(FlyToInterpolator).call(this,{compare:["longitude","latitude","zoom","bearing","pitch"],extract:["width","height","longitude","latitude","zoom","bearing","pitch"],required:["width","height","latitude","longitude","zoom"]}))}return(0,_inherits2.default)(FlyToInterpolator,_TransitionInterpolat),(0,_createClass2.default)(FlyToInterpolator,[{key:"interpolateProps",value:function(startProps,endProps,t){for(var viewport=(0,_viewportMercatorProject.flyToViewport)(startProps,endProps,t),_i=0;_i<LINEARLY_INTERPOLATED_PROPS.length;_i++){var key=LINEARLY_INTERPOLATED_PROPS[_i];viewport[key]=(0,_math.lerp)(startProps[key]||0,endProps[key]||0,t)}return viewport}}]),FlyToInterpolator}(_transitionInterpolator.default);exports.default=FlyToInterpolator},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_flatten=__webpack_require__(112),_iterableUtils=__webpack_require__(209),TypedArrayManager=function(){function TypedArrayManager(){var _ref$overAlloc=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).overAlloc,overAlloc=void 0===_ref$overAlloc?1:_ref$overAlloc;(0,_classCallCheck2.default)(this,TypedArrayManager),this.overAlloc=overAlloc}return(0,_createClass2.default)(TypedArrayManager,[{key:"allocate",value:function(typedArray,count,_ref2){var size=_ref2.size,type=_ref2.type,_ref2$copy=_ref2.copy,copy=void 0!==_ref2$copy&&_ref2$copy,newSize=count*size;if(typedArray&&newSize<=typedArray.length)return typedArray;var allocSize=Math.max(Math.ceil(newSize*this.overAlloc),1),newArray=this._allocate(type,allocSize);return typedArray&&copy&&newArray.set(typedArray),this._release(typedArray),newArray}},{key:"_allocate",value:function(){return new(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Float32Array)(arguments.length>1?arguments[1]:void 0)}},{key:"_release",value:function(typedArray){}}]),TypedArrayManager}(),Tesselator=function(){function Tesselator(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,_classCallCheck2.default)(this,Tesselator);var _opts$attributes=opts.attributes,attributes=void 0===_opts$attributes?{}:_opts$attributes;this.typedArrayManager=new TypedArrayManager,this.indexLayout=null,this.bufferLayout=null,this.vertexCount=0,this.instanceCount=0,this.attributes={},this._attributeDefs=attributes,this.updateGeometry(opts),Object.seal(this)}return(0,_createClass2.default)(Tesselator,[{key:"updateGeometry",value:function(_ref3){var data=_ref3.data,getGeometry=_ref3.getGeometry,positionFormat=_ref3.positionFormat,fp64=_ref3.fp64;this.data=data,this.getGeometry=getGeometry,this.fp64=fp64,this.positionSize="XY"===positionFormat?2:3,this._rebuildGeometry()}},{key:"updatePartialGeometry",value:function(_ref4){_ref4.start,_ref4.count,_ref4.objects}},{key:"updateGeometryAttributes",value:function(geometry,startIndex,size){throw new Error("Not implemented")}},{key:"getGeometrySize",value:function(geometry){throw new Error("Not implemented")}},{key:"_forEachGeometry",value:function(visitor){var data=this.data,getGeometry=this.getGeometry,_createIterable=(0,_iterableUtils.createIterable)(data),iterable=_createIterable.iterable,objectInfo=_createIterable.objectInfo,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=iterable[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var object=_step.value;objectInfo.index++,visitor(getGeometry(object,objectInfo),objectInfo.index)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}},{key:"_updateAttribute",value:function(_ref5){var target=_ref5.target,size=_ref5.size,getValue=_ref5.getValue,data=this.data,bufferLayout=this.bufferLayout,i=0,_createIterable2=(0,_iterableUtils.createIterable)(data),iterable=_createIterable2.iterable,objectInfo=_createIterable2.objectInfo,_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=iterable[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var object=_step2.value;objectInfo.index++;var value=getValue(object,objectInfo),numVertices=bufferLayout[objectInfo.index];(0,_flatten.fillArray)({target:target,source:value,start:i,count:numVertices}),i+=numVertices*size}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return target}},{key:"_rebuildGeometry",value:function(){var _this=this;if(this.data&&this.getGeometry){var indexLayout=[],bufferLayout=[],instanceCount=0;this._forEachGeometry(function(geometry,dataIndex){var count=_this.getGeometrySize(geometry);instanceCount+=count,bufferLayout[dataIndex]=count});var attributes=this.attributes,_attributeDefs=this._attributeDefs,typedArrayManager=this.typedArrayManager,fp64=this.fp64;for(var name in _attributeDefs){var def=_attributeDefs[name];def.fp64Only&&!fp64||(attributes[name]=typedArrayManager.allocate(attributes[name],instanceCount,def))}this.indexLayout=indexLayout,this.bufferLayout=bufferLayout,this.instanceCount=instanceCount;var context={vertexStart:0,indexStart:0};this._forEachGeometry(function(geometry,dataIndex){var geometrySize=bufferLayout[dataIndex];context.geometryIndex=dataIndex,context.geometrySize=geometrySize,_this.updateGeometryAttributes(geometry,context),context.vertexStart+=geometrySize,context.indexStart+=indexLayout[dataIndex]||0}),this.vertexCount=context.indexStart}}}]),Tesselator}();exports.default=Tesselator},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"ArcLayer",{enumerable:!0,get:function(){return _arcLayer.default}}),Object.defineProperty(exports,"BitmapLayer",{enumerable:!0,get:function(){return _bitmapLayer.default}}),Object.defineProperty(exports,"IconLayer",{enumerable:!0,get:function(){return _iconLayer.default}}),Object.defineProperty(exports,"LineLayer",{enumerable:!0,get:function(){return _lineLayer.default}}),Object.defineProperty(exports,"PointCloudLayer",{enumerable:!0,get:function(){return _pointCloudLayer.default}}),Object.defineProperty(exports,"ScatterplotLayer",{enumerable:!0,get:function(){return _scatterplotLayer.default}}),Object.defineProperty(exports,"ColumnLayer",{enumerable:!0,get:function(){return _columnLayer.default}}),Object.defineProperty(exports,"GridCellLayer",{enumerable:!0,get:function(){return _gridCellLayer.default}}),Object.defineProperty(exports,"PathLayer",{enumerable:!0,get:function(){return _pathLayer.default}}),Object.defineProperty(exports,"PolygonLayer",{enumerable:!0,get:function(){return _polygonLayer.default}}),Object.defineProperty(exports,"GeoJsonLayer",{enumerable:!0,get:function(){return _geojsonLayer.default}}),Object.defineProperty(exports,"TextLayer",{enumerable:!0,get:function(){return _textLayer.default}}),Object.defineProperty(exports,"SolidPolygonLayer",{enumerable:!0,get:function(){return _solidPolygonLayer.default}}),Object.defineProperty(exports,"_MultiIconLayer",{enumerable:!0,get:function(){return _multiIconLayer.default}});var _arcLayer=_interopRequireDefault(__webpack_require__(772)),_bitmapLayer=_interopRequireDefault(__webpack_require__(776)),_iconLayer=_interopRequireDefault(__webpack_require__(376)),_lineLayer=_interopRequireDefault(__webpack_require__(817)),_pointCloudLayer=_interopRequireDefault(__webpack_require__(820)),_scatterplotLayer=_interopRequireDefault(__webpack_require__(377)),_columnLayer=_interopRequireDefault(__webpack_require__(378)),_gridCellLayer=_interopRequireDefault(__webpack_require__(827)),_pathLayer=_interopRequireDefault(__webpack_require__(220)),_polygonLayer=_interopRequireDefault(__webpack_require__(832)),_geojsonLayer=_interopRequireDefault(__webpack_require__(838)),_textLayer=_interopRequireDefault(__webpack_require__(840)),_solidPolygonLayer=_interopRequireDefault(__webpack_require__(221)),_multiIconLayer=_interopRequireDefault(__webpack_require__(381))},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_get2=_interopRequireDefault(__webpack_require__(16)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_core=__webpack_require__(15),_core2=__webpack_require__(7),_arcLayerVertex=_interopRequireDefault(__webpack_require__(773)),_arcLayerVertex2=_interopRequireDefault(__webpack_require__(774)),_arcLayerFragment=_interopRequireDefault(__webpack_require__(775)),fp64LowPart=_core2.fp64.fp64LowPart,DEFAULT_COLOR=[0,0,0,255],defaultProps={fp64:!1,getSourcePosition:{type:"accessor",value:function(x){return x.sourcePosition}},getTargetPosition:{type:"accessor",value:function(x){return x.targetPosition}},getSourceColor:{type:"accessor",value:DEFAULT_COLOR},getTargetColor:{type:"accessor",value:DEFAULT_COLOR},getWidth:{type:"accessor",value:1},getHeight:{type:"accessor",value:1},getTilt:{type:"accessor",value:0},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0},getStrokeWidth:{deprecatedFor:"getWidth"}},ArcLayer=function(_Layer){function ArcLayer(){return(0,_classCallCheck2.default)(this,ArcLayer),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(ArcLayer).apply(this,arguments))}return(0,_inherits2.default)(ArcLayer,_Layer),(0,_createClass2.default)(ArcLayer,[{key:"getShaders",value:function(){return this.use64bitProjection()?{vs:_arcLayerVertex2.default,fs:_arcLayerFragment.default,modules:["project64","picking"]}:{vs:_arcLayerVertex.default,fs:_arcLayerFragment.default,modules:["picking"]}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:4,transition:!0,accessor:["getSourcePosition","getTargetPosition"],update:this.calculateInstancePositions},instancePositions64Low:{size:4,accessor:["getSourcePosition","getTargetPosition"],update:this.calculateInstancePositions64Low},instanceSourceColors:{size:4,type:5121,transition:!0,accessor:"getSourceColor",defaultValue:DEFAULT_COLOR},instanceTargetColors:{size:4,type:5121,transition:!0,accessor:"getTargetColor",defaultValue:DEFAULT_COLOR},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1},instanceHeights:{size:1,transition:!0,accessor:"getHeight",defaultValue:1},instanceTilts:{size:1,transition:!0,accessor:"getTilt",defaultValue:0}})}},{key:"updateState",value:function(_ref){var props=_ref.props,oldProps=_ref.oldProps,changeFlags=_ref.changeFlags;if((0,_get2.default)((0,_getPrototypeOf2.default)(ArcLayer.prototype),"updateState",this).call(this,{props:props,oldProps:oldProps,changeFlags:changeFlags}),props.fp64!==oldProps.fp64){var gl=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(gl)}),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(_ref2){var uniforms=_ref2.uniforms,viewport=this.context.viewport,_this$props=this.props,widthUnits=_this$props.widthUnits,widthScale=_this$props.widthScale,widthMinPixels=_this$props.widthMinPixels,widthMaxPixels=_this$props.widthMaxPixels,widthMultiplier="pixels"===widthUnits?viewport.distanceScales.metersPerPixel[2]:1;this.state.model.setUniforms(Object.assign({},uniforms,{widthScale:widthScale*widthMultiplier,widthMinPixels:widthMinPixels,widthMaxPixels:widthMaxPixels})).draw()}},{key:"_getModel",value:function(gl){for(var positions=[],i=0;i<50;i++)positions=positions.concat([i,-1,0,i,1,0]);var model=new _core2.Model(gl,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new _core2.Geometry({drawMode:5,attributes:{positions:new Float32Array(positions)}}),isInstanced:!0,shaderCache:this.context.shaderCache}));return model.setUniforms({numSegments:50}),model}},{key:"calculateInstancePositions",value:function(attribute){var _this$props2=this.props,data=_this$props2.data,getSourcePosition=_this$props2.getSourcePosition,getTargetPosition=_this$props2.getTargetPosition,value=attribute.value,i=0,_createIterable=(0,_core.createIterable)(data),iterable=_createIterable.iterable,objectInfo=_createIterable.objectInfo,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=iterable[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var object=_step.value;objectInfo.index++;var sourcePosition=getSourcePosition(object,objectInfo),targetPosition=getTargetPosition(object,objectInfo);value[i++]=sourcePosition[0],value[i++]=sourcePosition[1],value[i++]=targetPosition[0],value[i++]=targetPosition[1]}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}},{key:"calculateInstancePositions64Low",value:function(attribute){var isFP64=this.use64bitPositions();if(attribute.constant=!isFP64,isFP64){var _this$props3=this.props,data=_this$props3.data,getSourcePosition=_this$props3.getSourcePosition,getTargetPosition=_this$props3.getTargetPosition,value=attribute.value,i=0,_createIterable2=(0,_core.createIterable)(data),iterable=_createIterable2.iterable,objectInfo=_createIterable2.objectInfo,_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=iterable[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var object=_step2.value;objectInfo.index++;var sourcePosition=getSourcePosition(object,objectInfo),targetPosition=getTargetPosition(object,objectInfo);value[i++]=fp64LowPart(sourcePosition[0]),value[i++]=fp64LowPart(sourcePosition[1]),value[i++]=fp64LowPart(targetPosition[0]),value[i++]=fp64LowPart(targetPosition[1])}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}else attribute.value=new Float32Array(4)}}]),ArcLayer}(_core.Layer);exports.default=ArcLayer,ArcLayer.layerName="ArcLayer",ArcLayer.defaultProps=defaultProps},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default="#define SHADER_NAME arc-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec4 instanceSourceColors;\nattribute vec4 instanceTargetColors;\nattribute vec4 instancePositions;\nattribute vec4 instancePositions64Low;\nattribute vec3 instancePickingColors;\nattribute float instanceWidths;\nattribute float instanceHeights;\nattribute float instanceTilts;\n\nuniform float numSegments;\nuniform float opacity;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\n\nvarying vec4 vColor;\n\nfloat paraboloid(vec2 source, vec2 target, float ratio) {\n\n  vec2 x = mix(source, target, ratio);\n  vec2 center = mix(source, target, 0.5);\n\n  float dSourceCenter = distance(source, center);\n  float dXCenter = distance(x, center);\n  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset_screenspace = dir_screenspace * offset_direction * width / 2.0;\n  vec2 offset_clipspace = project_pixel_size_to_clipspace(offset_screenspace);\n\n  return offset_clipspace;\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (numSegments - 1.0));\n}\n\nvec3 getPos(vec2 source, vec2 target, float segmentRatio) {\n  float vertexHeight = sqrt(max(0.0, paraboloid(source, target, segmentRatio))) * instanceHeights;\n\n  float tiltAngle = radians(instanceTilts);\n  vec2 tiltDirection = normalize(target - source);\n  vec2 tilt = vec2(-tiltDirection.y, tiltDirection.x) * vertexHeight * sin(tiltAngle);\n\n  return vec3(\n    mix(source, target, segmentRatio) + tilt,\n    vertexHeight * cos(tiltAngle)\n  );\n}\n\nvoid main(void) {\n  vec2 source = project_position(vec3(instancePositions.xy, 0.0), instancePositions64Low.xy).xy;\n  vec2 target = project_position(vec3(instancePositions.zw, 0.0), instancePositions64Low.zw).xy;\n\n  float segmentIndex = positions.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n\n  vec3 currPos = getPos(source, target, segmentRatio);\n  vec3 nextPos = getPos(source, target, nextSegmentRatio);\n  vec4 curr = project_common_position_to_clipspace(vec4(currPos, 1.0));\n  vec4 next = project_common_position_to_clipspace(vec4(nextPos, 1.0));\n  float widthPixels = clamp(\n    project_size_to_pixel(instanceWidths * widthScale),\n    widthMinPixels, widthMaxPixels\n  );\n  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, positions.y, widthPixels);\n  gl_Position = curr + vec4(offset, 0.0, 0.0);\n\n  vec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio) / 255.;\n  vColor = vec4(color.rgb, color.a * opacity);\n  picking_setPickingColor(instancePickingColors);\n}\n"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default="#define SHADER_NAME arc-layer-vertex-shader-64\n\nattribute vec3 positions;\nattribute vec4 instanceSourceColors;\nattribute vec4 instanceTargetColors;\n\nattribute vec4 instancePositions;\nattribute vec4 instancePositions64Low;\n\nattribute vec3 instancePickingColors;\nattribute float instanceWidths;\n\nuniform float numSegments;\nuniform float opacity;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\n\nvarying vec4 vColor;\n\nvec2 paraboloid_fp64(vec2 source[2], vec2 target[2], float ratio) {\n\n  vec2 x[2];\n  vec2_mix_fp64(source, target, ratio, x);\n  vec2 center[2];\n  vec2_mix_fp64(source, target, 0.5, center);\n\n  vec2 dSourceCenter = vec2_distance_fp64(source, center);\n  vec2 dXCenter = vec2_distance_fp64(x, center);\n  return mul_fp64(sum_fp64(dSourceCenter, dXCenter), sub_fp64(dSourceCenter, dXCenter));\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset_screenspace = dir_screenspace * offset_direction * width / 2.0;\n  vec2 offset_clipspace = project_pixel_size_to_clipspace(offset_screenspace);\n\n  return offset_clipspace;\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (numSegments - 1.0));\n}\n\nvoid get_pos_fp64(vec2 source[2], vec2 target[2], float segmentRatio, out vec2 position[4]) {\n\n  vec2 vertex_height = paraboloid_fp64(source, target, segmentRatio);\n\n  vec2 position_temp[2];\n\n  vec2_mix_fp64(source, target, segmentRatio, position_temp);\n\n  position[0] = position_temp[0];\n  position[1] = position_temp[1];\n\n  if (vertex_height.x < 0.0 || (vertex_height.x == 0.0 && vertex_height.y <= 0.0)) {\n    vertex_height = vec2(0.0, 0.0);\n  }\n\n  position[2] = sqrt_fp64(vertex_height);\n  position[3] = vec2(1.0, 0.0);\n}\n\nvoid main(void) {\n  vec2 projected_source_coord[2];\n  vec2 projected_target_coord[2];\n\n  project_position_fp64(instancePositions.xy, instancePositions64Low.xy, projected_source_coord);\n  project_position_fp64(instancePositions.zw, instancePositions64Low.zw, projected_target_coord);\n\n  float segmentIndex = positions.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n\n  vec2 curr_pos_modelspace[4];\n\n  get_pos_fp64(projected_source_coord, projected_target_coord, segmentRatio,\n    curr_pos_modelspace);\n\n  vec2 next_pos_modelspace[4];\n\n  get_pos_fp64(projected_source_coord, projected_target_coord, nextSegmentRatio,\n    next_pos_modelspace);\n\n  vec4 curr_pos_clipspace = project_common_position_to_clipspace_fp64(curr_pos_modelspace);\n  vec4 next_pos_clipspace = project_common_position_to_clipspace_fp64(next_pos_modelspace);\n  float widthPixels = clamp(\n    project_size_to_pixel(instanceWidths * widthScale),\n    widthMinPixels, widthMaxPixels\n  );\n\n  vec2 offset = getExtrusionOffset(next_pos_clipspace.xy - curr_pos_clipspace.xy, positions.y, widthPixels);\n\n  gl_Position = curr_pos_clipspace + vec4(offset, 0.0, 0.0);\n\n  vec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio) / 255.;\n  vColor = vec4(color.rgb, color.a * opacity);\n  picking_setPickingColor(instancePickingColors);\n}\n"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default="#define SHADER_NAME arc-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n"},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _DEFAULT_TEXTURE_PARA,_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_get2=_interopRequireDefault(__webpack_require__(16)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_defineProperty2=_interopRequireDefault(__webpack_require__(6)),_core=__webpack_require__(15),_core2=__webpack_require__(7),_images=__webpack_require__(356),_bitmapLayerVertex=_interopRequireDefault(__webpack_require__(812)),_bitmapLayerFragment=_interopRequireDefault(__webpack_require__(813)),fp64LowPart=_core2.fp64.fp64LowPart,DEFAULT_TEXTURE_PARAMETERS=(_DEFAULT_TEXTURE_PARA={},(0,_defineProperty2.default)(_DEFAULT_TEXTURE_PARA,10241,9987),(0,_defineProperty2.default)(_DEFAULT_TEXTURE_PARA,10240,9729),(0,_defineProperty2.default)(_DEFAULT_TEXTURE_PARA,10242,33071),(0,_defineProperty2.default)(_DEFAULT_TEXTURE_PARA,10243,33071),_DEFAULT_TEXTURE_PARA),BitmapLayer=function(_Layer){function BitmapLayer(){return(0,_classCallCheck2.default)(this,BitmapLayer),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(BitmapLayer).apply(this,arguments))}return(0,_inherits2.default)(BitmapLayer,_Layer),(0,_createClass2.default)(BitmapLayer,[{key:"getShaders",value:function(){var projectModule=this.use64bitProjection()?"project64":"project32";return{vs:_bitmapLayerVertex.default,fs:_bitmapLayerFragment.default,modules:[projectModule,"picking"]}}},{key:"initializeState",value:function(){var positions=[-1,-1,0,-1,1,0,1,1,0,1,-1,0];this.getAttributeManager().add({positions:{size:3,update:this.calculatePositions,value:new Float32Array(positions)},positions64xyLow:{size:3,update:this.calculatePositions64xyLow,value:new Float32Array(positions)}}),this.setState({numInstances:1})}},{key:"updateState",value:function(_ref){var props=_ref.props,oldProps=_ref.oldProps;_ref.changeFlags;if(props.fp64!==oldProps.fp64){var gl=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(gl)}),this.getAttributeManager().invalidateAll()}props.image!==oldProps.image&&this.loadTexture();var attributeManager=this.getAttributeManager();props.bounds!==oldProps.bounds&&(this.setState({positions:this._getPositionsFromBounds(props.bounds)}),attributeManager.invalidate("positions"),attributeManager.invalidate("positions64xyLow"))}},{key:"finalizeState",value:function(){(0,_get2.default)((0,_getPrototypeOf2.default)(BitmapLayer.prototype),"finalizeState",this).call(this),this.state.bitmapTexture&&this.state.bitmapTexture.delete()}},{key:"_getPositionsFromBounds",value:function(bounds){var positions=new Array(12);if(Number.isFinite(bounds[0]))positions[0]=bounds[0],positions[1]=bounds[1],positions[2]=0,positions[3]=bounds[0],positions[4]=bounds[3],positions[5]=0,positions[6]=bounds[2],positions[7]=bounds[3],positions[8]=0,positions[9]=bounds[2],positions[10]=bounds[1],positions[11]=0;else for(var i=0;i<bounds.length;i++)positions[3*i+0]=bounds[i][0],positions[3*i+1]=bounds[i][1],positions[3*i+2]=bounds[i][2]||0;return positions}},{key:"_getModel",value:function(gl){return gl?new _core2.Model(gl,Object.assign({},this.getShaders(),{id:this.props.id,shaderCache:this.context.shaderCache,geometry:new _core2.Geometry({drawMode:6,vertexCount:4,attributes:{texCoords:new Float32Array([0,0,0,1,1,1,1,0])}}),isInstanced:!1})):null}},{key:"draw",value:function(_ref2){var uniforms=_ref2.uniforms,_this$state=this.state,bitmapTexture=_this$state.bitmapTexture,model=_this$state.model,_this$props=this.props,desaturate=_this$props.desaturate,transparentColor=_this$props.transparentColor,tintColor=_this$props.tintColor;bitmapTexture&&model&&model.setUniforms(Object.assign({},uniforms,{bitmapTexture:bitmapTexture,desaturate:desaturate,transparentColor:transparentColor,tintColor:tintColor})).draw()}},{key:"loadTexture",value:function(){var _this=this,gl=this.context.gl,image=this.props.image;this.state.bitmapTexture&&this.state.bitmapTexture.delete(),"string"==typeof image?(0,_images.loadImage)(image).then(function(data){_this.setState({bitmapTexture:new _core2.Texture2D(gl,{data:data,parameters:DEFAULT_TEXTURE_PARAMETERS})})}):image instanceof _core2.Texture2D?this.setState({bitmapTexture:image}):(image instanceof Image||image instanceof HTMLCanvasElement)&&this.setState({bitmapTexture:new _core2.Texture2D(gl,{data:image,parameters:DEFAULT_TEXTURE_PARAMETERS})})}},{key:"calculatePositions",value:function(_ref3){var value=_ref3.value,positions=this.state.positions;value.set(positions)}},{key:"calculatePositions64xyLow",value:function(attribute){var isFP64=this.use64bitPositions();(attribute.constant=!isFP64,isFP64)?attribute.value.set(this.state.positions.map(fp64LowPart)):attribute.value=new Float32Array(4)}}]),BitmapLayer}(_core.Layer);exports.default=BitmapLayer,BitmapLayer.layerName="BitmapLayer",BitmapLayer.defaultProps={image:null,bounds:{type:"array",value:[1,0,0,1],compare:!0},fp64:!1,desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HTMLImageLoader=exports.ImageBitmapLoader=exports.default=void 0;var _parseImage=__webpack_require__(357),_default={name:"Images",extension:[],parse:_parseImage.canParseImage&&_parseImage.parseImage,loadAndParse:!_parseImage.canParseImage&&_parseImage.loadImage};exports.default=_default;var ImageBitmapLoader={parse:_parseImage.parseToImageBitmap};exports.ImageBitmapLoader=ImageBitmapLoader;var HTMLImageLoader={loadAndParse:_parseImage.loadToHTMLImage};exports.HTMLImageLoader=HTMLImageLoader},function(module,exports,__webpack_require__){"use strict";(function(Buffer){var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseImageNode=function(_x,_x2){return _parseImageNode.apply(this,arguments)};var _regenerator=_interopRequireDefault(__webpack_require__(133)),_asyncToGenerator2=_interopRequireDefault(__webpack_require__(134)),_getPixels=_interopRequireDefault(__webpack_require__(782)),_util=_interopRequireDefault(__webpack_require__(783)),_getImageMetadata2=__webpack_require__(358);function _parseImageNode(){return(_parseImageNode=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee(arrayBuffer,options){var getPixelsAsync,_getImageMetadata,mimeType,buffer,ndarray;return _regenerator.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return getPixelsAsync=_util.default.promisify(_getPixels.default),_getImageMetadata=(0,_getImageMetadata2.getImageMetadata)(arrayBuffer),mimeType=_getImageMetadata.mimeType,buffer=arrayBuffer instanceof Buffer?arrayBuffer:Buffer.from(arrayBuffer),_context.next=5,getPixelsAsync(buffer,mimeType);case 5:return ndarray=_context.sent,_context.abrupt("return",{width:ndarray.shape[0],height:ndarray.shape[1],data:ndarray.data});case 7:case"end":return _context.stop()}},_callee)}))).apply(this,arguments)}}).call(this,__webpack_require__(72).Buffer)},function(module,exports,__webpack_require__){"use strict";exports.byteLength=function(b64){var lens=getLens(b64),validLen=lens[0],placeHoldersLen=lens[1];return 3*(validLen+placeHoldersLen)/4-placeHoldersLen},exports.toByteArray=function(b64){for(var tmp,lens=getLens(b64),validLen=lens[0],placeHoldersLen=lens[1],arr=new Arr(function(b64,validLen,placeHoldersLen){return 3*(validLen+placeHoldersLen)/4-placeHoldersLen}(0,validLen,placeHoldersLen)),curByte=0,len=placeHoldersLen>0?validLen-4:validLen,i=0;i<len;i+=4)tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)],arr[curByte++]=tmp>>16&255,arr[curByte++]=tmp>>8&255,arr[curByte++]=255&tmp;2===placeHoldersLen&&(tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4,arr[curByte++]=255&tmp);1===placeHoldersLen&&(tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2,arr[curByte++]=tmp>>8&255,arr[curByte++]=255&tmp);return arr},exports.fromByteArray=function(uint8){for(var tmp,len=uint8.length,extraBytes=len%3,parts=[],i=0,len2=len-extraBytes;i<len2;i+=16383)parts.push(encodeChunk(uint8,i,i+16383>len2?len2:i+16383));1===extraBytes?(tmp=uint8[len-1],parts.push(lookup[tmp>>2]+lookup[tmp<<4&63]+"==")):2===extraBytes&&(tmp=(uint8[len-2]<<8)+uint8[len-1],parts.push(lookup[tmp>>10]+lookup[tmp>>4&63]+lookup[tmp<<2&63]+"="));return parts.join("")};for(var lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;function getLens(b64){var len=b64.length;if(len%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var validLen=b64.indexOf("=");return-1===validLen&&(validLen=len),[validLen,validLen===len?0:4-validLen%4]}function encodeChunk(uint8,start,end){for(var tmp,num,output=[],i=start;i<end;i+=3)tmp=(uint8[i]<<16&16711680)+(uint8[i+1]<<8&65280)+(255&uint8[i+2]),output.push(lookup[(num=tmp)>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[63&num]);return output.join("")}revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63},function(module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=-7,i=isLE?nBytes-1:0,d=isLE?-1:1,s=buffer[offset+i];for(i+=d,e=s&(1<<-nBits)-1,s>>=-nBits,nBits+=eLen;nBits>0;e=256*e+buffer[offset+i],i+=d,nBits-=8);for(m=e&(1<<-nBits)-1,e>>=-nBits,nBits+=mLen;nBits>0;m=256*m+buffer[offset+i],i+=d,nBits-=8);if(0===e)e=1-eBias;else{if(e===eMax)return m?NaN:1/0*(s?-1:1);m+=Math.pow(2,mLen),e-=eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)},exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=23===mLen?Math.pow(2,-24)-Math.pow(2,-77):0,i=isLE?0:nBytes-1,d=isLE?1:-1,s=value<0||0===value&&1/value<0?1:0;for(value=Math.abs(value),isNaN(value)||value===1/0?(m=isNaN(value)?1:0,e=eMax):(e=Math.floor(Math.log(value)/Math.LN2),value*(c=Math.pow(2,-e))<1&&(e--,c*=2),(value+=e+eBias>=1?rt/c:rt*Math.pow(2,1-eBias))*c>=2&&(e++,c/=2),e+eBias>=eMax?(m=0,e=eMax):e+eBias>=1?(m=(value*c-1)*Math.pow(2,mLen),e+=eBias):(m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen),e=0));mLen>=8;buffer[offset+i]=255&m,i+=d,m/=256,mLen-=8);for(e=e<<mLen|m,eLen+=mLen;eLen>0;buffer[offset+i]=255&e,i+=d,e/=256,eLen-=8);buffer[offset+i-d]|=128*s}},function(module,exports){var toString={}.toString;module.exports=Array.isArray||function(arr){return"[object Array]"==toString.call(arr)}},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default={name:"Images",extensions:["jpeg"],encode:__webpack_require__(785).encodeImage,DEFAULT_OPTIONS:{type:"png"}};exports.default=_default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.encodeImage=function(image,type){if(_encodeImageNode.encodeImageNode)return(0,_encodeImageNode.encodeImageNode)(image,type);if(image instanceof HTMLCanvasElement){var _canvas=image;return _canvas.toDataURL(type)}(0,_core.assert)(image instanceof Image,"getImageData accepts image or canvas");var canvas=document.createElement("canvas");canvas.width=image.width,canvas.height=image.height,canvas.getContext("2d").drawImage(image,0,0);var data=canvas.toDataURL(type||"png").replace(/^data:image\/(png|jpg);base64,/,"");return Promise.resolve(data)};var _core=__webpack_require__(786),_encodeImageNode=__webpack_require__(808)},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(21);Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseFile=function(){return console.warn("parse() deprecated, use parse()"),_parse.parse.apply(void 0,arguments)},exports.parseFileSync=function(){return console.warn("parseSync() deprecated, use parseSync()"),_parse.parseSync.apply(void 0,arguments)},exports.loadFile=function(){return console.warn("loadFile() deprecated, use load()"),_load.load.apply(void 0,arguments)},Object.defineProperty(exports,"setPathPrefix",{enumerable:!0,get:function(){return _fileAliases.setPathPrefix}}),Object.defineProperty(exports,"getPathPrefix",{enumerable:!0,get:function(){return _fileAliases.getPathPrefix}}),Object.defineProperty(exports,"resolvePath",{enumerable:!0,get:function(){return _fileAliases.resolvePath}}),Object.defineProperty(exports,"fetchFile",{enumerable:!0,get:function(){return _fetchFile.fetchFile}}),Object.defineProperty(exports,"readFileSync",{enumerable:!0,get:function(){return _fetchFile.readFileSync}}),Object.defineProperty(exports,"createReadStream",{enumerable:!0,get:function(){return _fetchFile.createReadStream}}),Object.defineProperty(exports,"writeFile",{enumerable:!0,get:function(){return _writeFile.writeFile}}),Object.defineProperty(exports,"writeFileSync",{enumerable:!0,get:function(){return _writeFile.writeFileSync}}),Object.defineProperty(exports,"registerLoaders",{enumerable:!0,get:function(){return _registerLoaders.registerLoaders}}),Object.defineProperty(exports,"parse",{enumerable:!0,get:function(){return _parse.parse}}),Object.defineProperty(exports,"parseSync",{enumerable:!0,get:function(){return _parse.parseSync}}),Object.defineProperty(exports,"parseInBatches",{enumerable:!0,get:function(){return _parse.parseInBatches}}),Object.defineProperty(exports,"parseInBatchesSync",{enumerable:!0,get:function(){return _parse.parseInBatchesSync}}),Object.defineProperty(exports,"load",{enumerable:!0,get:function(){return _load.load}}),Object.defineProperty(exports,"loadInBatches",{enumerable:!0,get:function(){return _load.loadInBatches}}),Object.defineProperty(exports,"encode",{enumerable:!0,get:function(){return _encode.encode}}),Object.defineProperty(exports,"encodeSync",{enumerable:!0,get:function(){return _encode.encodeSync}}),Object.defineProperty(exports,"encodeInBatches",{enumerable:!0,get:function(){return _encode.encodeInBatches}}),Object.defineProperty(exports,"save",{enumerable:!0,get:function(){return _save.save}}),Object.defineProperty(exports,"saveSync",{enumerable:!0,get:function(){return _save.saveSync}}),Object.defineProperty(exports,"isPromise",{enumerable:!0,get:function(){return _isType.isPromise}}),Object.defineProperty(exports,"isIterable",{enumerable:!0,get:function(){return _isType.isIterable}}),Object.defineProperty(exports,"isAsyncIterable",{enumerable:!0,get:function(){return _isType.isAsyncIterable}}),Object.defineProperty(exports,"isIterator",{enumerable:!0,get:function(){return _isType.isIterator}}),Object.defineProperty(exports,"isFetchResponse",{enumerable:!0,get:function(){return _isType.isFetchResponse}}),Object.defineProperty(exports,"isReadableStream",{enumerable:!0,get:function(){return _isType.isReadableStream}}),Object.defineProperty(exports,"isWritableStream",{enumerable:!0,get:function(){return _isType.isWritableStream}}),Object.defineProperty(exports,"isArrayBuffer",{enumerable:!0,get:function(){return _binaryUtils.isArrayBuffer}}),Object.defineProperty(exports,"isBlob",{enumerable:!0,get:function(){return _binaryUtils.isBlob}}),Object.defineProperty(exports,"toArrayBuffer",{enumerable:!0,get:function(){return _binaryUtils.toArrayBuffer}}),Object.defineProperty(exports,"blobToArrayBuffer",{enumerable:!0,get:function(){return _binaryUtils.blobToArrayBuffer}}),Object.defineProperty(exports,"toDataView",{enumerable:!0,get:function(){return _binaryUtils.toDataView}}),Object.defineProperty(exports,"padTo4Bytes",{enumerable:!0,get:function(){return _memoryCopyUtils.padTo4Bytes}}),Object.defineProperty(exports,"copyToArray",{enumerable:!0,get:function(){return _memoryCopyUtils.copyToArray}}),Object.defineProperty(exports,"copyArrayBuffer",{enumerable:!0,get:function(){return _memoryCopyUtils.copyArrayBuffer}}),Object.defineProperty(exports,"flattenToTypedArray",{enumerable:!0,get:function(){return _flattenToTypedArray.flattenToTypedArray}}),Object.defineProperty(exports,"TextDecoder",{enumerable:!0,get:function(){return _textEncoding.TextDecoder}}),Object.defineProperty(exports,"TextEncoder",{enumerable:!0,get:function(){return _textEncoding.TextEncoder}}),Object.defineProperty(exports,"getStreamIterator",{enumerable:!0,get:function(){return _streamUtils.getStreamIterator}}),Object.defineProperty(exports,"forEach",{enumerable:!0,get:function(){return _asyncIteratorUtils.forEach}}),Object.defineProperty(exports,"concatenateAsyncIterator",{enumerable:!0,get:function(){return _asyncIteratorUtils.concatenateAsyncIterator}}),Object.defineProperty(exports,"lineAsyncIterator",{enumerable:!0,get:function(){return _asyncIteratorUtils.lineAsyncIterator}}),Object.defineProperty(exports,"textDecoderAsyncIterator",{enumerable:!0,get:function(){return _asyncIteratorUtils.textDecoderAsyncIterator}}),Object.defineProperty(exports,"numberedLineAsyncIterator",{enumerable:!0,get:function(){return _asyncIteratorUtils.numberedLineAsyncIterator}}),Object.defineProperty(exports,"createWorker",{enumerable:!0,get:function(){return _createWorker.default}}),Object.defineProperty(exports,"isBrowser",{enumerable:!0,get:function(){return _globals.isBrowser}}),Object.defineProperty(exports,"self",{enumerable:!0,get:function(){return _globals.self}}),Object.defineProperty(exports,"window",{enumerable:!0,get:function(){return _globals.window}}),Object.defineProperty(exports,"global",{enumerable:!0,get:function(){return _globals.global}}),Object.defineProperty(exports,"document",{enumerable:!0,get:function(){return _globals.document}}),Object.defineProperty(exports,"assert",{enumerable:!0,get:function(){return _assert.default}}),Object.defineProperty(exports,"_getMeshSize",{enumerable:!0,get:function(){return _meshUtils.getMeshSize}});var _fileAliases=__webpack_require__(360),_fetchFile=__webpack_require__(361),_writeFile=__webpack_require__(371),_registerLoaders=__webpack_require__(219),_parse=__webpack_require__(372),_load=__webpack_require__(800),_encode=__webpack_require__(375),_save=__webpack_require__(801),_isType=__webpack_require__(374),_binaryUtils=__webpack_require__(216),_memoryCopyUtils=__webpack_require__(218),_flattenToTypedArray=__webpack_require__(802),_textEncoding=__webpack_require__(116),_streamUtils=__webpack_require__(217),_asyncIteratorUtils=__webpack_require__(803),_createWorker=_interopRequireDefault(__webpack_require__(805)),_globals=__webpack_require__(144),_assert=_interopRequireDefault(__webpack_require__(73)),_meshUtils=__webpack_require__(807)},function(module,exports,__webpack_require__){var runtime=function(exports){"use strict";var undefined,Op=Object.prototype,hasOwn=Op.hasOwnProperty,$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return generator._invoke=function(innerFn,self,context){var state=GenStateSuspendedStart;return function(method,arg){if(state===GenStateExecuting)throw new Error("Generator is already running");if(state===GenStateCompleted){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if(state===GenStateSuspendedStart)throw state=GenStateCompleted,context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state=GenStateExecuting;var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?GenStateCompleted:GenStateSuspendedYield,record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state=GenStateCompleted,context.method="throw",context.arg=record.arg)}}}(innerFn,self,context),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var GenStateSuspendedStart="suspendedStart",GenStateSuspendedYield="suspendedYield",GenStateExecuting="executing",GenStateCompleted="completed",ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};IteratorPrototype[iteratorSymbol]=function(){return this};var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach(function(method){prototype[method]=function(arg){return this._invoke(method,arg)}})}function AsyncIterator(generator){var previousPromise;this._invoke=function(method,arg){function callInvokeWithMethodAndArg(){return new Promise(function(resolve,reject){!function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?Promise.resolve(value.__await).then(function(value){invoke("next",value,resolve,reject)},function(err){invoke("throw",err,resolve,reject)}):Promise.resolve(value).then(function(unwrapped){result.value=unwrapped,resolve(result)},function(error){return invoke("throw",error,resolve,reject)})}reject(record.arg)}(method,arg,resolve,reject)})}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(method===undefined){if(context.delegate=null,"throw"===context.method){if(delegate.iterator.return&&(context.method="return",context.arg=undefined,maybeInvokeDelegate(delegate,context),"throw"===context.method))return ContinueSentinel;context.method="throw",context.arg=new TypeError("The iterator does not provide a 'throw' method")}return ContinueSentinel}var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=undefined),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=undefined,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:undefined,done:!0}}return GeneratorFunction.prototype=Gp.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunctionPrototype[toStringTagSymbol]=GeneratorFunction.displayName="GeneratorFunction",exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,toStringTagSymbol in genFun||(genFun[toStringTagSymbol]="GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),AsyncIterator.prototype[asyncIteratorSymbol]=function(){return this},exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList){var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList));return exports.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next()})},defineIteratorMethods(Gp),Gp[toStringTagSymbol]="Generator",Gp[iteratorSymbol]=function(){return this},Gp.toString=function(){return"[object Generator]"},exports.keys=function(object){var keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=undefined)},stop:function(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=undefined),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=undefined),ContinueSentinel}},exports}(module.exports);try{regeneratorRuntime=runtime}catch(accidentalStrictMode){Function("r","regeneratorRuntime = r")(runtime)}},function(module,exports,__webpack_require__){"use strict";(function(Buffer){var _interopRequireDefault=__webpack_require__(21);Object.defineProperty(exports,"__esModule",{value:!0}),exports.fetchFile=function(_x,_x2){return _fetchFile.apply(this,arguments)},exports.readFileSync=function(url){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(options=getReadFileOptions(options),isDataURL(url))return(0,_decodeDataUri.default)(url);if(!isNode)return null;var buffer=_fs.default.readFileSync(url,options,function(){});return buffer instanceof Buffer?(0,_binaryUtils.toArrayBuffer)(buffer):buffer},exports.createReadStream=createReadStream;var _objectSpread2=_interopRequireDefault(__webpack_require__(363)),_regenerator=_interopRequireDefault(__webpack_require__(51)),_asyncToGenerator2=_interopRequireDefault(__webpack_require__(52)),_classCallCheck2=_interopRequireDefault(__webpack_require__(364)),_createClass2=_interopRequireDefault(__webpack_require__(365)),_fs=_interopRequireDefault(__webpack_require__(366)),_http=_interopRequireDefault(__webpack_require__(790)),_https=_interopRequireDefault(__webpack_require__(791)),_util=_interopRequireDefault(__webpack_require__(367)),_binaryUtils=__webpack_require__(216),_textEncoding=__webpack_require__(116),_streamUtils=__webpack_require__(217),_decodeDataUri=_interopRequireDefault(__webpack_require__(793)),DEFAULT_OPTIONS={dataType:"arrayBuffer"},isNode=Boolean(_fs.default&&_fs.default.readFile),isDataURL=function(url){return url.startsWith("data:")},isRequestURL=function(url){return url.startsWith("http:")||url.startsWith("https:")},NodeHeaders=function(){function NodeHeaders(response){(0,_classCallCheck2.default)(this,NodeHeaders),this.reponse=response}return(0,_createClass2.default)(NodeHeaders,[{key:"get",value:function(header){if(this.response.httpResponse)return this.response.httpResponse.getHeaders()[header];switch(header){case"Content-Length":return this._getContentLength()}}},{key:"_getContentLength",value:function(){return this._contentLength}}]),NodeHeaders}(),NodeFetchResponse=function(){function NodeFetchResponse(url,options){(0,_classCallCheck2.default)(this,NodeFetchResponse),this.url=url,this.options=options,this.bodyUsed=!1,this._headers=null}return(0,_createClass2.default)(NodeFetchResponse,[{key:"arrayBuffer",value:function(){var _arrayBuffer=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee(){return _regenerator.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return this.bodyUsed=!0,_context.abrupt("return",readFile(this.url,this.options));case 2:case"end":return _context.stop()}},_callee,this)}));return function(){return _arrayBuffer.apply(this,arguments)}}()},{key:"text",value:function(){var _text=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee2(){var arrayBuffer,textDecoder;return _regenerator.default.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,this.arrayBuffer();case 2:return arrayBuffer=_context2.sent,textDecoder=new _textEncoding.TextDecoder,_context2.abrupt("return",textDecoder.decode(arrayBuffer));case 5:case"end":return _context2.stop()}},_callee2,this)}));return function(){return _text.apply(this,arguments)}}()},{key:"json",value:function(){var _json=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee3(){var text;return _regenerator.default.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,this.text();case 2:return text=_context3.sent,_context3.abrupt("return",JSON.parse(text));case 4:case"end":return _context3.stop()}},_callee3,this)}));return function(){return _json.apply(this,arguments)}}()},{key:"_getHeaders",value:function(){return isRequestURL(this.url)?new NodeHeaders(this):isDataURL(this.url)?{"Content-Length":this.url.length}:isRequestURL(this.repsonse.url)?{}:{"Content-Length":_fs.default.statSync(this.response.url).size}}},{key:"headers",get:function(){this._headers=this._headers||this._getHeaders()}},{key:"body",get:function(){var url=this.url,options=this.options;return this.bodyUsed=!0,createReadStream(url,options)}}]),NodeFetchResponse}();function _fetchFile(){return(_fetchFile=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee4(url,options){return _regenerator.default.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.abrupt("return",new NodeFetchResponse(url,options));case 1:case"end":return _context4.stop()}},_callee4)}))).apply(this,arguments)}function readFile(_x3){return _readFile.apply(this,arguments)}function _readFile(){return(_readFile=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee5(url){var options,readFileAsync,buffer,_args5=arguments;return _regenerator.default.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(options=getReadFileOptions(options=_args5.length>1&&void 0!==_args5[1]?_args5[1]:{}),!isDataURL(url)){_context5.next=4;break}return _context5.abrupt("return",Promise.resolve((0,_decodeDataUri.default)(url)));case 4:if(!isRequestURL(url)){_context5.next=6;break}return _context5.abrupt("return",new Promise(function(resolve,reject){options=(0,_objectSpread2.default)({},new URL(url),options),(url.startsWith("https:")?_https.default.request:_http.default.request)(url,function(response){return(0,_streamUtils.concatenateReadStream)(response).then(resolve,reject)})}));case 6:return readFileAsync=_util.default.promisify(_fs.default.readFile),_context5.next=9,readFileAsync(url,options);case 9:return buffer=_context5.sent,_context5.abrupt("return",buffer instanceof Buffer?(0,_binaryUtils.toArrayBuffer)(buffer):buffer);case 11:case"end":return _context5.stop()}},_callee5)}))).apply(this,arguments)}function createReadStream(_x4,_x5){return _createReadStream.apply(this,arguments)}function _createReadStream(){return(_createReadStream=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee6(url,options){return _regenerator.default.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(!isDataURL(url)){_context6.next=2;break}return _context6.abrupt("return",(0,_decodeDataUri.default)(url));case 2:if(isRequestURL(url)){_context6.next=4;break}return _context6.abrupt("return",_fs.default.createReadStream(url,options));case 4:return _context6.abrupt("return",new Promise(function(resolve,reject){options=(0,_objectSpread2.default)({},new URL(url),options),(url.startsWith("https:")?_https.default.request:_http.default.request)(url,function(response){return resolve(response)})}));case 5:case"end":return _context6.stop()}},_callee6)}))).apply(this,arguments)}function getReadFileOptions(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(options=Object.assign({},DEFAULT_OPTIONS,options)).responseType=options.responseType||options.dataType,_fs.default&&(options.encoding=options.encoding||("text"===options.dataType?"utf8":null)),options}}).call(this,__webpack_require__(72).Buffer)},function(module,exports){module.exports=function(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}},,,function(module,exports,__webpack_require__){var AwaitValue=__webpack_require__(369);function AsyncGenerator(gen){var front,back;function resume(key,arg){try{var result=gen[key](arg),value=result.value,wrappedAwait=value instanceof AwaitValue;Promise.resolve(wrappedAwait?value.wrapped:value).then(function(arg){wrappedAwait?resume("next",arg):settle(result.done?"return":"normal",arg)},function(err){resume("throw",err)})}catch(err){settle("throw",err)}}function settle(type,value){switch(type){case"return":front.resolve({value:value,done:!0});break;case"throw":front.reject(value);break;default:front.resolve({value:value,done:!1})}(front=front.next)?resume(front.key,front.arg):back=null}this._invoke=function(key,arg){return new Promise(function(resolve,reject){var request={key:key,arg:arg,resolve:resolve,reject:reject,next:null};back?back=back.next=request:(front=back=request,resume(key,arg))})},"function"!=typeof gen.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(AsyncGenerator.prototype[Symbol.asyncIterator]=function(){return this}),AsyncGenerator.prototype.next=function(arg){return this._invoke("next",arg)},AsyncGenerator.prototype.throw=function(arg){return this._invoke("throw",arg)},AsyncGenerator.prototype.return=function(arg){return this._invoke("return",arg)},module.exports=AsyncGenerator},function(module,exports,__webpack_require__){"use strict";(function(Buffer){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(uri){var buffer,mimeType,dataIndex=uri.indexOf(",");";base64"===uri.slice(dataIndex-7,dataIndex)?(buffer=new Buffer(uri.slice(dataIndex+1),"base64"),mimeType=uri.slice(5,dataIndex-7).trim()):(buffer=new Buffer(decodeURIComponent(uri.slice(dataIndex+1))),mimeType=uri.slice(5,dataIndex).trim());mimeType?";"===mimeType[0]&&(mimeType="text/plain".concat(mimeType)):mimeType="text/plain;charset=US-ASCII";return{buffer:buffer,mimeType:mimeType}}}).call(this,__webpack_require__(72).Buffer)},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(21);Object.defineProperty(exports,"__esModule",{value:!0}),exports.fetchFile=function(_x,_x2){return _fetchFile.apply(this,arguments)},exports.readFileSync=function(uri){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};options=function(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(options=Object.assign({},DEFAULT_OPTIONS,options)).responseType=options.responseType||options.dataType,options}(options),isDataURL(uri);options.nothrow||(0,_assert.default)(!1);return null},exports.createReadStream=function(_x3,_x4){return _createReadStream.apply(this,arguments)};var _regenerator=_interopRequireDefault(__webpack_require__(51)),_asyncToGenerator2=_interopRequireDefault(__webpack_require__(52)),_assert=_interopRequireDefault(__webpack_require__(73)),DEFAULT_OPTIONS={dataType:"arrayBuffer",nothrow:!0},isDataURL=function(url){return url.startsWith("data:")};function _fetchFile(){return(_fetchFile=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee(url,options){return _regenerator.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,fetch(url,options);case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}},_callee)}))).apply(this,arguments)}function _createReadStream(){return(_createReadStream=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee2(url,options){return _regenerator.default.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",fetch(url,options).then(function(res){return res.body}));case 1:case"end":return _context2.stop()}},_callee2)}))).apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";(function(Buffer){var _interopRequireDefault=__webpack_require__(21);Object.defineProperty(exports,"__esModule",{value:!0}),exports.writeFile=function(filePath,arrayBufferOrString){return(0,_util.promisify)(_fs.default.writeFile)("".concat(filePath),toBuffer(arrayBufferOrString),{flag:"w"})},exports.writeFileSync=function(filePath,arrayBufferOrString){return _fs.default.writeFileSync("".concat(filePath),toBuffer(arrayBufferOrString),{flag:"w"})};var _fs=_interopRequireDefault(__webpack_require__(366)),_util=__webpack_require__(367),_assert=_interopRequireDefault(__webpack_require__(73));function toBuffer(binaryData){if(ArrayBuffer.isView(binaryData)&&(binaryData=binaryData.buffer),void 0!==Buffer&&binaryData instanceof ArrayBuffer){for(var buffer=new Buffer(binaryData.byteLength),view=new Uint8Array(binaryData),i=0;i<buffer.length;++i)buffer[i]=view[i];return buffer}return(0,_assert.default)(!1)}}).call(this,__webpack_require__(72).Buffer)},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(21);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(364)),_createClass2=_interopRequireDefault(__webpack_require__(365)),NullLog=function(){function NullLog(){(0,_classCallCheck2.default)(this,NullLog)}return(0,_createClass2.default)(NullLog,[{key:"log",value:function(){}},{key:"info",value:function(){}},{key:"warn",value:function(){}},{key:"error",value:function(){}}]),NullLog}();exports.default=NullLog},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(21);Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseWithLoader=function(_x,_x2){return _parseWithLoader.apply(this,arguments)},exports.parseWithLoaderSync=function(data,loader){var options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},url=arguments.length>3?arguments[3]:void 0;if(data=(0,_getData.getArrayBufferOrStringFromDataSync)(data,loader),loader.parseTextSync&&"string"==typeof data)return loader.parseTextSync(data,options,url,loader);if(loader.parseSync)return loader.parseSync(data,options,url,loader);return(0,_assert.default)(!1)},exports.parseWithLoaderInBatches=function(_x3,_x4){return _parseWithLoaderInBatches.apply(this,arguments)},exports.parseWithLoaderInBatchesSync=function(_x5,_x6){return _parseWithLoaderInBatchesSync.apply(this,arguments)};var _regenerator=_interopRequireDefault(__webpack_require__(51)),_asyncToGenerator2=_interopRequireDefault(__webpack_require__(52)),_assert=_interopRequireDefault(__webpack_require__(73)),_parseWithWorker=_interopRequireDefault(__webpack_require__(798)),_getData=__webpack_require__(799);function _parseWithLoader(){return(_parseWithLoader=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee(data,loader){var options,url,_args=arguments;return _regenerator.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return options=_args.length>2&&void 0!==_args[2]?_args[2]:{},url=(url=_args.length>3?_args[3]:void 0)||(0,_getData.getUrlFromData)(data),_context.next=5,(0,_getData.getArrayBufferOrStringFromData)(data,loader);case 5:if(data=_context.sent,!loader.parseTextSync||"string"!=typeof data){_context.next=9;break}return options.dataType="text",_context.abrupt("return",loader.parseTextSync(data,options,url,loader));case 9:if(!loader.parseSync){_context.next=11;break}return _context.abrupt("return",loader.parseSync(data,options,url,loader));case 11:if(!loader.parse){_context.next=15;break}return _context.next=14,loader.parse(data,options,url,loader);case 14:return _context.abrupt("return",_context.sent);case 15:if(!loader.worker){_context.next=19;break}return _context.next=18,(0,_parseWithWorker.default)(loader.worker,data,options);case 18:return _context.abrupt("return",_context.sent);case 19:return _context.abrupt("return",(0,_assert.default)(!1));case 20:case"end":return _context.stop()}},_callee)}))).apply(this,arguments)}function _parseWithLoaderInBatches(){return(_parseWithLoaderInBatches=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee2(data,loader){var options,url,inputIterator,outputIterator,_args2=arguments;return _regenerator.default.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(options=_args2.length>2&&void 0!==_args2[2]?_args2[2]:{},url=_args2.length>3?_args2[3]:void 0,!loader.parseInBatches){_context2.next=8;break}return _context2.next=5,(0,_getData.getAsyncIteratorFromData)(data);case 5:return inputIterator=_context2.sent,outputIterator=loader.parseInBatches(inputIterator,options,url,loader),_context2.abrupt("return",outputIterator);case 8:return _context2.abrupt("return",null);case 9:case"end":return _context2.stop()}},_callee2)}))).apply(this,arguments)}function _parseWithLoaderInBatchesSync(){return(_parseWithLoaderInBatchesSync=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee3(data,loader){var options,url,inputIterator,outputIterator,_args3=arguments;return _regenerator.default.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(options=_args3.length>2&&void 0!==_args3[2]?_args3[2]:{},url=_args3.length>3?_args3[3]:void 0,!loader.parseInBatchesSync){_context3.next=6;break}return inputIterator=(0,_getData.getIteratorFromData)(data),outputIterator=loader.parseInBatchesSync(inputIterator,options,url,loader,url),_context3.abrupt("return",outputIterator);case 6:return _context3.abrupt("return",(0,_assert.default)(!1));case 7:case"end":return _context3.stop()}},_callee3)}))).apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(workerSource,data,options){var worker=function(workerSource){var workerURL=workerCache.get(workerSource);if(!workerURL){var blob=new Blob([workerSource],{type:"application/javascript"});workerURL=URL.createObjectURL(blob),workerCache.set(workerSource,workerURL)}return new Worker(workerURL)}(workerSource);options=function(options){null!==(options=Object.assign({},options)).log&&delete options.log;return options}(options);var parse=function(rawData,opts){return new Promise(function(resolve,reject){worker.onmessage=function(evt){switch(evt.data.type){case"done":resolve(evt.data.result),worker.terminate();break;case"error":reject(new Error(evt.data.message))}};var arraybuffer=(0,_binaryUtils.toArrayBuffer)(rawData);worker.postMessage({arraybuffer:arraybuffer,opts:opts},[arraybuffer])})};return data?parse(data,options):parse};var _binaryUtils=__webpack_require__(216),workerCache=new Map},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(21);Object.defineProperty(exports,"__esModule",{value:!0}),exports.getUrlFromData=function(data){return(0,_isType.isFetchResponse)(data)?data.url:null},exports.getSizeFromData=function(data){return(0,_isType.isFetchResponse)(data)?data.headers.get("Content-Length"):null},exports.getArrayBufferOrStringFromDataSync=getArrayBufferOrStringFromDataSync,exports.getArrayBufferOrStringFromData=function(_x,_x2){return _getArrayBufferOrStringFromData.apply(this,arguments)},exports.getAsyncIteratorFromData=function(_x3,_x4){return _getAsyncIteratorFromData.apply(this,arguments)},exports.getIteratorFromData=getIteratorFromData;var _regenerator=_interopRequireDefault(__webpack_require__(51)),_asyncToGenerator2=_interopRequireDefault(__webpack_require__(52)),_isType=__webpack_require__(374),_streamUtils=__webpack_require__(217),_textEncoding=__webpack_require__(116),ERR_DATA="Cannot convert supplied data type";function getArrayBufferOrStringFromDataSync(data,loader){if(loader.text&&"string"==typeof data)return data;if(data instanceof ArrayBuffer||ArrayBuffer.isView(data)){var arrayBuffer=data.buffer||data;return loader.text&&!loader.binary?new _textEncoding.TextDecoder("utf8").decode(arrayBuffer):arrayBuffer}throw new Error(ERR_DATA)}function _getArrayBufferOrStringFromData(){return(_getArrayBufferOrStringFromData=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee(data,loader){var isArrayBuffer;return _regenerator.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,data;case 2:if(data=_context.sent,isArrayBuffer=data instanceof ArrayBuffer||ArrayBuffer.isView(data),"string"!=typeof data&&!isArrayBuffer){_context.next=6;break}return _context.abrupt("return",getArrayBufferOrStringFromDataSync(data,loader));case 6:if(!(0,_isType.isFetchResponse)(data)){_context.next=15;break}if(!loader.binary){_context.next=13;break}return _context.next=10,data.arrayBuffer();case 10:_context.t0=_context.sent,_context.next=14;break;case 13:_context.t0=data.text();case 14:return _context.abrupt("return",_context.t0);case 15:throw new Error(ERR_DATA);case 16:case"end":return _context.stop()}},_callee)}))).apply(this,arguments)}function _getAsyncIteratorFromData(){return(_getAsyncIteratorFromData=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee2(data,loader){return _regenerator.default.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!(0,_isType.isIterator)(data)){_context2.next=2;break}return _context2.abrupt("return",data);case 2:if(!(0,_isType.isFetchResponse)(data)){_context2.next=4;break}return _context2.abrupt("return",(0,_streamUtils.getStreamIterator)(data.body));case 4:if(!(0,_isType.isReadableStream)(data)){_context2.next=6;break}return _context2.abrupt("return",(0,_streamUtils.getStreamIterator)(data));case 6:if(!(0,_isType.isAsyncIterable)(data)){_context2.next=8;break}return _context2.abrupt("return",data[Symbol.asyncIterator]());case 8:return _context2.abrupt("return",getIteratorFromData(data,loader));case 9:case"end":return _context2.stop()}},_callee2)}))).apply(this,arguments)}function getIteratorFromData(_x5,_x6){return _getIteratorFromData.apply(this,arguments)}function _getIteratorFromData(){return(_getIteratorFromData=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee3(data,loader){return _regenerator.default.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(!(data instanceof ArrayBuffer||ArrayBuffer.isView(data))){_context4.next=2;break}return _context4.abrupt("return",_regenerator.default.mark(function oneChunk(){return _regenerator.default.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,data.buffer||data;case 2:case"end":return _context3.stop()}},oneChunk)})());case 2:if(!(0,_isType.isIterator)(data)){_context4.next=4;break}return _context4.abrupt("return",data);case 4:if(!(0,_isType.isIterable)(data)){_context4.next=6;break}return _context4.abrupt("return",data[Symbol.iterator]());case 6:throw new Error(ERR_DATA);case 7:case"end":return _context4.stop()}},_callee3)}))).apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(21);Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadInBatches=function(_x,_x2,_x3){return _loadInBatches.apply(this,arguments)},exports.load=function(_x4,_x5,_x6){return _load.apply(this,arguments)};var _regenerator=_interopRequireDefault(__webpack_require__(51)),_asyncToGenerator2=_interopRequireDefault(__webpack_require__(52)),_fetchFile=__webpack_require__(361),_normalizeLoader=__webpack_require__(145),_autoDetectLoader=__webpack_require__(373),_parse=__webpack_require__(372),_registerLoaders=__webpack_require__(219);function _loadInBatches(){return(_loadInBatches=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee(url,loaders,options){var response;return _regenerator.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,_fetchFile.fetchFile)(url,options);case 2:return response=_context.sent,_context.abrupt("return",(0,_parse.parseInBatches)(response,loaders,options,url));case 4:case"end":return _context.stop()}},_callee)}))).apply(this,arguments)}function _load(){return(_load=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee2(url,loaders,options){var loader,response;return _regenerator.default.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(Array.isArray(loaders)||(0,_normalizeLoader.isLoaderObject)(loaders)||(options=loaders,loaders=null),loaders=loaders||(0,_registerLoaders.getRegisteredLoaders)(),!(loader=Array.isArray(loaders)?(0,_autoDetectLoader.autoDetectLoader)(url,null,loaders):loaders)||!loader.loadAndParse){_context2.next=7;break}return _context2.next=6,loader.loadAndParse(url,options);case 6:return _context2.abrupt("return",_context2.sent);case 7:return _context2.next=9,(0,_fetchFile.fetchFile)(url,options);case 9:return response=_context2.sent,_context2.abrupt("return",(0,_parse.parse)(response,loaders,options,url));case 11:case"end":return _context2.stop()}},_callee2)}))).apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.save=function(data,url,writer){var encodedData=(0,_encode.encode)(data,writer,url);return(0,_writeFile.writeFile)(url,encodedData)},exports.saveSync=function(data,url,writer){var encodedData=(0,_encode.encodeSync)(data,writer,url);return(0,_writeFile.writeFileSync)(url,encodedData)};var _encode=__webpack_require__(375),_writeFile=__webpack_require__(371)},function(module,exports,__webpack_require__){"use strict";function countVertices(nestedArray){for(var dimensions=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,nestedCount=0,localCount=0,index=-1;++index<nestedArray.length;){var value=nestedArray[index];Array.isArray(value)||ArrayBuffer.isView(value)?nestedCount+=countVertices(value):localCount++}return nestedCount+(0===nestedCount&&localCount<dimensions?dimensions:localCount)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.flattenToTypedArray=function(nestedArray){var ArrayType=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Float32Array;if(0===nestedArray.length)return new Float32Array(0);if(!function checkVertices(nestedArray){var predicate=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.isFinite;var index=-1;for(;++index<nestedArray.length;){var value=nestedArray[index];if(Array.isArray(value)||ArrayBuffer.isView(value)){if(!checkVertices(value,predicate))return!1}else if(!predicate(value))return!1}return!0}(nestedArray))return null;var count=countVertices(nestedArray),typedArray=new ArrayType(count);return function(nestedArray,result){var dimensions=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;!function flattenVerticesInPlaceRecursive(nestedArray,result,dimensions,insert){for(var index=-1,vertexLength=0;++index<nestedArray.length;){var value=nestedArray[index];Array.isArray(value)||ArrayBuffer.isView(value)?insert=flattenVerticesInPlaceRecursive(value,result,dimensions,insert):vertexLength<dimensions&&(result[insert++]=value,vertexLength++)}return vertexLength>0&&vertexLength<dimensions&&(result[insert++]=0),insert}(nestedArray,result,dimensions,0)}(nestedArray,typedArray),typedArray},exports.flatten=function(array){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref$filter=_ref.filter,filter=void 0===_ref$filter?function(){return!0}:_ref$filter,_ref$map=_ref.map,map=void 0===_ref$map?function(x){return x}:_ref$map,_ref$result=_ref.result,result=void 0===_ref$result?[]:_ref$result;if(!Array.isArray(array))return filter(array)?[map(array)]:[];return function flattenArray(array,filter,map,result){var index=-1;for(;++index<array.length;){var value=array[index];Array.isArray(value)?flattenArray(value,filter,map,result):filter(value)&&result.push(map(value))}return result}(array,filter,map,result)},exports.countVertices=countVertices,exports.flattenVertices=function flattenVertices(nestedArray){var _ref2=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref2$result=_ref2.result,result=void 0===_ref2$result?[]:_ref2$result,_ref2$dimensions=_ref2.dimensions,dimensions=void 0===_ref2$dimensions?3:_ref2$dimensions;var index=-1;var vertexLength=0;for(;++index<nestedArray.length;){var value=nestedArray[index];Array.isArray(value)||ArrayBuffer.isView(value)?flattenVertices(value,{result:result,dimensions:dimensions}):vertexLength<dimensions&&(result.push(value),vertexLength++)}vertexLength>0&&vertexLength<dimensions&&result.push(0);return result}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(21);Object.defineProperty(exports,"__esModule",{value:!0}),exports.forEach=function(_x7,_x8){return _forEach.apply(this,arguments)},exports.concatenateAsyncIterator=function(_x9){return _concatenateAsyncIterator.apply(this,arguments)},exports.textDecoderAsyncIterator=function(_x,_x2){return _textDecoderAsyncIterator.apply(this,arguments)},exports.textEncoderAsyncIterator=function(_x3,_x4){return _textEncoderAsyncIterator.apply(this,arguments)},exports.lineAsyncIterator=function(_x5){return _lineAsyncIterator.apply(this,arguments)},exports.numberedLineAsyncIterator=function(_x6){return _numberedLineAsyncIterator.apply(this,arguments)};var _regenerator=_interopRequireDefault(__webpack_require__(51)),_asyncToGenerator2=_interopRequireDefault(__webpack_require__(52)),_awaitAsyncGenerator2=_interopRequireDefault(__webpack_require__(368)),_wrapAsyncGenerator2=_interopRequireDefault(__webpack_require__(370)),_asyncIterator2=_interopRequireDefault(__webpack_require__(804)),_memoryCopyUtils=__webpack_require__(218),_textEncoding=__webpack_require__(116);function _forEach(){return(_forEach=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee5(iterator,visitor){var _ref,done,value;return _regenerator.default.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.next=3,iterator.next();case 3:if(_ref=_context5.sent,done=_ref.done,value=_ref.value,!done){_context5.next=9;break}return iterator.return(),_context5.abrupt("return");case 9:if(!visitor(value)){_context5.next=12;break}return _context5.abrupt("return");case 12:_context5.next=0;break;case 14:case"end":return _context5.stop()}},_callee5)}))).apply(this,arguments)}function _concatenateAsyncIterator(){return(_concatenateAsyncIterator=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee6(asyncIterator){var arrayBuffer,string,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,_value,chunk;return _regenerator.default.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:arrayBuffer=new ArrayBuffer,string="",_iteratorNormalCompletion=!0,_didIteratorError=!1,_context6.prev=4,_iterator=(0,_asyncIterator2.default)(asyncIterator);case 6:return _context6.next=8,_iterator.next();case 8:return _step=_context6.sent,_iteratorNormalCompletion=_step.done,_context6.next=12,_step.value;case 12:if(_value=_context6.sent,_iteratorNormalCompletion){_context6.next=19;break}"string"==typeof(chunk=_value)?string+=chunk:arrayBuffer=(0,_memoryCopyUtils.concatenateArrayBuffers)(arrayBuffer,chunk);case 16:_iteratorNormalCompletion=!0,_context6.next=6;break;case 19:_context6.next=25;break;case 21:_context6.prev=21,_context6.t0=_context6.catch(4),_didIteratorError=!0,_iteratorError=_context6.t0;case 25:if(_context6.prev=25,_context6.prev=26,_iteratorNormalCompletion||null==_iterator.return){_context6.next=30;break}return _context6.next=30,_iterator.return();case 30:if(_context6.prev=30,!_didIteratorError){_context6.next=33;break}throw _iteratorError;case 33:return _context6.finish(30);case 34:return _context6.finish(25);case 35:return _context6.abrupt("return",arrayBuffer||string);case 36:case"end":return _context6.stop()}},_callee6,null,[[4,21,25,35],[26,,30,34]])}))).apply(this,arguments)}function _textDecoderAsyncIterator(){return(_textDecoderAsyncIterator=(0,_wrapAsyncGenerator2.default)(_regenerator.default.mark(function _callee(arrayBufferIterator,options){var textDecoder,_iteratorNormalCompletion2,_didIteratorError2,_iteratorError2,_iterator2,_step2,_value2,arrayBuffer;return _regenerator.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:textDecoder=new _textEncoding.TextDecoder(options),_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_context.prev=3,_iterator2=(0,_asyncIterator2.default)(arrayBufferIterator);case 5:return _context.next=7,(0,_awaitAsyncGenerator2.default)(_iterator2.next());case 7:return _step2=_context.sent,_iteratorNormalCompletion2=_step2.done,_context.next=11,(0,_awaitAsyncGenerator2.default)(_step2.value);case 11:if(_value2=_context.sent,_iteratorNormalCompletion2){_context.next=19;break}return arrayBuffer=_value2,_context.next=16,"string"==typeof arrayBuffer?arrayBuffer:textDecoder.decode(arrayBuffer,{stream:!0});case 16:_iteratorNormalCompletion2=!0,_context.next=5;break;case 19:_context.next=25;break;case 21:_context.prev=21,_context.t0=_context.catch(3),_didIteratorError2=!0,_iteratorError2=_context.t0;case 25:if(_context.prev=25,_context.prev=26,_iteratorNormalCompletion2||null==_iterator2.return){_context.next=30;break}return _context.next=30,(0,_awaitAsyncGenerator2.default)(_iterator2.return());case 30:if(_context.prev=30,!_didIteratorError2){_context.next=33;break}throw _iteratorError2;case 33:return _context.finish(30);case 34:return _context.finish(25);case 35:case"end":return _context.stop()}},_callee,null,[[3,21,25,35],[26,,30,34]])}))).apply(this,arguments)}function _textEncoderAsyncIterator(){return(_textEncoderAsyncIterator=(0,_wrapAsyncGenerator2.default)(_regenerator.default.mark(function _callee2(textIterator,options){var textEncoder,_iteratorNormalCompletion3,_didIteratorError3,_iteratorError3,_iterator3,_step3,_value3,text;return _regenerator.default.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:textEncoder=new _textEncoding.TextEncoder,_iteratorNormalCompletion3=!0,_didIteratorError3=!1,_context2.prev=3,_iterator3=(0,_asyncIterator2.default)(textIterator);case 5:return _context2.next=7,(0,_awaitAsyncGenerator2.default)(_iterator3.next());case 7:return _step3=_context2.sent,_iteratorNormalCompletion3=_step3.done,_context2.next=11,(0,_awaitAsyncGenerator2.default)(_step3.value);case 11:if(_value3=_context2.sent,_iteratorNormalCompletion3){_context2.next=19;break}return text=_value3,_context2.next=16,"string"==typeof text?textEncoder.encode(text):text;case 16:_iteratorNormalCompletion3=!0,_context2.next=5;break;case 19:_context2.next=25;break;case 21:_context2.prev=21,_context2.t0=_context2.catch(3),_didIteratorError3=!0,_iteratorError3=_context2.t0;case 25:if(_context2.prev=25,_context2.prev=26,_iteratorNormalCompletion3||null==_iterator3.return){_context2.next=30;break}return _context2.next=30,(0,_awaitAsyncGenerator2.default)(_iterator3.return());case 30:if(_context2.prev=30,!_didIteratorError3){_context2.next=33;break}throw _iteratorError3;case 33:return _context2.finish(30);case 34:return _context2.finish(25);case 35:case"end":return _context2.stop()}},_callee2,null,[[3,21,25,35],[26,,30,34]])}))).apply(this,arguments)}function _lineAsyncIterator(){return(_lineAsyncIterator=(0,_wrapAsyncGenerator2.default)(_regenerator.default.mark(function _callee3(textIterator){var previous,_iteratorNormalCompletion4,_didIteratorError4,_iteratorError4,_iterator4,_step4,_value4,eolIndex,line;return _regenerator.default.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:previous="",_iteratorNormalCompletion4=!0,_didIteratorError4=!1,_context3.prev=3,_iterator4=(0,_asyncIterator2.default)(textIterator);case 5:return _context3.next=7,(0,_awaitAsyncGenerator2.default)(_iterator4.next());case 7:return _step4=_context3.sent,_iteratorNormalCompletion4=_step4.done,_context3.next=11,(0,_awaitAsyncGenerator2.default)(_step4.value);case 11:if(_value4=_context3.sent,_iteratorNormalCompletion4){_context3.next=26;break}previous+=_value4,eolIndex=void 0;case 16:if(!((eolIndex=previous.indexOf("\n"))>=0)){_context3.next=23;break}return line=previous.slice(0,eolIndex+1),previous=previous.slice(eolIndex+1),_context3.next=21,line;case 21:_context3.next=16;break;case 23:_iteratorNormalCompletion4=!0,_context3.next=5;break;case 26:_context3.next=32;break;case 28:_context3.prev=28,_context3.t0=_context3.catch(3),_didIteratorError4=!0,_iteratorError4=_context3.t0;case 32:if(_context3.prev=32,_context3.prev=33,_iteratorNormalCompletion4||null==_iterator4.return){_context3.next=37;break}return _context3.next=37,(0,_awaitAsyncGenerator2.default)(_iterator4.return());case 37:if(_context3.prev=37,!_didIteratorError4){_context3.next=40;break}throw _iteratorError4;case 40:return _context3.finish(37);case 41:return _context3.finish(32);case 42:if(!(previous.length>0)){_context3.next=45;break}return _context3.next=45,previous;case 45:case"end":return _context3.stop()}},_callee3,null,[[3,28,32,42],[33,,37,41]])}))).apply(this,arguments)}function _numberedLineAsyncIterator(){return(_numberedLineAsyncIterator=(0,_wrapAsyncGenerator2.default)(_regenerator.default.mark(function _callee4(lineIterator){var counter,_iteratorNormalCompletion5,_didIteratorError5,_iteratorError5,_iterator5,_step5,_value5,line;return _regenerator.default.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:counter=1,_iteratorNormalCompletion5=!0,_didIteratorError5=!1,_context4.prev=3,_iterator5=(0,_asyncIterator2.default)(lineIterator);case 5:return _context4.next=7,(0,_awaitAsyncGenerator2.default)(_iterator5.next());case 7:return _step5=_context4.sent,_iteratorNormalCompletion5=_step5.done,_context4.next=11,(0,_awaitAsyncGenerator2.default)(_step5.value);case 11:if(_value5=_context4.sent,_iteratorNormalCompletion5){_context4.next=20;break}return line=_value5,_context4.next=16,{counter:counter,line:line};case 16:counter++;case 17:_iteratorNormalCompletion5=!0,_context4.next=5;break;case 20:_context4.next=26;break;case 22:_context4.prev=22,_context4.t0=_context4.catch(3),_didIteratorError5=!0,_iteratorError5=_context4.t0;case 26:if(_context4.prev=26,_context4.prev=27,_iteratorNormalCompletion5||null==_iterator5.return){_context4.next=31;break}return _context4.next=31,(0,_awaitAsyncGenerator2.default)(_iterator5.return());case 31:if(_context4.prev=31,!_didIteratorError5){_context4.next=34;break}throw _iteratorError5;case 34:return _context4.finish(31);case 35:return _context4.finish(26);case 36:case"end":return _context4.stop()}},_callee4,null,[[3,22,26,36],[27,,31,35]])}))).apply(this,arguments)}},function(module,exports){module.exports=function(iterable){var method;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(method=iterable[Symbol.asyncIterator]))return method.call(iterable);if(Symbol.iterator&&null!=(method=iterable[Symbol.iterator]))return method.call(iterable)}throw new TypeError("Object is not async iterable")}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(21);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(loader){if("undefined"==typeof self)return;self.onmessage=function(evt){var _evt$data=evt.data,arraybuffer=_evt$data.arraybuffer,opts=_evt$data.opts;try{var data,parser;if(loader.parseSync)data=arraybuffer,parser=loader.parseSync;else{if(!loader.parseTextSync)throw new Error("Could not load data with ".concat(loader.name," loader"));var textDecoder=new TextDecoder;data=textDecoder.decode(arraybuffer),parser=loader.parseTextSync}var result=parser(data,opts),transferList=(0,_getTransferList.default)(result);self.postMessage({type:"done",result:result},transferList)}catch(error){self.postMessage({type:"error",message:error.message})}}};var _getTransferList=_interopRequireDefault(__webpack_require__(806))},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(21);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function getTransferList(object){var recursive=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var transfers=arguments.length>2?arguments[2]:void 0;var transfersSet=transfers||new Set;if(object){if(object instanceof ArrayBuffer)transfersSet.add(object);else if(object.buffer&&object.buffer instanceof ArrayBuffer)transfersSet.add(object.buffer);else if(recursive&&"object"===(0,_typeof2.default)(object))for(var key in object)getTransferList(object[key],recursive,transfersSet)}else;return void 0===transfers?Array.from(transfersSet):null};var _typeof2=_interopRequireDefault(__webpack_require__(215))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMeshSize=function(attributes){var size=0;for(var attributeName in attributes){var attribute=attributes[attributeName];ArrayBuffer.isView(attribute)&&(size+=attribute.length*attribute.BYTES_PER_ELEMENT)}return size}},function(module,exports,__webpack_require__){"use strict";(function(Buffer){var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.encodeImageToStreamNode=encodeImageToStreamNode,exports.encodeImageNode=function(image,options){var imageStream=encodeImageToStreamNode(image,options);return new Promise(function(resolve){var buffers=[];imageStream.on("data",function(buffer){return buffers.push(buffer)}),imageStream.on("end",function(){var buffer=Buffer.concat(buffers);resolve((0,_bufferToArrayBuffer.bufferToArrayBuffer)(buffer))})})};var _savePixels=_interopRequireDefault(__webpack_require__(809)),_ndarray=_interopRequireDefault(__webpack_require__(810)),_bufferToArrayBuffer=__webpack_require__(359);function encodeImageToStreamNode(image,options){var type=options.type?options.type.replace("image/",""):"jpeg",pixels=(0,_ndarray.default)(image.data,[image.width,image.height,4],[4,4*image.width,1],0);return(0,_savePixels.default)(pixels,type,options)}}).call(this,__webpack_require__(72).Buffer)},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.decodeImage=function(arrayBufferOrView,_ref){var _ref$mimeType=_ref.mimeType,blob=new Blob([arrayBufferOrView],{type:void 0===_ref$mimeType?"image/jpeg":_ref$mimeType}),imageUrl=(window.URL||window.webkitURL).createObjectURL(blob);return new Promise(function(resolve,reject){var image=new Image;return image.onload=function(){return resolve(image)},image.onerror=reject,image.src=imageUrl,image})},exports.getImagePixelData=function(image){var width=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,height=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;width=width||image.width,height=height||image.height;var canvas=document.createElement("canvas");canvas.width=width,canvas.height=height;var ctx=canvas.getContext("2d");return ctx.drawImage(image,0,0,width,height),ctx.getImageData(0,0,width,height)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default="\n#define SHADER_NAME bitmap-layer-vertex-shader\n\nattribute vec2 texCoords;\nattribute vec3 positions;\nattribute vec2 positions64xyLow;\nattribute vec3 instancePickingColors;\n\nvarying vec2 vTexCoord;\n\nvoid main(void) {\n  gl_Position = project_position_to_clipspace(positions, positions64xyLow, vec3(0.0));\n \n  vTexCoord = texCoords;\n \n  picking_setPickingColor(instancePickingColors);\n}\n"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default="\n#define SHADER_NAME bitmap-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D bitmapTexture;\n\nvarying vec2 vTexCoord;\n\nuniform float desaturate;\nuniform vec4 transparentColor;\nuniform vec3 tintColor;\nuniform float opacity;\n\n// apply desaturation\nvec3 color_desaturate(vec3 color) {\n  float luminance = (color.r + color.g + color.b) * 0.333333333;\n  return mix(color, vec3(luminance), desaturate);\n}\n\n// apply tint\nvec3 color_tint(vec3 color) {\n  return color * tintColor / 255.0;\n}\n\n// blend with background color\nvec4 apply_opacity(vec3 color, float alpha) {\n  return mix(transparentColor / 255.0, vec4(color, 1.0), alpha);\n}\n\nvoid main(void) {\n  vec4 bitmapColor = texture2D(bitmapTexture, vTexCoord);\n\n  gl_FragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * opacity);\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default="#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  vec2 iconSize = instanceIconFrames.zw;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale), \n    sizeMinPixels, sizeMaxPixels\n  );\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n\n  if (billboard)  {\n    pixelOffset.y *= -1.0;\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64xyLow, vec3(0.0)); \n    gl_Position.xy += project_pixel_size_to_clipspace(pixelOffset);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64xyLow, offset_common); \n  }\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vTextureCoords.y = 1.0 - vTextureCoords.y;\n\n  vColor = instanceColors / 255.;\n\n  vColorMode = instanceColorModes;\n  picking_setPickingColor(instancePickingColors);\n}\n"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default="#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\n\nconst float MIN_ALPHA = 0.05;\n\nvoid main(void) {\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < MIN_ALPHA) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n"},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.buildMapping=buildMapping,exports.getDiffIcons=getDiffIcons,exports.default=void 0;var _DEFAULT_TEXTURE_PARA,_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_defineProperty2=_interopRequireDefault(__webpack_require__(6)),_core=__webpack_require__(7),_images=__webpack_require__(356),_core2=__webpack_require__(15),DEFAULT_CANVAS_WIDTH=1024,DEFAULT_BUFFER=4,noop=function(){},DEFAULT_TEXTURE_PARAMETERS=(_DEFAULT_TEXTURE_PARA={},(0,_defineProperty2.default)(_DEFAULT_TEXTURE_PARA,10241,9987),(0,_defineProperty2.default)(_DEFAULT_TEXTURE_PARA,10240,9729),_DEFAULT_TEXTURE_PARA);function getIconId(icon){return icon&&(icon.id||icon.url)}function buildRowMapping(mapping,columns,yOffset){for(var i=0;i<columns.length;i++){var _columns$i=columns[i],icon=_columns$i.icon,xOffset=_columns$i.xOffset;mapping[getIconId(icon)]=Object.assign({},icon,{x:xOffset,y:yOffset})}}function buildMapping(_ref){for(var number,icons=_ref.icons,buffer=_ref.buffer,_ref$mapping=_ref.mapping,mapping=void 0===_ref$mapping?{}:_ref$mapping,_ref$xOffset=_ref.xOffset,xOffset=void 0===_ref$xOffset?0:_ref$xOffset,_ref$yOffset=_ref.yOffset,yOffset=void 0===_ref$yOffset?0:_ref$yOffset,canvasWidth=_ref.canvasWidth,rowHeight=0,columns=[],i=0;i<icons.length;i++){var icon=icons[i];if(!mapping[getIconId(icon)]){var height=icon.height,width=icon.width;xOffset+width+buffer>canvasWidth&&(buildRowMapping(mapping,columns,yOffset),xOffset=0,yOffset=rowHeight+yOffset+buffer,rowHeight=0,columns=[]),columns.push({icon:icon,xOffset:xOffset}),xOffset=xOffset+width+buffer,rowHeight=Math.max(rowHeight,height)}}return columns.length>0&&buildRowMapping(mapping,columns,yOffset),{mapping:mapping,xOffset:xOffset,yOffset:yOffset,canvasWidth:canvasWidth,canvasHeight:(number=rowHeight+yOffset+buffer,Math.pow(2,Math.ceil(Math.log2(number))))}}function getDiffIcons(data,getIcon,cachedIcons){if(!data||!getIcon)return null;cachedIcons=cachedIcons||{};var icons={},_createIterable=(0,_core2.createIterable)(data),iterable=_createIterable.iterable,objectInfo=_createIterable.objectInfo,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=iterable[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var object=_step.value;objectInfo.index++;var icon=getIcon(object,objectInfo),id=getIconId(icon);if(!icon)throw new Error("Icon is missing.");if(!icon.url)throw new Error("Icon url is missing.");icons[id]||cachedIcons[id]&&icon.url===cachedIcons[id].url||(icons[id]=icon)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return icons}var IconManager=function(){function IconManager(gl,_ref2){var _ref2$onUpdate=_ref2.onUpdate,onUpdate=void 0===_ref2$onUpdate?noop:_ref2$onUpdate;(0,_classCallCheck2.default)(this,IconManager),this.gl=gl,this.onUpdate=onUpdate,this._getIcon=null,this._texture=null,this._externalTexture=null,this._mapping={},this._autoPacking=!1,this._xOffset=0,this._yOffset=0,this._buffer=DEFAULT_BUFFER,this._canvasWidth=DEFAULT_CANVAS_WIDTH,this._canvasHeight=0,this._canvas=null}return(0,_createClass2.default)(IconManager,[{key:"finalize",value:function(){this._texture&&this._texture.delete()}},{key:"getTexture",value:function(){return this._texture||this._externalTexture}},{key:"getIconMapping",value:function(object,objectInfo){var icon=this._getIcon(object,objectInfo),id=this._autoPacking?getIconId(icon):icon;return this._mapping[id]||{}}},{key:"setProps",value:function(_ref3){var autoPacking=_ref3.autoPacking,iconAtlas=_ref3.iconAtlas,iconMapping=_ref3.iconMapping,data=_ref3.data,getIcon=_ref3.getIcon;void 0!==autoPacking&&(this._autoPacking=autoPacking),getIcon&&(this._getIcon=getIcon),iconMapping&&(this._mapping=iconMapping),iconAtlas&&this._updateIconAtlas(iconAtlas),this._autoPacking&&(data||getIcon)&&"undefined"!=typeof document&&(this._canvas=this._canvas||document.createElement("canvas"),this._updateAutoPacking(data))}},{key:"_updateIconAtlas",value:function(iconAtlas){var _this=this;this._texture&&(this._texture.delete(),this._texture=null),iconAtlas instanceof _core.Texture2D?(iconAtlas.setParameters(DEFAULT_TEXTURE_PARAMETERS),this._externalTexture=iconAtlas,this.onUpdate()):"string"==typeof iconAtlas&&(0,_images.loadImage)(iconAtlas).then(function(data){_this._texture=new _core.Texture2D(_this.gl,{data:data,parameters:DEFAULT_TEXTURE_PARAMETERS}),_this.onUpdate()})}},{key:"_updateAutoPacking",value:function(data){var texture,width,height,oldWidth,oldHeight,oldPixels,icons=Object.values(getDiffIcons(data,this._getIcon,this._mapping)||{});if(icons.length>0){var _buildMapping=buildMapping({icons:icons,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,xOffset:this._xOffset,yOffset:this._yOffset}),mapping=_buildMapping.mapping,xOffset=_buildMapping.xOffset,yOffset=_buildMapping.yOffset,canvasHeight=_buildMapping.canvasHeight;this._mapping=mapping,this._xOffset=xOffset,this._yOffset=yOffset,this._canvasHeight=canvasHeight,this._texture||(this._texture=new _core.Texture2D(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:DEFAULT_TEXTURE_PARAMETERS})),this._texture.height!==this._canvasHeight&&(texture=this._texture,width=this._canvasWidth,height=this._canvasHeight,oldWidth=texture.width,oldHeight=texture.height,oldPixels=(0,_core.readPixelsToBuffer)(texture,{}),texture.resize({width:width,height:height}),texture.setSubImageData({data:oldPixels,x:0,y:height-oldHeight,width:oldWidth,height:oldHeight,parameters:DEFAULT_TEXTURE_PARAMETERS}),texture.generateMipmap(),oldPixels.delete()),this.onUpdate(),this._loadIcons(icons)}}},{key:"_loadIcons",value:function(icons){var _this2=this,ctx=this._canvas.getContext("2d"),canvasHeight=this._texture.height,_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_loop=function(){var icon=_step2.value;(0,_images.loadImage)(icon.url).then(function(imageData){var id=getIconId(icon),_this2$_mapping$id=_this2._mapping[id],x=_this2$_mapping$id.x,y=_this2$_mapping$id.y,width=_this2$_mapping$id.width,height=_this2$_mapping$id.height,data=function(ctx,imageData,width,height){var naturalWidth=imageData.naturalWidth,naturalHeight=imageData.naturalHeight;return width===naturalWidth&&height===naturalHeight?imageData:(ctx.canvas.height=height,ctx.canvas.width=width,ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height),ctx.drawImage(imageData,0,0,naturalWidth,naturalHeight,0,0,width,height),ctx.canvas)}(ctx,imageData,width,height);_this2._texture.setSubImageData({data:data,x:x,y:canvasHeight-y-height,width:width,height:height,parameters:Object.assign({},DEFAULT_TEXTURE_PARAMETERS,(0,_defineProperty2.default)({},37440,!0))}),_this2._texture.generateMipmap(),_this2.onUpdate()})},_iterator2=icons[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0)_loop()}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}}]),IconManager}();exports.default=IconManager},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_get2=_interopRequireDefault(__webpack_require__(16)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_core=__webpack_require__(15),_core2=__webpack_require__(7),_lineLayerVertex=_interopRequireDefault(__webpack_require__(818)),_lineLayerFragment=_interopRequireDefault(__webpack_require__(819)),fp64LowPart=_core2.fp64.fp64LowPart,defaultProps={fp64:!1,getSourcePosition:{type:"accessor",value:function(x){return x.sourcePosition}},getTargetPosition:{type:"accessor",value:function(x){return x.targetPosition}},getColor:{type:"accessor",value:[0,0,0,255]},getWidth:{type:"accessor",value:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0},getStrokeWidth:{deprecatedFor:"getWidth"}},LineLayer=function(_Layer){function LineLayer(){return(0,_classCallCheck2.default)(this,LineLayer),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(LineLayer).apply(this,arguments))}return(0,_inherits2.default)(LineLayer,_Layer),(0,_createClass2.default)(LineLayer,[{key:"getShaders",value:function(){var projectModule=this.use64bitProjection()?"project64":"project32";return{vs:_lineLayerVertex.default,fs:_lineLayerFragment.default,modules:[projectModule,"picking"]}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,transition:!0,accessor:"getTargetPosition"},instanceSourceTargetPositions64xyLow:{size:4,accessor:["getSourcePosition","getTargetPosition"],update:this.calculateInstanceSourceTargetPositions64xyLow},instanceColors:{size:4,type:5121,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1}})}},{key:"updateState",value:function(_ref){var props=_ref.props,oldProps=_ref.oldProps,changeFlags=_ref.changeFlags;if((0,_get2.default)((0,_getPrototypeOf2.default)(LineLayer.prototype),"updateState",this).call(this,{props:props,oldProps:oldProps,changeFlags:changeFlags}),props.fp64!==oldProps.fp64){var gl=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(gl)}),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(_ref2){var uniforms=_ref2.uniforms,viewport=this.context.viewport,_this$props=this.props,widthUnits=_this$props.widthUnits,widthScale=_this$props.widthScale,widthMinPixels=_this$props.widthMinPixels,widthMaxPixels=_this$props.widthMaxPixels,widthMultiplier="pixels"===widthUnits?viewport.distanceScales.metersPerPixel[2]:1;this.state.model.setUniforms(Object.assign({},uniforms,{widthScale:widthScale*widthMultiplier,widthMinPixels:widthMinPixels,widthMaxPixels:widthMaxPixels})).draw()}},{key:"_getModel",value:function(gl){return new _core2.Model(gl,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new _core2.Geometry({drawMode:5,attributes:{positions:new Float32Array([0,-1,0,0,1,0,1,-1,0,1,1,0])}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateInstanceSourceTargetPositions64xyLow",value:function(attribute){var isFP64=this.use64bitPositions();if(attribute.constant=!isFP64,isFP64){var _this$props2=this.props,data=_this$props2.data,getSourcePosition=_this$props2.getSourcePosition,getTargetPosition=_this$props2.getTargetPosition,value=attribute.value,i=0,_createIterable=(0,_core.createIterable)(data),iterable=_createIterable.iterable,objectInfo=_createIterable.objectInfo,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=iterable[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var object=_step.value;objectInfo.index++;var sourcePosition=getSourcePosition(object,objectInfo),targetPosition=getTargetPosition(object,objectInfo);value[i++]=fp64LowPart(sourcePosition[0]),value[i++]=fp64LowPart(sourcePosition[1]),value[i++]=fp64LowPart(targetPosition[0]),value[i++]=fp64LowPart(targetPosition[1])}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}else attribute.value=new Float32Array(4)}}]),LineLayer}(_core.Layer);exports.default=LineLayer,LineLayer.layerName="LineLayer",LineLayer.defaultProps=defaultProps},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default="#define SHADER_NAME line-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceTargetPositions;\nattribute vec4 instanceSourceTargetPositions64xyLow;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute float instanceWidths;\n\nuniform float opacity;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\n\nvarying vec4 vColor;\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset_screenspace = dir_screenspace * offset_direction * width / 2.0;\n  vec2 offset_clipspace = project_pixel_size_to_clipspace(offset_screenspace);\n\n  return offset_clipspace;\n}\n\nvoid main(void) {\n  vec4 source = project_position_to_clipspace(instanceSourcePositions, instanceSourceTargetPositions64xyLow.xy, vec3(0.));\n  vec4 target = project_position_to_clipspace(instanceTargetPositions, instanceSourceTargetPositions64xyLow.zw, vec3(0.));\n  float widthPixels = clamp(\n    project_size_to_pixel(instanceWidths * widthScale),\n    widthMinPixels, widthMaxPixels\n  );\n  float segmentIndex = positions.x;\n  vec4 p = mix(source, target, segmentIndex);\n  vec2 offset = getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels);\n  gl_Position = p + vec4(offset, 0.0, 0.0);\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n  picking_setPickingColor(instancePickingColors);\n}\n"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default="#define SHADER_NAME line-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n"},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_get2=_interopRequireDefault(__webpack_require__(16)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_core=__webpack_require__(15),_core2=__webpack_require__(7),_pointCloudLayerVertex=_interopRequireDefault(__webpack_require__(821)),_pointCloudLayerFragment=_interopRequireDefault(__webpack_require__(822)),fp64LowPart=_core2.fp64.fp64LowPart,DEFAULT_COLOR=[0,0,0,255],DEFAULT_NORMAL=[0,0,1],defaultMaterial=new _core2.PhongMaterial,defaultProps={sizeUnits:"pixels",pointSize:{type:"number",min:0,value:10},fp64:!1,getPosition:{type:"accessor",value:function(x){return x.position}},getNormal:{type:"accessor",value:DEFAULT_NORMAL},getColor:{type:"accessor",value:DEFAULT_COLOR},material:defaultMaterial,radiusPixels:{deprecatedFor:"pointSize"}},PointCloudLayer=function(_Layer){function PointCloudLayer(){return(0,_classCallCheck2.default)(this,PointCloudLayer),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(PointCloudLayer).apply(this,arguments))}return(0,_inherits2.default)(PointCloudLayer,_Layer),(0,_createClass2.default)(PointCloudLayer,[{key:"getShaders",value:function(id){var projectModule=this.use64bitProjection()?"project64":"project32";return{vs:_pointCloudLayerVertex.default,fs:_pointCloudLayerFragment.default,modules:[projectModule,"gouraud-lighting","picking"]}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,transition:!0,accessor:"getPosition"},instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow},instanceNormals:{size:3,transition:!0,accessor:"getNormal",defaultValue:DEFAULT_NORMAL},instanceColors:{size:4,type:5121,transition:!0,accessor:"getColor",defaultValue:DEFAULT_COLOR}})}},{key:"updateState",value:function(_ref){var props=_ref.props,oldProps=_ref.oldProps,changeFlags=_ref.changeFlags;if((0,_get2.default)((0,_getPrototypeOf2.default)(PointCloudLayer.prototype),"updateState",this).call(this,{props:props,oldProps:oldProps,changeFlags:changeFlags}),props.fp64!==oldProps.fp64){var gl=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(gl)}),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(_ref2){var uniforms=_ref2.uniforms,viewport=this.context.viewport,_this$props=this.props,pointSize=_this$props.pointSize,sizeMultiplier="meters"===_this$props.sizeUnits?viewport.distanceScales.pixelsPerMeter[2]:1;this.state.model.setUniforms(Object.assign({},uniforms,{radiusPixels:pointSize*sizeMultiplier})).draw()}},{key:"_getModel",value:function(gl){for(var positions=[],i=0;i<3;i++){var angle=i/3*Math.PI*2;positions.push(2*Math.cos(angle),2*Math.sin(angle),0)}return new _core2.Model(gl,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new _core2.Geometry({drawMode:4,attributes:{positions:new Float32Array(positions)}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateInstancePositions64xyLow",value:function(attribute){var isFP64=this.use64bitPositions();if(attribute.constant=!isFP64,isFP64){var _this$props2=this.props,data=_this$props2.data,getPosition=_this$props2.getPosition,value=attribute.value,i=0,_createIterable=(0,_core.createIterable)(data),iterable=_createIterable.iterable,objectInfo=_createIterable.objectInfo,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=iterable[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var object=_step.value;objectInfo.index++;var position=getPosition(object,objectInfo);value[i++]=fp64LowPart(position[0]),value[i++]=fp64LowPart(position[1])}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}else attribute.value=new Float32Array(2)}}]),PointCloudLayer}(_core.Layer);exports.default=PointCloudLayer,PointCloudLayer.layerName="PointCloudLayer",PointCloudLayer.defaultProps=defaultProps},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default="#define SHADER_NAME point-cloud-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 instanceNormals;\nattribute vec4 instanceColors;\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusPixels;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\n\nvoid main(void) {\n  unitPosition = positions.xy;\n  vec4 position_commonspace;\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64xyLow, vec3(0.), position_commonspace);\n  gl_Position.xy += project_pixel_size_to_clipspace(positions.xy * radiusPixels);\n  vec3 lightColor = lighting_getLightColor(instanceColors.rgb, project_uCameraPosition, position_commonspace.xyz, project_normal(instanceNormals));\n  vColor = vec4(lightColor, instanceColors.a * opacity) / 255.0;\n  picking_setPickingColor(instancePickingColors);\n}\n"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default="#define SHADER_NAME point-cloud-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\n\nvoid main(void) {\n\n  float distToCenter = length(unitPosition);\n\n  if (distToCenter > 1.0) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default="#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute float instanceRadius;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float lineWidthScale;\nuniform float lineWidthMinPixels;\nuniform float lineWidthMaxPixels;\nuniform float stroked;\nuniform bool filled;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\n\nvoid main(void) {\n  float outerRadiusPixels = clamp(\n    project_size_to_pixel(radiusScale * instanceRadius),\n    radiusMinPixels, radiusMaxPixels\n  );\n  float lineWidthPixels = clamp(\n    project_size_to_pixel(lineWidthScale * instanceLineWidths),\n    lineWidthMinPixels, lineWidthMaxPixels\n  );\n  outerRadiusPixels += stroked * lineWidthPixels / 2.0;\n  unitPosition = positions.xy;\n\n  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;\n  \n  vec3 offset = positions * project_pixel_size(outerRadiusPixels);\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64xyLow, offset);\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity) / 255.;\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity) / 255.;\n  picking_setPickingColor(instancePickingColors);\n}\n"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default="#define SHADER_NAME scatterplot-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool filled;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\n\nvoid main(void) {\n\n  float distToCenter = length(unitPosition);\n\n  if (distToCenter > 1.0) {\n    discard;\n  } \n  if (distToCenter > innerUnitRadius) {\n    gl_FragColor = vLineColor;\n  } else if (filled) {\n    gl_FragColor = vFillColor;\n  } else {\n    discard;\n  }\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default="\n#define SHADER_NAME column-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 normals;\n\nattribute vec3 instancePositions;\nattribute float instanceElevations;\nattribute vec2 instancePositions64xyLow;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nuniform float opacity;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\nuniform bool extruded;\nuniform float coverage;\nuniform float elevationScale;\nvarying vec4 vColor;\n\nvoid main(void) {\n  mat2 rotationMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  float elevation = 0.0;\n\n  if (extruded) {\n    elevation = instanceElevations * (positions.z + 1.0) / 2.0 * elevationScale;\n  }\n  float shouldRender = float(instanceColors.a > 0.0 && instanceElevations >= 0.0);\n  float dotRadius = radius * coverage * shouldRender;\n  vec3 centroidPosition = vec3(instancePositions.xy, instancePositions.z + elevation);\n  vec2 centroidPosition64xyLow = instancePositions64xyLow;\n  vec3 pos = vec3(project_size(rotationMatrix * positions.xy + offset) * dotRadius, 0.);\n\n  vec4 position_commonspace;\n  gl_Position = project_position_to_clipspace(centroidPosition, centroidPosition64xyLow, pos, position_commonspace);\n\n  vec3 normals_commonspace = project_normal(vec3(rotationMatrix * normals.xy, normals.z));\n\n  if (extruded) {\n    vec3 lightColor = lighting_getLightColor(instanceColors.rgb, project_uCameraPosition, position_commonspace.xyz, normals_commonspace);\n    vColor = vec4(lightColor, instanceColors.a * opacity) / 255.0;\n  } else {\n    vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.0;\n  }\n  picking_setPickingColor(instancePickingColors);\n}\n"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default="#define SHADER_NAME column-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n"},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_core=__webpack_require__(7),GridCellLayer=function(_ColumnLayer){function GridCellLayer(){return(0,_classCallCheck2.default)(this,GridCellLayer),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(GridCellLayer).apply(this,arguments))}return(0,_inherits2.default)(GridCellLayer,_ColumnLayer),(0,_createClass2.default)(GridCellLayer,[{key:"getGeometry",value:function(diskResolution){return new _core.CubeGeometry}},{key:"draw",value:function(_ref){var uniforms=_ref.uniforms,_this$props=this.props,elevationScale=_this$props.elevationScale,extruded=_this$props.extruded,offset=_this$props.offset,coverage=_this$props.coverage,cellSize=_this$props.cellSize,angle=_this$props.angle;this.state.model.setUniforms(Object.assign({},uniforms,{radius:cellSize/2,angle:angle,offset:offset,extruded:extruded,coverage:coverage,elevationScale:elevationScale})).draw()}}]),GridCellLayer}(_interopRequireDefault(__webpack_require__(378)).default);exports.default=GridCellLayer,GridCellLayer.layerName="GridCellLayer",GridCellLayer.defaultProps={cellSize:{type:"number",min:0,value:1e3},offset:{type:"array",min:0,value:[1,1]}}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_core=__webpack_require__(15),_core2=__webpack_require__(7),Tesselator=_core.experimental.Tesselator,fp64LowPart=_core2.fp64.fp64LowPart,PathTesselator=function(_Tesselator){function PathTesselator(_ref){var data=_ref.data,getGeometry=_ref.getGeometry,positionFormat=_ref.positionFormat,fp64=_ref.fp64;return(0,_classCallCheck2.default)(this,PathTesselator),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(PathTesselator).call(this,{data:data,getGeometry:getGeometry,fp64:fp64,positionFormat:positionFormat,attributes:{startPositions:{size:3},endPositions:{size:3},leftDeltas:{size:3},rightDeltas:{size:3},startEndPositions64XyLow:{size:4,fp64Only:!0}}}))}return(0,_inherits2.default)(PathTesselator,_Tesselator),(0,_createClass2.default)(PathTesselator,[{key:"get",value:function(attributeName,target,accessor){if(this.attributes[attributeName])return this.attributes[attributeName];switch(attributeName){case"strokeWidths":return this._updateAttribute({target:target,size:1,getValue:function(object,objectInfo){return objectInfo.target[0]=accessor(object,objectInfo),objectInfo.target}});case"dashArrays":return this._updateAttribute({target:target,size:2,getValue:accessor});case"colors":return this._updateAttribute({target:target,size:4,getValue:function(object,objectInfo){var color=accessor(object,objectInfo);if(4===color.length)return color;var value=objectInfo.target;return value[0]=color[0],value[1]=color[1],value[2]=color[2],value[3]=255,value}});case"pickingColors":return this._updateAttribute({target:target,size:3,getValue:function(object,_ref2){var index=_ref2.index,value=_ref2.target;return accessor(index,value)}});default:return null}}},{key:"getGeometrySize",value:function(path){return Math.max(0,this.getPathLength(path)-1)}},{key:"updateGeometryAttributes",value:function(path,context){var _this$attributes=this.attributes,startPositions=_this$attributes.startPositions,endPositions=_this$attributes.endPositions,leftDeltas=_this$attributes.leftDeltas,rightDeltas=_this$attributes.rightDeltas,startEndPositions64XyLow=_this$attributes.startEndPositions64XyLow,fp64=this.fp64,numPoints=context.geometrySize+1;if(!(numPoints<2))for(var nextPoint,isPathClosed=this.isClosed(path),startPoint=this.getPointOnPath(path,0),endPoint=this.getPointOnPath(path,1),prevPoint=isPathClosed?this.getPointOnPath(path,numPoints-2):startPoint,i=context.vertexStart,ptIndex=1;ptIndex<numPoints;i++,ptIndex++)nextPoint=ptIndex+1<numPoints?this.getPointOnPath(path,ptIndex+1):isPathClosed?this.getPointOnPath(path,1):endPoint,startPositions[3*i]=startPoint[0],startPositions[3*i+1]=startPoint[1],startPositions[3*i+2]=startPoint[2]||0,endPositions[3*i]=endPoint[0],endPositions[3*i+1]=endPoint[1],endPositions[3*i+2]=endPoint[2]||0,leftDeltas[3*i]=startPoint[0]-prevPoint[0],leftDeltas[3*i+1]=startPoint[1]-prevPoint[1],leftDeltas[3*i+2]=startPoint[2]-prevPoint[2]||0,rightDeltas[3*i]=nextPoint[0]-endPoint[0],rightDeltas[3*i+1]=nextPoint[1]-endPoint[1],rightDeltas[3*i+2]=nextPoint[2]-endPoint[2]||0,fp64&&(startEndPositions64XyLow[4*i]=fp64LowPart(startPoint[0]),startEndPositions64XyLow[4*i+1]=fp64LowPart(startPoint[1]),startEndPositions64XyLow[4*i+2]=fp64LowPart(endPoint[0]),startEndPositions64XyLow[4*i+3]=fp64LowPart(endPoint[1])),prevPoint=startPoint,startPoint=endPoint,endPoint=nextPoint}},{key:"getPathLength",value:function(path){return Number.isFinite(path[0])?path.length/this.positionSize:path.length}},{key:"getPointOnPath",value:function(path,index){if(Number.isFinite(path[0])){var positionSize=this.positionSize;return[path[index*positionSize],path[index*positionSize+1],3===positionSize?path[index*positionSize+2]:0]}return path[index]}},{key:"isClosed",value:function(path){var numPoints=this.getPathLength(path),firstPoint=this.getPointOnPath(path,0),lastPoint=this.getPointOnPath(path,numPoints-1);return firstPoint[0]===lastPoint[0]&&firstPoint[1]===lastPoint[1]&&firstPoint[2]===lastPoint[2]}}]),PathTesselator}(Tesselator);exports.default=PathTesselator},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default="#define SHADER_NAME path-layer-vertex-shader-64\n\nattribute vec3 positions;\n\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec4 instanceStartEndPositions64xyLow;\nattribute vec3 instanceLeftDeltas;\nattribute vec3 instanceRightDeltas;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec2 instanceDashArrays;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float miterLimit;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vDashArray;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\n\nconst float EPSILON = 0.001;\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\nvec3 lineJoin(\n  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,\n  float relativePosition, bool isEnd, bool isJoint,\n  float width\n) {\n  vec2 deltaA = currPoint.xy - prevPoint.xy;\n  vec2 deltaB = nextPoint.xy - currPoint.xy;\n\n  float lenA = length(deltaA);\n  float lenB = length(deltaB);\n  lenA = lenA / width > EPSILON ? lenA : 0.0;\n  lenB = lenB / width > EPSILON ? lenB : 0.0;\n\n  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n  vec2 tangent = vec2(dirA + dirB);\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  vec2 perp = isEnd ? perpA : perpB;\n  float L = isEnd ? lenA : lenB;\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n\n  bool turnsRight = dirA.x * dirB.y > dirA.y * dirB.x;\n\n  float offsetScale = 1.0 / max(sinHalfA, EPSILON);\n\n  float cornerPosition = isJoint ?\n    0.0 :\n    flipIfTrue(turnsRight == (relativePosition > 0.0));\n  cornerPosition *=\n    float(cornerPosition <= 0.0 || sinHalfA < min(lenA, lenB) / width * cosHalfA);\n  if (cornerPosition < 0.0) {\n    offsetScale = min(offsetScale, L / width / max(cosHalfA, EPSILON));\n  }\n\n  vMiterLength = cornerPosition >= 0.0 ?\n    mix(offsetScale, 0.0, cornerPosition) :\n    offsetScale * cornerPosition;\n  vMiterLength -= sinHalfA * jointType;\n\n  float offsetDirection = mix(\n    positions.y,\n    mix(\n      flipIfTrue(turnsRight),\n      positions.y * flipIfTrue(turnsRight == (positions.x == 1.)),\n      cornerPosition\n    ),\n    step(0.0, cornerPosition)\n  );\n\n  vec2 offsetVec = mix(miterVec, -tangent, step(0.5, cornerPosition));\n  offsetScale = mix(offsetScale, 1.0 / max(cosHalfA, 0.001), step(0.5, cornerPosition));\n  bool isStartCap = step(0.0, -lenA) > 0.5;\n  bool isEndCap = step(0.0, -lenB) > 0.5;\n  bool isCap = isStartCap || isEndCap;\n  cornerPosition = isCap ? (1.0 - positions.z) : 0.;\n  if (isStartCap) {\n    offsetVec = mix(dirB, perpB, cornerPosition);\n  }\n  if (isEndCap) {\n    offsetVec = mix(dirA, perpA, cornerPosition);\n  }\n  if (isCap) {\n    offsetScale = mix(4.0 * jointType, 1.0, cornerPosition);\n    vMiterLength = 1.0 - cornerPosition;\n    offsetDirection = mix(flipIfTrue(isStartCap), positions.y, cornerPosition);\n  }\n\n  vCornerOffset = offsetVec * offsetDirection * offsetScale;\n  vDashArray = instanceDashArrays;\n  vPathLength = L / width;\n  vec2 offsetFromStartOfPath = vCornerOffset;\n  if (isEnd) {\n    offsetFromStartOfPath += deltaA / width;\n  }\n  vec2 dir = isEnd ? dirA : dirB;\n  vPathPosition = vec2(\n    positions.y + positions.z * offsetDirection,\n    dot(offsetFromStartOfPath, dir)\n  );\n\n  return currPoint + vec3(vCornerOffset * width, 0.0);\n}\nvec3 lineJoin(vec3 prevPoint, vec3 currPoint, vec3 nextPoint) {\n\n  float relativePosition = positions.y;\n  bool isEnd = positions.x > EPSILON;\n  bool isJoint = positions.z > EPSILON;\n\n  float widthPixels = clamp(project_size_to_pixel(instanceStrokeWidths * widthScale),\n    widthMinPixels, widthMaxPixels) / 2.0;\n\n  return lineJoin(\n    prevPoint, currPoint, nextPoint,\n    relativePosition, isEnd, isJoint,\n    project_pixel_size(widthPixels)\n  );\n}\n\nvoid main() {\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n  picking_setPickingColor(instancePickingColors);\n\n  float isEnd = positions.x;\n\n  vec3 prevPosition = instanceStartPositions;\n  vec2 prevPosition64xyLow = instanceStartEndPositions64xyLow.xy;\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_AUTO_OFFSET) {\n    prevPosition64xyLow += mix(-instanceLeftDeltas, vec3(0.0), isEnd).xy;\n  } else {\n    prevPosition += mix(-instanceLeftDeltas, vec3(0.0), isEnd);\n  }\n  prevPosition = project_position(prevPosition, prevPosition64xyLow);\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  vec2 currPosition64xyLow = mix(instanceStartEndPositions64xyLow.xy, instanceStartEndPositions64xyLow.zw, isEnd);\n  currPosition = project_position(currPosition, currPosition64xyLow);\n\n  vec3 nextPosition = instanceEndPositions;\n  vec2 nextPosition64xyLow = instanceStartEndPositions64xyLow.zw;\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_AUTO_OFFSET) {\n    nextPosition64xyLow += mix(vec3(0.0), instanceRightDeltas, isEnd).xy;\n  } else {\n    nextPosition += mix(vec3(0.0), instanceRightDeltas, isEnd);\n  }\n  nextPosition = project_position(nextPosition, nextPosition64xyLow);\n\n  vec3 pos = lineJoin(prevPosition, currPosition, nextPosition);\n\n  gl_Position = project_common_position_to_clipspace(vec4(pos, 1.0));\n}\n"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default="\n#define SHADER_NAME path-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec4 instanceStartEndPositions64xyLow;\nattribute vec3 instanceLeftDeltas;\nattribute vec3 instanceRightDeltas;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec2 instanceDashArrays;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float miterLimit;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vDashArray;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\n\nconst float EPSILON = 0.001;\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\n\nvec3 lineJoin(vec2 prevPoint64[2], vec2 currPoint64[2], vec2 nextPoint64[2]) {\n\n  float widthPixels = clamp(project_size_to_pixel(instanceStrokeWidths * widthScale),\n    widthMinPixels, widthMaxPixels) / 2.0;\n  float width = project_pixel_size(widthPixels);\n\n  vec2 deltaA64[2];\n  vec2 deltaB64[2];\n\n  vec2_sub_fp64(currPoint64, prevPoint64, deltaA64);\n  vec2_sub_fp64(nextPoint64, currPoint64, deltaB64);\n\n  vec2 lengthA64 = vec2_length_fp64(deltaA64);\n  vec2 lengthB64 = vec2_length_fp64(deltaB64);\n\n  vec2 deltaA = vec2(deltaA64[0].x, deltaA64[1].x);\n  vec2 deltaB = vec2(deltaB64[0].x, deltaB64[1].x);\n\n  float lenA = lengthA64.x;\n  float lenB = lengthB64.x;\n\n  vec2 offsetVec;\n  float offsetScale;\n  float offsetDirection;\n  lenA = lenA / width > EPSILON ? lenA : 0.0;\n  lenB = lenB / width > EPSILON ? lenB : 0.0;\n  vec2 dirA = lenA > 0. ? deltaA / lenA : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? deltaB / lenB : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n  vec2 tangent = vec2(dirA + dirB);\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  vec2 perp = mix(perpB, perpA, positions.x);\n  float L = mix(lenB, lenA, positions.x);\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n  bool turnsRight = dirA.x * dirB.y > dirA.y * dirB.x;\n  float cornerPosition = mix(\n    flipIfTrue(turnsRight == (positions.y > 0.0)),\n    0.0,\n    positions.z\n  );\n\n  offsetScale = 1.0 / max(sinHalfA, EPSILON);\n  cornerPosition *= float(cornerPosition <= 0.0 || sinHalfA < min(lenA, lenB) / width * cosHalfA);\n  offsetScale = mix(\n    offsetScale,\n    min(offsetScale, L / width / max(cosHalfA, EPSILON)),\n    float(cornerPosition < 0.0)\n  );\n\n  vMiterLength = mix(\n    offsetScale * cornerPosition,\n    mix(offsetScale, 0.0, cornerPosition),\n    step(0.0, cornerPosition)\n  ) - sinHalfA * jointType;\n  offsetDirection = mix(\n    positions.y,\n    mix(\n      flipIfTrue(turnsRight),\n      positions.y * flipIfTrue(turnsRight == (positions.x == 1.)),\n      cornerPosition\n    ),\n    step(0.0, cornerPosition)\n  );\n  offsetVec = mix(miterVec, -tangent, step(0.5, cornerPosition));\n  offsetScale = mix(offsetScale, 1.0 / max(cosHalfA, 0.001), step(0.5, cornerPosition));\n  float isStartCap = step(lenA, 1.0e-5);\n  float isEndCap = step(lenB, 1.0e-5);\n  float isCap = max(isStartCap, isEndCap);\n  cornerPosition = isCap * (1.0 - positions.z);\n  offsetVec = mix(offsetVec, mix(dirB, perpB, cornerPosition), isStartCap);\n  offsetVec = mix(offsetVec, mix(dirA, perpA, cornerPosition), isEndCap);\n  offsetScale = mix(\n    offsetScale,\n    mix(4.0 * jointType, 1.0, cornerPosition),\n    isCap\n  );\n  vMiterLength = mix(vMiterLength, 1.0 - cornerPosition, isCap);\n\n  offsetDirection = mix(\n    offsetDirection,\n    mix(flipIfTrue(isStartCap > 0.), positions.y, cornerPosition),\n    isCap\n  );\n\n  vCornerOffset = offsetVec * offsetDirection * offsetScale;\n  vDashArray = instanceDashArrays;\n  vPathLength = L / width;\n  float isEnd = positions.x;\n  vec2 offsetFromStartOfPath = mix(vCornerOffset, vCornerOffset + deltaA / width, isEnd);\n  vec2 dir = mix(dirB, dirA, isEnd);\n  vPathPosition = vec2(\n    positions.y + positions.z * offsetDirection,\n    dot(offsetFromStartOfPath, dir)\n  );\n\n  return vec3(vCornerOffset * width, 0.0);\n}\n\nvoid main() {\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n  picking_setPickingColor(instancePickingColors);\n\n  float isEnd = positions.x;\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  vec2 currPosition64xyLow = mix(instanceStartEndPositions64xyLow.xy, instanceStartEndPositions64xyLow.zw, isEnd);\n  vec2 projected_curr_position[2];\n  project_position_fp64(currPosition.xy, currPosition64xyLow, projected_curr_position);\n  float projected_curr_position_z = project_size(currPosition.z);\n\n  vec3 prevPosition = mix(-instanceLeftDeltas, vec3(0.0), isEnd) + instanceStartPositions;\n\n  vec2 projected_prev_position[2];\n  project_position_fp64(prevPosition.xy, instanceStartEndPositions64xyLow.xy, projected_prev_position);\n  vec3 nextPosition = mix(vec3(0.0), instanceRightDeltas, isEnd) + instanceEndPositions;\n\n  vec2 projected_next_position[2];\n  project_position_fp64(nextPosition.xy, instanceStartEndPositions64xyLow.zw, projected_next_position);\n\n  vec3 pos = lineJoin(projected_prev_position, projected_curr_position, projected_next_position);\n  vec2 vertex_pos_modelspace[4];\n\n  vertex_pos_modelspace[0] = sum_fp64(vec2(pos.x, 0.0), projected_curr_position[0]);\n  vertex_pos_modelspace[1] = sum_fp64(vec2(pos.y, 0.0), projected_curr_position[1]);\n  vertex_pos_modelspace[2] = vec2(pos.z + projected_curr_position_z, 0.0);\n  vertex_pos_modelspace[3] = vec2(1.0, 0.0);\n\n  gl_Position = project_common_position_to_clipspace_fp64(vertex_pos_modelspace);\n}\n"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default="#define SHADER_NAME path-layer-fragment-shader\n\nprecision highp float;\n\nuniform float jointType;\nuniform float miterLimit;\nuniform float alignMode;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vDashArray;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\nfloat mod2(float a, float b) {\n  return a - floor(a / b) * b;\n}\n\nfloat round(float x) {\n  return floor(x + 0.5);\n}\nbool dash_isFragInGap() {\n  float solidLength = vDashArray.x;\n  float gapLength = vDashArray.y;\n\n  float unitLength = solidLength + gapLength;\n\n  if (unitLength == 0.0) {\n    return false;\n  }\n\n  unitLength = mix(\n    unitLength,\n    vPathLength / round(vPathLength / unitLength),\n    alignMode\n  );\n\n  float offset = alignMode * solidLength / 2.0;\n\n  return gapLength > 0.0 &&\n    vPathPosition.y >= 0.0 &&\n    vPathPosition.y <= vPathLength &&\n    mod2(vPathPosition.y + offset, unitLength) > solidLength;\n}\n\nvoid main(void) {\n  if (jointType > 0.0 && vMiterLength > 0.0 && length(vCornerOffset) > 1.0) {\n    discard;\n  }\n  if (jointType == 0.0 && vMiterLength > miterLimit) {\n    discard;\n  }\n  if (vColor.a == 0.0 || dash_isFragInGap()) {\n    discard;\n  }\n  gl_FragColor = vColor;\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n"},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(9),_interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_core=__webpack_require__(7),_core2=__webpack_require__(15),_solidPolygonLayer=_interopRequireDefault(__webpack_require__(221)),_pathLayer=_interopRequireDefault(__webpack_require__(220)),Polygon=_interopRequireWildcard(__webpack_require__(379)),defaultMaterial=new _core.PhongMaterial,defaultProps={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,lineDashJustified:!1,fp64:!1,getPolygon:{type:"accessor",value:function(f){return f.polygon}},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1},getLineDashArray:{type:"accessor",value:[0,0]},getElevation:{type:"accessor",value:1e3},material:defaultMaterial},PolygonLayer=function(_CompositeLayer){function PolygonLayer(){return(0,_classCallCheck2.default)(this,PolygonLayer),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(PolygonLayer).apply(this,arguments))}return(0,_inherits2.default)(PolygonLayer,_CompositeLayer),(0,_createClass2.default)(PolygonLayer,[{key:"initializeState",value:function(){this.state={paths:[]}}},{key:"updateState",value:function(_ref){_ref.oldProps;var props=_ref.props,changeFlags=_ref.changeFlags;(changeFlags.dataChanged||changeFlags.updateTriggersChanged&&(changeFlags.updateTriggersChanged.all||changeFlags.updateTriggersChanged.getPolygon))&&(this.state.paths=this._getPaths(props))}},{key:"getPickingInfo",value:function(_ref2){var info=_ref2.info;return Object.assign(info,{object:info.object&&info.object.object||info.object})}},{key:"_getPaths",value:function(_ref3){var data=_ref3.data,getPolygon=_ref3.getPolygon,paths=[],positionSize="XY"===_ref3.positionFormat?2:3,_createIterable=(0,_core2.createIterable)(data),iterable=_createIterable.iterable,objectInfo=_createIterable.objectInfo,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=iterable[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var object=_step.value;objectInfo.index++;var _Polygon$normalize=Polygon.normalize(getPolygon(object,objectInfo),positionSize),positions=_Polygon$normalize.positions,holeIndices=_Polygon$normalize.holeIndices;if(holeIndices)for(var i=0;i<=holeIndices.length;i++){var path=positions.subarray(holeIndices[i-1]||0,holeIndices[i]||positions.length);paths.push({path:path,object:object})}else paths.push({path:positions,object:object})}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return paths}},{key:"_getAccessor",value:function(accessor){return"function"==typeof accessor?function(x){return accessor(x.object)}:accessor}},{key:"renderLayers",value:function(){var _this$props=this.props,data=_this$props.data,stroked=_this$props.stroked,filled=_this$props.filled,extruded=_this$props.extruded,wireframe=_this$props.wireframe,elevationScale=_this$props.elevationScale,transitions=_this$props.transitions,_this$props2=this.props,lineWidthUnits=_this$props2.lineWidthUnits,lineWidthScale=_this$props2.lineWidthScale,lineWidthMinPixels=_this$props2.lineWidthMinPixels,lineWidthMaxPixels=_this$props2.lineWidthMaxPixels,lineJointRounded=_this$props2.lineJointRounded,lineMiterLimit=_this$props2.lineMiterLimit,lineDashJustified=_this$props2.lineDashJustified,fp64=_this$props2.fp64,_this$props3=this.props,getFillColor=_this$props3.getFillColor,getLineColor=_this$props3.getLineColor,getLineWidth=_this$props3.getLineWidth,getLineDashArray=_this$props3.getLineDashArray,getElevation=_this$props3.getElevation,getPolygon=_this$props3.getPolygon,updateTriggers=_this$props3.updateTriggers,material=_this$props3.material,paths=this.state.paths,FillLayer=this.getSubLayerClass("fill",_solidPolygonLayer.default),StrokeLayer=this.getSubLayerClass("stroke",_pathLayer.default),polygonLayer=this.shouldRenderSubLayer("fill",paths)&&new FillLayer({extruded:extruded,elevationScale:elevationScale,fp64:fp64,filled:filled,wireframe:wireframe,getElevation:getElevation,getFillColor:getFillColor,getLineColor:getLineColor,material:material,transitions:transitions},this.getSubLayerProps({id:"fill",updateTriggers:{getPolygon:updateTriggers.getPolygon,getElevation:updateTriggers.getElevation,getFillColor:updateTriggers.getFillColor,getLineColor:updateTriggers.getLineColor}}),{data:data,getPolygon:getPolygon});return[!extruded&&polygonLayer,!extruded&&stroked&&this.shouldRenderSubLayer("stroke",paths)&&new StrokeLayer({fp64:fp64,widthUnits:lineWidthUnits,widthScale:lineWidthScale,widthMinPixels:lineWidthMinPixels,widthMaxPixels:lineWidthMaxPixels,rounded:lineJointRounded,miterLimit:lineMiterLimit,dashJustified:lineDashJustified,transitions:transitions&&{getWidth:transitions.getLineWidth,getColor:transitions.getLineColor,getPath:transitions.getPolygon},getColor:this._getAccessor(getLineColor),getWidth:this._getAccessor(getLineWidth),getDashArray:this._getAccessor(getLineDashArray)},this.getSubLayerProps({id:"stroke",updateTriggers:{getWidth:updateTriggers.getLineWidth,getColor:updateTriggers.getLineColor,getDashArray:updateTriggers.getLineDashArray}}),{data:paths,getPath:function(x){return x.path}}),extruded&&polygonLayer]}}]),PolygonLayer}(_core2.CompositeLayer);exports.default=PolygonLayer,PolygonLayer.layerName="PolygonLayer",PolygonLayer.defaultProps=defaultProps},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(9),_interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),Polygon=_interopRequireWildcard(__webpack_require__(379)),_core=__webpack_require__(15),_core2=__webpack_require__(7),Tesselator=_core.experimental.Tesselator,fp64LowPart=_core2.fp64.fp64LowPart,PolygonTesselator=function(_Tesselator){function PolygonTesselator(_ref){var data=_ref.data,getGeometry=_ref.getGeometry,fp64=_ref.fp64,positionFormat=_ref.positionFormat,_ref$IndexType=_ref.IndexType,IndexType=void 0===_ref$IndexType?Uint32Array:_ref$IndexType;return(0,_classCallCheck2.default)(this,PolygonTesselator),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(PolygonTesselator).call(this,{data:data,getGeometry:getGeometry,fp64:fp64,positionFormat:positionFormat,attributes:{positions:{size:3},positions64xyLow:{size:2,fp64Only:!0},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:IndexType,size:1}}}))}return(0,_inherits2.default)(PolygonTesselator,_Tesselator),(0,_createClass2.default)(PolygonTesselator,[{key:"get",value:function(attributeName,target,accessor){if("indices"===attributeName)return this.attributes.indices.subarray(0,this.vertexCount);if(this.attributes[attributeName])return this.attributes[attributeName];switch(attributeName){case"elevations":return this._updateAttribute({target:target,size:1,getValue:function(object,objectInfo){return objectInfo.target[0]=accessor(object,objectInfo),objectInfo.target}});case"colors":return this._updateAttribute({target:target,size:4,getValue:function(object,objectInfo){var color=accessor(object,objectInfo);if(4===color.length)return color;var value=objectInfo.target;return value[0]=color[0],value[1]=color[1],value[2]=color[2],value[3]=255,value}});case"pickingColors":return this._updateAttribute({target:target,size:3,getValue:function(object,_ref2){var index=_ref2.index,value=_ref2.target;return accessor(index,value)}});default:return null}}},{key:"getGeometrySize",value:function(polygon){return Polygon.getVertexCount(polygon,this.positionSize)}},{key:"updateGeometryAttributes",value:function(polygon,context){polygon=Polygon.normalize(polygon,this.positionSize,context.geometrySize),this._updateIndices(polygon,context),this._updatePositions(polygon,context)}},{key:"_updateIndices",value:function(polygon,_ref3){var geometryIndex=_ref3.geometryIndex,offset=_ref3.vertexStart,indexStart=_ref3.indexStart,attributes=this.attributes,indexLayout=this.indexLayout,typedArrayManager=this.typedArrayManager,target=attributes.indices,currentLength=target.length,i=indexStart,indices=Polygon.getSurfaceIndices(polygon,this.positionSize);currentLength<i+indices.length&&(currentLength=2*(i+indices.length),target=typedArrayManager.allocate(target,currentLength,{type:target.constructor,size:1,copy:!0}));for(var j=0;j<indices.length;j++)target[i++]=indices[j]+offset;indexLayout[geometryIndex]=indices.length,attributes.indices=target}},{key:"_updatePositions",value:function(polygon,_ref4){for(var vertexStart=_ref4.vertexStart,geometrySize=_ref4.geometrySize,_this$attributes=this.attributes,positions=_this$attributes.positions,positions64xyLow=_this$attributes.positions64xyLow,vertexValid=_this$attributes.vertexValid,fp64=this.fp64,positionSize=this.positionSize,i=vertexStart,polygonPositions=polygon.positions,holeIndices=polygon.holeIndices,j=0;j<geometrySize;j++){var x=polygonPositions[j*positionSize],y=polygonPositions[j*positionSize+1],z=positionSize>2?polygonPositions[j*positionSize+2]:0;positions[3*i]=x,positions[3*i+1]=y,positions[3*i+2]=z,fp64&&(positions64xyLow[2*i]=fp64LowPart(x),positions64xyLow[2*i+1]=fp64LowPart(y)),vertexValid[i]=1,i++}if(holeIndices)for(var _j=0;_j<holeIndices.length;_j++)vertexValid[vertexStart+holeIndices[_j]/positionSize-1]=0;vertexValid[vertexStart+geometrySize-1]=0}}]),PolygonTesselator}(Tesselator);exports.default=PolygonTesselator},function(module,exports,__webpack_require__){"use strict";function earcut(data,holeIndices,dim){dim=dim||2;var minX,minY,maxX,maxY,x,y,invSize,hasHoles=holeIndices&&holeIndices.length,outerLen=hasHoles?holeIndices[0]*dim:data.length,outerNode=linkedList(data,0,outerLen,dim,!0),triangles=[];if(!outerNode||outerNode.next===outerNode.prev)return triangles;if(hasHoles&&(outerNode=function(data,holeIndices,outerNode,dim){var i,len,start,end,list,queue=[];for(i=0,len=holeIndices.length;i<len;i++)start=holeIndices[i]*dim,end=i<len-1?holeIndices[i+1]*dim:data.length,(list=linkedList(data,start,end,dim,!1))===list.next&&(list.steiner=!0),queue.push(getLeftmost(list));for(queue.sort(compareX),i=0;i<queue.length;i++)eliminateHole(queue[i],outerNode),outerNode=filterPoints(outerNode,outerNode.next);return outerNode}(data,holeIndices,outerNode,dim)),data.length>80*dim){minX=maxX=data[0],minY=maxY=data[1];for(var i=dim;i<outerLen;i+=dim)(x=data[i])<minX&&(minX=x),(y=data[i+1])<minY&&(minY=y),x>maxX&&(maxX=x),y>maxY&&(maxY=y);invSize=0!==(invSize=Math.max(maxX-minX,maxY-minY))?1/invSize:0}return earcutLinked(outerNode,triangles,dim,minX,minY,invSize),triangles}function linkedList(data,start,end,dim,clockwise){var i,last;if(clockwise===signedArea(data,start,end,dim)>0)for(i=start;i<end;i+=dim)last=insertNode(i,data[i],data[i+1],last);else for(i=end-dim;i>=start;i-=dim)last=insertNode(i,data[i],data[i+1],last);return last&&equals(last,last.next)&&(removeNode(last),last=last.next),last}function filterPoints(start,end){if(!start)return start;end||(end=start);var again,p=start;do{if(again=!1,p.steiner||!equals(p,p.next)&&0!==area(p.prev,p,p.next))p=p.next;else{if(removeNode(p),(p=end=p.prev)===p.next)break;again=!0}}while(again||p!==end);return end}function earcutLinked(ear,triangles,dim,minX,minY,invSize,pass){if(ear){!pass&&invSize&&function(start,minX,minY,invSize){var p=start;do{null===p.z&&(p.z=zOrder(p.x,p.y,minX,minY,invSize)),p.prevZ=p.prev,p.nextZ=p.next,p=p.next}while(p!==start);p.prevZ.nextZ=null,p.prevZ=null,function(list){var i,p,q,e,tail,numMerges,pSize,qSize,inSize=1;do{for(p=list,list=null,tail=null,numMerges=0;p;){for(numMerges++,q=p,pSize=0,i=0;i<inSize&&(pSize++,q=q.nextZ);i++);for(qSize=inSize;pSize>0||qSize>0&&q;)0!==pSize&&(0===qSize||!q||p.z<=q.z)?(e=p,p=p.nextZ,pSize--):(e=q,q=q.nextZ,qSize--),tail?tail.nextZ=e:list=e,e.prevZ=tail,tail=e;p=q}tail.nextZ=null,inSize*=2}while(numMerges>1)}(p)}(ear,minX,minY,invSize);for(var prev,next,stop=ear;ear.prev!==ear.next;)if(prev=ear.prev,next=ear.next,invSize?isEarHashed(ear,minX,minY,invSize):isEar(ear))triangles.push(prev.i/dim),triangles.push(ear.i/dim),triangles.push(next.i/dim),removeNode(ear),ear=next.next,stop=next.next;else if((ear=next)===stop){pass?1===pass?earcutLinked(ear=cureLocalIntersections(ear,triangles,dim),triangles,dim,minX,minY,invSize,2):2===pass&&splitEarcut(ear,triangles,dim,minX,minY,invSize):earcutLinked(filterPoints(ear),triangles,dim,minX,minY,invSize,1);break}}}function isEar(ear){var a=ear.prev,b=ear,c=ear.next;if(area(a,b,c)>=0)return!1;for(var p=ear.next.next;p!==ear.prev;){if(pointInTriangle(a.x,a.y,b.x,b.y,c.x,c.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function isEarHashed(ear,minX,minY,invSize){var a=ear.prev,b=ear,c=ear.next;if(area(a,b,c)>=0)return!1;for(var minTX=a.x<b.x?a.x<c.x?a.x:c.x:b.x<c.x?b.x:c.x,minTY=a.y<b.y?a.y<c.y?a.y:c.y:b.y<c.y?b.y:c.y,maxTX=a.x>b.x?a.x>c.x?a.x:c.x:b.x>c.x?b.x:c.x,maxTY=a.y>b.y?a.y>c.y?a.y:c.y:b.y>c.y?b.y:c.y,minZ=zOrder(minTX,minTY,minX,minY,invSize),maxZ=zOrder(maxTX,maxTY,minX,minY,invSize),p=ear.prevZ,n=ear.nextZ;p&&p.z>=minZ&&n&&n.z<=maxZ;){if(p!==ear.prev&&p!==ear.next&&pointInTriangle(a.x,a.y,b.x,b.y,c.x,c.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,n!==ear.prev&&n!==ear.next&&pointInTriangle(a.x,a.y,b.x,b.y,c.x,c.y,n.x,n.y)&&area(n.prev,n,n.next)>=0)return!1;n=n.nextZ}for(;p&&p.z>=minZ;){if(p!==ear.prev&&p!==ear.next&&pointInTriangle(a.x,a.y,b.x,b.y,c.x,c.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;n&&n.z<=maxZ;){if(n!==ear.prev&&n!==ear.next&&pointInTriangle(a.x,a.y,b.x,b.y,c.x,c.y,n.x,n.y)&&area(n.prev,n,n.next)>=0)return!1;n=n.nextZ}return!0}function cureLocalIntersections(start,triangles,dim){var p=start;do{var a=p.prev,b=p.next.next;!equals(a,b)&&intersects(a,p,p.next,b)&&locallyInside(a,b)&&locallyInside(b,a)&&(triangles.push(a.i/dim),triangles.push(p.i/dim),triangles.push(b.i/dim),removeNode(p),removeNode(p.next),p=start=b),p=p.next}while(p!==start);return p}function splitEarcut(start,triangles,dim,minX,minY,invSize){var a=start;do{for(var b=a.next.next;b!==a.prev;){if(a.i!==b.i&&isValidDiagonal(a,b)){var c=splitPolygon(a,b);return a=filterPoints(a,a.next),c=filterPoints(c,c.next),earcutLinked(a,triangles,dim,minX,minY,invSize),void earcutLinked(c,triangles,dim,minX,minY,invSize)}b=b.next}a=a.next}while(a!==start)}function compareX(a,b){return a.x-b.x}function eliminateHole(hole,outerNode){if(outerNode=function(hole,outerNode){var m,p=outerNode,hx=hole.x,hy=hole.y,qx=-1/0;do{if(hy<=p.y&&hy>=p.next.y&&p.next.y!==p.y){var x=p.x+(hy-p.y)*(p.next.x-p.x)/(p.next.y-p.y);if(x<=hx&&x>qx){if(qx=x,x===hx){if(hy===p.y)return p;if(hy===p.next.y)return p.next}m=p.x<p.next.x?p:p.next}}p=p.next}while(p!==outerNode);if(!m)return null;if(hx===qx)return m.prev;var tan,stop=m,mx=m.x,my=m.y,tanMin=1/0;p=m.next;for(;p!==stop;)hx>=p.x&&p.x>=mx&&hx!==p.x&&pointInTriangle(hy<my?hx:qx,hy,mx,my,hy<my?qx:hx,hy,p.x,p.y)&&((tan=Math.abs(hy-p.y)/(hx-p.x))<tanMin||tan===tanMin&&p.x>m.x)&&locallyInside(p,hole)&&(m=p,tanMin=tan),p=p.next;return m}(hole,outerNode)){var b=splitPolygon(outerNode,hole);filterPoints(b,b.next)}}function zOrder(x,y,minX,minY,invSize){return(x=1431655765&((x=858993459&((x=252645135&((x=16711935&((x=32767*(x-minX)*invSize)|x<<8))|x<<4))|x<<2))|x<<1))|(y=1431655765&((y=858993459&((y=252645135&((y=16711935&((y=32767*(y-minY)*invSize)|y<<8))|y<<4))|y<<2))|y<<1))<<1}function getLeftmost(start){var p=start,leftmost=start;do{(p.x<leftmost.x||p.x===leftmost.x&&p.y<leftmost.y)&&(leftmost=p),p=p.next}while(p!==start);return leftmost}function pointInTriangle(ax,ay,bx,by,cx,cy,px,py){return(cx-px)*(ay-py)-(ax-px)*(cy-py)>=0&&(ax-px)*(by-py)-(bx-px)*(ay-py)>=0&&(bx-px)*(cy-py)-(cx-px)*(by-py)>=0}function isValidDiagonal(a,b){return a.next.i!==b.i&&a.prev.i!==b.i&&!function(a,b){var p=a;do{if(p.i!==a.i&&p.next.i!==a.i&&p.i!==b.i&&p.next.i!==b.i&&intersects(p,p.next,a,b))return!0;p=p.next}while(p!==a);return!1}(a,b)&&locallyInside(a,b)&&locallyInside(b,a)&&function(a,b){var p=a,inside=!1,px=(a.x+b.x)/2,py=(a.y+b.y)/2;do{p.y>py!=p.next.y>py&&p.next.y!==p.y&&px<(p.next.x-p.x)*(py-p.y)/(p.next.y-p.y)+p.x&&(inside=!inside),p=p.next}while(p!==a);return inside}(a,b)}function area(p,q,r){return(q.y-p.y)*(r.x-q.x)-(q.x-p.x)*(r.y-q.y)}function equals(p1,p2){return p1.x===p2.x&&p1.y===p2.y}function intersects(p1,q1,p2,q2){return!!(equals(p1,q1)&&equals(p2,q2)||equals(p1,q2)&&equals(p2,q1))||area(p1,q1,p2)>0!=area(p1,q1,q2)>0&&area(p2,q2,p1)>0!=area(p2,q2,q1)>0}function locallyInside(a,b){return area(a.prev,a,a.next)<0?area(a,b,a.next)>=0&&area(a,a.prev,b)>=0:area(a,b,a.prev)<0||area(a,a.next,b)<0}function splitPolygon(a,b){var a2=new Node(a.i,a.x,a.y),b2=new Node(b.i,b.x,b.y),an=a.next,bp=b.prev;return a.next=b,b.prev=a,a2.next=an,an.prev=a2,b2.next=a2,a2.prev=b2,bp.next=b2,b2.prev=bp,b2}function insertNode(i,x,y,last){var p=new Node(i,x,y);return last?(p.next=last.next,p.prev=last,last.next.prev=p,last.next=p):(p.prev=p,p.next=p),p}function removeNode(p){p.next.prev=p.prev,p.prev.next=p.next,p.prevZ&&(p.prevZ.nextZ=p.nextZ),p.nextZ&&(p.nextZ.prevZ=p.prevZ)}function Node(i,x,y){this.i=i,this.x=x,this.y=y,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(data,start,end,dim){for(var sum=0,i=start,j=end-dim;i<end;i+=dim)sum+=(data[j]-data[i])*(data[i+1]+data[j+1]),j=i;return sum}module.exports=earcut,module.exports.default=earcut,earcut.deviation=function(data,holeIndices,dim,triangles){var hasHoles=holeIndices&&holeIndices.length,outerLen=hasHoles?holeIndices[0]*dim:data.length,polygonArea=Math.abs(signedArea(data,0,outerLen,dim));if(hasHoles)for(var i=0,len=holeIndices.length;i<len;i++){var start=holeIndices[i]*dim,end=i<len-1?holeIndices[i+1]*dim:data.length;polygonArea-=Math.abs(signedArea(data,start,end,dim))}var trianglesArea=0;for(i=0;i<triangles.length;i+=3){var a=triangles[i]*dim,b=triangles[i+1]*dim,c=triangles[i+2]*dim;trianglesArea+=Math.abs((data[a]-data[c])*(data[b+1]-data[a+1])-(data[a]-data[b])*(data[c+1]-data[a+1]))}return 0===polygonArea&&0===trianglesArea?0:Math.abs((trianglesArea-polygonArea)/polygonArea)},earcut.flatten=function(data){for(var dim=data[0][0].length,result={vertices:[],holes:[],dimensions:dim},holeIndex=0,i=0;i<data.length;i++){for(var j=0;j<data[i].length;j++)for(var d=0;d<dim;d++)result.vertices.push(data[i][j][d]);i>0&&(holeIndex+=data[i-1].length,result.holes.push(holeIndex))}return result}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _solidPolygonLayerVertexMain=_interopRequireDefault(__webpack_require__(380)),_default="#define SHADER_NAME solid-polygon-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec2 positions64xyLow;\nattribute float elevations;\nattribute vec4 fillColors;\nattribute vec4 lineColors;\nattribute vec3 pickingColors;\n\n".concat(_solidPolygonLayerVertexMain.default,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  props.positions = positions;\n  props.positions64xyLow = positions64xyLow;\n  props.elevations = elevations;\n  props.fillColors = fillColors;\n  props.lineColors = lineColors;\n  props.pickingColors = pickingColors;\n\n  calculatePosition(props);\n}\n");exports.default=_default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _solidPolygonLayerVertexMain=_interopRequireDefault(__webpack_require__(380)),_default="#define SHADER_NAME solid-polygon-layer-vertex-shader-side\n#define IS_SIDE_VERTEX\n\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute vec3 nextPositions;\nattribute vec2 nextPositions64xyLow;\nattribute float instanceElevations;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\n".concat(_solidPolygonLayerVertexMain.default,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  props.positions = instancePositions;\n  props.positions64xyLow = instancePositions64xyLow;\n  props.elevations = instanceElevations;\n  props.fillColors = instanceFillColors;\n  props.lineColors = instanceLineColors;\n  props.pickingColors = instancePickingColors;\n  props.nextPositions = nextPositions;\n  props.nextPositions64xyLow = nextPositions64xyLow;\n\n  calculatePosition(props);\n}\n");exports.default=_default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default="#define SHADER_NAME solid-polygon-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying float isValid;\n\nvoid main(void) {\n  if (isValid < 0.5) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n"},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_core=__webpack_require__(15),_scatterplotLayer=_interopRequireDefault(__webpack_require__(377)),_pathLayer=_interopRequireDefault(__webpack_require__(220)),_core2=__webpack_require__(7),_solidPolygonLayer=_interopRequireDefault(__webpack_require__(221)),_geojson=__webpack_require__(839),defaultMaterial=new _core2.PhongMaterial,defaultProps={stroked:!0,filled:!0,extruded:!1,wireframe:!1,lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,elevationScale:1,pointRadiusScale:1,pointRadiusMinPixels:0,pointRadiusMaxPixels:Number.MAX_SAFE_INTEGER,lineDashJustified:!1,fp64:!1,getLineColor:{type:"accessor",value:[0,0,0,255]},getFillColor:{type:"accessor",value:[0,0,0,255]},getRadius:{type:"accessor",value:1},getLineWidth:{type:"accessor",value:1},getLineDashArray:{type:"accessor",value:[0,0]},getElevation:{type:"accessor",value:1e3},material:defaultMaterial};function getCoordinates(f){return f.geometry.coordinates}function unwrappingAccessor(accessor){return"function"!=typeof accessor?accessor:function(feature){return accessor((0,_geojson.unwrapSourceFeature)(feature))}}var GeoJsonLayer=function(_CompositeLayer){function GeoJsonLayer(){return(0,_classCallCheck2.default)(this,GeoJsonLayer),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(GeoJsonLayer).apply(this,arguments))}return(0,_inherits2.default)(GeoJsonLayer,_CompositeLayer),(0,_createClass2.default)(GeoJsonLayer,[{key:"initializeState",value:function(){this.state={features:{}}}},{key:"updateState",value:function(_ref){_ref.oldProps;var props=_ref.props;if(_ref.changeFlags.dataChanged){var data=props.data,features=(0,_geojson.getGeojsonFeatures)(data);this.state.features=(0,_geojson.separateGeojsonFeatures)(features)}}},{key:"getPickingInfo",value:function(_ref2){var info=_ref2.info;_ref2.sourceLayer;return Object.assign(info,{object:info.object?(0,_geojson.unwrapSourceFeature)(info.object):info.object,index:info.object?(0,_geojson.unwrapSourceFeatureIndex)(info.object):info.index})}},{key:"renderLayers",value:function(){var features=this.state.features,pointFeatures=features.pointFeatures,lineFeatures=features.lineFeatures,polygonFeatures=features.polygonFeatures,polygonOutlineFeatures=features.polygonOutlineFeatures,_this$props=this.props,stroked=_this$props.stroked,filled=_this$props.filled,extruded=_this$props.extruded,wireframe=_this$props.wireframe,material=_this$props.material,transitions=_this$props.transitions,_this$props2=this.props,lineWidthUnits=_this$props2.lineWidthUnits,lineWidthScale=_this$props2.lineWidthScale,lineWidthMinPixels=_this$props2.lineWidthMinPixels,lineWidthMaxPixels=_this$props2.lineWidthMaxPixels,lineJointRounded=_this$props2.lineJointRounded,lineMiterLimit=_this$props2.lineMiterLimit,pointRadiusScale=_this$props2.pointRadiusScale,pointRadiusMinPixels=_this$props2.pointRadiusMinPixels,pointRadiusMaxPixels=_this$props2.pointRadiusMaxPixels,elevationScale=_this$props2.elevationScale,lineDashJustified=_this$props2.lineDashJustified,fp64=_this$props2.fp64,_this$props3=this.props,getLineColor=_this$props3.getLineColor,getFillColor=_this$props3.getFillColor,getRadius=_this$props3.getRadius,getLineWidth=_this$props3.getLineWidth,getLineDashArray=_this$props3.getLineDashArray,getElevation=_this$props3.getElevation,updateTriggers=_this$props3.updateTriggers,PolygonFillLayer=this.getSubLayerClass("polygons-fill",_solidPolygonLayer.default),PolygonStrokeLayer=this.getSubLayerClass("polygons-stroke",_pathLayer.default),LineStringsLayer=this.getSubLayerClass("line-strings",_pathLayer.default),PointsLayer=this.getSubLayerClass("points",_scatterplotLayer.default),polygonFillLayer=this.shouldRenderSubLayer("polygons-fill",polygonFeatures)&&new PolygonFillLayer({fp64:fp64,extruded:extruded,elevationScale:elevationScale,filled:filled,wireframe:wireframe,material:material,getElevation:unwrappingAccessor(getElevation),getFillColor:unwrappingAccessor(getFillColor),getLineColor:unwrappingAccessor(getLineColor),transitions:transitions&&{getPolygon:transitions.geometry,getElevation:transitions.getElevation,getFillColor:transitions.getFillColor,getLineColor:transitions.getLineColor}},this.getSubLayerProps({id:"polygons-fill",updateTriggers:{getElevation:updateTriggers.getElevation,getFillColor:updateTriggers.getFillColor,getLineColor:updateTriggers.getLineColor}}),{data:polygonFeatures,getPolygon:getCoordinates});return[!extruded&&polygonFillLayer,!extruded&&stroked&&this.shouldRenderSubLayer("polygons-stroke",polygonOutlineFeatures)&&new PolygonStrokeLayer({fp64:fp64,widthUnits:lineWidthUnits,widthScale:lineWidthScale,widthMinPixels:lineWidthMinPixels,widthMaxPixels:lineWidthMaxPixels,rounded:lineJointRounded,miterLimit:lineMiterLimit,dashJustified:lineDashJustified,getColor:unwrappingAccessor(getLineColor),getWidth:unwrappingAccessor(getLineWidth),getDashArray:unwrappingAccessor(getLineDashArray),transitions:transitions&&{getPath:transitions.geometry,getColor:transitions.getLineColor,getWidth:transitions.getLineWidth}},this.getSubLayerProps({id:"polygons-stroke",updateTriggers:{getColor:updateTriggers.getLineColor,getWidth:updateTriggers.getLineWidth,getDashArray:updateTriggers.getLineDashArray}}),{data:polygonOutlineFeatures,getPath:getCoordinates}),this.shouldRenderSubLayer("linestrings",lineFeatures)&&new LineStringsLayer({fp64:fp64,widthUnits:lineWidthUnits,widthScale:lineWidthScale,widthMinPixels:lineWidthMinPixels,widthMaxPixels:lineWidthMaxPixels,rounded:lineJointRounded,miterLimit:lineMiterLimit,dashJustified:lineDashJustified,getColor:unwrappingAccessor(getLineColor),getWidth:unwrappingAccessor(getLineWidth),getDashArray:unwrappingAccessor(getLineDashArray),transitions:transitions&&{getPath:transitions.geometry,getColor:transitions.getLineColor,getWidth:transitions.getLineWidth}},this.getSubLayerProps({id:"line-strings",updateTriggers:{getColor:updateTriggers.getLineColor,getWidth:updateTriggers.getLineWidth,getDashArray:updateTriggers.getLineDashArray}}),{data:lineFeatures,getPath:getCoordinates}),this.shouldRenderSubLayer("points",pointFeatures)&&new PointsLayer({fp64:fp64,stroked:stroked,filled:filled,radiusScale:pointRadiusScale,radiusMinPixels:pointRadiusMinPixels,radiusMaxPixels:pointRadiusMaxPixels,lineWidthUnits:lineWidthUnits,lineWidthScale:lineWidthScale,lineWidthMinPixels:lineWidthMinPixels,lineWidthMaxPixels:lineWidthMaxPixels,getFillColor:unwrappingAccessor(getFillColor),getLineColor:unwrappingAccessor(getLineColor),getRadius:unwrappingAccessor(getRadius),getLineWidth:unwrappingAccessor(getLineWidth),transitions:transitions&&{getPosition:transitions.geometry,getFillColor:transitions.getFillColor,getLineColor:transitions.getLineColor,getRadius:transitions.getRadius,getLineWidth:transitions.getLineWidth}},this.getSubLayerProps({id:"points",updateTriggers:{getFillColor:updateTriggers.getFillColor,getLineColor:updateTriggers.getLineColor,getRadius:updateTriggers.getRadius,getLineWidth:updateTriggers.getLineWidth}}),{data:pointFeatures,getPosition:getCoordinates}),extruded&&polygonFillLayer]}}]),GeoJsonLayer}(_core.CompositeLayer);exports.default=GeoJsonLayer,GeoJsonLayer.layerName="GeoJsonLayer",GeoJsonLayer.defaultProps=defaultProps},function(module,exports,__webpack_require__){"use strict";function assert(condition,message){if(!condition)throw new Error("deck.gl: ".concat(message))}function separateGeometry(geometry,separated,sourceFeature){var type=geometry.type,coordinates=geometry.coordinates,pointFeatures=separated.pointFeatures,lineFeatures=separated.lineFeatures,polygonFeatures=separated.polygonFeatures,polygonOutlineFeatures=separated.polygonOutlineFeatures;switch(function(type,coordinates){var nestLevel=COORDINATE_NEST_LEVEL[type];assert(nestLevel,"Unknown GeoJSON type ".concat(type));for(;coordinates&&--nestLevel>0;)coordinates=coordinates[0];assert(coordinates&&Number.isFinite(coordinates[0]),"".concat(type," coordinates are malformed"))}(type,coordinates),type){case"Point":pointFeatures.push({geometry:geometry,sourceFeature:sourceFeature});break;case"MultiPoint":coordinates.forEach(function(point){pointFeatures.push({geometry:{type:"Point",coordinates:point},sourceFeature:sourceFeature})});break;case"LineString":lineFeatures.push({geometry:geometry,sourceFeature:sourceFeature});break;case"MultiLineString":coordinates.forEach(function(path){lineFeatures.push({geometry:{type:"LineString",coordinates:path},sourceFeature:sourceFeature})});break;case"Polygon":polygonFeatures.push({geometry:geometry,sourceFeature:sourceFeature}),coordinates.forEach(function(path){polygonOutlineFeatures.push({geometry:{type:"LineString",coordinates:path},sourceFeature:sourceFeature})});break;case"MultiPolygon":coordinates.forEach(function(polygon){polygonFeatures.push({geometry:{type:"Polygon",coordinates:polygon},sourceFeature:sourceFeature}),polygon.forEach(function(path){polygonOutlineFeatures.push({geometry:{type:"LineString",coordinates:path},sourceFeature:sourceFeature})})})}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=assert,exports.getGeojsonFeatures=function(geojson){if(Array.isArray(geojson))return geojson;switch(assert(geojson.type,"GeoJSON does not have type"),geojson.type){case"Feature":return[geojson];case"FeatureCollection":return assert(Array.isArray(geojson.features),"GeoJSON does not have features array"),geojson.features;default:return[{geometry:geojson}]}},exports.separateGeojsonFeatures=function(features){for(var separated={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},featureIndex=0;featureIndex<features.length;featureIndex++){var feature=features[featureIndex];assert(feature&&feature.geometry,"GeoJSON does not have geometry");var geometry=feature.geometry,sourceFeature={feature:feature,index:featureIndex};if("GeometryCollection"===geometry.type){assert(Array.isArray(geometry.geometries),"GeoJSON does not have geometries array");for(var geometries=geometry.geometries,i=0;i<geometries.length;i++){var subGeometry=geometries[i];separateGeometry(subGeometry,separated,sourceFeature)}}else separateGeometry(geometry,separated,sourceFeature)}return separated},exports.unwrapSourceFeature=function(wrappedFeature){return wrappedFeature.sourceFeature.feature},exports.unwrapSourceFeatureIndex=function(wrappedFeature){return wrappedFeature.sourceFeature.index};var COORDINATE_NEST_LEVEL={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4}},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(9),_interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_get2=_interopRequireDefault(__webpack_require__(16)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_core=__webpack_require__(15),_multiIconLayer=_interopRequireDefault(__webpack_require__(381)),_fontAtlasManager=_interopRequireWildcard(__webpack_require__(843)),DEFAULT_FONT_SETTINGS={fontSize:_fontAtlasManager.DEFAULT_FONT_SIZE,buffer:_fontAtlasManager.DEFAULT_BUFFER,sdf:!1,radius:_fontAtlasManager.DEFAULT_RADIUS,cutoff:_fontAtlasManager.DEFAULT_CUTOFF},TEXT_ANCHOR={start:1,middle:0,end:-1},ALIGNMENT_BASELINE={top:1,center:0,bottom:-1},FONT_SETTINGS_PROPS=["fontSize","buffer","sdf","radius","cutoff"],defaultProps={fp64:!1,billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,characterSet:_fontAtlasManager.DEFAULT_CHAR_SET,fontFamily:_fontAtlasManager.DEFAULT_FONT_FAMILY,fontWeight:_fontAtlasManager.DEFAULT_FONT_WEIGHT,fontSettings:{},getText:{type:"accessor",value:function(x){return x.text}},getPosition:{type:"accessor",value:function(x){return x.position}},getColor:{type:"accessor",value:[0,0,0,255]},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]}},TextLayer=function(_CompositeLayer){function TextLayer(){return(0,_classCallCheck2.default)(this,TextLayer),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(TextLayer).apply(this,arguments))}return(0,_inherits2.default)(TextLayer,_CompositeLayer),(0,_createClass2.default)(TextLayer,[{key:"initializeState",value:function(){this.state={fontAtlasManager:new _fontAtlasManager.default(this.context.gl)}}},{key:"updateState",value:function(_ref){var props=_ref.props,oldProps=_ref.oldProps,changeFlags=_ref.changeFlags,fontChanged=this.fontChanged(oldProps,props);fontChanged&&this.updateFontAtlas({oldProps:oldProps,props:props}),(changeFlags.dataChanged||fontChanged||changeFlags.updateTriggersChanged&&(changeFlags.updateTriggersChanged.all||changeFlags.updateTriggersChanged.getText))&&this.transformStringToLetters()}},{key:"finalizeState",value:function(){(0,_get2.default)((0,_getPrototypeOf2.default)(TextLayer.prototype),"finalizeState",this).call(this),this.state.fontAtlasManager.finalize()}},{key:"updateFontAtlas",value:function(_ref2){_ref2.oldProps;var props=_ref2.props,characterSet=props.characterSet,fontSettings=props.fontSettings,fontFamily=props.fontFamily,fontWeight=props.fontWeight,fontAtlasManager=this.state.fontAtlasManager;fontAtlasManager.setProps(Object.assign({},DEFAULT_FONT_SETTINGS,fontSettings,{characterSet:characterSet,fontFamily:fontFamily,fontWeight:fontWeight}));var scale=fontAtlasManager.scale,texture=fontAtlasManager.texture,mapping=fontAtlasManager.mapping;this.setState({scale:scale,iconAtlas:texture,iconMapping:mapping}),this.setNeedsRedraw(!0)}},{key:"fontChanged",value:function(oldProps,props){if(oldProps.fontFamily!==props.fontFamily||oldProps.characterSet!==props.characterSet||oldProps.fontWeight!==props.fontWeight)return!0;if(oldProps.fontSettings===props.fontSettings)return!1;var oldFontSettings=oldProps.fontSettings||{},fontSettings=props.fontSettings||{};return FONT_SETTINGS_PROPS.some(function(prop){return oldFontSettings[prop]!==fontSettings[prop]})}},{key:"getPickingInfo",value:function(_ref3){var info=_ref3.info;return Object.assign(info,{object:info.index>=0?this.props.data[info.index]:null})}},{key:"transformStringToLetters",value:function(){var _this$props=this.props,data=_this$props.data,getText=_this$props.getText,iconMapping=this.state.iconMapping,transformedData=[],_createIterable=(0,_core.createIterable)(data),iterable=_createIterable.iterable,objectInfo=_createIterable.objectInfo,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_loop=function(){var object=_step.value;objectInfo.index++;var text=getText(object,objectInfo);if(text){var letters=Array.from(text),offsets=[0],offsetLeft=0;letters.forEach(function(letter,i){var datum={text:letter,index:i,offsets:offsets,len:text.length,object:object,objectIndex:objectInfo.index},frame=iconMapping[letter];frame?offsetLeft+=frame.width:(_core.log.warn("Missing character: ".concat(letter))(),offsetLeft+=32),offsets.push(offsetLeft),transformedData.push(datum)})}},_iterator=iterable[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_loop()}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.setState({data:transformedData})}},{key:"getLetterOffset",value:function(datum){return datum.offsets[datum.index]}},{key:"getTextLength",value:function(datum){return datum.offsets[datum.offsets.length-1]}},{key:"_getAccessor",value:function(accessor){return"function"==typeof accessor?function(x){return accessor(x.object)}:accessor}},{key:"getAnchorXFromTextAnchor",value:function(getTextAnchor){return function(x){var textAnchor="function"==typeof getTextAnchor?getTextAnchor(x.object):getTextAnchor;if(!TEXT_ANCHOR.hasOwnProperty(textAnchor))throw new Error("Invalid text anchor parameter: ".concat(textAnchor));return TEXT_ANCHOR[textAnchor]}}},{key:"getAnchorYFromAlignmentBaseline",value:function(getAlignmentBaseline){return function(x){var alignmentBaseline="function"==typeof getAlignmentBaseline?getAlignmentBaseline(x.object):getAlignmentBaseline;if(!ALIGNMENT_BASELINE.hasOwnProperty(alignmentBaseline))throw new Error("Invalid alignment baseline parameter: ".concat(alignmentBaseline));return ALIGNMENT_BASELINE[alignmentBaseline]}}},{key:"renderLayers",value:function(){var _this=this,_this$state=this.state,data=_this$state.data,scale=_this$state.scale,iconAtlas=_this$state.iconAtlas,iconMapping=_this$state.iconMapping,_this$props2=this.props,_getPosition=_this$props2.getPosition,getColor=_this$props2.getColor,getSize=_this$props2.getSize,getAngle=_this$props2.getAngle,getTextAnchor=_this$props2.getTextAnchor,getAlignmentBaseline=_this$props2.getAlignmentBaseline,getPixelOffset=_this$props2.getPixelOffset,fp64=_this$props2.fp64,billboard=_this$props2.billboard,sdf=_this$props2.sdf,sizeScale=_this$props2.sizeScale,sizeUnits=_this$props2.sizeUnits,sizeMinPixels=_this$props2.sizeMinPixels,sizeMaxPixels=_this$props2.sizeMaxPixels,transitions=_this$props2.transitions,updateTriggers=_this$props2.updateTriggers;return new(this.getSubLayerClass("characters",_multiIconLayer.default))({sdf:sdf,iconAtlas:iconAtlas,iconMapping:iconMapping,getPosition:function(d){return _getPosition(d.object)},getColor:this._getAccessor(getColor),getSize:this._getAccessor(getSize),getAngle:this._getAccessor(getAngle),getAnchorX:this.getAnchorXFromTextAnchor(getTextAnchor),getAnchorY:this.getAnchorYFromAlignmentBaseline(getAlignmentBaseline),getPixelOffset:this._getAccessor(getPixelOffset),fp64:fp64,billboard:billboard,sizeScale:sizeScale*scale,sizeUnits:sizeUnits,sizeMinPixels:sizeMinPixels*scale,sizeMaxPixels:sizeMaxPixels*scale,transitions:transitions&&{getPosition:transitions.getPosition,getAngle:transitions.getAngle,getColor:transitions.getColor,getSize:transitions.getSize,getPixelOffset:updateTriggers.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getPosition:updateTriggers.getPosition,getAngle:updateTriggers.getAngle,getColor:updateTriggers.getColor,getSize:updateTriggers.getSize,getPixelOffset:updateTriggers.getPixelOffset,getAnchorX:updateTriggers.getTextAnchor,getAnchorY:updateTriggers.getAlignmentBaseline}}),{data:data,getIcon:function(d){return d.text},getShiftInQueue:function(d){return _this.getLetterOffset(d)},getLengthOfQueue:function(d){return _this.getTextLength(d)}})}}]),TextLayer}(_core.CompositeLayer);exports.default=TextLayer,TextLayer.layerName="TextLayer",TextLayer.defaultProps=defaultProps},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default="#define SHADER_NAME multi-icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform vec2 iconsTextureDim;\nuniform float gamma;\nuniform float opacity;\nuniform bool billboard;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying float vGamma;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  vec2 iconSize = instanceIconFrames.zw;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale),\n    sizeMinPixels, sizeMaxPixels\n  );\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  \n  if (billboard)  {\n    pixelOffset.y *= -1.0;\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64xyLow, vec3(0.0)); \n    gl_Position.xy += project_pixel_size_to_clipspace(pixelOffset);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64xyLow, offset_common); \n  }\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vTextureCoords.y = 1.0 - vTextureCoords.y;\n\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n  picking_setPickingColor(instancePickingColors);\n\n  vGamma = gamma / (sizeScale * iconSize.y);\n}\n"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default="#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform sampler2D iconsTexture;\nuniform float buffer;\nuniform bool sdf;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying float vGamma;\n\nconst float MIN_ALPHA = 0.05;\n\nvoid main(void) {\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n  \n  float alpha = texColor.a;\n  if (sdf) {\n    float distance = texture2D(iconsTexture, vTextureCoords).a;\n    alpha = smoothstep(buffer - vGamma, buffer + vGamma, distance);\n  }\n  float a = alpha * vColor.a;\n\n  if (a < MIN_ALPHA) {\n    discard;\n  }\n\n  gl_FragColor = vec4(vColor.rgb, a);\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n"},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.DEFAULT_RADIUS=exports.DEFAULT_CUTOFF=exports.DEFAULT_BUFFER=exports.DEFAULT_FONT_SIZE=exports.DEFAULT_FONT_WEIGHT=exports.DEFAULT_FONT_FAMILY=exports.DEFAULT_CHAR_SET=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(6)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_core=__webpack_require__(7),_tinySdf=_interopRequireDefault(__webpack_require__(844)),_fontAtlasUtils=__webpack_require__(845),_lruCache=_interopRequireDefault(__webpack_require__(846));var DEFAULT_CHAR_SET=function(){for(var charSet=[],i=32;i<128;i++)charSet.push(String.fromCharCode(i));return charSet}();exports.DEFAULT_CHAR_SET=DEFAULT_CHAR_SET;var DEFAULT_FONT_FAMILY="Monaco, monospace";exports.DEFAULT_FONT_FAMILY=DEFAULT_FONT_FAMILY;var DEFAULT_FONT_WEIGHT="normal";exports.DEFAULT_FONT_WEIGHT=DEFAULT_FONT_WEIGHT;var DEFAULT_FONT_SIZE=64;exports.DEFAULT_FONT_SIZE=DEFAULT_FONT_SIZE;var DEFAULT_BUFFER=2;exports.DEFAULT_BUFFER=DEFAULT_BUFFER;var DEFAULT_CUTOFF=.25;exports.DEFAULT_CUTOFF=DEFAULT_CUTOFF;var DEFAULT_RADIUS=3;exports.DEFAULT_RADIUS=DEFAULT_RADIUS;var cache=new _lruCache.default(3),VALID_PROPS=["fontFamily","fontWeight","characterSet","fontSize","sdf","buffer","cutoff","radius"];function populateAlphaChannel(alphaChannel,imageData){for(var i=0;i<alphaChannel.length;i++)imageData.data[4*i+3]=alphaChannel[i]}function setTextStyle(ctx,fontFamily,fontSize,fontWeight){ctx.font="".concat(fontWeight," ").concat(fontSize,"px ").concat(fontFamily),ctx.fillStyle="#000",ctx.textBaseline="baseline",ctx.textAlign="left"}var FontAtlasManager=function(){function FontAtlasManager(gl){(0,_classCallCheck2.default)(this,FontAtlasManager),this.gl=gl,this.props={fontFamily:DEFAULT_FONT_FAMILY,fontWeight:DEFAULT_FONT_WEIGHT,characterSet:DEFAULT_CHAR_SET,fontSize:DEFAULT_FONT_SIZE,buffer:DEFAULT_BUFFER,sdf:!1,cutoff:DEFAULT_CUTOFF,radius:DEFAULT_RADIUS},this._key=null,this._texture=new _core.Texture2D(this.gl)}return(0,_createClass2.default)(FontAtlasManager,[{key:"finalize",value:function(){this._texture.delete()}},{key:"setProps",value:function(){var _this=this,props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};VALID_PROPS.forEach(function(prop){prop in props&&(_this.props[prop]=props[prop])});var oldKey=this._key;this._key=this._getKey();var charSet=function(key,characterSet){var cachedFontAtlas=cache.get(key);if(!cachedFontAtlas)return characterSet;var newChars=[],cachedMapping=cachedFontAtlas.mapping,cachedCharSet=Object.keys(cachedMapping);cachedCharSet=new Set(cachedCharSet);var charSet=characterSet;return charSet instanceof Array&&(charSet=new Set(charSet)),charSet.forEach(function(char){cachedCharSet.has(char)||newChars.push(char)}),newChars}(this._key,this.props.characterSet),cachedFontAtlas=cache.get(this._key);if(cachedFontAtlas&&0===charSet.length)this._key!==oldKey&&this._updateTexture(cachedFontAtlas);else{var fontAtlas=this._generateFontAtlas(this._key,charSet,cachedFontAtlas);this._updateTexture(fontAtlas),cache.set(this._key,fontAtlas)}}},{key:"_updateTexture",value:function(_ref){var _parameters,canvas=_ref.data,width=_ref.width,height=_ref.height;this._texture.width===width&&this._texture.height===height||this._texture.resize({width:width,height:height}),this._texture.setImageData({data:canvas,width:width,height:height,parameters:(_parameters={},(0,_defineProperty2.default)(_parameters,10242,33071),(0,_defineProperty2.default)(_parameters,10243,33071),(0,_defineProperty2.default)(_parameters,37440,!0),_parameters)}),this._texture.generateMipmap()}},{key:"_generateFontAtlas",value:function(key,characterSet,cachedFontAtlas){var _this$props=this.props,fontFamily=_this$props.fontFamily,fontWeight=_this$props.fontWeight,fontSize=_this$props.fontSize,buffer=_this$props.buffer,sdf=_this$props.sdf,radius=_this$props.radius,cutoff=_this$props.cutoff,canvas=cachedFontAtlas&&cachedFontAtlas.data;canvas||((canvas=document.createElement("canvas")).width=1024);var ctx=canvas.getContext("2d");setTextStyle(ctx,fontFamily,fontSize,fontWeight);var _buildMapping=(0,_fontAtlasUtils.buildMapping)(Object.assign({getFontWidth:function(char){return ctx.measureText(char).width},fontHeight:1.2*fontSize,buffer:buffer,characterSet:characterSet,maxCanvasWidth:1024},cachedFontAtlas&&{mapping:cachedFontAtlas.mapping,xOffset:cachedFontAtlas.xOffset,yOffset:cachedFontAtlas.yOffset})),mapping=_buildMapping.mapping,canvasHeight=_buildMapping.canvasHeight,xOffset=_buildMapping.xOffset,yOffset=_buildMapping.yOffset;if(canvas.height!==canvasHeight){var imageData=ctx.getImageData(0,0,canvas.width,canvas.height);canvas.height=canvasHeight,ctx.putImageData(imageData,0,0)}if(setTextStyle(ctx,fontFamily,fontSize,fontWeight),sdf){var tinySDF=new _tinySdf.default(fontSize,buffer,radius,cutoff,fontFamily,fontWeight),_imageData=ctx.getImageData(0,0,tinySDF.size,tinySDF.size),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=characterSet[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var char=_step.value;populateAlphaChannel(tinySDF.draw(char),_imageData),ctx.putImageData(_imageData,mapping[char].x-buffer,mapping[char].y-buffer)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}else{var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=characterSet[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var _char=_step2.value;ctx.fillText(_char,mapping[_char].x,mapping[_char].y+.9*fontSize)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}return{xOffset:xOffset,yOffset:yOffset,mapping:mapping,data:canvas,width:canvas.width,height:canvas.height}}},{key:"_getKey",value:function(){var _this$props2=this.props,gl=_this$props2.gl,fontFamily=_this$props2.fontFamily,fontWeight=_this$props2.fontWeight,fontSize=_this$props2.fontSize,buffer=_this$props2.buffer,sdf=_this$props2.sdf,radius=_this$props2.radius,cutoff=_this$props2.cutoff;return sdf?"".concat(gl," ").concat(fontFamily," ").concat(fontWeight," ").concat(fontSize," ").concat(buffer," ").concat(radius," ").concat(cutoff):"".concat(gl," ").concat(fontFamily," ").concat(fontWeight," ").concat(fontSize," ").concat(buffer)}},{key:"texture",get:function(){return this._texture}},{key:"mapping",get:function(){var data=cache.get(this._key);return data&&data.mapping}},{key:"scale",get:function(){return 1.2}}]),FontAtlasManager}();exports.default=FontAtlasManager},function(module,exports,__webpack_require__){"use strict";module.exports=TinySDF;var INF=1e20;function TinySDF(fontSize,buffer,radius,cutoff,fontFamily,fontWeight){this.fontSize=fontSize||24,this.buffer=void 0===buffer?3:buffer,this.cutoff=cutoff||.25,this.fontFamily=fontFamily||"sans-serif",this.fontWeight=fontWeight||"normal",this.radius=radius||8;var size=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=size,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(size*size),this.gridInner=new Float64Array(size*size),this.f=new Float64Array(size),this.d=new Float64Array(size),this.z=new Float64Array(size+1),this.v=new Int16Array(size),this.middle=Math.round(size/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function edt(data,width,height,f,d,v,z){for(var x=0;x<width;x++){for(var y=0;y<height;y++)f[y]=data[y*width+x];for(edt1d(f,d,v,z,height),y=0;y<height;y++)data[y*width+x]=d[y]}for(y=0;y<height;y++){for(x=0;x<width;x++)f[x]=data[y*width+x];for(edt1d(f,d,v,z,width),x=0;x<width;x++)data[y*width+x]=Math.sqrt(d[x])}}function edt1d(f,d,v,z,n){v[0]=0,z[0]=-INF,z[1]=+INF;for(var q=1,k=0;q<n;q++){for(var s=(f[q]+q*q-(f[v[k]]+v[k]*v[k]))/(2*q-2*v[k]);s<=z[k];)k--,s=(f[q]+q*q-(f[v[k]]+v[k]*v[k]))/(2*q-2*v[k]);v[++k]=q,z[k]=s,z[k+1]=+INF}for(q=0,k=0;q<n;q++){for(;z[k+1]<q;)k++;d[q]=(q-v[k])*(q-v[k])+f[v[k]]}}TinySDF.prototype.draw=function(char){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(char,this.buffer,this.middle);for(var imgData=this.ctx.getImageData(0,0,this.size,this.size),alphaChannel=new Uint8ClampedArray(this.size*this.size),i=0;i<this.size*this.size;i++){var a=imgData.data[4*i+3]/255;this.gridOuter[i]=1===a?0:0===a?INF:Math.pow(Math.max(0,.5-a),2),this.gridInner[i]=1===a?INF:0===a?0:Math.pow(Math.max(0,a-.5),2)}for(edt(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),edt(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),i=0;i<this.size*this.size;i++){var d=this.gridOuter[i]-this.gridInner[i];alphaChannel[i]=Math.max(0,Math.min(255,Math.round(255-255*(d/this.radius+this.cutoff))))}return alphaChannel}},function(module,exports,__webpack_require__){"use strict";function nextPowOfTwo(number){return Math.pow(2,Math.ceil(Math.log2(number)))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.nextPowOfTwo=nextPowOfTwo,exports.buildMapping=function(_ref){var characterSet=_ref.characterSet,getFontWidth=_ref.getFontWidth,fontHeight=_ref.fontHeight,buffer=_ref.buffer,maxCanvasWidth=_ref.maxCanvasWidth,_ref$mapping=_ref.mapping,mapping=void 0===_ref$mapping?{}:_ref$mapping,_ref$xOffset=_ref.xOffset,xOffset=void 0===_ref$xOffset?0:_ref$xOffset,_ref$yOffset=_ref.yOffset,yOffset=void 0===_ref$yOffset?0:_ref$yOffset,row=0,x=xOffset;Array.from(characterSet).forEach(function(char,i){if(!mapping[char]){var width=getFontWidth(char,i);x+width+2*buffer>maxCanvasWidth&&(x=0,row++),mapping[char]={x:x+buffer,y:yOffset+row*(fontHeight+2*buffer)+buffer,width:width,height:fontHeight,mask:!0},x+=width+2*buffer}});var rowHeight=fontHeight+2*buffer;return{mapping:mapping,xOffset:x,yOffset:yOffset+row*rowHeight,canvasHeight:nextPowOfTwo(yOffset+(row+1)*rowHeight)}}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),LRUCache=function(){function LRUCache(){var limit=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;(0,_classCallCheck2.default)(this,LRUCache),this.limit=limit,this.clear()}return(0,_createClass2.default)(LRUCache,[{key:"clear",value:function(){this._cache={},this._order=[]}},{key:"get",value:function(key){var value=this._cache[key];return value&&(this._deleteOrder(key),this._appendOrder(key)),value}},{key:"set",value:function(key,value){this._cache[key]?(this.delete(key),this._cache[key]=value,this._appendOrder(key)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[key]=value,this._appendOrder(key))}},{key:"delete",value:function(key){this._cache[key]&&(this._deleteCache(key),this._deleteOrder(key))}},{key:"_deleteCache",value:function(key){delete this._cache[key]}},{key:"_deleteOrder",value:function(key){var index=this._order.findIndex(function(o){return o===key});index>=0&&this._order.splice(index,1)}},{key:"_appendOrder",value:function(key){this._order.push(key)}}]),LRUCache}();exports.default=LRUCache},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=__webpack_require__(15),constants_1=__webpack_require__(222),core_2=__webpack_require__(7),AnimatedFlowLinesLayerFragment_glsl_1=__importDefault(__webpack_require__(848)),AnimatedFlowLinesLayerVertex_glsl_1=__importDefault(__webpack_require__(849)),DEFAULT_COLOR=[0,132,193,255],AnimatedFlowLinesLayer=function(_super){function AnimatedFlowLinesLayer(props){return _super.call(this,props,null)||this}return __extends(AnimatedFlowLinesLayer,_super),AnimatedFlowLinesLayer.prototype.getShaders=function(){return{vs:AnimatedFlowLinesLayerVertex_glsl_1.default,fs:AnimatedFlowLinesLayerFragment_glsl_1.default,modules:["project32","picking"]}},AnimatedFlowLinesLayer.prototype.draw=function(_a){var uniforms=_a.uniforms,currentTime=this.props.currentTime;this.state.model.setUniforms(__assign({},uniforms,{thicknessUnit:30,currentTime:currentTime})).draw()},AnimatedFlowLinesLayer.prototype.initializeState=function(){var gl=this.context.gl;this.setState({model:this.createModel(gl)}),this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,transition:!0,accessor:"getTargetPosition"},instanceColors:{size:4,type:constants_1.UNSIGNED_BYTE,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getThickness",defaultValue:1}})},AnimatedFlowLinesLayer.prototype.createModel=function(gl){return new core_2.Model(gl,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new core_2.Geometry({drawMode:constants_1.TRIANGLE_STRIP,attributes:{positions:new Float32Array([0,-1,0,0,1,0,1,-1,0,1,1,0])}}),isInstanced:!0,shaderCache:this.context.shaderCache}))},AnimatedFlowLinesLayer.defaultProps={currentTime:0,getSourcePosition:{type:"accessor",value:function(d){return d.sourcePosition}},getTargetPosition:{type:"accessor",value:function(d){return d.targetPosition}},getColor:{type:"accessor",value:DEFAULT_COLOR},getThickness:{type:"accessor",value:1},parameters:{depthTest:!1}},AnimatedFlowLinesLayer}(core_1.Layer);exports.default=AnimatedFlowLinesLayer},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="#define SHADER_NAME animated-flow-lines-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying float sourceToTarget;\n\nvoid main(void) {\n  gl_FragColor = vec4(vColor.xyz, vColor.w * smoothstep(0.3, 1.0, fract(sourceToTarget)));\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="#define SHADER_NAME animated-flow-lines-layer-vertex-shader\n#define SPEED 0.015\n#define NUM_PARTS 5.0\n#define DIR_OFFSET 0.0 \n\nattribute vec3 positions;\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceTargetPositions;\nattribute vec4 instanceSourceTargetPositions64xyLow;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute float instanceWidths;\n\nuniform float opacity;\nuniform float currentTime;\nuniform float thicknessUnit;\n    \nvarying vec4 vColor;\nvarying float sourceToTarget;\n\n// offset vector by strokeWidth pixels\n// offset_direction is -1 (left) or 1 (right)\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset_screenspace = dir_screenspace * offset_direction * instanceWidths * thicknessUnit;\n  vec2 offset_clipspace = project_pixel_size_to_clipspace(offset_screenspace).xy;\n\n  return offset_clipspace;\n}\n\nvoid main(void) {\n  // Position\n  vec4 source = project_position_to_clipspace(instanceSourcePositions, vec2(0.), vec3(0.));\n  vec4 target = project_position_to_clipspace(instanceTargetPositions, vec2(0.), vec3(0.));\n\n  // linear interpolation of source & target to pick right coord\n  float segmentIndex = positions.x;\n  vec4 p = mix(source, target, segmentIndex);\n\n  // extrude\n  vec2 offset = getExtrusionOffset(target.xy - source.xy, positions.y - DIR_OFFSET);\n  gl_Position = p + vec4(offset, 0.0, 0.0);\n\n  // Color\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n  sourceToTarget = positions.x * length(source - target) * NUM_PARTS - currentTime * SPEED; \n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n"},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=__webpack_require__(15),constants_1=__webpack_require__(222),core_2=__webpack_require__(7),FlowCirclesLayerFragment_glsl_1=__importDefault(__webpack_require__(851)),FlowCirclesLayerVertex_glsl_1=__importDefault(__webpack_require__(852)),FlowCirclesLayer=function(_super){function FlowCirclesLayer(props){return _super.call(this,props)||this}return __extends(FlowCirclesLayer,_super),FlowCirclesLayer.prototype.getShaders=function(){return{vs:FlowCirclesLayerVertex_glsl_1.default,fs:FlowCirclesLayerFragment_glsl_1.default,modules:["project32","picking"],shaderCache:this.context.shaderCache}},FlowCirclesLayer.prototype.initializeState=function(){var gl=this.context.gl;this.setState({model:this.createModel(gl)}),this.getAttributeManager().addInstanced({instancePositions:{size:3,transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceColors:{size:4,transition:!0,type:constants_1.UNSIGNED_BYTE,accessor:"getColor",defaultValue:[0,0,0,255]}})},FlowCirclesLayer.prototype.createModel=function(gl){return new core_2.Model(gl,Object.assign(this.getShaders(),{id:this.props.id,geometry:new core_2.Geometry({drawMode:constants_1.TRIANGLE_FAN,attributes:{positions:new Float32Array([-1,-1,0,-1,1,0,1,1,0,1,-1,0])}}),isInstanced:!0,shaderCache:this.context.shaderCache}))},FlowCirclesLayer.layerName="FlowCirclesLayer",FlowCirclesLayer.defaultProps={parameters:{depthTest:!1}},FlowCirclesLayer}(core_1.Layer);exports.default=FlowCirclesLayer},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="#define SHADER_NAME flow-circles-layer-fragment-shader\n#define SOFT_OUTLINE 0.1\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\n// varying float innerUnitRadius;\n\nvoid main(void) {\n\n  float distToCenter = length(unitPosition);\n\n  if (distToCenter > 1.0 /* || distToCenter < innerUnitRadius*/) {\n    discard;\n  }\n  gl_FragColor = vColor;\n  \n  float soften = smoothstep(0.0, SOFT_OUTLINE, 1.0 - distToCenter);\n  gl_FragColor = vec4(vColor.rgb, vColor.a * soften);\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="#define SHADER_NAME flow-circles-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute float instanceRadius;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\n\nvoid main(void) {\n  // position on the containing square in [-1, 1] space\n  unitPosition = positions.xy;\n  \n  // Find the center of the point and add the current vertex\n  vec3 offset = positions * instanceRadius;\n  gl_Position = project_position_to_clipspace(instancePositions, vec2(0.), offset);\n  \n  // Apply opacity to instance color, or return instance picking color\n  vColor = instanceColors / 255.;\n  \n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n"},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=__webpack_require__(15),constants_1=__webpack_require__(222),core_2=__webpack_require__(7),FlowLinesLayerFragment_glsl_1=__importDefault(__webpack_require__(854)),FlowLinesLayerVertex_glsl_1=__importDefault(__webpack_require__(855)),DEFAULT_COLOR=[0,132,193,255],FlowLinesLayer=function(_super){function FlowLinesLayer(props){return _super.call(this,props)||this}return __extends(FlowLinesLayer,_super),FlowLinesLayer.prototype.getShaders=function(){return{vs:FlowLinesLayerVertex_glsl_1.default,fs:FlowLinesLayerFragment_glsl_1.default,modules:["project32","picking"],shaderCache:this.context.shaderCache}},FlowLinesLayer.prototype.initializeState=function(){var gl=this.context.gl;this.setState({model:this.createModel(gl)}),this.state.attributeManager.addInstanced({instanceSourcePositions:{accessor:"getSourcePosition",size:3,transition:!1},instanceTargetPositions:{accessor:"getTargetPosition",size:3,transition:!1},instanceThickness:{accessor:"getThickness",size:1,transition:!1},instanceEndpointOffsets:{accessor:"getEndpointOffsets",size:2,transition:!1},instanceColors:{accessor:"getColor",size:4,type:constants_1.UNSIGNED_BYTE,transition:!1}})},FlowLinesLayer.prototype.draw=function(_a){var uniforms=_a.uniforms,gl=this.context.gl,outlineColor=this.props.outlineColor;gl.lineWidth(1),this.state.model.setUniforms(__assign({},uniforms,{outlineColor:outlineColor.map(function(x){return x/255}),thicknessUnit:16,gap:.75})).draw()},FlowLinesLayer.prototype.createModel=function(gl){var positions=[],pixelOffsets=[],_a=this.props,drawOutline=_a.drawOutline,outlineThickness=_a.outlineThickness;if(drawOutline){positions=positions.concat([0,0,0,0,1,0,1,0,0,0,1,0,1,0,-3,1,1,-3,1,0,0,1,2,-3,1,0,-3]);var tout=outlineThickness;pixelOffsets=pixelOffsets.concat([-1,-tout,1,tout,-tout,1,-1,tout,1,tout,-tout,1,-1,0,1,tout,0,1,-1,3*tout,1,2*tout,-tout,1,-1,-tout,1])}return positions=positions.concat([0,0,0,0,1,0,1,0,0,0,1,0,1,0,-3,1,1,-3,1,0,0,1,2,-3,1,0,-3]),pixelOffsets=pixelOffsets.concat([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),new core_2.Model(gl,__assign({id:this.props.id},this.getShaders(),{geometry:new core_2.Geometry({drawType:constants_1.TRIANGLES,attributes:{positions:new Float32Array(positions),normals:new Float32Array(pixelOffsets)}}),isInstanced:!0,shaderCache:this.context.shaderCache}))},FlowLinesLayer.layerName="FlowLinesLayer",FlowLinesLayer.defaultProps={getSourcePosition:{type:"accessor",value:function(d){return d.sourcePosition}},getTargetPosition:{type:"accessor",value:function(d){return d.targetPosition}},getColor:{type:"accessor",value:DEFAULT_COLOR},getThickness:{type:"accessor",value:function(d){return d.thickness}},drawOutline:!0,outlineThickness:1,outlineColor:[255,255,255,255],parameters:{depthTest:!1}},FlowLinesLayer}(core_1.Layer);exports.default=FlowLinesLayer},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="#define SHADER_NAME flow-line-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  if (vColor.a == 0.0) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n  \n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  \n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default="#define SHADER_NAME flow-line-layer-vertex-shader\n#define PI 3.1415926535897932384626433832795\n\nattribute vec3 positions;\nattribute vec3 normals;\nattribute vec4 instanceColors;\nattribute float instanceThickness;\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceTargetPositions;\nattribute vec3 instancePickingColors;\nattribute vec2 instanceEndpointOffsets;\n\nuniform vec4 outlineColor;\nuniform float thicknessUnit;\nuniform float gap;\nuniform float opacity;\n\nvarying vec4 vColor;\n\nmat2 rotation_mat2(float a) {\n  return mat2(cos(a), sin(a), -sin(a), cos(a));\n}\n\nvec2 vec3_to_vec2(vec3 a) {\n  return vec2(a[0], a[1]);\n}\n\nvoid main(void) {\n  vec2 projectedSourceCoord = vec3_to_vec2(project_position(instanceSourcePositions));\n  vec2 projectedTargetCoord = vec3_to_vec2(project_position(instanceTargetPositions));\n\n\n  vec2 sourceTarget = projectedTargetCoord - projectedSourceCoord;\n  float offsetLimit = length(sourceTarget) * 0.8;\n  vec2 flowlineDirection = normalize(sourceTarget);\n  vec2 limitedOffsetDistances = clamp(positions.yz * thicknessUnit, -offsetLimit, offsetLimit);\n  float endpointOffset = mix(instanceEndpointOffsets.x, -instanceEndpointOffsets.y, positions.x);\n  vec2 offset =\n    rotation_mat2(0.5*PI) * flowlineDirection * (instanceThickness * limitedOffsetDistances[0] + gap + normals.x) +\n    flowlineDirection * (instanceThickness * limitedOffsetDistances[1] + normals.y + endpointOffset)\n  ;\n\n\n  vec2 mixed_temp = mix(projectedSourceCoord, projectedTargetCoord, positions.x);\n\n  vec4 vertex_pos_modelspace;\n\n  vertex_pos_modelspace[0] = mixed_temp[0] + offset[0];\n  vertex_pos_modelspace[1] = mixed_temp[1] + offset[1];\n  vertex_pos_modelspace[2] = 0.0;\n  vertex_pos_modelspace[3] = 1.0;\n\n\n  gl_Position = project_common_position_to_clipspace(vertex_pos_modelspace);\n  \n  vec4 fillColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n  vColor = mix(fillColor, vec4(outlineColor.xyz, outlineColor.w * fillColor.w), normals.z);\n  \n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var d3_array_1=__webpack_require__(857),d3_collection_1=__webpack_require__(858),d3_scale_1=__webpack_require__(382),reselect_1=__webpack_require__(861),colors_1=__webpack_require__(385),types_1=__webpack_require__(225),CIRCLE_OUTLINE_THICKNESS=1,getDiffMode=function(props){return props.diffMode},getColorsProp=function(props){return props.colors},getAnimate=function(props){return props.animate},getLocationFeatures=function(props){return types_1.isFeatureCollection(props.locations)?props.locations.features:props.locations},getFlows=function(props){return props.flows},getHighlightedFlow=function(props){return props.highlightedFlow},getHighlightedLocationId=function(props){return props.highlightedLocationId},getSelectedLocationIds=function(props){return props.selectedLocationIds},getShowOnlyTopFlows=function(props){return props.showOnlyTopFlows},Selectors=function(){function Selectors(inputAccessors){var _this=this;this.inputAccessors=inputAccessors,this.getColors=reselect_1.createSelector([getColorsProp,getDiffMode],function(colors,diffMode){return diffMode?colors_1.getDiffColorsRGBA(colors):colors_1.getColorsRGBA(colors)}),this.getLocationByIdGetter=reselect_1.createSelector([getLocationFeatures],function(locations){var locationsById=d3_collection_1.nest().key(_this.inputAccessors.getLocationId).rollup(function(_a){return _a[0]}).object(locations);return function(id){var location=locationsById[id];return location||console.warn("No location found for id '"+id+"'"),location}}),this.getFilteredFlows=reselect_1.createSelector([getFlows,getSelectedLocationIds],function(flows,selectedLocationIds){var _a=_this.inputAccessors,getFlowOriginId=_a.getFlowOriginId,getFlowDestId=_a.getFlowDestId;return selectedLocationIds?flows.filter(function(flow){return selectedLocationIds.indexOf(getFlowOriginId(flow))>=0||selectedLocationIds.indexOf(getFlowDestId(flow))>=0}):flows}),this.getNonSelfFlows=reselect_1.createSelector([this.getFilteredFlows],function(flows){var _a=_this.inputAccessors,getFlowOriginId=_a.getFlowOriginId,getFlowDestId=_a.getFlowDestId;return flows.filter(function(flow){return getFlowOriginId(flow)!==getFlowDestId(flow)})}),this.getSortedNonSelfFlows=reselect_1.createSelector([this.getNonSelfFlows],function(flows){return flows.slice().sort(function(f1,f2){return Math.abs(_this.inputAccessors.getFlowMagnitude(f1))-Math.abs(_this.inputAccessors.getFlowMagnitude(f2))})}),this.getTopFlows=reselect_1.createSelector([this.getSortedNonSelfFlows,getShowOnlyTopFlows],function(flows,showOnlyTopFlows){return null!=showOnlyTopFlows&&showOnlyTopFlows>0&&flows.length>showOnlyTopFlows?flows.slice(flows.length-showOnlyTopFlows,flows.length):flows}),this.getHighlightedFlows=reselect_1.createSelector([this.getSortedNonSelfFlows,getHighlightedFlow,getHighlightedLocationId],function(flows,highlightedFlow,highlightedLocationId){var _a=_this.inputAccessors,getFlowOriginId=_a.getFlowOriginId,getFlowDestId=_a.getFlowDestId;return highlightedFlow?[highlightedFlow]:highlightedLocationId?flows.filter(function(flow){return getFlowOriginId(flow)===highlightedLocationId||getFlowDestId(flow)===highlightedLocationId}):void 0}),this.getFlowMagnitudeExtent=reselect_1.createSelector([this.getNonSelfFlows],function(flows){return d3_array_1.extent(flows,_this.inputAccessors.getFlowMagnitude)}),this.getFlowThicknessScale=reselect_1.createSelector([this.getFlowMagnitudeExtent],function(_a){var minMagnitude=_a[0],maxMagnitude=_a[1],scale=d3_scale_1.scaleLinear().range([.05,.5]).domain([0,Math.max(Math.abs(minMagnitude||0),Math.abs(maxMagnitude||0))]);return function(magnitude){return scale(Math.abs(magnitude))}}),this.getFlowColorScale=reselect_1.createSelector([this.getColors,this.getFlowMagnitudeExtent,getAnimate],function(colors,_a,animate){var minMagnitude=_a[0],maxMagnitude=_a[1];if(colors_1.isDiffColorsRGBA(colors)){var posScale_1=colors_1.createFlowColorScale([0,maxMagnitude||0],colors.positive.flows.scheme,animate),negScale_1=colors_1.createFlowColorScale([0,minMagnitude||0],colors.negative.flows.scheme,animate);return function(magnitude){return magnitude>=0?posScale_1(magnitude):negScale_1(magnitude)}}var scale=colors_1.createFlowColorScale([0,maxMagnitude||0],colors.flows.scheme,animate);return function(magnitude){return scale(magnitude)}}),this.getLocationTotals=reselect_1.createSelector([getLocationFeatures,this.getFilteredFlows],function(locations,flows){var _a=_this.inputAccessors,getFlowOriginId=_a.getFlowOriginId,getFlowDestId=_a.getFlowDestId,getFlowMagnitude=_a.getFlowMagnitude;return flows.reduce(function(acc,curr){var originId=getFlowOriginId(curr),destId=getFlowDestId(curr),magnitude=getFlowMagnitude(curr);return originId===destId?acc.within[originId]=(acc.within[originId]||0)+magnitude:(acc.outgoing[originId]=(acc.outgoing[originId]||0)+magnitude,acc.incoming[destId]=(acc.incoming[destId]||0)+magnitude),acc},{incoming:{},outgoing:{},within:{}})}),this.getHighlightedLocationCircles=reselect_1.createSelector([this.getLocationByIdGetter,getHighlightedLocationId],function(getLocationById,highlightedLocationId){if(highlightedLocationId){var location_1=getLocationById(highlightedLocationId);if(!location_1)return;return[{location:location_1,type:"outline"},{location:location_1,type:"outer"},{location:location_1,type:"inner"}]}}),this.getLocationTotalInGetter=function(props){var _a=_this.inputAccessors,getLocationTotalIn=_a.getLocationTotalIn,getLocationId=_a.getLocationId;if(getLocationTotalIn)return getLocationTotalIn;var incoming=_this.getLocationTotals(props).incoming;return function(location){return incoming[getLocationId(location)]||0}},this.getLocationTotalOutGetter=function(props){var _a=_this.inputAccessors,getLocationTotalOut=_a.getLocationTotalOut,getLocationId=_a.getLocationId;if(getLocationTotalOut)return getLocationTotalOut;var outgoing=_this.getLocationTotals(props).outgoing;return function(location){return outgoing[getLocationId(location)]||0}},this.getLocationTotalWithinGetter=function(props){var _a=_this.inputAccessors,getLocationTotalWithin=_a.getLocationTotalWithin,getLocationId=_a.getLocationId;if(getLocationTotalWithin)return getLocationTotalWithin;var within=_this.getLocationTotals(props).within;return function(location){return within[getLocationId(location)]||0}},this.getLocationMaxAbsTotalGetter=reselect_1.createSelector([getLocationFeatures,this.getLocationTotalInGetter,this.getLocationTotalOutGetter,this.getLocationTotalWithinGetter],function(locations,getLocationTotalIn,getLocationTotalOut,getLocationTotalWithin){return function(location){return Math.max(Math.abs(getLocationTotalIn(location)+getLocationTotalWithin(location)),Math.abs(getLocationTotalOut(location)+getLocationTotalWithin(location)))}}),this.getMaxLocationMaxAbsTotal=reselect_1.createSelector([getLocationFeatures,this.getLocationMaxAbsTotalGetter],function(locations,getLocationMaxAbsTotal){return d3_array_1.max(locations,getLocationMaxAbsTotal)||0}),this.getLocationCircles=reselect_1.createSelector([getLocationFeatures,this.getLocationMaxAbsTotalGetter],function(locations,getLocationMaxAbsTotalGetter){for(var circles=[],_i=0,sorted_1=locations.slice().sort(function(a,b){return d3_array_1.ascending(getLocationMaxAbsTotalGetter(a),getLocationMaxAbsTotalGetter(b))});_i<sorted_1.length;_i++){var location_2=sorted_1[_i];circles.push({location:location_2,type:"outline"}),circles.push({location:location_2,type:"outer"}),circles.push({location:location_2,type:"inner"})}return circles}),this.getSizeScale=reselect_1.createSelector([this.getMaxLocationMaxAbsTotal],function(maxTotal){var scale=d3_scale_1.scalePow().exponent(.5).domain([0,maxTotal]).range([0,maxTotal>0?15:1]);return function(v){return scale(Math.abs(v))}}),this.getLocationCircleRadiusGetter=reselect_1.createSelector([this.getSizeScale,this.getLocationTotalInGetter,this.getLocationTotalOutGetter,this.getLocationTotalWithinGetter],function(sizeScale,getLocationTotalIn,getLocationTotalOut,getLocationTotalWithin){return function(_a){var location=_a.location,type=_a.type,getSide="inner"===type?Math.min:Math.max,totalIn=getLocationTotalIn(location),totalOut=getLocationTotalOut(location),totalWithin=getLocationTotalWithin(location),r=sizeScale(getSide(Math.abs(totalIn+totalWithin),Math.abs(totalOut+totalWithin)));return"outline"===type?r+CIRCLE_OUTLINE_THICKNESS:r}}),this.getLocationCircleColorGetter=reselect_1.createSelector([this.getColors,getHighlightedLocationId,this.getLocationTotalInGetter,this.getLocationTotalOutGetter,this.getLocationTotalWithinGetter],function(colors,highlightedLocationId,getLocationTotalIn,getLocationTotalOut,getLocationTotalWithin){var getLocationId=_this.inputAccessors.getLocationId;return function(_a){var location=_a.location,type=_a.type,isHighlighted=highlightedLocationId&&highlightedLocationId===getLocationId(location),isDimmed=highlightedLocationId&&highlightedLocationId!==getLocationId(location),totalWithin=getLocationTotalWithin(location),totalIn=getLocationTotalIn(location)+totalWithin,totalOut=getLocationTotalOut(location)+totalWithin,isIncoming="outer"===type&&Math.abs(totalIn)>Math.abs(totalOut),isPositive=!0===isIncoming&&totalIn>=0||totalOut>=0,circleColors=(colors_1.isDiffColorsRGBA(colors)?isPositive?colors.positive:colors.negative:colors).locationCircles;return isHighlighted&&"outline"===type?circleColors.highlighted:isDimmed?"outline"===type?colors_1.getDimmedCircleOutlineColor(colors.outlineColor,colors.dimmedOpacity):colors_1.getDimmedCircleColor(circleColors.inner,colors.dimmedOpacity):"outline"===type?isIncoming?circleColors.incoming:circleColors.inner:"inner"===type?circleColors.inner:!0===isIncoming?circleColors.incoming:circleColors.outgoing}}),this.isLocationConnectedGetter=reselect_1.createSelector([this.getFilteredFlows,getHighlightedLocationId,getHighlightedFlow,getSelectedLocationIds],function(flows,highlightedLocationId,highlightedFlow,selectedLocationIds){var _a=_this.inputAccessors,getFlowOriginId=_a.getFlowOriginId,getFlowDestId=_a.getFlowDestId;if(highlightedLocationId){for(var isRelated=function(flow){var originId=getFlowOriginId(flow),destId=getFlowDestId(flow);return originId===highlightedLocationId||selectedLocationIds&&selectedLocationIds.indexOf(originId)>=0||destId===highlightedLocationId||selectedLocationIds&&selectedLocationIds.indexOf(destId)>=0},locations_1=new Set,_i=0,flows_1=flows;_i<flows_1.length;_i++){var flow=flows_1[_i];isRelated(flow)&&(locations_1.add(getFlowOriginId(flow)),locations_1.add(getFlowDestId(flow)))}return function(id){return locations_1.has(id)}}return function(){return!1}}),this.getLocationAreaFillColorGetter=reselect_1.createSelector([this.getColors,getSelectedLocationIds,getHighlightedLocationId,this.isLocationConnectedGetter],function(colors,selectedLocationIds,highlightedLocationId,isLocationConnected){return function(location){var locationId=_this.inputAccessors.getLocationId(location);return selectedLocationIds&&selectedLocationIds.indexOf(locationId)>=0?colors.locationAreas.selected:locationId===highlightedLocationId?colors.locationAreas.highlighted:isLocationConnected(locationId)?colors.locationAreas.connected:colors.locationAreas.normal}})}return Selectors.prototype.getFlowLinesColorGetter=function(colors,flowColorScale,highlighted,dimmed){var _a=this.inputAccessors,getFlowMagnitude=_a.getFlowMagnitude,getFlowColor=_a.getFlowColor;return function(flow){if(getFlowColor&&(color=getFlowColor(flow)))return colors_1.colorAsRgba(color);if(highlighted){if(colors_1.isDiffColorsRGBA(colors)){var positiveColor=colors.positive.flows.highlighted,negativeColor=colors.negative.flows.highlighted;return(magnitude=getFlowMagnitude(flow))>=0?positiveColor:negativeColor}return colors.flows.highlighted}var magnitude=getFlowMagnitude(flow),color=flowColorScale(magnitude);return dimmed?colors_1.getDimmedColor(color,colors.dimmedOpacity):color}},Selectors.prototype.setInputAccessors=function(inputAccessors){this.inputAccessors=inputAccessors},Selectors.prototype.getInputAccessors=function(){return this.inputAccessors},Selectors}();exports.default=Selectors},function(module,exports,__webpack_require__){!function(exports){"use strict";function ascending(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function bisector(compare){var f;return 1===compare.length&&(f=compare,compare=function(d,x){return ascending(f(d),x)}),{left:function(a,x,lo,hi){for(null==lo&&(lo=0),null==hi&&(hi=a.length);lo<hi;){var mid=lo+hi>>>1;compare(a[mid],x)<0?lo=mid+1:hi=mid}return lo},right:function(a,x,lo,hi){for(null==lo&&(lo=0),null==hi&&(hi=a.length);lo<hi;){var mid=lo+hi>>>1;compare(a[mid],x)>0?hi=mid:lo=mid+1}return lo}}}var ascendingBisect=bisector(ascending),bisectRight=ascendingBisect.right,bisectLeft=ascendingBisect.left;function length(array){return 0|array.length}function empty(length){return!(length>0)}function arrayify(values){return"object"!=typeof values||"length"in values?values:Array.from(values)}function variance(values,valueof){let delta,count=0,mean=0,sum=0;if(void 0===valueof)for(let value of values)null!=value&&(value=+value)>=value&&(mean+=(delta=value-mean)/++count,sum+=delta*(value-mean));else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(value=+value)>=value&&(mean+=(delta=value-mean)/++count,sum+=delta*(value-mean))}if(count>1)return sum/(count-1)}function deviation(values,valueof){const v=variance(values,valueof);return v?Math.sqrt(v):v}function extent(values,valueof){let min,max;if(void 0===valueof)for(const value of values)null!=value&&(void 0===min?value>=value&&(min=max=value):(min>value&&(min=value),max<value&&(max=value)));else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(void 0===min?value>=value&&(min=max=value):(min>value&&(min=value),max<value&&(max=value)))}return[min,max]}function identity(x){return x}function nest(values,map,reduce,keys){return function regroup(values,i){if(i>=keys.length)return reduce(values);const groups=new Map,keyof=keys[i++];let index=-1;for(const value of values){const key=keyof(value,++index,values),group=groups.get(key);group?group.push(value):groups.set(key,[value])}for(const[key,values]of groups)groups.set(key,regroup(values,i));return map(groups)}(values,0)}var array=Array.prototype,slice=array.slice,map=array.map;function constant(x){return function(){return x}}function range(start,stop,step){start=+start,stop=+stop,step=(n=arguments.length)<2?(stop=start,start=0,1):n<3?1:+step;for(var i=-1,n=0|Math.max(0,Math.ceil((stop-start)/step)),range=new Array(n);++i<n;)range[i]=start+i*step;return range}var e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickIncrement(start,stop,count){var step=(stop-start)/Math.max(0,count),power=Math.floor(Math.log(step)/Math.LN10),error=step/Math.pow(10,power);return power>=0?(error>=e10?10:error>=e5?5:error>=e2?2:1)*Math.pow(10,power):-Math.pow(10,-power)/(error>=e10?10:error>=e5?5:error>=e2?2:1)}function tickStep(start,stop,count){var step0=Math.abs(stop-start)/Math.max(0,count),step1=Math.pow(10,Math.floor(Math.log(step0)/Math.LN10)),error=step0/step1;return error>=e10?step1*=10:error>=e5?step1*=5:error>=e2&&(step1*=2),stop<start?-step1:step1}function sturges(values){return Math.ceil(Math.log(values.length)/Math.LN2)+1}function bin(){var value=identity,domain=extent,threshold=sturges;function histogram(data){Array.isArray(data)||(data=Array.from(data));var i,x,n=data.length,values=new Array(n);for(i=0;i<n;++i)values[i]=value(data[i],i,data);var xz=domain(values),x0=xz[0],x1=xz[1],tz=threshold(values,x0,x1);Array.isArray(tz)||(tz=tickStep(x0,x1,tz),tz=range(Math.ceil(x0/tz)*tz,x1,tz));for(var m=tz.length;tz[0]<=x0;)tz.shift(),--m;for(;tz[m-1]>x1;)tz.pop(),--m;var bin,bins=new Array(m+1);for(i=0;i<=m;++i)(bin=bins[i]=[]).x0=i>0?tz[i-1]:x0,bin.x1=i<m?tz[i]:x1;for(i=0;i<n;++i)x=values[i],x0<=x&&x<=x1&&bins[bisectRight(tz,x,0,m)].push(data[i]);return bins}return histogram.value=function(_){return arguments.length?(value="function"==typeof _?_:constant(_),histogram):value},histogram.domain=function(_){return arguments.length?(domain="function"==typeof _?_:constant([_[0],_[1]]),histogram):domain},histogram.thresholds=function(_){return arguments.length?(threshold="function"==typeof _?_:Array.isArray(_)?constant(slice.call(_)):constant(_),histogram):threshold},histogram}function number(x){return null===x?NaN:+x}function quantile(values,p,valueof=number){if(n=values.length){if((p=+p)<=0||n<2)return+valueof(values[0],0,values);if(p>=1)return+valueof(values[n-1],n-1,values);var n,i=(n-1)*p,i0=Math.floor(i),value0=+valueof(values[i0],i0,values),value1=+valueof(values[i0+1],i0+1,values);return value0+(value1-value0)*(i-i0)}}function quickselect(array,k,left=0,right=array.length-1,compare=ascending){for(;right>left;){if(right-left>600){const n=right-left+1,m=k-left+1,z=Math.log(n),s=.5*Math.exp(2*z/3),sd=.5*Math.sqrt(z*s*(n-s)/n)*(m-n/2<0?-1:1),newLeft=Math.max(left,Math.floor(k-m*s/n+sd)),newRight=Math.min(right,Math.floor(k+(n-m)*s/n+sd));quickselect(array,k,newLeft,newRight,compare)}const t=array[k];let i=left,j=right;for(swap(array,left,k),compare(array[right],t)>0&&swap(array,left,right);i<j;){for(swap(array,i,j),++i,--j;compare(array[i],t)<0;)++i;for(;compare(array[j],t)>0;)--j}0===compare(array[left],t)?swap(array,left,j):swap(array,++j,right),j<=k&&(left=j+1),k<=j&&(right=j-1)}return array}function swap(array,i,j){const t=array[i];array[i]=array[j],array[j]=t}function min(values,valueof){let min;if(void 0===valueof)for(const value of values)null!=value&&(min>value||void 0===min&&value>=value)&&(min=value);else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(min>value||void 0===min&&value>=value)&&(min=value)}return min}function leastIndex(values,compare=ascending){let min,minIndex=-1,index=-1;if(1===compare.length)for(const element of values){++index;const value=compare(element);(minIndex<0?0===ascending(value,value):ascending(value,min)<0)&&(min=value,minIndex=index)}else for(const value of values)++index,(minIndex<0?0===compare(value,value):compare(value,min)<0)&&(min=value,minIndex=index);return minIndex}function transpose(matrix){if(!(n=matrix.length))return[];for(var i=-1,m=min(matrix,length$1),transpose=new Array(m);++i<m;)for(var n,j=-1,row=transpose[i]=new Array(n);++j<n;)row[j]=matrix[j][i];return transpose}function length$1(d){return d.length}exports.bisect=bisectRight,exports.bisectRight=bisectRight,exports.bisectLeft=bisectLeft,exports.ascending=ascending,exports.bisector=bisector,exports.count=function(values,valueof){let count=0;if(void 0===valueof)for(const value of values)null!=value&&value>=value&&++count;else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&value>=value&&++count}return count},exports.cross=function(...values){const reduce="function"==typeof values[values.length-1]&&function(reduce){return values=>reduce(...values)}(values.pop()),lengths=(values=values.map(arrayify)).map(length),j=values.length-1,index=new Array(j+1).fill(0),product=[];if(j<0||lengths.some(empty))return product;for(;;){product.push(index.map((j,i)=>values[i][j]));let i=j;for(;++index[i]===lengths[i];){if(0===i)return reduce?product.map(reduce):product;index[i--]=0}}},exports.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN},exports.deviation=deviation,exports.extent=extent,exports.group=function(values,...keys){return nest(values,identity,identity,keys)},exports.groups=function(values,...keys){return nest(values,Array.from,identity,keys)},exports.rollup=function(values,reduce,...keys){return nest(values,identity,reduce,keys)},exports.rollups=function(values,reduce,...keys){return nest(values,Array.from,reduce,keys)},exports.bin=bin,exports.histogram=bin,exports.thresholdFreedmanDiaconis=function(values,min,max){return values=map.call(values,number).sort(ascending),Math.ceil((max-min)/(2*(quantile(values,.75)-quantile(values,.25))*Math.pow(values.length,-1/3)))},exports.thresholdScott=function(values,min,max){return Math.ceil((max-min)/(3.5*deviation(values)*Math.pow(values.length,-1/3)))},exports.thresholdSturges=sturges,exports.max=function(values,valueof){let max;if(void 0===valueof)for(const value of values)null!=value&&(max<value||void 0===max&&value>=value)&&(max=value);else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(max<value||void 0===max&&value>=value)&&(max=value)}return max},exports.maxIndex=function(values,valueof){let max,maxIndex=-1,index=-1;if(void 0===valueof)for(const value of values)++index,null!=value&&(max<value||void 0===max&&value>=value)&&(max=value,maxIndex=index);else for(let value of values)null!=(value=valueof(value,++index,values))&&(max<value||void 0===max&&value>=value)&&(max=value,maxIndex=index);return maxIndex},exports.mean=function(values,valueof){let count=0,sum=0;if(void 0===valueof)for(let value of values)null!=value&&(value=+value)>=value&&(++count,sum+=value);else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(value=+value)>=value&&(++count,sum+=value)}if(count)return sum/count},exports.median=function(values,valueof){if(!(values=Float64Array.from(function*(values,valueof){if(void 0===valueof)for(let value of values)null!=value&&(value=+value)>=value&&(yield value);else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(value=+value)>=value&&(yield value)}}(values,valueof))).length)return;const n=values.length,i=n>>1;return quickselect(values,i-1,0),0==(1&n)&&quickselect(values,i,i),quantile(values,.5)},exports.merge=function(arrays){return Array.from(function*(arrays){for(const array of arrays)yield*array}(arrays))},exports.min=min,exports.minIndex=function(values,valueof){let min,minIndex=-1,index=-1;if(void 0===valueof)for(const value of values)++index,null!=value&&(min>value||void 0===min&&value>=value)&&(min=value,minIndex=index);else for(let value of values)null!=(value=valueof(value,++index,values))&&(min>value||void 0===min&&value>=value)&&(min=value,minIndex=index);return minIndex},exports.pairs=function(values,pairof=function(a,b){return[a,b]}){const pairs=[];let previous,first=!1;for(const value of values)first&&pairs.push(pairof(previous,value)),previous=value,first=!0;return pairs},exports.permute=function(source,keys){return Array.from(keys,key=>source[key])},exports.quantile=quantile,exports.quickselect=quickselect,exports.range=range,exports.least=function(values,compare=ascending){let min,defined=!1;if(1===compare.length){let minValue;for(const element of values){const value=compare(element);(defined?ascending(value,minValue)<0:0===ascending(value,value))&&(min=element,minValue=value,defined=!0)}}else for(const value of values)(defined?compare(value,min)<0:0===compare(value,value))&&(min=value,defined=!0);return min},exports.leastIndex=leastIndex,exports.scan=function(values,compare){const index=leastIndex(values,compare);return index<0?void 0:index},exports.shuffle=function(array,i0=0,i1=array.length){for(var t,i,m=i1-(i0=+i0);m;)i=Math.random()*m--|0,t=array[m+i0],array[m+i0]=array[i+i0],array[i+i0]=t;return array},exports.sum=function(values,valueof){let sum=0;if(void 0===valueof)for(let value of values)(value=+value)&&(sum+=value);else{let index=-1;for(let value of values)(value=+valueof(value,++index,values))&&(sum+=value)}return sum},exports.ticks=function(start,stop,count){var reverse,n,ticks,step,i=-1;if(count=+count,(start=+start)==(stop=+stop)&&count>0)return[start];if((reverse=stop<start)&&(n=start,start=stop,stop=n),0===(step=tickIncrement(start,stop,count))||!isFinite(step))return[];if(step>0)for(start=Math.ceil(start/step),stop=Math.floor(stop/step),ticks=new Array(n=Math.ceil(stop-start+1));++i<n;)ticks[i]=(start+i)*step;else for(start=Math.floor(start*step),stop=Math.ceil(stop*step),ticks=new Array(n=Math.ceil(start-stop+1));++i<n;)ticks[i]=(start-i)/step;return reverse&&ticks.reverse(),ticks},exports.tickIncrement=tickIncrement,exports.tickStep=tickStep,exports.transpose=transpose,exports.variance=variance,exports.zip=function(){return transpose(arguments)},Object.defineProperty(exports,"__esModule",{value:!0})}(exports)},function(module,exports,__webpack_require__){!function(exports){"use strict";function Map(){}function map(object,f){var map=new Map;if(object instanceof Map)object.each(function(value,key){map.set(key,value)});else if(Array.isArray(object)){var o,i=-1,n=object.length;if(null==f)for(;++i<n;)map.set(i,object[i]);else for(;++i<n;)map.set(f(o=object[i],i,object),o)}else if(object)for(var key in object)map.set(key,object[key]);return map}function createObject(){return{}}function setObject(object,key,value){object[key]=value}function createMap(){return map()}function setMap(map$$1,key,value){map$$1.set(key,value)}function Set(){}Map.prototype=map.prototype={constructor:Map,has:function(key){return"$"+key in this},get:function(key){return this["$"+key]},set:function(key,value){return this["$"+key]=value,this},remove:function(key){var property="$"+key;return property in this&&delete this[property]},clear:function(){for(var property in this)"$"===property[0]&&delete this[property]},keys:function(){var keys=[];for(var property in this)"$"===property[0]&&keys.push(property.slice(1));return keys},values:function(){var values=[];for(var property in this)"$"===property[0]&&values.push(this[property]);return values},entries:function(){var entries=[];for(var property in this)"$"===property[0]&&entries.push({key:property.slice(1),value:this[property]});return entries},size:function(){var size=0;for(var property in this)"$"===property[0]&&++size;return size},empty:function(){for(var property in this)if("$"===property[0])return!1;return!0},each:function(f){for(var property in this)"$"===property[0]&&f(this[property],property.slice(1),this)}};var proto=map.prototype;function set(object,f){var set=new Set;if(object instanceof Set)object.each(function(value){set.add(value)});else if(object){var i=-1,n=object.length;if(null==f)for(;++i<n;)set.add(object[i]);else for(;++i<n;)set.add(f(object[i],i,object))}return set}Set.prototype=set.prototype={constructor:Set,has:proto.has,add:function(value){return this["$"+(value+="")]=value,this},remove:proto.remove,clear:proto.clear,values:proto.keys,size:proto.size,empty:proto.empty,each:proto.each},exports.nest=function(){var sortValues,rollup,nest,keys=[],sortKeys=[];function apply(array,depth,createResult,setResult){if(depth>=keys.length)return null!=sortValues&&array.sort(sortValues),null!=rollup?rollup(array):array;for(var keyValue,value,values,i=-1,n=array.length,key=keys[depth++],valuesByKey=map(),result=createResult();++i<n;)(values=valuesByKey.get(keyValue=key(value=array[i])+""))?values.push(value):valuesByKey.set(keyValue,[value]);return valuesByKey.each(function(values,key){setResult(result,key,apply(values,depth,createResult,setResult))}),result}return nest={object:function(array){return apply(array,0,createObject,setObject)},map:function(array){return apply(array,0,createMap,setMap)},entries:function(array){return function entries(map$$1,depth){if(++depth>keys.length)return map$$1;var array,sortKey=sortKeys[depth-1];return null!=rollup&&depth>=keys.length?array=map$$1.entries():(array=[],map$$1.each(function(v,k){array.push({key:k,values:entries(v,depth)})})),null!=sortKey?array.sort(function(a,b){return sortKey(a.key,b.key)}):array}(apply(array,0,createMap,setMap),0)},key:function(d){return keys.push(d),nest},sortKeys:function(order){return sortKeys[keys.length-1]=order,nest},sortValues:function(order){return sortValues=order,nest},rollup:function(f){return rollup=f,nest}}},exports.set=set,exports.map=map,exports.keys=function(map){var keys=[];for(var key in map)keys.push(key);return keys},exports.values=function(map){var values=[];for(var key in map)values.push(map[key]);return values},exports.entries=function(map){var entries=[];for(var key in map)entries.push({key:key,value:map[key]});return entries},Object.defineProperty(exports,"__esModule",{value:!0})}(exports)},function(module,exports,__webpack_require__){!function(exports){"use strict";function formatDecimal(x,p){if((i=(x=p?x.toExponential(p-1):x.toExponential()).indexOf("e"))<0)return null;var i,coefficient=x.slice(0,i);return[coefficient.length>1?coefficient[0]+coefficient.slice(2):coefficient,+x.slice(i+1)]}function exponent(x){return(x=formatDecimal(Math.abs(x)))?x[1]:NaN}var prefixExponent,re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(specifier){return new FormatSpecifier(specifier)}function FormatSpecifier(specifier){if(!(match=re.exec(specifier)))throw new Error("invalid format: "+specifier);var match;this.fill=match[1]||" ",this.align=match[2]||">",this.sign=match[3]||"-",this.symbol=match[4]||"",this.zero=!!match[5],this.width=match[6]&&+match[6],this.comma=!!match[7],this.precision=match[8]&&+match[8].slice(1),this.trim=!!match[9],this.type=match[10]||""}function formatRounded(x,p){var d=formatDecimal(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1];return exponent<0?"0."+new Array(-exponent).join("0")+coefficient:coefficient.length>exponent+1?coefficient.slice(0,exponent+1)+"."+coefficient.slice(exponent+1):coefficient+new Array(exponent-coefficient.length+2).join("0")}formatSpecifier.prototype=FormatSpecifier.prototype,FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var formatTypes={"%":function(x,p){return(100*x).toFixed(p)},b:function(x){return Math.round(x).toString(2)},c:function(x){return x+""},d:function(x){return Math.round(x).toString(10)},e:function(x,p){return x.toExponential(p)},f:function(x,p){return x.toFixed(p)},g:function(x,p){return x.toPrecision(p)},o:function(x){return Math.round(x).toString(8)},p:function(x,p){return formatRounded(100*x,p)},r:formatRounded,s:function(x,p){var d=formatDecimal(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1],i=exponent-(prefixExponent=3*Math.max(-8,Math.min(8,Math.floor(exponent/3))))+1,n=coefficient.length;return i===n?coefficient:i>n?coefficient+new Array(i-n+1).join("0"):i>0?coefficient.slice(0,i)+"."+coefficient.slice(i):"0."+new Array(1-i).join("0")+formatDecimal(x,Math.max(0,p+i-1))[0]},X:function(x){return Math.round(x).toString(16).toUpperCase()},x:function(x){return Math.round(x).toString(16)}};function identity(x){return x}var locale,prefixes=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function formatLocale(locale){var grouping,thousands,group=locale.grouping&&locale.thousands?(grouping=locale.grouping,thousands=locale.thousands,function(value,width){for(var i=value.length,t=[],j=0,g=grouping[0],length=0;i>0&&g>0&&(length+g+1>width&&(g=Math.max(1,width-length)),t.push(value.substring(i-=g,i+g)),!((length+=g+1)>width));)g=grouping[j=(j+1)%grouping.length];return t.reverse().join(thousands)}):identity,currency=locale.currency,decimal=locale.decimal,numerals=locale.numerals?function(numerals){return function(value){return value.replace(/[0-9]/g,function(i){return numerals[+i]})}}(locale.numerals):identity,percent=locale.percent||"%";function newFormat(specifier){var fill=(specifier=formatSpecifier(specifier)).fill,align=specifier.align,sign=specifier.sign,symbol=specifier.symbol,zero=specifier.zero,width=specifier.width,comma=specifier.comma,precision=specifier.precision,trim=specifier.trim,type=specifier.type;"n"===type?(comma=!0,type="g"):formatTypes[type]||(null==precision&&(precision=12),trim=!0,type="g"),(zero||"0"===fill&&"="===align)&&(zero=!0,fill="0",align="=");var prefix="$"===symbol?currency[0]:"#"===symbol&&/[boxX]/.test(type)?"0"+type.toLowerCase():"",suffix="$"===symbol?currency[1]:/[%p]/.test(type)?percent:"",formatType=formatTypes[type],maybeSuffix=/[defgprs%]/.test(type);function format(value){var i,n,c,valuePrefix=prefix,valueSuffix=suffix;if("c"===type)valueSuffix=formatType(value)+valueSuffix,value="";else{var valueNegative=(value=+value)<0;if(value=formatType(Math.abs(value),precision),trim&&(value=function(s){out:for(var i1,n=s.length,i=1,i0=-1;i<n;++i)switch(s[i]){case".":i0=i1=i;break;case"0":0===i0&&(i0=i),i1=i;break;default:if(i0>0){if(!+s[i])break out;i0=0}}return i0>0?s.slice(0,i0)+s.slice(i1+1):s}(value)),valueNegative&&0==+value&&(valueNegative=!1),valuePrefix=(valueNegative?"("===sign?sign:"-":"-"===sign||"("===sign?"":sign)+valuePrefix,valueSuffix=("s"===type?prefixes[8+prefixExponent/3]:"")+valueSuffix+(valueNegative&&"("===sign?")":""),maybeSuffix)for(i=-1,n=value.length;++i<n;)if(48>(c=value.charCodeAt(i))||c>57){valueSuffix=(46===c?decimal+value.slice(i+1):value.slice(i))+valueSuffix,value=value.slice(0,i);break}}comma&&!zero&&(value=group(value,1/0));var length=valuePrefix.length+value.length+valueSuffix.length,padding=length<width?new Array(width-length+1).join(fill):"";switch(comma&&zero&&(value=group(padding+value,padding.length?width-valueSuffix.length:1/0),padding=""),align){case"<":value=valuePrefix+value+valueSuffix+padding;break;case"=":value=valuePrefix+padding+value+valueSuffix;break;case"^":value=padding.slice(0,length=padding.length>>1)+valuePrefix+value+valueSuffix+padding.slice(length);break;default:value=padding+valuePrefix+value+valueSuffix}return numerals(value)}return precision=null==precision?6:/[gprs]/.test(type)?Math.max(1,Math.min(21,precision)):Math.max(0,Math.min(20,precision)),format.toString=function(){return specifier+""},format}return{format:newFormat,formatPrefix:function(specifier,value){var f=newFormat(((specifier=formatSpecifier(specifier)).type="f",specifier)),e=3*Math.max(-8,Math.min(8,Math.floor(exponent(value)/3))),k=Math.pow(10,-e),prefix=prefixes[8+e/3];return function(value){return f(k*value)+prefix}}}}function defaultLocale(definition){return locale=formatLocale(definition),exports.format=locale.format,exports.formatPrefix=locale.formatPrefix,locale}defaultLocale({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),exports.formatDefaultLocale=defaultLocale,exports.formatLocale=formatLocale,exports.formatSpecifier=formatSpecifier,exports.precisionFixed=function(step){return Math.max(0,-exponent(Math.abs(step)))},exports.precisionPrefix=function(step,value){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(exponent(value)/3)))-exponent(Math.abs(step)))},exports.precisionRound=function(step,max){return step=Math.abs(step),max=Math.abs(max)-step,Math.max(0,exponent(max)-exponent(step))+1},Object.defineProperty(exports,"__esModule",{value:!0})}(exports)},function(module,exports,__webpack_require__){!function(exports,d3Time){"use strict";function localDate(d){if(0<=d.y&&d.y<100){var date=new Date(-1,d.m,d.d,d.H,d.M,d.S,d.L);return date.setFullYear(d.y),date}return new Date(d.y,d.m,d.d,d.H,d.M,d.S,d.L)}function utcDate(d){if(0<=d.y&&d.y<100){var date=new Date(Date.UTC(-1,d.m,d.d,d.H,d.M,d.S,d.L));return date.setUTCFullYear(d.y),date}return new Date(Date.UTC(d.y,d.m,d.d,d.H,d.M,d.S,d.L))}function newYear(y){return{y:y,m:0,d:1,H:0,M:0,S:0,L:0}}function formatLocale(locale){var locale_dateTime=locale.dateTime,locale_date=locale.date,locale_time=locale.time,locale_periods=locale.periods,locale_weekdays=locale.days,locale_shortWeekdays=locale.shortDays,locale_months=locale.months,locale_shortMonths=locale.shortMonths,periodRe=formatRe(locale_periods),periodLookup=formatLookup(locale_periods),weekdayRe=formatRe(locale_weekdays),weekdayLookup=formatLookup(locale_weekdays),shortWeekdayRe=formatRe(locale_shortWeekdays),shortWeekdayLookup=formatLookup(locale_shortWeekdays),monthRe=formatRe(locale_months),monthLookup=formatLookup(locale_months),shortMonthRe=formatRe(locale_shortMonths),shortMonthLookup=formatLookup(locale_shortMonths),formats={a:function(d){return locale_shortWeekdays[d.getDay()]},A:function(d){return locale_weekdays[d.getDay()]},b:function(d){return locale_shortMonths[d.getMonth()]},B:function(d){return locale_months[d.getMonth()]},c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:function(d){return locale_periods[+(d.getHours()>=12)]},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},utcFormats={a:function(d){return locale_shortWeekdays[d.getUTCDay()]},A:function(d){return locale_weekdays[d.getUTCDay()]},b:function(d){return locale_shortMonths[d.getUTCMonth()]},B:function(d){return locale_months[d.getUTCMonth()]},c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:function(d){return locale_periods[+(d.getUTCHours()>=12)]},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},parses={a:function(d,string,i){var n=shortWeekdayRe.exec(string.slice(i));return n?(d.w=shortWeekdayLookup[n[0].toLowerCase()],i+n[0].length):-1},A:function(d,string,i){var n=weekdayRe.exec(string.slice(i));return n?(d.w=weekdayLookup[n[0].toLowerCase()],i+n[0].length):-1},b:function(d,string,i){var n=shortMonthRe.exec(string.slice(i));return n?(d.m=shortMonthLookup[n[0].toLowerCase()],i+n[0].length):-1},B:function(d,string,i){var n=monthRe.exec(string.slice(i));return n?(d.m=monthLookup[n[0].toLowerCase()],i+n[0].length):-1},c:function(d,string,i){return parseSpecifier(d,locale_dateTime,string,i)},d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:function(d,string,i){var n=periodRe.exec(string.slice(i));return n?(d.p=periodLookup[n[0].toLowerCase()],i+n[0].length):-1},Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:function(d,string,i){return parseSpecifier(d,locale_date,string,i)},X:function(d,string,i){return parseSpecifier(d,locale_time,string,i)},y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};function newFormat(specifier,formats){return function(date){var c,pad,format,string=[],i=-1,j=0,n=specifier.length;for(date instanceof Date||(date=new Date(+date));++i<n;)37===specifier.charCodeAt(i)&&(string.push(specifier.slice(j,i)),null!=(pad=pads[c=specifier.charAt(++i)])?c=specifier.charAt(++i):pad="e"===c?" ":"0",(format=formats[c])&&(c=format(date,pad)),string.push(c),j=i+1);return string.push(specifier.slice(j,i)),string.join("")}}function newParse(specifier,newDate){return function(string){var week,day,d=newYear(1900),i=parseSpecifier(d,specifier,string+="",0);if(i!=string.length)return null;if("Q"in d)return new Date(d.Q);if("p"in d&&(d.H=d.H%12+12*d.p),"V"in d){if(d.V<1||d.V>53)return null;"w"in d||(d.w=1),"Z"in d?(week=utcDate(newYear(d.y)),day=week.getUTCDay(),week=day>4||0===day?d3Time.utcMonday.ceil(week):d3Time.utcMonday(week),week=d3Time.utcDay.offset(week,7*(d.V-1)),d.y=week.getUTCFullYear(),d.m=week.getUTCMonth(),d.d=week.getUTCDate()+(d.w+6)%7):(week=newDate(newYear(d.y)),day=week.getDay(),week=day>4||0===day?d3Time.timeMonday.ceil(week):d3Time.timeMonday(week),week=d3Time.timeDay.offset(week,7*(d.V-1)),d.y=week.getFullYear(),d.m=week.getMonth(),d.d=week.getDate()+(d.w+6)%7)}else("W"in d||"U"in d)&&("w"in d||(d.w="u"in d?d.u%7:"W"in d?1:0),day="Z"in d?utcDate(newYear(d.y)).getUTCDay():newDate(newYear(d.y)).getDay(),d.m=0,d.d="W"in d?(d.w+6)%7+7*d.W-(day+5)%7:d.w+7*d.U-(day+6)%7);return"Z"in d?(d.H+=d.Z/100|0,d.M+=d.Z%100,utcDate(d)):newDate(d)}}function parseSpecifier(d,specifier,string,j){for(var c,parse,i=0,n=specifier.length,m=string.length;i<n;){if(j>=m)return-1;if(37===(c=specifier.charCodeAt(i++))){if(c=specifier.charAt(i++),!(parse=parses[c in pads?specifier.charAt(i++):c])||(j=parse(d,string,j))<0)return-1}else if(c!=string.charCodeAt(j++))return-1}return j}return formats.x=newFormat(locale_date,formats),formats.X=newFormat(locale_time,formats),formats.c=newFormat(locale_dateTime,formats),utcFormats.x=newFormat(locale_date,utcFormats),utcFormats.X=newFormat(locale_time,utcFormats),utcFormats.c=newFormat(locale_dateTime,utcFormats),{format:function(specifier){var f=newFormat(specifier+="",formats);return f.toString=function(){return specifier},f},parse:function(specifier){var p=newParse(specifier+="",localDate);return p.toString=function(){return specifier},p},utcFormat:function(specifier){var f=newFormat(specifier+="",utcFormats);return f.toString=function(){return specifier},f},utcParse:function(specifier){var p=newParse(specifier,utcDate);return p.toString=function(){return specifier},p}}}var locale,pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad(value,fill,width){var sign=value<0?"-":"",string=(sign?-value:value)+"",length=string.length;return sign+(length<width?new Array(width-length+1).join(fill)+string:string)}function requote(s){return s.replace(requoteRe,"\\$&")}function formatRe(names){return new RegExp("^(?:"+names.map(requote).join("|")+")","i")}function formatLookup(names){for(var map={},i=-1,n=names.length;++i<n;)map[names[i].toLowerCase()]=i;return map}function parseWeekdayNumberSunday(d,string,i){var n=numberRe.exec(string.slice(i,i+1));return n?(d.w=+n[0],i+n[0].length):-1}function parseWeekdayNumberMonday(d,string,i){var n=numberRe.exec(string.slice(i,i+1));return n?(d.u=+n[0],i+n[0].length):-1}function parseWeekNumberSunday(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.U=+n[0],i+n[0].length):-1}function parseWeekNumberISO(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.V=+n[0],i+n[0].length):-1}function parseWeekNumberMonday(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.W=+n[0],i+n[0].length):-1}function parseFullYear(d,string,i){var n=numberRe.exec(string.slice(i,i+4));return n?(d.y=+n[0],i+n[0].length):-1}function parseYear(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.y=+n[0]+(+n[0]>68?1900:2e3),i+n[0].length):-1}function parseZone(d,string,i){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(string.slice(i,i+6));return n?(d.Z=n[1]?0:-(n[2]+(n[3]||"00")),i+n[0].length):-1}function parseMonthNumber(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.m=n[0]-1,i+n[0].length):-1}function parseDayOfMonth(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.d=+n[0],i+n[0].length):-1}function parseDayOfYear(d,string,i){var n=numberRe.exec(string.slice(i,i+3));return n?(d.m=0,d.d=+n[0],i+n[0].length):-1}function parseHour24(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.H=+n[0],i+n[0].length):-1}function parseMinutes(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.M=+n[0],i+n[0].length):-1}function parseSeconds(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.S=+n[0],i+n[0].length):-1}function parseMilliseconds(d,string,i){var n=numberRe.exec(string.slice(i,i+3));return n?(d.L=+n[0],i+n[0].length):-1}function parseMicroseconds(d,string,i){var n=numberRe.exec(string.slice(i,i+6));return n?(d.L=Math.floor(n[0]/1e3),i+n[0].length):-1}function parseLiteralPercent(d,string,i){var n=percentRe.exec(string.slice(i,i+1));return n?i+n[0].length:-1}function parseUnixTimestamp(d,string,i){var n=numberRe.exec(string.slice(i));return n?(d.Q=+n[0],i+n[0].length):-1}function parseUnixTimestampSeconds(d,string,i){var n=numberRe.exec(string.slice(i));return n?(d.Q=1e3*+n[0],i+n[0].length):-1}function formatDayOfMonth(d,p){return pad(d.getDate(),p,2)}function formatHour24(d,p){return pad(d.getHours(),p,2)}function formatHour12(d,p){return pad(d.getHours()%12||12,p,2)}function formatDayOfYear(d,p){return pad(1+d3Time.timeDay.count(d3Time.timeYear(d),d),p,3)}function formatMilliseconds(d,p){return pad(d.getMilliseconds(),p,3)}function formatMicroseconds(d,p){return formatMilliseconds(d,p)+"000"}function formatMonthNumber(d,p){return pad(d.getMonth()+1,p,2)}function formatMinutes(d,p){return pad(d.getMinutes(),p,2)}function formatSeconds(d,p){return pad(d.getSeconds(),p,2)}function formatWeekdayNumberMonday(d){var day=d.getDay();return 0===day?7:day}function formatWeekNumberSunday(d,p){return pad(d3Time.timeSunday.count(d3Time.timeYear(d),d),p,2)}function formatWeekNumberISO(d,p){var day=d.getDay();return d=day>=4||0===day?d3Time.timeThursday(d):d3Time.timeThursday.ceil(d),pad(d3Time.timeThursday.count(d3Time.timeYear(d),d)+(4===d3Time.timeYear(d).getDay()),p,2)}function formatWeekdayNumberSunday(d){return d.getDay()}function formatWeekNumberMonday(d,p){return pad(d3Time.timeMonday.count(d3Time.timeYear(d),d),p,2)}function formatYear(d,p){return pad(d.getFullYear()%100,p,2)}function formatFullYear(d,p){return pad(d.getFullYear()%1e4,p,4)}function formatZone(d){var z=d.getTimezoneOffset();return(z>0?"-":(z*=-1,"+"))+pad(z/60|0,"0",2)+pad(z%60,"0",2)}function formatUTCDayOfMonth(d,p){return pad(d.getUTCDate(),p,2)}function formatUTCHour24(d,p){return pad(d.getUTCHours(),p,2)}function formatUTCHour12(d,p){return pad(d.getUTCHours()%12||12,p,2)}function formatUTCDayOfYear(d,p){return pad(1+d3Time.utcDay.count(d3Time.utcYear(d),d),p,3)}function formatUTCMilliseconds(d,p){return pad(d.getUTCMilliseconds(),p,3)}function formatUTCMicroseconds(d,p){return formatUTCMilliseconds(d,p)+"000"}function formatUTCMonthNumber(d,p){return pad(d.getUTCMonth()+1,p,2)}function formatUTCMinutes(d,p){return pad(d.getUTCMinutes(),p,2)}function formatUTCSeconds(d,p){return pad(d.getUTCSeconds(),p,2)}function formatUTCWeekdayNumberMonday(d){var dow=d.getUTCDay();return 0===dow?7:dow}function formatUTCWeekNumberSunday(d,p){return pad(d3Time.utcSunday.count(d3Time.utcYear(d),d),p,2)}function formatUTCWeekNumberISO(d,p){var day=d.getUTCDay();return d=day>=4||0===day?d3Time.utcThursday(d):d3Time.utcThursday.ceil(d),pad(d3Time.utcThursday.count(d3Time.utcYear(d),d)+(4===d3Time.utcYear(d).getUTCDay()),p,2)}function formatUTCWeekdayNumberSunday(d){return d.getUTCDay()}function formatUTCWeekNumberMonday(d,p){return pad(d3Time.utcMonday.count(d3Time.utcYear(d),d),p,2)}function formatUTCYear(d,p){return pad(d.getUTCFullYear()%100,p,2)}function formatUTCFullYear(d,p){return pad(d.getUTCFullYear()%1e4,p,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(d){return+d}function formatUnixTimestampSeconds(d){return Math.floor(+d/1e3)}function defaultLocale(definition){return locale=formatLocale(definition),exports.timeFormat=locale.format,exports.timeParse=locale.parse,exports.utcFormat=locale.utcFormat,exports.utcParse=locale.utcParse,locale}defaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var formatIso=Date.prototype.toISOString?function(date){return date.toISOString()}:exports.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),parseIso=+new Date("2000-01-01T00:00:00.000Z")?function(string){var date=new Date(string);return isNaN(date)?null:date}:exports.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");exports.timeFormatDefaultLocale=defaultLocale,exports.timeFormatLocale=formatLocale,exports.isoFormat=formatIso,exports.isoParse=parseIso,Object.defineProperty(exports,"__esModule",{value:!0})}(exports,__webpack_require__(384))},function(module,exports,__webpack_require__){"use strict";function defaultEqualityCheck(a,b){return a===b}function defaultMemoize(func){var equalityCheck=arguments.length>1&&void 0!==arguments[1]?arguments[1]:defaultEqualityCheck,lastArgs=null,lastResult=null;return function(){return function(equalityCheck,prev,next){if(null===prev||null===next||prev.length!==next.length)return!1;for(var length=prev.length,i=0;i<length;i++)if(!equalityCheck(prev[i],next[i]))return!1;return!0}(equalityCheck,lastArgs,arguments)||(lastResult=func.apply(null,arguments)),lastArgs=arguments,lastResult}}function createSelectorCreator(memoize){for(var _len=arguments.length,memoizeOptions=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)memoizeOptions[_key-1]=arguments[_key];return function(){for(var _len2=arguments.length,funcs=Array(_len2),_key2=0;_key2<_len2;_key2++)funcs[_key2]=arguments[_key2];var recomputations=0,resultFunc=funcs.pop(),dependencies=function(funcs){var dependencies=Array.isArray(funcs[0])?funcs[0]:funcs;if(!dependencies.every(function(dep){return"function"==typeof dep})){var dependencyTypes=dependencies.map(function(dep){return typeof dep}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+dependencyTypes+"]")}return dependencies}(funcs),memoizedResultFunc=memoize.apply(void 0,[function(){return recomputations++,resultFunc.apply(null,arguments)}].concat(memoizeOptions)),selector=memoize(function(){for(var params=[],length=dependencies.length,i=0;i<length;i++)params.push(dependencies[i].apply(null,arguments));return memoizedResultFunc.apply(null,params)});return selector.resultFunc=resultFunc,selector.dependencies=dependencies,selector.recomputations=function(){return recomputations},selector.resetRecomputations=function(){return recomputations=0},selector}}exports.__esModule=!0,exports.defaultMemoize=defaultMemoize,exports.createSelectorCreator=createSelectorCreator,exports.createStructuredSelector=function(selectors){var selectorCreator=arguments.length>1&&void 0!==arguments[1]?arguments[1]:createSelector;if("object"!=typeof selectors)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof selectors);var objectKeys=Object.keys(selectors);return selectorCreator(objectKeys.map(function(key){return selectors[key]}),function(){for(var _len3=arguments.length,values=Array(_len3),_key3=0;_key3<_len3;_key3++)values[_key3]=arguments[_key3];return values.reduce(function(composition,value,index){return composition[objectKeys[index]]=value,composition},{})})};var createSelector=exports.createSelector=createSelectorCreator(defaultMemoize)},function(module,exports,__webpack_require__){"use strict";var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=__webpack_require__(84),React=__importStar(__webpack_require__(8)),Disc_1=__importDefault(__webpack_require__(386)),styles={outer:{display:"flex",flexDirection:"column"},disc:{marginRight:5},item:{outer:{display:"flex",flexDirection:"row",padding:"3px 0",alignItems:"center"},caption:{marginLeft:2}}};exports.default=function(props){var colorsRGBA=core_1.getDiffColorsRGBA(props.colors),pos=colorsRGBA.positive.locationCircles,neg=colorsRGBA.negative.locationCircles;return React.createElement("div",{style:styles.outer},React.createElement("div",{style:styles.item.outer},React.createElement(Disc_1.default,{size:20,inner:pos.inner,outer:pos.inner,outline:pos.inner}),React.createElement("div",{style:styles.item.caption},props.positiveText||"positive difference")),React.createElement("div",{style:styles.item.outer},React.createElement(Disc_1.default,{size:20,inner:neg.inner,outer:neg.inner,outline:neg.inner}),React.createElement("div",{style:styles.item.caption},props.negativeText||"negative difference")))}},function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__importDefault(__webpack_require__(8)),styles_outer={position:"absolute",background:"#fff",padding:10,borderRadius:4,border:"1px solid #ccc"};exports.default=function(_a){var style=_a.style,top=_a.top,left=_a.left,right=_a.right,bottom=_a.bottom,children=_a.children;return react_1.default.createElement("div",{style:__assign({},styles_outer,style,{top:top,left:left,right:right,bottom:bottom})},children)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var geo_viewport_1=__webpack_require__(865),d3_geo_1=__webpack_require__(867);function getViewStateForFeatures(featureCollection,size,opts){var _a=opts||{},_b=_a.pad,pad=void 0===_b?.05:_b,_c=_a.tileSize,tileSize=void 0===_c?512:_c,_d=_a.minZoom,minZoom=void 0===_d?0:_d,_e=_a.maxZoom,maxZoom=void 0===_e?100:_e,_f=d3_geo_1.geoBounds(featureCollection),_g=_f[0],x1=_g[0],y1=_g[1],_h=_f[1],x2=_h[0],y2=_h[1],bounds=[x1-pad*(x2-x1),y1-pad*(y2-y1),x2+pad*(x2-x1),y2+pad*(y2-y1)],_j=geo_viewport_1.viewport(bounds,size,void 0,void 0,tileSize,!0),_k=_j.center,longitude=_k[0],latitude=_k[1],zoom=_j.zoom;return{longitude:longitude,latitude:latitude,zoom:Math.max(Math.min(maxZoom,zoom),minZoom),bearing:0,pitch:0}}exports.getViewStateForFeatures=getViewStateForFeatures,exports.getViewStateForLocations=function(locations,getLocationCentroid,size,opts){return getViewStateForFeatures({type:"GeometryCollection",geometries:locations.map(function(location){return{type:"Point",coordinates:getLocationCentroid(location)}})},size,opts)}},function(module,exports,__webpack_require__){var SphericalMercator=__webpack_require__(866),smCache={};function fetchMerc(tileSize){return smCache[tileSize=tileSize||256]||(smCache[tileSize]=new SphericalMercator({size:tileSize})),smCache[tileSize]}module.exports.viewport=function(bounds,dimensions,minzoom,maxzoom,tileSize,allowFloat){minzoom=void 0===minzoom?0:minzoom,maxzoom=void 0===maxzoom?20:maxzoom;var merc=fetchMerc(tileSize),base=maxzoom,bl=merc.px([bounds[0],bounds[1]],base),tr=merc.px([bounds[2],bounds[3]],base),width=tr[0]-bl[0],height=bl[1]-tr[1],ratios=[width/dimensions[0],height/dimensions[1]],center=[(bounds[0]+bounds[2])/2,(bounds[1]+bounds[3])/2],adjusted=function(base,ratios,allowFloat){var adjusted=Math.min(base-Math.log(ratios[0])/Math.log(2),base-Math.log(ratios[1])/Math.log(2));return allowFloat?adjusted:Math.floor(adjusted)}(base,ratios,allowFloat),zoom=Math.max(minzoom,Math.min(maxzoom,adjusted));return{center:center,zoom:zoom}},module.exports.bounds=function(viewport,zoom,dimensions,tileSize){void 0!==viewport.lon&&(viewport=[viewport.lon,viewport.lat]);var merc=fetchMerc(tileSize),px=merc.px(viewport,zoom),tl=merc.ll([px[0]-dimensions[0]/2,px[1]-dimensions[1]/2],zoom),br=merc.ll([px[0]+dimensions[0]/2,px[1]+dimensions[1]/2],zoom);return[tl[0],br[1],br[0],tl[1]]}},function(module,exports,__webpack_require__){var SphericalMercator=function(){var cache={},D2R=Math.PI/180,R2D=180/Math.PI,A=6378137,MAXEXTENT=20037508.342789244;function isFloat(n){return Number(n)===n&&n%1!=0}function SphericalMercator(options){if(options=options||{},this.size=options.size||256,!cache[this.size]){var size=this.size,c=cache[this.size]={};c.Bc=[],c.Cc=[],c.zc=[],c.Ac=[];for(var d=0;d<30;d++)c.Bc.push(size/360),c.Cc.push(size/(2*Math.PI)),c.zc.push(size/2),c.Ac.push(size),size*=2}this.Bc=cache[this.size].Bc,this.Cc=cache[this.size].Cc,this.zc=cache[this.size].zc,this.Ac=cache[this.size].Ac}return SphericalMercator.prototype.px=function(ll,zoom){if(isFloat(zoom)){var size=this.size*Math.pow(2,zoom),d=size/2,bc=size/360,cc=size/(2*Math.PI),ac=size,f=Math.min(Math.max(Math.sin(D2R*ll[1]),-.9999),.9999);return(x=d+ll[0]*bc)>ac&&(x=ac),(y=d+.5*Math.log((1+f)/(1-f))*-cc)>ac&&(y=ac),[x,y]}d=this.zc[zoom],f=Math.min(Math.max(Math.sin(D2R*ll[1]),-.9999),.9999);var x=Math.round(d+ll[0]*this.Bc[zoom]),y=Math.round(d+.5*Math.log((1+f)/(1-f))*-this.Cc[zoom]);return x>this.Ac[zoom]&&(x=this.Ac[zoom]),y>this.Ac[zoom]&&(y=this.Ac[zoom]),[x,y]},SphericalMercator.prototype.ll=function(px,zoom){if(isFloat(zoom)){var size=this.size*Math.pow(2,zoom),bc=size/360,cc=size/(2*Math.PI),zc=size/2,g=(px[1]-zc)/-cc;return[(px[0]-zc)/bc,R2D*(2*Math.atan(Math.exp(g))-.5*Math.PI)]}g=(px[1]-this.zc[zoom])/-this.Cc[zoom];return[(px[0]-this.zc[zoom])/this.Bc[zoom],R2D*(2*Math.atan(Math.exp(g))-.5*Math.PI)]},SphericalMercator.prototype.bbox=function(x,y,zoom,tms_style,srs){tms_style&&(y=Math.pow(2,zoom)-1-y);var ll=[x*this.size,(+y+1)*this.size],ur=[(+x+1)*this.size,y*this.size],bbox=this.ll(ll,zoom).concat(this.ll(ur,zoom));return"900913"===srs?this.convert(bbox,"900913"):bbox},SphericalMercator.prototype.xyz=function(bbox,zoom,tms_style,srs){"900913"===srs&&(bbox=this.convert(bbox,"WGS84"));var ll=[bbox[0],bbox[1]],ur=[bbox[2],bbox[3]],px_ll=this.px(ll,zoom),px_ur=this.px(ur,zoom),x=[Math.floor(px_ll[0]/this.size),Math.floor((px_ur[0]-1)/this.size)],y=[Math.floor(px_ur[1]/this.size),Math.floor((px_ll[1]-1)/this.size)],bounds={minX:Math.min.apply(Math,x)<0?0:Math.min.apply(Math,x),minY:Math.min.apply(Math,y)<0?0:Math.min.apply(Math,y),maxX:Math.max.apply(Math,x),maxY:Math.max.apply(Math,y)};if(tms_style){var tms={minY:Math.pow(2,zoom)-1-bounds.maxY,maxY:Math.pow(2,zoom)-1-bounds.minY};bounds.minY=tms.minY,bounds.maxY=tms.maxY}return bounds},SphericalMercator.prototype.convert=function(bbox,to){return"900913"===to?this.forward(bbox.slice(0,2)).concat(this.forward(bbox.slice(2,4))):this.inverse(bbox.slice(0,2)).concat(this.inverse(bbox.slice(2,4)))},SphericalMercator.prototype.forward=function(ll){var xy=[A*ll[0]*D2R,A*Math.log(Math.tan(.25*Math.PI+.5*ll[1]*D2R))];return xy[0]>MAXEXTENT&&(xy[0]=MAXEXTENT),xy[0]<-MAXEXTENT&&(xy[0]=-MAXEXTENT),xy[1]>MAXEXTENT&&(xy[1]=MAXEXTENT),xy[1]<-MAXEXTENT&&(xy[1]=-MAXEXTENT),xy},SphericalMercator.prototype.inverse=function(xy){return[xy[0]*R2D/A,(.5*Math.PI-2*Math.atan(Math.exp(-xy[1]/A)))*R2D]},SphericalMercator}();module.exports=SphericalMercator},function(module,exports,__webpack_require__){!function(exports,d3Array){"use strict";function adder(){return new Adder}function Adder(){this.reset()}Adder.prototype={constructor:Adder,reset:function(){this.s=this.t=0},add:function(y){add(temp,y,this.t),add(this,temp.s,this.s),this.s?this.t+=temp.t:this.s=temp.t},valueOf:function(){return this.s}};var temp=new Adder;function add(adder,a,b){var x=adder.s=a+b,bv=x-a,av=x-bv;adder.t=a-av+(b-bv)}var epsilon=1e-6,epsilon2=1e-12,pi=Math.PI,halfPi=pi/2,quarterPi=pi/4,tau=2*pi,degrees=180/pi,radians=pi/180,abs=Math.abs,atan=Math.atan,atan2=Math.atan2,cos=Math.cos,ceil=Math.ceil,exp=Math.exp,log=Math.log,pow=Math.pow,sin=Math.sin,sign=Math.sign||function(x){return x>0?1:x<0?-1:0},sqrt=Math.sqrt,tan=Math.tan;function acos(x){return x>1?0:x<-1?pi:Math.acos(x)}function asin(x){return x>1?halfPi:x<-1?-halfPi:Math.asin(x)}function haversin(x){return(x=sin(x/2))*x}function noop(){}function streamGeometry(geometry,stream){geometry&&streamGeometryType.hasOwnProperty(geometry.type)&&streamGeometryType[geometry.type](geometry,stream)}var streamObjectType={Feature:function(object,stream){streamGeometry(object.geometry,stream)},FeatureCollection:function(object,stream){for(var features=object.features,i=-1,n=features.length;++i<n;)streamGeometry(features[i].geometry,stream)}},streamGeometryType={Sphere:function(object,stream){stream.sphere()},Point:function(object,stream){object=object.coordinates,stream.point(object[0],object[1],object[2])},MultiPoint:function(object,stream){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)object=coordinates[i],stream.point(object[0],object[1],object[2])},LineString:function(object,stream){streamLine(object.coordinates,stream,0)},MultiLineString:function(object,stream){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)streamLine(coordinates[i],stream,0)},Polygon:function(object,stream){streamPolygon(object.coordinates,stream)},MultiPolygon:function(object,stream){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)streamPolygon(coordinates[i],stream)},GeometryCollection:function(object,stream){for(var geometries=object.geometries,i=-1,n=geometries.length;++i<n;)streamGeometry(geometries[i],stream)}};function streamLine(coordinates,stream,closed){var coordinate,i=-1,n=coordinates.length-closed;for(stream.lineStart();++i<n;)coordinate=coordinates[i],stream.point(coordinate[0],coordinate[1],coordinate[2]);stream.lineEnd()}function streamPolygon(coordinates,stream){var i=-1,n=coordinates.length;for(stream.polygonStart();++i<n;)streamLine(coordinates[i],stream,1);stream.polygonEnd()}function geoStream(object,stream){object&&streamObjectType.hasOwnProperty(object.type)?streamObjectType[object.type](object,stream):streamGeometry(object,stream)}var lambda00,phi00,lambda0,cosPhi0,sinPhi0,areaRingSum=adder(),areaSum=adder(),areaStream={point:noop,lineStart:noop,lineEnd:noop,polygonStart:function(){areaRingSum.reset(),areaStream.lineStart=areaRingStart,areaStream.lineEnd=areaRingEnd},polygonEnd:function(){var areaRing=+areaRingSum;areaSum.add(areaRing<0?tau+areaRing:areaRing),this.lineStart=this.lineEnd=this.point=noop},sphere:function(){areaSum.add(tau)}};function areaRingStart(){areaStream.point=areaPointFirst}function areaRingEnd(){areaPoint(lambda00,phi00)}function areaPointFirst(lambda,phi){areaStream.point=areaPoint,lambda00=lambda,phi00=phi,lambda0=lambda*=radians,cosPhi0=cos(phi=(phi*=radians)/2+quarterPi),sinPhi0=sin(phi)}function areaPoint(lambda,phi){var dLambda=(lambda*=radians)-lambda0,sdLambda=dLambda>=0?1:-1,adLambda=sdLambda*dLambda,cosPhi=cos(phi=(phi*=radians)/2+quarterPi),sinPhi=sin(phi),k=sinPhi0*sinPhi,u=cosPhi0*cosPhi+k*cos(adLambda),v=k*sdLambda*sin(adLambda);areaRingSum.add(atan2(v,u)),lambda0=lambda,cosPhi0=cosPhi,sinPhi0=sinPhi}function spherical(cartesian){return[atan2(cartesian[1],cartesian[0]),asin(cartesian[2])]}function cartesian(spherical){var lambda=spherical[0],phi=spherical[1],cosPhi=cos(phi);return[cosPhi*cos(lambda),cosPhi*sin(lambda),sin(phi)]}function cartesianDot(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function cartesianCross(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function cartesianAddInPlace(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function cartesianScale(vector,k){return[vector[0]*k,vector[1]*k,vector[2]*k]}function cartesianNormalizeInPlace(d){var l=sqrt(d[0]*d[0]+d[1]*d[1]+d[2]*d[2]);d[0]/=l,d[1]/=l,d[2]/=l}var lambda0$1,phi0,lambda1,phi1,lambda2,lambda00$1,phi00$1,p0,ranges,range,W0,W1,X0,Y0,Z0,X1,Y1,Z1,X2,Y2,Z2,lambda00$2,phi00$2,x0,y0,z0,deltaSum=adder(),boundsStream={point:boundsPoint,lineStart:boundsLineStart,lineEnd:boundsLineEnd,polygonStart:function(){boundsStream.point=boundsRingPoint,boundsStream.lineStart=boundsRingStart,boundsStream.lineEnd=boundsRingEnd,deltaSum.reset(),areaStream.polygonStart()},polygonEnd:function(){areaStream.polygonEnd(),boundsStream.point=boundsPoint,boundsStream.lineStart=boundsLineStart,boundsStream.lineEnd=boundsLineEnd,areaRingSum<0?(lambda0$1=-(lambda1=180),phi0=-(phi1=90)):deltaSum>epsilon?phi1=90:deltaSum<-epsilon&&(phi0=-90),range[0]=lambda0$1,range[1]=lambda1}};function boundsPoint(lambda,phi){ranges.push(range=[lambda0$1=lambda,lambda1=lambda]),phi<phi0&&(phi0=phi),phi>phi1&&(phi1=phi)}function linePoint(lambda,phi){var p=cartesian([lambda*radians,phi*radians]);if(p0){var normal=cartesianCross(p0,p),equatorial=[normal[1],-normal[0],0],inflection=cartesianCross(equatorial,normal);cartesianNormalizeInPlace(inflection),inflection=spherical(inflection);var phii,delta=lambda-lambda2,sign$$1=delta>0?1:-1,lambdai=inflection[0]*degrees*sign$$1,antimeridian=abs(delta)>180;antimeridian^(sign$$1*lambda2<lambdai&&lambdai<sign$$1*lambda)?(phii=inflection[1]*degrees)>phi1&&(phi1=phii):antimeridian^(sign$$1*lambda2<(lambdai=(lambdai+360)%360-180)&&lambdai<sign$$1*lambda)?(phii=-inflection[1]*degrees)<phi0&&(phi0=phii):(phi<phi0&&(phi0=phi),phi>phi1&&(phi1=phi)),antimeridian?lambda<lambda2?angle(lambda0$1,lambda)>angle(lambda0$1,lambda1)&&(lambda1=lambda):angle(lambda,lambda1)>angle(lambda0$1,lambda1)&&(lambda0$1=lambda):lambda1>=lambda0$1?(lambda<lambda0$1&&(lambda0$1=lambda),lambda>lambda1&&(lambda1=lambda)):lambda>lambda2?angle(lambda0$1,lambda)>angle(lambda0$1,lambda1)&&(lambda1=lambda):angle(lambda,lambda1)>angle(lambda0$1,lambda1)&&(lambda0$1=lambda)}else ranges.push(range=[lambda0$1=lambda,lambda1=lambda]);phi<phi0&&(phi0=phi),phi>phi1&&(phi1=phi),p0=p,lambda2=lambda}function boundsLineStart(){boundsStream.point=linePoint}function boundsLineEnd(){range[0]=lambda0$1,range[1]=lambda1,boundsStream.point=boundsPoint,p0=null}function boundsRingPoint(lambda,phi){if(p0){var delta=lambda-lambda2;deltaSum.add(abs(delta)>180?delta+(delta>0?360:-360):delta)}else lambda00$1=lambda,phi00$1=phi;areaStream.point(lambda,phi),linePoint(lambda,phi)}function boundsRingStart(){areaStream.lineStart()}function boundsRingEnd(){boundsRingPoint(lambda00$1,phi00$1),areaStream.lineEnd(),abs(deltaSum)>epsilon&&(lambda0$1=-(lambda1=180)),range[0]=lambda0$1,range[1]=lambda1,p0=null}function angle(lambda0,lambda1){return(lambda1-=lambda0)<0?lambda1+360:lambda1}function rangeCompare(a,b){return a[0]-b[0]}function rangeContains(range,x){return range[0]<=range[1]?range[0]<=x&&x<=range[1]:x<range[0]||range[1]<x}var centroidStream={sphere:noop,point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function(){centroidStream.lineStart=centroidRingStart,centroidStream.lineEnd=centroidRingEnd},polygonEnd:function(){centroidStream.lineStart=centroidLineStart,centroidStream.lineEnd=centroidLineEnd}};function centroidPoint(lambda,phi){lambda*=radians;var cosPhi=cos(phi*=radians);centroidPointCartesian(cosPhi*cos(lambda),cosPhi*sin(lambda),sin(phi))}function centroidPointCartesian(x,y,z){X0+=(x-X0)/++W0,Y0+=(y-Y0)/W0,Z0+=(z-Z0)/W0}function centroidLineStart(){centroidStream.point=centroidLinePointFirst}function centroidLinePointFirst(lambda,phi){lambda*=radians;var cosPhi=cos(phi*=radians);x0=cosPhi*cos(lambda),y0=cosPhi*sin(lambda),z0=sin(phi),centroidStream.point=centroidLinePoint,centroidPointCartesian(x0,y0,z0)}function centroidLinePoint(lambda,phi){lambda*=radians;var cosPhi=cos(phi*=radians),x=cosPhi*cos(lambda),y=cosPhi*sin(lambda),z=sin(phi),w=atan2(sqrt((w=y0*z-z0*y)*w+(w=z0*x-x0*z)*w+(w=x0*y-y0*x)*w),x0*x+y0*y+z0*z);W1+=w,X1+=w*(x0+(x0=x)),Y1+=w*(y0+(y0=y)),Z1+=w*(z0+(z0=z)),centroidPointCartesian(x0,y0,z0)}function centroidLineEnd(){centroidStream.point=centroidPoint}function centroidRingStart(){centroidStream.point=centroidRingPointFirst}function centroidRingEnd(){centroidRingPoint(lambda00$2,phi00$2),centroidStream.point=centroidPoint}function centroidRingPointFirst(lambda,phi){lambda00$2=lambda,phi00$2=phi,lambda*=radians,phi*=radians,centroidStream.point=centroidRingPoint;var cosPhi=cos(phi);x0=cosPhi*cos(lambda),y0=cosPhi*sin(lambda),z0=sin(phi),centroidPointCartesian(x0,y0,z0)}function centroidRingPoint(lambda,phi){lambda*=radians;var cosPhi=cos(phi*=radians),x=cosPhi*cos(lambda),y=cosPhi*sin(lambda),z=sin(phi),cx=y0*z-z0*y,cy=z0*x-x0*z,cz=x0*y-y0*x,m=sqrt(cx*cx+cy*cy+cz*cz),w=asin(m),v=m&&-w/m;X2+=v*cx,Y2+=v*cy,Z2+=v*cz,W1+=w,X1+=w*(x0+(x0=x)),Y1+=w*(y0+(y0=y)),Z1+=w*(z0+(z0=z)),centroidPointCartesian(x0,y0,z0)}function constant(x){return function(){return x}}function compose(a,b){function compose(x,y){return x=a(x,y),b(x[0],x[1])}return a.invert&&b.invert&&(compose.invert=function(x,y){return(x=b.invert(x,y))&&a.invert(x[0],x[1])}),compose}function rotationIdentity(lambda,phi){return[abs(lambda)>pi?lambda+Math.round(-lambda/tau)*tau:lambda,phi]}function rotateRadians(deltaLambda,deltaPhi,deltaGamma){return(deltaLambda%=tau)?deltaPhi||deltaGamma?compose(rotationLambda(deltaLambda),rotationPhiGamma(deltaPhi,deltaGamma)):rotationLambda(deltaLambda):deltaPhi||deltaGamma?rotationPhiGamma(deltaPhi,deltaGamma):rotationIdentity}function forwardRotationLambda(deltaLambda){return function(lambda,phi){return[(lambda+=deltaLambda)>pi?lambda-tau:lambda<-pi?lambda+tau:lambda,phi]}}function rotationLambda(deltaLambda){var rotation=forwardRotationLambda(deltaLambda);return rotation.invert=forwardRotationLambda(-deltaLambda),rotation}function rotationPhiGamma(deltaPhi,deltaGamma){var cosDeltaPhi=cos(deltaPhi),sinDeltaPhi=sin(deltaPhi),cosDeltaGamma=cos(deltaGamma),sinDeltaGamma=sin(deltaGamma);function rotation(lambda,phi){var cosPhi=cos(phi),x=cos(lambda)*cosPhi,y=sin(lambda)*cosPhi,z=sin(phi),k=z*cosDeltaPhi+x*sinDeltaPhi;return[atan2(y*cosDeltaGamma-k*sinDeltaGamma,x*cosDeltaPhi-z*sinDeltaPhi),asin(k*cosDeltaGamma+y*sinDeltaGamma)]}return rotation.invert=function(lambda,phi){var cosPhi=cos(phi),x=cos(lambda)*cosPhi,y=sin(lambda)*cosPhi,z=sin(phi),k=z*cosDeltaGamma-y*sinDeltaGamma;return[atan2(y*cosDeltaGamma+z*sinDeltaGamma,x*cosDeltaPhi+k*sinDeltaPhi),asin(k*cosDeltaPhi-x*sinDeltaPhi)]},rotation}function rotation(rotate){function forward(coordinates){return(coordinates=rotate(coordinates[0]*radians,coordinates[1]*radians))[0]*=degrees,coordinates[1]*=degrees,coordinates}return rotate=rotateRadians(rotate[0]*radians,rotate[1]*radians,rotate.length>2?rotate[2]*radians:0),forward.invert=function(coordinates){return(coordinates=rotate.invert(coordinates[0]*radians,coordinates[1]*radians))[0]*=degrees,coordinates[1]*=degrees,coordinates},forward}function circleStream(stream,radius,delta,direction,t0,t1){if(delta){var cosRadius=cos(radius),sinRadius=sin(radius),step=direction*delta;null==t0?(t0=radius+direction*tau,t1=radius-step/2):(t0=circleRadius(cosRadius,t0),t1=circleRadius(cosRadius,t1),(direction>0?t0<t1:t0>t1)&&(t0+=direction*tau));for(var point,t=t0;direction>0?t>t1:t<t1;t-=step)point=spherical([cosRadius,-sinRadius*cos(t),-sinRadius*sin(t)]),stream.point(point[0],point[1])}}function circleRadius(cosRadius,point){(point=cartesian(point))[0]-=cosRadius,cartesianNormalizeInPlace(point);var radius=acos(-point[1]);return((-point[2]<0?-radius:radius)+tau-epsilon)%tau}function clipBuffer(){var line,lines=[];return{point:function(x,y){line.push([x,y])},lineStart:function(){lines.push(line=[])},lineEnd:noop,rejoin:function(){lines.length>1&&lines.push(lines.pop().concat(lines.shift()))},result:function(){var result=lines;return lines=[],line=null,result}}}function pointEqual(a,b){return abs(a[0]-b[0])<epsilon&&abs(a[1]-b[1])<epsilon}function Intersection(point,points,other,entry){this.x=point,this.z=points,this.o=other,this.e=entry,this.v=!1,this.n=this.p=null}function clipRejoin(segments,compareIntersection,startInside,interpolate,stream){var i,n,subject=[],clip=[];if(segments.forEach(function(segment){if(!((n=segment.length-1)<=0)){var n,x,p0=segment[0],p1=segment[n];if(pointEqual(p0,p1)){for(stream.lineStart(),i=0;i<n;++i)stream.point((p0=segment[i])[0],p0[1]);stream.lineEnd()}else subject.push(x=new Intersection(p0,segment,null,!0)),clip.push(x.o=new Intersection(p0,null,x,!1)),subject.push(x=new Intersection(p1,segment,null,!1)),clip.push(x.o=new Intersection(p1,null,x,!0))}}),subject.length){for(clip.sort(compareIntersection),link(subject),link(clip),i=0,n=clip.length;i<n;++i)clip[i].e=startInside=!startInside;for(var points,point,start=subject[0];;){for(var current=start,isSubject=!0;current.v;)if((current=current.n)===start)return;points=current.z,stream.lineStart();do{if(current.v=current.o.v=!0,current.e){if(isSubject)for(i=0,n=points.length;i<n;++i)stream.point((point=points[i])[0],point[1]);else interpolate(current.x,current.n.x,1,stream);current=current.n}else{if(isSubject)for(points=current.p.z,i=points.length-1;i>=0;--i)stream.point((point=points[i])[0],point[1]);else interpolate(current.x,current.p.x,-1,stream);current=current.p}current=current.o,points=current.z,isSubject=!isSubject}while(!current.v);stream.lineEnd()}}}function link(array){if(n=array.length){for(var n,b,i=0,a=array[0];++i<n;)a.n=b=array[i],b.p=a,a=b;a.n=b=array[0],b.p=a}}rotationIdentity.invert=rotationIdentity;var sum=adder();function polygonContains(polygon,point){var lambda=point[0],phi=point[1],sinPhi=sin(phi),normal=[sin(lambda),-cos(lambda),0],angle=0,winding=0;sum.reset(),1===sinPhi?phi=halfPi+epsilon:-1===sinPhi&&(phi=-halfPi-epsilon);for(var i=0,n=polygon.length;i<n;++i)if(m=(ring=polygon[i]).length)for(var ring,m,point0=ring[m-1],lambda0=point0[0],phi0=point0[1]/2+quarterPi,sinPhi0=sin(phi0),cosPhi0=cos(phi0),j=0;j<m;++j,lambda0=lambda1,sinPhi0=sinPhi1,cosPhi0=cosPhi1,point0=point1){var point1=ring[j],lambda1=point1[0],phi1=point1[1]/2+quarterPi,sinPhi1=sin(phi1),cosPhi1=cos(phi1),delta=lambda1-lambda0,sign$$1=delta>=0?1:-1,absDelta=sign$$1*delta,antimeridian=absDelta>pi,k=sinPhi0*sinPhi1;if(sum.add(atan2(k*sign$$1*sin(absDelta),cosPhi0*cosPhi1+k*cos(absDelta))),angle+=antimeridian?delta+sign$$1*tau:delta,antimeridian^lambda0>=lambda^lambda1>=lambda){var arc=cartesianCross(cartesian(point0),cartesian(point1));cartesianNormalizeInPlace(arc);var intersection=cartesianCross(normal,arc);cartesianNormalizeInPlace(intersection);var phiArc=(antimeridian^delta>=0?-1:1)*asin(intersection[2]);(phi>phiArc||phi===phiArc&&(arc[0]||arc[1]))&&(winding+=antimeridian^delta>=0?1:-1)}}return(angle<-epsilon||angle<epsilon&&sum<-epsilon)^1&winding}function clip(pointVisible,clipLine,interpolate,start){return function(sink){var polygon,segments,ring,line=clipLine(sink),ringBuffer=clipBuffer(),ringSink=clipLine(ringBuffer),polygonStarted=!1,clip={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){clip.point=pointRing,clip.lineStart=ringStart,clip.lineEnd=ringEnd,segments=[],polygon=[]},polygonEnd:function(){clip.point=point,clip.lineStart=lineStart,clip.lineEnd=lineEnd,segments=d3Array.merge(segments);var startInside=polygonContains(polygon,start);segments.length?(polygonStarted||(sink.polygonStart(),polygonStarted=!0),clipRejoin(segments,compareIntersection,startInside,interpolate,sink)):startInside&&(polygonStarted||(sink.polygonStart(),polygonStarted=!0),sink.lineStart(),interpolate(null,null,1,sink),sink.lineEnd()),polygonStarted&&(sink.polygonEnd(),polygonStarted=!1),segments=polygon=null},sphere:function(){sink.polygonStart(),sink.lineStart(),interpolate(null,null,1,sink),sink.lineEnd(),sink.polygonEnd()}};function point(lambda,phi){pointVisible(lambda,phi)&&sink.point(lambda,phi)}function pointLine(lambda,phi){line.point(lambda,phi)}function lineStart(){clip.point=pointLine,line.lineStart()}function lineEnd(){clip.point=point,line.lineEnd()}function pointRing(lambda,phi){ring.push([lambda,phi]),ringSink.point(lambda,phi)}function ringStart(){ringSink.lineStart(),ring=[]}function ringEnd(){pointRing(ring[0][0],ring[0][1]),ringSink.lineEnd();var i,m,segment,point,clean=ringSink.clean(),ringSegments=ringBuffer.result(),n=ringSegments.length;if(ring.pop(),polygon.push(ring),ring=null,n)if(1&clean){if(segment=ringSegments[0],(m=segment.length-1)>0){for(polygonStarted||(sink.polygonStart(),polygonStarted=!0),sink.lineStart(),i=0;i<m;++i)sink.point((point=segment[i])[0],point[1]);sink.lineEnd()}}else n>1&&2&clean&&ringSegments.push(ringSegments.pop().concat(ringSegments.shift())),segments.push(ringSegments.filter(validSegment))}return clip}}function validSegment(segment){return segment.length>1}function compareIntersection(a,b){return((a=a.x)[0]<0?a[1]-halfPi-epsilon:halfPi-a[1])-((b=b.x)[0]<0?b[1]-halfPi-epsilon:halfPi-b[1])}var clipAntimeridian=clip(function(){return!0},function(stream){var clean,lambda0=NaN,phi0=NaN,sign0=NaN;return{lineStart:function(){stream.lineStart(),clean=1},point:function(lambda1,phi1){var sign1=lambda1>0?pi:-pi,delta=abs(lambda1-lambda0);abs(delta-pi)<epsilon?(stream.point(lambda0,phi0=(phi0+phi1)/2>0?halfPi:-halfPi),stream.point(sign0,phi0),stream.lineEnd(),stream.lineStart(),stream.point(sign1,phi0),stream.point(lambda1,phi0),clean=0):sign0!==sign1&&delta>=pi&&(abs(lambda0-sign0)<epsilon&&(lambda0-=sign0*epsilon),abs(lambda1-sign1)<epsilon&&(lambda1-=sign1*epsilon),phi0=function(lambda0,phi0,lambda1,phi1){var cosPhi0,cosPhi1,sinLambda0Lambda1=sin(lambda0-lambda1);return abs(sinLambda0Lambda1)>epsilon?atan((sin(phi0)*(cosPhi1=cos(phi1))*sin(lambda1)-sin(phi1)*(cosPhi0=cos(phi0))*sin(lambda0))/(cosPhi0*cosPhi1*sinLambda0Lambda1)):(phi0+phi1)/2}(lambda0,phi0,lambda1,phi1),stream.point(sign0,phi0),stream.lineEnd(),stream.lineStart(),stream.point(sign1,phi0),clean=0),stream.point(lambda0=lambda1,phi0=phi1),sign0=sign1},lineEnd:function(){stream.lineEnd(),lambda0=phi0=NaN},clean:function(){return 2-clean}}},function(from,to,direction,stream){var phi;if(null==from)phi=direction*halfPi,stream.point(-pi,phi),stream.point(0,phi),stream.point(pi,phi),stream.point(pi,0),stream.point(pi,-phi),stream.point(0,-phi),stream.point(-pi,-phi),stream.point(-pi,0),stream.point(-pi,phi);else if(abs(from[0]-to[0])>epsilon){var lambda=from[0]<to[0]?pi:-pi;phi=direction*lambda/2,stream.point(-lambda,phi),stream.point(0,phi),stream.point(lambda,phi)}else stream.point(to[0],to[1])},[-pi,-halfPi]);function clipCircle(radius){var cr=cos(radius),delta=6*radians,smallRadius=cr>0,notHemisphere=abs(cr)>epsilon;function visible(lambda,phi){return cos(lambda)*cos(phi)>cr}function intersect(a,b,two){var pa=cartesian(a),pb=cartesian(b),n1=[1,0,0],n2=cartesianCross(pa,pb),n2n2=cartesianDot(n2,n2),n1n2=n2[0],determinant=n2n2-n1n2*n1n2;if(!determinant)return!two&&a;var c1=cr*n2n2/determinant,c2=-cr*n1n2/determinant,n1xn2=cartesianCross(n1,n2),A=cartesianScale(n1,c1),B=cartesianScale(n2,c2);cartesianAddInPlace(A,B);var u=n1xn2,w=cartesianDot(A,u),uu=cartesianDot(u,u),t2=w*w-uu*(cartesianDot(A,A)-1);if(!(t2<0)){var t=sqrt(t2),q=cartesianScale(u,(-w-t)/uu);if(cartesianAddInPlace(q,A),q=spherical(q),!two)return q;var z,lambda0=a[0],lambda1=b[0],phi0=a[1],phi1=b[1];lambda1<lambda0&&(z=lambda0,lambda0=lambda1,lambda1=z);var delta=lambda1-lambda0,polar=abs(delta-pi)<epsilon,meridian=polar||delta<epsilon;if(!polar&&phi1<phi0&&(z=phi0,phi0=phi1,phi1=z),meridian?polar?phi0+phi1>0^q[1]<(abs(q[0]-lambda0)<epsilon?phi0:phi1):phi0<=q[1]&&q[1]<=phi1:delta>pi^(lambda0<=q[0]&&q[0]<=lambda1)){var q1=cartesianScale(u,(-w+t)/uu);return cartesianAddInPlace(q1,A),[q,spherical(q1)]}}}function code(lambda,phi){var r=smallRadius?radius:pi-radius,code=0;return lambda<-r?code|=1:lambda>r&&(code|=2),phi<-r?code|=4:phi>r&&(code|=8),code}return clip(visible,function(stream){var point0,c0,v0,v00,clean;return{lineStart:function(){v00=v0=!1,clean=1},point:function(lambda,phi){var point2,point1=[lambda,phi],v=visible(lambda,phi),c=smallRadius?v?0:code(lambda,phi):v?code(lambda+(lambda<0?pi:-pi),phi):0;if(!point0&&(v00=v0=v)&&stream.lineStart(),v!==v0&&(!(point2=intersect(point0,point1))||pointEqual(point0,point2)||pointEqual(point1,point2))&&(point1[0]+=epsilon,point1[1]+=epsilon,v=visible(point1[0],point1[1])),v!==v0)clean=0,v?(stream.lineStart(),point2=intersect(point1,point0),stream.point(point2[0],point2[1])):(point2=intersect(point0,point1),stream.point(point2[0],point2[1]),stream.lineEnd()),point0=point2;else if(notHemisphere&&point0&&smallRadius^v){var t;c&c0||!(t=intersect(point1,point0,!0))||(clean=0,smallRadius?(stream.lineStart(),stream.point(t[0][0],t[0][1]),stream.point(t[1][0],t[1][1]),stream.lineEnd()):(stream.point(t[1][0],t[1][1]),stream.lineEnd(),stream.lineStart(),stream.point(t[0][0],t[0][1])))}!v||point0&&pointEqual(point0,point1)||stream.point(point1[0],point1[1]),point0=point1,v0=v,c0=c},lineEnd:function(){v0&&stream.lineEnd(),point0=null},clean:function(){return clean|(v00&&v0)<<1}}},function(from,to,direction,stream){circleStream(stream,radius,delta,direction,from,to)},smallRadius?[0,-radius]:[-pi,radius-pi])}var clipMax=1e9,clipMin=-clipMax;function clipRectangle(x0,y0,x1,y1){function visible(x,y){return x0<=x&&x<=x1&&y0<=y&&y<=y1}function interpolate(from,to,direction,stream){var a=0,a1=0;if(null==from||(a=corner(from,direction))!==(a1=corner(to,direction))||comparePoint(from,to)<0^direction>0)do{stream.point(0===a||3===a?x0:x1,a>1?y1:y0)}while((a=(a+direction+4)%4)!==a1);else stream.point(to[0],to[1])}function corner(p,direction){return abs(p[0]-x0)<epsilon?direction>0?0:3:abs(p[0]-x1)<epsilon?direction>0?2:1:abs(p[1]-y0)<epsilon?direction>0?1:0:direction>0?3:2}function compareIntersection(a,b){return comparePoint(a.x,b.x)}function comparePoint(a,b){var ca=corner(a,1),cb=corner(b,1);return ca!==cb?ca-cb:0===ca?b[1]-a[1]:1===ca?a[0]-b[0]:2===ca?a[1]-b[1]:b[0]-a[0]}return function(stream){var segments,polygon,ring,x__,y__,v__,x_,y_,v_,first,clean,activeStream=stream,bufferStream=clipBuffer(),clipStream={point:point,lineStart:function(){clipStream.point=linePoint,polygon&&polygon.push(ring=[]),first=!0,v_=!1,x_=y_=NaN},lineEnd:function(){segments&&(linePoint(x__,y__),v__&&v_&&bufferStream.rejoin(),segments.push(bufferStream.result())),clipStream.point=point,v_&&activeStream.lineEnd()},polygonStart:function(){activeStream=bufferStream,segments=[],polygon=[],clean=!0},polygonEnd:function(){var startInside=function(){for(var winding=0,i=0,n=polygon.length;i<n;++i)for(var a0,a1,ring=polygon[i],j=1,m=ring.length,point=ring[0],b0=point[0],b1=point[1];j<m;++j)a0=b0,a1=b1,point=ring[j],b0=point[0],b1=point[1],a1<=y1?b1>y1&&(b0-a0)*(y1-a1)>(b1-a1)*(x0-a0)&&++winding:b1<=y1&&(b0-a0)*(y1-a1)<(b1-a1)*(x0-a0)&&--winding;return winding}(),cleanInside=clean&&startInside,visible=(segments=d3Array.merge(segments)).length;(cleanInside||visible)&&(stream.polygonStart(),cleanInside&&(stream.lineStart(),interpolate(null,null,1,stream),stream.lineEnd()),visible&&clipRejoin(segments,compareIntersection,startInside,interpolate,stream),stream.polygonEnd()),activeStream=stream,segments=polygon=ring=null}};function point(x,y){visible(x,y)&&activeStream.point(x,y)}function linePoint(x,y){var v=visible(x,y);if(polygon&&ring.push([x,y]),first)x__=x,y__=y,v__=v,first=!1,v&&(activeStream.lineStart(),activeStream.point(x,y));else if(v&&v_)activeStream.point(x,y);else{var a=[x_=Math.max(clipMin,Math.min(clipMax,x_)),y_=Math.max(clipMin,Math.min(clipMax,y_))],b=[x=Math.max(clipMin,Math.min(clipMax,x)),y=Math.max(clipMin,Math.min(clipMax,y))];!function(a,b,x0,y0,x1,y1){var r,ax=a[0],ay=a[1],bx=b[0],by=b[1],t0=0,t1=1,dx=bx-ax,dy=by-ay;if(r=x0-ax,dx||!(r>0)){if(r/=dx,dx<0){if(r<t0)return;r<t1&&(t1=r)}else if(dx>0){if(r>t1)return;r>t0&&(t0=r)}if(r=x1-ax,dx||!(r<0)){if(r/=dx,dx<0){if(r>t1)return;r>t0&&(t0=r)}else if(dx>0){if(r<t0)return;r<t1&&(t1=r)}if(r=y0-ay,dy||!(r>0)){if(r/=dy,dy<0){if(r<t0)return;r<t1&&(t1=r)}else if(dy>0){if(r>t1)return;r>t0&&(t0=r)}if(r=y1-ay,dy||!(r<0)){if(r/=dy,dy<0){if(r>t1)return;r>t0&&(t0=r)}else if(dy>0){if(r<t0)return;r<t1&&(t1=r)}return t0>0&&(a[0]=ax+t0*dx,a[1]=ay+t0*dy),t1<1&&(b[0]=ax+t1*dx,b[1]=ay+t1*dy),!0}}}}}(a,b,x0,y0,x1,y1)?v&&(activeStream.lineStart(),activeStream.point(x,y),clean=!1):(v_||(activeStream.lineStart(),activeStream.point(a[0],a[1])),activeStream.point(b[0],b[1]),v||activeStream.lineEnd(),clean=!1)}x_=x,y_=y,v_=v}return clipStream}}var lambda0$2,sinPhi0$1,cosPhi0$1,lengthSum=adder(),lengthStream={sphere:noop,point:noop,lineStart:function(){lengthStream.point=lengthPointFirst,lengthStream.lineEnd=lengthLineEnd},lineEnd:noop,polygonStart:noop,polygonEnd:noop};function lengthLineEnd(){lengthStream.point=lengthStream.lineEnd=noop}function lengthPointFirst(lambda,phi){lambda0$2=lambda*=radians,sinPhi0$1=sin(phi*=radians),cosPhi0$1=cos(phi),lengthStream.point=lengthPoint}function lengthPoint(lambda,phi){lambda*=radians;var sinPhi=sin(phi*=radians),cosPhi=cos(phi),delta=abs(lambda-lambda0$2),cosDelta=cos(delta),sinDelta=sin(delta),x=cosPhi*sinDelta,y=cosPhi0$1*sinPhi-sinPhi0$1*cosPhi*cosDelta,z=sinPhi0$1*sinPhi+cosPhi0$1*cosPhi*cosDelta;lengthSum.add(atan2(sqrt(x*x+y*y),z)),lambda0$2=lambda,sinPhi0$1=sinPhi,cosPhi0$1=cosPhi}function length(object){return lengthSum.reset(),geoStream(object,lengthStream),+lengthSum}var coordinates=[null,null],object={type:"LineString",coordinates:coordinates};function distance(a,b){return coordinates[0]=a,coordinates[1]=b,length(object)}var containsObjectType={Feature:function(object,point){return containsGeometry(object.geometry,point)},FeatureCollection:function(object,point){for(var features=object.features,i=-1,n=features.length;++i<n;)if(containsGeometry(features[i].geometry,point))return!0;return!1}},containsGeometryType={Sphere:function(){return!0},Point:function(object,point){return containsPoint(object.coordinates,point)},MultiPoint:function(object,point){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)if(containsPoint(coordinates[i],point))return!0;return!1},LineString:function(object,point){return containsLine(object.coordinates,point)},MultiLineString:function(object,point){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)if(containsLine(coordinates[i],point))return!0;return!1},Polygon:function(object,point){return containsPolygon(object.coordinates,point)},MultiPolygon:function(object,point){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)if(containsPolygon(coordinates[i],point))return!0;return!1},GeometryCollection:function(object,point){for(var geometries=object.geometries,i=-1,n=geometries.length;++i<n;)if(containsGeometry(geometries[i],point))return!0;return!1}};function containsGeometry(geometry,point){return!(!geometry||!containsGeometryType.hasOwnProperty(geometry.type))&&containsGeometryType[geometry.type](geometry,point)}function containsPoint(coordinates,point){return 0===distance(coordinates,point)}function containsLine(coordinates,point){var ab=distance(coordinates[0],coordinates[1]),ao=distance(coordinates[0],point),ob=distance(point,coordinates[1]);return ao+ob<=ab+epsilon}function containsPolygon(coordinates,point){return!!polygonContains(coordinates.map(ringRadians),pointRadians(point))}function ringRadians(ring){return(ring=ring.map(pointRadians)).pop(),ring}function pointRadians(point){return[point[0]*radians,point[1]*radians]}function graticuleX(y0,y1,dy){var y=d3Array.range(y0,y1-epsilon,dy).concat(y1);return function(x){return y.map(function(y){return[x,y]})}}function graticuleY(x0,x1,dx){var x=d3Array.range(x0,x1-epsilon,dx).concat(x1);return function(y){return x.map(function(x){return[x,y]})}}function graticule(){var x1,x0,X1,X0,y1,y0,Y1,Y0,x,y,X,Y,dx=10,dy=dx,DX=90,DY=360,precision=2.5;function graticule(){return{type:"MultiLineString",coordinates:lines()}}function lines(){return d3Array.range(ceil(X0/DX)*DX,X1,DX).map(X).concat(d3Array.range(ceil(Y0/DY)*DY,Y1,DY).map(Y)).concat(d3Array.range(ceil(x0/dx)*dx,x1,dx).filter(function(x){return abs(x%DX)>epsilon}).map(x)).concat(d3Array.range(ceil(y0/dy)*dy,y1,dy).filter(function(y){return abs(y%DY)>epsilon}).map(y))}return graticule.lines=function(){return lines().map(function(coordinates){return{type:"LineString",coordinates:coordinates}})},graticule.outline=function(){return{type:"Polygon",coordinates:[X(X0).concat(Y(Y1).slice(1),X(X1).reverse().slice(1),Y(Y0).reverse().slice(1))]}},graticule.extent=function(_){return arguments.length?graticule.extentMajor(_).extentMinor(_):graticule.extentMinor()},graticule.extentMajor=function(_){return arguments.length?(X0=+_[0][0],X1=+_[1][0],Y0=+_[0][1],Y1=+_[1][1],X0>X1&&(_=X0,X0=X1,X1=_),Y0>Y1&&(_=Y0,Y0=Y1,Y1=_),graticule.precision(precision)):[[X0,Y0],[X1,Y1]]},graticule.extentMinor=function(_){return arguments.length?(x0=+_[0][0],x1=+_[1][0],y0=+_[0][1],y1=+_[1][1],x0>x1&&(_=x0,x0=x1,x1=_),y0>y1&&(_=y0,y0=y1,y1=_),graticule.precision(precision)):[[x0,y0],[x1,y1]]},graticule.step=function(_){return arguments.length?graticule.stepMajor(_).stepMinor(_):graticule.stepMinor()},graticule.stepMajor=function(_){return arguments.length?(DX=+_[0],DY=+_[1],graticule):[DX,DY]},graticule.stepMinor=function(_){return arguments.length?(dx=+_[0],dy=+_[1],graticule):[dx,dy]},graticule.precision=function(_){return arguments.length?(precision=+_,x=graticuleX(y0,y1,90),y=graticuleY(x0,x1,precision),X=graticuleX(Y0,Y1,90),Y=graticuleY(X0,X1,precision),graticule):precision},graticule.extentMajor([[-180,-90+epsilon],[180,90-epsilon]]).extentMinor([[-180,-80-epsilon],[180,80+epsilon]])}function identity(x){return x}var x00,y00,x0$1,y0$1,areaSum$1=adder(),areaRingSum$1=adder(),areaStream$1={point:noop,lineStart:noop,lineEnd:noop,polygonStart:function(){areaStream$1.lineStart=areaRingStart$1,areaStream$1.lineEnd=areaRingEnd$1},polygonEnd:function(){areaStream$1.lineStart=areaStream$1.lineEnd=areaStream$1.point=noop,areaSum$1.add(abs(areaRingSum$1)),areaRingSum$1.reset()},result:function(){var area=areaSum$1/2;return areaSum$1.reset(),area}};function areaRingStart$1(){areaStream$1.point=areaPointFirst$1}function areaPointFirst$1(x,y){areaStream$1.point=areaPoint$1,x00=x0$1=x,y00=y0$1=y}function areaPoint$1(x,y){areaRingSum$1.add(y0$1*x-x0$1*y),x0$1=x,y0$1=y}function areaRingEnd$1(){areaPoint$1(x00,y00)}var x00$1,y00$1,x0$3,y0$3,x0$2=1/0,y0$2=x0$2,x1=-x0$2,y1=x1,boundsStream$1={point:function(x,y){x<x0$2&&(x0$2=x),x>x1&&(x1=x),y<y0$2&&(y0$2=y),y>y1&&(y1=y)},lineStart:noop,lineEnd:noop,polygonStart:noop,polygonEnd:noop,result:function(){var bounds=[[x0$2,y0$2],[x1,y1]];return x1=y1=-(y0$2=x0$2=1/0),bounds}},X0$1=0,Y0$1=0,Z0$1=0,X1$1=0,Y1$1=0,Z1$1=0,X2$1=0,Y2$1=0,Z2$1=0,centroidStream$1={point:centroidPoint$1,lineStart:centroidLineStart$1,lineEnd:centroidLineEnd$1,polygonStart:function(){centroidStream$1.lineStart=centroidRingStart$1,centroidStream$1.lineEnd=centroidRingEnd$1},polygonEnd:function(){centroidStream$1.point=centroidPoint$1,centroidStream$1.lineStart=centroidLineStart$1,centroidStream$1.lineEnd=centroidLineEnd$1},result:function(){var centroid=Z2$1?[X2$1/Z2$1,Y2$1/Z2$1]:Z1$1?[X1$1/Z1$1,Y1$1/Z1$1]:Z0$1?[X0$1/Z0$1,Y0$1/Z0$1]:[NaN,NaN];return X0$1=Y0$1=Z0$1=X1$1=Y1$1=Z1$1=X2$1=Y2$1=Z2$1=0,centroid}};function centroidPoint$1(x,y){X0$1+=x,Y0$1+=y,++Z0$1}function centroidLineStart$1(){centroidStream$1.point=centroidPointFirstLine}function centroidPointFirstLine(x,y){centroidStream$1.point=centroidPointLine,centroidPoint$1(x0$3=x,y0$3=y)}function centroidPointLine(x,y){var dx=x-x0$3,dy=y-y0$3,z=sqrt(dx*dx+dy*dy);X1$1+=z*(x0$3+x)/2,Y1$1+=z*(y0$3+y)/2,Z1$1+=z,centroidPoint$1(x0$3=x,y0$3=y)}function centroidLineEnd$1(){centroidStream$1.point=centroidPoint$1}function centroidRingStart$1(){centroidStream$1.point=centroidPointFirstRing}function centroidRingEnd$1(){centroidPointRing(x00$1,y00$1)}function centroidPointFirstRing(x,y){centroidStream$1.point=centroidPointRing,centroidPoint$1(x00$1=x0$3=x,y00$1=y0$3=y)}function centroidPointRing(x,y){var dx=x-x0$3,dy=y-y0$3,z=sqrt(dx*dx+dy*dy);X1$1+=z*(x0$3+x)/2,Y1$1+=z*(y0$3+y)/2,Z1$1+=z,X2$1+=(z=y0$3*x-x0$3*y)*(x0$3+x),Y2$1+=z*(y0$3+y),Z2$1+=3*z,centroidPoint$1(x0$3=x,y0$3=y)}function PathContext(context){this._context=context}PathContext.prototype={_radius:4.5,pointRadius:function(_){return this._radius=_,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(x,y){switch(this._point){case 0:this._context.moveTo(x,y),this._point=1;break;case 1:this._context.lineTo(x,y);break;default:this._context.moveTo(x+this._radius,y),this._context.arc(x,y,this._radius,0,tau)}},result:noop};var lengthRing,x00$2,y00$2,x0$4,y0$4,lengthSum$1=adder(),lengthStream$1={point:noop,lineStart:function(){lengthStream$1.point=lengthPointFirst$1},lineEnd:function(){lengthRing&&lengthPoint$1(x00$2,y00$2),lengthStream$1.point=noop},polygonStart:function(){lengthRing=!0},polygonEnd:function(){lengthRing=null},result:function(){var length=+lengthSum$1;return lengthSum$1.reset(),length}};function lengthPointFirst$1(x,y){lengthStream$1.point=lengthPoint$1,x00$2=x0$4=x,y00$2=y0$4=y}function lengthPoint$1(x,y){x0$4-=x,y0$4-=y,lengthSum$1.add(sqrt(x0$4*x0$4+y0$4*y0$4)),x0$4=x,y0$4=y}function PathString(){this._string=[]}function circle$1(radius){return"m0,"+radius+"a"+radius+","+radius+" 0 1,1 0,"+-2*radius+"a"+radius+","+radius+" 0 1,1 0,"+2*radius+"z"}function transformer(methods){return function(stream){var s=new TransformStream;for(var key in methods)s[key]=methods[key];return s.stream=stream,s}}function TransformStream(){}function fit(projection,fitBounds,object){var clip=projection.clipExtent&&projection.clipExtent();return projection.scale(150).translate([0,0]),null!=clip&&projection.clipExtent(null),geoStream(object,projection.stream(boundsStream$1)),fitBounds(boundsStream$1.result()),null!=clip&&projection.clipExtent(clip),projection}function fitExtent(projection,extent,object){return fit(projection,function(b){var w=extent[1][0]-extent[0][0],h=extent[1][1]-extent[0][1],k=Math.min(w/(b[1][0]-b[0][0]),h/(b[1][1]-b[0][1])),x=+extent[0][0]+(w-k*(b[1][0]+b[0][0]))/2,y=+extent[0][1]+(h-k*(b[1][1]+b[0][1]))/2;projection.scale(150*k).translate([x,y])},object)}function fitSize(projection,size,object){return fitExtent(projection,[[0,0],size],object)}function fitWidth(projection,width,object){return fit(projection,function(b){var w=+width,k=w/(b[1][0]-b[0][0]),x=(w-k*(b[1][0]+b[0][0]))/2,y=-k*b[0][1];projection.scale(150*k).translate([x,y])},object)}function fitHeight(projection,height,object){return fit(projection,function(b){var h=+height,k=h/(b[1][1]-b[0][1]),x=-k*b[0][0],y=(h-k*(b[1][1]+b[0][1]))/2;projection.scale(150*k).translate([x,y])},object)}PathString.prototype={_radius:4.5,_circle:circle$1(4.5),pointRadius:function(_){return(_=+_)!==this._radius&&(this._radius=_,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(x,y){switch(this._point){case 0:this._string.push("M",x,",",y),this._point=1;break;case 1:this._string.push("L",x,",",y);break;default:null==this._circle&&(this._circle=circle$1(this._radius)),this._string.push("M",x,",",y,this._circle)}},result:function(){if(this._string.length){var result=this._string.join("");return this._string=[],result}return null}},TransformStream.prototype={constructor:TransformStream,point:function(x,y){this.stream.point(x,y)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var maxDepth=16,cosMinDistance=cos(30*radians);function resample(project,delta2){return+delta2?function(project,delta2){function resampleLineTo(x0,y0,lambda0,a0,b0,c0,x1,y1,lambda1,a1,b1,c1,depth,stream){var dx=x1-x0,dy=y1-y0,d2=dx*dx+dy*dy;if(d2>4*delta2&&depth--){var a=a0+a1,b=b0+b1,c=c0+c1,m=sqrt(a*a+b*b+c*c),phi2=asin(c/=m),lambda2=abs(abs(c)-1)<epsilon||abs(lambda0-lambda1)<epsilon?(lambda0+lambda1)/2:atan2(b,a),p=project(lambda2,phi2),x2=p[0],y2=p[1],dx2=x2-x0,dy2=y2-y0,dz=dy*dx2-dx*dy2;(dz*dz/d2>delta2||abs((dx*dx2+dy*dy2)/d2-.5)>.3||a0*a1+b0*b1+c0*c1<cosMinDistance)&&(resampleLineTo(x0,y0,lambda0,a0,b0,c0,x2,y2,lambda2,a/=m,b/=m,c,depth,stream),stream.point(x2,y2),resampleLineTo(x2,y2,lambda2,a,b,c,x1,y1,lambda1,a1,b1,c1,depth,stream))}}return function(stream){var lambda00,x00,y00,a00,b00,c00,lambda0,x0,y0,a0,b0,c0,resampleStream={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){stream.polygonStart(),resampleStream.lineStart=ringStart},polygonEnd:function(){stream.polygonEnd(),resampleStream.lineStart=lineStart}};function point(x,y){x=project(x,y),stream.point(x[0],x[1])}function lineStart(){x0=NaN,resampleStream.point=linePoint,stream.lineStart()}function linePoint(lambda,phi){var c=cartesian([lambda,phi]),p=project(lambda,phi);resampleLineTo(x0,y0,lambda0,a0,b0,c0,x0=p[0],y0=p[1],lambda0=lambda,a0=c[0],b0=c[1],c0=c[2],maxDepth,stream),stream.point(x0,y0)}function lineEnd(){resampleStream.point=point,stream.lineEnd()}function ringStart(){lineStart(),resampleStream.point=ringPoint,resampleStream.lineEnd=ringEnd}function ringPoint(lambda,phi){linePoint(lambda00=lambda,phi),x00=x0,y00=y0,a00=a0,b00=b0,c00=c0,resampleStream.point=linePoint}function ringEnd(){resampleLineTo(x0,y0,lambda0,a0,b0,c0,x00,y00,lambda00,a00,b00,c00,maxDepth,stream),resampleStream.lineEnd=lineEnd,lineEnd()}return resampleStream}}(project,delta2):function(project){return transformer({point:function(x,y){x=project(x,y),this.stream.point(x[0],x[1])}})}(project)}var transformRadians=transformer({point:function(x,y){this.stream.point(x*radians,y*radians)}});function scaleTranslateRotate(k,dx,dy,alpha){var cosAlpha=cos(alpha),sinAlpha=sin(alpha),a=cosAlpha*k,b=sinAlpha*k,ai=cosAlpha/k,bi=sinAlpha/k,ci=(sinAlpha*dy-cosAlpha*dx)/k,fi=(sinAlpha*dx+cosAlpha*dy)/k;function transform$$1(x,y){return[a*x-b*y+dx,dy-b*x-a*y]}return transform$$1.invert=function(x,y){return[ai*x-bi*y+ci,fi-bi*x-ai*y]},transform$$1}function projection(project){return projectionMutator(function(){return project})()}function projectionMutator(projectAt){var project,rotate,y0,x1,y1,projectResample,projectTransform,projectRotateTransform,cache,cacheStream,k=150,x=480,y=250,lambda=0,phi=0,deltaLambda=0,deltaPhi=0,deltaGamma=0,alpha=0,theta=null,preclip=clipAntimeridian,x0=null,postclip=identity,delta2=.5;function projection(point){return projectRotateTransform(point[0]*radians,point[1]*radians)}function invert(point){return(point=projectRotateTransform.invert(point[0],point[1]))&&[point[0]*degrees,point[1]*degrees]}function recenter(){var center=scaleTranslateRotate(k,0,0,alpha).apply(null,project(lambda,phi)),transform$$1=(alpha?scaleTranslateRotate:function(k,dx,dy){function transform$$1(x,y){return[dx+k*x,dy-k*y]}return transform$$1.invert=function(x,y){return[(x-dx)/k,(dy-y)/k]},transform$$1})(k,x-center[0],y-center[1],alpha);return rotate=rotateRadians(deltaLambda,deltaPhi,deltaGamma),projectTransform=compose(project,transform$$1),projectRotateTransform=compose(rotate,projectTransform),projectResample=resample(projectTransform,delta2),reset()}function reset(){return cache=cacheStream=null,projection}return projection.stream=function(stream){return cache&&cacheStream===stream?cache:cache=transformRadians(function(rotate){return transformer({point:function(x,y){var r=rotate(x,y);return this.stream.point(r[0],r[1])}})}(rotate)(preclip(projectResample(postclip(cacheStream=stream)))))},projection.preclip=function(_){return arguments.length?(preclip=_,theta=void 0,reset()):preclip},projection.postclip=function(_){return arguments.length?(postclip=_,x0=y0=x1=y1=null,reset()):postclip},projection.clipAngle=function(_){return arguments.length?(preclip=+_?clipCircle(theta=_*radians):(theta=null,clipAntimeridian),reset()):theta*degrees},projection.clipExtent=function(_){return arguments.length?(postclip=null==_?(x0=y0=x1=y1=null,identity):clipRectangle(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1]),reset()):null==x0?null:[[x0,y0],[x1,y1]]},projection.scale=function(_){return arguments.length?(k=+_,recenter()):k},projection.translate=function(_){return arguments.length?(x=+_[0],y=+_[1],recenter()):[x,y]},projection.center=function(_){return arguments.length?(lambda=_[0]%360*radians,phi=_[1]%360*radians,recenter()):[lambda*degrees,phi*degrees]},projection.rotate=function(_){return arguments.length?(deltaLambda=_[0]%360*radians,deltaPhi=_[1]%360*radians,deltaGamma=_.length>2?_[2]%360*radians:0,recenter()):[deltaLambda*degrees,deltaPhi*degrees,deltaGamma*degrees]},projection.angle=function(_){return arguments.length?(alpha=_%360*radians,recenter()):alpha*degrees},projection.precision=function(_){return arguments.length?(projectResample=resample(projectTransform,delta2=_*_),reset()):sqrt(delta2)},projection.fitExtent=function(extent,object){return fitExtent(projection,extent,object)},projection.fitSize=function(size,object){return fitSize(projection,size,object)},projection.fitWidth=function(width,object){return fitWidth(projection,width,object)},projection.fitHeight=function(height,object){return fitHeight(projection,height,object)},function(){return project=projectAt.apply(this,arguments),projection.invert=project.invert&&invert,recenter()}}function conicProjection(projectAt){var phi0=0,phi1=pi/3,m=projectionMutator(projectAt),p=m(phi0,phi1);return p.parallels=function(_){return arguments.length?m(phi0=_[0]*radians,phi1=_[1]*radians):[phi0*degrees,phi1*degrees]},p}function conicEqualAreaRaw(y0,y1){var sy0=sin(y0),n=(sy0+sin(y1))/2;if(abs(n)<epsilon)return function(phi0){var cosPhi0=cos(phi0);function forward(lambda,phi){return[lambda*cosPhi0,sin(phi)/cosPhi0]}return forward.invert=function(x,y){return[x/cosPhi0,asin(y*cosPhi0)]},forward}(y0);var c=1+sy0*(2*n-sy0),r0=sqrt(c)/n;function project(x,y){var r=sqrt(c-2*n*sin(y))/n;return[r*sin(x*=n),r0-r*cos(x)]}return project.invert=function(x,y){var r0y=r0-y;return[atan2(x,abs(r0y))/n*sign(r0y),asin((c-(x*x+r0y*r0y)*n*n)/(2*n))]},project}function conicEqualArea(){return conicProjection(conicEqualAreaRaw).scale(155.424).center([0,33.6442])}function albers(){return conicEqualArea().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function azimuthalRaw(scale){return function(x,y){var cx=cos(x),cy=cos(y),k=scale(cx*cy);return[k*cy*sin(x),k*sin(y)]}}function azimuthalInvert(angle){return function(x,y){var z=sqrt(x*x+y*y),c=angle(z),sc=sin(c),cc=cos(c);return[atan2(x*sc,z*cc),asin(z&&y*sc/z)]}}var azimuthalEqualAreaRaw=azimuthalRaw(function(cxcy){return sqrt(2/(1+cxcy))});azimuthalEqualAreaRaw.invert=azimuthalInvert(function(z){return 2*asin(z/2)});var azimuthalEquidistantRaw=azimuthalRaw(function(c){return(c=acos(c))&&c/sin(c)});function mercatorRaw(lambda,phi){return[lambda,log(tan((halfPi+phi)/2))]}function mercatorProjection(project){var y0,x1,y1,m=projection(project),center=m.center,scale=m.scale,translate=m.translate,clipExtent=m.clipExtent,x0=null;function reclip(){var k=pi*scale(),t=m(rotation(m.rotate()).invert([0,0]));return clipExtent(null==x0?[[t[0]-k,t[1]-k],[t[0]+k,t[1]+k]]:project===mercatorRaw?[[Math.max(t[0]-k,x0),y0],[Math.min(t[0]+k,x1),y1]]:[[x0,Math.max(t[1]-k,y0)],[x1,Math.min(t[1]+k,y1)]])}return m.scale=function(_){return arguments.length?(scale(_),reclip()):scale()},m.translate=function(_){return arguments.length?(translate(_),reclip()):translate()},m.center=function(_){return arguments.length?(center(_),reclip()):center()},m.clipExtent=function(_){return arguments.length?(null==_?x0=y0=x1=y1=null:(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1]),reclip()):null==x0?null:[[x0,y0],[x1,y1]]},reclip()}function tany(y){return tan((halfPi+y)/2)}function conicConformalRaw(y0,y1){var cy0=cos(y0),n=y0===y1?sin(y0):log(cy0/cos(y1))/log(tany(y1)/tany(y0)),f=cy0*pow(tany(y0),n)/n;if(!n)return mercatorRaw;function project(x,y){f>0?y<-halfPi+epsilon&&(y=-halfPi+epsilon):y>halfPi-epsilon&&(y=halfPi-epsilon);var r=f/pow(tany(y),n);return[r*sin(n*x),f-r*cos(n*x)]}return project.invert=function(x,y){var fy=f-y,r=sign(n)*sqrt(x*x+fy*fy);return[atan2(x,abs(fy))/n*sign(fy),2*atan(pow(f/r,1/n))-halfPi]},project}function equirectangularRaw(lambda,phi){return[lambda,phi]}function conicEquidistantRaw(y0,y1){var cy0=cos(y0),n=y0===y1?sin(y0):(cy0-cos(y1))/(y1-y0),g=cy0/n+y0;if(abs(n)<epsilon)return equirectangularRaw;function project(x,y){var gy=g-y,nx=n*x;return[gy*sin(nx),g-gy*cos(nx)]}return project.invert=function(x,y){var gy=g-y;return[atan2(x,abs(gy))/n*sign(gy),g-sign(n)*sqrt(x*x+gy*gy)]},project}azimuthalEquidistantRaw.invert=azimuthalInvert(function(z){return z}),mercatorRaw.invert=function(x,y){return[x,2*atan(exp(y))-halfPi]},equirectangularRaw.invert=equirectangularRaw;var A1=1.340264,A2=-.081106,A3=893e-6,A4=.003796,M=sqrt(3)/2;function equalEarthRaw(lambda,phi){var l=asin(M*sin(phi)),l2=l*l,l6=l2*l2*l2;return[lambda*cos(l)/(M*(A1+3*A2*l2+l6*(7*A3+9*A4*l2))),l*(A1+A2*l2+l6*(A3+A4*l2))]}function gnomonicRaw(x,y){var cy=cos(y),k=cos(x)*cy;return[cy*sin(x)/k,sin(y)/k]}function scaleTranslate$1(kx,ky,tx,ty){return 1===kx&&1===ky&&0===tx&&0===ty?identity:transformer({point:function(x,y){this.stream.point(x*kx+tx,y*ky+ty)}})}function naturalEarth1Raw(lambda,phi){var phi2=phi*phi,phi4=phi2*phi2;return[lambda*(.8707-.131979*phi2+phi4*(phi4*(.003971*phi2-.001529*phi4)-.013791)),phi*(1.007226+phi2*(.015085+phi4*(.028874*phi2-.044475-.005916*phi4)))]}function orthographicRaw(x,y){return[cos(y)*sin(x),sin(y)]}function stereographicRaw(x,y){var cy=cos(y),k=1+cos(x)*cy;return[cy*sin(x)/k,sin(y)/k]}function transverseMercatorRaw(lambda,phi){return[log(tan((halfPi+phi)/2)),-lambda]}equalEarthRaw.invert=function(x,y){for(var delta,l=y,l2=l*l,l6=l2*l2*l2,i=0;i<12&&(l-=delta=(l*(A1+A2*l2+l6*(A3+A4*l2))-y)/(A1+3*A2*l2+l6*(7*A3+9*A4*l2)),l6=(l2=l*l)*l2*l2,!(abs(delta)<epsilon2));++i);return[M*x*(A1+3*A2*l2+l6*(7*A3+9*A4*l2))/cos(l),asin(sin(l)/M)]},gnomonicRaw.invert=azimuthalInvert(atan),naturalEarth1Raw.invert=function(x,y){var delta,phi=y,i=25;do{var phi2=phi*phi,phi4=phi2*phi2;phi-=delta=(phi*(1.007226+phi2*(.015085+phi4*(.028874*phi2-.044475-.005916*phi4)))-y)/(1.007226+phi2*(.045255+phi4*(.259866*phi2-.311325-.005916*11*phi4)))}while(abs(delta)>epsilon&&--i>0);return[x/(.8707+(phi2=phi*phi)*(phi2*(phi2*phi2*phi2*(.003971-.001529*phi2)-.013791)-.131979)),phi]},orthographicRaw.invert=azimuthalInvert(asin),stereographicRaw.invert=azimuthalInvert(function(z){return 2*atan(z)}),transverseMercatorRaw.invert=function(x,y){return[-y,2*atan(exp(x))-halfPi]},exports.geoArea=function(object){return areaSum.reset(),geoStream(object,areaStream),2*areaSum},exports.geoBounds=function(feature){var i,n,a,b,merged,deltaMax,delta;if(phi1=lambda1=-(lambda0$1=phi0=1/0),ranges=[],geoStream(feature,boundsStream),n=ranges.length){for(ranges.sort(rangeCompare),i=1,a=ranges[0],merged=[a];i<n;++i)b=ranges[i],rangeContains(a,b[0])||rangeContains(a,b[1])?(angle(a[0],b[1])>angle(a[0],a[1])&&(a[1]=b[1]),angle(b[0],a[1])>angle(a[0],a[1])&&(a[0]=b[0])):merged.push(a=b);for(deltaMax=-1/0,n=merged.length-1,i=0,a=merged[n];i<=n;a=b,++i)b=merged[i],(delta=angle(a[1],b[0]))>deltaMax&&(deltaMax=delta,lambda0$1=b[0],lambda1=a[1])}return ranges=range=null,lambda0$1===1/0||phi0===1/0?[[NaN,NaN],[NaN,NaN]]:[[lambda0$1,phi0],[lambda1,phi1]]},exports.geoCentroid=function(object){W0=W1=X0=Y0=Z0=X1=Y1=Z1=X2=Y2=Z2=0,geoStream(object,centroidStream);var x=X2,y=Y2,z=Z2,m=x*x+y*y+z*z;return m<epsilon2&&(x=X1,y=Y1,z=Z1,W1<epsilon&&(x=X0,y=Y0,z=Z0),(m=x*x+y*y+z*z)<epsilon2)?[NaN,NaN]:[atan2(y,x)*degrees,asin(z/sqrt(m))*degrees]},exports.geoCircle=function(){var ring,rotate,center=constant([0,0]),radius=constant(90),precision=constant(6),stream={point:function(x,y){ring.push(x=rotate(x,y)),x[0]*=degrees,x[1]*=degrees}};function circle(){var c=center.apply(this,arguments),r=radius.apply(this,arguments)*radians,p=precision.apply(this,arguments)*radians;return ring=[],rotate=rotateRadians(-c[0]*radians,-c[1]*radians,0).invert,circleStream(stream,r,p,1),c={type:"Polygon",coordinates:[ring]},ring=rotate=null,c}return circle.center=function(_){return arguments.length?(center="function"==typeof _?_:constant([+_[0],+_[1]]),circle):center},circle.radius=function(_){return arguments.length?(radius="function"==typeof _?_:constant(+_),circle):radius},circle.precision=function(_){return arguments.length?(precision="function"==typeof _?_:constant(+_),circle):precision},circle},exports.geoClipAntimeridian=clipAntimeridian,exports.geoClipCircle=clipCircle,exports.geoClipExtent=function(){var cache,cacheStream,clip,x0=0,y0=0,x1=960,y1=500;return clip={stream:function(stream){return cache&&cacheStream===stream?cache:cache=clipRectangle(x0,y0,x1,y1)(cacheStream=stream)},extent:function(_){return arguments.length?(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1],cache=cacheStream=null,clip):[[x0,y0],[x1,y1]]}}},exports.geoClipRectangle=clipRectangle,exports.geoContains=function(object,point){return(object&&containsObjectType.hasOwnProperty(object.type)?containsObjectType[object.type]:containsGeometry)(object,point)},exports.geoDistance=distance,exports.geoGraticule=graticule,exports.geoGraticule10=function(){return graticule()()},exports.geoInterpolate=function(a,b){var x0=a[0]*radians,y0=a[1]*radians,x1=b[0]*radians,y1=b[1]*radians,cy0=cos(y0),sy0=sin(y0),cy1=cos(y1),sy1=sin(y1),kx0=cy0*cos(x0),ky0=cy0*sin(x0),kx1=cy1*cos(x1),ky1=cy1*sin(x1),d=2*asin(sqrt(haversin(y1-y0)+cy0*cy1*haversin(x1-x0))),k=sin(d),interpolate=d?function(t){var B=sin(t*=d)/k,A=sin(d-t)/k,x=A*kx0+B*kx1,y=A*ky0+B*ky1,z=A*sy0+B*sy1;return[atan2(y,x)*degrees,atan2(z,sqrt(x*x+y*y))*degrees]}:function(){return[x0*degrees,y0*degrees]};return interpolate.distance=d,interpolate},exports.geoLength=length,exports.geoPath=function(projection,context){var projectionStream,contextStream,pointRadius=4.5;function path(object){return object&&("function"==typeof pointRadius&&contextStream.pointRadius(+pointRadius.apply(this,arguments)),geoStream(object,projectionStream(contextStream))),contextStream.result()}return path.area=function(object){return geoStream(object,projectionStream(areaStream$1)),areaStream$1.result()},path.measure=function(object){return geoStream(object,projectionStream(lengthStream$1)),lengthStream$1.result()},path.bounds=function(object){return geoStream(object,projectionStream(boundsStream$1)),boundsStream$1.result()},path.centroid=function(object){return geoStream(object,projectionStream(centroidStream$1)),centroidStream$1.result()},path.projection=function(_){return arguments.length?(projectionStream=null==_?(projection=null,identity):(projection=_).stream,path):projection},path.context=function(_){return arguments.length?(contextStream=null==_?(context=null,new PathString):new PathContext(context=_),"function"!=typeof pointRadius&&contextStream.pointRadius(pointRadius),path):context},path.pointRadius=function(_){return arguments.length?(pointRadius="function"==typeof _?_:(contextStream.pointRadius(+_),+_),path):pointRadius},path.projection(projection).context(context)},exports.geoAlbers=albers,exports.geoAlbersUsa=function(){var cache,cacheStream,lower48Point,alaskaPoint,hawaiiPoint,point,lower48=albers(),alaska=conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),hawaii=conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),pointStream={point:function(x,y){point=[x,y]}};function albersUsa(coordinates){var x=coordinates[0],y=coordinates[1];return point=null,lower48Point.point(x,y),point||(alaskaPoint.point(x,y),point)||(hawaiiPoint.point(x,y),point)}function reset(){return cache=cacheStream=null,albersUsa}return albersUsa.invert=function(coordinates){var k=lower48.scale(),t=lower48.translate(),x=(coordinates[0]-t[0])/k,y=(coordinates[1]-t[1])/k;return(y>=.12&&y<.234&&x>=-.425&&x<-.214?alaska:y>=.166&&y<.234&&x>=-.214&&x<-.115?hawaii:lower48).invert(coordinates)},albersUsa.stream=function(stream){return cache&&cacheStream===stream?cache:(streams=[lower48.stream(cacheStream=stream),alaska.stream(stream),hawaii.stream(stream)],n=streams.length,cache={point:function(x,y){for(var i=-1;++i<n;)streams[i].point(x,y)},sphere:function(){for(var i=-1;++i<n;)streams[i].sphere()},lineStart:function(){for(var i=-1;++i<n;)streams[i].lineStart()},lineEnd:function(){for(var i=-1;++i<n;)streams[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<n;)streams[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<n;)streams[i].polygonEnd()}});var streams,n},albersUsa.precision=function(_){return arguments.length?(lower48.precision(_),alaska.precision(_),hawaii.precision(_),reset()):lower48.precision()},albersUsa.scale=function(_){return arguments.length?(lower48.scale(_),alaska.scale(.35*_),hawaii.scale(_),albersUsa.translate(lower48.translate())):lower48.scale()},albersUsa.translate=function(_){if(!arguments.length)return lower48.translate();var k=lower48.scale(),x=+_[0],y=+_[1];return lower48Point=lower48.translate(_).clipExtent([[x-.455*k,y-.238*k],[x+.455*k,y+.238*k]]).stream(pointStream),alaskaPoint=alaska.translate([x-.307*k,y+.201*k]).clipExtent([[x-.425*k+epsilon,y+.12*k+epsilon],[x-.214*k-epsilon,y+.234*k-epsilon]]).stream(pointStream),hawaiiPoint=hawaii.translate([x-.205*k,y+.212*k]).clipExtent([[x-.214*k+epsilon,y+.166*k+epsilon],[x-.115*k-epsilon,y+.234*k-epsilon]]).stream(pointStream),reset()},albersUsa.fitExtent=function(extent,object){return fitExtent(albersUsa,extent,object)},albersUsa.fitSize=function(size,object){return fitSize(albersUsa,size,object)},albersUsa.fitWidth=function(width,object){return fitWidth(albersUsa,width,object)},albersUsa.fitHeight=function(height,object){return fitHeight(albersUsa,height,object)},albersUsa.scale(1070)},exports.geoAzimuthalEqualArea=function(){return projection(azimuthalEqualAreaRaw).scale(124.75).clipAngle(179.999)},exports.geoAzimuthalEqualAreaRaw=azimuthalEqualAreaRaw,exports.geoAzimuthalEquidistant=function(){return projection(azimuthalEquidistantRaw).scale(79.4188).clipAngle(179.999)},exports.geoAzimuthalEquidistantRaw=azimuthalEquidistantRaw,exports.geoConicConformal=function(){return conicProjection(conicConformalRaw).scale(109.5).parallels([30,30])},exports.geoConicConformalRaw=conicConformalRaw,exports.geoConicEqualArea=conicEqualArea,exports.geoConicEqualAreaRaw=conicEqualAreaRaw,exports.geoConicEquidistant=function(){return conicProjection(conicEquidistantRaw).scale(131.154).center([0,13.9389])},exports.geoConicEquidistantRaw=conicEquidistantRaw,exports.geoEqualEarth=function(){return projection(equalEarthRaw).scale(177.158)},exports.geoEqualEarthRaw=equalEarthRaw,exports.geoEquirectangular=function(){return projection(equirectangularRaw).scale(152.63)},exports.geoEquirectangularRaw=equirectangularRaw,exports.geoGnomonic=function(){return projection(gnomonicRaw).scale(144.049).clipAngle(60)},exports.geoGnomonicRaw=gnomonicRaw,exports.geoIdentity=function(){var y0,x1,y1,cache,cacheStream,projection,k=1,tx=0,ty=0,sx=1,sy=1,transform$$1=identity,x0=null,postclip=identity;function reset(){return cache=cacheStream=null,projection}return projection={stream:function(stream){return cache&&cacheStream===stream?cache:cache=transform$$1(postclip(cacheStream=stream))},postclip:function(_){return arguments.length?(postclip=_,x0=y0=x1=y1=null,reset()):postclip},clipExtent:function(_){return arguments.length?(postclip=null==_?(x0=y0=x1=y1=null,identity):clipRectangle(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1]),reset()):null==x0?null:[[x0,y0],[x1,y1]]},scale:function(_){return arguments.length?(transform$$1=scaleTranslate$1((k=+_)*sx,k*sy,tx,ty),reset()):k},translate:function(_){return arguments.length?(transform$$1=scaleTranslate$1(k*sx,k*sy,tx=+_[0],ty=+_[1]),reset()):[tx,ty]},reflectX:function(_){return arguments.length?(transform$$1=scaleTranslate$1(k*(sx=_?-1:1),k*sy,tx,ty),reset()):sx<0},reflectY:function(_){return arguments.length?(transform$$1=scaleTranslate$1(k*sx,k*(sy=_?-1:1),tx,ty),reset()):sy<0},fitExtent:function(extent,object){return fitExtent(projection,extent,object)},fitSize:function(size,object){return fitSize(projection,size,object)},fitWidth:function(width,object){return fitWidth(projection,width,object)},fitHeight:function(height,object){return fitHeight(projection,height,object)}}},exports.geoProjection=projection,exports.geoProjectionMutator=projectionMutator,exports.geoMercator=function(){return mercatorProjection(mercatorRaw).scale(961/tau)},exports.geoMercatorRaw=mercatorRaw,exports.geoNaturalEarth1=function(){return projection(naturalEarth1Raw).scale(175.295)},exports.geoNaturalEarth1Raw=naturalEarth1Raw,exports.geoOrthographic=function(){return projection(orthographicRaw).scale(249.5).clipAngle(90+epsilon)},exports.geoOrthographicRaw=orthographicRaw,exports.geoStereographic=function(){return projection(stereographicRaw).scale(250).clipAngle(142)},exports.geoStereographicRaw=stereographicRaw,exports.geoTransverseMercator=function(){var m=mercatorProjection(transverseMercatorRaw),center=m.center,rotate=m.rotate;return m.center=function(_){return arguments.length?center([-_[1],_[0]]):[(_=center())[1],-_[0]]},m.rotate=function(_){return arguments.length?rotate([_[0],_[1],_.length>2?_[2]+90:90]):[(_=rotate())[0],_[1],_[2]-90]},rotate([0,0,90]).scale(159.155)},exports.geoTransverseMercatorRaw=transverseMercatorRaw,exports.geoRotation=rotation,exports.geoStream=geoStream,exports.geoTransform=function(methods){return{stream:transformer(methods)}},Object.defineProperty(exports,"__esModule",{value:!0})}(exports,__webpack_require__(383))},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(9),_interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_assertThisInitialized2=_interopRequireDefault(__webpack_require__(12)),_react=_interopRequireWildcard(__webpack_require__(8)),_propTypes=_interopRequireDefault(__webpack_require__(32)),_core=__webpack_require__(15),_extractJsxLayers=_interopRequireDefault(__webpack_require__(871)),_positionChildrenUnderViews=_interopRequireDefault(__webpack_require__(872)),_autobind=_interopRequireDefault(__webpack_require__(390)),memoize=_core.experimental.memoize,propTypes=_core.Deck.getPropTypes(_propTypes.default),defaultProps=_core.Deck.defaultProps,DeckGL=function(_React$Component){function DeckGL(props){var _this;return(0,_classCallCheck2.default)(this,DeckGL),(_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(DeckGL).call(this,props))).viewports=null,_this.children=null,_this._needsRedraw=null,(0,_autobind.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this))),_this._extractJSXLayers=memoize(_extractJsxLayers.default),_this._positionChildrenUnderViews=memoize(_positionChildrenUnderViews.default),_this}return(0,_inherits2.default)(DeckGL,_React$Component),(0,_createClass2.default)(DeckGL,[{key:"componentDidMount",value:function(){var DeckClass=this.props.Deck||_core.Deck;this.deck=this.deck||new DeckClass(Object.assign({},this.props,{canvas:this.deckCanvas,_customRender:this._customRender})),this._updateFromProps(this.props)}},{key:"shouldComponentUpdate",value:function(nextProps){this._updateFromProps(nextProps);var childrenChanged=this.children!==this._parseJSX(nextProps).children,viewsChanged=this.deck.viewManager&&this.deck.viewManager.needsRedraw();return childrenChanged&&!viewsChanged}},{key:"componentDidUpdate",value:function(){this._redrawDeck()}},{key:"componentWillUnmount",value:function(){this.deck.finalize()}},{key:"pickObject",value:function(_ref){var x=_ref.x,y=_ref.y,_ref$radius=_ref.radius,radius=void 0===_ref$radius?0:_ref$radius,_ref$layerIds=_ref.layerIds,layerIds=void 0===_ref$layerIds?null:_ref$layerIds;return this.deck.pickObject({x:x,y:y,radius:radius,layerIds:layerIds})}},{key:"pickMultipleObjects",value:function(_ref2){var x=_ref2.x,y=_ref2.y,_ref2$radius=_ref2.radius,radius=void 0===_ref2$radius?0:_ref2$radius,_ref2$layerIds=_ref2.layerIds,layerIds=void 0===_ref2$layerIds?null:_ref2$layerIds,_ref2$depth=_ref2.depth,depth=void 0===_ref2$depth?10:_ref2$depth;return this.deck.pickMultipleObjects({x:x,y:y,radius:radius,layerIds:layerIds,depth:depth})}},{key:"pickObjects",value:function(_ref3){var x=_ref3.x,y=_ref3.y,_ref3$width=_ref3.width,width=void 0===_ref3$width?1:_ref3$width,_ref3$height=_ref3.height,height=void 0===_ref3$height?1:_ref3$height,_ref3$layerIds=_ref3.layerIds,layerIds=void 0===_ref3$layerIds?null:_ref3$layerIds;return this.deck.pickObjects({x:x,y:y,width:width,height:height,layerIds:layerIds})}},{key:"_redrawDeck",value:function(){this._needsRedraw&&(this.deck._drawLayers(this._needsRedraw),this._needsRedraw=null)}},{key:"_customRender",value:function(redrawReason){this._needsRedraw=redrawReason,this.deck.viewManager.getViewports()!==this.viewports?this.forceUpdate():this._redrawDeck()}},{key:"_parseJSX",value:function(props){return this._extractJSXLayers({layers:props.layers,views:props.views,children:props.children})}},{key:"_updateFromProps",value:function(props){var _this$_parseJSX=this._parseJSX(props),layers=_this$_parseJSX.layers,views=_this$_parseJSX.views,deckProps=Object.assign({},props,{layers:layers,views:views});this.deck.setProps(deckProps)}},{key:"render",value:function(){var _this2=this,viewManager=(this.deck||{}).viewManager;this.viewports=viewManager&&viewManager.getViewports(),this.children=this._parseJSX(this.props).children;var children=this._positionChildrenUnderViews({children:this.children,viewports:this.viewports,deck:this.deck}),style=Object.assign({},{position:"absolute",left:0,top:0},this.props.style),canvas=(0,_react.createElement)("canvas",{ref:function(c){return _this2.deckCanvas=c},key:"deck-canvas",id:this.props.id,style:style});return(0,_react.createElement)("div",{id:"deckgl-wrapper"},[children,canvas])}}]),DeckGL}(_react.default.Component);exports.default=DeckGL,DeckGL.propTypes=propTypes,DeckGL.defaultProps=defaultProps},function(module,exports,__webpack_require__){"use strict";var ReactPropTypesSecret=__webpack_require__(870);function emptyFunction(){}module.exports=function(){function shim(props,propName,componentName,location,propFullName,secret){if(secret!==ReactPropTypesSecret){var err=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw err.name="Invariant Violation",err}}function getShim(){return shim}shim.isRequired=shim;var ReactPropTypes={array:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim};return ReactPropTypes.checkPropTypes=emptyFunction,ReactPropTypes.PropTypes=ReactPropTypes,ReactPropTypes}},function(module,exports,__webpack_require__){"use strict";module.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(9),_interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(_ref){var children=_ref.children,layers=_ref.layers,views=_ref.views,reactChildren=[],jsxLayers=[],jsxViews={};_react.default.Children.forEach(wrapInView(children),function(reactElement){if(reactElement){var ElementType=reactElement.type;if((0,_inheritsFrom.inheritsFrom)(ElementType,_core.Layer)){var layer=function(LayerType,reactProps){var props={},defaultProps=LayerType.defaultProps||{};for(var key in reactProps)defaultProps[key]!==reactProps[key]&&(props[key]=reactProps[key]);return new LayerType(props)}(ElementType,reactElement.props);jsxLayers.push(layer)}else reactChildren.push(reactElement);if(ElementType!==_core.View&&(0,_inheritsFrom.inheritsFrom)(ElementType,_core.View)&&reactElement.props.id){var view=new ElementType(reactElement.props);jsxViews[view.id]=view}}}),Object.keys(jsxViews).length>0&&(Array.isArray(views)?views.forEach(function(view){jsxViews[view.id]=view}):views&&(jsxViews[views.id]=views),views=Object.values(jsxViews));return{layers:layers=jsxLayers.length>0?[].concat(jsxLayers,(0,_toConsumableArray2.default)(layers)):layers,children:reactChildren,views:views}};var _toConsumableArray2=_interopRequireDefault(__webpack_require__(49)),_react=_interopRequireWildcard(__webpack_require__(8)),_inheritsFrom=__webpack_require__(389),_core=__webpack_require__(15);function wrapInView(node){return node?"function"==typeof node?(0,_react.createElement)(_core.View,{},node):Array.isArray(node)?node.map(wrapInView):((0,_inheritsFrom.inheritsFrom)(node.type,_core.View),node):node}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(_ref){var children=_ref.children,viewManager=(_ref.viewports,(_ref.deck||{}).viewManager);if(!viewManager||!viewManager.views.length)return[];var defaultViewId=viewManager.views[0].id;return children.map(function(child,i){child.props.viewportId&&_core.log.removed("viewportId","<View>")(),child.props.viewId&&_core.log.removed("viewId","<View>")();var viewId=defaultViewId,viewChildren=child;(0,_inheritsFrom.inheritsFrom)(child.type,_core.View)&&(viewId=child.props.id||defaultViewId,viewChildren=child.props.children);var viewport=viewManager.getViewport(viewId),viewState=viewManager.getViewState(viewId);if(!viewport)return null;var x=viewport.x,y=viewport.y,width=viewport.width,height=viewport.height;viewChildren=(0,_evaluateChildren.default)(viewChildren,{x:x,y:y,width:width,height:height,viewport:viewport,viewState:viewState});var style={position:"absolute",left:x,top:y,width:width,height:height},key="view-child-".concat(viewId,"-").concat(i);return(0,_react.createElement)("div",{key:key,id:key,style:style},viewChildren)})};var _react=__webpack_require__(8),_core=__webpack_require__(15),_inheritsFrom=__webpack_require__(389),_evaluateChildren=_interopRequireDefault(__webpack_require__(873))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function evaluateChildren(children,childProps){if(!children)return children;if("function"==typeof children)return children(childProps);if(Array.isArray(children))return children.map(function(child){return evaluateChildren(child,childProps)});return(0,_react.cloneElement)(children,childProps)};var _react=__webpack_require__(8)},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_assertThisInitialized2=_interopRequireDefault(__webpack_require__(12)),_defineProperty2=_interopRequireDefault(__webpack_require__(6)),_react=__webpack_require__(8),_propTypes=_interopRequireDefault(__webpack_require__(32)),_staticMap=_interopRequireDefault(__webpack_require__(392)),_mapState=__webpack_require__(74),_viewportMercatorProject=_interopRequireDefault(__webpack_require__(37)),_transitionManager=_interopRequireDefault(__webpack_require__(149)),_mapContext=_interopRequireDefault(__webpack_require__(148)),_mjolnir=__webpack_require__(352),_mapController=_interopRequireDefault(__webpack_require__(229)),_deprecateWarn=_interopRequireDefault(__webpack_require__(394)),propTypes=Object.assign({},_staticMap.default.propTypes,{maxZoom:_propTypes.default.number,minZoom:_propTypes.default.number,maxPitch:_propTypes.default.number,minPitch:_propTypes.default.number,onViewStateChange:_propTypes.default.func,onViewportChange:_propTypes.default.func,onInteractionStateChange:_propTypes.default.func,transitionDuration:_propTypes.default.number,transitionInterpolator:_propTypes.default.object,transitionInterruption:_propTypes.default.number,transitionEasing:_propTypes.default.func,onTransitionStart:_propTypes.default.func,onTransitionInterrupt:_propTypes.default.func,onTransitionEnd:_propTypes.default.func,scrollZoom:_propTypes.default.bool,dragPan:_propTypes.default.bool,dragRotate:_propTypes.default.bool,doubleClickZoom:_propTypes.default.bool,touchZoom:_propTypes.default.bool,touchRotate:_propTypes.default.bool,keyboard:_propTypes.default.bool,onHover:_propTypes.default.func,onClick:_propTypes.default.func,onDblClick:_propTypes.default.func,onContextMenu:_propTypes.default.func,onMouseDown:_propTypes.default.func,onMouseMove:_propTypes.default.func,onMouseUp:_propTypes.default.func,onTouchStart:_propTypes.default.func,onTouchMove:_propTypes.default.func,onTouchEnd:_propTypes.default.func,onMouseEnter:_propTypes.default.func,onMouseLeave:_propTypes.default.func,onMouseOut:_propTypes.default.func,onWheel:_propTypes.default.func,touchAction:_propTypes.default.string,clickRadius:_propTypes.default.number,interactiveLayerIds:_propTypes.default.array,getCursor:_propTypes.default.func,controller:_propTypes.default.instanceOf(_mapController.default)}),defaultProps=Object.assign({},_staticMap.default.defaultProps,_mapState.MAPBOX_LIMITS,_transitionManager.default.defaultProps,{onViewStateChange:null,onViewportChange:null,onClick:null,onNativeClick:null,onHover:null,onContextMenu:function(event){return event.preventDefault()},scrollZoom:!0,dragPan:!0,dragRotate:!0,doubleClickZoom:!0,touchZoom:!0,touchRotate:!1,keyboard:!0,touchAction:"none",clickRadius:0,getCursor:function(_ref){var isDragging=_ref.isDragging,isHovering=_ref.isHovering;return isDragging?"grabbing":isHovering?"pointer":"grab"}}),InteractiveMap=function(_PureComponent){function InteractiveMap(props){var _this;return(0,_classCallCheck2.default)(this,InteractiveMap),_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(InteractiveMap).call(this,props)),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"state",{isLoaded:!1,isDragging:!1,isHovering:!1}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_controller",void 0),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_eventManager",void 0),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_interactiveContext",void 0),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_width",0),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_height",0),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_eventCanvasRef",(0,_react.createRef)()),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_staticMapRef",(0,_react.createRef)()),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"getMap",function(){return _this._staticMapRef.current?_this._staticMapRef.current.getMap():null}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"queryRenderedFeatures",function(geometry){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},map=_this.getMap();return map&&map.queryRenderedFeatures(geometry,options)}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_onInteractionStateChange",function(interactionState){var _interactionState$isD=interactionState.isDragging,isDragging=void 0!==_interactionState$isD&&_interactionState$isD;isDragging!==_this.state.isDragging&&_this.setState({isDragging:isDragging});var onInteractionStateChange=_this.props.onInteractionStateChange;onInteractionStateChange&&onInteractionStateChange(interactionState)}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_onResize",function(_ref2){var width=_ref2.width,height=_ref2.height;_this._width=width,_this._height=height,_this._setControllerProps(_this.props),_this.props.onResize({width:width,height:height})}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_onViewportChange",function(viewState,interactionState,oldViewState){var _this$props=_this.props,onViewStateChange=_this$props.onViewStateChange,onViewportChange=_this$props.onViewportChange;onViewStateChange&&onViewStateChange({viewState:viewState,interactionState:interactionState,oldViewState:oldViewState}),onViewportChange&&onViewportChange(viewState,interactionState,oldViewState)}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_onLoad",function(event){_this.setState({isLoaded:!0}),_this.props.onLoad(event)}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_onEvent",function(callbackName,event){var func=_this.props[callbackName];func&&func(_this._normalizeEvent(event))}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_onPointerDown",function(event){switch(event.pointerType){case"touch":_this._onEvent("onTouchStart",event);break;default:_this._onEvent("onMouseDown",event)}}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_onPointerUp",function(event){switch(event.pointerType){case"touch":_this._onEvent("onTouchEnd",event);break;default:_this._onEvent("onMouseUp",event)}}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_onPointerMove",function(event){switch(event.pointerType){case"touch":_this._onEvent("onTouchMove",event);break;default:_this._onEvent("onMouseMove",event)}if(!_this.state.isDragging){var features,_this$props2=_this.props,onHover=_this$props2.onHover,interactiveLayerIds=_this$props2.interactiveLayerIds;event=_this._normalizeEvent(event),_this.state.isLoaded&&(interactiveLayerIds||onHover)&&(features=_this._getFeatures({pos:event.point,radius:_this.props.clickRadius})),onHover&&(event.features=features,onHover(event));var isHovering=Boolean(interactiveLayerIds&&features&&features.length>0),isEntering=isHovering&&!_this.state.isHovering,isExiting=!isHovering&&_this.state.isHovering;isEntering&&_this._onEvent("onMouseEnter",event),isExiting&&_this._onEvent("onMouseLeave",event),(isEntering||isExiting)&&_this.setState({isHovering:isHovering})}}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_onClick",function(event){var _this$props3=_this.props,onClick=_this$props3.onClick,onNativeClick=_this$props3.onNativeClick,onDblClick=_this$props3.onDblClick,doubleClickZoom=_this$props3.doubleClickZoom,callbacks=[],isDoubleClickEnabled=onDblClick||doubleClickZoom;switch(event.type){case"anyclick":callbacks.push(onNativeClick),isDoubleClickEnabled||callbacks.push(onClick);break;case"click":isDoubleClickEnabled&&callbacks.push(onClick)}(callbacks=callbacks.filter(Boolean)).length&&((event=_this._normalizeEvent(event)).features=_this._getFeatures({pos:event.point,radius:_this.props.clickRadius}),callbacks.forEach(function(cb){return cb(event)}))}),(0,_deprecateWarn.default)(props),_this._controller=props.controller||new _mapController.default,_this._eventManager=new _mjolnir.EventManager(null,{touchAction:props.touchAction}),_this._updateInteractiveContext({isDragging:!1,eventManager:_this._eventManager}),_this}return(0,_inherits2.default)(InteractiveMap,_PureComponent),(0,_createClass2.default)(InteractiveMap,null,[{key:"supported",value:function(){return _staticMap.default.supported()}}]),(0,_createClass2.default)(InteractiveMap,[{key:"componentDidMount",value:function(){var eventManager=this._eventManager,mapContainer=this._eventCanvasRef.current;eventManager.setElement(mapContainer),eventManager.on({pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerup:this._onPointerUp,pointerleave:this._onEvent.bind(this,"onMouseOut"),click:this._onClick,anyclick:this._onClick,dblclick:this._onEvent.bind(this,"onDblClick"),wheel:this._onEvent.bind(this,"onWheel"),contextmenu:this._onEvent.bind(this,"onContextMenu")}),this._setControllerProps(this.props),this._updateInteractiveContext({mapContainer:mapContainer})}},{key:"componentWillUpdate",value:function(nextProps,nextState){this._setControllerProps(nextProps),nextState.isDragging!==this.state.isDragging&&this._updateInteractiveContext({isDragging:nextState.isDragging})}},{key:"_setControllerProps",value:function(props){props=Object.assign({},props,props.viewState,{isInteractive:Boolean(props.onViewStateChange||props.onViewportChange),onViewportChange:this._onViewportChange,onStateChange:this._onInteractionStateChange,eventManager:this._eventManager,width:this._width,height:this._height}),this._controller.setOptions(props)}},{key:"_getFeatures",value:function(_ref3){var features,pos=_ref3.pos,radius=_ref3.radius,queryParams={},map=this.getMap();if(this.props.interactiveLayerIds&&(queryParams.layers=this.props.interactiveLayerIds),radius){var size=radius,bbox=[[pos[0]-size,pos[1]+size],[pos[0]+size,pos[1]-size]];features=map&&map.queryRenderedFeatures(bbox,queryParams)}else features=map&&map.queryRenderedFeatures(pos,queryParams);return features}},{key:"_updateInteractiveContext",value:function(updatedContext){this._interactiveContext=Object.assign({},this._interactiveContext,updatedContext)}},{key:"_normalizeEvent",value:function(event){if(event.lngLat)return event;var _event$offsetCenter=event.offsetCenter,pos=[_event$offsetCenter.x,_event$offsetCenter.y],viewport=new _viewportMercatorProject.default(Object.assign({},this.props,{width:this._width,height:this._height}));return event.point=pos,event.lngLat=viewport.unproject(pos),event}},{key:"render",value:function(){var _this$props4=this.props,width=_this$props4.width,height=_this$props4.height,style=_this$props4.style,getCursor=_this$props4.getCursor,eventCanvasStyle=Object.assign({position:"relative"},style,{width:width,height:height,cursor:getCursor(this.state)});return(0,_react.createElement)(_mapContext.default.Provider,{value:this._interactiveContext},(0,_react.createElement)("div",{key:"event-canvas",ref:this._eventCanvasRef,style:eventCanvasStyle},(0,_react.createElement)(_staticMap.default,Object.assign({},this.props,{width:"100%",height:"100%",style:null,onResize:this._onResize,onLoad:this._onLoad,ref:this._staticMapRef,children:this.props.children}))))}}]),InteractiveMap}(_react.PureComponent);exports.default=InteractiveMap,(0,_defineProperty2.default)(InteractiveMap,"propTypes",propTypes),(0,_defineProperty2.default)(InteractiveMap,"defaultProps",defaultProps)},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.normalizeStyle=function(style){if(!style)return null;if("string"==typeof style)return style;style.toJS&&(style=style.toJS());var layerIndex=style.layers.reduce(function(accum,current){return Object.assign(accum,(0,_defineProperty2.default)({},current.id,current))},{});return style.layers=style.layers.map(function(layer){delete(layer=Object.assign({},layer)).interactive;var layerRef=layerIndex[layer.ref];return layerRef&&(delete layer.ref,void 0!==layerRef.type&&(layer.type=layerRef.type),void 0!==layerRef.source&&(layer.source=layerRef.source),void 0!==layerRef["source-layer"]&&(layer["source-layer"]=layerRef["source-layer"]),void 0!==layerRef.minzoom&&(layer.minzoom=layerRef.minzoom),void 0!==layerRef.maxzoom&&(layer.maxzoom=layerRef.maxzoom),void 0!==layerRef.filter&&(layer.filter=layerRef.filter),void 0!==layerRef.layout&&(layer.layout=layer.layout||{},layer.layout=Object.assign({},layer.layout,layerRef.layout))),layer}),style};var _defineProperty2=_interopRequireDefault(__webpack_require__(6))},function(module,exports,__webpack_require__){"use strict";(function(global){var React=__webpack_require__(8);function createDetectElementResize(nonce){var _window;_window="undefined"!=typeof window?window:"undefined"!=typeof self?self:global;var cancel,raf,attachEvent="undefined"!=typeof document&&document.attachEvent;if(!attachEvent){var requestFrame=(raf=_window.requestAnimationFrame||_window.mozRequestAnimationFrame||_window.webkitRequestAnimationFrame||function(fn){return _window.setTimeout(fn,20)},function(fn){return raf(fn)}),cancelFrame=(cancel=_window.cancelAnimationFrame||_window.mozCancelAnimationFrame||_window.webkitCancelAnimationFrame||_window.clearTimeout,function(id){return cancel(id)}),resetTriggers=function(element){var triggers=element.__resizeTriggers__,expand=triggers.firstElementChild,contract=triggers.lastElementChild,expandChild=expand.firstElementChild;contract.scrollLeft=contract.scrollWidth,contract.scrollTop=contract.scrollHeight,expandChild.style.width=expand.offsetWidth+1+"px",expandChild.style.height=expand.offsetHeight+1+"px",expand.scrollLeft=expand.scrollWidth,expand.scrollTop=expand.scrollHeight},scrollListener=function(e){if(!(e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var element=this;resetTriggers(this),this.__resizeRAF__&&cancelFrame(this.__resizeRAF__),this.__resizeRAF__=requestFrame(function(){(function(element){return element.offsetWidth!=element.__resizeLast__.width||element.offsetHeight!=element.__resizeLast__.height})(element)&&(element.__resizeLast__.width=element.offsetWidth,element.__resizeLast__.height=element.offsetHeight,element.__resizeListeners__.forEach(function(fn){fn.call(element,e)}))})}},animation=!1,keyframeprefix="",animationstartevent="animationstart",domPrefixes="Webkit Moz O ms".split(" "),startEvents="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),elm=document.createElement("fakeelement");if(void 0!==elm.style.animationName&&(animation=!0),!1===animation)for(var i=0;i<domPrefixes.length;i++)if(void 0!==elm.style[domPrefixes[i]+"AnimationName"]){keyframeprefix="-"+domPrefixes[i].toLowerCase()+"-",animationstartevent=startEvents[i],animation=!0;break}var animationName="resizeanim",animationKeyframes="@"+keyframeprefix+"keyframes "+animationName+" { from { opacity: 0; } to { opacity: 0; } } ",animationStyle=keyframeprefix+"animation: 1ms "+animationName+"; "}return{addResizeListener:function(element,fn){if(attachEvent)element.attachEvent("onresize",fn);else{if(!element.__resizeTriggers__){var doc=element.ownerDocument,elementStyle=_window.getComputedStyle(element);elementStyle&&"static"==elementStyle.position&&(element.style.position="relative"),function(doc){if(!doc.getElementById("detectElementResize")){var css=(animationKeyframes||"")+".resize-triggers { "+(animationStyle||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',head=doc.head||doc.getElementsByTagName("head")[0],style=doc.createElement("style");style.id="detectElementResize",style.type="text/css",null!=nonce&&style.setAttribute("nonce",nonce),style.styleSheet?style.styleSheet.cssText=css:style.appendChild(doc.createTextNode(css)),head.appendChild(style)}}(doc),element.__resizeLast__={},element.__resizeListeners__=[],(element.__resizeTriggers__=doc.createElement("div")).className="resize-triggers",element.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',element.appendChild(element.__resizeTriggers__),resetTriggers(element),element.addEventListener("scroll",scrollListener,!0),animationstartevent&&(element.__resizeTriggers__.__animationListener__=function(e){e.animationName==animationName&&resetTriggers(element)},element.__resizeTriggers__.addEventListener(animationstartevent,element.__resizeTriggers__.__animationListener__))}element.__resizeListeners__.push(fn)}},removeResizeListener:function(element,fn){if(attachEvent)element.detachEvent("onresize",fn);else if(element.__resizeListeners__.splice(element.__resizeListeners__.indexOf(fn),1),!element.__resizeListeners__.length){element.removeEventListener("scroll",scrollListener,!0),element.__resizeTriggers__.__animationListener__&&(element.__resizeTriggers__.removeEventListener(animationstartevent,element.__resizeTriggers__.__animationListener__),element.__resizeTriggers__.__animationListener__=null);try{element.__resizeTriggers__=!element.removeChild(element.__resizeTriggers__)}catch(e){}}}}}var classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},possibleConstructorReturn=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call},AutoSizer=function(_React$PureComponent){function AutoSizer(){var _ref,_temp,_this;classCallCheck(this,AutoSizer);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=possibleConstructorReturn(this,(_ref=AutoSizer.__proto__||Object.getPrototypeOf(AutoSizer)).call.apply(_ref,[this].concat(args))),_this.state={height:_this.props.defaultHeight||0,width:_this.props.defaultWidth||0},_this._onResize=function(){var _this$props=_this.props,disableHeight=_this$props.disableHeight,disableWidth=_this$props.disableWidth,onResize=_this$props.onResize;if(_this._parentNode){var _height=_this._parentNode.offsetHeight||0,_width=_this._parentNode.offsetWidth||0,_style=window.getComputedStyle(_this._parentNode)||{},paddingLeft=parseInt(_style.paddingLeft,10)||0,paddingRight=parseInt(_style.paddingRight,10)||0,paddingTop=parseInt(_style.paddingTop,10)||0,paddingBottom=parseInt(_style.paddingBottom,10)||0,newHeight=_height-paddingTop-paddingBottom,newWidth=_width-paddingLeft-paddingRight;(!disableHeight&&_this.state.height!==newHeight||!disableWidth&&_this.state.width!==newWidth)&&(_this.setState({height:_height-paddingTop-paddingBottom,width:_width-paddingLeft-paddingRight}),onResize({height:_height,width:_width}))}},_this._setRef=function(autoSizer){_this._autoSizer=autoSizer},possibleConstructorReturn(_this,_temp)}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(AutoSizer,React.PureComponent),createClass(AutoSizer,[{key:"componentDidMount",value:function(){var nonce=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._detectElementResize=createDetectElementResize(nonce),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var _props=this.props,children=_props.children,className=_props.className,disableHeight=_props.disableHeight,disableWidth=_props.disableWidth,style=_props.style,_state=this.state,height=_state.height,width=_state.width,outerStyle={overflow:"visible"},childParams={},bailoutOnChildren=!1;return disableHeight||(0===height&&(bailoutOnChildren=!0),outerStyle.height=0,childParams.height=height),disableWidth||(0===width&&(bailoutOnChildren=!0),outerStyle.width=0,childParams.width=width),React.createElement("div",{className:className,ref:this._setRef,style:_extends({},outerStyle,style)},!bailoutOnChildren&&children(childParams))}}]),AutoSizer}();AutoSizer.defaultProps={onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}},module.exports=AutoSizer}).call(this,__webpack_require__(17))},function(module,exports,__webpack_require__){"use strict";(function(process){var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.getAccessToken=getAccessToken,exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_defineProperty2=_interopRequireDefault(__webpack_require__(6)),_propTypes=_interopRequireDefault(__webpack_require__(32)),_globals=__webpack_require__(226);var propTypes={container:_propTypes.default.object,gl:_propTypes.default.object,mapboxApiAccessToken:_propTypes.default.string,attributionControl:_propTypes.default.bool,preserveDrawingBuffer:_propTypes.default.bool,reuseMaps:_propTypes.default.bool,transformRequest:_propTypes.default.func,mapOptions:_propTypes.default.object,mapStyle:_propTypes.default.oneOfType([_propTypes.default.string,_propTypes.default.object]),visible:_propTypes.default.bool,asyncRender:_propTypes.default.bool,onLoad:_propTypes.default.func,onError:_propTypes.default.func,width:_propTypes.default.number,height:_propTypes.default.number,viewState:_propTypes.default.object,longitude:_propTypes.default.number,latitude:_propTypes.default.number,zoom:_propTypes.default.number,bearing:_propTypes.default.number,pitch:_propTypes.default.number,altitude:_propTypes.default.number},defaultProps={container:_globals.document.body,mapboxApiAccessToken:getAccessToken(),preserveDrawingBuffer:!1,attributionControl:!0,reuseMaps:!1,mapOptions:{},mapStyle:"mapbox://styles/mapbox/light-v8",visible:!0,asyncRender:!1,onLoad:function(){},onError:function(event){event&&console.error(event.error)},width:0,height:0,longitude:0,latitude:0,zoom:0,bearing:0,pitch:0};function getAccessToken(){var accessToken=null;if("undefined"!=typeof window&&window.location){var match=window.location.search.match(/access_token=([^&\/]*)/);accessToken=match&&match[1]}return accessToken||void 0===process||(accessToken=accessToken||"pk.eyJ1IjoiaWx5YWJvLXRlcmFseXRpY3MiLCJhIjoiY2ppaW9wYzJ1MW8weTN2bnJkOHdsbTQ3dSJ9.VP2-bMLHPnmvqxkia-rM3g"),accessToken||"no-token"}function checkPropTypes(props){var component=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"component";props.debug&&_propTypes.default.checkPropTypes(propTypes,props,"prop",component)}var Mapbox=function(){function Mapbox(props){var _this=this;if((0,_classCallCheck2.default)(this,Mapbox),(0,_defineProperty2.default)(this,"mapboxgl",void 0),(0,_defineProperty2.default)(this,"props",defaultProps),(0,_defineProperty2.default)(this,"_map",null),(0,_defineProperty2.default)(this,"width",0),(0,_defineProperty2.default)(this,"height",0),(0,_defineProperty2.default)(this,"_fireLoadEvent",function(){_this.props.onLoad({type:"load",target:_this._map})}),!props.mapboxgl)throw new Error("Mapbox not available");this.mapboxgl=props.mapboxgl,Mapbox.initialized||(Mapbox.initialized=!0,this._checkStyleSheet(this.mapboxgl.version)),this._initialize(props)}return(0,_createClass2.default)(Mapbox,[{key:"finalize",value:function(){return this._destroy(),this}},{key:"setProps",value:function(props){return this._update(this.props,props),this}},{key:"resize",value:function(){return this._map.resize(),this}},{key:"redraw",value:function(){var map=this._map;map.style&&(map._frame&&(map._frame.cancel(),map._frame=null),map._render())}},{key:"getMap",value:function(){return this._map}},{key:"_reuse",value:function(props){this._map=Mapbox.savedMap;var oldContainer=this._map.getContainer(),newContainer=props.container;for(newContainer.classList.add("mapboxgl-map");oldContainer.childNodes.length>0;)newContainer.appendChild(oldContainer.childNodes[0]);this._map._container=newContainer,Mapbox.savedMap=null,props.mapStyle&&this._map.setStyle(props.mapStyle,{diff:!0}),this._map.isStyleLoaded()?this._fireLoadEvent():this._map.once("styledata",this._fireLoadEvent)}},{key:"_create",value:function(props){if(props.reuseMaps&&Mapbox.savedMap)this._reuse(props);else{if(props.gl){var getContext=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=function(){return HTMLCanvasElement.prototype.getContext=getContext,props.gl}}var mapOptions={container:props.container,center:[0,0],zoom:8,pitch:0,bearing:0,maxZoom:24,style:props.mapStyle,interactive:!1,trackResize:!1,attributionControl:props.attributionControl,preserveDrawingBuffer:props.preserveDrawingBuffer};props.transformRequest&&(mapOptions.transformRequest=props.transformRequest),this._map=new this.mapboxgl.Map(Object.assign({},mapOptions,props.mapOptions)),this._map.once("load",props.onLoad),this._map.on("error",props.onError)}return this}},{key:"_destroy",value:function(){this._map&&(Mapbox.savedMap?this._map.remove():(Mapbox.savedMap=this._map,this._map.off("load",this.props.onLoad),this._map.off("error",this.props.onError),this._map.off("styledata",this._fireLoadEvent)),this._map=null)}},{key:"_initialize",value:function(props){var _this2=this;checkPropTypes(props=Object.assign({},defaultProps,props),"Mapbox"),this.mapboxgl.accessToken=props.mapboxApiAccessToken||defaultProps.mapboxApiAccessToken,this._create(props);var container=props.container;Object.defineProperty(container,"offsetWidth",{get:function(){return _this2.width}}),Object.defineProperty(container,"clientWidth",{get:function(){return _this2.width}}),Object.defineProperty(container,"offsetHeight",{get:function(){return _this2.height}}),Object.defineProperty(container,"clientHeight",{get:function(){return _this2.height}});var canvas=this._map.getCanvas();canvas&&(canvas.style.outline="none"),this._updateMapViewport({},props),this._updateMapSize({},props),this.props=props}},{key:"_update",value:function(oldProps,newProps){if(this._map){checkPropTypes(newProps=Object.assign({},this.props,newProps),"Mapbox");var viewportChanged=this._updateMapViewport(oldProps,newProps),sizeChanged=this._updateMapSize(oldProps,newProps);newProps.asyncRender||!viewportChanged&&!sizeChanged||this.redraw(),this.props=newProps}}},{key:"_updateMapSize",value:function(oldProps,newProps){var sizeChanged=oldProps.width!==newProps.width||oldProps.height!==newProps.height;return sizeChanged&&(this.width=newProps.width,this.height=newProps.height,this.resize()),sizeChanged}},{key:"_updateMapViewport",value:function(oldProps,newProps){var oldViewState=this._getViewState(oldProps),newViewState=this._getViewState(newProps),viewportChanged=newViewState.latitude!==oldViewState.latitude||newViewState.longitude!==oldViewState.longitude||newViewState.zoom!==oldViewState.zoom||newViewState.pitch!==oldViewState.pitch||newViewState.bearing!==oldViewState.bearing||newViewState.altitude!==oldViewState.altitude;return viewportChanged&&(this._map.jumpTo(this._viewStateToMapboxProps(newViewState)),newViewState.altitude!==oldViewState.altitude&&(this._map.transform.altitude=newViewState.altitude)),viewportChanged}},{key:"_getViewState",value:function(props){var _ref=props.viewState||props,longitude=_ref.longitude,latitude=_ref.latitude,zoom=_ref.zoom,_ref$pitch=_ref.pitch,pitch=void 0===_ref$pitch?0:_ref$pitch,_ref$bearing=_ref.bearing,bearing=void 0===_ref$bearing?0:_ref$bearing,_ref$altitude=_ref.altitude;return{longitude:longitude,latitude:latitude,zoom:zoom,pitch:pitch,bearing:bearing,altitude:void 0===_ref$altitude?1.5:_ref$altitude}}},{key:"_checkStyleSheet",value:function(){var mapboxVersion=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0.47.0";if(void 0!==_globals.document)try{var testElement=_globals.document.createElement("div");if(testElement.className="mapboxgl-map",testElement.style.display="none",_globals.document.body.append(testElement),!("static"!==window.getComputedStyle(testElement).position)){var link=_globals.document.createElement("link");link.setAttribute("rel","stylesheet"),link.setAttribute("type","text/css"),link.setAttribute("href","https://api.tiles.mapbox.com/mapbox-gl-js/v".concat(mapboxVersion,"/mapbox-gl.css")),_globals.document.head.append(link)}}catch(error){}}},{key:"_viewStateToMapboxProps",value:function(viewState){return{center:[viewState.longitude,viewState.latitude],zoom:viewState.zoom,bearing:viewState.bearing,pitch:viewState.pitch}}}]),Mapbox}();exports.default=Mapbox,(0,_defineProperty2.default)(Mapbox,"initialized",!1),(0,_defineProperty2.default)(Mapbox,"propTypes",propTypes),(0,_defineProperty2.default)(Mapbox,"defaultProps",defaultProps),(0,_defineProperty2.default)(Mapbox,"savedMap",null)}).call(this,__webpack_require__(44))},function(module,exports,__webpack_require__){module.exports=function(){"use strict";var shared,worker,mapboxgl;function define(_,chunk){if(shared)if(worker){var workerBundleString="var sharedChunk = {}; ("+shared+")(sharedChunk); ("+worker+")(sharedChunk);",sharedChunk={};shared(sharedChunk),(mapboxgl=chunk(sharedChunk)).workerUrl=window.URL.createObjectURL(new Blob([workerBundleString],{type:"text/javascript"}))}else worker=chunk;else shared=chunk}return define(0,function(t){function e(t,e){return t(e={exports:{}},e.exports),e.exports}var r=n;function n(t,e,r,n){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=r,this.p2y=n}n.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},n.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},n.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},n.prototype.solveCurveX=function(t,e){var r,n,i,a,o;for(void 0===e&&(e=1e-6),i=t,o=0;o<8;o++){if(a=this.sampleCurveX(i)-t,Math.abs(a)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=a/s}if((i=t)<(r=0))return r;if(i>(n=1))return n;for(;r<n;){if(a=this.sampleCurveX(i),Math.abs(a-t)<e)return i;t>a?r=i:n=i,i=.5*(n-r)+r}return i},n.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var i=a;function a(t,e){this.x=t,this.y=e}function o(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!o(t[r],e[r]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!o(t[n],e[n]))return!1;return!0}return t===e}function s(t,e,n,i){var a=new r(t,e,n,i);return function(t){return a.solve(t)}}a.prototype={clone:function(){return new a(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,r=t.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,r=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=r,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),r=Math.sin(t),n=e*this.x-r*this.y,i=r*this.x+e*this.y;return this.x=n,this.y=i,this},_rotateAround:function(t,e){var r=Math.cos(t),n=Math.sin(t),i=e.x+r*(this.x-e.x)-n*(this.y-e.y),a=e.y+n*(this.x-e.x)+r*(this.y-e.y);return this.x=i,this.y=a,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},a.convert=function(t){return t instanceof a?t:Array.isArray(t)?new a(t[0],t[1]):t};var u=s(.25,.1,.25,1);function l(t,e,r){return Math.min(r,Math.max(e,t))}function p(t,e,r){var n=r-e,i=((t-e)%n+n)%n+e;return i===e?r:i}function c(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];for(var n=0,i=e;n<i.length;n+=1){var a=i[n];for(var o in a)t[o]=a[o]}return t}var h=1;function f(){return h++}function y(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function d(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function m(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})}function v(t,e){return-1!==t.indexOf(e,t.length-e.length)}function g(t,e,r){var n={};for(var i in t)n[i]=e.call(r||this,t[i],i,t);return n}function x(t,e,r){var n={};for(var i in t)e.call(r||this,t[i],i,t)&&(n[i]=t[i]);return n}function b(t){return Array.isArray(t)?t.map(b):"object"==typeof t&&t?g(t,b):t}var _={};function w(t){_[t]||("undefined"!=typeof console&&console.warn(t),_[t]=!0)}function A(t,e,r){return(r.y-t.y)*(e.x-t.x)>(e.y-t.y)*(r.x-t.x)}function S(t){for(var e=0,r=0,n=t.length,i=n-1,a=void 0,o=void 0;r<n;i=r++)a=t[r],e+=((o=t[i]).x-a.x)*(a.y+o.y);return e}function k(t){try{var e=self[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}var z,I,B=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),E=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,P=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,V={now:B,frame:function(t){var e=E(t);return{cancel:function(){return P(e)}}},getImageData:function(t){var e=self.document.createElement("canvas"),r=e.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return e.width=t.width,e.height=t.height,r.drawImage(t,0,0,t.width,t.height),r.getImageData(0,0,t.width,t.height)},resolveURL:function(t){var e=self.document.createElement("a");return e.href=t,e.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio}},C={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},M={supported:!1,testSupport:function(t){!T&&I&&(F?L(t):z=t)}},T=!1,F=!1;function L(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,I),t.isContextLost())return;M.supported=!0}catch(t){}t.deleteTexture(e),T=!0}self.document&&((I=self.document.createElement("img")).onload=function(){z&&L(z),z=null,F=!0},I.onerror=function(){T=!0,z=null},I.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var O="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes";function D(t,e){var r=X(C.API_URL);if(t.protocol=r.protocol,t.authority=r.authority,"/"!==r.path&&(t.path=""+r.path+t.path),!C.REQUIRE_ACCESS_TOKEN)return Z(t);if(!(e=e||C.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+O);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+O);return t.params.push("access_token="+e),Z(t)}function U(t){return 0===t.indexOf("mapbox:")}var j=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function R(t){return j.test(t)}var q=/(\.(png|jpg)\d*)(?=$)/,N=/\.[\w]+$/,K=function(t){var e=X(t);if(!e.path.match(/(^\/v4\/)/)||!e.path.match(N))return t;var r="mapbox://tiles/";r+=e.path.replace("/v4/","");var n=e.params.filter(function(t){return!t.match(/^access_token=/)});return n.length&&(r+="?"+n.join("&")),r},G=/^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/;function X(t){var e=t.match(G);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function Z(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function H(t){if(!t)return null;var e,r=t.split(".");if(!r||3!==r.length)return null;try{return JSON.parse((e=r[1],decodeURIComponent(self.atob(e).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch(t){return null}}var Y=function(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Y.prototype.getStorageKey=function(t){var e,r=H(C.ACCESS_TOKEN),n="";return r&&r.u?(e=r.u,n=self.btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode(Number("0x"+e))}))):n=C.ACCESS_TOKEN||"",t?"mapbox.eventData."+t+":"+n:"mapbox.eventData:"+n},Y.prototype.fetchEventData=function(){var t=k("localStorage"),e=this.getStorageKey(),r=this.getStorageKey("uuid");if(t)try{var n=self.localStorage.getItem(e);n&&(this.eventData=JSON.parse(n));var i=self.localStorage.getItem(r);i&&(this.anonId=i)}catch(t){w("Unable to read from LocalStorage")}},Y.prototype.saveEventData=function(){var t=k("localStorage"),e=this.getStorageKey(),r=this.getStorageKey("uuid");if(t)try{self.localStorage.setItem(r,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){w("Unable to write to LocalStorage")}},Y.prototype.processRequests=function(){},Y.prototype.postEvent=function(t,e,r){var n=this;if(C.EVENTS_URL){var i=X(C.EVENTS_URL);i.params.push("access_token="+(C.ACCESS_TOKEN||""));var a={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"0.53.1",userId:this.anonId},o=e?c(a,e):a,s={url:Z(i),headers:{"Content-Type":"text/plain"},body:JSON.stringify([o])};this.pendingRequest=st(s,function(t){n.pendingRequest=null,r(t),n.saveEventData(),n.processRequests()})}},Y.prototype.queueRequest=function(t){this.queue.push(t),this.processRequests()};var J=function(t){function e(){t.call(this,"map.load"),this.success={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.postMapLoadEvent=function(t,e){C.EVENTS_URL&&C.ACCESS_TOKEN&&Array.isArray(t)&&t.some(function(t){return U(t)||R(t)})&&this.queueRequest({id:e,timestamp:Date.now()})},e.prototype.processRequests=function(){var t=this;if(!this.pendingRequest&&0!==this.queue.length){var e=this.queue.shift(),r=e.id,n=e.timestamp;r&&this.success[r]||(this.anonId||this.fetchEventData(),d(this.anonId)||(this.anonId=y()),this.postEvent(n,{},function(e){e||r&&(t.success[r]=!0)}))}},e}(Y),$=new(function(t){function e(){t.call(this,"appUserTurnstile")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.postTurnstileEvent=function(t){C.EVENTS_URL&&C.ACCESS_TOKEN&&Array.isArray(t)&&t.some(function(t){return U(t)||R(t)})&&this.queueRequest(Date.now())},e.prototype.processRequests=function(){var t=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var e=H(C.ACCESS_TOKEN),r=e?e.u:C.ACCESS_TOKEN,n=r!==this.eventData.tokenU;d(this.anonId)||(this.anonId=y(),n=!0);var i=this.queue.shift();if(this.eventData.lastSuccess){var a=new Date(this.eventData.lastSuccess),o=new Date(i),s=(i-this.eventData.lastSuccess)/864e5;n=n||s>=1||s<-1||a.getDate()!==o.getDate()}else n=!0;if(!n)return this.processRequests();this.postEvent(i,{"enabled.telemetry":!1},function(e){e||(t.eventData.lastSuccess=i,t.eventData.tokenU=r)})}},e}(Y)),W=$.postTurnstileEvent.bind($),Q=new J,tt=Q.postMapLoadEvent.bind(Q),et={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(et);var rt=function(t){function e(e,r,n){401===r&&R(n)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),t.call(this,e),this.status=r,this.url=n,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error);function nt(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}var ut,lt,it=nt()?function(){return self.worker&&self.worker.referrer}:function(){var t=self.location.origin;if(t&&"null"!==t&&"file://"!==t)return t+self.location.pathname},at=function(t,e){if(!/^file:/.test(t.url)){if(self.fetch&&self.Request&&self.AbortController)return function(t,e){var r=new self.AbortController,n=new self.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:it(),signal:r.signal});return"json"===t.type&&n.headers.set("Accept","application/json"),self.fetch(n).then(function(r){r.ok?r[t.type||"text"]().then(function(t){e(null,t,r.headers.get("Cache-Control"),r.headers.get("Expires"))}).catch(function(t){return e(new Error(t.message))}):e(new rt(r.statusText,r.status,t.url))}).catch(function(t){20!==t.code&&e(new Error(t.message))}),{cancel:function(){return r.abort()}}}(t,e);if(nt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e)}return function(t,e){var r=new self.XMLHttpRequest;for(var n in r.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(r.responseType="arraybuffer"),t.headers)r.setRequestHeader(n,t.headers[n]);return"json"===t.type&&r.setRequestHeader("Accept","application/json"),r.withCredentials="include"===t.credentials,r.onerror=function(){e(new Error(r.statusText))},r.onload=function(){if((r.status>=200&&r.status<300||0===r.status)&&null!==r.response){var n=r.response;if("json"===t.type)try{n=JSON.parse(r.response)}catch(t){return e(t)}e(null,n,r.getResponseHeader("Cache-Control"),r.getResponseHeader("Expires"))}else e(new rt(r.statusText,r.status,t.url))},r.send(t.body),{cancel:function(){return r.abort()}}}(t,e)},ot=function(t,e){return at(c(t,{type:"arrayBuffer"}),e)},st=function(t,e){return at(c(t,{method:"POST"}),e)};ut=[],lt=0;var pt=function(t,e){if(lt>=C.MAX_PARALLEL_IMAGE_REQUESTS){var r={requestParameters:t,callback:e,cancelled:!1,cancel:function(){this.cancelled=!0}};return ut.push(r),r}lt++;var n=!1,i=function(){if(!n)for(n=!0,lt--;ut.length&&lt<C.MAX_PARALLEL_IMAGE_REQUESTS;){var t=ut.shift(),e=t.requestParameters,r=t.callback;t.cancelled||(t.cancel=pt(e,r).cancel)}},a=ot(t,function(t,r,n,a){if(i(),t)e(t);else if(r){var o=new self.Image,s=self.URL||self.webkitURL;o.onload=function(){e(null,o),s.revokeObjectURL(o.src)},o.onerror=function(){return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var u=new self.Blob([new Uint8Array(r)],{type:"image/png"});o.cacheControl=n,o.expires=a,o.src=r.byteLength?s.createObjectURL(u):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}});return{cancel:function(){a.cancel(),i()}}};function ct(t,e,r){r[t]&&-1!==r[t].indexOf(e)||(r[t]=r[t]||[],r[t].push(e))}function ht(t,e,r){if(r&&r[t]){var n=r[t].indexOf(e);-1!==n&&r[t].splice(n,1)}}var ft=function(t,e){void 0===e&&(e={}),c(this,e),this.type=t},yt=function(t){function e(e,r){void 0===r&&(r={}),t.call(this,"error",c({error:e},r))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ft),dt=function(){};dt.prototype.on=function(t,e){return this._listeners=this._listeners||{},ct(t,e,this._listeners),this},dt.prototype.off=function(t,e){return ht(t,e,this._listeners),ht(t,e,this._oneTimeListeners),this},dt.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},ct(t,e,this._oneTimeListeners),this},dt.prototype.fire=function(t,e){"string"==typeof t&&(t=new ft(t,e||{}));var r=t.type;if(this.listens(r)){t.target=this;for(var n=0,i=this._listeners&&this._listeners[r]?this._listeners[r].slice():[];n<i.length;n+=1)i[n].call(this,t);for(var a=0,o=this._oneTimeListeners&&this._oneTimeListeners[r]?this._oneTimeListeners[r].slice():[];a<o.length;a+=1){var s=o[a];ht(r,s,this._oneTimeListeners),s.call(this,t)}var u=this._eventedParent;u&&(c(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),u.fire(t))}else t instanceof yt&&console.error(t.error);return this},dt.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},dt.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var mt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"string",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}}},vt=function(t,e,r,n){this.message=(t?t+": ":"")+r,n&&(this.identifier=n),null!=e&&e.__line__&&(this.line=e.__line__)};function gt(t){var e=t.key,r=t.value;return r?[new vt(e,r,"constants have been deprecated as of v8")]:[]}function xt(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];for(var n=0,i=e;n<i.length;n+=1){var a=i[n];for(var o in a)t[o]=a[o]}return t}function bt(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function _t(t){return Array.isArray(t)?t.map(_t):bt(t)}var wt=function(t){function e(e,r){t.call(this,r),this.message=r,this.key=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),At=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var r=0,n=e;r<n.length;r+=1){var i=n[r],a=i[0],o=i[1];this.bindings[a]=o}};At.prototype.concat=function(t){return new At(this,t)},At.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},At.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var St={kind:"null"},kt={kind:"number"},zt={kind:"string"},It={kind:"boolean"},Bt={kind:"color"},Et={kind:"object"},Pt={kind:"value"},Vt={kind:"collator"},Ct={kind:"formatted"};function Mt(t,e){return{kind:"array",itemType:t,N:e}}function Tt(t){if("array"===t.kind){var e=Tt(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var Ft=[St,kt,zt,It,Bt,Ct,Et,Mt(Pt)];function Lt(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Lt(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var r=0,n=Ft;r<n.length;r+=1)if(!Lt(n[r],e))return null}return"Expected "+Tt(t)+" but found "+Tt(e)+" instead."}var Ot=e(function(t,e){var r={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function n(t){return(t=Math.round(t))<0?0:t>255?255:t}function i(t){return t<0?0:t>1?1:t}function a(t){return"%"===t[t.length-1]?n(parseFloat(t)/100*255):n(parseInt(t))}function o(t){return"%"===t[t.length-1]?i(parseFloat(t)/100):i(parseFloat(t))}function s(t,e,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?t+(e-t)*r*6:2*r<1?e:3*r<2?t+(e-t)*(2/3-r)*6:t}try{e.parseCSSColor=function(t){var e,i=t.replace(/ /g,"").toLowerCase();if(i in r)return r[i].slice();if("#"===i[0])return 4===i.length?(e=parseInt(i.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===i.length&&(e=parseInt(i.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var u=i.indexOf("("),l=i.indexOf(")");if(-1!==u&&l+1===i.length){var p=i.substr(0,u),c=i.substr(u+1,l-(u+1)).split(","),h=1;switch(p){case"rgba":if(4!==c.length)return null;h=o(c.pop());case"rgb":return 3!==c.length?null:[a(c[0]),a(c[1]),a(c[2]),h];case"hsla":if(4!==c.length)return null;h=o(c.pop());case"hsl":if(3!==c.length)return null;var f=(parseFloat(c[0])%360+360)%360/360,y=o(c[1]),d=o(c[2]),m=d<=.5?d*(y+1):d+y-d*y,v=2*d-m;return[n(255*s(v,m,f+1/3)),n(255*s(v,m,f)),n(255*s(v,m,f-1/3)),h];default:return null}}return null}}catch(t){}}).parseCSSColor,Dt=function(t,e,r,n){void 0===n&&(n=1),this.r=t,this.g=e,this.b=r,this.a=n};Dt.parse=function(t){if(t){if(t instanceof Dt)return t;if("string"==typeof t){var e=Ot(t);if(e)return new Dt(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},Dt.prototype.toString=function(){var t=this.toArray(),e=t[0],r=t[1],n=t[2],i=t[3];return"rgba("+Math.round(e)+","+Math.round(r)+","+Math.round(n)+","+i+")"},Dt.prototype.toArray=function(){var t=this.r,e=this.g,r=this.b,n=this.a;return 0===n?[0,0,0,0]:[255*t/n,255*e/n,255*r/n,n]},Dt.black=new Dt(0,0,0,1),Dt.white=new Dt(1,1,1,1),Dt.transparent=new Dt(0,0,0,0),Dt.red=new Dt(1,0,0,1);var Ut=function(t,e,r){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Ut.prototype.compare=function(t,e){return this.collator.compare(t,e)},Ut.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var jt=function(t,e,r){this.text=t,this.scale=e,this.fontStack=r},Rt=function(t){this.sections=t};function qt(t,e,r,n){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===n||"number"==typeof n&&n>=0&&n<=1?null:"Invalid rgba value ["+[t,e,r,n].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof n?[t,e,r,n]:[t,e,r]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Nt(t){if(null===t)return St;if("string"==typeof t)return zt;if("boolean"==typeof t)return It;if("number"==typeof t)return kt;if(t instanceof Dt)return Bt;if(t instanceof Ut)return Vt;if(t instanceof Rt)return Ct;if(Array.isArray(t)){for(var e,r=t.length,n=0,i=t;n<i.length;n+=1){var a=Nt(i[n]);if(e){if(e===a)continue;e=Pt;break}e=a}return Mt(e||Pt,r)}return Et}function Kt(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Dt||t instanceof Rt?t.toString():JSON.stringify(t)}Rt.fromString=function(t){return new Rt([new jt(t,null,null)])},Rt.prototype.toString=function(){return this.sections.map(function(t){return t.text}).join("")},Rt.prototype.serialize=function(){for(var t=["format"],e=0,r=this.sections;e<r.length;e+=1){var n=r[e];t.push(n.text);var i={};n.fontStack&&(i["text-font"]=["literal",n.fontStack.split(",")]),n.scale&&(i["font-scale"]=n.scale),t.push(i)}return t};var Gt=function(t,e){this.type=t,this.value=e};Gt.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!function t(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof Dt)return!0;if(e instanceof Ut)return!0;if(e instanceof Rt)return!0;if(Array.isArray(e)){for(var r=0,n=e;r<n.length;r+=1)if(!t(n[r]))return!1;return!0}if("object"==typeof e){for(var i in e)if(!t(e[i]))return!1;return!0}return!1}(t[1]))return e.error("invalid value");var r=t[1],n=Nt(r),i=e.expectedType;return"array"!==n.kind||0!==n.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(n=i),new Gt(n,r)},Gt.prototype.evaluate=function(){return this.value},Gt.prototype.eachChild=function(){},Gt.prototype.possibleOutputs=function(){return[this.value]},Gt.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Dt?["rgba"].concat(this.value.toArray()):this.value instanceof Rt?this.value.serialize():this.value};var Xt=function(t){this.name="ExpressionEvaluationError",this.message=t};Xt.prototype.toJSON=function(){return this.message};var Zt={string:zt,number:kt,boolean:It,object:Et},Ht=function(t,e){this.type=t,this.args=e};Ht.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var r,n=1,i=t[0];if("array"===i){var a,o;if(t.length>2){var s=t[1];if("string"!=typeof s||!(s in Zt)||"object"===s)return e.error('The item type argument of "array" must be one of string, number, boolean',1);a=Zt[s],n++}else a=Pt;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);o=t[2],n++}r=Mt(a,o)}else r=Zt[i];for(var u=[];n<t.length;n++){var l=e.parse(t[n],n,Pt);if(!l)return null;u.push(l)}return new Ht(r,u)},Ht.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var r=this.args[e].evaluate(t);if(!Lt(this.type,Nt(r)))return r;if(e===this.args.length-1)throw new Xt("Expected value to be of type "+Tt(this.type)+", but found "+Tt(Nt(r))+" instead.")}return null},Ht.prototype.eachChild=function(t){this.args.forEach(t)},Ht.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}))},Ht.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var r=t.itemType;if("string"===r.kind||"number"===r.kind||"boolean"===r.kind){e.push(r.kind);var n=t.N;("number"==typeof n||this.args.length>1)&&e.push(n)}}return e.concat(this.args.map(function(t){return t.serialize()}))};var Yt=function(t){this.type=Ct,this.sections=t};Yt.parse=function(t,e){if(t.length<3)return e.error("Expected at least two arguments.");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");for(var r=[],n=1;n<t.length-1;n+=2){var i=e.parse(t[n],1,Pt);if(!i)return null;var a=i.type.kind;if("string"!==a&&"value"!==a&&"null"!==a)return e.error("Formatted text type must be 'string', 'value', or 'null'.");var o=t[n+1];if("object"!=typeof o||Array.isArray(o))return e.error("Format options argument must be an object.");var s=null;if(o["font-scale"]&&!(s=e.parse(o["font-scale"],1,kt)))return null;var u=null;if(o["text-font"]&&!(u=e.parse(o["text-font"],1,Mt(zt))))return null;r.push({text:i,scale:s,font:u})}return new Yt(r)},Yt.prototype.evaluate=function(t){return new Rt(this.sections.map(function(e){return new jt(Kt(e.text.evaluate(t)),e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null)}))},Yt.prototype.eachChild=function(t){for(var e=0,r=this.sections;e<r.length;e+=1){var n=r[e];t(n.text),n.scale&&t(n.scale),n.font&&t(n.font)}},Yt.prototype.possibleOutputs=function(){return[void 0]},Yt.prototype.serialize=function(){for(var t=["format"],e=0,r=this.sections;e<r.length;e+=1){var n=r[e];t.push(n.text.serialize());var i={};n.scale&&(i["font-scale"]=n.scale.serialize()),n.font&&(i["text-font"]=n.font.serialize()),t.push(i)}return t};var Jt={"to-boolean":It,"to-color":Bt,"to-number":kt,"to-string":zt},$t=function(t,e){this.type=t,this.args=e};$t.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var r=t[0];if(("to-boolean"===r||"to-string"===r)&&2!==t.length)return e.error("Expected one argument.");for(var n=Jt[r],i=[],a=1;a<t.length;a++){var o=e.parse(t[a],a,Pt);if(!o)return null;i.push(o)}return new $t(n,i)},$t.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,r,n=0,i=this.args;n<i.length;n+=1){if(r=null,(e=i[n].evaluate(t))instanceof Dt)return e;if("string"==typeof e){var a=t.parseColor(e);if(a)return a}else if(Array.isArray(e)&&!(r=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":qt(e[0],e[1],e[2],e[3])))return new Dt(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new Xt(r||"Could not parse color from value '"+("string"==typeof e?e:JSON.stringify(e))+"'")}if("number"===this.type.kind){for(var o=null,s=0,u=this.args;s<u.length;s+=1){if(null===(o=u[s].evaluate(t)))return 0;var l=Number(o);if(!isNaN(l))return l}throw new Xt("Could not convert "+JSON.stringify(o)+" to number.")}return"formatted"===this.type.kind?Rt.fromString(Kt(this.args[0].evaluate(t))):Kt(this.args[0].evaluate(t))},$t.prototype.eachChild=function(t){this.args.forEach(t)},$t.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}))},$t.prototype.serialize=function(){if("formatted"===this.type.kind)return new Yt([{text:this.args[0],scale:null,font:null}]).serialize();var t=["to-"+this.type.kind];return this.eachChild(function(e){t.push(e.serialize())}),t};var Wt=["Unknown","Point","LineString","Polygon"],Qt=function(){this.globals=null,this.feature=null,this.featureState=null,this._parseColorCache={}};Qt.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Qt.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Wt[this.feature.type]:this.feature.type:null},Qt.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Qt.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Dt.parse(t)),e};var te=function(t,e,r,n){this.name=t,this.type=e,this._evaluate=r,this.args=n};te.prototype.evaluate=function(t){return this._evaluate(t,this.args)},te.prototype.eachChild=function(t){this.args.forEach(t)},te.prototype.possibleOutputs=function(){return[void 0]},te.prototype.serialize=function(){return[this.name].concat(this.args.map(function(t){return t.serialize()}))},te.parse=function(t,e){var r,n=t[0],i=te.definitions[n];if(!i)return e.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0);for(var a=Array.isArray(i)?i[0]:i.type,o=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,s=o.filter(function(e){var r=e[0];return!Array.isArray(r)||r.length===t.length-1}),u=null,l=0,p=s;l<p.length;l+=1){var c=p[l],h=c[0],f=c[1];u=new oe(e.registry,e.path,null,e.scope);for(var y=[],d=!1,m=1;m<t.length;m++){var v=t[m],g=Array.isArray(h)?h[m-1]:h.type,x=u.parse(v,1+y.length,g);if(!x){d=!0;break}y.push(x)}if(!d)if(Array.isArray(h)&&h.length!==y.length)u.error("Expected "+h.length+" arguments, but found "+y.length+" instead.");else{for(var b=0;b<y.length;b++){var _=Array.isArray(h)?h[b]:h.type,w=y[b];u.concat(b+1).checkSubtype(_,w.type)}if(0===u.errors.length)return new te(n,a,f,y)}}if(1===s.length)(r=e.errors).push.apply(r,u.errors);else{for(var A=(s.length?s:o).map(function(t){var e;return e=t[0],Array.isArray(e)?"("+e.map(Tt).join(", ")+")":"("+Tt(e.type)+"...)"}).join(" | "),S=[],k=1;k<t.length;k++){var z=e.parse(t[k],1+S.length);if(!z)return null;S.push(Tt(z.type))}e.error("Expected arguments of type "+A+", but found ("+S.join(", ")+") instead.")}return null},te.register=function(t,e){for(var r in te.definitions=e,e)t[r]=te};var ee=function(t,e,r){this.type=Vt,this.locale=r,this.caseSensitive=t,this.diacriticSensitive=e};function re(t){if(t instanceof te){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}var e=!0;return t.eachChild(function(t){e&&!re(t)&&(e=!1)}),e}function ne(t){if(t instanceof te&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild(function(t){e&&!ne(t)&&(e=!1)}),e}function ie(t,e){if(t instanceof te&&e.indexOf(t.name)>=0)return!1;var r=!0;return t.eachChild(function(t){r&&!ie(t,e)&&(r=!1)}),r}ee.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var r=t[1];if("object"!=typeof r||Array.isArray(r))return e.error("Collator options argument must be an object.");var n=e.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,It);if(!n)return null;var i=e.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,It);if(!i)return null;var a=null;return r.locale&&!(a=e.parse(r.locale,1,zt))?null:new ee(n,i,a)},ee.prototype.evaluate=function(t){return new Ut(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},ee.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},ee.prototype.possibleOutputs=function(){return[void 0]},ee.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var ae=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};ae.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var r=t[1];return e.scope.has(r)?new ae(r,e.scope.get(r)):e.error('Unknown variable "'+r+'". Make sure "'+r+'" has been bound in an enclosing "let" expression before using it.',1)},ae.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},ae.prototype.eachChild=function(){},ae.prototype.possibleOutputs=function(){return[void 0]},ae.prototype.serialize=function(){return["var",this.name]};var oe=function(t,e,r,n,i){void 0===e&&(e=[]),void 0===n&&(n=new At),void 0===i&&(i=[]),this.registry=t,this.path=e,this.key=e.map(function(t){return"["+t+"]"}).join(""),this.scope=n,this.errors=i,this.expectedType=r};function se(t,e){for(var r,n,i=0,a=t.length-1,o=0;i<=a;){if(r=t[o=Math.floor((i+a)/2)],n=t[o+1],e===r||e>r&&e<n)return o;if(r<e)i=o+1;else{if(!(r>e))throw new Xt("Input is not a number.");a=o-1}}return Math.max(o-1,0)}oe.prototype.parse=function(t,e,r,n,i){return void 0===i&&(i={}),e?this.concat(e,r,n)._parse(t,i):this._parse(t,i)},oe.prototype._parse=function(t,e){function r(t,e,r){return"assert"===r?new Ht(e,[t]):"coerce"===r?new $t(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var n=t[0];if("string"!=typeof n)return this.error("Expression name must be a string, but found "+typeof n+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var i=this.registry[n];if(i){var a=i.parse(t,this);if(!a)return null;if(this.expectedType){var o=this.expectedType,s=a.type;if("string"!==o.kind&&"number"!==o.kind&&"boolean"!==o.kind&&"object"!==o.kind&&"array"!==o.kind||"value"!==s.kind)if("color"!==o.kind&&"formatted"!==o.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(o,s))return null}else a=r(a,o,e.typeAnnotation||"coerce");else a=r(a,o,e.typeAnnotation||"assert")}if(!(a instanceof Gt)&&function t(e){if(e instanceof ae)return t(e.boundExpression);if(e instanceof te&&"error"===e.name)return!1;if(e instanceof ee)return!1;var r=e instanceof $t||e instanceof Ht,n=!0;return e.eachChild(function(e){n=r?n&&t(e):n&&e instanceof Gt}),!!n&&re(e)&&ie(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(a)){var u=new Qt;try{a=new Gt(a.type,a.evaluate(u))}catch(t){return this.error(t.message),null}}return a}return this.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"==typeof t?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof t+" instead.")},oe.prototype.concat=function(t,e,r){var n="number"==typeof t?this.path.concat(t):this.path,i=r?this.scope.concat(r):this.scope;return new oe(this.registry,n,e||null,i,this.errors)},oe.prototype.error=function(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];var n=""+this.key+e.map(function(t){return"["+t+"]"}).join("");this.errors.push(new wt(n,t))},oe.prototype.checkSubtype=function(t,e){var r=Lt(t,e);return r&&this.error(r),r};var ue=function(t,e,r){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var n=0,i=r;n<i.length;n+=1){var a=i[n],o=a[0],s=a[1];this.labels.push(o),this.outputs.push(s)}};function le(t,e,r){return t*(1-r)+e*r}ue.parse=function(t,e){var r=t[1],n=t.slice(2);if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(r=e.parse(r,1,kt)))return null;var i=[],a=null;e.expectedType&&"value"!==e.expectedType.kind&&(a=e.expectedType),n.unshift(-1/0);for(var o=0;o<n.length;o+=2){var s=n[o],u=n[o+1],l=o+1,p=o+2;if("number"!=typeof s)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(i.length&&i[i.length-1][0]>=s)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var c=e.parse(u,p,a);if(!c)return null;a=a||c.type,i.push([s,c])}return new ue(a,r,i)},ue.prototype.evaluate=function(t){var e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);var n=this.input.evaluate(t);if(n<=e[0])return r[0].evaluate(t);var i=e.length;return n>=e[i-1]?r[i-1].evaluate(t):r[se(e,n)].evaluate(t)},ue.prototype.eachChild=function(t){t(this.input);for(var e=0,r=this.outputs;e<r.length;e+=1)t(r[e])},ue.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}))},ue.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var pe=Object.freeze({number:le,color:function(t,e,r){return new Dt(le(t.r,e.r,r),le(t.g,e.g,r),le(t.b,e.b,r),le(t.a,e.a,r))},array:function(t,e,r){return t.map(function(t,n){return le(t,e[n],r)})}}),ce=.95047,he=1,fe=1.08883,ye=4/29,de=6/29,me=3*de*de,ve=de*de*de,ge=Math.PI/180,xe=180/Math.PI;function be(t){return t>ve?Math.pow(t,1/3):t/me+ye}function _e(t){return t>de?t*t*t:me*(t-ye)}function we(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ae(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Se(t){var e=Ae(t.r),r=Ae(t.g),n=Ae(t.b),i=be((.4124564*e+.3575761*r+.1804375*n)/ce),a=be((.2126729*e+.7151522*r+.072175*n)/he);return{l:116*a-16,a:500*(i-a),b:200*(a-be((.0193339*e+.119192*r+.9503041*n)/fe)),alpha:t.a}}function ke(t){var e=(t.l+16)/116,r=isNaN(t.a)?e:e+t.a/500,n=isNaN(t.b)?e:e-t.b/200;return e=he*_e(e),r=ce*_e(r),n=fe*_e(n),new Dt(we(3.2404542*r-1.5371385*e-.4985314*n),we(-.969266*r+1.8760108*e+.041556*n),we(.0556434*r-.2040259*e+1.0572252*n),t.alpha)}function ze(t,e,r){var n=e-t;return t+r*(n>180||n<-180?n-360*Math.round(n/360):n)}var Ie={forward:Se,reverse:ke,interpolate:function(t,e,r){return{l:le(t.l,e.l,r),a:le(t.a,e.a,r),b:le(t.b,e.b,r),alpha:le(t.alpha,e.alpha,r)}}},Be={forward:function(t){var e=Se(t),r=e.l,n=e.a,i=e.b,a=Math.atan2(i,n)*xe;return{h:a<0?a+360:a,c:Math.sqrt(n*n+i*i),l:r,alpha:t.a}},reverse:function(t){var e=t.h*ge,r=t.c;return ke({l:t.l,a:Math.cos(e)*r,b:Math.sin(e)*r,alpha:t.alpha})},interpolate:function(t,e,r){return{h:ze(t.h,e.h,r),c:le(t.c,e.c,r),l:le(t.l,e.l,r),alpha:le(t.alpha,e.alpha,r)}}},Ee=Object.freeze({lab:Ie,hcl:Be}),Pe=function(t,e,r,n,i){this.type=t,this.operator=e,this.interpolation=r,this.input=n,this.labels=[],this.outputs=[];for(var a=0,o=i;a<o.length;a+=1){var s=o[a],u=s[0],l=s[1];this.labels.push(u),this.outputs.push(l)}};function Ve(t,e,r,n){var i=n-r,a=t-r;return 0===i?0:1===e?a/i:(Math.pow(e,a)-1)/(Math.pow(e,i)-1)}Pe.interpolationFactor=function(t,e,n,i){var a=0;if("exponential"===t.name)a=Ve(e,t.base,n,i);else if("linear"===t.name)a=Ve(e,1,n,i);else if("cubic-bezier"===t.name){var o=t.controlPoints;a=new r(o[0],o[1],o[2],o[3]).solve(Ve(e,1,n,i))}return a},Pe.parse=function(t,e){var r=t[0],n=t[1],i=t[2],a=t.slice(3);if(!Array.isArray(n)||0===n.length)return e.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){var o=n[1];if("number"!=typeof o)return e.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:o}}else{if("cubic-bezier"!==n[0])return e.error("Unknown interpolation type "+String(n[0]),1,0);var s=n.slice(1);if(4!==s.length||s.some(function(t){return"number"!=typeof t||t<0||t>1}))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:s}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(i=e.parse(i,2,kt)))return null;var u=[],l=null;"interpolate-hcl"===r||"interpolate-lab"===r?l=Bt:e.expectedType&&"value"!==e.expectedType.kind&&(l=e.expectedType);for(var p=0;p<a.length;p+=2){var c=a[p],h=a[p+1],f=p+3,y=p+4;if("number"!=typeof c)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',f);if(u.length&&u[u.length-1][0]>=c)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',f);var d=e.parse(h,y,l);if(!d)return null;l=l||d.type,u.push([c,d])}return"number"===l.kind||"color"===l.kind||"array"===l.kind&&"number"===l.itemType.kind&&"number"==typeof l.N?new Pe(l,r,n,i,u):e.error("Type "+Tt(l)+" is not interpolatable.")},Pe.prototype.evaluate=function(t){var e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);var n=this.input.evaluate(t);if(n<=e[0])return r[0].evaluate(t);var i=e.length;if(n>=e[i-1])return r[i-1].evaluate(t);var a=se(e,n),o=e[a],s=e[a+1],u=Pe.interpolationFactor(this.interpolation,n,o,s),l=r[a].evaluate(t),p=r[a+1].evaluate(t);return"interpolate"===this.operator?pe[this.type.kind.toLowerCase()](l,p,u):"interpolate-hcl"===this.operator?Be.reverse(Be.interpolate(Be.forward(l),Be.forward(p),u)):Ie.reverse(Ie.interpolate(Ie.forward(l),Ie.forward(p),u))},Pe.prototype.eachChild=function(t){t(this.input);for(var e=0,r=this.outputs;e<r.length;e+=1)t(r[e])},Pe.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}))},Pe.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],r=0;r<this.labels.length;r++)e.push(this.labels[r],this.outputs[r].serialize());return e};var Ce=function(t,e){this.type=t,this.args=e};Ce.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var r=null,n=e.expectedType;n&&"value"!==n.kind&&(r=n);for(var i=[],a=0,o=t.slice(1);a<o.length;a+=1){var s=o[a],u=e.parse(s,1+i.length,r,void 0,{typeAnnotation:"omit"});if(!u)return null;r=r||u.type,i.push(u)}var l=n&&i.some(function(t){return Lt(n,t.type)});return new Ce(l?Pt:r,i)},Ce.prototype.evaluate=function(t){for(var e=null,r=0,n=this.args;r<n.length&&null===(e=n[r].evaluate(t));r+=1);return e},Ce.prototype.eachChild=function(t){this.args.forEach(t)},Ce.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}))},Ce.prototype.serialize=function(){var t=["coalesce"];return this.eachChild(function(e){t.push(e.serialize())}),t};var Me=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};Me.prototype.evaluate=function(t){return this.result.evaluate(t)},Me.prototype.eachChild=function(t){for(var e=0,r=this.bindings;e<r.length;e+=1)t(r[e][1]);t(this.result)},Me.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var r=[],n=1;n<t.length-1;n+=2){var i=t[n];if("string"!=typeof i)return e.error("Expected string, but found "+typeof i+" instead.",n);if(/[^a-zA-Z0-9_]/.test(i))return e.error("Variable names must contain only alphanumeric characters or '_'.",n);var a=e.parse(t[n+1],n+1);if(!a)return null;r.push([i,a])}var o=e.parse(t[t.length-1],t.length-1,e.expectedType,r);return o?new Me(r,o):null},Me.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},Me.prototype.serialize=function(){for(var t=["let"],e=0,r=this.bindings;e<r.length;e+=1){var n=r[e],i=n[0],a=n[1];t.push(i,a.serialize())}return t.push(this.result.serialize()),t};var Te=function(t,e,r){this.type=t,this.index=e,this.input=r};Te.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1,kt),n=e.parse(t[2],2,Mt(e.expectedType||Pt));if(!r||!n)return null;var i=n.type;return new Te(i.itemType,r,n)},Te.prototype.evaluate=function(t){var e=this.index.evaluate(t),r=this.input.evaluate(t);if(e<0)throw new Xt("Array index out of bounds: "+e+" < 0.");if(e>=r.length)throw new Xt("Array index out of bounds: "+e+" > "+(r.length-1)+".");if(e!==Math.floor(e))throw new Xt("Array index must be an integer, but found "+e+" instead.");return r[e]},Te.prototype.eachChild=function(t){t(this.index),t(this.input)},Te.prototype.possibleOutputs=function(){return[void 0]},Te.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Fe=function(t,e,r,n,i,a){this.inputType=t,this.type=e,this.input=r,this.cases=n,this.outputs=i,this.otherwise=a};Fe.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var r,n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var i={},a=[],o=2;o<t.length-1;o+=2){var s=t[o],u=t[o+1];Array.isArray(s)||(s=[s]);var l=e.concat(o);if(0===s.length)return l.error("Expected at least one branch label.");for(var p=0,c=s;p<c.length;p+=1){var h=c[p];if("number"!=typeof h&&"string"!=typeof h)return l.error("Branch labels must be numbers or strings.");if("number"==typeof h&&Math.abs(h)>Number.MAX_SAFE_INTEGER)return l.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof h&&Math.floor(h)!==h)return l.error("Numeric branch labels must be integer values.");if(r){if(l.checkSubtype(r,Nt(h)))return null}else r=Nt(h);if(void 0!==i[String(h)])return l.error("Branch labels must be unique.");i[String(h)]=a.length}var f=e.parse(u,o,n);if(!f)return null;n=n||f.type,a.push(f)}var y=e.parse(t[1],1,Pt);if(!y)return null;var d=e.parse(t[t.length-1],t.length-1,n);return d?"value"!==y.type.kind&&e.concat(1).checkSubtype(r,y.type)?null:new Fe(r,n,y,i,a,d):null},Fe.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(Nt(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},Fe.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},Fe.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()})).concat(this.otherwise.possibleOutputs())},Fe.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],r=[],n={},i=0,a=Object.keys(this.cases).sort();i<a.length;i+=1){var o=a[i];void 0===(c=n[this.cases[o]])?(n[this.cases[o]]=r.length,r.push([this.cases[o],[o]])):r[c][1].push(o)}for(var s=function(e){return"number"===t.inputType.kind?Number(e):e},u=0,l=r;u<l.length;u+=1){var p=l[u],c=p[0],h=p[1];1===h.length?e.push(s(h[0])):e.push(h.map(s)),e.push(this.outputs[outputIndex$1].serialize())}return e.push(this.otherwise.serialize()),e};var Le=function(t,e,r){this.type=t,this.branches=e,this.otherwise=r};function Oe(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function De(t,e,r,n){return 0===n.compare(e,r)}function Ue(t,e,r){var n="=="!==t&&"!="!==t;return function(){function i(t,e,r){this.type=It,this.lhs=t,this.rhs=e,this.collator=r,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return i.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var r=t[0],a=e.parse(t[1],1,Pt);if(!a)return null;if(!Oe(r,a.type))return e.concat(1).error('"'+r+"\" comparisons are not supported for type '"+Tt(a.type)+"'.");var o=e.parse(t[2],2,Pt);if(!o)return null;if(!Oe(r,o.type))return e.concat(2).error('"'+r+"\" comparisons are not supported for type '"+Tt(o.type)+"'.");if(a.type.kind!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return e.error("Cannot compare types '"+Tt(a.type)+"' and '"+Tt(o.type)+"'.");n&&("value"===a.type.kind&&"value"!==o.type.kind?a=new Ht(o.type,[a]):"value"!==a.type.kind&&"value"===o.type.kind&&(o=new Ht(a.type,[o])));var s=null;if(4===t.length){if("string"!==a.type.kind&&"string"!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,Vt)))return null}return new i(a,o,s)},i.prototype.evaluate=function(i){var a=this.lhs.evaluate(i),o=this.rhs.evaluate(i);if(n&&this.hasUntypedArgument){var s=Nt(a),u=Nt(o);if(s.kind!==u.kind||"string"!==s.kind&&"number"!==s.kind)throw new Xt('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+s.kind+", "+u.kind+") instead.")}if(this.collator&&!n&&this.hasUntypedArgument){var l=Nt(a),p=Nt(o);if("string"!==l.kind||"string"!==p.kind)return e(i,a,o)}return this.collator?r(i,a,o,this.collator.evaluate(i)):e(i,a,o)},i.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},i.prototype.possibleOutputs=function(){return[!0,!1]},i.prototype.serialize=function(){var e=[t];return this.eachChild(function(t){e.push(t.serialize())}),e},i}()}Le.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var n=[],i=1;i<t.length-1;i+=2){var a=e.parse(t[i],i,It);if(!a)return null;var o=e.parse(t[i+1],i+1,r);if(!o)return null;n.push([a,o]),r=r||o.type}var s=e.parse(t[t.length-1],t.length-1,r);return s?new Le(r,n,s):null},Le.prototype.evaluate=function(t){for(var e=0,r=this.branches;e<r.length;e+=1){var n=r[e],i=n[0],a=n[1];if(i.evaluate(t))return a.evaluate(t)}return this.otherwise.evaluate(t)},Le.prototype.eachChild=function(t){for(var e=0,r=this.branches;e<r.length;e+=1){var n=r[e],i=n[0],a=n[1];t(i),t(a)}t(this.otherwise)},Le.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.branches.map(function(t){return t[0],t[1].possibleOutputs()})).concat(this.otherwise.possibleOutputs())},Le.prototype.serialize=function(){var t=["case"];return this.eachChild(function(e){t.push(e.serialize())}),t};var je=Ue("==",function(t,e,r){return e===r},De),Re=Ue("!=",function(t,e,r){return e!==r},function(t,e,r,n){return!De(0,e,r,n)}),qe=Ue("<",function(t,e,r){return e<r},function(t,e,r,n){return n.compare(e,r)<0}),Ne=Ue(">",function(t,e,r){return e>r},function(t,e,r,n){return n.compare(e,r)>0}),Ke=Ue("<=",function(t,e,r){return e<=r},function(t,e,r,n){return n.compare(e,r)<=0}),Ge=Ue(">=",function(t,e,r){return e>=r},function(t,e,r,n){return n.compare(e,r)>=0}),Xe=function(t,e,r,n,i){this.type=zt,this.number=t,this.locale=e,this.currency=r,this.minFractionDigits=n,this.maxFractionDigits=i};Xe.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var r=e.parse(t[1],1,kt);if(!r)return null;var n=t[2];if("object"!=typeof n||Array.isArray(n))return e.error("NumberFormat options argument must be an object.");var i=null;if(n.locale&&!(i=e.parse(n.locale,1,zt)))return null;var a=null;if(n.currency&&!(a=e.parse(n.currency,1,zt)))return null;var o=null;if(n["min-fraction-digits"]&&!(o=e.parse(n["min-fraction-digits"],1,kt)))return null;var s=null;return n["max-fraction-digits"]&&!(s=e.parse(n["max-fraction-digits"],1,kt))?null:new Xe(r,i,a,o,s)},Xe.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},Xe.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},Xe.prototype.possibleOutputs=function(){return[void 0]},Xe.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var Ze=function(t){this.type=kt,this.input=t};Ze.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?e.error("Expected argument of type string or array, but found "+Tt(r.type)+" instead."):new Ze(r):null},Ze.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new Xt("Expected value to be of type string or array, but found "+Tt(Nt(e))+" instead.")},Ze.prototype.eachChild=function(t){t(this.input)},Ze.prototype.possibleOutputs=function(){return[void 0]},Ze.prototype.serialize=function(){var t=["length"];return this.eachChild(function(e){t.push(e.serialize())}),t};var He={"==":je,"!=":Re,">":Ne,"<":qe,">=":Ge,"<=":Ke,array:Ht,at:Te,boolean:Ht,case:Le,coalesce:Ce,collator:ee,format:Yt,interpolate:Pe,"interpolate-hcl":Pe,"interpolate-lab":Pe,length:Ze,let:Me,literal:Gt,match:Fe,number:Ht,"number-format":Xe,object:Ht,step:ue,string:Ht,"to-boolean":$t,"to-color":$t,"to-number":$t,"to-string":$t,var:ae};function Ye(t,e){var r=e[0],n=e[1],i=e[2],a=e[3];r=r.evaluate(t),n=n.evaluate(t),i=i.evaluate(t);var o=a?a.evaluate(t):1,s=qt(r,n,i,o);if(s)throw new Xt(s);return new Dt(r/255*o,n/255*o,i/255*o,o)}function Je(t,e){return t in e}function $e(t,e){var r=e[t];return void 0===r?null:r}function We(t){return{type:t}}function Qe(t){return{result:"success",value:t}}function tr(t){return{result:"error",value:t}}function er(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function rr(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function nr(t){return!!t.expression&&t.expression.interpolated}function ir(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function ar(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function or(t){return t}function sr(t,e,r){return void 0!==t?t:void 0!==e?e:void 0!==r?r:void 0}function ur(t,e,r,n,i){return sr(typeof r===i?n[r]:void 0,t.default,e.default)}function lr(t,e,r){if("number"!==ir(r))return sr(t.default,e.default);var n=t.stops.length;if(1===n)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[n-1][0])return t.stops[n-1][1];var i=hr(t.stops,r);return t.stops[i][1]}function pr(t,e,r){var n=void 0!==t.base?t.base:1;if("number"!==ir(r))return sr(t.default,e.default);var i=t.stops.length;if(1===i)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[i-1][0])return t.stops[i-1][1];var a=hr(t.stops,r),o=function(t,e,r,n){var i=n-r,a=t-r;return 0===i?0:1===e?a/i:(Math.pow(e,a)-1)/(Math.pow(e,i)-1)}(r,n,t.stops[a][0],t.stops[a+1][0]),s=t.stops[a][1],u=t.stops[a+1][1],l=pe[e.type]||or;if(t.colorSpace&&"rgb"!==t.colorSpace){var p=Ee[t.colorSpace];l=function(t,e){return p.reverse(p.interpolate(p.forward(t),p.forward(e),o))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r=s.evaluate.apply(void 0,t),n=u.evaluate.apply(void 0,t);if(void 0!==r&&void 0!==n)return l(r,n,o)}}:l(s,u,o)}function cr(t,e,r){return"color"===e.type?r=Dt.parse(r):"formatted"===e.type?r=Rt.fromString(r.toString()):ir(r)===e.type||"enum"===e.type&&e.values[r]||(r=void 0),sr(r,t.default,e.default)}function hr(t,e){for(var r,n,i=0,a=t.length-1,o=0;i<=a;){if(r=t[o=Math.floor((i+a)/2)][0],n=t[o+1][0],e===r||e>r&&e<n)return o;r<e?i=o+1:r>e&&(a=o-1)}return Math.max(o-1,0)}te.register(He,{error:[{kind:"error"},[zt],function(t,e){var r=e[0];throw new Xt(r.evaluate(t))}],typeof:[zt,[Pt],function(t,e){return Tt(Nt(e[0].evaluate(t)))}],"to-rgba":[Mt(kt,4),[Bt],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[Bt,[kt,kt,kt],Ye],rgba:[Bt,[kt,kt,kt,kt],Ye],has:{type:It,overloads:[[[zt],function(t,e){return Je(e[0].evaluate(t),t.properties())}],[[zt,Et],function(t,e){var r=e[0],n=e[1];return Je(r.evaluate(t),n.evaluate(t))}]]},get:{type:Pt,overloads:[[[zt],function(t,e){return $e(e[0].evaluate(t),t.properties())}],[[zt,Et],function(t,e){var r=e[0],n=e[1];return $e(r.evaluate(t),n.evaluate(t))}]]},"feature-state":[Pt,[zt],function(t,e){return $e(e[0].evaluate(t),t.featureState||{})}],properties:[Et,[],function(t){return t.properties()}],"geometry-type":[zt,[],function(t){return t.geometryType()}],id:[Pt,[],function(t){return t.id()}],zoom:[kt,[],function(t){return t.globals.zoom}],"heatmap-density":[kt,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[kt,[],function(t){return t.globals.lineProgress||0}],accumulated:[Pt,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[kt,We(kt),function(t,e){for(var r=0,n=0,i=e;n<i.length;n+=1)r+=i[n].evaluate(t);return r}],"*":[kt,We(kt),function(t,e){for(var r=1,n=0,i=e;n<i.length;n+=1)r*=i[n].evaluate(t);return r}],"-":{type:kt,overloads:[[[kt,kt],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)-n.evaluate(t)}],[[kt],function(t,e){return-e[0].evaluate(t)}]]},"/":[kt,[kt,kt],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)/n.evaluate(t)}],"%":[kt,[kt,kt],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)%n.evaluate(t)}],ln2:[kt,[],function(){return Math.LN2}],pi:[kt,[],function(){return Math.PI}],e:[kt,[],function(){return Math.E}],"^":[kt,[kt,kt],function(t,e){var r=e[0],n=e[1];return Math.pow(r.evaluate(t),n.evaluate(t))}],sqrt:[kt,[kt],function(t,e){var r=e[0];return Math.sqrt(r.evaluate(t))}],log10:[kt,[kt],function(t,e){var r=e[0];return Math.log(r.evaluate(t))/Math.LN10}],ln:[kt,[kt],function(t,e){var r=e[0];return Math.log(r.evaluate(t))}],log2:[kt,[kt],function(t,e){var r=e[0];return Math.log(r.evaluate(t))/Math.LN2}],sin:[kt,[kt],function(t,e){var r=e[0];return Math.sin(r.evaluate(t))}],cos:[kt,[kt],function(t,e){var r=e[0];return Math.cos(r.evaluate(t))}],tan:[kt,[kt],function(t,e){var r=e[0];return Math.tan(r.evaluate(t))}],asin:[kt,[kt],function(t,e){var r=e[0];return Math.asin(r.evaluate(t))}],acos:[kt,[kt],function(t,e){var r=e[0];return Math.acos(r.evaluate(t))}],atan:[kt,[kt],function(t,e){var r=e[0];return Math.atan(r.evaluate(t))}],min:[kt,We(kt),function(t,e){return Math.min.apply(Math,e.map(function(e){return e.evaluate(t)}))}],max:[kt,We(kt),function(t,e){return Math.max.apply(Math,e.map(function(e){return e.evaluate(t)}))}],abs:[kt,[kt],function(t,e){var r=e[0];return Math.abs(r.evaluate(t))}],round:[kt,[kt],function(t,e){var r=e[0].evaluate(t);return r<0?-Math.round(-r):Math.round(r)}],floor:[kt,[kt],function(t,e){var r=e[0];return Math.floor(r.evaluate(t))}],ceil:[kt,[kt],function(t,e){var r=e[0];return Math.ceil(r.evaluate(t))}],"filter-==":[It,[zt,Pt],function(t,e){var r=e[0],n=e[1];return t.properties()[r.value]===n.value}],"filter-id-==":[It,[Pt],function(t,e){var r=e[0];return t.id()===r.value}],"filter-type-==":[It,[zt],function(t,e){var r=e[0];return t.geometryType()===r.value}],"filter-<":[It,[zt,Pt],function(t,e){var r=e[0],n=e[1],i=t.properties()[r.value],a=n.value;return typeof i==typeof a&&i<a}],"filter-id-<":[It,[Pt],function(t,e){var r=e[0],n=t.id(),i=r.value;return typeof n==typeof i&&n<i}],"filter->":[It,[zt,Pt],function(t,e){var r=e[0],n=e[1],i=t.properties()[r.value],a=n.value;return typeof i==typeof a&&i>a}],"filter-id->":[It,[Pt],function(t,e){var r=e[0],n=t.id(),i=r.value;return typeof n==typeof i&&n>i}],"filter-<=":[It,[zt,Pt],function(t,e){var r=e[0],n=e[1],i=t.properties()[r.value],a=n.value;return typeof i==typeof a&&i<=a}],"filter-id-<=":[It,[Pt],function(t,e){var r=e[0],n=t.id(),i=r.value;return typeof n==typeof i&&n<=i}],"filter->=":[It,[zt,Pt],function(t,e){var r=e[0],n=e[1],i=t.properties()[r.value],a=n.value;return typeof i==typeof a&&i>=a}],"filter-id->=":[It,[Pt],function(t,e){var r=e[0],n=t.id(),i=r.value;return typeof n==typeof i&&n>=i}],"filter-has":[It,[Pt],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[It,[],function(t){return null!==t.id()}],"filter-type-in":[It,[Mt(zt)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[It,[Mt(Pt)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[It,[zt,Mt(Pt)],function(t,e){var r=e[0];return e[1].value.indexOf(t.properties()[r.value])>=0}],"filter-in-large":[It,[zt,Mt(Pt)],function(t,e){var r=e[0],n=e[1];return function(t,e,r,n){for(;r<=n;){var i=r+n>>1;if(e[i]===t)return!0;e[i]>t?n=i-1:r=i+1}return!1}(t.properties()[r.value],n.value,0,n.value.length-1)}],all:{type:It,overloads:[[[It,It],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)&&n.evaluate(t)}],[We(It),function(t,e){for(var r=0,n=e;r<n.length;r+=1)if(!n[r].evaluate(t))return!1;return!0}]]},any:{type:It,overloads:[[[It,It],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)||n.evaluate(t)}],[We(It),function(t,e){for(var r=0,n=e;r<n.length;r+=1)if(n[r].evaluate(t))return!0;return!1}]]},"!":[It,[It],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[It,[zt],function(t,e){var r=e[0],n=t.globals&&t.globals.isSupportedScript;return!n||n(r.evaluate(t))}],upcase:[zt,[zt],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[zt,[zt],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[zt,We(Pt),function(t,e){return e.map(function(e){return Kt(e.evaluate(t))}).join("")}],"resolved-locale":[zt,[Vt],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var fr=function(t,e){var r;this.expression=t,this._warningHistory={},this._evaluator=new Qt,this._defaultValue=e?"color"===(r=e).type&&ar(r.default)?new Dt(0,0,0,0):"color"===r.type?Dt.parse(r.default)||null:void 0===r.default?null:r.default:null,this._enumValues=e&&"enum"===e.type?e.values:null};function yr(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in He}function dr(t,e){var r=new oe(He,[],e?function(t){var e={color:Bt,string:zt,number:kt,enum:zt,boolean:It,formatted:Ct};return"array"===t.type?Mt(e[t.value]||Pt,t.length):e[t.type]}(e):void 0),n=r.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return n?Qe(new fr(n,e)):tr(r.errors)}fr.prototype.evaluateWithoutErrorHandling=function(t,e,r){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=r,this.expression.evaluate(this._evaluator)},fr.prototype.evaluate=function(t,e,r){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=r||null;try{var n=this.expression.evaluate(this._evaluator);if(null==n)return this._defaultValue;if(this._enumValues&&!(n in this._enumValues))throw new Xt("Expected value to be one of "+Object.keys(this._enumValues).map(function(t){return JSON.stringify(t)}).join(", ")+", but found "+JSON.stringify(n)+" instead.");return n}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var mr=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!ne(e.expression)};mr.prototype.evaluateWithoutErrorHandling=function(t,e,r){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r)},mr.prototype.evaluate=function(t,e,r){return this._styleExpression.evaluate(t,e,r)};var vr=function(t,e,r){this.kind=t,this.zoomStops=r.labels,this._styleExpression=e,this.isStateDependent="camera"!==t&&!ne(e.expression),r instanceof Pe&&(this._interpolationType=r.interpolation)};function gr(t,e){if("error"===(t=dr(t,e)).result)return t;var r=t.value.expression,n=re(r);if(!n&&!er(e))return tr([new wt("","data expressions not supported")]);var i=ie(r,["zoom"]);if(!i&&!rr(e))return tr([new wt("","zoom expressions not supported")]);var a=function t(e){var r=null;if(e instanceof Me)r=t(e.result);else if(e instanceof Ce)for(var n=0,i=e.args;n<i.length;n+=1){var a=i[n];if(r=t(a))break}else(e instanceof ue||e instanceof Pe)&&e.input instanceof te&&"zoom"===e.input.name&&(r=e);return r instanceof wt?r:(e.eachChild(function(e){var n=t(e);n instanceof wt?r=n:!r&&n?r=new wt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&n&&r!==n&&(r=new wt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r)}(r);return a||i?a instanceof wt?tr([a]):a instanceof Pe&&!nr(e)?tr([new wt("",'"interpolate" expressions cannot be used with this property')]):Qe(a?new vr(n?"camera":"composite",t.value,a):new mr(n?"constant":"source",t.value)):tr([new wt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}vr.prototype.evaluateWithoutErrorHandling=function(t,e,r){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r)},vr.prototype.evaluate=function(t,e,r){return this._styleExpression.evaluate(t,e,r)},vr.prototype.interpolationFactor=function(t,e,r){return this._interpolationType?Pe.interpolationFactor(this._interpolationType,t,e,r):0};var xr=function(t,e){this._parameters=t,this._specification=e,xt(this,function t(e,r){var n,i,a,o="color"===r.type,s=e.stops&&"object"==typeof e.stops[0][0],u=s||void 0!==e.property,l=s||!u,p=e.type||(nr(r)?"exponential":"interval");if(o&&((e=xt({},e)).stops&&(e.stops=e.stops.map(function(t){return[t[0],Dt.parse(t[1])]})),e.default?e.default=Dt.parse(e.default):e.default=Dt.parse(r.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!Ee[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===p)n=pr;else if("interval"===p)n=lr;else if("categorical"===p){n=ur,i=Object.create(null);for(var c=0,h=e.stops;c<h.length;c+=1){var f=h[c];i[f[0]]=f[1]}a=typeof e.stops[0][0]}else{if("identity"!==p)throw new Error('Unknown function type "'+p+'"');n=cr}if(s){for(var y={},d=[],m=0;m<e.stops.length;m++){var v=e.stops[m],g=v[0].zoom;void 0===y[g]&&(y[g]={zoom:g,type:e.type,property:e.property,default:e.default,stops:[]},d.push(g)),y[g].stops.push([v[0].value,v[1]])}for(var x=[],b=0,_=d;b<_.length;b+=1){var w=_[b];x.push([y[w].zoom,t(y[w],r)])}return{kind:"composite",interpolationFactor:Pe.interpolationFactor.bind(void 0,{name:"linear"}),zoomStops:x.map(function(t){return t[0]}),evaluate:function(t,n){var i=t.zoom;return pr({stops:x,base:e.base},r,i).evaluate(i,n)}}}return l?{kind:"camera",interpolationFactor:"exponential"===p?Pe.interpolationFactor.bind(void 0,{name:"exponential",base:void 0!==e.base?e.base:1}):function(){return 0},zoomStops:e.stops.map(function(t){return t[0]}),evaluate:function(t){var o=t.zoom;return n(e,r,o,i,a)}}:{kind:"source",evaluate:function(t,o){var s=o&&o.properties?o.properties[e.property]:void 0;return void 0===s?sr(e.default,r.default):n(e,r,s,i,a)}}}(this._parameters,this._specification))};function br(t,e){if(ar(t))return new xr(t,e);if(yr(t)){var r=gr(t,e);if("error"===r.result)throw new Error(r.value.map(function(t){return t.key+": "+t.message}).join(", "));return r.value}var n=t;return"string"==typeof t&&"color"===e.type&&(n=Dt.parse(t)),{kind:"constant",evaluate:function(){return n}}}function _r(t){var e=t.key,r=t.value,n=t.valueSpec||{},i=t.objectElementValidators||{},a=t.style,o=t.styleSpec,s=[],u=ir(r);if("object"!==u)return[new vt(e,r,"object expected, "+u+" found")];for(var l in r){var p=l.split(".")[0],c=n[p]||n["*"],h=void 0;if(i[p])h=i[p];else if(n[p])h=Gr;else if(i["*"])h=i["*"];else{if(!n["*"]){s.push(new vt(e,r[l],'unknown property "'+l+'"'));continue}h=Gr}s=s.concat(h({key:(e?e+".":e)+l,value:r[l],valueSpec:c,style:a,styleSpec:o,object:r,objectKey:l},r))}for(var f in n)i[f]||n[f].required&&void 0===n[f].default&&void 0===r[f]&&s.push(new vt(e,r,'missing required property "'+f+'"'));return s}function wr(t){var e=t.value,r=t.valueSpec,n=t.style,i=t.styleSpec,a=t.key,o=t.arrayElementValidator||Gr;if("array"!==ir(e))return[new vt(a,e,"array expected, "+ir(e)+" found")];if(r.length&&e.length!==r.length)return[new vt(a,e,"array length "+r.length+" expected, length "+e.length+" found")];if(r["min-length"]&&e.length<r["min-length"])return[new vt(a,e,"array length at least "+r["min-length"]+" expected, length "+e.length+" found")];var s={type:r.value};i.$version<7&&(s.function=r.function),"object"===ir(r.value)&&(s=r.value);for(var u=[],l=0;l<e.length;l++)u=u.concat(o({array:e,arrayIndex:l,value:e[l],valueSpec:s,style:n,styleSpec:i,key:a+"["+l+"]"}));return u}function Ar(t){var e=t.key,r=t.value,n=t.valueSpec,i=ir(r);return"number"!==i?[new vt(e,r,"number expected, "+i+" found")]:"minimum"in n&&r<n.minimum?[new vt(e,r,r+" is less than the minimum value "+n.minimum)]:"maximum"in n&&r>n.maximum?[new vt(e,r,r+" is greater than the maximum value "+n.maximum)]:[]}function Sr(t){var e,r,n,i=t.valueSpec,a=bt(t.value.type),o={},s="categorical"!==a&&void 0===t.value.property,u=!s,l="array"===ir(t.value.stops)&&"array"===ir(t.value.stops[0])&&"object"===ir(t.value.stops[0][0]),p=_r({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===a)return[new vt(t.key,t.value,'identity function may not have a "stops" property')];var e=[],r=t.value;return e=e.concat(wr({key:t.key,value:r,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:c})),"array"===ir(r)&&0===r.length&&e.push(new vt(t.key,r,"array must have at least one stop")),e},default:function(t){return Gr({key:t.key,value:t.value,valueSpec:i,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===a&&s&&p.push(new vt(t.key,t.value,'missing required property "property"')),"identity"===a||t.value.stops||p.push(new vt(t.key,t.value,'missing required property "stops"')),"exponential"===a&&t.valueSpec.expression&&!nr(t.valueSpec)&&p.push(new vt(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(u&&!er(t.valueSpec)?p.push(new vt(t.key,t.value,"property functions not supported")):s&&!rr(t.valueSpec)&&p.push(new vt(t.key,t.value,"zoom functions not supported"))),"categorical"!==a&&!l||void 0!==t.value.property||p.push(new vt(t.key,t.value,'"property" property is required')),p;function c(t){var e=[],a=t.value,s=t.key;if("array"!==ir(a))return[new vt(s,a,"array expected, "+ir(a)+" found")];if(2!==a.length)return[new vt(s,a,"array length 2 expected, length "+a.length+" found")];if(l){if("object"!==ir(a[0]))return[new vt(s,a,"object expected, "+ir(a[0])+" found")];if(void 0===a[0].zoom)return[new vt(s,a,"object stop key must have zoom")];if(void 0===a[0].value)return[new vt(s,a,"object stop key must have value")];if(n&&n>bt(a[0].zoom))return[new vt(s,a[0].zoom,"stop zoom values must appear in ascending order")];bt(a[0].zoom)!==n&&(n=bt(a[0].zoom),r=void 0,o={}),e=e.concat(_r({key:s+"[0]",value:a[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:Ar,value:h}}))}else e=e.concat(h({key:s+"[0]",value:a[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},a));return yr(_t(a[1]))?e.concat([new vt(s+"[1]",a[1],"expressions are not allowed in function stops.")]):e.concat(Gr({key:s+"[1]",value:a[1],valueSpec:i,style:t.style,styleSpec:t.styleSpec}))}function h(t,n){var s=ir(t.value),u=bt(t.value),l=null!==t.value?t.value:n;if(e){if(s!==e)return[new vt(t.key,l,s+" stop domain type must match previous stop domain type "+e)]}else e=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new vt(t.key,l,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==a){var p="number expected, "+s+" found";return er(i)&&void 0===a&&(p+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new vt(t.key,l,p)]}return"categorical"!==a||"number"!==s||isFinite(u)&&Math.floor(u)===u?"categorical"!==a&&"number"===s&&void 0!==r&&u<r?[new vt(t.key,l,"stop domain values must appear in ascending order")]:(r=u,"categorical"===a&&u in o?[new vt(t.key,l,"stop domain values must be unique")]:(o[u]=!0,[])):[new vt(t.key,l,"integer expected, found "+u)]}}function kr(t){var e=("property"===t.expressionContext?gr:dr)(_t(t.value),t.valueSpec);if("error"===e.result)return e.value.map(function(e){return new vt(""+t.key+e.key,t.value,e.message)});var r=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&-1!==r.possibleOutputs().indexOf(void 0))return[new vt(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===t.expressionContext&&"layout"===t.propertyType&&!ne(r))return[new vt(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!ne(r))return[new vt(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!ie(r,["zoom","feature-state"]))return[new vt(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!re(r))return[new vt(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function zr(t){var e=t.key,r=t.value,n=t.valueSpec,i=[];return Array.isArray(n.values)?-1===n.values.indexOf(bt(r))&&i.push(new vt(e,r,"expected one of ["+n.values.join(", ")+"], "+JSON.stringify(r)+" found")):-1===Object.keys(n.values).indexOf(bt(r))&&i.push(new vt(e,r,"expected one of ["+Object.keys(n.values).join(", ")+"], "+JSON.stringify(r)+" found")),i}function Ir(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,r=t.slice(1);e<r.length;e+=1){var n=r[e];if(!Ir(n)&&"boolean"!=typeof n)return!1}return!0;default:return!0}}xr.deserialize=function(t){return new xr(t._parameters,t._specification)},xr.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var Br={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Er(t){if(null==t)return function(){return!0};Ir(t)||(t=Vr(t));var e=dr(t,Br);if("error"===e.result)throw new Error(e.value.map(function(t){return t.key+": "+t.message}).join(", "));return function(t,r){return e.value.evaluate(t,r)}}function Pr(t,e){return t<e?-1:t>e?1:0}function Vr(t){if(!t)return!0;var e,r=t[0];return t.length<=1?"any"!==r:"=="===r?Cr(t[1],t[2],"=="):"!="===r?Fr(Cr(t[1],t[2],"==")):"<"===r||">"===r||"<="===r||">="===r?Cr(t[1],t[2],r):"any"===r?(e=t.slice(1),["any"].concat(e.map(Vr))):"all"===r?["all"].concat(t.slice(1).map(Vr)):"none"===r?["all"].concat(t.slice(1).map(Vr).map(Fr)):"in"===r?Mr(t[1],t.slice(2)):"!in"===r?Fr(Mr(t[1],t.slice(2))):"has"===r?Tr(t[1]):"!has"!==r||Fr(Tr(t[1]))}function Cr(t,e,r){switch(t){case"$type":return["filter-type-"+r,e];case"$id":return["filter-id-"+r,e];default:return["filter-"+r,t,e]}}function Mr(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(function(t){return typeof t!=typeof e[0]})?["filter-in-large",t,["literal",e.sort(Pr)]]:["filter-in-small",t,["literal",e]]}}function Tr(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function Fr(t){return["!",t]}function Lr(t){return Ir(_t(t.value))?kr(xt({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var r=e.value,n=e.key;if("array"!==ir(r))return[new vt(n,r,"array expected, "+ir(r)+" found")];var a,i=e.styleSpec,o=[];if(r.length<1)return[new vt(n,r,"filter array must have at least 1 element")];switch(o=o.concat(zr({key:n+"[0]",value:r[0],valueSpec:i.filter_operator,style:e.style,styleSpec:e.styleSpec})),bt(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&"$type"===bt(r[1])&&o.push(new vt(n,r,'"$type" cannot be use with operator "'+r[0]+'"'));case"==":case"!=":3!==r.length&&o.push(new vt(n,r,'filter array for operator "'+r[0]+'" must have 3 elements'));case"in":case"!in":r.length>=2&&"string"!==(a=ir(r[1]))&&o.push(new vt(n+"[1]",r[1],"string expected, "+a+" found"));for(var s=2;s<r.length;s++)a=ir(r[s]),"$type"===bt(r[1])?o=o.concat(zr({key:n+"["+s+"]",value:r[s],valueSpec:i.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==a&&"number"!==a&&"boolean"!==a&&o.push(new vt(n+"["+s+"]",r[s],"string, number, or boolean expected, "+a+" found"));break;case"any":case"all":case"none":for(var u=1;u<r.length;u++)o=o.concat(t({key:n+"["+u+"]",value:r[u],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":a=ir(r[1]),2!==r.length?o.push(new vt(n,r,'filter array for "'+r[0]+'" operator must have 2 elements')):"string"!==a&&o.push(new vt(n+"[1]",r[1],"string expected, "+a+" found"))}return o}(t)}function Or(t,e){var r=t.key,n=t.style,i=t.styleSpec,a=t.value,o=t.objectKey,s=i[e+"_"+t.layerType];if(!s)return[];var u=o.match(/^(.*)-transition$/);if("paint"===e&&u&&s[u[1]]&&s[u[1]].transition)return Gr({key:r,value:a,valueSpec:i.transition,style:n,styleSpec:i});var l,p=t.valueSpec||s[o];if(!p)return[new vt(r,a,'unknown property "'+o+'"')];if("string"===ir(a)&&er(p)&&!p.tokens&&(l=/^{([^}]+)}$/.exec(a)))return[new vt(r,a,'"'+o+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(l[1])+" }`.")];var c=[];return"symbol"===t.layerType&&("text-field"===o&&n&&!n.glyphs&&c.push(new vt(r,a,'use of "text-field" requires a style "glyphs" property')),"text-font"===o&&ar(_t(a))&&"identity"===bt(a.type)&&c.push(new vt(r,a,'"text-font" does not support identity functions'))),c.concat(Gr({key:t.key,value:a,valueSpec:p,style:n,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:o}))}function Dr(t){return Or(t,"paint")}function Ur(t){return Or(t,"layout")}function jr(t){var e=[],r=t.value,n=t.key,i=t.style,a=t.styleSpec;r.type||r.ref||e.push(new vt(n,r,'either "type" or "ref" is required'));var o,s=bt(r.type),u=bt(r.ref);if(r.id)for(var l=bt(r.id),p=0;p<t.arrayIndex;p++){var c=i.layers[p];bt(c.id)===l&&e.push(new vt(n,r.id,'duplicate layer id "'+r.id+'", previously used at line '+c.id.__line__))}if("ref"in r)["type","source","source-layer","filter","layout"].forEach(function(t){t in r&&e.push(new vt(n,r[t],'"'+t+'" is prohibited for ref layers'))}),i.layers.forEach(function(t){bt(t.id)===u&&(o=t)}),o?o.ref?e.push(new vt(n,r.ref,"ref cannot reference another ref layer")):s=bt(o.type):e.push(new vt(n,r.ref,'ref layer "'+u+'" not found'));else if("background"!==s)if(r.source){var h=i.sources&&i.sources[r.source],f=h&&bt(h.type);h?"vector"===f&&"raster"===s?e.push(new vt(n,r.source,'layer "'+r.id+'" requires a raster source')):"raster"===f&&"raster"!==s?e.push(new vt(n,r.source,'layer "'+r.id+'" requires a vector source')):"vector"!==f||r["source-layer"]?"raster-dem"===f&&"hillshade"!==s?e.push(new vt(n,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!r.paint||!r.paint["line-gradient"]||"geojson"===f&&h.lineMetrics||e.push(new vt(n,r,'layer "'+r.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new vt(n,r,'layer "'+r.id+'" must specify a "source-layer"')):e.push(new vt(n,r.source,'source "'+r.source+'" not found'))}else e.push(new vt(n,r,'missing required property "source"'));return e=e.concat(_r({key:n,value:r,valueSpec:a.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Gr({key:n+".type",value:r.type,valueSpec:a.layer.type,style:t.style,styleSpec:t.styleSpec,object:r,objectKey:"type"})},filter:Lr,layout:function(t){return _r({layer:r,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return Ur(xt({layerType:s},t))}}})},paint:function(t){return _r({layer:r,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return Dr(xt({layerType:s},t))}}})}}}))}function Rr(t){var e=t.value,r=t.key,n=t.styleSpec,i=t.style;if(!e.type)return[new vt(r,e,'"type" is required')];var a,o=bt(e.type);switch(o){case"vector":case"raster":case"raster-dem":if(a=_r({key:r,value:e,valueSpec:n["source_"+o.replace("-","_")],style:t.style,styleSpec:n}),"url"in e)for(var s in e)["type","url","tileSize"].indexOf(s)<0&&a.push(new vt(r+"."+s,e[s],'a source with a "url" property may not include a "'+s+'" property'));return a;case"geojson":if(a=_r({key:r,value:e,valueSpec:n.source_geojson,style:i,styleSpec:n}),e.cluster)for(var u in e.clusterProperties){var l=e.clusterProperties[u],p=l[0],c=l[1],h="string"==typeof p?[p,["accumulated"],["get",u]]:p;a.push.apply(a,kr({key:r+"."+u+".map",value:c,expressionContext:"cluster-map"})),a.push.apply(a,kr({key:r+"."+u+".reduce",value:h,expressionContext:"cluster-reduce"}))}return a;case"video":return _r({key:r,value:e,valueSpec:n.source_video,style:i,styleSpec:n});case"image":return _r({key:r,value:e,valueSpec:n.source_image,style:i,styleSpec:n});case"canvas":return[new vt(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return zr({key:r+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:n})}}function qr(t){var e=t.value,r=t.styleSpec,n=r.light,i=t.style,a=[],o=ir(e);if(void 0===e)return a;if("object"!==o)return a.concat([new vt("light",e,"object expected, "+o+" found")]);for(var s in e){var u=s.match(/^(.*)-transition$/);a=u&&n[u[1]]&&n[u[1]].transition?a.concat(Gr({key:s,value:e[s],valueSpec:r.transition,style:i,styleSpec:r})):n[s]?a.concat(Gr({key:s,value:e[s],valueSpec:n[s],style:i,styleSpec:r})):a.concat([new vt(s,e[s],'unknown property "'+s+'"')])}return a}function Nr(t){var e=t.value,r=t.key,n=ir(e);return"string"!==n?[new vt(r,e,"string expected, "+n+" found")]:[]}var Kr={"*":function(){return[]},array:wr,boolean:function(t){var e=t.value,r=t.key,n=ir(e);return"boolean"!==n?[new vt(r,e,"boolean expected, "+n+" found")]:[]},number:Ar,color:function(t){var e=t.key,r=t.value,n=ir(r);return"string"!==n?[new vt(e,r,"color expected, "+n+" found")]:null===Ot(r)?[new vt(e,r,'color expected, "'+r+'" found')]:[]},constants:gt,enum:zr,filter:Lr,function:Sr,layer:jr,object:_r,source:Rr,light:qr,string:Nr,formatted:function(t){return 0===Nr(t).length?[]:kr(t)}};function Gr(t){var e=t.value,r=t.valueSpec,n=t.styleSpec;return r.expression&&ar(bt(e))?Sr(t):r.expression&&yr(_t(e))?kr(t):r.type&&Kr[r.type]?Kr[r.type](t):_r(xt({},t,{valueSpec:r.type?n[r.type]:r}))}function Xr(t){var e=t.value,r=t.key,n=Nr(t);return n.length?n:(-1===e.indexOf("{fontstack}")&&n.push(new vt(r,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&n.push(new vt(r,e,'"glyphs" url must include a "{range}" token')),n)}function Zr(t,e){e=e||mt;var r=[];return r=r.concat(Gr({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Xr,"*":function(){return[]}}})),t.constants&&(r=r.concat(gt({key:"constants",value:t.constants,style:t,styleSpec:e}))),Hr(r)}function Hr(t){return[].concat(t).sort(function(t,e){return t.line-e.line})}function Yr(t){return function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return Hr(t.apply(this,e))}}Zr.source=Yr(Rr),Zr.light=Yr(qr),Zr.layer=Yr(jr),Zr.filter=Yr(Lr),Zr.paintProperty=Yr(Dr),Zr.layoutProperty=Yr(Ur);var Jr=Zr,$r=Zr.light,Wr=Zr.paintProperty,Qr=Zr.layoutProperty;function tn(t,e){var r=!1;if(e&&e.length)for(var n=0,i=e;n<i.length;n+=1){var a=i[n];t.fire(new yt(new Error(a.message))),r=!0}return r}var en=nn,rn=3;function nn(t,e,r){var n=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var i=new Int32Array(this.arrayBuffer);t=i[0],e=i[1],r=i[2],this.d=e+2*r;for(var a=0;a<this.d*this.d;a++){var o=i[rn+a],s=i[rn+a+1];n.push(o===s?null:i.subarray(o,s))}var u=i[rn+n.length],l=i[rn+n.length+1];this.keys=i.subarray(u,l),this.bboxes=i.subarray(l),this.insert=this._insertReadonly}else{this.d=e+2*r;for(var p=0;p<this.d*this.d;p++)n.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=r,this.scale=e/t,this.uid=0;var c=r/e*t;this.min=-c,this.max=t+c}nn.prototype.insert=function(t,e,r,n,i){this._forEachCell(e,r,n,i,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i)},nn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},nn.prototype._insertCell=function(t,e,r,n,i,a){this.cells[i].push(a)},nn.prototype.query=function(t,e,r,n,i){var a=this.min,o=this.max;if(t<=a&&e<=a&&o<=r&&o<=n&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,r,n,this._queryCell,s,{},i),s},nn.prototype._queryCell=function(t,e,r,n,i,a,o,s){var u=this.cells[i];if(null!==u)for(var l=this.keys,p=this.bboxes,c=0;c<u.length;c++){var h=u[c];if(void 0===o[h]){var f=4*h;(s?s(p[f+0],p[f+1],p[f+2],p[f+3]):t<=p[f+2]&&e<=p[f+3]&&r>=p[f+0]&&n>=p[f+1])?(o[h]=!0,a.push(l[h])):o[h]=!1}}},nn.prototype._forEachCell=function(t,e,r,n,i,a,o,s){for(var u=this._convertToCellCoord(t),l=this._convertToCellCoord(e),p=this._convertToCellCoord(r),c=this._convertToCellCoord(n),h=u;h<=p;h++)for(var f=l;f<=c;f++){var y=this.d*f+h;if((!s||s(this._convertFromCellCoord(h),this._convertFromCellCoord(f),this._convertFromCellCoord(h+1),this._convertFromCellCoord(f+1)))&&i.call(this,t,e,r,n,y,a,o,s))return}},nn.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},nn.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},nn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=rn+this.cells.length+1+1,r=0,n=0;n<this.cells.length;n++)r+=this.cells[n].length;var i=new Int32Array(e+r+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var a=e,o=0;o<t.length;o++){var s=t[o];i[rn+o]=a,i.set(s,a),a+=s.length}return i[rn+t.length]=a,i.set(this.keys,a),a+=this.keys.length,i[rn+t.length+1]=a,i.set(this.bboxes,a),a+=this.bboxes.length,i.buffer};var an=self.ImageData,on={};function sn(t,e,r){void 0===r&&(r={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),on[t]={klass:e,omit:r.omit||[],shallow:r.shallow||[]}}for(var un in sn("Object",Object),en.serialize=function(t,e){var r=t.toArrayBuffer();return e&&e.push(r),{buffer:r}},en.deserialize=function(t){return new en(t.buffer)},sn("Grid",en),sn("Color",Dt),sn("Error",Error),sn("StylePropertyFunction",xr),sn("StyleExpression",fr,{omit:["_evaluator"]}),sn("ZoomDependentExpression",vr),sn("ZoomConstantExpression",mr),sn("CompoundExpression",te,{omit:["_evaluate"]}),He)He[un]._classRegistryKey||sn("Expression_"+un,He[un]);function ln(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(t instanceof ArrayBuffer)return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var r=t;return e&&e.push(r.buffer),r}if(t instanceof an)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var n=[],i=0,a=t;i<a.length;i+=1){var o=a[i];n.push(ln(o,e))}return n}if("object"==typeof t){var s=t.constructor,u=s._classRegistryKey;if(!u)throw new Error("can't serialize object of unregistered class");var l=s.serialize?s.serialize(t,e):{};if(!s.serialize){for(var p in t)if(t.hasOwnProperty(p)&&!(on[u].omit.indexOf(p)>=0)){var c=t[p];l[p]=on[u].shallow.indexOf(p)>=0?c:ln(c,e)}t instanceof Error&&(l.message=t.message)}if(l.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==u&&(l.$name=u),l}throw new Error("can't serialize object of type "+typeof t)}function pn(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof ArrayBuffer||ArrayBuffer.isView(t)||t instanceof an)return t;if(Array.isArray(t))return t.map(pn);if("object"==typeof t){var e=t.$name||"Object",r=on[e].klass;if(!r)throw new Error("can't deserialize unregistered class "+e);if(r.deserialize)return r.deserialize(t);for(var n=Object.create(r.prototype),i=0,a=Object.keys(t);i<a.length;i+=1){var o=a[i];if("$name"!==o){var s=t[o];n[o]=on[e].shallow.indexOf(o)>=0?s:pn(s)}}return n}throw new Error("can't deserialize object of type "+typeof t)}var cn=function(){this.first=!0};cn.prototype.update=function(t,e){var r=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=r,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=r,!0):(this.lastFloorZoom>r?(this.lastIntegerZoom=r+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<r&&(this.lastIntegerZoom=r,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=r,!0))};var hn={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};function fn(t){for(var e=0,r=t;e<r.length;e+=1)if(dn(r[e].charCodeAt(0)))return!0;return!1}function yn(t){return!(hn.Arabic(t)||hn["Arabic Supplement"](t)||hn["Arabic Extended-A"](t)||hn["Arabic Presentation Forms-A"](t)||hn["Arabic Presentation Forms-B"](t))}function dn(t){return!(746!==t&&747!==t&&(t<4352||!(hn["Bopomofo Extended"](t)||hn.Bopomofo(t)||hn["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||hn["CJK Compatibility Ideographs"](t)||hn["CJK Compatibility"](t)||hn["CJK Radicals Supplement"](t)||hn["CJK Strokes"](t)||!(!hn["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||hn["CJK Unified Ideographs Extension A"](t)||hn["CJK Unified Ideographs"](t)||hn["Enclosed CJK Letters and Months"](t)||hn["Hangul Compatibility Jamo"](t)||hn["Hangul Jamo Extended-A"](t)||hn["Hangul Jamo Extended-B"](t)||hn["Hangul Jamo"](t)||hn["Hangul Syllables"](t)||hn.Hiragana(t)||hn["Ideographic Description Characters"](t)||hn.Kanbun(t)||hn["Kangxi Radicals"](t)||hn["Katakana Phonetic Extensions"](t)||hn.Katakana(t)&&12540!==t||!(!hn["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!hn["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||hn["Unified Canadian Aboriginal Syllabics"](t)||hn["Unified Canadian Aboriginal Syllabics Extended"](t)||hn["Vertical Forms"](t)||hn["Yijing Hexagram Symbols"](t)||hn["Yi Syllables"](t)||hn["Yi Radicals"](t))))}function mn(t){return!(dn(t)||function(t){return!!(hn["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||hn["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||hn["Letterlike Symbols"](t)||hn["Number Forms"](t)||hn["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||hn["Control Pictures"](t)&&9251!==t||hn["Optical Character Recognition"](t)||hn["Enclosed Alphanumerics"](t)||hn["Geometric Shapes"](t)||hn["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||hn["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||hn["CJK Symbols and Punctuation"](t)||hn.Katakana(t)||hn["Private Use Area"](t)||hn["CJK Compatibility Forms"](t)||hn["Small Form Variants"](t)||hn["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function vn(t,e){return!(!e&&(t>=1424&&t<=2303||hn["Arabic Presentation Forms-A"](t)||hn["Arabic Presentation Forms-B"](t))||t>=2304&&t<=3583||t>=3840&&t<=4255||hn.Khmer(t))}var gn,xn=!1,bn=null,_n=!1,wn=new dt,An={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return _n||null!=An.applyArabicShaping}},Sn=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new cn,this.transition={})};Sn.prototype.isSupportedScript=function(t){return function(t,e){for(var r=0,n=t;r<n.length;r+=1)if(!vn(n[r].charCodeAt(0),e))return!1;return!0}(t,An.isLoaded())},Sn.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Sn.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),r=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*r}:{fromScale:.5,toScale:1,t:1-(1-r)*e}};var kn=function(t,e){this.property=t,this.value=e,this.expression=br(void 0===e?t.specification.default:e,t.specification)};kn.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},kn.prototype.possiblyEvaluate=function(t){return this.property.possiblyEvaluate(this,t)};var zn=function(t){this.property=t,this.value=new kn(t,void 0)};zn.prototype.transitioned=function(t,e){return new Bn(this.property,this.value,e,c({},t.transition,this.transition),t.now)},zn.prototype.untransitioned=function(){return new Bn(this.property,this.value,null,{},0)};var In=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};In.prototype.getValue=function(t){return b(this._values[t].value.value)},In.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new zn(this._values[t].property)),this._values[t].value=new kn(this._values[t].property,null===e?void 0:b(e))},In.prototype.getTransition=function(t){return b(this._values[t].transition)},In.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new zn(this._values[t].property)),this._values[t].transition=b(e)||void 0},In.prototype.serialize=function(){for(var t={},e=0,r=Object.keys(this._values);e<r.length;e+=1){var n=r[e],i=this.getValue(n);void 0!==i&&(t[n]=i);var a=this.getTransition(n);void 0!==a&&(t[n+"-transition"]=a)}return t},In.prototype.transitioned=function(t,e){for(var r=new En(this._properties),n=0,i=Object.keys(this._values);n<i.length;n+=1){var a=i[n];r._values[a]=this._values[a].transitioned(t,e._values[a])}return r},In.prototype.untransitioned=function(){for(var t=new En(this._properties),e=0,r=Object.keys(this._values);e<r.length;e+=1){var n=r[e];t._values[n]=this._values[n].untransitioned()}return t};var Bn=function(t,e,r,n,i){this.property=t,this.value=e,this.begin=i+n.delay||0,this.end=this.begin+n.duration||0,t.specification.transition&&(n.delay||n.duration)&&(this.prior=r)};Bn.prototype.possiblyEvaluate=function(t){var e=t.now||0,r=this.value.possiblyEvaluate(t),n=this.prior;if(n){if(e>this.end)return this.prior=null,r;if(this.value.isDataDriven())return this.prior=null,r;if(e<this.begin)return n.possiblyEvaluate(t);var i=(e-this.begin)/(this.end-this.begin);return this.property.interpolate(n.possiblyEvaluate(t),r,function(t){if(i<=0)return 0;if(i>=1)return 1;var e=i*i,r=e*i;return 4*(i<.5?r:3*(i-e)+r-.75)}())}return r};var En=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};En.prototype.possiblyEvaluate=function(t){for(var e=new Cn(this._properties),r=0,n=Object.keys(this._values);r<n.length;r+=1){var i=n[r];e._values[i]=this._values[i].possiblyEvaluate(t)}return e},En.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1){var r=e[t];if(this._values[r].prior)return!0}return!1};var Pn=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};Pn.prototype.getValue=function(t){return b(this._values[t].value)},Pn.prototype.setValue=function(t,e){this._values[t]=new kn(this._values[t].property,null===e?void 0:b(e))},Pn.prototype.serialize=function(){for(var t={},e=0,r=Object.keys(this._values);e<r.length;e+=1){var n=r[e],i=this.getValue(n);void 0!==i&&(t[n]=i)}return t},Pn.prototype.possiblyEvaluate=function(t){for(var e=new Cn(this._properties),r=0,n=Object.keys(this._values);r<n.length;r+=1){var i=n[r];e._values[i]=this._values[i].possiblyEvaluate(t)}return e};var Vn=function(t,e,r){this.property=t,this.value=e,this.parameters=r};Vn.prototype.isConstant=function(){return"constant"===this.value.kind},Vn.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},Vn.prototype.evaluate=function(t,e){return this.property.evaluate(this.value,this.parameters,t,e)};var Cn=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};Cn.prototype.get=function(t){return this._values[t]};var Mn=function(t){this.specification=t};Mn.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},Mn.prototype.interpolate=function(t,e,r){var n=pe[this.specification.type];return n?n(t,e,r):t};var Tn=function(t){this.specification=t};Tn.prototype.possiblyEvaluate=function(t,e){return"constant"===t.expression.kind||"camera"===t.expression.kind?new Vn(this,{kind:"constant",value:t.expression.evaluate(e)},e):new Vn(this,t.expression,e)},Tn.prototype.interpolate=function(t,e,r){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new Vn(this,{kind:"constant",value:void 0},t.parameters);var n=pe[this.specification.type];return n?new Vn(this,{kind:"constant",value:n(t.value.value,e.value.value,r)},t.parameters):t},Tn.prototype.evaluate=function(t,e,r,n){return"constant"===t.kind?t.value:t.evaluate(e,r,n)};var Fn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.possiblyEvaluate=function(t,e){if(void 0===t.value)return new Vn(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var r=t.expression.evaluate(e),n=this._calculate(r,r,r,e);return new Vn(this,{kind:"constant",value:n},e)}if("camera"===t.expression.kind){var i=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new Vn(this,{kind:"constant",value:i},e)}return new Vn(this,t.expression,e)},e.prototype.evaluate=function(t,e,r,n){if("source"===t.kind){var i=t.evaluate(e,r,n);return this._calculate(i,i,i,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},r,n),t.evaluate({zoom:Math.floor(e.zoom)},r,n),t.evaluate({zoom:Math.floor(e.zoom)+1},r,n),e):t.value},e.prototype._calculate=function(t,e,r,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:r,to:e}},e.prototype.interpolate=function(t){return t},e}(Tn),Ln=function(t){this.specification=t};Ln.prototype.possiblyEvaluate=function(t,e){if(void 0!==t.value){if("constant"===t.expression.kind){var r=t.expression.evaluate(e);return this._calculate(r,r,r,e)}return this._calculate(t.expression.evaluate(new Sn(Math.floor(e.zoom-1),e)),t.expression.evaluate(new Sn(Math.floor(e.zoom),e)),t.expression.evaluate(new Sn(Math.floor(e.zoom+1),e)),e)}},Ln.prototype._calculate=function(t,e,r,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:r,to:e}},Ln.prototype.interpolate=function(t){return t};var On=function(t){this.specification=t};On.prototype.possiblyEvaluate=function(t,e){return!!t.expression.evaluate(e)},On.prototype.interpolate=function(){return!1};var Dn=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},t){var r=t[e],n=this.defaultPropertyValues[e]=new kn(r,void 0),i=this.defaultTransitionablePropertyValues[e]=new zn(r);this.defaultTransitioningPropertyValues[e]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=n.possiblyEvaluate({})}};sn("DataDrivenProperty",Tn),sn("DataConstantProperty",Mn),sn("CrossFadedDataDrivenProperty",Fn),sn("CrossFadedProperty",Ln),sn("ColorRampProperty",On);var Un=function(t){function e(e,r){if(t.call(this),this.id=e.id,this.type=e.type,this.visibility="visible",this._featureFilter=function(){return!0},"custom"!==e.type&&(e=e,this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),r.layout&&(this._unevaluatedLayout=new Pn(r.layout)),r.paint)){for(var n in this._transitionablePaint=new In(r.paint),e.paint)this.setPaintProperty(n,e.paint[n],{validate:!1});for(var i in e.layout)this.setLayoutProperty(i,e.layout[i],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,r){if(void 0===r&&(r={}),null!=e){var n="layers."+this.id+".layout."+t;if(this._validate(Qr,n,t,e,r))return}"visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility="none"===e?e:"visible"},e.prototype.getPaintProperty=function(t){return v(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,r){if(void 0===r&&(r={}),null!=e){var n="layers."+this.id+".paint."+t;if(this._validate(Wr,n,t,e,r))return!1}if(v(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;var i=this._transitionablePaint._values[t],a="cross-faded-data-driven"===i.property.specification["property-type"]&&!i.value.value&&e,o=this._transitionablePaint._values[t].value.isDataDriven();this._transitionablePaint.setValue(t,e);var s=this._transitionablePaint._values[t].value.isDataDriven();return this._handleSpecialPaintPropertyUpdate(t),s||o||a},e.prototype._handleSpecialPaintPropertyUpdate=function(t){},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t)),this.paint=this._transitioningPaint.possiblyEvaluate(t)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return"none"===this.visibility&&(t.layout=t.layout||{},t.layout.visibility="none"),x(t,function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)})},e.prototype._validate=function(t,e,r,n,i){return void 0===i&&(i={}),(!i||!1!==i.validate)&&tn(this,t.call(Jr,{key:e,layerType:this.type,objectKey:r,value:n,styleSpec:mt,style:{glyphs:!0,sprite:!0}}))},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof Vn&&er(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},e}(dt),jn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Rn=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},qn=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Nn(t,e){void 0===e&&(e=1);var r=0,n=0;return{members:t.map(function(t){var i,a=(i=t.type,jn[i].BYTES_PER_ELEMENT),o=r=Kn(r,Math.max(e,a)),s=t.components||1;return n=Math.max(n,a),r+=a*s,{name:t.name,type:t.type,components:s,offset:o}}),size:Kn(r,Math.max(n,e)),alignment:e}}function Kn(t,e){return Math.ceil(t/e)*e}qn.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},qn.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},qn.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},qn.prototype.clear=function(){this.length=0},qn.prototype.resize=function(t){this.reserve(t),this.length=t},qn.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},qn.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Gn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var r=this.length;return this.resize(r+1),this.emplace(r,t,e)},e.prototype.emplace=function(t,e,r){var n=2*t;return this.int16[n+0]=e,this.int16[n+1]=r,t},e}(qn);Gn.prototype.bytesPerElement=4,sn("StructArrayLayout2i4",Gn);var Xn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)},e.prototype.emplace=function(t,e,r,n,i){var a=4*t;return this.int16[a+0]=e,this.int16[a+1]=r,this.int16[a+2]=n,this.int16[a+3]=i,t},e}(qn);Xn.prototype.bytesPerElement=8,sn("StructArrayLayout4i8",Xn);var Zn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,a){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,r,n,i,a)},e.prototype.emplace=function(t,e,r,n,i,a,o){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=r,this.int16[s+2]=n,this.int16[s+3]=i,this.int16[s+4]=a,this.int16[s+5]=o,t},e}(qn);Zn.prototype.bytesPerElement=12,sn("StructArrayLayout2i4i12",Zn);var Hn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,a,o,s){var u=this.length;return this.resize(u+1),this.emplace(u,t,e,r,n,i,a,o,s)},e.prototype.emplace=function(t,e,r,n,i,a,o,s,u){var l=6*t,p=12*t;return this.int16[l+0]=e,this.int16[l+1]=r,this.int16[l+2]=n,this.int16[l+3]=i,this.uint8[p+8]=a,this.uint8[p+9]=o,this.uint8[p+10]=s,this.uint8[p+11]=u,t},e}(qn);Hn.prototype.bytesPerElement=12,sn("StructArrayLayout4i4ub12",Hn);var Yn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,a,o,s){var u=this.length;return this.resize(u+1),this.emplace(u,t,e,r,n,i,a,o,s)},e.prototype.emplace=function(t,e,r,n,i,a,o,s,u){var l=8*t;return this.uint16[l+0]=e,this.uint16[l+1]=r,this.uint16[l+2]=n,this.uint16[l+3]=i,this.uint16[l+4]=a,this.uint16[l+5]=o,this.uint16[l+6]=s,this.uint16[l+7]=u,t},e}(qn);Yn.prototype.bytesPerElement=16,sn("StructArrayLayout8ui16",Yn);var Jn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,a,o,s){var u=this.length;return this.resize(u+1),this.emplace(u,t,e,r,n,i,a,o,s)},e.prototype.emplace=function(t,e,r,n,i,a,o,s,u){var l=8*t;return this.int16[l+0]=e,this.int16[l+1]=r,this.int16[l+2]=n,this.int16[l+3]=i,this.uint16[l+4]=a,this.uint16[l+5]=o,this.uint16[l+6]=s,this.uint16[l+7]=u,t},e}(qn);Jn.prototype.bytesPerElement=16,sn("StructArrayLayout4i4ui16",Jn);var $n=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)},e.prototype.emplace=function(t,e,r,n){var i=3*t;return this.float32[i+0]=e,this.float32[i+1]=r,this.float32[i+2]=n,t},e}(qn);$n.prototype.bytesPerElement=12,sn("StructArrayLayout3f12",$n);var Wn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){var r=1*t;return this.uint32[r+0]=e,t},e}(qn);Wn.prototype.bytesPerElement=4,sn("StructArrayLayout1ul4",Wn);var Qn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,a,o,s,u,l,p){var c=this.length;return this.resize(c+1),this.emplace(c,t,e,r,n,i,a,o,s,u,l,p)},e.prototype.emplace=function(t,e,r,n,i,a,o,s,u,l,p,c){var h=12*t,f=6*t;return this.int16[h+0]=e,this.int16[h+1]=r,this.int16[h+2]=n,this.int16[h+3]=i,this.int16[h+4]=a,this.int16[h+5]=o,this.uint32[f+3]=s,this.uint16[h+8]=u,this.uint16[h+9]=l,this.int16[h+10]=p,this.int16[h+11]=c,t},e}(qn);Qn.prototype.bytesPerElement=24,sn("StructArrayLayout6i1ul2ui2i24",Qn);var ti=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,a){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,r,n,i,a)},e.prototype.emplace=function(t,e,r,n,i,a,o){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=r,this.int16[s+2]=n,this.int16[s+3]=i,this.int16[s+4]=a,this.int16[s+5]=o,t},e}(qn);ti.prototype.bytesPerElement=12,sn("StructArrayLayout2i2i2i12",ti);var ei=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var r=this.length;return this.resize(r+1),this.emplace(r,t,e)},e.prototype.emplace=function(t,e,r){var n=4*t;return this.uint8[n+0]=e,this.uint8[n+1]=r,t},e}(qn);ei.prototype.bytesPerElement=4,sn("StructArrayLayout2ub4",ei);var ri=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,a,o,s,u,l,p,c,h,f){var y=this.length;return this.resize(y+1),this.emplace(y,t,e,r,n,i,a,o,s,u,l,p,c,h,f)},e.prototype.emplace=function(t,e,r,n,i,a,o,s,u,l,p,c,h,f,y){var d=20*t,m=10*t,v=40*t;return this.int16[d+0]=e,this.int16[d+1]=r,this.uint16[d+2]=n,this.uint16[d+3]=i,this.uint32[m+2]=a,this.uint32[m+3]=o,this.uint32[m+4]=s,this.uint16[d+10]=u,this.uint16[d+11]=l,this.uint16[d+12]=p,this.float32[m+7]=c,this.float32[m+8]=h,this.uint8[v+36]=f,this.uint8[v+37]=y,t},e}(qn);ri.prototype.bytesPerElement=40,sn("StructArrayLayout2i2ui3ul3ui2f2ub40",ri);var ni=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,a,o,s,u,l,p,c,h,f){var y=this.length;return this.resize(y+1),this.emplace(y,t,e,r,n,i,a,o,s,u,l,p,c,h,f)},e.prototype.emplace=function(t,e,r,n,i,a,o,s,u,l,p,c,h,f,y){var d=16*t,m=8*t;return this.int16[d+0]=e,this.int16[d+1]=r,this.int16[d+2]=n,this.int16[d+3]=i,this.uint16[d+4]=a,this.uint16[d+5]=o,this.uint16[d+6]=s,this.uint16[d+7]=u,this.uint16[d+8]=l,this.uint16[d+9]=p,this.uint16[d+10]=c,this.uint16[d+11]=h,this.uint16[d+12]=f,this.uint32[m+7]=y,t},e}(qn);ni.prototype.bytesPerElement=32,sn("StructArrayLayout4i9ui1ul32",ni);var ii=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){var r=1*t;return this.float32[r+0]=e,t},e}(qn);ii.prototype.bytesPerElement=4,sn("StructArrayLayout1f4",ii);var ai=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)},e.prototype.emplace=function(t,e,r,n){var i=3*t;return this.int16[i+0]=e,this.int16[i+1]=r,this.int16[i+2]=n,t},e}(qn);ai.prototype.bytesPerElement=6,sn("StructArrayLayout3i6",ai);var oi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)},e.prototype.emplace=function(t,e,r,n){var i=2*t,a=4*t;return this.uint32[i+0]=e,this.uint16[a+2]=r,this.uint16[a+3]=n,t},e}(qn);oi.prototype.bytesPerElement=8,sn("StructArrayLayout1ul2ui8",oi);var si=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)},e.prototype.emplace=function(t,e,r,n){var i=3*t;return this.uint16[i+0]=e,this.uint16[i+1]=r,this.uint16[i+2]=n,t},e}(qn);si.prototype.bytesPerElement=6,sn("StructArrayLayout3ui6",si);var ui=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var r=this.length;return this.resize(r+1),this.emplace(r,t,e)},e.prototype.emplace=function(t,e,r){var n=2*t;return this.uint16[n+0]=e,this.uint16[n+1]=r,t},e}(qn);ui.prototype.bytesPerElement=4,sn("StructArrayLayout2ui4",ui);var li=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){var r=1*t;return this.uint16[r+0]=e,t},e}(qn);li.prototype.bytesPerElement=2,sn("StructArrayLayout1ui2",li);var pi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var r=this.length;return this.resize(r+1),this.emplace(r,t,e)},e.prototype.emplace=function(t,e,r){var n=2*t;return this.float32[n+0]=e,this.float32[n+1]=r,t},e}(qn);pi.prototype.bytesPerElement=8,sn("StructArrayLayout2f8",pi);var ci=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)},e.prototype.emplace=function(t,e,r,n,i){var a=4*t;return this.float32[a+0]=e,this.float32[a+1]=r,this.float32[a+2]=n,this.float32[a+3]=i,t},e}(qn);ci.prototype.bytesPerElement=16,sn("StructArrayLayout4f16",ci);var hi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return r.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorPointX.set=function(t){this._structArray.int16[this._pos2+0]=t},r.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},r.anchorPointY.set=function(t){this._structArray.int16[this._pos2+1]=t},r.x1.get=function(){return this._structArray.int16[this._pos2+2]},r.x1.set=function(t){this._structArray.int16[this._pos2+2]=t},r.y1.get=function(){return this._structArray.int16[this._pos2+3]},r.y1.set=function(t){this._structArray.int16[this._pos2+3]=t},r.x2.get=function(){return this._structArray.int16[this._pos2+4]},r.x2.set=function(t){this._structArray.int16[this._pos2+4]=t},r.y2.get=function(){return this._structArray.int16[this._pos2+5]},r.y2.set=function(t){this._structArray.int16[this._pos2+5]=t},r.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},r.featureIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},r.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},r.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+8]=t},r.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},r.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},r.radius.get=function(){return this._structArray.int16[this._pos2+10]},r.radius.set=function(t){this._structArray.int16[this._pos2+10]=t},r.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},r.signedDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+11]=t},r.anchorPoint.get=function(){return new i(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,r),e}(Rn);hi.prototype.size=24;var fi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new hi(this,t)},e}(Qn);sn("CollisionBoxArray",fi);var yi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},hidden:{configurable:!0}};return r.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},r.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},r.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},r.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},r.glyphStartIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},r.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},r.numGlyphs.set=function(t){this._structArray.uint16[this._pos2+3]=t},r.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},r.vertexStartIndex.set=function(t){this._structArray.uint32[this._pos4+2]=t},r.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},r.lineStartIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},r.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},r.lineLength.set=function(t){this._structArray.uint32[this._pos4+4]=t},r.segment.get=function(){return this._structArray.uint16[this._pos2+10]},r.segment.set=function(t){this._structArray.uint16[this._pos2+10]=t},r.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},r.lowerSize.set=function(t){this._structArray.uint16[this._pos2+11]=t},r.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},r.upperSize.set=function(t){this._structArray.uint16[this._pos2+12]=t},r.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},r.lineOffsetX.set=function(t){this._structArray.float32[this._pos4+7]=t},r.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},r.lineOffsetY.set=function(t){this._structArray.float32[this._pos4+8]=t},r.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},r.writingMode.set=function(t){this._structArray.uint8[this._pos1+36]=t},r.hidden.get=function(){return this._structArray.uint8[this._pos1+37]},r.hidden.set=function(t){this._structArray.uint8[this._pos1+37]=t},Object.defineProperties(e.prototype,r),e}(Rn);yi.prototype.size=40;var di=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new yi(this,t)},e}(ri);sn("PlacedSymbolArray",di);var mi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={anchorX:{configurable:!0},anchorY:{configurable:!0},horizontalPlacedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},crossTileID:{configurable:!0}};return r.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},r.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},r.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},r.horizontalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},r.horizontalPlacedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+2]=t},r.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},r.verticalPlacedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+3]=t},r.key.get=function(){return this._structArray.uint16[this._pos2+4]},r.key.set=function(t){this._structArray.uint16[this._pos2+4]=t},r.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+5]},r.textBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+5]=t},r.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+6]},r.textBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+6]=t},r.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+7]},r.iconBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+7]=t},r.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+8]},r.iconBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+8]=t},r.featureIndex.get=function(){return this._structArray.uint16[this._pos2+9]},r.featureIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},r.numGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+10]},r.numGlyphVertices.set=function(t){this._structArray.uint16[this._pos2+10]=t},r.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+11]},r.numVerticalGlyphVertices.set=function(t){this._structArray.uint16[this._pos2+11]=t},r.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+12]},r.numIconVertices.set=function(t){this._structArray.uint16[this._pos2+12]=t},r.crossTileID.get=function(){return this._structArray.uint32[this._pos4+7]},r.crossTileID.set=function(t){this._structArray.uint32[this._pos4+7]=t},Object.defineProperties(e.prototype,r),e}(Rn);mi.prototype.size=32;var vi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new mi(this,t)},e}(ni);sn("SymbolInstanceArray",vi);var gi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={offsetX:{configurable:!0}};return r.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},r.offsetX.set=function(t){this._structArray.float32[this._pos4+0]=t},Object.defineProperties(e.prototype,r),e}(Rn);gi.prototype.size=4;var xi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e.prototype.get=function(t){return new gi(this,t)},e}(ii);sn("GlyphOffsetArray",xi);var bi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={x:{configurable:!0},y:{configurable:!0},tileUnitDistanceFromAnchor:{configurable:!0}};return r.x.get=function(){return this._structArray.int16[this._pos2+0]},r.x.set=function(t){this._structArray.int16[this._pos2+0]=t},r.y.get=function(){return this._structArray.int16[this._pos2+1]},r.y.set=function(t){this._structArray.int16[this._pos2+1]=t},r.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},r.tileUnitDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+2]=t},Object.defineProperties(e.prototype,r),e}(Rn);bi.prototype.size=6;var _i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e.prototype.get=function(t){return new bi(this,t)},e}(ai);sn("SymbolLineVertexArray",_i);var wi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return r.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},r.featureIndex.set=function(t){this._structArray.uint32[this._pos4+0]=t},r.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},r.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},r.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},r.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+3]=t},Object.defineProperties(e.prototype,r),e}(Rn);wi.prototype.size=8;var Ai=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new wi(this,t)},e}(oi);sn("FeatureIndexArray",Ai);var Si=Nn([{name:"a_pos",components:2,type:"Int16"}],4),ki=Si.members,zi=(Si.size,Si.alignment,function(t){void 0===t&&(t=[]),this.segments=t});function Ii(t,e){return 256*(t=l(Math.floor(t),0,255))+l(Math.floor(e),0,255)}zi.prototype.prepareSegment=function(t,e,r,n){var i=this.segments[this.segments.length-1];return t>zi.MAX_VERTEX_ARRAY_LENGTH&&w("Max vertices per segment is "+zi.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!i||i.vertexLength+t>zi.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==n)&&(i={vertexOffset:e.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},void 0!==n&&(i.sortKey=n),this.segments.push(i)),i},zi.prototype.get=function(){return this.segments},zi.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var r=e[t];for(var n in r.vaos)r.vaos[n].destroy()}},zi.simpleSegment=function(t,e,r,n){return new zi([{vertexOffset:t,primitiveOffset:e,vertexLength:r,primitiveLength:n,vaos:{},sortKey:0}])},zi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,sn("SegmentVector",zi);var Bi=function(){this.ids=[],this.positions=[],this.indexed=!1};function Ei(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}Bi.prototype.add=function(t,e,r,n){this.ids.push(t),this.positions.push(e,r,n)},Bi.prototype.getPositions=function(t){for(var e=0,r=this.ids.length-1;e<r;){var n=e+r>>1;this.ids[n]>=t?r=n:e=n+1}for(var i=[];this.ids[e]===t;){var a=this.positions[3*e],o=this.positions[3*e+1],s=this.positions[3*e+2];i.push({index:a,start:o,end:s}),e++}return i},Bi.serialize=function(t,e){var r=new Float64Array(t.ids),n=new Uint32Array(t.positions);return function t(e,r,n,i){if(!(n>=i)){for(var a=e[n+i>>1],o=n-1,s=i+1;;){do{o++}while(e[o]<a);do{s--}while(e[s]>a);if(o>=s)break;Ei(e,o,s),Ei(r,3*o,3*s),Ei(r,3*o+1,3*s+1),Ei(r,3*o+2,3*s+2)}t(e,r,n,s),t(e,r,s+1,i)}}(r,n,0,r.length-1),e.push(r.buffer,n.buffer),{ids:r,positions:n}},Bi.deserialize=function(t){var e=new Bi;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e},sn("FeaturePositionMap",Bi);var Pi=function(t,e){this.gl=t.gl,this.location=e},Vi=function(t){function e(e,r){t.call(this,e,r),this.current=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))},e}(Pi),Ci=function(t){function e(e,r){t.call(this,e,r),this.current=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))},e}(Pi),Mi=function(t){function e(e,r){t.call(this,e,r),this.current=[0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))},e}(Pi),Ti=function(t){function e(e,r){t.call(this,e,r),this.current=[0,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))},e}(Pi),Fi=function(t){function e(e,r){t.call(this,e,r),this.current=[0,0,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))},e}(Pi),Li=function(t){function e(e,r){t.call(this,e,r),this.current=Dt.transparent}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))},e}(Pi),Oi=new Float32Array(16),Di=function(t){function e(e,r){t.call(this,e,r),this.current=Oi}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}},e}(Pi);function Ui(t){return[Ii(255*t.r,255*t.g),Ii(255*t.b,255*t.a)]}var ji=function(t,e,r){this.value=t,this.names=e,this.uniformNames=this.names.map(function(t){return"u_"+t}),this.type=r,this.maxValue=-1/0};ji.prototype.defines=function(){return this.names.map(function(t){return"#define HAS_UNIFORM_u_"+t})},ji.prototype.setConstantPatternPositions=function(){},ji.prototype.populatePaintArray=function(){},ji.prototype.updatePaintArray=function(){},ji.prototype.upload=function(){},ji.prototype.destroy=function(){},ji.prototype.setUniforms=function(t,e,r,n){e.set(n.constantOr(this.value))},ji.prototype.getBinding=function(t,e){return"color"===this.type?new Li(t,e):new Ci(t,e)},ji.serialize=function(t){var e=t.value,r=t.names,n=t.type;return{value:ln(e),names:r,type:n}},ji.deserialize=function(t){var e=t.value,r=t.names,n=t.type;return new ji(pn(e),r,n)};var Ri=function(t,e,r){this.value=t,this.names=e,this.uniformNames=this.names.map(function(t){return"u_"+t}),this.type=r,this.maxValue=-1/0,this.patternPositions={patternTo:null,patternFrom:null}};Ri.prototype.defines=function(){return this.names.map(function(t){return"#define HAS_UNIFORM_u_"+t})},Ri.prototype.populatePaintArray=function(){},Ri.prototype.updatePaintArray=function(){},Ri.prototype.upload=function(){},Ri.prototype.destroy=function(){},Ri.prototype.setConstantPatternPositions=function(t,e){this.patternPositions.patternTo=t.tlbr,this.patternPositions.patternFrom=e.tlbr},Ri.prototype.setUniforms=function(t,e,r,n,i){var a=this.patternPositions;"u_pattern_to"===i&&a.patternTo&&e.set(a.patternTo),"u_pattern_from"===i&&a.patternFrom&&e.set(a.patternFrom)},Ri.prototype.getBinding=function(t,e){return new Fi(t,e)};var qi=function(t,e,r,n){this.expression=t,this.names=e,this.type=r,this.uniformNames=this.names.map(function(t){return"a_"+t}),this.maxValue=-1/0,this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Float32",components:"color"===r?2:1,offset:0}}),this.paintVertexArray=new n};qi.prototype.defines=function(){return[]},qi.prototype.setConstantPatternPositions=function(){},qi.prototype.populatePaintArray=function(t,e){var r=this.paintVertexArray,n=r.length;r.reserve(t);var i=this.expression.evaluate(new Sn(0),e,{});if("color"===this.type)for(var a=Ui(i),o=n;o<t;o++)r.emplaceBack(a[0],a[1]);else{for(var s=n;s<t;s++)r.emplaceBack(i);this.maxValue=Math.max(this.maxValue,i)}},qi.prototype.updatePaintArray=function(t,e,r,n){var i=this.paintVertexArray,a=this.expression.evaluate({zoom:0},r,n);if("color"===this.type)for(var o=Ui(a),s=t;s<e;s++)i.emplace(s,o[0],o[1]);else{for(var u=t;u<e;u++)i.emplace(u,a);this.maxValue=Math.max(this.maxValue,a)}},qi.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},qi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},qi.prototype.setUniforms=function(t,e){e.set(0)},qi.prototype.getBinding=function(t,e){return new Ci(t,e)};var Ni=function(t,e,r,n,i,a){this.expression=t,this.names=e,this.uniformNames=this.names.map(function(t){return"a_"+t+"_t"}),this.type=r,this.useIntegerZoom=n,this.zoom=i,this.maxValue=-1/0;var o=a;this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Float32",components:"color"===r?4:2,offset:0}}),this.paintVertexArray=new o};Ni.prototype.defines=function(){return[]},Ni.prototype.setConstantPatternPositions=function(){},Ni.prototype.populatePaintArray=function(t,e){var r=this.paintVertexArray,n=r.length;r.reserve(t);var i=this.expression.evaluate(new Sn(this.zoom),e,{}),a=this.expression.evaluate(new Sn(this.zoom+1),e,{});if("color"===this.type)for(var o=Ui(i),s=Ui(a),u=n;u<t;u++)r.emplaceBack(o[0],o[1],s[0],s[1]);else{for(var l=n;l<t;l++)r.emplaceBack(i,a);this.maxValue=Math.max(this.maxValue,i,a)}},Ni.prototype.updatePaintArray=function(t,e,r,n){var i=this.paintVertexArray,a=this.expression.evaluate({zoom:this.zoom},r,n),o=this.expression.evaluate({zoom:this.zoom+1},r,n);if("color"===this.type)for(var s=Ui(a),u=Ui(o),l=t;l<e;l++)i.emplace(l,s[0],s[1],u[0],u[1]);else{for(var p=t;p<e;p++)i.emplace(p,a,o);this.maxValue=Math.max(this.maxValue,a,o)}},Ni.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ni.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ni.prototype.interpolationFactor=function(t){return this.useIntegerZoom?this.expression.interpolationFactor(Math.floor(t),this.zoom,this.zoom+1):this.expression.interpolationFactor(t,this.zoom,this.zoom+1)},Ni.prototype.setUniforms=function(t,e,r){e.set(this.interpolationFactor(r.zoom))},Ni.prototype.getBinding=function(t,e){return new Ci(t,e)};var Ki=function(t,e,r,n,i,a,o){this.expression=t,this.names=e,this.type=r,this.uniformNames=this.names.map(function(t){return"a_"+t+"_t"}),this.useIntegerZoom=n,this.zoom=i,this.maxValue=-1/0,this.layerId=o,this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Uint16",components:4,offset:0}}),this.zoomInPaintVertexArray=new a,this.zoomOutPaintVertexArray=new a};Ki.prototype.defines=function(){return[]},Ki.prototype.setConstantPatternPositions=function(){},Ki.prototype.populatePaintArray=function(t,e,r){var n=this.zoomInPaintVertexArray,i=this.zoomOutPaintVertexArray,a=this.layerId,o=n.length;if(n.reserve(t),i.reserve(t),r&&e.patterns&&e.patterns[a]){var s=e.patterns[a],u=s.min,l=s.mid,p=s.max,c=r[u],h=r[l],f=r[p];if(!c||!h||!f)return;for(var y=o;y<t;y++)n.emplaceBack(h.tl[0],h.tl[1],h.br[0],h.br[1],c.tl[0],c.tl[1],c.br[0],c.br[1]),i.emplaceBack(h.tl[0],h.tl[1],h.br[0],h.br[1],f.tl[0],f.tl[1],f.br[0],f.br[1])}},Ki.prototype.updatePaintArray=function(t,e,r,n,i){var a=this.zoomInPaintVertexArray,o=this.zoomOutPaintVertexArray,s=this.layerId;if(i&&r.patterns&&r.patterns[s]){var u=r.patterns[s],l=u.min,p=u.mid,c=u.max,h=i[l],f=i[p],y=i[c];if(!h||!f||!y)return;for(var d=t;d<e;d++)a.emplace(d,f.tl[0],f.tl[1],f.br[0],f.br[1],h.tl[0],h.tl[1],h.br[0],h.br[1]),o.emplace(d,f.tl[0],f.tl[1],f.br[0],f.br[1],y.tl[0],y.tl[1],y.br[0],y.br[1])}},Ki.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ki.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()},Ki.prototype.setUniforms=function(t,e){e.set(0)},Ki.prototype.getBinding=function(t,e){return new Ci(t,e)};var Gi=function(){this.binders={},this.cacheKey="",this._buffers=[],this._featureMap=new Bi,this._bufferOffset=0};Gi.createDynamic=function(t,e,r){var n=new Gi,i=[];for(var a in t.paint._values)if(r(a)){var o=t.paint.get(a);if(o instanceof Vn&&er(o.property.specification)){var s=Zi(a,t.type),u=o.property.specification.type,l=o.property.useIntegerZoom;if("cross-faded"===o.property.specification["property-type"]||"cross-faded-data-driven"===o.property.specification["property-type"])if("constant"===o.value.kind)n.binders[a]=new Ri(o.value.value,s,u),i.push("/u_"+a);else{var p=Hi(a,u,"source");n.binders[a]=new Ki(o.value,s,u,l,e,p,t.id),i.push("/a_"+a)}else if("constant"===o.value.kind)n.binders[a]=new ji(o.value.value,s,u),i.push("/u_"+a);else if("source"===o.value.kind){var c=Hi(a,u,"source");n.binders[a]=new qi(o.value,s,u,c),i.push("/a_"+a)}else{var h=Hi(a,u,"composite");n.binders[a]=new Ni(o.value,s,u,l,e,h),i.push("/z_"+a)}}}return n.cacheKey=i.sort().join(""),n},Gi.prototype.populatePaintArrays=function(t,e,r,n){for(var i in this.binders)this.binders[i].populatePaintArray(t,e,n);void 0!==e.id&&this._featureMap.add(+e.id,r,this._bufferOffset,t),this._bufferOffset=t},Gi.prototype.setConstantPatternPositions=function(t,e){for(var r in this.binders)this.binders[r].setConstantPatternPositions(t,e)},Gi.prototype.updatePaintArrays=function(t,e,r,n){var i=!1;for(var a in t)for(var o=0,s=this._featureMap.getPositions(+a);o<s.length;o+=1){var u=s[o],l=e.feature(u.index);for(var p in this.binders){var c=this.binders[p];if(!(c instanceof ji||c instanceof Ri)&&!0===c.expression.isStateDependent){var h=r.paint.get(p);c.expression=h.value,c.updatePaintArray(u.start,u.end,l,t[a],n),i=!0}}}return i},Gi.prototype.defines=function(){var t=[];for(var e in this.binders)t.push.apply(t,this.binders[e].defines());return t},Gi.prototype.getPaintVertexBuffers=function(){return this._buffers},Gi.prototype.getUniforms=function(t,e){var r={};for(var n in this.binders)for(var i=this.binders[n],a=0,o=i.uniformNames;a<o.length;a+=1){var s=o[a];r[s]=i.getBinding(t,e[s])}return r},Gi.prototype.setUniforms=function(t,e,r,n){for(var i in this.binders)for(var a=this.binders[i],o=0,s=a.uniformNames;o<s.length;o+=1){var u=s[o];a.setUniforms(t,e[u],n,r.get(i),u)}},Gi.prototype.updatePatternPaintBuffers=function(t){var e=[];for(var r in this.binders){var n=this.binders[r];if(n instanceof Ki){var i=2===t.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;i&&e.push(i)}else(n instanceof qi||n instanceof Ni)&&n.paintVertexBuffer&&e.push(n.paintVertexBuffer)}this._buffers=e},Gi.prototype.upload=function(t){for(var e in this.binders)this.binders[e].upload(t);var r=[];for(var n in this.binders){var i=this.binders[n];(i instanceof qi||i instanceof Ni)&&i.paintVertexBuffer&&r.push(i.paintVertexBuffer)}this._buffers=r},Gi.prototype.destroy=function(){for(var t in this.binders)this.binders[t].destroy()};var Xi=function(t,e,r,n){void 0===n&&(n=function(){return!0}),this.programConfigurations={};for(var i=0,a=e;i<a.length;i+=1){var o=a[i];this.programConfigurations[o.id]=Gi.createDynamic(o,r,n),this.programConfigurations[o.id].layoutAttributes=t}this.needsUpload=!1};function Zi(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from"],"fill-pattern":["pattern_to","pattern_from"],"fill-extrusion-pattern":["pattern_to","pattern_from"]}[t]||[t.replace(e+"-","").replace(/-/g,"_")]}function Hi(t,e,r){var n={color:{source:pi,composite:ci},number:{source:ii,composite:pi}},i=function(t){return{"line-pattern":{source:Yn,composite:Yn},"fill-pattern":{source:Yn,composite:Yn},"fill-extrusion-pattern":{source:Yn,composite:Yn}}[t]}(t);return i&&i[r]||n[e][r]}Xi.prototype.populatePaintArrays=function(t,e,r,n){for(var i in this.programConfigurations)this.programConfigurations[i].populatePaintArrays(t,e,r,n);this.needsUpload=!0},Xi.prototype.updatePaintArrays=function(t,e,r,n){for(var i=0,a=r;i<a.length;i+=1){var o=a[i];this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(t,e,o,n)||this.needsUpload}},Xi.prototype.get=function(t){return this.programConfigurations[t]},Xi.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},Xi.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},sn("ConstantBinder",ji),sn("CrossFadedConstantBinder",Ri),sn("SourceExpressionBinder",qi),sn("CrossFadedCompositeBinder",Ki),sn("CompositeExpressionBinder",Ni),sn("ProgramConfiguration",Gi,{omit:["_buffers"]}),sn("ProgramConfigurationSet",Xi);var Yi=8192,$i={min:-1*Math.pow(2,15),max:Math.pow(2,15)-1};function Wi(t){for(var e=Yi/t.extent,r=t.loadGeometry(),n=0;n<r.length;n++)for(var i=r[n],a=0;a<i.length;a++){var o=i[a];o.x=Math.round(o.x*e),o.y=Math.round(o.y*e),(o.x<$i.min||o.x>$i.max||o.y<$i.min||o.y>$i.max)&&w("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return r}function Qi(t,e,r,n,i){t.emplaceBack(2*e+(n+1)/2,2*r+(i+1)/2)}var ta=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Gn,this.indexArray=new si,this.segments=new zi,this.programConfigurations=new Xi(ki,t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function ea(t,e){for(var r=0;r<t.length;r++)if(pa(e,t[r]))return!0;for(var n=0;n<e.length;n++)if(pa(t,e[n]))return!0;return!!aa(t,e)}function ra(t,e,r){return!!pa(t,e)||!!sa(e,t,r)}function na(t,e){if(1===t.length)return la(e,t[0]);for(var r=0;r<e.length;r++)for(var n=e[r],i=0;i<n.length;i++)if(pa(t,n[i]))return!0;for(var a=0;a<t.length;a++)if(la(e,t[a]))return!0;for(var o=0;o<e.length;o++)if(aa(t,e[o]))return!0;return!1}function ia(t,e,r){if(t.length>1){if(aa(t,e))return!0;for(var n=0;n<e.length;n++)if(sa(e[n],t,r))return!0}for(var i=0;i<t.length;i++)if(sa(t[i],e,r))return!0;return!1}function aa(t,e){if(0===t.length||0===e.length)return!1;for(var r=0;r<t.length-1;r++)for(var n=t[r],i=t[r+1],a=0;a<e.length-1;a++)if(oa(n,i,e[a],e[a+1]))return!0;return!1}function oa(t,e,r,n){return A(t,r,n)!==A(e,r,n)&&A(t,e,r)!==A(t,e,n)}function sa(t,e,r){var n=r*r;if(1===e.length)return t.distSqr(e[0])<n;for(var i=1;i<e.length;i++)if(ua(t,e[i-1],e[i])<n)return!0;return!1}function ua(t,e,r){var n=e.distSqr(r);if(0===n)return t.distSqr(e);var i=((t.x-e.x)*(r.x-e.x)+(t.y-e.y)*(r.y-e.y))/n;return i<0?t.distSqr(e):i>1?t.distSqr(r):t.distSqr(r.sub(e)._mult(i)._add(e))}function la(t,e){for(var r,n,i,a=!1,o=0;o<t.length;o++)for(var s=0,u=(r=t[o]).length-1;s<r.length;u=s++)n=r[s],i=r[u],n.y>e.y!=i.y>e.y&&e.x<(i.x-n.x)*(e.y-n.y)/(i.y-n.y)+n.x&&(a=!a);return a}function pa(t,e){for(var r=!1,n=0,i=t.length-1;n<t.length;i=n++){var a=t[n],o=t[i];a.y>e.y!=o.y>e.y&&e.x<(o.x-a.x)*(e.y-a.y)/(o.y-a.y)+a.x&&(r=!r)}return r}function ca(t,e,r){var n=r[0],i=r[2];if(t.x<n.x&&e.x<n.x||t.x>i.x&&e.x>i.x||t.y<n.y&&e.y<n.y||t.y>i.y&&e.y>i.y)return!1;var a=A(t,e,r[0]);return a!==A(t,e,r[1])||a!==A(t,e,r[2])||a!==A(t,e,r[3])}function ha(t,e,r){var n=e.paint.get(t).value;return"constant"===n.kind?n.value:r.programConfigurations.get(e.id).binders[t].maxValue}function fa(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function ya(t,e,r,n,a){if(!e[0]&&!e[1])return t;var o=i.convert(e)._mult(a);"viewport"===r&&o._rotate(-n);for(var s=[],u=0;u<t.length;u++){var l=t[u];s.push(l.sub(o))}return s}ta.prototype.populate=function(t,e){for(var r=0,n=t;r<n.length;r+=1){var i=n[r],a=i.feature,o=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new Sn(this.zoom),a)){var u=Wi(a);this.addFeature(a,u,o),e.featureIndex.insert(a,u,o,s,this.index)}}},ta.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},ta.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ta.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ta.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ki),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},ta.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ta.prototype.addFeature=function(t,e,r){for(var n=0,i=e;n<i.length;n+=1)for(var a=0,o=i[n];a<o.length;a+=1){var s=o[a],u=s.x,l=s.y;if(!(u<0||u>=Yi||l<0||l>=Yi)){var p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),c=p.vertexLength;Qi(this.layoutVertexArray,u,l,-1,-1),Qi(this.layoutVertexArray,u,l,1,-1),Qi(this.layoutVertexArray,u,l,1,1),Qi(this.layoutVertexArray,u,l,-1,1),this.indexArray.emplaceBack(c,c+1,c+2),this.indexArray.emplaceBack(c,c+3,c+2),p.vertexLength+=4,p.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,{})},sn("CircleBucket",ta,{omit:["layers"]});var da={paint:new Dn({"circle-radius":new Tn(mt.paint_circle["circle-radius"]),"circle-color":new Tn(mt.paint_circle["circle-color"]),"circle-blur":new Tn(mt.paint_circle["circle-blur"]),"circle-opacity":new Tn(mt.paint_circle["circle-opacity"]),"circle-translate":new Mn(mt.paint_circle["circle-translate"]),"circle-translate-anchor":new Mn(mt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Mn(mt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Mn(mt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Tn(mt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Tn(mt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Tn(mt.paint_circle["circle-stroke-opacity"])})},va="undefined"!=typeof Float32Array?Float32Array:Array;function ga(){var t=new va(9);return va!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function xa(){var t=new va(3);return va!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function ba(t,e,r){var n=new va(3);return n[0]=t,n[1]=e,n[2]=r,n}function Sa(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*o,t[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*o,t[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*o,t[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*o,t}function ka(){var t=new va(4);return va!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}Math.PI,xa(),function(){var t;t=new va(4),va!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}(),xa(),ba(1,0,0),ba(0,1,0),ka(),ka(),ga(),function(){var t;t=new va(2),va!=Float32Array&&(t[0]=0,t[1]=0)}();var Ta=function(t){function e(e){t.call(this,e,da)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new ta(t)},e.prototype.queryRadius=function(t){var e=t;return ha("circle-radius",this,e)+ha("circle-stroke-width",this,e)+fa(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,n,i,a,o,s){for(var u=ya(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),a.angle,o),l=this.paint.get("circle-radius").evaluate(e,r)+this.paint.get("circle-stroke-width").evaluate(e,r),p="map"===this.paint.get("circle-pitch-alignment"),c=p?u:function(t,e){return u.map(function(t){return Fa(t,e)})}(0,s),h=p?l*o:l,f=0,y=n;f<y.length;f+=1)for(var d=0,m=y[f];d<m.length;d+=1){var v=m[d],g=p?v:Fa(v,s),x=h,b=Sa([],[v.x,v.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?x*=b[3]/a.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(x*=a.cameraToCenterDistance/b[3]),ra(c,g,x))return!0}return!1},e}(Un);function Fa(t,e){var r=Sa([],[t.x,t.y,0,1],e);return new i(r[0]/r[3],r[1]/r[3])}var La=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ta);function Oa(t,e,r,n){var i=e.width,a=e.height;if(n){if(n.length!==i*a*r)throw new RangeError("mismatched image size")}else n=new Uint8Array(i*a*r);return t.width=i,t.height=a,t.data=n,t}function Da(t,e,r){var n=e.width,i=e.height;if(n!==t.width||i!==t.height){var a=Oa({},{width:n,height:i},r);Ua(t,a,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,n),height:Math.min(t.height,i)},r),t.width=n,t.height=i,t.data=a.data}}function Ua(t,e,r,n,i,a){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var o=t.data,s=e.data,u=0;u<i.height;u++)for(var l=((r.y+u)*t.width+r.x)*a,p=((n.y+u)*e.width+n.x)*a,c=0;c<i.width*a;c++)s[p+c]=o[l+c];return e}sn("HeatmapBucket",La,{omit:["layers"]});var ja=function(t,e){Oa(this,t,1,e)};ja.prototype.resize=function(t){Da(this,t,1)},ja.prototype.clone=function(){return new ja({width:this.width,height:this.height},new Uint8Array(this.data))},ja.copy=function(t,e,r,n,i){Ua(t,e,r,n,i,1)};var Ra=function(t,e){Oa(this,t,4,e)};Ra.prototype.resize=function(t){Da(this,t,4)},Ra.prototype.clone=function(){return new Ra({width:this.width,height:this.height},new Uint8Array(this.data))},Ra.copy=function(t,e,r,n,i){Ua(t,e,r,n,i,4)},sn("AlphaImage",ja),sn("RGBAImage",Ra);var qa={paint:new Dn({"heatmap-radius":new Tn(mt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Tn(mt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Mn(mt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new On(mt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Mn(mt.paint_heatmap["heatmap-opacity"])})};function Na(t,e){for(var r=new Uint8Array(1024),n={},i=0,a=0;i<256;i++,a+=4){n[e]=i/255;var o=t.evaluate(n);r[a+0]=Math.floor(255*o.r/o.a),r[a+1]=Math.floor(255*o.g/o.a),r[a+2]=Math.floor(255*o.b/o.a),r[a+3]=Math.floor(255*o.a)}return new Ra({width:256,height:1},r)}var Ka=function(t){function e(e){t.call(this,e,qa),this._updateColorRamp()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new La(t)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){var t=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=Na(t,"heatmapDensity"),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(Un),Ga={paint:new Dn({"hillshade-illumination-direction":new Mn(mt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Mn(mt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Mn(mt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Mn(mt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Mn(mt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Mn(mt.paint_hillshade["hillshade-accent-color"])})},Xa=function(t){function e(e){t.call(this,e,Ga)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(Un),Za=Nn([{name:"a_pos",components:2,type:"Int16"}],4),Ha=Za.members,Ya=(Za.size,Za.alignment,$a),Ja=$a;function $a(t,e,r){r=r||2;var n,i,a,o,s,u,l,p=e&&e.length,c=p?e[0]*r:t.length,h=Wa(t,0,c,r,!0),f=[];if(!h||h.next===h.prev)return f;if(p&&(h=function(t,e,r,n){var i,a,u,l=[];for(i=0,a=e.length;i<a;i++)(u=Wa(t,e[i]*n,i<a-1?e[i+1]*n:t.length,n,!1))===u.next&&(u.steiner=!0),l.push(uo(u));for(l.sort(ao),i=0;i<l.length;i++)oo(l[i],r),r=Qa(r,r.next);return r}(t,e,h,r)),t.length>80*r){n=a=t[0],i=o=t[1];for(var y=r;y<c;y+=r)(s=t[y])<n&&(n=s),(u=t[y+1])<i&&(i=u),s>a&&(a=s),u>o&&(o=u);l=0!==(l=Math.max(a-n,o-i))?1/l:0}return to(h,f,r,n,i,l),f}function Wa(t,e,r,n,i){var a,o;if(i===bo(t,e,r,n)>0)for(a=e;a<r;a+=n)o=vo(a,t[a],t[a+1],o);else for(a=r-n;a>=e;a-=n)o=vo(a,t[a],t[a+1],o);return o&&ho(o,o.next)&&(go(o),o=o.next),o}function Qa(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!ho(n,n.next)&&0!==co(n.prev,n,n.next))n=n.next;else{if(go(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function to(t,e,r,n,i,a,o){if(t){!o&&a&&function(t,e,r,n){var i=t;do{null===i.z&&(i.z=so(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,r,n,i,a,o,s,u,l=1;do{for(r=t,t=null,a=null,o=0;r;){for(o++,n=r,s=0,e=0;e<l&&(s++,n=n.nextZ);e++);for(u=l;s>0||u>0&&n;)0!==s&&(0===u||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,u--),a?a.nextZ=i:t=i,i.prevZ=a,a=i;r=n}a.nextZ=null,l*=2}while(o>1)}(i)}(t,n,i,a);for(var s,u,l=t;t.prev!==t.next;)if(s=t.prev,u=t.next,a?ro(t,n,i,a):eo(t))e.push(s.i/r),e.push(t.i/r),e.push(u.i/r),go(t),t=u.next,l=u.next;else if((t=u)===l){o?1===o?to(t=no(t,e,r),e,r,n,i,a,2):2===o&&io(t,e,r,n,i,a):to(Qa(t),e,r,n,i,a,1);break}}}function eo(t){var e=t.prev,r=t,n=t.next;if(co(e,r,n)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(lo(e.x,e.y,r.x,r.y,n.x,n.y,i.x,i.y)&&co(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function ro(t,e,r,n){var i=t.prev,a=t,o=t.next;if(co(i,a,o)>=0)return!1;for(var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,u=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,l=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,p=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,c=so(s,u,e,r,n),h=so(l,p,e,r,n),f=t.prevZ,y=t.nextZ;f&&f.z>=c&&y&&y.z<=h;){if(f!==t.prev&&f!==t.next&&lo(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&co(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,y!==t.prev&&y!==t.next&&lo(i.x,i.y,a.x,a.y,o.x,o.y,y.x,y.y)&&co(y.prev,y,y.next)>=0)return!1;y=y.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&lo(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&co(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;y&&y.z<=h;){if(y!==t.prev&&y!==t.next&&lo(i.x,i.y,a.x,a.y,o.x,o.y,y.x,y.y)&&co(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function no(t,e,r){var n=t;do{var i=n.prev,a=n.next.next;!ho(i,a)&&fo(i,n,n.next,a)&&yo(i,a)&&yo(a,i)&&(e.push(i.i/r),e.push(n.i/r),e.push(a.i/r),go(n),go(n.next),n=t=a),n=n.next}while(n!==t);return n}function io(t,e,r,n,i,a){var o=t;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&po(o,s)){var u=mo(o,s);return o=Qa(o,o.next),u=Qa(u,u.next),to(o,e,r,n,i,a),void to(u,e,r,n,i,a)}s=s.next}o=o.next}while(o!==t)}function ao(t,e){return t.x-e.x}function oo(t,e){if(e=function(t,e){var r,n=e,i=t.x,a=t.y,o=-1/0;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){var s=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>o){if(o=s,s===i){if(a===n.y)return n;if(a===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!r)return null;if(i===o)return r.prev;var u,l=r,p=r.x,c=r.y,h=1/0;for(n=r.next;n!==l;)i>=n.x&&n.x>=p&&i!==n.x&&lo(a<c?i:o,a,p,c,a<c?o:i,a,n.x,n.y)&&((u=Math.abs(a-n.y)/(i-n.x))<h||u===h&&n.x>r.x)&&yo(n,t)&&(r=n,h=u),n=n.next;return r}(t,e)){var r=mo(e,t);Qa(r,r.next)}}function so(t,e,r,n,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function uo(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function lo(t,e,r,n,i,a,o,s){return(i-o)*(e-s)-(t-o)*(a-s)>=0&&(t-o)*(n-s)-(r-o)*(e-s)>=0&&(r-o)*(a-s)-(i-o)*(n-s)>=0}function po(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&fo(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&yo(t,e)&&yo(e,t)&&function(t,e){var r=t,n=!1,i=(t.x+e.x)/2,a=(t.y+e.y)/2;do{r.y>a!=r.next.y>a&&r.next.y!==r.y&&i<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}(t,e)}function co(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function ho(t,e){return t.x===e.x&&t.y===e.y}function fo(t,e,r,n){return!!(ho(t,e)&&ho(r,n)||ho(t,n)&&ho(r,e))||co(t,e,r)>0!=co(t,e,n)>0&&co(r,n,t)>0!=co(r,n,e)>0}function yo(t,e){return co(t.prev,t,t.next)<0?co(t,e,t.next)>=0&&co(t,t.prev,e)>=0:co(t,e,t.prev)<0||co(t,t.next,e)<0}function mo(t,e){var r=new xo(t.i,t.x,t.y),n=new xo(e.i,e.x,e.y),i=t.next,a=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,a.next=n,n.prev=a,n}function vo(t,e,r,n){var i=new xo(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function go(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function xo(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function bo(t,e,r,n){for(var i=0,a=e,o=r-n;a<r;a+=n)i+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return i}function _o(t,e,r,n,i){!function t(e,r,n,i,a){for(;i>n;){if(i-n>600){var o=i-n+1,s=r-n+1,u=Math.log(o),l=.5*Math.exp(2*u/3),p=.5*Math.sqrt(u*l*(o-l)/o)*(s-o/2<0?-1:1);t(e,r,Math.max(n,Math.floor(r-s*l/o+p)),Math.min(i,Math.floor(r+(o-s)*l/o+p)),a)}var f=e[r],y=n,d=i;for(wo(e,n,r),a(e[i],f)>0&&wo(e,n,i);y<d;){for(wo(e,y,d),y++,d--;a(e[y],f)<0;)y++;for(;a(e[d],f)>0;)d--}0===a(e[n],f)?wo(e,n,d):wo(e,++d,i),d<=r&&(n=d+1),r<=d&&(i=d-1)}}(t,e,r||0,n||t.length-1,i||Ao)}function wo(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function Ao(t,e){return t<e?-1:t>e?1:0}function So(t,e){var r=t.length;if(r<=1)return[t];for(var n,i,a=[],o=0;o<r;o++){var s=S(t[o]);0!==s&&(t[o].area=Math.abs(s),void 0===i&&(i=s<0),i===s<0?(n&&a.push(n),n=[t[o]]):n.push(t[o]))}if(n&&a.push(n),e>1)for(var u=0;u<a.length;u++)a[u].length<=e||(_o(a[u],e,1,a[u].length-1,ko),a[u]=a[u].slice(0,e));return a}function ko(t,e){return e.area-t.area}function zo(t,e,r){for(var n=r.patternDependencies,i=!1,a=0,o=e;a<o.length;a+=1){var s=o[a].paint.get(t+"-pattern");s.isConstant()||(i=!0);var u=s.constantOr(null);u&&(i=!0,n[u.to]=!0,n[u.from]=!0)}return i}function Io(t,e,r,n,i){for(var a=i.patternDependencies,o=0,s=e;o<s.length;o+=1){var u=s[o],l=u.paint.get(t+"-pattern").value;if("constant"!==l.kind){var p=l.evaluate({zoom:n-1},r,{}),c=l.evaluate({zoom:n},r,{}),h=l.evaluate({zoom:n+1},r,{});a[p]=!0,a[c]=!0,a[h]=!0,r.patterns[u.id]={min:p,mid:c,max:h}}}return r}$a.deviation=function(t,e,r,n){var i=e&&e.length,a=i?e[0]*r:t.length,o=Math.abs(bo(t,0,a,r));if(i)for(var s=0,u=e.length;s<u;s++){var l=e[s]*r,p=s<u-1?e[s+1]*r:t.length;o-=Math.abs(bo(t,l,p,r))}var c=0;for(s=0;s<n.length;s+=3){var h=n[s]*r,f=n[s+1]*r,y=n[s+2]*r;c+=Math.abs((t[h]-t[y])*(t[f+1]-t[h+1])-(t[h]-t[f])*(t[y+1]-t[h+1]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},$a.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var a=0;a<t[i].length;a++)for(var o=0;o<e;o++)r.vertices.push(t[i][a][o]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r},Ya.default=Ja;var Bo=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Gn,this.indexArray=new si,this.indexArray2=new ui,this.programConfigurations=new Xi(Ha,t.layers,t.zoom),this.segments=new zi,this.segments2=new zi,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};Bo.prototype.populate=function(t,e){this.features=[],this.hasPattern=zo("fill",this.layers,e);for(var r=0,n=t;r<n.length;r+=1){var i=n[r],a=i.feature,o=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new Sn(this.zoom),a)){var u=Wi(a),l={sourceLayerIndex:s,index:o,geometry:u,properties:a.properties,type:a.type,patterns:{}};void 0!==a.id&&(l.id=a.id),this.hasPattern?this.features.push(Io("fill",this.layers,l,this.zoom,e)):this.addFeature(l,u,o,{}),e.featureIndex.insert(a,u,o,s,this.index)}}},Bo.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},Bo.prototype.addFeatures=function(t,e){for(var r=0,n=this.features;r<n.length;r+=1){var i=n[r],a=i.geometry;this.addFeature(i,a,i.index,e)}},Bo.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Bo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Bo.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ha),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},Bo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Bo.prototype.addFeature=function(t,e,r,n){for(var i=0,a=So(e,500);i<a.length;i+=1){for(var o=a[i],s=0,u=0,l=o;u<l.length;u+=1)s+=l[u].length;for(var p=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray),c=p.vertexLength,h=[],f=[],y=0,d=o;y<d.length;y+=1){var m=d[y];if(0!==m.length){m!==o[0]&&f.push(h.length/2);var v=this.segments2.prepareSegment(m.length,this.layoutVertexArray,this.indexArray2),g=v.vertexLength;this.layoutVertexArray.emplaceBack(m[0].x,m[0].y),this.indexArray2.emplaceBack(g+m.length-1,g),h.push(m[0].x),h.push(m[0].y);for(var x=1;x<m.length;x++)this.layoutVertexArray.emplaceBack(m[x].x,m[x].y),this.indexArray2.emplaceBack(g+x-1,g+x),h.push(m[x].x),h.push(m[x].y);v.vertexLength+=m.length,v.primitiveLength+=m.length}}for(var b=Ya(h,f),_=0;_<b.length;_+=3)this.indexArray.emplaceBack(c+b[_],c+b[_+1],c+b[_+2]);p.vertexLength+=s,p.primitiveLength+=b.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,n)},sn("FillBucket",Bo,{omit:["layers","features"]});var Eo={paint:new Dn({"fill-antialias":new Mn(mt.paint_fill["fill-antialias"]),"fill-opacity":new Tn(mt.paint_fill["fill-opacity"]),"fill-color":new Tn(mt.paint_fill["fill-color"]),"fill-outline-color":new Tn(mt.paint_fill["fill-outline-color"]),"fill-translate":new Mn(mt.paint_fill["fill-translate"]),"fill-translate-anchor":new Mn(mt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Fn(mt.paint_fill["fill-pattern"])})},Po=function(t){function e(e){t.call(this,e,Eo)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e);var r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new Bo(t)},e.prototype.queryRadius=function(){return fa(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,n,i,a,o){return na(ya(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),a.angle,o),n)},e}(Un),Vo=Nn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Co=Vo.members,Mo=(Vo.size,Vo.alignment,Math.pow(2,13));function To(t,e,r,n,i,a,o,s){t.emplaceBack(e,r,2*Math.floor(n*Mo)+o,i*Mo*2,a*Mo*2,Math.round(s))}var Fo=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Zn,this.indexArray=new si,this.programConfigurations=new Xi(Co,t.layers,t.zoom),this.segments=new zi,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function Lo(t,e){return t.x===e.x&&(t.x<0||t.x>Yi)||t.y===e.y&&(t.y<0||t.y>Yi)}function Oo(t){return t.every(function(t){return t.x<0})||t.every(function(t){return t.x>Yi})||t.every(function(t){return t.y<0})||t.every(function(t){return t.y>Yi})}Fo.prototype.populate=function(t,e){this.features=[],this.hasPattern=zo("fill-extrusion",this.layers,e);for(var r=0,n=t;r<n.length;r+=1){var i=n[r],a=i.feature,o=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new Sn(this.zoom),a)){var u=Wi(a),l={sourceLayerIndex:s,index:o,geometry:u,properties:a.properties,type:a.type,patterns:{}};void 0!==a.id&&(l.id=a.id),this.hasPattern?this.features.push(Io("fill-extrusion",this.layers,l,this.zoom,e)):this.addFeature(l,u,o,{}),e.featureIndex.insert(a,u,o,s,this.index,!0)}}},Fo.prototype.addFeatures=function(t,e){for(var r=0,n=this.features;r<n.length;r+=1){var i=n[r],a=i.geometry;this.addFeature(i,a,i.index,e)}},Fo.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},Fo.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Fo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Fo.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Co),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Fo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Fo.prototype.addFeature=function(t,e,r,n){for(var i=0,a=So(e,500);i<a.length;i+=1){for(var o=a[i],s=0,u=0,l=o;u<l.length;u+=1)s+=l[u].length;for(var p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),c=0,h=o;c<h.length;c+=1){var f=h[c];if(0!==f.length&&!Oo(f))for(var y=0,d=0;d<f.length;d++){var m=f[d];if(d>=1){var v=f[d-1];if(!Lo(m,v)){p.vertexLength+4>zi.MAX_VERTEX_ARRAY_LENGTH&&(p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var g=m.sub(v)._perp()._unit(),x=v.dist(m);y+x>32768&&(y=0),To(this.layoutVertexArray,m.x,m.y,g.x,g.y,0,0,y),To(this.layoutVertexArray,m.x,m.y,g.x,g.y,0,1,y),y+=x,To(this.layoutVertexArray,v.x,v.y,g.x,g.y,0,0,y),To(this.layoutVertexArray,v.x,v.y,g.x,g.y,0,1,y);var b=p.vertexLength;this.indexArray.emplaceBack(b,b+2,b+1),this.indexArray.emplaceBack(b+1,b+2,b+3),p.vertexLength+=4,p.primitiveLength+=2}}}}p.vertexLength+s>zi.MAX_VERTEX_ARRAY_LENGTH&&(p=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray));for(var _=[],w=[],A=p.vertexLength,S=0,k=o;S<k.length;S+=1){var z=k[S];if(0!==z.length){z!==o[0]&&w.push(_.length/2);for(var I=0;I<z.length;I++){var B=z[I];To(this.layoutVertexArray,B.x,B.y,0,0,1,1,0),_.push(B.x),_.push(B.y)}}}for(var E=Ya(_,w),P=0;P<E.length;P+=3)this.indexArray.emplaceBack(A+E[P],A+E[P+2],A+E[P+1]);p.primitiveLength+=E.length/3,p.vertexLength+=s}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,n)},sn("FillExtrusionBucket",Fo,{omit:["layers","features"]});var Do={paint:new Dn({"fill-extrusion-opacity":new Mn(mt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Tn(mt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Mn(mt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Mn(mt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Fn(mt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Tn(mt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Tn(mt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Mn(mt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Uo=function(t){function e(e){t.call(this,e,Do)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new Fo(t)},e.prototype.queryRadius=function(){return fa(this.paint.get("fill-extrusion-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,n,a,o,s,u){var l=ya(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,s),p=this.paint.get("fill-extrusion-height").evaluate(e,r),c=this.paint.get("fill-extrusion-base").evaluate(e,r),h=function(t,e,r,n){for(var a=[],o=0,s=t;o<s.length;o+=1){var u=s[o],l=[u.x,u.y,0,1];Sa(l,l,e),a.push(new i(l[0]/l[3],l[1]/l[3]))}return a}(l,u),f=function(t,e,r,n){for(var a=[],o=[],s=n[8]*e,u=n[9]*e,l=n[10]*e,p=n[11]*e,c=n[8]*r,h=n[9]*r,f=n[10]*r,y=n[11]*r,d=0,m=t;d<m.length;d+=1){for(var g=[],x=[],b=0,_=m[d];b<_.length;b+=1){var w=_[b],A=w.x,S=w.y,k=n[0]*A+n[4]*S+n[12],z=n[1]*A+n[5]*S+n[13],I=n[2]*A+n[6]*S+n[14],B=n[3]*A+n[7]*S+n[15],V=I+l,C=B+p,M=k+c,T=z+h,F=I+f,L=B+y,O=new i((k+s)/C,(z+u)/C);O.z=V/C,g.push(O);var D=new i(M/L,T/L);D.z=F/L,x.push(D)}a.push(g),o.push(x)}return[a,o]}(n,c,p,u);return function(t,e,r){var n=1/0;na(r,e)&&(n=Ro(r,e[0]));for(var i=0;i<e.length;i++)for(var a=e[i],o=t[i],s=0;s<a.length-1;s++){var u=a[s],l=a[s+1],p=o[s],h=[u,l,o[s+1],p,u];ea(r,h)&&(n=Math.min(n,Ro(r,h)))}return n!==1/0&&n}(f[0],f[1],h)},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("fill-extrusion-opacity")&&"none"!==this.visibility},e.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},e}(Un);function jo(t,e){return t.x*e.x+t.y*e.y}function Ro(t,e){if(1===t.length){var r=e[0],n=e[1],i=e[3],a=t[0],o=n.sub(r),s=i.sub(r),u=a.sub(r),l=jo(o,o),p=jo(o,s),c=jo(s,s),h=jo(u,o),f=jo(u,s),y=l*c-p*p,d=(c*h-p*f)/y,m=(l*f-p*h)/y,v=1-d-m;return r.z*v+n.z*d+i.z*m}for(var g=1/0,x=0,b=e;x<b.length;x+=1){var _=b[x];g=Math.min(g,_.z)}return g}var qo=Nn([{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),No=qo.members,Ko=(qo.size,qo.alignment,Go);function Go(t,e,r,n,i){this.properties={},this.extent=r,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=i,t.readFields(Xo,this,e)}function Xo(t,e,r){1==t?e.id=r.readVarint():2==t?function(t,e){for(var r=t.readVarint()+t.pos;t.pos<r;){var n=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[n]=i}}(r,e):3==t?e.type=r.readVarint():4==t&&(e._geometry=r.pos)}function Zo(t){for(var e,r,n=0,i=0,a=t.length,o=a-1;i<a;o=i++)e=t[i],n+=((r=t[o]).x-e.x)*(e.y+r.y);return n}Go.types=["Unknown","Point","LineString","Polygon"],Go.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,r=t.readVarint()+t.pos,n=1,a=0,o=0,s=0,u=[];t.pos<r;){if(a<=0){var l=t.readVarint();n=7&l,a=l>>3}if(a--,1===n||2===n)o+=t.readSVarint(),s+=t.readSVarint(),1===n&&(e&&u.push(e),e=[]),e.push(new i(o,s));else{if(7!==n)throw new Error("unknown command "+n);e&&e.push(e[0].clone())}}return e&&u.push(e),u},Go.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,r=1,n=0,i=0,a=0,o=1/0,s=-1/0,u=1/0,l=-1/0;t.pos<e;){if(n<=0){var p=t.readVarint();r=7&p,n=p>>3}if(n--,1===r||2===r)(i+=t.readSVarint())<o&&(o=i),i>s&&(s=i),(a+=t.readSVarint())<u&&(u=a),a>l&&(l=a);else if(7!==r)throw new Error("unknown command "+r)}return[o,u,s,l]},Go.prototype.toGeoJSON=function(t,e,r){var n,i,a=this.extent*Math.pow(2,r),o=this.extent*t,s=this.extent*e,u=this.loadGeometry(),l=Go.types[this.type];function p(t){for(var e=0;e<t.length;e++){var r=t[e],n=180-360*(r.y+s)/a;t[e]=[360*(r.x+o)/a-180,360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90]}}switch(this.type){case 1:var c=[];for(n=0;n<u.length;n++)c[n]=u[n][0];p(u=c);break;case 2:for(n=0;n<u.length;n++)p(u[n]);break;case 3:for(u=function(t){var e=t.length;if(e<=1)return[t];for(var r,n,i=[],a=0;a<e;a++){var o=Zo(t[a]);0!==o&&(void 0===n&&(n=o<0),n===o<0?(r&&i.push(r),r=[t[a]]):r.push(t[a]))}return r&&i.push(r),i}(u),n=0;n<u.length;n++)for(i=0;i<u[n].length;i++)p(u[n][i])}1===u.length?u=u[0]:l="Multi"+l;var h={type:"Feature",geometry:{type:l,coordinates:u},properties:this.properties};return"id"in this&&(h.id=this.id),h};var Ho=Yo;function Yo(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Jo,this,e),this.length=this._features.length}function Jo(t,e,r){15===t?e.version=r.readVarint():1===t?e.name=r.readString():5===t?e.extent=r.readVarint():2===t?e._features.push(r.pos):3===t?e._keys.push(r.readString()):4===t&&e._values.push(function(t){for(var e=null,r=t.readVarint()+t.pos;t.pos<r;){var n=t.readVarint()>>3;e=1===n?t.readString():2===n?t.readFloat():3===n?t.readDouble():4===n?t.readVarint64():5===n?t.readVarint():6===n?t.readSVarint():7===n?t.readBoolean():null}return e}(r))}function $o(t,e,r){if(3===t){var n=new Ho(r,r.readVarint()+r.pos);n.length&&(e[n.name]=n)}}Yo.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new Ko(this._pbf,e,this.extent,this._keys,this._values)};var Wo={VectorTile:function(t,e){this.layers=t.readFields($o,{},e)},VectorTileFeature:Ko,VectorTileLayer:Ho},Qo=Wo.VectorTileFeature.types,ts=63,es=Math.cos(Math.PI/180*37.5),rs=.5,ns=Math.pow(2,14)/rs;function is(t,e,r,n,i,a,o){t.emplaceBack(e.x,e.y,n?1:0,i?1:-1,Math.round(ts*r.x)+128,Math.round(ts*r.y)+128,1+(0===a?0:a<0?-1:1)|(o*rs&63)<<2,o*rs>>6)}var as=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.features=[],this.hasPattern=!1,this.layoutVertexArray=new Hn,this.indexArray=new si,this.programConfigurations=new Xi(No,t.layers,t.zoom),this.segments=new zi,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function os(t,e){return(t/e.tileTotal*(e.end-e.start)+e.start)*(ns-1)}as.prototype.populate=function(t,e){this.features=[],this.hasPattern=zo("line",this.layers,e);for(var r=0,n=t;r<n.length;r+=1){var i=n[r],a=i.feature,o=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new Sn(this.zoom),a)){var u=Wi(a),l={sourceLayerIndex:s,index:o,geometry:u,properties:a.properties,type:a.type,patterns:{}};void 0!==a.id&&(l.id=a.id),this.hasPattern?this.features.push(Io("line",this.layers,l,this.zoom,e)):this.addFeature(l,u,o,{}),e.featureIndex.insert(a,u,o,s,this.index)}}},as.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},as.prototype.addFeatures=function(t,e){for(var r=0,n=this.features;r<n.length;r+=1){var i=n[r],a=i.geometry;this.addFeature(i,a,i.index,e)}},as.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},as.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},as.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,No),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},as.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},as.prototype.addFeature=function(t,e,r,n){for(var i=this.layers[0].layout,a=i.get("line-join").evaluate(t,{}),o=i.get("line-cap"),s=i.get("line-miter-limit"),u=i.get("line-round-limit"),l=0,p=e;l<p.length;l+=1){var c=p[l];this.addLine(c,t,a,o,s,u,r,n)}},as.prototype.addLine=function(t,e,r,n,i,a,o,s){var u=null;e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end")&&(u={start:e.properties.mapbox_clip_start,end:e.properties.mapbox_clip_end,tileTotal:void 0});for(var l="Polygon"===Qo[e.type],p=t.length;p>=2&&t[p-1].equals(t[p-2]);)p--;for(var c=0;c<p-1&&t[c].equals(t[c+1]);)c++;if(!(p<(l?3:2))){u&&(u.tileTotal=function(t,e,r){for(var n,i,a=0,o=c;o<r-1;o++)n=t[o],i=t[o+1],a+=n.dist(i);return a}(t,0,p)),"bevel"===r&&(i=1.05);var h=Yi/(512*this.overscaling)*15,f=t[c],y=this.segments.prepareSegment(10*p,this.layoutVertexArray,this.indexArray);this.distance=0;var d,m,v,g=n,x=l?"butt":n,b=!0,_=void 0,w=void 0,A=void 0,S=void 0;this.e1=this.e2=this.e3=-1,l&&(d=t[p-2],S=f.sub(d)._unit()._perp());for(var k=c;k<p;k++)if(!(w=l&&k===p-1?t[c+1]:t[k+1])||!t[k].equals(w)){S&&(A=S),d&&(_=d),d=t[k],S=w?w.sub(d)._unit()._perp():A;var z=(A=A||S).add(S);0===z.x&&0===z.y||z._unit();var I=z.x*S.x+z.y*S.y,B=0!==I?1/I:1/0,E=I<es&&_&&w;if(E&&k>c){var P=d.dist(_);if(P>2*h){var V=d.sub(d.sub(_)._mult(h/P)._round());this.distance+=V.dist(_),this.addCurrentVertex(V,this.distance,A.mult(1),0,0,!1,y,u),_=V}}var C=_&&w,M=C?r:w?g:x;if(C&&"round"===M&&(B<a?M="miter":B<=2&&(M="fakeround")),"miter"===M&&B>i&&(M="bevel"),"bevel"===M&&(B>2&&(M="flipbevel"),B<i&&(M="miter")),_&&(this.distance+=d.dist(_)),"miter"===M)z._mult(B),this.addCurrentVertex(d,this.distance,z,0,0,!1,y,u);else if("flipbevel"===M){if(B>100)z=S.clone().mult(-1);else{var T=A.x*S.y-A.y*S.x>0?-1:1,F=B*A.add(S).mag()/A.sub(S).mag();z._perp()._mult(F*T)}this.addCurrentVertex(d,this.distance,z,0,0,!1,y,u),this.addCurrentVertex(d,this.distance,z.mult(-1),0,0,!1,y,u)}else if("bevel"===M||"fakeround"===M){var L=A.x*S.y-A.y*S.x>0,O=-Math.sqrt(B*B-1);if(L?(v=0,m=O):(m=0,v=O),b||this.addCurrentVertex(d,this.distance,A,m,v,!1,y,u),"fakeround"===M){for(var D=Math.floor(8*(.5-(I-.5))),U=void 0,j=0;j<D;j++)U=S.mult((j+1)/(D+1))._add(A)._unit(),this.addPieSliceVertex(d,this.distance,U,L,y,u);this.addPieSliceVertex(d,this.distance,z,L,y,u);for(var R=D-1;R>=0;R--)U=A.mult((R+1)/(D+1))._add(S)._unit(),this.addPieSliceVertex(d,this.distance,U,L,y,u)}w&&this.addCurrentVertex(d,this.distance,S,-m,-v,!1,y,u)}else"butt"===M?(b||this.addCurrentVertex(d,this.distance,A,0,0,!1,y,u),w&&this.addCurrentVertex(d,this.distance,S,0,0,!1,y,u)):"square"===M?(b||(this.addCurrentVertex(d,this.distance,A,1,1,!1,y,u),this.e1=this.e2=-1),w&&this.addCurrentVertex(d,this.distance,S,-1,-1,!1,y,u)):"round"===M&&(b||(this.addCurrentVertex(d,this.distance,A,0,0,!1,y,u),this.addCurrentVertex(d,this.distance,A,1,1,!0,y,u),this.e1=this.e2=-1),w&&(this.addCurrentVertex(d,this.distance,S,-1,-1,!0,y,u),this.addCurrentVertex(d,this.distance,S,0,0,!1,y,u)));if(E&&k<p-1){var q=d.dist(w);if(q>2*h){var N=d.add(w.sub(d)._mult(h/q)._round());this.distance+=N.dist(d),this.addCurrentVertex(N,this.distance,S.mult(1),0,0,!1,y,u),d=N}}b=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,o,s)}},as.prototype.addCurrentVertex=function(t,e,r,n,i,a,o,s){var u,l=this.layoutVertexArray,p=this.indexArray;s&&(e=os(e,s)),u=r.clone(),n&&u._sub(r.perp()._mult(n)),is(l,t,u,a,!1,n,e),this.e3=o.vertexLength++,this.e1>=0&&this.e2>=0&&(p.emplaceBack(this.e1,this.e2,this.e3),o.primitiveLength++),this.e1=this.e2,this.e2=this.e3,u=r.mult(-1),i&&u._sub(r.perp()._mult(i)),is(l,t,u,a,!0,-i,e),this.e3=o.vertexLength++,this.e1>=0&&this.e2>=0&&(p.emplaceBack(this.e1,this.e2,this.e3),o.primitiveLength++),this.e1=this.e2,this.e2=this.e3,e>ns/2&&!s&&(this.distance=0,this.addCurrentVertex(t,this.distance,r,n,i,a,o))},as.prototype.addPieSliceVertex=function(t,e,r,n,i,a){r=r.mult(n?-1:1);var o=this.layoutVertexArray,s=this.indexArray;a&&(e=os(e,a)),is(o,t,r,!1,n,0,e),this.e3=i.vertexLength++,this.e1>=0&&this.e2>=0&&(s.emplaceBack(this.e1,this.e2,this.e3),i.primitiveLength++),n?this.e2=this.e3:this.e1=this.e3},sn("LineBucket",as,{omit:["layers","features"]});var ss=new Dn({"line-cap":new Mn(mt.layout_line["line-cap"]),"line-join":new Tn(mt.layout_line["line-join"]),"line-miter-limit":new Mn(mt.layout_line["line-miter-limit"]),"line-round-limit":new Mn(mt.layout_line["line-round-limit"])}),us={paint:new Dn({"line-opacity":new Tn(mt.paint_line["line-opacity"]),"line-color":new Tn(mt.paint_line["line-color"]),"line-translate":new Mn(mt.paint_line["line-translate"]),"line-translate-anchor":new Mn(mt.paint_line["line-translate-anchor"]),"line-width":new Tn(mt.paint_line["line-width"]),"line-gap-width":new Tn(mt.paint_line["line-gap-width"]),"line-offset":new Tn(mt.paint_line["line-offset"]),"line-blur":new Tn(mt.paint_line["line-blur"]),"line-dasharray":new Ln(mt.paint_line["line-dasharray"]),"line-pattern":new Fn(mt.paint_line["line-pattern"]),"line-gradient":new On(mt.paint_line["line-gradient"])}),layout:ss},ls=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.possiblyEvaluate=function(e,r){return r=new Sn(Math.floor(r.zoom),{now:r.now,fadeDuration:r.fadeDuration,zoomHistory:r.zoomHistory,transition:r.transition}),t.prototype.possiblyEvaluate.call(this,e,r)},e.prototype.evaluate=function(e,r,n,i){return r=c({},r,{zoom:Math.floor(r.zoom)}),t.prototype.evaluate.call(this,e,r,n,i)},e}(Tn))(us.paint.properties["line-width"].specification);ls.useIntegerZoom=!0;var ps=function(t){function e(e){t.call(this,e,us)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&this._updateGradient()},e.prototype._updateGradient=function(){var t=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=Na(t,"lineProgress"),this.gradientTexture=null},e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),this.paint._values["line-floorwidth"]=ls.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new as(t)},e.prototype.queryRadius=function(t){var e=t,r=cs(ha("line-width",this,e),ha("line-gap-width",this,e)),n=ha("line-offset",this,e);return r/2+Math.abs(n)+fa(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,n,a,o,s){var u=ya(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,s),l=s/2*cs(this.paint.get("line-width").evaluate(e,r),this.paint.get("line-gap-width").evaluate(e,r)),p=this.paint.get("line-offset").evaluate(e,r);return p&&(n=function(t,e){for(var r=[],n=new i(0,0),a=0;a<t.length;a++){for(var o=t[a],s=[],u=0;u<o.length;u++){var l=o[u-1],p=o[u],c=o[u+1],h=0===u?n:p.sub(l)._unit()._perp(),f=u===o.length-1?n:c.sub(p)._unit()._perp(),y=h._add(f)._unit(),d=y.x*f.x+y.y*f.y;y._mult(1/d),s.push(y._mult(e)._add(p))}r.push(s)}return r}(n,p*s)),function(t,e,r){for(var n=0;n<e.length;n++){var i=e[n];if(t.length>=3)for(var a=0;a<i.length;a++)if(pa(t,i[a]))return!0;if(ia(t,i,r))return!0}return!1}(u,n,l)},e}(Un);function cs(t,e){return e>0?e+2*t:t}var hs=Nn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),fs=Nn([{name:"a_projected_pos",components:3,type:"Float32"}],4),ys=(Nn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Nn([{name:"a_placed",components:2,type:"Uint8"}],4)),ds=(Nn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),Nn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),ms=Nn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);function vs(t,e,r){return t.sections.forEach(function(t){t.text=function(t,e,r){var n=e.layout.get("text-transform").evaluate(r,{});return"uppercase"===n?t=t.toLocaleUpperCase():"lowercase"===n&&(t=t.toLocaleLowerCase()),An.applyArabicShaping&&(t=An.applyArabicShaping(t)),t}(t.text,e,r)}),t}Nn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"hidden"}]),Nn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"horizontalPlacedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint32",name:"crossTileID"}]),Nn([{type:"Float32",name:"offsetX"}]),Nn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var gs={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},xs=function(t){function e(e,r,n,i){t.call(this,e,r),this.angle=n,void 0!==i&&(this.segment=i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(i);function _s(t,e){var r=e.expression;if("constant"===r.kind)return{functionType:"constant",layoutSize:r.evaluate(new Sn(t+1))};if("source"===r.kind)return{functionType:"source"};for(var n=r.zoomStops,i=0;i<n.length&&n[i]<=t;)i++;for(var a=i=Math.max(0,i-1);a<n.length&&n[a]<t+1;)a++;a=Math.min(n.length-1,a);var o={min:n[i],max:n[a]};return"composite"===r.kind?{functionType:"composite",zoomRange:o,propertyValue:e.value}:{functionType:"camera",layoutSize:r.evaluate(new Sn(t+1)),zoomRange:o,sizeRange:{min:r.evaluate(new Sn(o.min)),max:r.evaluate(new Sn(o.max))},propertyValue:e.value}}sn("Anchor",xs);var ws=Wo.VectorTileFeature.types,As=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ss(t,e,r,n,i,a,o,s){t.emplaceBack(e,r,Math.round(32*n),Math.round(32*i),a,o,s?s[0]:0,s?s[1]:0)}function ks(t,e,r){t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r)}var zs=function(t){this.layoutVertexArray=new Jn,this.indexArray=new si,this.programConfigurations=t,this.segments=new zi,this.dynamicLayoutVertexArray=new $n,this.opacityVertexArray=new Wn,this.placedSymbolArray=new di};zs.prototype.upload=function(t,e,r,n){r&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,hs.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,fs.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,As,!0),this.opacityVertexBuffer.itemSize=1),(r||n)&&this.programConfigurations.upload(t)},zs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},sn("SymbolBuffers",zs);var Is=function(t,e,r){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new r,this.segments=new zi,this.collisionVertexArray=new ei};Is.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,ys.members,!0)},Is.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},sn("CollisionBuffers",Is);var Bs=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1;var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=_s(this.zoom,e["text-size"]),this.iconSizeData=_s(this.zoom,e["icon-size"]);var r=this.layers[0].layout,n=r.get("symbol-sort-key"),i=r.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==i&&void 0!==n.constantOr(1);var a="viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey;this.sortFeaturesByY=a&&(r.get("text-allow-overlap")||r.get("icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement")),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id}),this.sourceID=t.sourceID};Bs.prototype.createArrays=function(){this.text=new zs(new Xi(hs.members,this.layers,this.zoom,function(t){return/^text/.test(t)})),this.icon=new zs(new Xi(hs.members,this.layers,this.zoom,function(t){return/^icon/.test(t)})),this.collisionBox=new Is(ti,ds.members,ui),this.collisionCircle=new Is(ti,ms.members,si),this.glyphOffsetArray=new xi,this.lineVertexArray=new _i,this.symbolInstances=new vi},Bs.prototype.calculateGlyphDependencies=function(t,e,r,n){for(var i=0;i<t.length;i++)if(e[t.charCodeAt(i)]=!0,r&&n){var a=gs[t.charAt(i)];a&&(e[a.charCodeAt(0)]=!0)}},Bs.prototype.populate=function(t,e){var r=this.layers[0],n=r.layout,i=n.get("text-font"),a=n.get("text-field"),o=n.get("icon-image"),s=("constant"!==a.value.kind||a.value.value.toString().length>0)&&("constant"!==i.value.kind||i.value.value.length>0),u="constant"!==o.value.kind||o.value.value&&o.value.value.length>0,l=n.get("symbol-sort-key");if(this.features=[],s||u){for(var p=e.iconDependencies,c=e.glyphDependencies,h=new Sn(this.zoom),f=0,y=t;f<y.length;f+=1){var d=y[f],m=d.feature,v=d.index,g=d.sourceLayerIndex;if(r._featureFilter(h,m)){var x=void 0;if(s){var b=r.getValueAndResolveTokens("text-field",m);x=vs(b instanceof Rt?b:Rt.fromString(b),r,m)}var _=void 0;if(u&&(_=r.getValueAndResolveTokens("icon-image",m)),x||_){var w=this.sortFeaturesByKey?l.evaluate(m,{}):void 0,A={text:x,icon:_,index:v,sourceLayerIndex:g,geometry:Wi(m),properties:m.properties,type:ws[m.type],sortKey:w};if(void 0!==m.id&&(A.id=m.id),this.features.push(A),_&&(p[_]=!0),x)for(var S=i.evaluate(m,{}).join(","),k="map"===n.get("text-rotation-alignment")&&"point"!==n.get("symbol-placement"),z=0,I=x.sections;z<I.length;z+=1){var B=I[z],E=fn(x.toString()),P=B.fontStack||S,V=c[P]=c[P]||{};this.calculateGlyphDependencies(B.text,V,k,E)}}}}"line"===n.get("symbol-placement")&&(this.features=function(t){var e={},r={},n=[],i=0;function a(e){n.push(t[e]),i++}function o(t,e,i){var a=r[t];return delete r[t],r[e]=a,n[a].geometry[0].pop(),n[a].geometry[0]=n[a].geometry[0].concat(i[0]),a}function s(t,r,i){var a=e[r];return delete e[r],e[t]=a,n[a].geometry[0].shift(),n[a].geometry[0]=i[0].concat(n[a].geometry[0]),a}function u(t,e,r){var n=r?e[0][e[0].length-1]:e[0][0];return t+":"+n.x+":"+n.y}for(var l=0;l<t.length;l++){var p=t[l],c=p.geometry,h=p.text?p.text.toString():null;if(h){var f=u(h,c),y=u(h,c,!0);if(f in r&&y in e&&r[f]!==e[y]){var d=s(f,y,c),m=o(f,y,n[d].geometry);delete e[f],delete r[y],r[u(h,n[m].geometry,!0)]=m,n[d].geometry=null}else f in r?o(f,y,c):y in e?s(f,y,c):(a(l),e[f]=i-1,r[y]=i-1)}else a(l)}return n.filter(function(t){return t.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(t,e){return t.sortKey-e.sortKey})}},Bs.prototype.update=function(t,e,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,r),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,r))},Bs.prototype.isEmpty=function(){return 0===this.symbolInstances.length},Bs.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Bs.prototype.upload=function(t){this.uploaded||(this.collisionBox.upload(t),this.collisionCircle.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Bs.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.collisionBox.destroy(),this.collisionCircle.destroy()},Bs.prototype.addToLineVertexArray=function(t,e){var r=this.lineVertexArray.length;if(void 0!==t.segment){for(var n=t.dist(e[t.segment+1]),i=t.dist(e[t.segment]),a={},o=t.segment+1;o<e.length;o++)a[o]={x:e[o].x,y:e[o].y,tileUnitDistanceFromAnchor:n},o<e.length-1&&(n+=e[o+1].dist(e[o]));for(var s=t.segment||0;s>=0;s--)a[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:i},s>0&&(i+=e[s-1].dist(e[s]));for(var u=0;u<e.length;u++){var l=a[u];this.lineVertexArray.emplaceBack(l.x,l.y,l.tileUnitDistanceFromAnchor)}}return{lineStartIndex:r,lineLength:this.lineVertexArray.length-r}},Bs.prototype.addSymbols=function(t,e,r,n,i,a,o,s,u,l){for(var p=t.indexArray,c=t.layoutVertexArray,h=t.dynamicLayoutVertexArray,f=t.segments.prepareSegment(4*e.length,t.layoutVertexArray,t.indexArray,a.sortKey),y=this.glyphOffsetArray.length,d=f.vertexLength,m=0,v=e;m<v.length;m+=1){var g=v[m],x=g.tl,b=g.tr,_=g.bl,w=g.br,A=g.tex,S=f.vertexLength,k=g.glyphOffset[1];Ss(c,s.x,s.y,x.x,k+x.y,A.x,A.y,r),Ss(c,s.x,s.y,b.x,k+b.y,A.x+A.w,A.y,r),Ss(c,s.x,s.y,_.x,k+_.y,A.x,A.y+A.h,r),Ss(c,s.x,s.y,w.x,k+w.y,A.x+A.w,A.y+A.h,r),ks(h,s,0),p.emplaceBack(S,S+1,S+2),p.emplaceBack(S+1,S+2,S+3),f.vertexLength+=4,f.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(g.glyphOffset[0])}t.placedSymbolArray.emplaceBack(s.x,s.y,y,this.glyphOffsetArray.length-y,d,u,l,s.segment,r?r[0]:0,r?r[1]:0,n[0],n[1],o,!1),t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,a,a.index,{})},Bs.prototype._addCollisionDebugVertex=function(t,e,r,n,i,a){return e.emplaceBack(0,0),t.emplaceBack(r.x,r.y,n,i,Math.round(a.x),Math.round(a.y))},Bs.prototype.addCollisionDebugVertices=function(t,e,r,n,a,o,s,u){var l=a.segments.prepareSegment(4,a.layoutVertexArray,a.indexArray),p=l.vertexLength,c=a.layoutVertexArray,h=a.collisionVertexArray,f=s.anchorX,y=s.anchorY;if(this._addCollisionDebugVertex(c,h,o,f,y,new i(t,e)),this._addCollisionDebugVertex(c,h,o,f,y,new i(r,e)),this._addCollisionDebugVertex(c,h,o,f,y,new i(r,n)),this._addCollisionDebugVertex(c,h,o,f,y,new i(t,n)),l.vertexLength+=4,u){var d=a.indexArray;d.emplaceBack(p,p+1,p+2),d.emplaceBack(p,p+2,p+3),l.primitiveLength+=2}else{var m=a.indexArray;m.emplaceBack(p,p+1),m.emplaceBack(p+1,p+2),m.emplaceBack(p+2,p+3),m.emplaceBack(p+3,p),l.primitiveLength+=4}},Bs.prototype.addDebugCollisionBoxes=function(t,e,r){for(var n=t;n<e;n++){var i=this.collisionBoxArray.get(n),a=i.x1,o=i.y1,s=i.x2,u=i.y2,l=i.radius>0;this.addCollisionDebugVertices(a,o,s,u,l?this.collisionCircle:this.collisionBox,i.anchorPoint,r,l)}},Bs.prototype.generateCollisionDebugBuffers=function(){for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e)}},Bs.prototype._deserializeCollisionBoxesForSymbol=function(t,e,r,n,i){for(var a={},o=e;o<r;o++){var s=t.get(o);if(0===s.radius){a.textBox={x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2,anchorPointX:s.anchorPointX,anchorPointY:s.anchorPointY},a.textFeatureIndex=s.featureIndex;break}a.textCircles||(a.textCircles=[],a.textFeatureIndex=s.featureIndex),a.textCircles.push(s.anchorPointX,s.anchorPointY,s.radius,s.signedDistanceFromAnchor,1)}for(var u=n;u<i;u++){var l=t.get(u);if(0===l.radius){a.iconBox={x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2,anchorPointX:l.anchorPointX,anchorPointY:l.anchorPointY},a.iconFeatureIndex=l.featureIndex;break}}return a},Bs.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var r=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,r.textBoxStartIndex,r.textBoxEndIndex,r.iconBoxStartIndex,r.iconBoxEndIndex))}},Bs.prototype.hasTextData=function(){return this.text.segments.get().length>0},Bs.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Bs.prototype.hasCollisionBoxData=function(){return this.collisionBox.segments.get().length>0},Bs.prototype.hasCollisionCircleData=function(){return this.collisionCircle.segments.get().length>0},Bs.prototype.addIndicesForPlacedTextSymbol=function(t){for(var e=this.text.placedSymbolArray.get(t),r=e.vertexStartIndex+4*e.numGlyphs,n=e.vertexStartIndex;n<r;n+=4)this.text.indexArray.emplaceBack(n,n+1,n+2),this.text.indexArray.emplaceBack(n+1,n+2,n+3)},Bs.prototype.sortFeatures=function(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&(this.sortedAngle=t,!(this.text.segments.get().length>1||this.icon.segments.get().length>1))){for(var e=[],r=0;r<this.symbolInstances.length;r++)e.push(r);for(var n=Math.sin(t),i=Math.cos(t),a=[],o=[],s=0;s<this.symbolInstances.length;s++){var u=this.symbolInstances.get(s);a.push(0|Math.round(n*u.anchorX+i*u.anchorY)),o.push(u.featureIndex)}e.sort(function(t,e){return a[t]-a[e]||o[e]-o[t]}),this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var l=0,p=e;l<p.length;l+=1){var c=p[l],h=this.symbolInstances.get(c);this.featureSortOrder.push(h.featureIndex),h.horizontalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedTextSymbol(h.horizontalPlacedTextSymbolIndex),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedTextSymbol(h.verticalPlacedTextSymbolIndex);var f=this.icon.placedSymbolArray.get(c);if(f.numGlyphs){var y=f.vertexStartIndex;this.icon.indexArray.emplaceBack(y,y+1,y+2),this.icon.indexArray.emplaceBack(y+1,y+2,y+3)}}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},sn("SymbolBucket",Bs,{omit:["layers","collisionBoxArray","features","compareText"]}),Bs.MAX_GLYPHS=65535,Bs.addDynamicAttributes=ks;var Es=new Dn({"symbol-placement":new Mn(mt.layout_symbol["symbol-placement"]),"symbol-spacing":new Mn(mt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Mn(mt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Tn(mt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Mn(mt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Mn(mt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Mn(mt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Mn(mt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Mn(mt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Tn(mt.layout_symbol["icon-size"]),"icon-text-fit":new Mn(mt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Mn(mt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Tn(mt.layout_symbol["icon-image"]),"icon-rotate":new Tn(mt.layout_symbol["icon-rotate"]),"icon-padding":new Mn(mt.layout_symbol["icon-padding"]),"icon-keep-upright":new Mn(mt.layout_symbol["icon-keep-upright"]),"icon-offset":new Tn(mt.layout_symbol["icon-offset"]),"icon-anchor":new Tn(mt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Mn(mt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Mn(mt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Mn(mt.layout_symbol["text-rotation-alignment"]),"text-field":new Tn(mt.layout_symbol["text-field"]),"text-font":new Tn(mt.layout_symbol["text-font"]),"text-size":new Tn(mt.layout_symbol["text-size"]),"text-max-width":new Tn(mt.layout_symbol["text-max-width"]),"text-line-height":new Mn(mt.layout_symbol["text-line-height"]),"text-letter-spacing":new Tn(mt.layout_symbol["text-letter-spacing"]),"text-justify":new Tn(mt.layout_symbol["text-justify"]),"text-anchor":new Tn(mt.layout_symbol["text-anchor"]),"text-max-angle":new Mn(mt.layout_symbol["text-max-angle"]),"text-rotate":new Tn(mt.layout_symbol["text-rotate"]),"text-padding":new Mn(mt.layout_symbol["text-padding"]),"text-keep-upright":new Mn(mt.layout_symbol["text-keep-upright"]),"text-transform":new Tn(mt.layout_symbol["text-transform"]),"text-offset":new Tn(mt.layout_symbol["text-offset"]),"text-allow-overlap":new Mn(mt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Mn(mt.layout_symbol["text-ignore-placement"]),"text-optional":new Mn(mt.layout_symbol["text-optional"])}),Ps={paint:new Dn({"icon-opacity":new Tn(mt.paint_symbol["icon-opacity"]),"icon-color":new Tn(mt.paint_symbol["icon-color"]),"icon-halo-color":new Tn(mt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Tn(mt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Tn(mt.paint_symbol["icon-halo-blur"]),"icon-translate":new Mn(mt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Mn(mt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Tn(mt.paint_symbol["text-opacity"]),"text-color":new Tn(mt.paint_symbol["text-color"]),"text-halo-color":new Tn(mt.paint_symbol["text-halo-color"]),"text-halo-width":new Tn(mt.paint_symbol["text-halo-width"]),"text-halo-blur":new Tn(mt.paint_symbol["text-halo-blur"]),"text-translate":new Mn(mt.paint_symbol["text-translate"]),"text-translate-anchor":new Mn(mt.paint_symbol["text-translate-anchor"])}),layout:Es},Vs=function(t){function e(e){t.call(this,e,Ps)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),"auto"===this.layout.get("icon-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"))},e.prototype.getValueAndResolveTokens=function(t,e){var r,n=this.layout.get(t).evaluate(e,{}),i=this._unevaluatedLayout._values[t];return i.isDataDriven()||yr(i.value)?n:(r=e.properties,n.replace(/{([^{}]+)}/g,function(t,e){return e in r?String(r[e]):""}))},e.prototype.createBucket=function(t){return new Bs(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e}(Un),Cs={paint:new Dn({"background-color":new Mn(mt.paint_background["background-color"]),"background-pattern":new Ln(mt.paint_background["background-pattern"]),"background-opacity":new Mn(mt.paint_background["background-opacity"])})},Ms=function(t){function e(e){t.call(this,e,Cs)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Un),Ts={paint:new Dn({"raster-opacity":new Mn(mt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Mn(mt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Mn(mt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Mn(mt.paint_raster["raster-brightness-max"]),"raster-saturation":new Mn(mt.paint_raster["raster-saturation"]),"raster-contrast":new Mn(mt.paint_raster["raster-contrast"]),"raster-resampling":new Mn(mt.paint_raster["raster-resampling"]),"raster-fade-duration":new Mn(mt.paint_raster["raster-fade-duration"])})},Fs=function(t){function e(e){t.call(this,e,Ts)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Un),Ls=function(t){function e(e){t.call(this,e,{}),this.implementation=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender||"3d"===this.implementation.renderingMode},e.prototype.recalculate=function(){},e.prototype.updateTransitions=function(){},e.prototype.hasTransition=function(){},e.prototype.serialize=function(){},e.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},e.prototype.onAdd=function(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},e.prototype.onRemove=function(t){this.implementation.onRemove&&this.implementation.onRemove(t)},e}(Un),Os={circle:Ta,heatmap:Ka,hillshade:Xa,fill:Po,"fill-extrusion":Uo,line:ps,symbol:Vs,background:Ms,raster:Fs};function Ds(t){for(var e=0,r=0,n=0,i=t;n<i.length;n+=1){var a=i[n];e+=a.w*a.h,r=Math.max(r,a.w)}t.sort(function(t,e){return e.h-t.h});for(var o=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),r),h:1/0}],s=0,u=0,l=0,p=t;l<p.length;l+=1)for(var c=p[l],h=o.length-1;h>=0;h--){var f=o[h];if(!(c.w>f.w||c.h>f.h)){if(c.x=f.x,c.y=f.y,u=Math.max(u,c.y+c.h),s=Math.max(s,c.x+c.w),c.w===f.w&&c.h===f.h){var y=o.pop();h<o.length&&(o[h]=y)}else c.h===f.h?(f.x+=c.w,f.w-=c.w):c.w===f.w?(f.y+=c.h,f.h-=c.h):(o.push({x:f.x+c.w,y:f.y,w:f.w-c.w,h:c.h}),f.y+=c.h,f.h-=c.h);break}}return{w:s,h:u,fill:e/(s*u)||0}}var Us=function(t,e){var r=e.pixelRatio;this.paddedRect=t,this.pixelRatio=r},js={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};js.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},js.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},js.tlbr.get=function(){return this.tl.concat(this.br)},js.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Us.prototype,js);var Rs=function(t,e){var r={},n={},i=[];for(var a in t){var o=t[a],s={x:0,y:0,w:o.data.width+2,h:o.data.height+2};i.push(s),r[a]=new Us(s,o)}for(var u in e){var l=e[u],p={x:0,y:0,w:l.data.width+2,h:l.data.height+2};i.push(p),n[u]=new Us(p,l)}var c=Ds(i),h=c.w,f=c.h,y=new Ra({width:h||1,height:f||1});for(var d in t){var m=t[d],v=r[d].paddedRect;Ra.copy(m.data,y,{x:0,y:0},{x:v.x+1,y:v.y+1},m.data)}for(var g in e){var x=e[g],b=n[g].paddedRect,_=b.x+1,w=b.y+1,A=x.data.width,S=x.data.height;Ra.copy(x.data,y,{x:0,y:0},{x:_,y:w},x.data),Ra.copy(x.data,y,{x:0,y:S-1},{x:_,y:w-1},{width:A,height:1}),Ra.copy(x.data,y,{x:0,y:0},{x:_,y:w+S},{width:A,height:1}),Ra.copy(x.data,y,{x:A-1,y:0},{x:_-1,y:w},{width:1,height:S}),Ra.copy(x.data,y,{x:0,y:0},{x:_+A,y:w},{width:1,height:S})}this.image=y,this.iconPositions=r,this.patternPositions=n};sn("ImagePosition",Us),sn("ImageAtlas",Rs);var qs=self.HTMLImageElement,Ns=self.HTMLCanvasElement,Ks=self.HTMLVideoElement,Gs=self.ImageData,Xs=function(t,e,r,n){this.context=t,this.format=r,this.texture=t.gl.createTexture(),this.update(e,n)};Xs.prototype.update=function(t,e){var r=t.width,n=t.height,i=!this.size||this.size[0]!==r||this.size[1]!==n,a=this.context,o=a.gl;this.useMipmap=Boolean(e&&e.useMipmap),o.bindTexture(o.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===o.RGBA&&(!e||!1!==e.premultiply)),i?(this.size=[r,n],t instanceof qs||t instanceof Ns||t instanceof Ks||t instanceof Gs?o.texImage2D(o.TEXTURE_2D,0,this.format,this.format,o.UNSIGNED_BYTE,t):o.texImage2D(o.TEXTURE_2D,0,this.format,r,n,0,this.format,o.UNSIGNED_BYTE,t.data)):t instanceof qs||t instanceof Ns||t instanceof Ks||t instanceof Gs?o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,t):o.texSubImage2D(o.TEXTURE_2D,0,0,0,r,n,o.RGBA,o.UNSIGNED_BYTE,t.data),this.useMipmap&&this.isSizePowerOfTwo()&&o.generateMipmap(o.TEXTURE_2D)},Xs.prototype.bind=function(t,e,r){var n=this.context.gl;n.bindTexture(n.TEXTURE_2D,this.texture),r!==n.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(r=n.LINEAR),t!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,r||t),this.filter=t),e!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,e),this.wrap=e)},Xs.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Xs.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Zs=function(t,e,r,n,i){var a,o,s=8*i-n-1,u=(1<<s)-1,l=u>>1,p=-7,c=r?i-1:0,h=r?-1:1,f=t[e+c];for(c+=h,a=f&(1<<-p)-1,f>>=-p,p+=s;p>0;a=256*a+t[e+c],c+=h,p-=8);for(o=a&(1<<-p)-1,a>>=-p,p+=n;p>0;o=256*o+t[e+c],c+=h,p-=8);if(0===a)a=1-l;else{if(a===u)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,n),a-=l}return(f?-1:1)*o*Math.pow(2,a-n)},Hs=function(t,e,r,n,i,a){var o,s,u,l=8*a-i-1,p=(1<<l)-1,c=p>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:a-1,y=n?1:-1,d=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=p):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),(e+=o+c>=1?h/u:h*Math.pow(2,1-c))*u>=2&&(o++,u/=2),o+c>=p?(s=0,o=p):o+c>=1?(s=(e*u-1)*Math.pow(2,i),o+=c):(s=e*Math.pow(2,c-1)*Math.pow(2,i),o=0));i>=8;t[r+f]=255&s,f+=y,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;t[r+f]=255&o,f+=y,o/=256,l-=8);t[r+f-y]|=128*d},Ys=Js;function Js(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function $s(t){return t.type===Js.Bytes?t.readVarint()+t.pos:t.pos+1}function Ws(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Qs(t,e,r){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));r.realloc(n);for(var i=r.pos-1;i>=t;i--)r.buf[i+n]=r.buf[i]}function tu(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function eu(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function ru(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function nu(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function iu(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function au(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function ou(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function su(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function uu(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function lu(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function pu(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function cu(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}Js.Varint=0,Js.Fixed64=1,Js.Bytes=2,Js.Fixed32=5,Js.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,a=this.pos;this.type=7&n,t(i,e,this),this.pos===a&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=lu(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=cu(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=lu(this.buf,this.pos)+4294967296*lu(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=lu(this.buf,this.pos)+4294967296*cu(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=Zs(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Zs(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,r,n=this.buf;return e=127&(r=n[this.pos++]),r<128?e:(e|=(127&(r=n[this.pos++]))<<7,r<128?e:(e|=(127&(r=n[this.pos++]))<<14,r<128?e:(e|=(127&(r=n[this.pos++]))<<21,r<128?e:function(t,e,r){var n,i,a=r.buf;if(n=(112&(i=a[r.pos++]))>>4,i<128)return Ws(t,n,e);if(n|=(127&(i=a[r.pos++]))<<3,i<128)return Ws(t,n,e);if(n|=(127&(i=a[r.pos++]))<<10,i<128)return Ws(t,n,e);if(n|=(127&(i=a[r.pos++]))<<17,i<128)return Ws(t,n,e);if(n|=(127&(i=a[r.pos++]))<<24,i<128)return Ws(t,n,e);if(n|=(1&(i=a[r.pos++]))<<31,i<128)return Ws(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,r){for(var n="",i=e;i<r;){var a,o,s,u=t[i],l=null,p=u>239?4:u>223?3:u>191?2:1;if(i+p>r)break;1===p?u<128&&(l=u):2===p?128==(192&(a=t[i+1]))&&(l=(31&u)<<6|63&a)<=127&&(l=null):3===p?(a=t[i+1],o=t[i+2],128==(192&a)&&128==(192&o)&&((l=(15&u)<<12|(63&a)<<6|63&o)<=2047||l>=55296&&l<=57343)&&(l=null)):4===p&&(a=t[i+1],o=t[i+2],s=t[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&((l=(15&u)<<18|(63&a)<<12|(63&o)<<6|63&s)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,p=1):l>65535&&(l-=65536,n+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),n+=String.fromCharCode(l),i+=p}return n}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var r=$s(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=$s(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=$s(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=$s(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=$s(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=$s(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=$s(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=$s(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=$s(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Js.Varint)for(;this.buf[this.pos++]>127;);else if(e===Js.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Js.Fixed32)this.pos+=4;else{if(e!==Js.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),pu(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),pu(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),pu(this.buf,-1&t,this.pos),pu(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),pu(this.buf,-1&t,this.pos),pu(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var r,n;if(t>=0?(r=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(r=~(-t%4294967296))?r=r+1|0:(r=0,n=n+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,r){r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos]=127&t}(r,0,e),function(t,e){var r=(7&t)<<4;e.buf[e.pos++]|=r|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(n,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,r){for(var n,i,a=0;a<e.length;a++){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){n>56319||a+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):i=n;continue}if(n<56320){t[r++]=239,t[r++]=191,t[r++]=189,i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&(t[r++]=239,t[r++]=191,t[r++]=189,i=null);n<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(n<65536?t[r++]=n>>12|224:(t[r++]=n>>18|240,t[r++]=n>>12&63|128),t[r++]=n>>6&63|128),t[r++]=63&n|128)}return r}(this.buf,t,this.pos);var r=this.pos-e;r>=128&&Qs(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),Hs(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Hs(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var n=this.pos-r;n>=128&&Qs(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,r){this.writeTag(t,Js.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){this.writeMessage(t,tu,e)},writePackedSVarint:function(t,e){this.writeMessage(t,eu,e)},writePackedBoolean:function(t,e){this.writeMessage(t,iu,e)},writePackedFloat:function(t,e){this.writeMessage(t,ru,e)},writePackedDouble:function(t,e){this.writeMessage(t,nu,e)},writePackedFixed32:function(t,e){this.writeMessage(t,au,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,ou,e)},writePackedFixed64:function(t,e){this.writeMessage(t,su,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,uu,e)},writeBytesField:function(t,e){this.writeTag(t,Js.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Js.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Js.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Js.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Js.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Js.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Js.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Js.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Js.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Js.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var hu=3;function fu(t,e,r){1===t&&r.readMessage(yu,e)}function yu(t,e,r){if(3===t){var n=r.readMessage(du,{}),i=n.id,a=n.bitmap,o=n.width,s=n.height,u=n.left,l=n.top,p=n.advance;e.push({id:i,bitmap:new ja({width:o+2*hu,height:s+2*hu},a),metrics:{width:o,height:s,left:u,top:l,advance:p}})}}function du(t,e,r){1===t?e.id=r.readVarint():2===t?e.bitmap=r.readBytes():3===t?e.width=r.readVarint():4===t?e.height=r.readVarint():5===t?e.left=r.readSVarint():6===t?e.top=r.readSVarint():7===t&&(e.advance=r.readVarint())}var mu=hu,vu=function(t,e,r){this.target=t,this.parent=e,this.mapId=r,this.callbacks={},this.callbackID=0,m(["receive"],this),this.target.addEventListener("message",this.receive,!1)};function gu(t,e,r){var n=2*Math.PI*6378137/256/Math.pow(2,r);return[t*n-2*Math.PI*6378137/2,e*n-2*Math.PI*6378137/2]}vu.prototype.send=function(t,e,r,n){var i=this,a=r?this.mapId+":"+this.callbackID++:null;r&&(this.callbacks[a]=r);var o=[];if(this.target.postMessage({targetMapId:n,sourceMapId:this.mapId,type:t,id:String(a),data:ln(e,o)},o),r)return{cancel:function(){return i.target.postMessage({targetMapId:n,sourceMapId:i.mapId,type:"<cancel>",id:String(a)})}}},vu.prototype.receive=function(t){var e,r=this,n=t.data,i=n.id;if(!n.targetMapId||this.mapId===n.targetMapId){var a=function(t,e){delete r.callbacks[i];var n=[];r.target.postMessage({sourceMapId:r.mapId,type:"<response>",id:String(i),error:t?ln(t):null,data:ln(e,n)},n)};if("<response>"===n.type||"<cancel>"===n.type)e=this.callbacks[n.id],delete this.callbacks[n.id],e&&n.error?e(pn(n.error)):e&&e(null,pn(n.data));else if(void 0!==n.id&&this.parent[n.type]){this.callbacks[n.id]=null;var o=this.parent[n.type](n.sourceMapId,pn(n.data),a);o&&null===this.callbacks[n.id]&&(this.callbacks[n.id]=o)}else if(void 0!==n.id&&this.parent.getWorkerSource){var s=n.type.split("."),u=pn(n.data);this.parent.getWorkerSource(n.sourceMapId,s[0],u.source)[s[1]](u,a)}else this.parent[n.type](pn(n.data))}},vu.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)};var xu=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};xu.prototype.setNorthEast=function(t){return this._ne=t instanceof bu?new bu(t.lng,t.lat):bu.convert(t),this},xu.prototype.setSouthWest=function(t){return this._sw=t instanceof bu?new bu(t.lng,t.lat):bu.convert(t),this},xu.prototype.extend=function(t){var e,r,n=this._sw,i=this._ne;if(t instanceof bu)e=t,r=t;else{if(!(t instanceof xu))return Array.isArray(t)?t.every(Array.isArray)?this.extend(xu.convert(t)):this.extend(bu.convert(t)):this;if(e=t._sw,r=t._ne,!e||!r)return this}return n||i?(n.lng=Math.min(e.lng,n.lng),n.lat=Math.min(e.lat,n.lat),i.lng=Math.max(r.lng,i.lng),i.lat=Math.max(r.lat,i.lat)):(this._sw=new bu(e.lng,e.lat),this._ne=new bu(r.lng,r.lat)),this},xu.prototype.getCenter=function(){return new bu((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},xu.prototype.getSouthWest=function(){return this._sw},xu.prototype.getNorthEast=function(){return this._ne},xu.prototype.getNorthWest=function(){return new bu(this.getWest(),this.getNorth())},xu.prototype.getSouthEast=function(){return new bu(this.getEast(),this.getSouth())},xu.prototype.getWest=function(){return this._sw.lng},xu.prototype.getSouth=function(){return this._sw.lat},xu.prototype.getEast=function(){return this._ne.lng},xu.prototype.getNorth=function(){return this._ne.lat},xu.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},xu.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},xu.prototype.isEmpty=function(){return!(this._sw&&this._ne)},xu.convert=function(t){return!t||t instanceof xu?t:new xu(t)};var bu=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};function _u(t){return 2*Math.PI*6378137*Math.cos(t*Math.PI/180)}function wu(t){return(180+t)/360}function Au(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Su(t,e){return t/_u(e)}function ku(t){var e=180-360*t;return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90}bu.prototype.wrap=function(){return new bu(p(this.lng,-180,180),this.lat)},bu.prototype.toArray=function(){return[this.lng,this.lat]},bu.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},bu.prototype.toBounds=function(t){void 0===t&&(t=0);var e=360*t/40075017,r=e/Math.cos(Math.PI/180*this.lat);return new xu(new bu(this.lng-r,this.lat-e),new bu(this.lng+r,this.lat+e))},bu.convert=function(t){if(t instanceof bu)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new bu(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new bu(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var zu=function(t,e,r){void 0===r&&(r=0),this.x=+t,this.y=+e,this.z=+r};zu.fromLngLat=function(t,e){void 0===e&&(e=0);var r=bu.convert(t);return new zu(wu(r.lng),Au(r.lat),Su(e,r.lat))},zu.prototype.toLngLat=function(){return new bu(360*this.x-180,ku(this.y))},zu.prototype.toAltitude=function(){return this.z*_u(ku(this.y))};var Iu=function(t,e,r){this.z=t,this.x=e,this.y=r,this.key=Pu(0,t,e,r)};Iu.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},Iu.prototype.url=function(t,e){var r,n,i,a,o,s=(r=this.x,n=this.y,i=this.z,a=gu(256*r,256*(n=Math.pow(2,i)-n-1),i),o=gu(256*(r+1),256*(n+1),i),a[0]+","+a[1]+","+o[0]+","+o[1]),u=function(t,e,r){for(var n,i="",a=t;a>0;a--)i+=(e&(n=1<<a-1)?1:0)+(r&n?2:0);return i}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",s)},Iu.prototype.getTilePoint=function(t){var e=Math.pow(2,this.z);return new i((t.x*e-this.x)*Yi,(t.y*e-this.y)*Yi)};var Bu=function(t,e){this.wrap=t,this.canonical=e,this.key=Pu(t,e.z,e.x,e.y)},Eu=function(t,e,r,n,i){this.overscaledZ=t,this.wrap=e,this.canonical=new Iu(r,+n,+i),this.key=Pu(e,t,n,i)};function Pu(t,e,r,n){(t*=2)<0&&(t=-1*t-1);var i=1<<e;return 32*(i*i*t+i*n+r)+e}Eu.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},Eu.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new Eu(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Eu(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},Eu.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},Eu.prototype.children=function(t){if(this.overscaledZ>=t)return[new Eu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,r=2*this.canonical.x,n=2*this.canonical.y;return[new Eu(e,this.wrap,e,r,n),new Eu(e,this.wrap,e,r+1,n),new Eu(e,this.wrap,e,r,n+1),new Eu(e,this.wrap,e,r+1,n+1)]},Eu.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},Eu.prototype.wrapped=function(){return new Eu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Eu.prototype.unwrapTo=function(t){return new Eu(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},Eu.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Eu.prototype.toUnwrapped=function(){return new Bu(this.wrap,this.canonical)},Eu.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Eu.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new zu(t.x-this.wrap,t.y))},sn("CanonicalTileID",Iu),sn("OverscaledTileID",Eu,{omit:["posMatrix"]});var Vu=function(t,e,r){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(r&&"mapbox"!==r&&"terrarium"!==r)return w('"'+r+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');var n=this.dim=e.height;this.stride=this.dim+2,this.data=new Int32Array(this.stride*this.stride);for(var i=e.data,a="terrarium"===r?this._unpackTerrarium:this._unpackMapbox,o=0;o<n;o++)for(var s=0;s<n;s++){var u=4*(o*n+s);this.set(s,o,a(i[u],i[u+1],i[u+2]))}for(var l=0;l<n;l++)this.set(-1,l,this.get(0,l)),this.set(n,l,this.get(n-1,l)),this.set(l,-1,this.get(l,0)),this.set(l,n,this.get(l,n-1));this.set(-1,-1,this.get(0,0)),this.set(n,-1,this.get(n-1,0)),this.set(-1,n,this.get(0,n-1)),this.set(n,n,this.get(n-1,n-1))};Vu.prototype.set=function(t,e,r){this.data[this._idx(t,e)]=r+65536},Vu.prototype.get=function(t,e){return this.data[this._idx(t,e)]-65536},Vu.prototype._idx=function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)},Vu.prototype._unpackMapbox=function(t,e,r){return(256*t*256+256*e+r)/10-1e4},Vu.prototype._unpackTerrarium=function(t,e,r){return 256*t+e+r/256-32768},Vu.prototype.getPixels=function(){return new Ra({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Vu.prototype.backfillBorder=function(t,e,r){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var n=e*this.dim,i=e*this.dim+this.dim,a=r*this.dim,o=r*this.dim+this.dim;switch(e){case-1:n=i-1;break;case 1:i=n+1}switch(r){case-1:a=o-1;break;case 1:o=a+1}for(var s=-e*this.dim,u=-r*this.dim,l=a;l<o;l++)for(var p=n;p<i;p++)this.set(p,l,t.get(p+s,l+u))},sn("DEMData",Vu);var Cu=Nn([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Mu=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var r=t[e];this._stringToNumber[r]=e,this._numberToString[e]=r}};Mu.prototype.encode=function(t){return this._stringToNumber[t]},Mu.prototype.decode=function(t){return this._numberToString[t]};var Tu=function(t,e,r,n){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=r,t._y=n,this.properties=t.properties,null!=t.id&&(this.id=t.id)},Fu={geometry:{configurable:!0}};Fu.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Fu.geometry.set=function(t){this._geometry=t},Tu.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(Tu.prototype,Fu);var Lu=function(){this.state={},this.stateChanges={},this.deletedStates={}};Lu.prototype.updateState=function(t,e,r){var n=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][n]=this.stateChanges[t][n]||{},c(this.stateChanges[t][n],r),null===this.deletedStates[t])for(var i in this.deletedStates[t]={},this.state[t])i!==n&&(this.deletedStates[t][i]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][n])for(var a in this.deletedStates[t][n]={},this.state[t][n])r[a]||(this.deletedStates[t][n][a]=null);else for(var o in r)this.deletedStates[t]&&this.deletedStates[t][n]&&null===this.deletedStates[t][n][o]&&delete this.deletedStates[t][n][o]},Lu.prototype.removeFeatureState=function(t,e,r){if(null!==this.deletedStates[t]){var n=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},r&&e)null!==this.deletedStates[t][n]&&(this.deletedStates[t][n]=this.deletedStates[t][n]||{},this.deletedStates[t][n][r]=null);else if(e)if(this.stateChanges[t]&&this.stateChanges[t][n])for(r in this.deletedStates[t][n]={},this.stateChanges[t][n])this.deletedStates[t][n][r]=null;else this.deletedStates[t][n]=null;else this.deletedStates[t]=null}},Lu.prototype.getState=function(t,e){var r=String(e),n=this.state[t]||{},i=this.stateChanges[t]||{},a=c({},n[r],i[r]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var o=this.deletedStates[t][e];if(null===o)return{};for(var s in o)delete a[s]}return a},Lu.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},Lu.prototype.coalesceChanges=function(t,e){var r={};for(var n in this.stateChanges){this.state[n]=this.state[n]||{};var i={};for(var a in this.stateChanges[n])this.state[n][a]||(this.state[n][a]={}),c(this.state[n][a],this.stateChanges[n][a]),i[a]=this.state[n][a];r[n]=i}for(var o in this.deletedStates){this.state[o]=this.state[o]||{};var s={};if(null===this.deletedStates[o]){for(var u in this.state[o])s[u]={};this.state[o]={}}else for(var l in this.deletedStates[o]){if(null===this.deletedStates[o][l])this.state[o][l]={};else for(var p=0,h=Object.keys(this.deletedStates[o][l]);p<h.length;p+=1){var f=h[p];delete this.state[o][l][f]}s[l]=this.state[o][l]}r[o]=r[o]||{},c(r[o],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(var y in t)t[y].setFeatureState(r,e)};var Ou=function(t,e,r){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=e||new en(Yi,16,0),this.grid3D=new en(Yi,16,0),this.featureIndexArray=r||new Ai};function Du(t){for(var e=1/0,r=1/0,n=-1/0,i=-1/0,a=0,o=t;a<o.length;a+=1){var s=o[a];e=Math.min(e,s.x),r=Math.min(r,s.y),n=Math.max(n,s.x),i=Math.max(i,s.y)}return{minX:e,minY:r,maxX:n,maxY:i}}function Uu(t,e){return e-t}Ou.prototype.insert=function(t,e,r,n,i,a){var o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(r,n,i);for(var s=a?this.grid3D:this.grid,u=0;u<e.length;u++){for(var l=e[u],p=[1/0,1/0,-1/0,-1/0],c=0;c<l.length;c++){var h=l[c];p[0]=Math.min(p[0],h.x),p[1]=Math.min(p[1],h.y),p[2]=Math.max(p[2],h.x),p[3]=Math.max(p[3],h.y)}p[0]<Yi&&p[1]<Yi&&p[2]>=0&&p[3]>=0&&s.insert(o,p[0],p[1],p[2],p[3])}},Ou.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Wo.VectorTile(new Ys(this.rawTileData)).layers,this.sourceLayerCoder=new Mu(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Ou.prototype.query=function(t,e,r){var n=this;this.loadVTLayers();for(var a=t.params||{},o=Yi/t.tileSize/t.scale,s=Er(a.filter),u=t.queryGeometry,l=t.queryPadding*o,p=Du(u),c=this.grid.query(p.minX-l,p.minY-l,p.maxX+l,p.maxY+l),h=Du(t.cameraQueryGeometry),y=0,d=this.grid3D.query(h.minX-l,h.minY-l,h.maxX+l,h.maxY+l,function(e,r,n,a){return function(t,e,r,n,a){for(var o=0,s=t;o<s.length;o+=1){var u=s[o];if(e<=u.x&&r<=u.y&&n>=u.x&&a>=u.y)return!0}var l=[new i(e,r),new i(e,a),new i(n,a),new i(n,r)];if(t.length>2)for(var p=0,c=l;p<c.length;p+=1)if(pa(t,c[p]))return!0;for(var h=0;h<t.length-1;h++)if(ca(t[h],t[h+1],l))return!0;return!1}(t.cameraQueryGeometry,e-l,r-l,n+l,a+l)});y<d.length;y+=1){var m=d[y];c.push(m)}c.sort(Uu);for(var v,g={},x=function(i){var l=c[i];if(l!==v){v=l;var p=n.featureIndexArray.get(l),h=null;n.loadMatchingFeature(g,p.bucketIndex,p.sourceLayerIndex,p.featureIndex,s,a.layers,e,function(e,i){h||(h=Wi(e));var a={};return e.id&&(a=r.getState(i.sourceLayer||"_geojsonTileLayer",e.id)),i.queryIntersectsFeature(u,e,a,h,n.z,t.transform,o,t.pixelPosMatrix)})}},b=0;b<c.length;b++)x(b);return g},Ou.prototype.loadMatchingFeature=function(t,e,r,n,i,a,o,s){var u=this.bucketLayerIDs[e];if(!a||function(t,e){for(var r=0;r<t.length;r++)if(e.indexOf(t[r])>=0)return!0;return!1}(a,u)){var l=this.sourceLayerCoder.decode(r),p=this.vtLayers[l].feature(n);if(i(new Sn(this.tileID.overscaledZ),p))for(var c=0;c<u.length;c++){var h=u[c];if(!(a&&a.indexOf(h)<0)){var f=o[h];if(f){var y=!s||s(p,f);if(y){var d=new Tu(p,this.z,this.x,this.y);d.layer=f.serialize();var m=t[h];void 0===m&&(m=t[h]=[]),m.push({featureIndex:n,feature:d,intersectionZ:y})}}}}}},Ou.prototype.lookupSymbolFeatures=function(t,e,r,n,i,a){var o={};this.loadVTLayers();for(var s=Er(n),u=0,l=t;u<l.length;u+=1){var p=l[u];this.loadMatchingFeature(o,e,r,p,s,i,a)}return o},Ou.prototype.hasLayer=function(t){for(var e=0,r=this.bucketLayerIDs;e<r.length;e+=1)for(var n=0,i=r[e];n<i.length;n+=1)if(t===i[n])return!0;return!1},sn("FeatureIndex",Ou,{omit:["rawTileData","sourceLayerCoder"]});var ju=function(t,e){this.tileID=t,this.uid=f(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.expiredRequestCount=0,this.state="loading"};ju.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<V.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},ju.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},ju.prototype.loadVectorData=function(t,e,r){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var n in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){var r={};if(!e)return r;for(var n=function(){var t=a[i],n=t.layerIds.map(function(t){return e.getLayer(t)}).filter(Boolean);if(0!==n.length){t.layers=n,t.stateDependentLayerIds&&(t.stateDependentLayers=t.stateDependentLayerIds.map(function(t){return n.filter(function(e){return e.id===t})[0]}));for(var o=0,s=n;o<s.length;o+=1){var u=s[o];r[u.id]=t}}},i=0,a=t;i<a.length;i+=1)n();return r}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var i=this.buckets[n];if(i instanceof Bs){if(this.hasSymbolBuckets=!0,!r)break;i.justReloaded=!0}}for(var a in this.queryPadding=0,this.buckets){var o=this.buckets[a];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(a).queryRadius(o))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new fi},ju.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ju.prototype.unloadDEMData=function(){this.dem=null,this.neighboringTiles=null,this.state="unloaded"},ju.prototype.getBucket=function(t){return this.buckets[t.id]},ju.prototype.upload=function(t){for(var e in this.buckets){var r=this.buckets[e];r.uploadPending()&&r.upload(t)}var n=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Xs(t,this.imageAtlas.image,n.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Xs(t,this.glyphAtlasImage,n.ALPHA),this.glyphAtlasImage=null)},ju.prototype.queryRenderedFeatures=function(t,e,r,n,i,a,o,s,u){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:n,scale:i,tileSize:this.tileSize,pixelPosMatrix:u,transform:o,params:a,queryPadding:this.queryPadding*s},t,e):{}},ju.prototype.querySourceFeatures=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData){var r=this.latestFeatureIndex.loadVTLayers(),n=e?e.sourceLayer:"",i=r._geojsonTileLayer||r[n];if(i)for(var a=Er(e&&e.filter),o=this.tileID.canonical,s=o.z,u=o.x,l=o.y,p={z:s,x:u,y:l},c=0;c<i.length;c++){var h=i.feature(c);if(a(new Sn(this.tileID.overscaledZ),h)){var f=new Tu(h,s,u,l);f.tile=p,t.push(f)}}}},ju.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)},ju.prototype.setMask=function(t,e){if(!o(this.mask,t)&&(this.mask=t,this.clearMask(),!o(t,{0:!0}))){var r=new Xn,n=new si;this.segments=new zi,this.segments.prepareSegment(0,r,n);for(var a=Object.keys(t),s=0;s<a.length;s++){var u=t[a[s]],l=Yi>>u.z,p=new i(u.x*l,u.y*l),c=new i(p.x+l,p.y+l),h=this.segments.prepareSegment(4,r,n);r.emplaceBack(p.x,p.y,p.x,p.y),r.emplaceBack(c.x,p.y,c.x,p.y),r.emplaceBack(p.x,c.y,p.x,c.y),r.emplaceBack(c.x,c.y,c.x,c.y);var f=h.vertexLength;n.emplaceBack(f,f+1,f+2),n.emplaceBack(f+1,f+2,f+3),h.vertexLength+=4,h.primitiveLength+=2}this.maskedBoundsBuffer=e.createVertexBuffer(r,Cu.members),this.maskedIndexBuffer=e.createIndexBuffer(n)}},ju.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},ju.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ju.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var r=function(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(t,r,n,i){var a=n||i;return e[r]=!a||a.toLowerCase(),""}),e["max-age"]){var r=parseInt(e["max-age"],10);isNaN(r)?delete e["max-age"]:e["max-age"]=r}return e}(t.cacheControl);r["max-age"]&&(this.expirationTime=Date.now()+1e3*r["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var n=Date.now(),i=!1;if(this.expirationTime>n)i=!1;else if(e)if(this.expirationTime<e)i=!0;else{var a=this.expirationTime-e;a?this.expirationTime=n+Math.max(a,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ju.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},ju.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var r=this.latestFeatureIndex.loadVTLayers();for(var n in this.buckets){var i=this.buckets[n],a=i.layers[0].sourceLayer||"_geojsonTileLayer",o=r[a],s=t[a];o&&s&&0!==Object.keys(s).length&&(i.update(s,o,this.imageAtlas&&this.imageAtlas.patternPositions||{}),e&&e.style&&(this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(n).queryRadius(i))))}}},ju.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},ju.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<V.now()},ju.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ju.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=V.now()+t};var Ru={horizontal:1,vertical:2,horizontalOnly:3},qu=function(){this.text="",this.sectionIndex=[],this.sections=[]};qu.fromFeature=function(t,e){for(var r=new qu,n=0;n<t.sections.length;n++){var i=t.sections[n];r.sections.push({scale:i.scale||1,fontStack:i.fontStack||e}),r.text+=i.text;for(var a=0;a<i.text.length;a++)r.sectionIndex.push(n)}return r},qu.prototype.length=function(){return this.text.length},qu.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},qu.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},qu.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",r=0;r<t.length;r++){var n=t.charCodeAt(r+1)||null,i=t.charCodeAt(r-1)||null;n&&mn(n)&&!gs[t[r+1]]||i&&mn(i)&&!gs[t[r-1]]||!gs[t[r]]?e+=t[r]:e+=gs[t[r]]}return e}(this.text)},qu.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&Nu[this.text.charCodeAt(e)];e++)t++;for(var r=this.text.length,n=this.text.length-1;n>=0&&n>=t&&Nu[this.text.charCodeAt(n)];n--)r--;this.text=this.text.substring(t,r),this.sectionIndex=this.sectionIndex.slice(t,r)},qu.prototype.substring=function(t,e){var r=new qu;return r.text=this.text.substring(t,e),r.sectionIndex=this.sectionIndex.slice(t,e),r.sections=this.sections,r},qu.prototype.toString=function(){return this.text},qu.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce(function(e,r){return Math.max(e,t.sections[r].scale)},0)};var Nu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Ku={};function Gu(t,e,r,n){var i=Math.pow(t-e,2);return n?t<e?i/2:2*i:i+Math.abs(r)*r}function Xu(t,e){var r=0;return 10===t&&(r-=1e4),40!==t&&65288!==t||(r+=50),41!==e&&65289!==e||(r+=50),r}function Zu(t,e,r,n,i,a){for(var o=null,s=Gu(e,r,i,a),u=0,l=n;u<l.length;u+=1){var p=l[u],c=Gu(e-p.x,r,i,a)+p.badness;c<=s&&(o=p,s=c)}return{index:t,x:e,priorBreak:o,badness:s}}function Hu(t,e,r,n){if(!r)return[];if(!t)return[];for(var i,a=[],o=function(t,e,r,n){for(var i=0,a=0;a<t.length();a++){var o=t.getSection(a),s=n[o.fontStack],u=s&&s[t.getCharCode(a)];u&&(i+=u.metrics.advance*o.scale+e)}return i/Math.max(1,Math.ceil(i/r))}(t,e,r,n),s=0,u=0;u<t.length();u++){var l=t.getSection(u),p=t.getCharCode(u),c=n[l.fontStack],h=c&&c[p];h&&!Nu[p]&&(s+=h.metrics.advance*l.scale+e),u<t.length()-1&&(Ku[p]||!((i=p)<11904)&&(hn["Bopomofo Extended"](i)||hn.Bopomofo(i)||hn["CJK Compatibility Forms"](i)||hn["CJK Compatibility Ideographs"](i)||hn["CJK Compatibility"](i)||hn["CJK Radicals Supplement"](i)||hn["CJK Strokes"](i)||hn["CJK Symbols and Punctuation"](i)||hn["CJK Unified Ideographs Extension A"](i)||hn["CJK Unified Ideographs"](i)||hn["Enclosed CJK Letters and Months"](i)||hn["Halfwidth and Fullwidth Forms"](i)||hn.Hiragana(i)||hn["Ideographic Description Characters"](i)||hn["Kangxi Radicals"](i)||hn["Katakana Phonetic Extensions"](i)||hn.Katakana(i)||hn["Vertical Forms"](i)||hn["Yi Radicals"](i)||hn["Yi Syllables"](i)))&&a.push(Zu(u+1,s,o,a,Xu(p,t.getCharCode(u+1)),!1))}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(Zu(t.length(),s,o,a,0,!0))}function Yu(t){var e=.5,r=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:e,verticalAlign:r}}function Ju(t,e,r,n,i){if(i){var a=t[n],o=e[a.fontStack],s=o&&o[a.glyph];if(s)for(var u=s.metrics.advance*a.scale,l=(t[n].x+u)*i,p=r;p<=n;p++)t[p].x-=l}}Ku[10]=!0,Ku[32]=!0,Ku[38]=!0,Ku[40]=!0,Ku[41]=!0,Ku[43]=!0,Ku[45]=!0,Ku[47]=!0,Ku[173]=!0,Ku[183]=!0,Ku[8203]=!0,Ku[8208]=!0,Ku[8211]=!0,Ku[8231]=!0,t.createCommonjsModule=e,t.window=self,t.Point=i,t.browser=V,t.getJSON=function(t,e){return at(c(t,{type:"json"}),e)},t.normalizeSpriteURL=function(t,e,r,n){var i=X(t);return U(t)?(i.path="/styles/v1"+i.path+"/sprite"+e+r,D(i,n)):(i.path+=""+e+r,Z(i))},t.ResourceType=et,t.getImage=pt,t.RGBAImage=Ra,t.ImagePosition=Us,t.Texture=Xs,t.potpack=Ds,t.normalizeGlyphsURL=function(t,e){if(!U(t))return t;var r=X(t);return r.path="/fonts/v1"+r.path,D(r,e)},t.getArrayBuffer=ot,t.parseGlyphPBF=function(t){return new Ys(t).readFields(fu,[])},t.asyncAll=function(t,e,r){if(!t.length)return r(null,[]);var n=t.length,i=new Array(t.length),a=null;t.forEach(function(t,o){e(t,function(t,e){t&&(a=t),i[o]=e,0==--n&&r(a,i)})})},t.isChar=hn,t.AlphaImage=ja,t.Properties=Dn,t.DataConstantProperty=Mn,t.styleSpec=mt,t.validateLight=$r,t.endsWith=v,t.emitValidationErrors=tn,t.validateStyle=Jr,t.extend=c,t.Evented=dt,t.sphericalToCartesian=function(t){var e=t[0],r=t[1],n=t[2];return r+=90,r*=Math.PI/180,n*=Math.PI/180,{x:e*Math.cos(r)*Math.sin(n),y:e*Math.sin(r)*Math.sin(n),z:e*Math.cos(n)}},t.number=le,t.Transitionable=In,t.warnOnce=w,t.uniqueId=f,t.Actor=vu,t.normalizeSourceURL=function(t,e){if(!U(t))return t;var r=X(t);return r.path="/v4/"+r.authority+".json",r.params.push("secure"),D(r,e)},t.pick=function(t,e){for(var r={},n=0;n<e.length;n++){var i=e[n];i in t&&(r[i]=t[i])}return r},t.canonicalizeTileset=function(t,e){if(!U(e))return t.tiles||[];for(var r=[],n=0,i=t.tiles;n<i.length;n+=1){var a=i[n],o=K(a);r.push(o)}return r},t.LngLatBounds=xu,t.mercatorXfromLng=wu,t.mercatorYfromLat=Au,t.Event=ft,t.ErrorEvent=yt,t.postTurnstileEvent=W,t.postMapLoadEvent=tt,t.normalizeTileURL=function(t,e,r){if(!e||!U(e))return t;var n=X(t),i=V.devicePixelRatio>=2||512===r?"@2x":"",a=M.supported?".webp":"$1";return n.path=n.path.replace(q,""+i+a),n.path="/v4"+n.path,D(n)},t.OverscaledTileID=Eu,t.EXTENT=Yi,t.MercatorCoordinate=zu,t.CanonicalTileID=Iu,t.StructArrayLayout4i8=Xn,t.rasterBoundsAttributes=Cu,t.SegmentVector=zi,t.getVideo=function(t,e){var r,n,i=self.document.createElement("video");i.muted=!0,i.onloadstart=function(){e(null,i)};for(var a=0;a<t.length;a++){var o=self.document.createElement("source");r=t[a],n=void 0,(n=self.document.createElement("a")).href=r,(n.protocol!==self.document.location.protocol||n.host!==self.document.location.host)&&(i.crossOrigin="Anonymous"),o.src=t[a],i.appendChild(o)}return{cancel:function(){}}},t.ValidationError=vt,t.bindAll=m,t.multiply=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],p=e[7],c=e[8],h=e[9],f=e[10],y=e[11],d=e[12],m=e[13],v=e[14],g=e[15],x=r[0],b=r[1],_=r[2],w=r[3];return t[0]=x*n+b*s+_*c+w*d,t[1]=x*i+b*u+_*h+w*m,t[2]=x*a+b*l+_*f+w*v,t[3]=x*o+b*p+_*y+w*g,x=r[4],b=r[5],_=r[6],w=r[7],t[4]=x*n+b*s+_*c+w*d,t[5]=x*i+b*u+_*h+w*m,t[6]=x*a+b*l+_*f+w*v,t[7]=x*o+b*p+_*y+w*g,x=r[8],b=r[9],_=r[10],w=r[11],t[8]=x*n+b*s+_*c+w*d,t[9]=x*i+b*u+_*h+w*m,t[10]=x*a+b*l+_*f+w*v,t[11]=x*o+b*p+_*y+w*g,x=r[12],b=r[13],_=r[14],w=r[15],t[12]=x*n+b*s+_*c+w*d,t[13]=x*i+b*u+_*h+w*m,t[14]=x*a+b*l+_*f+w*v,t[15]=x*o+b*p+_*y+w*g,t},t.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.translate=function(t,e,r){var n,i,a,o,s,u,l,p,c,h,f,y,d=r[0],m=r[1],v=r[2];return e===t?(t[12]=e[0]*d+e[4]*m+e[8]*v+e[12],t[13]=e[1]*d+e[5]*m+e[9]*v+e[13],t[14]=e[2]*d+e[6]*m+e[10]*v+e[14],t[15]=e[3]*d+e[7]*m+e[11]*v+e[15]):(n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],p=e[7],c=e[8],h=e[9],f=e[10],y=e[11],t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=u,t[6]=l,t[7]=p,t[8]=c,t[9]=h,t[10]=f,t[11]=y,t[12]=n*d+s*m+c*v+e[12],t[13]=i*d+u*m+h*v+e[13],t[14]=a*d+l*m+f*v+e[14],t[15]=o*d+p*m+y*v+e[15]),t},t.scale=function(t,e,r){var n=r[0],i=r[1],a=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.Color=Dt,t.isEqual=o,t.keysDifference=function(t,e){var r=[];for(var n in t)n in e||r.push(n);return r},t.Tile=ju,t.SourceFeatureState=Lu,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.rotateZ=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[0],o=e[1],s=e[2],u=e[3],l=e[4],p=e[5],c=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i+l*n,t[1]=o*i+p*n,t[2]=s*i+c*n,t[3]=u*i+h*n,t[4]=l*i-a*n,t[5]=p*i-o*n,t[6]=c*i-s*n,t[7]=h*i-u*n,t},t.evaluateSizeForZoom=function(t,e,r){if("constant"===t.functionType)return{uSizeT:0,uSize:t.layoutSize};if("source"===t.functionType)return{uSizeT:0,uSize:0};if("camera"===t.functionType){var n=t.propertyValue,i=t.zoomRange,a=t.sizeRange,o=l(br(n,r.specification).interpolationFactor(e,i.min,i.max),0,1);return{uSizeT:0,uSize:a.min+o*(a.max-a.min)}}var s=t.propertyValue,u=t.zoomRange;return{uSizeT:l(br(s,r.specification).interpolationFactor(e,u.min,u.max),0,1),uSize:0}},t.WritingMode=Ru,t.transformMat4=Sa,t.evaluateSizeForFeature=function(t,e,r){var n=e;return"source"===t.functionType?r.lowerSize/256:"composite"===t.functionType?le(r.lowerSize/256,r.upperSize/256,n.uSizeT):n.uSize},t.addDynamicAttributes=ks,t.properties=Ps,t.polygonIntersectsPolygon=ea,t.isMapboxURL=U,t.normalizeStyleURL=function(t,e){if(!U(t))return t;var r=X(t);return r.path="/styles/v1"+r.path,D(r,e)},t.createStyleLayer=function(t){return"custom"===t.type?new Ls(t):new Os[t.type](t)},t.clone=b,t.validateCustomStyleLayer=function(t){var e=[],r=t.id;return void 0===r&&e.push({message:"layers."+r+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+r+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+r+': property "renderingMode" must be either "2d" or "3d"'}),e},t.filterObject=x,t.mapObject=g,t.evented=wn,t.makeRequest=at,t.registerForPluginAvailability=function(t){return bn?t({pluginURL:bn,completionCallback:gn}):wn.once("pluginAvailable",t),t},t.ZoomHistory=cn,t.getReferrer=it,t.createLayout=Nn,t.UniformMatrix4f=Di,t.Uniform3f=Ti,t.Uniform1f=Ci,t.Uniform1i=Vi,t.Uniform2f=Mi,t.Uniform4f=Fi,t.create=ga,t.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.transformMat3=function(t,e,r){var n=e[0],i=e[1],a=e[2];return t[0]=n*r[0]+i*r[3]+a*r[6],t[1]=n*r[1]+i*r[4]+a*r[7],t[2]=n*r[2]+i*r[5]+a*r[8],t},t.create$1=function(){var t=new va(16);return va!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.ortho=function(t,e,r,n,i,a,o){var s=1/(e-r),u=1/(n-i),l=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*u,t[14]=(o+a)*l,t[15]=1,t},t.UniformColor=Li,t.clamp=l,t.StructArrayLayout2i4=Gn,t.StructArrayLayout2ui4=ui,t.ProgramConfiguration=Gi,t.StructArrayLayout1ui2=li,t.StructArrayLayout3ui6=si,t.wrap=p,t.create$2=function(){var t=new va(4);return va!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},t.rotate=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+a*s,t[1]=i*u+o*s,t[2]=n*-s+a*u,t[3]=i*-s+o*u,t},t.LngLat=bu,t.UnwrappedTileID=Bu,t.perspective=function(t,e,r,n,i){var a,o=1/Math.tan(e/2);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(a=1/(n-i),t[10]=(i+n)*a,t[14]=2*i*n*a):(t[10]=-1,t[14]=-2*n),t},t.rotateX=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],p=e[9],c=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*i+l*n,t[5]=o*i+p*n,t[6]=s*i+c*n,t[7]=u*i+h*n,t[8]=l*i-a*n,t[9]=p*i-o*n,t[10]=c*i-s*n,t[11]=h*i-u*n,t},t.mercatorZfromAltitude=Su,t.invert=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],p=e[8],c=e[9],h=e[10],f=e[11],y=e[12],d=e[13],m=e[14],v=e[15],g=r*s-n*o,x=r*u-i*o,b=r*l-a*o,_=n*u-i*s,w=n*l-a*s,A=i*l-a*u,S=p*d-c*y,k=p*m-h*y,z=p*v-f*y,I=c*m-h*d,B=c*v-f*d,E=h*v-f*m,P=g*E-x*B+b*I+_*z-w*k+A*S;return P?(P=1/P,t[0]=(s*E-u*B+l*I)*P,t[1]=(i*B-n*E-a*I)*P,t[2]=(d*A-m*w+v*_)*P,t[3]=(h*w-c*A-f*_)*P,t[4]=(u*z-o*E-l*k)*P,t[5]=(r*E-i*z+a*k)*P,t[6]=(m*b-y*A-v*x)*P,t[7]=(p*A-h*b+f*x)*P,t[8]=(o*B-s*z+l*S)*P,t[9]=(n*z-r*B-a*S)*P,t[10]=(y*w-d*b+v*g)*P,t[11]=(c*b-p*w-f*g)*P,t[12]=(s*k-o*I-u*S)*P,t[13]=(r*I-n*k+i*S)*P,t[14]=(d*x-y*_-m*g)*P,t[15]=(p*_-c*x+h*g)*P,t):null},t.ease=u,t.bezier=s,t.config=C,t.webpSupported=M,t.EvaluationParameters=Sn,t.version="0.53.1",t.setRTLTextPlugin=function(t,e){if(xn)throw new Error("setRTLTextPlugin cannot be called multiple times.");xn=!0,bn=V.resolveURL(t),gn=function(t){t?(xn=!1,bn=null,e&&e(t)):_n=!0},wn.fire(new ft("pluginAvailable",{pluginURL:bn,completionCallback:gn}))},t.featureFilter=Er,t.values=function(t){var e=[];for(var r in t)e.push(t[r]);return e},t.Anchor=xs,t.GLYPH_PBF_BORDER=mu,t.distToSegmentSquared=ua,t.allowsLetterSpacing=function(t){for(var e=0,r=t;e<r.length;e+=1)if(!yn(r[e].charCodeAt(0)))return!1;return!0},t.shapeText=function(t,e,r,n,i,a,o,s,u,l,p){var c=qu.fromFeature(t,r);p===Ru.vertical&&c.verticalizePunctuation();var h,f=[],y={positionedGlyphs:f,text:c,top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:p},d=An.processBidirectionalText,m=An.processStyledBidirectionalText;if(d&&1===c.sections.length){h=[];for(var v=0,g=d(c.toString(),Hu(c,s,n,e));v<g.length;v+=1){var x=g[v],b=new qu;b.text=x,b.sections=c.sections;for(var _=0;_<x.length;_++)b.sectionIndex.push(0);h.push(b)}}else if(m){h=[];for(var w=0,A=m(c.text,c.sectionIndex,Hu(c,s,n,e));w<A.length;w+=1){var S=A[w],k=new qu;k.text=S[0],k.sectionIndex=S[1],k.sections=c.sections,h.push(k)}}else h=function(t,e){for(var r=[],n=t.text,i=0,a=0,o=e;a<o.length;a+=1){var s=o[a];r.push(t.substring(i,s)),i=s}return i<n.length&&r.push(t.substring(i,n.length)),r}(c,Hu(c,s,n,e));return function(t,e,r,n,i,a,o,s,u){for(var l=0,p=-17,c=0,h=t.positionedGlyphs,f="right"===a?1:"left"===a?0:.5,y=0,d=r;y<d.length;y+=1){var m=d[y];m.trim();var v=m.getMaxScale();if(m.length()){for(var g=h.length,x=0;x<m.length();x++){var b=m.getSection(x),_=m.getCharCode(x),w=24*(v-b.scale),A=e[b.fontStack],S=A&&A[_];S&&(dn(_)&&o!==Ru.horizontal?(h.push({glyph:_,x:l,y:w,vertical:!0,scale:b.scale,fontStack:b.fontStack}),l+=u*b.scale+s):(h.push({glyph:_,x:l,y:p+w,vertical:!1,scale:b.scale,fontStack:b.fontStack}),l+=S.metrics.advance*b.scale+s))}if(h.length!==g){var k=l-s;c=Math.max(k,c),Ju(h,e,g,h.length-1,f)}l=0,p+=n*v}else p+=n}var z=Yu(i),I=z.horizontalAlign,B=z.verticalAlign;!function(t,e,r,n,i,a,o){for(var s=(e-r)*i,u=(-n*o+.5)*a,l=0;l<t.length;l++)t[l].x+=s,t[l].y+=u}(h,f,I,B,c,n,r.length);var E=p- -17;t.top+=-B*E,t.bottom=t.top+E,t.left+=-I*c,t.right=t.left+c}(y,e,h,i,a,o,p,s,l),!!f.length&&(y.text=y.text.toString(),y)},t.allowsVerticalWritingMode=fn,t.shapeIcon=function(t,e,r){var n=Yu(r),i=n.horizontalAlign,a=n.verticalAlign,o=e[0],s=e[1],u=o-t.displaySize[0]*i,l=u+t.displaySize[0],p=s-t.displaySize[1]*a;return{image:t,top:p,bottom:p+t.displaySize[1],left:u,right:l}},t.classifyRings=So,t.SIZE_PACK_FACTOR=256,t.SymbolBucket=Bs,t.register=sn,t.CollisionBoxArray=fi,t.DictionaryCoder=Mu,t.FeatureIndex=Ou,t.ImageAtlas=Rs,t.LineBucket=as,t.FillBucket=Bo,t.FillExtrusionBucket=Fo,t.mvt=Wo,t.Protobuf=Ys,t.DEMData=Vu,t.vectorTile=Wo,t.Point$1=i,t.pbf=Ys,t.createExpression=dr,t.plugin=An}),define(0,function(e){function t(e){var r=typeof e;if("number"===r||"boolean"===r||"string"===r||null==e)return JSON.stringify(e);if(Array.isArray(e)){for(var n="[",o=0,i=e;o<i.length;o+=1)n+=t(i[o])+",";return n+"]"}for(var a=Object.keys(e).sort(),s="{",l=0;l<a.length;l++)s+=JSON.stringify(a[l])+":"+t(e[a[l]])+",";return s+"}"}function r(r){for(var n="",o=0,i=e.refProperties;o<i.length;o+=1)n+="/"+t(r[i[o]]);return n}var n=function(e){e&&this.replace(e)};function o(e,t,r,n,o){if(void 0===t.segment)return!0;for(var i=t,a=t.segment+1,s=0;s>-r/2;){if(--a<0)return!1;s-=e[a].dist(i),i=e[a]}s+=e[a].dist(e[a+1]),a++;for(var l=[],u=0;s<r/2;){var h=e[a-1],c=e[a],p=e[a+1];if(!p)return!1;var f=h.angleTo(c)-c.angleTo(p);for(f=Math.abs((f+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:f}),u+=f;s-l[0].distance>n;)u-=l.shift().angleDelta;if(u>o)return!1;a++,s+=c.dist(p)}return!0}function i(e){for(var t=0,r=0;r<e.length-1;r++)t+=e[r].dist(e[r+1]);return t}function a(e,t,r){return e?.6*t*r:0}function s(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function l(t,r,n,l,u,h){for(var c=a(n,u,h),p=s(n,l)*h,f=0,d=i(t)/2,g=0;g<t.length-1;g++){var m=t[g],v=t[g+1],y=m.dist(v);if(f+y>d){var x=(d-f)/y,w=e.number(m.x,v.x,x),M=e.number(m.y,v.y,x),S=new e.Anchor(w,M,v.angleTo(m),g);return S._round(),!c||o(t,S,p,c,r)?S:void 0}f+=y}}function u(t,r,n,l,u,h,c,p,f){var d=a(l,h,c),g=s(l,u),m=g*c,v=0===t[0].x||t[0].x===f||0===t[0].y||t[0].y===f;return r-m<r/4&&(r=m+r/4),function t(r,n,a,s,l,u,h,c,p){for(var f=u/2,d=i(r),g=0,m=n-a,v=[],y=0;y<r.length-1;y++){for(var x=r[y],w=r[y+1],M=x.dist(w),S=w.angleTo(x);m+a<g+M;){var _=((m+=a)-g)/M,P=e.number(x.x,w.x,_),b=e.number(x.y,w.y,_);if(P>=0&&P<p&&b>=0&&b<p&&m-f>=0&&m+f<=d){var T=new e.Anchor(P,b,S,y);T._round(),s&&!o(r,T,u,s,l)||v.push(T)}}g+=M}return c||v.length||h||(v=t(r,g/2,a,s,l,u,h,!0,p)),v}(t,v?r/2*p%r:(g/2+2*h)*c*p%r,r,d,n,m,v,!1,f)}n.prototype.replace=function(e){this._layerConfigs={},this._layers={},this.update(e,[])},n.prototype.update=function(t,n){for(var o=this,i=0,a=t;i<a.length;i+=1){var s=a[i];this._layerConfigs[s.id]=s;var l=this._layers[s.id]=e.createStyleLayer(s);l._featureFilter=e.featureFilter(l.filter)}for(var u=0,h=n;u<h.length;u+=1){var c=h[u];delete this._layerConfigs[c],delete this._layers[c]}this.familiesBySource={};for(var p=0,f=function(e){for(var t={},n=0;n<e.length;n++){var o=r(e[n]),i=t[o];i||(i=t[o]=[]),i.push(e[n])}var a=[];for(var s in t)a.push(t[s]);return a}(e.values(this._layerConfigs));p<f.length;p+=1){var d=f[p].map(function(e){return o._layers[e.id]}),g=d[0];if("none"!==g.visibility){var m=g.source||"",v=this.familiesBySource[m];v||(v=this.familiesBySource[m]={});var y=g.sourceLayer||"_geojsonTileLayer",x=v[y];x||(x=v[y]=[]),x.push(d)}}};var h=function(t,r,n,o,i,a,s,l,u,h,c,p){var f=s.top*l-u,d=s.bottom*l+u,g=s.left*l-u,m=s.right*l+u;if(this.boxStartIndex=t.length,h){var v=d-f,y=m-g;v>0&&(v=Math.max(10*l,v),this._addLineCollisionCircles(t,r,n,n.segment,y,v,o,i,a,c))}else{if(p){var x=new e.Point(g,f),w=new e.Point(m,f),M=new e.Point(g,d),S=new e.Point(m,d),_=p*Math.PI/180;x._rotate(_),w._rotate(_),M._rotate(_),S._rotate(_),g=Math.min(x.x,w.x,M.x,S.x),m=Math.max(x.x,w.x,M.x,S.x),f=Math.min(x.y,w.y,M.y,S.y),d=Math.max(x.y,w.y,M.y,S.y)}t.emplaceBack(n.x,n.y,g,f,m,d,o,i,a,0,0)}this.boxEndIndex=t.length};h.prototype._addLineCollisionCircles=function(e,t,r,n,o,i,a,s,l,u){var h=i/2,c=Math.floor(o/h)||1,p=1+.4*Math.log(u)/Math.LN2,f=Math.floor(c*p/2),d=-i/2,g=r,m=n+1,v=d,y=-o/2,x=y-o/4;do{if(--m<0){if(v>y)return;m=0;break}v-=t[m].dist(g),g=t[m]}while(v>x);for(var w=t[m].dist(t[m+1]),M=-f;M<c+f;M++){var S=M*h,_=y+S;if(S<0&&(_+=S),S>o&&(_+=S-o),!(_<v)){for(;v+w<_;){if(v+=w,++m+1>=t.length)return;w=t[m].dist(t[m+1])}var P=_-v,b=t[m],T=t[m+1].sub(b)._unit()._mult(P)._add(b)._round(),I=Math.abs(_-d)<h?0:.8*(_-d);e.emplaceBack(T.x,T.y,-i/2,-i/2,i/2,i/2,a,s,l,i/2,I)}}};var c=function(e,t){if(void 0===e&&(e=[]),void 0===t&&(t=p),this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)};function p(e,t){return e<t?-1:e>t?1:0}function f(t,r,n){void 0===r&&(r=1),void 0===n&&(n=!1);for(var o=1/0,i=1/0,a=-1/0,s=-1/0,l=t[0],u=0;u<l.length;u++){var h=l[u];(!u||h.x<o)&&(o=h.x),(!u||h.y<i)&&(i=h.y),(!u||h.x>a)&&(a=h.x),(!u||h.y>s)&&(s=h.y)}var p=a-o,f=s-i,m=Math.min(p,f),v=m/2,y=new c([],d);if(0===m)return new e.Point(o,i);for(var x=o;x<a;x+=m)for(var w=i;w<s;w+=m)y.push(new g(x+v,w+v,v,t));for(var M=function(e){for(var t=0,r=0,n=0,o=e[0],i=0,a=o.length,s=a-1;i<a;s=i++){var l=o[i],u=o[s],h=l.x*u.y-u.x*l.y;r+=(l.x+u.x)*h,n+=(l.y+u.y)*h,t+=3*h}return new g(r/t,n/t,0,e)}(t),S=y.length;y.length;){var _=y.pop();(_.d>M.d||!M.d)&&(M=_,n&&console.log("found best %d after %d probes",Math.round(1e4*_.d)/1e4,S)),_.max-M.d<=r||(v=_.h/2,y.push(new g(_.p.x-v,_.p.y-v,v,t)),y.push(new g(_.p.x+v,_.p.y-v,v,t)),y.push(new g(_.p.x-v,_.p.y+v,v,t)),y.push(new g(_.p.x+v,_.p.y+v,v,t)),S+=4)}return n&&(console.log("num probes: "+S),console.log("best distance: "+M.d)),M.p}function d(e,t){return t.max-e.max}function g(t,r,n,o){this.p=new e.Point(t,r),this.h=n,this.d=function(t,r){for(var n=!1,o=1/0,i=0;i<r.length;i++)for(var a=r[i],s=0,l=a.length,u=l-1;s<l;u=s++){var h=a[s],c=a[u];h.y>t.y!=c.y>t.y&&t.x<(c.x-h.x)*(t.y-h.y)/(c.y-h.y)+h.x&&(n=!n),o=Math.min(o,e.distToSegmentSquared(t,h,c))}return(n?1:-1)*Math.sqrt(o)}(this.p,o),this.max=this.d+this.h*Math.SQRT2}c.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},c.prototype.pop=function(){if(0!==this.length){var e=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),e}},c.prototype.peek=function(){return this.data[0]},c.prototype._up=function(e){for(var t=this.data,r=this.compare,n=t[e];e>0;){var o=e-1>>1,i=t[o];if(r(n,i)>=0)break;t[e]=i,e=o}t[e]=n},c.prototype._down=function(e){for(var t=this.data,r=this.compare,n=this.length>>1,o=t[e];e<n;){var i=1+(e<<1),a=t[i],s=i+1;if(s<this.length&&r(t[s],a)<0&&(i=s,a=t[s]),r(a,o)>=0)break;t[e]=a,e=i}t[e]=o};var m=e.createCommonjsModule(function(e){e.exports=function(e,t){var r,n,o,i,a,s,l,u;for(r=3&e.length,n=e.length-r,o=t,a=3432918353,s=461845907,u=0;u<n;)l=255&e.charCodeAt(u)|(255&e.charCodeAt(++u))<<8|(255&e.charCodeAt(++u))<<16|(255&e.charCodeAt(++u))<<24,++u,o=27492+(65535&(i=5*(65535&(o=(o^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|o>>>19))+((5*(o>>>16)&65535)<<16)&4294967295))+((58964+(i>>>16)&65535)<<16);switch(l=0,r){case 3:l^=(255&e.charCodeAt(u+2))<<16;case 2:l^=(255&e.charCodeAt(u+1))<<8;case 1:o^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(u)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return o^=e.length,o=2246822507*(65535&(o^=o>>>16))+((2246822507*(o>>>16)&65535)<<16)&4294967295,o=3266489909*(65535&(o^=o>>>13))+((3266489909*(o>>>16)&65535)<<16)&4294967295,(o^=o>>>16)>>>0}}),v=e.createCommonjsModule(function(e){e.exports=function(e,t){for(var r,n=e.length,o=t^n,i=0;n>=4;)r=1540483477*(65535&(r=255&e.charCodeAt(i)|(255&e.charCodeAt(++i))<<8|(255&e.charCodeAt(++i))<<16|(255&e.charCodeAt(++i))<<24))+((1540483477*(r>>>16)&65535)<<16),o=1540483477*(65535&o)+((1540483477*(o>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),n-=4,++i;switch(n){case 3:o^=(255&e.charCodeAt(i+2))<<16;case 2:o^=(255&e.charCodeAt(i+1))<<8;case 1:o=1540483477*(65535&(o^=255&e.charCodeAt(i)))+((1540483477*(o>>>16)&65535)<<16)}return o=1540483477*(65535&(o^=o>>>13))+((1540483477*(o>>>16)&65535)<<16),(o^=o>>>15)>>>0}}),y=m,x=m,w=v;function M(t,r,n,o,i,a){t.createArrays();var s=512*t.overscaling;t.tilePixelRatio=e.EXTENT/s,t.compareText={},t.iconsNeedLinear=!1;var l=t.layers[0].layout,u=t.layers[0]._unevaluatedLayout._values,h={};if("composite"===t.textSizeData.functionType){var c=t.textSizeData.zoomRange,p=c.min,f=c.max;h.compositeTextSizes=[u["text-size"].possiblyEvaluate(new e.EvaluationParameters(p)),u["text-size"].possiblyEvaluate(new e.EvaluationParameters(f))]}if("composite"===t.iconSizeData.functionType){var d=t.iconSizeData.zoomRange,g=d.min,m=d.max;h.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new e.EvaluationParameters(g)),u["icon-size"].possiblyEvaluate(new e.EvaluationParameters(m))]}h.layoutTextSize=u["text-size"].possiblyEvaluate(new e.EvaluationParameters(t.zoom+1)),h.layoutIconSize=u["icon-size"].possiblyEvaluate(new e.EvaluationParameters(t.zoom+1)),h.textMaxSize=u["text-size"].possiblyEvaluate(new e.EvaluationParameters(18));for(var v=24*l.get("text-line-height"),y="map"===l.get("text-rotation-alignment")&&"point"!==l.get("symbol-placement"),x=l.get("text-keep-upright"),w=0,M=t.features;w<M.length;w+=1){var _=M[w],P=l.get("text-font").evaluate(_,{}).join(","),b=n,T={},I=_.text;if(I){var k=I.toString(),z=l.get("text-offset").evaluate(_,{}).map(function(e){return 24*e}),C=24*l.get("text-letter-spacing").evaluate(_,{}),E=e.allowsLetterSpacing(k)?C:0,A=l.get("text-anchor").evaluate(_,{}),L=l.get("text-justify").evaluate(_,{}),D="point"===l.get("symbol-placement")?24*l.get("text-max-width").evaluate(_,{}):0;T.horizontal=e.shapeText(I,r,P,D,v,A,L,E,z,24,e.WritingMode.horizontal),e.allowsVerticalWritingMode(k)&&y&&x&&(T.vertical=e.shapeText(I,r,P,D,v,A,L,E,z,24,e.WritingMode.vertical))}var O=void 0;if(_.icon){var N=o[_.icon];N&&(O=e.shapeIcon(i[_.icon],l.get("icon-offset").evaluate(_,{}),l.get("icon-anchor").evaluate(_,{})),void 0===t.sdfIcons?t.sdfIcons=N.sdf:t.sdfIcons!==N.sdf&&e.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),N.pixelRatio!==t.pixelRatio?t.iconsNeedLinear=!0:0!==l.get("icon-rotate").constantOr(1)&&(t.iconsNeedLinear=!0))}(T.horizontal||O)&&S(t,_,T,O,b,h)}a&&t.generateCollisionDebugBuffers()}function S(t,r,n,o,i,a){var s=a.layoutTextSize.evaluate(r,{}),c=a.layoutIconSize.evaluate(r,{}),p=a.textMaxSize.evaluate(r,{});void 0===p&&(p=s);var d=t.layers[0].layout,g=d.get("text-offset").evaluate(r,{}),m=d.get("icon-offset").evaluate(r,{}),v=s/24,x=t.tilePixelRatio*v,w=t.tilePixelRatio*p/24,M=t.tilePixelRatio*c,S=t.tilePixelRatio*d.get("symbol-spacing"),T=d.get("text-padding")*t.tilePixelRatio,I=d.get("icon-padding")*t.tilePixelRatio,k=d.get("text-max-angle")/180*Math.PI,z="map"===d.get("text-rotation-alignment")&&"point"!==d.get("symbol-placement"),C="map"===d.get("icon-rotation-alignment")&&"point"!==d.get("symbol-placement"),E=d.get("symbol-placement"),A=S/2,L=function(s,l){l.x<0||l.x>=e.EXTENT||l.y<0||l.y>=e.EXTENT||function(t,r,n,o,i,a,s,l,u,c,p,f,d,g,m,v,x,w,M,S,b){var T,I,k=t.addToLineVertexArray(r,n),z=0,C=0,E=0,A=y(o.horizontal?o.horizontal.text:""),L=[];if(o.horizontal){var D=a.layout.get("text-rotate").evaluate(M,{});T=new h(s,n,r,l,u,c,o.horizontal,p,f,d,t.overscaling,D),C+=P(t,r,o.horizontal,a,d,M,g,k,o.vertical?e.WritingMode.horizontal:e.WritingMode.horizontalOnly,L,S,b),o.vertical&&(E+=P(t,r,o.vertical,a,d,M,g,k,e.WritingMode.vertical,L,S,b))}var O=T?T.boxStartIndex:t.collisionBoxArray.length,N=T?T.boxEndIndex:t.collisionBoxArray.length;if(i){var R=function(t,r,n,o,i,a){var s,l,u,h,c=r.image,p=n.layout,f=r.top-1/c.pixelRatio,d=r.left-1/c.pixelRatio,g=r.bottom+1/c.pixelRatio,m=r.right+1/c.pixelRatio;if("none"!==p.get("icon-text-fit")&&i){var v=m-d,y=g-f,x=p.get("text-size").evaluate(a,{})/24,w=i.left*x,M=i.right*x,S=i.top*x,_=M-w,P=i.bottom*x-S,b=p.get("icon-text-fit-padding")[0],T=p.get("icon-text-fit-padding")[1],I=p.get("icon-text-fit-padding")[2],k=p.get("icon-text-fit-padding")[3],z="width"===p.get("icon-text-fit")?.5*(P-y):0,C="height"===p.get("icon-text-fit")?.5*(_-v):0,E="width"===p.get("icon-text-fit")||"both"===p.get("icon-text-fit")?_:v,A="height"===p.get("icon-text-fit")||"both"===p.get("icon-text-fit")?P:y;s=new e.Point(w+C-k,S+z-b),l=new e.Point(w+C+T+E,S+z-b),u=new e.Point(w+C+T+E,S+z+I+A),h=new e.Point(w+C-k,S+z+I+A)}else s=new e.Point(d,f),l=new e.Point(m,f),u=new e.Point(m,g),h=new e.Point(d,g);var L=n.layout.get("icon-rotate").evaluate(a,{})*Math.PI/180;if(L){var D=Math.sin(L),O=Math.cos(L),N=[O,-D,D,O];s._matMult(N),l._matMult(N),h._matMult(N),u._matMult(N)}return[{tl:s,tr:l,bl:h,br:u,tex:c.paddedRect,writingMode:void 0,glyphOffset:[0,0]}]}(0,i,a,0,o.horizontal,M),F=a.layout.get("icon-rotate").evaluate(M,{});I=new h(s,n,r,l,u,c,i,m,v,!1,t.overscaling,F),z=4*R.length;var B=t.iconSizeData,Z=null;"source"===B.functionType?(Z=[e.SIZE_PACK_FACTOR*a.layout.get("icon-size").evaluate(M,{})])[0]>_&&e.warnOnce(t.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'):"composite"===B.functionType&&((Z=[e.SIZE_PACK_FACTOR*b.compositeIconSizes[0].evaluate(M,{}),e.SIZE_PACK_FACTOR*b.compositeIconSizes[1].evaluate(M,{})])[0]>_||Z[1]>_)&&e.warnOnce(t.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'),t.addSymbols(t.icon,R,Z,w,x,M,!1,r,k.lineStartIndex,k.lineLength)}var j=I?I.boxStartIndex:t.collisionBoxArray.length,G=I?I.boxEndIndex:t.collisionBoxArray.length;t.glyphOffsetArray.length>=e.SymbolBucket.MAX_GLYPHS&&e.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),t.symbolInstances.emplaceBack(r.x,r.y,L.length>0?L[0]:-1,L.length>1?L[1]:-1,A,O,N,j,G,l,C,E,z,0)}(t,l,s,n,o,t.layers[0],t.collisionBoxArray,r.index,r.sourceLayerIndex,t.index,x,T,z,g,M,I,C,m,r,i,a)};if("line"===E)for(var D=0,O=function(t,r,n,o,i){for(var a=[],s=0;s<t.length;s++)for(var l=t[s],u=void 0,h=0;h<l.length-1;h++){var c=l[h],p=l[h+1];c.x<0&&p.x<0||(c.x<0?c=new e.Point(0,c.y+(p.y-c.y)*((0-c.x)/(p.x-c.x)))._round():p.x<0&&(p=new e.Point(0,c.y+(p.y-c.y)*((0-c.x)/(p.x-c.x)))._round()),c.y<0&&p.y<0||(c.y<0?c=new e.Point(c.x+(p.x-c.x)*((0-c.y)/(p.y-c.y)),0)._round():p.y<0&&(p=new e.Point(c.x+(p.x-c.x)*((0-c.y)/(p.y-c.y)),0)._round()),c.x>=o&&p.x>=o||(c.x>=o?c=new e.Point(o,c.y+(p.y-c.y)*((o-c.x)/(p.x-c.x)))._round():p.x>=o&&(p=new e.Point(o,c.y+(p.y-c.y)*((o-c.x)/(p.x-c.x)))._round()),c.y>=i&&p.y>=i||(c.y>=i?c=new e.Point(c.x+(p.x-c.x)*((i-c.y)/(p.y-c.y)),i)._round():p.y>=i&&(p=new e.Point(c.x+(p.x-c.x)*((i-c.y)/(p.y-c.y)),i)._round()),u&&c.equals(u[u.length-1])||(u=[c],a.push(u)),u.push(p)))))}return a}(r.geometry,0,0,e.EXTENT,e.EXTENT);D<O.length;D+=1)for(var N=O[D],R=0,F=u(N,S,k,n.vertical||n.horizontal,o,24,w,t.overscaling,e.EXTENT);R<F.length;R+=1){var B=F[R],Z=n.horizontal;Z&&b(t,Z.text,A,B)||L(N,B)}else if("line-center"===E)for(var j=0,G=r.geometry;j<G.length;j+=1){var J=G[j];if(J.length>1){var X=l(J,k,n.vertical||n.horizontal,o,24,w);X&&L(J,X)}}else if("Polygon"===r.type)for(var V=0,W=e.classifyRings(r.geometry,0);V<W.length;V+=1){var Y=W[V],q=f(Y,16);L(Y[0],new e.Anchor(q.x,q.y,0))}else if("LineString"===r.type)for(var U=0,K=r.geometry;U<K.length;U+=1){var H=K[U];L(H,new e.Anchor(H[0].x,H[0].y,0))}else if("Point"===r.type)for(var Q=0,$=r.geometry;Q<$.length;Q+=1)for(var ee=0,te=$[Q];ee<te.length;ee+=1){var re=te[ee];L([re],new e.Anchor(re.x,re.y,0))}}y.murmur3=x,y.murmur2=w;var _=65535;function P(t,r,n,o,i,a,s,l,u,h,c,p){var f=function(t,r,n,o,i,a){for(var s=n.layout.get("text-rotate").evaluate(i,{})*Math.PI/180,l=n.layout.get("text-offset").evaluate(i,{}).map(function(e){return 24*e}),u=r.positionedGlyphs,h=[],c=0;c<u.length;c++){var p=u[c],f=a[p.fontStack],d=f&&f[p.glyph];if(d){var g=d.rect;if(g){var m=e.GLYPH_PBF_BORDER+1,v=d.metrics.advance*p.scale/2,y=o?[p.x+v,p.y]:[0,0],x=o?[0,0]:[p.x+v+l[0],p.y+l[1]],w=(d.metrics.left-m)*p.scale-v+x[0],M=(-d.metrics.top-m)*p.scale+x[1],S=w+g.w*p.scale,_=M+g.h*p.scale,P=new e.Point(w,M),b=new e.Point(S,M),T=new e.Point(w,_),I=new e.Point(S,_);if(o&&p.vertical){var k=new e.Point(-v,v),z=-Math.PI/2,C=new e.Point(5,0);P._rotateAround(z,k)._add(C),b._rotateAround(z,k)._add(C),T._rotateAround(z,k)._add(C),I._rotateAround(z,k)._add(C)}if(s){var E=Math.sin(s),A=Math.cos(s),L=[A,-E,E,A];P._matMult(L),b._matMult(L),T._matMult(L),I._matMult(L)}h.push({tl:P,tr:b,bl:T,br:I,tex:g,writingMode:r.writingMode,glyphOffset:y})}}}return h}(0,n,o,i,a,c),d=t.textSizeData,g=null;return"source"===d.functionType?(g=[e.SIZE_PACK_FACTOR*o.layout.get("text-size").evaluate(a,{})])[0]>_&&e.warnOnce(t.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'):"composite"===d.functionType&&((g=[e.SIZE_PACK_FACTOR*p.compositeTextSizes[0].evaluate(a,{}),e.SIZE_PACK_FACTOR*p.compositeTextSizes[1].evaluate(a,{})])[0]>_||g[1]>_)&&e.warnOnce(t.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'),t.addSymbols(t.text,f,g,s,i,a,u,r,l.lineStartIndex,l.lineLength),h.push(t.text.placedSymbolArray.length-1),4*f.length}function b(e,t,r,n){var o=e.compareText;if(t in o){for(var i=o[t],a=i.length-1;a>=0;a--)if(n.dist(i[a])<r)return!0}else o[t]=[];return o[t].push(n),!1}var T=function(t){var r={},n=[];for(var o in t){var i=t[o],a=r[o]={};for(var s in i){var l=i[+s];if(l&&0!==l.bitmap.width&&0!==l.bitmap.height){var u={x:0,y:0,w:l.bitmap.width+2,h:l.bitmap.height+2};n.push(u),a[s]={rect:u,metrics:l.metrics}}}}var h=e.potpack(n),c=h.w,p=h.h,f=new e.AlphaImage({width:c||1,height:p||1});for(var d in t){var g=t[d];for(var m in g){var v=g[+m];if(v&&0!==v.bitmap.width&&0!==v.bitmap.height){var y=r[d][m].rect;e.AlphaImage.copy(v.bitmap,f,{x:0,y:0},{x:y.x+1,y:y.y+1},v.bitmap)}}}this.image=f,this.positions=r};e.register("GlyphAtlas",T);var I=function(t){this.tileID=new e.OverscaledTileID(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies};function k(t,r){for(var n=new e.EvaluationParameters(r),o=0,i=t;o<i.length;o+=1)i[o].recalculate(n)}I.prototype.parse=function(t,r,n,o){var i=this;this.status="parsing",this.data=t,this.collisionBoxArray=new e.CollisionBoxArray;var a=new e.DictionaryCoder(Object.keys(t.layers).sort()),s=new e.FeatureIndex(this.tileID);s.bucketLayerIDs=[];var l,u,h,c,p={},f={featureIndex:s,iconDependencies:{},patternDependencies:{},glyphDependencies:{}},d=r.familiesBySource[this.source];for(var g in d){var m=t.layers[g];if(m){1===m.version&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+g+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var v=a.encode(g),y=[],x=0;x<m.length;x++){var w=m.feature(x);y.push({feature:w,index:x,sourceLayerIndex:v})}for(var S=0,_=d[g];S<_.length;S+=1){var P=_[S],b=P[0];b.minzoom&&this.zoom<Math.floor(b.minzoom)||b.maxzoom&&this.zoom>=b.maxzoom||"none"!==b.visibility&&(k(P,this.zoom),(p[b.id]=b.createBucket({index:s.bucketLayerIDs.length,layers:P,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:v,sourceID:this.source})).populate(y,f),s.bucketLayerIDs.push(P.map(function(e){return e.id})))}}}var I=e.mapObject(f.glyphDependencies,function(e){return Object.keys(e).map(Number)});Object.keys(I).length?n.send("getGlyphs",{uid:this.uid,stacks:I},function(e,t){l||(l=e,u=t,E.call(i))}):u={};var z=Object.keys(f.iconDependencies);z.length?n.send("getImages",{icons:z},function(e,t){l||(l=e,h=t,E.call(i))}):h={};var C=Object.keys(f.patternDependencies);function E(){if(l)return o(l);if(u&&h&&c){var t=new T(u),r=new e.ImageAtlas(h,c);for(var n in p){var i=p[n];i instanceof e.SymbolBucket?(k(i.layers,this.zoom),M(i,u,t.positions,h,r.iconPositions,this.showCollisionBoxes)):i.hasPattern&&(i instanceof e.LineBucket||i instanceof e.FillBucket||i instanceof e.FillExtrusionBucket)&&(k(i.layers,this.zoom),i.addFeatures(f,r.patternPositions))}this.status="done",o(null,{buckets:e.values(p).filter(function(e){return!e.isEmpty()}),featureIndex:s,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,imageAtlas:r,glyphMap:this.returnDependencies?u:null,iconMap:this.returnDependencies?h:null,glyphPositions:this.returnDependencies?t.positions:null})}}C.length?n.send("getImages",{icons:C},function(e,t){l||(l=e,c=t,E.call(i))}):c={},E.call(this)};var z="undefined"!=typeof performance,C={getEntriesByName:function(e){return!!(z&&performance&&performance.getEntriesByName)&&performance.getEntriesByName(e)},mark:function(e){return!!(z&&performance&&performance.mark)&&performance.mark(e)},measure:function(e,t,r){return!!(z&&performance&&performance.measure)&&performance.measure(e,t,r)},clearMarks:function(e){return!!(z&&performance&&performance.clearMarks)&&performance.clearMarks(e)},clearMeasures:function(e){return!!(z&&performance&&performance.clearMeasures)&&performance.clearMeasures(e)}},E=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},C.mark(this._marks.start)};function A(t,r){var n=e.getArrayBuffer(t.request,function(t,n,o,i){t?r(t):n&&r(null,{vectorTile:new e.mvt.VectorTile(new e.Protobuf(n)),rawData:n,cacheControl:o,expires:i})});return function(){n.cancel(),r()}}E.prototype.finish=function(){C.mark(this._marks.end);var e=C.getEntriesByName(this._marks.measure);return 0===e.length&&(C.measure(this._marks.measure,this._marks.start,this._marks.end),e=C.getEntriesByName(this._marks.measure),C.clearMarks(this._marks.start),C.clearMarks(this._marks.end),C.clearMeasures(this._marks.measure)),e},C.Performance=E;var L=function(e,t,r){this.actor=e,this.layerIndex=t,this.loadVectorData=r||A,this.loading={},this.loaded={}};L.prototype.loadTile=function(t,r){var n=this,o=t.uid;this.loading||(this.loading={});var i=!!(t&&t.request&&t.request.collectResourceTiming)&&new C.Performance(t.request),a=this.loading[o]=new I(t);a.abort=this.loadVectorData(t,function(t,s){if(delete n.loading[o],t||!s)return a.status="done",n.loaded[o]=a,r(t);var l=s.rawData,u={};s.expires&&(u.expires=s.expires),s.cacheControl&&(u.cacheControl=s.cacheControl);var h={};if(i){var c=i.finish();c&&(h.resourceTiming=JSON.parse(JSON.stringify(c)))}a.vectorTile=s.vectorTile,a.parse(s.vectorTile,n.layerIndex,n.actor,function(t,n){if(t||!n)return r(t);r(null,e.extend({rawTileData:l.slice(0)},n,u,h))}),n.loaded=n.loaded||{},n.loaded[o]=a})},L.prototype.reloadTile=function(e,t){var r=this.loaded,n=e.uid,o=this;if(r&&r[n]){var i=r[n];i.showCollisionBoxes=e.showCollisionBoxes;var a=function(e,r){var n=i.reloadCallback;n&&(delete i.reloadCallback,i.parse(i.vectorTile,o.layerIndex,o.actor,n)),t(e,r)};"parsing"===i.status?i.reloadCallback=a:"done"===i.status&&(i.vectorTile?i.parse(i.vectorTile,this.layerIndex,this.actor,a):a())}},L.prototype.abortTile=function(e,t){var r=this.loading,n=e.uid;r&&r[n]&&r[n].abort&&(r[n].abort(),delete r[n]),t()},L.prototype.removeTile=function(e,t){var r=this.loaded,n=e.uid;r&&r[n]&&delete r[n],t()};var D=function(){this.loaded={}};D.prototype.loadTile=function(t,r){var n=t.uid,o=t.encoding,i=t.rawImageData,a=new e.DEMData(n,i,o);this.loaded=this.loaded||{},this.loaded[n]=a,r(null,a)},D.prototype.removeTile=function(e){var t=this.loaded,r=e.uid;t&&t[r]&&delete t[r]};var O={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:6356752.3142};function N(e){var t=0;if(e&&e.length>0){t+=Math.abs(R(e[0]));for(var r=1;r<e.length;r++)t-=Math.abs(R(e[r]))}return t}function R(e){var t,r,n,o,i,a,s=0,l=e.length;if(l>2){for(a=0;a<l;a++)a===l-2?(n=l-2,o=l-1,i=0):a===l-1?(n=l-1,o=0,i=1):(n=a,o=a+1,i=a+2),t=e[n],r=e[o],s+=(F(e[i][0])-F(t[0]))*Math.sin(F(r[1]));s=s*O.RADIUS*O.RADIUS/2}return s}function F(e){return e*Math.PI/180}var B={geometry:function e(t){var r,n=0;switch(t.type){case"Polygon":return N(t.coordinates);case"MultiPolygon":for(r=0;r<t.coordinates.length;r++)n+=N(t.coordinates[r]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(r=0;r<t.geometries.length;r++)n+=e(t.geometries[r]);return n}},ring:R};function j(e,t){return function(r){return e(r,t)}}function G(e,t){t=!!t,e[0]=J(e[0],t);for(var r=1;r<e.length;r++)e[r]=J(e[r],!t);return e}function J(e,t){return function(e){return B.ring(e)>=0}(e)===t?e:e.reverse()}var X=e.mvt.VectorTileFeature.prototype.toGeoJSON,V=function(t){this._feature=t,this.extent=e.EXTENT,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))};V.prototype.loadGeometry=function(){if(1===this._feature.type){for(var t=[],r=0,n=this._feature.geometry;r<n.length;r+=1){var o=n[r];t.push([new e.Point(o[0],o[1])])}return t}for(var i=[],a=0,s=this._feature.geometry;a<s.length;a+=1){for(var l=[],u=0,h=s[a];u<h.length;u+=1){var c=h[u];l.push(new e.Point(c[0],c[1]))}i.push(l)}return i},V.prototype.toGeoJSON=function(e,t,r){return X.call(this,e,t,r)};var W=function(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=t.length,this._features=t};W.prototype.feature=function(e){return new V(this._features[e])};var Y=e.vectorTile.VectorTileFeature,q=U;function U(e,t){this.options=t||{},this.features=e,this.length=e.length}function K(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}U.prototype.feature=function(e){return new K(this.features[e],this.options.extent)},K.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var r=0;r<t.length;r++){for(var n=t[r],o=[],i=0;i<n.length;i++)o.push(new e.Point$1(n[i][0],n[i][1]));this.geometry.push(o)}return this.geometry},K.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,r=-1/0,n=1/0,o=-1/0,i=0;i<e.length;i++)for(var a=e[i],s=0;s<a.length;s++){var l=a[s];t=Math.min(t,l.x),r=Math.max(r,l.x),n=Math.min(n,l.y),o=Math.max(o,l.y)}return[t,n,r,o]},K.prototype.toGeoJSON=Y.prototype.toGeoJSON;var H=te,Q=te,ee=q;function te(t){var r=new e.pbf;return function(e,t){for(var r in e.layers)t.writeMessage(3,re,e.layers[r])}(t,r),r.finish()}function re(e,t){var r;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var n={keys:[],values:[],keycache:{},valuecache:{}};for(r=0;r<e.length;r++)n.feature=e.feature(r),t.writeMessage(2,ne,n);var o=n.keys;for(r=0;r<o.length;r++)t.writeStringField(3,o[r]);var i=n.values;for(r=0;r<i.length;r++)t.writeMessage(4,le,i[r])}function ne(e,t){var r=e.feature;void 0!==r.id&&t.writeVarintField(1,r.id),t.writeMessage(2,oe,e),t.writeVarintField(3,r.type),t.writeMessage(4,se,r)}function oe(e,t){var r=e.feature,n=e.keys,o=e.values,i=e.keycache,a=e.valuecache;for(var s in r.properties){var l=i[s];void 0===l&&(n.push(s),l=n.length-1,i[s]=l),t.writeVarint(l);var u=r.properties[s],h=typeof u;"string"!==h&&"boolean"!==h&&"number"!==h&&(u=JSON.stringify(u));var c=h+":"+u,p=a[c];void 0===p&&(o.push(u),p=o.length-1,a[c]=p),t.writeVarint(p)}}function ie(e,t){return(t<<3)+(7&e)}function ae(e){return e<<1^e>>31}function se(e,t){for(var r=e.loadGeometry(),n=e.type,o=0,i=0,a=r.length,s=0;s<a;s++){var l=r[s],u=1;1===n&&(u=l.length),t.writeVarint(ie(1,u));for(var h=3===n?l.length-1:l.length,c=0;c<h;c++){1===c&&1!==n&&t.writeVarint(ie(2,h-1));var p=l[c].x-o,f=l[c].y-i;t.writeVarint(ae(p)),t.writeVarint(ae(f)),o+=p,i+=f}3===n&&t.writeVarint(ie(7,1))}}function le(e,t){var r=typeof e;"string"===r?t.writeStringField(1,e):"boolean"===r?t.writeBooleanField(7,e):"number"===r&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function he(e,t,r,n){ce(e,r,n),ce(t,2*r,2*n),ce(t,2*r+1,2*n+1)}function ce(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function pe(e,t,r,n){var o=e-r,i=t-n;return o*o+i*i}H.fromVectorTileJs=Q,H.fromGeojsonVt=function(e,t){t=t||{};var r={};for(var n in e)r[n]=new q(e[n].features,t),r[n].name=n,r[n].version=t.version,r[n].extent=t.extent;return te({layers:r})},H.GeoJSONWrapper=ee;var fe=function(e){return e[0]},de=function(e){return e[1]},ge=function(e,t,r,n,o){void 0===t&&(t=fe),void 0===r&&(r=de),void 0===n&&(n=64),void 0===o&&(o=Float64Array),this.nodeSize=n,this.points=e;for(var i=e.length<65536?Uint16Array:Uint32Array,a=this.ids=new i(e.length),s=this.coords=new o(2*e.length),l=0;l<e.length;l++)a[l]=l,s[2*l]=t(e[l]),s[2*l+1]=r(e[l]);!function ue(e,t,r,n,o,i){if(!(o-n<=r)){var a=n+o>>1;!function e(t,r,n,o,i,a){for(;i>o;){if(i-o>600){var s=i-o+1,l=n-o+1,u=Math.log(s),h=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*h*(s-h)/s)*(l-s/2<0?-1:1);e(t,r,n,Math.max(o,Math.floor(n-l*h/s+c)),Math.min(i,Math.floor(n+(s-l)*h/s+c)),a)}var d=r[2*n+a],g=o,m=i;for(he(t,r,o,n),r[2*i+a]>d&&he(t,r,o,i);g<m;){for(he(t,r,g,m),g++,m--;r[2*g+a]<d;)g++;for(;r[2*m+a]>d;)m--}r[2*o+a]===d?he(t,r,o,m):he(t,r,++m,i),m<=n&&(o=m+1),n<=m&&(i=m-1)}}(e,t,a,n,o,i%2),ue(e,t,r,n,a-1,i+1),ue(e,t,r,a+1,o,i+1)}}(a,s,n,0,a.length-1,0)};ge.prototype.range=function(e,t,r,n){return function(e,t,r,n,o,i,a){for(var s,l,u=[0,e.length-1,0],h=[];u.length;){var c=u.pop(),p=u.pop(),f=u.pop();if(p-f<=a)for(var d=f;d<=p;d++)s=t[2*d],l=t[2*d+1],s>=r&&s<=o&&l>=n&&l<=i&&h.push(e[d]);else{var g=Math.floor((f+p)/2);s=t[2*g],l=t[2*g+1],s>=r&&s<=o&&l>=n&&l<=i&&h.push(e[g]);var m=(c+1)%2;(0===c?r<=s:n<=l)&&(u.push(f),u.push(g-1),u.push(m)),(0===c?o>=s:i>=l)&&(u.push(g+1),u.push(p),u.push(m))}}return h}(this.ids,this.coords,e,t,r,n,this.nodeSize)},ge.prototype.within=function(e,t,r){return function(e,t,r,n,o,i){for(var a=[0,e.length-1,0],s=[],l=o*o;a.length;){var u=a.pop(),h=a.pop(),c=a.pop();if(h-c<=i)for(var p=c;p<=h;p++)pe(t[2*p],t[2*p+1],r,n)<=l&&s.push(e[p]);else{var f=Math.floor((c+h)/2),d=t[2*f],g=t[2*f+1];pe(d,g,r,n)<=l&&s.push(e[f]);var m=(u+1)%2;(0===u?r-o<=d:n-o<=g)&&(a.push(c),a.push(f-1),a.push(m)),(0===u?r+o>=d:n+o>=g)&&(a.push(f+1),a.push(h),a.push(m))}}return s}(this.ids,this.coords,e,t,r,this.nodeSize)};var me={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,map:function(e){return e}},ve=function(e){this.options=Pe(Object.create(me),e),this.trees=new Array(this.options.maxZoom+1)};function ye(e,t,r,n,o){return{x:e,y:t,zoom:1/0,id:r,parentId:-1,numPoints:n,properties:o}}function xe(e,t){var r=e.geometry.coordinates,n=r[0],o=r[1];return{x:Se(n),y:_e(o),zoom:1/0,index:t,parentId:-1}}function we(e){return{type:"Feature",id:e.id,properties:Me(e),geometry:{type:"Point",coordinates:[(n=e.x,360*(n-.5)),(t=e.y,r=(180-360*t)*Math.PI/180,360*Math.atan(Math.exp(r))/Math.PI-90)]}};var t,r,n}function Me(e){var t=e.numPoints,r=t>=1e4?Math.round(t/1e3)+"k":t>=1e3?Math.round(t/100)/10+"k":t;return Pe(Pe({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:r})}function Se(e){return e/360+.5}function _e(e){var t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function Pe(e,t){for(var r in t)e[r]=t[r];return e}function be(e){return e.x}function Te(e){return e.y}function Ie(e,t,r,n,o,i){var a=o-r,s=i-n;if(0!==a||0!==s){var l=((e-r)*a+(t-n)*s)/(a*a+s*s);l>1?(r=o,n=i):l>0&&(r+=a*l,n+=s*l)}return(a=e-r)*a+(s=t-n)*s}function ke(e,t,r,n){var o={id:void 0===e?null:e,type:t,geometry:r,tags:n,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,r=e.type;if("Point"===r||"MultiPoint"===r||"LineString"===r)ze(e,t);else if("Polygon"===r||"MultiLineString"===r)for(var n=0;n<t.length;n++)ze(e,t[n]);else if("MultiPolygon"===r)for(n=0;n<t.length;n++)for(var o=0;o<t[n].length;o++)ze(e,t[n][o])}(o),o}function ze(e,t){for(var r=0;r<t.length;r+=3)e.minX=Math.min(e.minX,t[r]),e.minY=Math.min(e.minY,t[r+1]),e.maxX=Math.max(e.maxX,t[r]),e.maxY=Math.max(e.maxY,t[r+1])}function Ce(e,t,r,n){if(t.geometry){var o=t.geometry.coordinates,i=t.geometry.type,a=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2),s=[],l=t.id;if(r.promoteId?l=t.properties[r.promoteId]:r.generateId&&(l=n||0),"Point"===i)Ee(o,s);else if("MultiPoint"===i)for(var u=0;u<o.length;u++)Ee(o[u],s);else if("LineString"===i)Ae(o,s,a,!1);else if("MultiLineString"===i){if(r.lineMetrics){for(u=0;u<o.length;u++)s=[],Ae(o[u],s,a,!1),e.push(ke(l,"LineString",s,t.properties));return}Le(o,s,a,!1)}else if("Polygon"===i)Le(o,s,a,!0);else{if("MultiPolygon"!==i){if("GeometryCollection"===i){for(u=0;u<t.geometry.geometries.length;u++)Ce(e,{id:l,geometry:t.geometry.geometries[u],properties:t.properties},r,n);return}throw new Error("Input data is not a valid GeoJSON object.")}for(u=0;u<o.length;u++){var h=[];Le(o[u],h,a,!0),s.push(h)}}e.push(ke(l,i,s,t.properties))}}function Ee(e,t){t.push(De(e[0])),t.push(Oe(e[1])),t.push(0)}function Ae(e,t,r,n){for(var o,i,a=0,s=0;s<e.length;s++){var l=De(e[s][0]),u=Oe(e[s][1]);t.push(l),t.push(u),t.push(0),s>0&&(a+=n?(o*u-l*i)/2:Math.sqrt(Math.pow(l-o,2)+Math.pow(u-i,2))),o=l,i=u}var h=t.length-3;t[2]=1,function e(t,r,n,o){for(var i,a=o,s=n-r>>1,l=n-r,u=t[r],h=t[r+1],c=t[n],p=t[n+1],f=r+3;f<n;f+=3){var d=Ie(t[f],t[f+1],u,h,c,p);if(d>a)i=f,a=d;else if(d===a){var g=Math.abs(f-s);g<l&&(i=f,l=g)}}a>o&&(i-r>3&&e(t,r,i,o),t[i+2]=a,n-i>3&&e(t,i,n,o))}(t,0,h,r),t[h+2]=1,t.size=Math.abs(a),t.start=0,t.end=t.size}function Le(e,t,r,n){for(var o=0;o<e.length;o++){var i=[];Ae(e[o],i,r,n),t.push(i)}}function De(e){return e/360+.5}function Oe(e){var t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function Ne(e,t,r,n,o,i,a,s){if(n/=t,i>=(r/=t)&&a<n)return e;if(a<r||i>=n)return null;for(var l=[],u=0;u<e.length;u++){var h=e[u],c=h.geometry,p=h.type,f=0===o?h.minX:h.minY,d=0===o?h.maxX:h.maxY;if(f>=r&&d<n)l.push(h);else if(!(d<r||f>=n)){var g=[];if("Point"===p||"MultiPoint"===p)Re(c,g,r,n,o);else if("LineString"===p)Fe(c,g,r,n,o,!1,s.lineMetrics);else if("MultiLineString"===p)Ze(c,g,r,n,o,!1);else if("Polygon"===p)Ze(c,g,r,n,o,!0);else if("MultiPolygon"===p)for(var m=0;m<c.length;m++){var v=[];Ze(c[m],v,r,n,o,!0),v.length&&g.push(v)}if(g.length){if(s.lineMetrics&&"LineString"===p){for(m=0;m<g.length;m++)l.push(ke(h.id,p,g[m],h.tags));continue}"LineString"!==p&&"MultiLineString"!==p||(1===g.length?(p="LineString",g=g[0]):p="MultiLineString"),"Point"!==p&&"MultiPoint"!==p||(p=3===g.length?"Point":"MultiPoint"),l.push(ke(h.id,p,g,h.tags))}}}return l.length?l:null}function Re(e,t,r,n,o){for(var i=0;i<e.length;i+=3){var a=e[i+o];a>=r&&a<=n&&(t.push(e[i]),t.push(e[i+1]),t.push(e[i+2]))}}function Fe(e,t,r,n,o,i,a){for(var s,l,u=Be(e),h=0===o?Ge:Je,c=e.start,p=0;p<e.length-3;p+=3){var f=e[p],d=e[p+1],g=e[p+2],m=e[p+3],v=e[p+4],y=0===o?f:d,x=0===o?m:v,w=!1;a&&(s=Math.sqrt(Math.pow(f-m,2)+Math.pow(d-v,2))),y<r?x>r&&(l=h(u,f,d,m,v,r),a&&(u.start=c+s*l)):y>n?x<n&&(l=h(u,f,d,m,v,n),a&&(u.start=c+s*l)):je(u,f,d,g),x<r&&y>=r&&(l=h(u,f,d,m,v,r),w=!0),x>n&&y<=n&&(l=h(u,f,d,m,v,n),w=!0),!i&&w&&(a&&(u.end=c+s*l),t.push(u),u=Be(e)),a&&(c+=s)}var M=e.length-3;f=e[M],d=e[M+1],g=e[M+2],(y=0===o?f:d)>=r&&y<=n&&je(u,f,d,g),M=u.length-3,i&&M>=3&&(u[M]!==u[0]||u[M+1]!==u[1])&&je(u,u[0],u[1],u[2]),u.length&&t.push(u)}function Be(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function Ze(e,t,r,n,o,i){for(var a=0;a<e.length;a++)Fe(e[a],t,r,n,o,i,!1)}function je(e,t,r,n){e.push(t),e.push(r),e.push(n)}function Ge(e,t,r,n,o,i){var a=(i-t)/(n-t);return e.push(i),e.push(r+(o-r)*a),e.push(1),a}function Je(e,t,r,n,o,i){var a=(i-r)/(o-r);return e.push(t+(n-t)*a),e.push(i),e.push(1),a}function Xe(e,t){for(var r=[],n=0;n<e.length;n++){var o,i=e[n],a=i.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)o=Ve(i.geometry,t);else if("MultiLineString"===a||"Polygon"===a){o=[];for(var s=0;s<i.geometry.length;s++)o.push(Ve(i.geometry[s],t))}else if("MultiPolygon"===a)for(o=[],s=0;s<i.geometry.length;s++){for(var l=[],u=0;u<i.geometry[s].length;u++)l.push(Ve(i.geometry[s][u],t));o.push(l)}r.push(ke(i.id,a,o,i.tags))}return r}function Ve(e,t){var r=[];r.size=e.size,void 0!==e.start&&(r.start=e.start,r.end=e.end);for(var n=0;n<e.length;n+=3)r.push(e[n]+t,e[n+1],e[n+2]);return r}function We(e,t){if(e.transformed)return e;var r,n,o,i=1<<e.z,a=e.x,s=e.y;for(r=0;r<e.features.length;r++){var l=e.features[r],u=l.geometry,h=l.type;if(l.geometry=[],1===h)for(n=0;n<u.length;n+=2)l.geometry.push(Ye(u[n],u[n+1],t,i,a,s));else for(n=0;n<u.length;n++){var c=[];for(o=0;o<u[n].length;o+=2)c.push(Ye(u[n][o],u[n][o+1],t,i,a,s));l.geometry.push(c)}}return e.transformed=!0,e}function Ye(e,t,r,n,o,i){return[Math.round(r*(e*n-o)),Math.round(r*(t*n-i))]}function qe(e,t,r,n,o){for(var i=t===o.maxZoom?0:o.tolerance/((1<<t)*o.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:n,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){a.numFeatures++,Ue(a,e[s],i,o);var l=e[s].minX,u=e[s].minY,h=e[s].maxX,c=e[s].maxY;l<a.minX&&(a.minX=l),u<a.minY&&(a.minY=u),h>a.maxX&&(a.maxX=h),c>a.maxY&&(a.maxY=c)}return a}function Ue(e,t,r,n){var o=t.geometry,i=t.type,a=[];if("Point"===i||"MultiPoint"===i)for(var s=0;s<o.length;s+=3)a.push(o[s]),a.push(o[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===i)Ke(a,o,e,r,!1,!1);else if("MultiLineString"===i||"Polygon"===i)for(s=0;s<o.length;s++)Ke(a,o[s],e,r,"Polygon"===i,0===s);else if("MultiPolygon"===i)for(var l=0;l<o.length;l++){var u=o[l];for(s=0;s<u.length;s++)Ke(a,u[s],e,r,!0,0===s)}if(a.length){var h=t.tags||null;if("LineString"===i&&n.lineMetrics){for(var c in h={},t.tags)h[c]=t.tags[c];h.mapbox_clip_start=o.start/o.size,h.mapbox_clip_end=o.end/o.size}var p={geometry:a,type:"Polygon"===i||"MultiPolygon"===i?3:"LineString"===i||"MultiLineString"===i?2:1,tags:h};null!==t.id&&(p.id=t.id),e.features.push(p)}}function Ke(e,t,r,n,o,i){var a=n*n;if(n>0&&t.size<(o?a:n))r.numPoints+=t.length/3;else{for(var s=[],l=0;l<t.length;l+=3)(0===n||t[l+2]>a)&&(r.numSimplified++,s.push(t[l]),s.push(t[l+1])),r.numPoints++;o&&function(e,t){for(var r=0,n=0,o=e.length,i=o-2;n<o;i=n,n+=2)r+=(e[n]-e[i])*(e[n+1]+e[i+1]);if(r>0===t)for(n=0,o=e.length;n<o/2;n+=2){var a=e[n],s=e[n+1];e[n]=e[o-2-n],e[n+1]=e[o-1-n],e[o-2-n]=a,e[o-1-n]=s}}(s,i),e.push(s)}}function He(e,t){var r=(t=this.options=function(e,t){for(var r in t)e[r]=t[r];return e}(Object.create(this.options),t)).debug;if(r&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var n=function(e,t){var r=[];if("FeatureCollection"===e.type)for(var n=0;n<e.features.length;n++)Ce(r,e.features[n],t,n);else"Feature"===e.type?Ce(r,e,t):Ce(r,{geometry:e},t);return r}(e,t);this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(n=function(e,t){var r=t.buffer/t.extent,n=e,o=Ne(e,1,-1-r,r,0,-1,2,t),i=Ne(e,1,1-r,2+r,0,-1,2,t);return(o||i)&&(n=Ne(e,1,-r,1+r,0,-1,2,t)||[],o&&(n=Xe(o,1).concat(n)),i&&(n=n.concat(Xe(i,-1)))),n}(n,t)).length&&this.splitTile(n,0,0,0),r&&(n.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Qe(e,t,r){return 32*((1<<e)*r+t)+e}function $e(e,t){var r=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);var n=this._geoJSONIndex.getTile(r.z,r.x,r.y);if(!n)return t(null,null);var o=new W(n.features),i=H(o);0===i.byteOffset&&i.byteLength===i.buffer.byteLength||(i=new Uint8Array(i)),t(null,{vectorTile:o,rawData:i.buffer})}ve.prototype.load=function(e){var t=this.options,r=t.log,n=t.minZoom,o=t.maxZoom,i=t.nodeSize;r&&console.time("total time");var a="prepare "+e.length+" points";r&&console.time(a),this.points=e;for(var s=[],l=0;l<e.length;l++)e[l].geometry&&s.push(xe(e[l],l));this.trees[o+1]=new ge(s,be,Te,i,Float32Array),r&&console.timeEnd(a);for(var u=o;u>=n;u--){var h=+Date.now();s=this._cluster(s,u),this.trees[u]=new ge(s,be,Te,i,Float32Array),r&&console.log("z%d: %d clusters in %dms",u,s.length,+Date.now()-h)}return r&&console.timeEnd("total time"),this},ve.prototype.getClusters=function(e,t){var r=((e[0]+180)%360+360)%360-180,n=Math.max(-90,Math.min(90,e[1])),o=180===e[2]?180:((e[2]+180)%360+360)%360-180,i=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)r=-180,o=180;else if(r>o){var a=this.getClusters([r,n,180,i],t),s=this.getClusters([-180,n,o,i],t);return a.concat(s)}for(var l=this.trees[this._limitZoom(t)],u=[],h=0,c=l.range(Se(r),_e(i),Se(o),_e(n));h<c.length;h+=1){var p=c[h],f=l.points[p];u.push(f.numPoints?we(f):this.points[f.index])}return u},ve.prototype.getChildren=function(e){var t=e>>5,r=e%32,n="No cluster with the specified id.",o=this.trees[r];if(!o)throw new Error(n);var i=o.points[t];if(!i)throw new Error(n);for(var a=this.options.radius/(this.options.extent*Math.pow(2,r-1)),s=[],l=0,u=o.within(i.x,i.y,a);l<u.length;l+=1){var h=u[l],c=o.points[h];c.parentId===e&&s.push(c.numPoints?we(c):this.points[c.index])}if(0===s.length)throw new Error(n);return s},ve.prototype.getLeaves=function(e,t,r){t=t||10,r=r||0;var n=[];return this._appendLeaves(n,e,t,r,0),n},ve.prototype.getTile=function(e,t,r){var n=this.trees[this._limitZoom(e)],o=Math.pow(2,e),i=this.options,a=i.extent,s=i.radius/a,l=(r-s)/o,u=(r+1+s)/o,h={features:[]};return this._addTileFeatures(n.range((t-s)/o,l,(t+1+s)/o,u),n.points,t,r,o,h),0===t&&this._addTileFeatures(n.range(1-s/o,l,1,u),n.points,o,r,o,h),t===o-1&&this._addTileFeatures(n.range(0,l,s/o,u),n.points,-1,r,o,h),h.features.length?h:null},ve.prototype.getClusterExpansionZoom=function(e){for(var t=e%32-1;t<=this.options.maxZoom;){var r=this.getChildren(e);if(t++,1!==r.length)break;e=r[0].properties.cluster_id}return t},ve.prototype._appendLeaves=function(e,t,r,n,o){for(var i=0,a=this.getChildren(t);i<a.length;i+=1){var s=a[i],l=s.properties;if(l&&l.cluster?o+l.point_count<=n?o+=l.point_count:o=this._appendLeaves(e,l.cluster_id,r,n,o):o<n?o++:e.push(s),e.length===r)break}return o},ve.prototype._addTileFeatures=function(e,t,r,n,o,i){for(var a=0,s=e;a<s.length;a+=1){var l=t[s[a]],u={type:1,geometry:[[Math.round(this.options.extent*(l.x*o-r)),Math.round(this.options.extent*(l.y*o-n))]],tags:l.numPoints?Me(l):this.points[l.index].properties},h=l.numPoints?l.id:this.points[l.index].id;void 0!==h&&(u.id=h),i.features.push(u)}},ve.prototype._limitZoom=function(e){return Math.max(this.options.minZoom,Math.min(e,this.options.maxZoom+1))},ve.prototype._cluster=function(e,t){for(var r=[],n=this.options,o=n.radius,i=n.extent,a=n.reduce,s=o/(i*Math.pow(2,t)),l=0;l<e.length;l++){var u=e[l];if(!(u.zoom<=t)){u.zoom=t;for(var h=this.trees[t+1],c=h.within(u.x,u.y,s),p=u.numPoints||1,f=u.x*p,d=u.y*p,g=a?this._map(u,!0):null,m=(l<<5)+(t+1),v=0,y=c;v<y.length;v+=1){var x=y[v],w=h.points[x];if(!(w.zoom<=t)){w.zoom=t;var M=w.numPoints||1;f+=w.x*M,d+=w.y*M,p+=M,w.parentId=m,a&&a(g,this._map(w))}}1===p?r.push(u):(u.parentId=m,r.push(ye(f/p,d/p,m,p,g)))}}return r},ve.prototype._map=function(e,t){if(e.numPoints)return t?Pe({},e.properties):e.properties;var r=this.points[e.index].properties,n=this.options.map(r);return t&&n===r?Pe({},n):n},He.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},He.prototype.splitTile=function(e,t,r,n,o,i,a){for(var s=[e,t,r,n],l=this.options,u=l.debug;s.length;){n=s.pop(),r=s.pop(),t=s.pop(),e=s.pop();var h=1<<t,c=Qe(t,r,n),p=this.tiles[c];if(!p&&(u>1&&console.time("creation"),p=this.tiles[c]=qe(e,t,r,n,l),this.tileCoords.push({z:t,x:r,y:n}),u)){u>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,r,n,p.numFeatures,p.numPoints,p.numSimplified),console.timeEnd("creation"));var f="z"+t;this.stats[f]=(this.stats[f]||0)+1,this.total++}if(p.source=e,o){if(t===l.maxZoom||t===o)continue;var d=1<<o-t;if(r!==Math.floor(i/d)||n!==Math.floor(a/d))continue}else if(t===l.indexMaxZoom||p.numPoints<=l.indexMaxPoints)continue;if(p.source=null,0!==e.length){u>1&&console.time("clipping");var g,m,v,y,x,w,M=.5*l.buffer/l.extent,S=.5-M,_=.5+M,P=1+M;g=m=v=y=null,x=Ne(e,h,r-M,r+_,0,p.minX,p.maxX,l),w=Ne(e,h,r+S,r+P,0,p.minX,p.maxX,l),e=null,x&&(g=Ne(x,h,n-M,n+_,1,p.minY,p.maxY,l),m=Ne(x,h,n+S,n+P,1,p.minY,p.maxY,l),x=null),w&&(v=Ne(w,h,n-M,n+_,1,p.minY,p.maxY,l),y=Ne(w,h,n+S,n+P,1,p.minY,p.maxY,l),w=null),u>1&&console.timeEnd("clipping"),s.push(g||[],t+1,2*r,2*n),s.push(m||[],t+1,2*r,2*n+1),s.push(v||[],t+1,2*r+1,2*n),s.push(y||[],t+1,2*r+1,2*n+1)}}},He.prototype.getTile=function(e,t,r){var n=this.options,o=n.extent,i=n.debug;if(e<0||e>24)return null;var a=1<<e,s=Qe(e,t=(t%a+a)%a,r);if(this.tiles[s])return We(this.tiles[s],o);i>1&&console.log("drilling down to z%d-%d-%d",e,t,r);for(var l,u=e,h=t,c=r;!l&&u>0;)u--,h=Math.floor(h/2),c=Math.floor(c/2),l=this.tiles[Qe(u,h,c)];return l&&l.source?(i>1&&console.log("found parent tile z%d-%d-%d",u,h,c),i>1&&console.time("drilling down"),this.splitTile(l.source,u,h,c,e,t,r),i>1&&console.timeEnd("drilling down"),this.tiles[s]?We(this.tiles[s],o):null):null};var et=function(t){function r(e,r,n){t.call(this,e,r,$e),n&&(this.loadGeoJSON=n)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.loadData=function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=t,this._pendingLoadDataParams=e,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},r.prototype._loadData=function(){var t=this;if(this._pendingCallback&&this._pendingLoadDataParams){var r=this._pendingCallback,n=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var o=!!(n&&n.request&&n.request.collectResourceTiming)&&new C.Performance(n.request);this.loadGeoJSON(n,function(i,a){if(i||!a)return r(i);if("object"!=typeof a)return r(new Error("Input data is not a valid GeoJSON object."));!function e(t,r){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.map(j(e,r)),t;case"GeometryCollection":return t.geometries=t.geometries.map(j(e,r)),t;case"Feature":return t.geometry=e(t.geometry,r),t;case"Polygon":case"MultiPolygon":return function(e,t){return"Polygon"===e.type?e.coordinates=G(e.coordinates,t):"MultiPolygon"===e.type&&(e.coordinates=e.coordinates.map(j(G,t))),e}(t,r);default:return t}}(a,!0);try{t._geoJSONIndex=n.cluster?new ve(function(t){var r=t.superclusterOptions,n=t.clusterProperties;if(!n||!r)return r;for(var o={},i={},a={accumulated:null,zoom:0},s={properties:null},l=Object.keys(n),u=0,h=l;u<h.length;u+=1){var c=h[u],p=n[c],f=p[0],d=p[1],g=e.createExpression(d),m=e.createExpression("string"==typeof f?[f,["accumulated"],["get",c]]:f);o[c]=g.value,i[c]=m.value}return r.map=function(e){s.properties=e;for(var t={},r=0,n=l;r<n.length;r+=1){var i=n[r];t[i]=o[i].evaluate(a,s)}return t},r.reduce=function(e,t){s.properties=t;for(var r=0,n=l;r<n.length;r+=1){var o=n[r];a.accumulated=e[o],e[o]=i[o].evaluate(a,s)}},r}(n)).load(a.features):new He(a,n.geojsonVtOptions)}catch(i){return r(i)}t.loaded={};var s={};if(o){var l=o.finish();l&&(s.resourceTiming={},s.resourceTiming[n.source]=JSON.parse(JSON.stringify(l)))}r(null,s)})}},r.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},r.prototype.reloadTile=function(e,r){var n=this.loaded,o=e.uid;return n&&n[o]?t.prototype.reloadTile.call(this,e,r):this.loadTile(e,r)},r.prototype.loadGeoJSON=function(t,r){if(t.request)e.getJSON(t.request,r);else{if("string"!=typeof t.data)return r(new Error("Input data is not a valid GeoJSON object."));try{return r(null,JSON.parse(t.data))}catch(e){return r(new Error("Input data is not a valid GeoJSON object."))}}},r.prototype.removeSource=function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),t()},r.prototype.getClusterExpansionZoom=function(e,t){t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))},r.prototype.getClusterChildren=function(e,t){t(null,this._geoJSONIndex.getChildren(e.clusterId))},r.prototype.getClusterLeaves=function(e,t){t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))},r}(L),tt=function(t){var r=this;this.self=t,this.actor=new e.Actor(t,this),this.layerIndexes={},this.workerSourceTypes={vector:L,geojson:et},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(e,t){if(r.workerSourceTypes[e])throw new Error('Worker source with name "'+e+'" already registered.');r.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=function(t){if(e.plugin.isLoaded())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}};return tt.prototype.setReferrer=function(e,t){this.referrer=t},tt.prototype.setLayers=function(e,t,r){this.getLayerIndex(e).replace(t),r()},tt.prototype.updateLayers=function(e,t,r){this.getLayerIndex(e).update(t.layers,t.removedIds),r()},tt.prototype.loadTile=function(e,t,r){this.getWorkerSource(e,t.type,t.source).loadTile(t,r)},tt.prototype.loadDEMTile=function(e,t,r){this.getDEMWorkerSource(e,t.source).loadTile(t,r)},tt.prototype.reloadTile=function(e,t,r){this.getWorkerSource(e,t.type,t.source).reloadTile(t,r)},tt.prototype.abortTile=function(e,t,r){this.getWorkerSource(e,t.type,t.source).abortTile(t,r)},tt.prototype.removeTile=function(e,t,r){this.getWorkerSource(e,t.type,t.source).removeTile(t,r)},tt.prototype.removeDEMTile=function(e,t){this.getDEMWorkerSource(e,t.source).removeTile(t)},tt.prototype.removeSource=function(e,t,r){if(this.workerSources[e]&&this.workerSources[e][t.type]&&this.workerSources[e][t.type][t.source]){var n=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==n.removeSource?n.removeSource(t,r):r()}},tt.prototype.loadWorkerSource=function(e,t,r){try{this.self.importScripts(t.url),r()}catch(e){r(e.toString())}},tt.prototype.loadRTLTextPlugin=function(t,r,n){try{e.plugin.isLoaded()||(this.self.importScripts(r),n(e.plugin.isLoaded()?null:new Error("RTL Text Plugin failed to import scripts from "+r)))}catch(e){n(e.toString())}},tt.prototype.getLayerIndex=function(e){var t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new n),t},tt.prototype.getWorkerSource=function(e,t,r){var n=this;if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][r]){var o={send:function(t,r,o){n.actor.send(t,r,o,e)}};this.workerSources[e][t][r]=new this.workerSourceTypes[t](o,this.getLayerIndex(e))}return this.workerSources[e][t][r]},tt.prototype.getDEMWorkerSource=function(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new D),this.demWorkerSources[e][t]},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new tt(self)),tt}),define(0,function(t){var e=t.createCommonjsModule(function(t){function e(t){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,i=new Blob([""],{type:"text/javascript"}),o=URL.createObjectURL(i);try{e=new Worker(o),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(o),t}()&&"Uint8ClampedArray"in window&&ArrayBuffer.isView&&function(t){return void 0===i[t]&&(i[t]=function(t){var i=document.createElement("canvas"),o=Object.create(e.webGLContextAttributes);return o.failIfMajorPerformanceCaveat=t,i.probablySupportsContext?i.probablySupportsContext("webgl",o)||i.probablySupportsContext("experimental-webgl",o):i.supportsContext?i.supportsContext("webgl",o)||i.supportsContext("experimental-webgl",o):i.getContext("webgl",o)||i.getContext("experimental-webgl",o)}(t)),i[t]}(t&&t.failIfMajorPerformanceCaveat))}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e);var i={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),i={create:function(e,i,o){var r=t.window.document.createElement(e);return i&&(r.className=i),o&&o.appendChild(r),r},createNS:function(e,i){return t.window.document.createElementNS(e,i)}},o=t.window.document?t.window.document.documentElement.style:null;function r(t){if(!o)return null;for(var e=0;e<t.length;e++)if(t[e]in o)return t[e];return t[0]}var a,n=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);i.disableDrag=function(){o&&n&&(a=o[n],o[n]="none")},i.enableDrag=function(){o&&n&&(o[n]=a)};var s=r(["transform","WebkitTransform"]);i.setTransform=function(t,e){t.style[s]=e};var l=!1;try{var c=Object.defineProperty({},"passive",{get:function(){l=!0}});t.window.addEventListener("test",c,c),t.window.removeEventListener("test",c,c)}catch(t){l=!1}i.addEventListener=function(t,e,i,o){void 0===o&&(o={}),"passive"in o&&l?t.addEventListener(e,i,o):t.addEventListener(e,i,o.capture)},i.removeEventListener=function(t,e,i,o){void 0===o&&(o={}),"passive"in o&&l?t.removeEventListener(e,i,o):t.removeEventListener(e,i,o.capture)};var u=function(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",u,!0)};i.suppressClick=function(){t.window.addEventListener("click",u,!0),t.window.setTimeout(function(){t.window.removeEventListener("click",u,!0)},0)},i.mousePos=function(e,i){var o=e.getBoundingClientRect();return i=i.touches?i.touches[0]:i,new t.Point(i.clientX-o.left-e.clientLeft,i.clientY-o.top-e.clientTop)},i.touchPos=function(e,i){for(var o=e.getBoundingClientRect(),r=[],a="touchend"===i.type?i.changedTouches:i.touches,n=0;n<a.length;n++)r.push(new t.Point(a[n].clientX-o.left-e.clientLeft,a[n].clientY-o.top-e.clientTop));return r},i.mouseButton=function(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},i.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var h=function(){this.images={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0};h.prototype.isLoaded=function(){return this.loaded},h.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,i=this.requestors;e<i.length;e+=1){var o=i[e],r=o.ids,a=o.callback;this._notify(r,a)}this.requestors=[]}},h.prototype.getImage=function(t){return this.images[t]},h.prototype.addImage=function(t,e){this.images[t]=e},h.prototype.removeImage=function(t){delete this.images[t],delete this.patterns[t]},h.prototype.listImages=function(){return Object.keys(this.images)},h.prototype.getImages=function(t,e){var i=!0;if(!this.isLoaded())for(var o=0,r=t;o<r.length;o+=1){var a=r[o];this.images[a]||(i=!1)}this.isLoaded()||i?this._notify(t,e):this.requestors.push({ids:t,callback:e})},h.prototype._notify=function(t,e){for(var i={},o=0,r=t;o<r.length;o+=1){var a=r[o],n=this.images[a];n&&(i[a]={data:n.data.clone(),pixelRatio:n.pixelRatio,sdf:n.sdf})}e(null,i)},h.prototype.getPixelSize=function(){var t=this.atlasImage;return{width:t.width,height:t.height}},h.prototype.getPattern=function(e){var i=this.patterns[e];if(i)return i.position;var o=this.getImage(e);if(!o)return null;var r={w:o.data.width+2,h:o.data.height+2,x:0,y:0},a=new t.ImagePosition(r,o);return this.patterns[e]={bin:r,position:a},this._updatePatternAtlas(),a},h.prototype.bind=function(e){var i=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,i.RGBA),this.atlasTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)},h.prototype._updatePatternAtlas=function(){var e=[];for(var i in this.patterns)e.push(this.patterns[i].bin);var o=t.potpack(e),r=o.w,a=o.h,n=this.atlasImage;for(var s in n.resize({width:r||1,height:a||1}),this.patterns){var l=this.patterns[s].bin,c=l.x+1,u=l.y+1,h=this.images[s].data,p=h.width,d=h.height;t.RGBAImage.copy(h,n,{x:0,y:0},{x:c,y:u},{width:p,height:d}),t.RGBAImage.copy(h,n,{x:0,y:d-1},{x:c,y:u-1},{width:p,height:1}),t.RGBAImage.copy(h,n,{x:0,y:0},{x:c,y:u+d},{width:p,height:1}),t.RGBAImage.copy(h,n,{x:p-1,y:0},{x:c-1,y:u},{width:1,height:d}),t.RGBAImage.copy(h,n,{x:0,y:0},{x:c+p,y:u},{width:1,height:d})}this.dirty=!0};var p=_,d=1e20;function _(t,e,i,o,r,a){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=o||.25,this.fontFamily=r||"sans-serif",this.fontWeight=a||"normal",this.radius=i||8;var n=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=n,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(n*n),this.gridInner=new Float64Array(n*n),this.f=new Float64Array(n),this.d=new Float64Array(n),this.z=new Float64Array(n+1),this.v=new Int16Array(n),this.middle=Math.round(n/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function f(t,e,i,o,r,a,n){for(var s=0;s<e;s++){for(var l=0;l<i;l++)o[l]=t[l*e+s];for(m(o,r,a,n,i),l=0;l<i;l++)t[l*e+s]=r[l]}for(l=0;l<i;l++){for(s=0;s<e;s++)o[s]=t[l*e+s];for(m(o,r,a,n,e),s=0;s<e;s++)t[l*e+s]=Math.sqrt(r[s])}}function m(t,e,i,o,r){i[0]=0,o[0]=-d,o[1]=+d;for(var a=1,n=0;a<r;a++){for(var s=(t[a]+a*a-(t[i[n]]+i[n]*i[n]))/(2*a-2*i[n]);s<=o[n];)n--,s=(t[a]+a*a-(t[i[n]]+i[n]*i[n]))/(2*a-2*i[n]);i[++n]=a,o[n]=s,o[n+1]=+d}for(a=0,n=0;a<r;a++){for(;o[n+1]<a;)n++;e[a]=(a-i[n])*(a-i[n])+t[i[n]]}}_.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),i=new Uint8ClampedArray(this.size*this.size),o=0;o<this.size*this.size;o++){var r=e.data[4*o+3]/255;this.gridOuter[o]=1===r?0:0===r?d:Math.pow(Math.max(0,.5-r),2),this.gridInner[o]=1===r?d:0===r?0:Math.pow(Math.max(0,r-.5),2)}for(f(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),f(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),o=0;o<this.size*this.size;o++){var a=this.gridOuter[o]-this.gridInner[o];i[o]=Math.max(0,Math.min(255,Math.round(255-255*(a/this.radius+this.cutoff))))}return i};var g=function(t,e){this.requestTransform=t,this.localIdeographFontFamily=e,this.entries={}};g.prototype.setURL=function(t){this.url=t},g.prototype.getGlyphs=function(e,i){var o=this,r=[];for(var a in e)for(var n=0,s=e[a];n<s.length;n+=1){var l=s[n];r.push({stack:a,id:l})}t.asyncAll(r,function(t,e){var i=t.stack,r=t.id,a=o.entries[i];a||(a=o.entries[i]={glyphs:{},requests:{}});var n=a.glyphs[r];if(void 0===n)if(n=o._tinySDF(a,i,r))e(null,{stack:i,id:r,glyph:n});else{var s=Math.floor(r/256);if(256*s>65535)e(new Error("glyphs > 65535 not supported"));else{var l=a.requests[s];l||(l=a.requests[s]=[],g.loadGlyphRange(i,s,o.url,o.requestTransform,function(t,e){if(e)for(var i in e)a.glyphs[+i]=e[+i];for(var o=0,r=l;o<r.length;o+=1)(0,r[o])(t,e);delete a.requests[s]})),l.push(function(t,o){t?e(t):o&&e(null,{stack:i,id:r,glyph:o[r]||null})})}}else e(null,{stack:i,id:r,glyph:n})},function(t,e){if(t)i(t);else if(e){for(var o={},r=0,a=e;r<a.length;r+=1){var n=a[r],s=n.stack,l=n.id,c=n.glyph;(o[s]||(o[s]={}))[l]=c&&{id:c.id,bitmap:c.bitmap.clone(),metrics:c.metrics}}i(null,o)}})},g.prototype._tinySDF=function(e,i,o){var r=this.localIdeographFontFamily;if(r&&(t.isChar["CJK Unified Ideographs"](o)||t.isChar["Hangul Syllables"](o))){var a=e.tinySDF;if(!a){var n="400";/bold/i.test(i)?n="900":/medium/i.test(i)?n="500":/light/i.test(i)&&(n="200"),a=e.tinySDF=new g.TinySDF(24,3,8,.25,r,n)}return{id:o,bitmap:new t.AlphaImage({width:30,height:30},a.draw(String.fromCharCode(o))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},g.loadGlyphRange=function(e,i,o,r,a){var n=256*i,s=n+255,l=r(t.normalizeGlyphsURL(o).replace("{fontstack}",e).replace("{range}",n+"-"+s),t.ResourceType.Glyphs);t.getArrayBuffer(l,function(e,i){if(e)a(e);else if(i){for(var o={},r=0,n=t.parseGlyphPBF(i);r<n.length;r+=1){var s=n[r];o[s.id]=s}a(null,o)}})},g.TinySDF=p;var v=function(){this.specification=t.styleSpec.light.position};v.prototype.possiblyEvaluate=function(e,i){return t.sphericalToCartesian(e.expression.evaluate(i))},v.prototype.interpolate=function(e,i,o){return{x:t.number(e.x,i.x,o),y:t.number(e.y,i.y,o),z:t.number(e.z,i.z,o)}};var y=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new v,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),x=function(e){function i(i){e.call(this),this._transitionable=new t.Transitionable(y),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.getLight=function(){return this._transitionable.serialize()},i.prototype.setLight=function(e,i){if(void 0===i&&(i={}),!this._validate(t.validateLight,e,i))for(var o in e){var r=e[o];t.endsWith(o,"-transition")?this._transitionable.setTransition(o.slice(0,-"-transition".length),r):this._transitionable.setValue(o,r)}},i.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},i.prototype.hasTransition=function(){return this._transitioning.hasTransition()},i.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},i.prototype._validate=function(e,i,o){return(!o||!1!==o.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:i,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},i}(t.Evented),b=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};b.prototype.getDash=function(t,e){var i=t.join(",")+String(e);return this.positions[i]||(this.positions[i]=this.addDash(t,e)),this.positions[i]},b.prototype.addDash=function(e,i){var o=i?7:0,r=2*o+1;if(this.nextRow+r>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var a=0,n=0;n<e.length;n++)a+=e[n];for(var s=this.width/a,l=s/2,c=e.length%2==1,u=-o;u<=o;u++)for(var h=this.nextRow+o+u,p=this.width*h,d=c?-e[e.length-1]:0,_=e[0],f=1,m=0;m<this.width;m++){for(;_<m/s;)d=_,_+=e[f],c&&f===e.length-1&&(_+=e[0]),f++;var g=Math.abs(m-d*s),v=Math.abs(m-_*s),y=Math.min(g,v),x=f%2==1,b=void 0;if(i){var w=o?u/o*(l+1):0;if(x){var E=l-Math.abs(w);b=Math.sqrt(y*y+E*E)}else b=l-Math.sqrt(y*y+w*w)}else b=(x?1:-1)*y;this.data[3+4*(p+m)]=Math.max(0,Math.min(255,b+128))}var T={y:(this.nextRow+o+.5)/this.height,height:2*o/this.height,width:a};return this.nextRow+=r,this.dirty=!0,T},b.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.RGBA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,this.data))};var w=function e(i,o){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var r=this.workerPool.acquire(this.id),a=0;a<r.length;a++){var n=r[a],s=new e.Actor(n,o,this.id);s.name="Worker "+a,this.actors.push(s)}};function E(e,i,o){var r=function(i,r){if(i)return o(i);if(r){var a=t.pick(r,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]);r.vector_layers&&(a.vectorLayers=r.vector_layers,a.vectorLayerIds=a.vectorLayers.map(function(t){return t.id})),e.url&&(a.tiles=t.canonicalizeTileset(a,e.url)),o(null,a)}};return e.url?t.getJSON(i(t.normalizeSourceURL(e.url),t.ResourceType.Source),r):t.browser.frame(function(){return r(null,e)})}w.prototype.broadcast=function(e,i,o){o=o||function(){},t.asyncAll(this.actors,function(t,o){t.send(e,i,o)},o)},w.prototype.send=function(t,e,i,o){return("number"!=typeof o||isNaN(o))&&(o=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[o].send(t,e,i),o},w.prototype.remove=function(){this.actors.forEach(function(t){t.remove()}),this.actors=[],this.workerPool.release(this.id)},w.Actor=t.Actor;var T=function(e,i,o){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=i||0,this.maxzoom=o||24};T.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},T.prototype.contains=function(e){var i=Math.pow(2,e.z),o=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*i),r=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*i),a=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*i),n=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*i);return e.x>=o&&e.x<a&&e.y>=r&&e.y<n};var I=function(e){function i(i,o,r,a){if(e.call(this),this.id=i,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,t.extend(this,t.pick(o,["url","scheme","tileSize"])),this._options=t.extend({type:"vector"},o),this._collectResourceTiming=o.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(a)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=E(this._options,this.map._transformRequest,function(i,o){e._tileJSONRequest=null,i?e.fire(new t.ErrorEvent(i)):o&&(t.extend(e,o),o.bounds&&(e.tileBounds=new T(o.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(o.tiles),t.postMapLoadEvent(o.tiles,e.map._getMapId()),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},i.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},i.prototype.onAdd=function(t){this.map=t,this.load()},i.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},i.prototype.serialize=function(){return t.extend({},this._options)},i.prototype.loadTile=function(e,i){var o=t.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.url),r={request:this.map._transformRequest(o,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};function a(t,o){return e.aborted?i(null):t&&404!==t.status?i(t):(o&&o.resourceTiming&&(e.resourceTiming=o.resourceTiming),this.map._refreshExpiredTiles&&o&&e.setExpiryData(o),e.loadVectorData(o,this.map.painter),i(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}r.request.collectResourceTiming=this._collectResourceTiming,void 0===e.workerID||"expired"===e.state?e.workerID=this.dispatcher.send("loadTile",r,a.bind(this)):"loading"===e.state?e.reloadCallback=i:this.dispatcher.send("reloadTile",r,a.bind(this),e.workerID)},i.prototype.abortTile=function(t){this.dispatcher.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},i.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},i.prototype.hasTransition=function(){return!1},i}(t.Evented),C=function(e){function i(i,o,r,a){e.call(this),this.id=i,this.dispatcher=r,this.setEventedParent(a),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({},o),t.extend(this,t.pick(o,["url","scheme","tileSize"]))}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=E(this._options,this.map._transformRequest,function(i,o){e._tileJSONRequest=null,i?e.fire(new t.ErrorEvent(i)):o&&(t.extend(e,o),o.bounds&&(e.tileBounds=new T(o.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(o.tiles),t.postMapLoadEvent(o.tiles,e.map._getMapId()),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},i.prototype.onAdd=function(t){this.map=t,this.load()},i.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},i.prototype.serialize=function(){return t.extend({},this._options)},i.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},i.prototype.loadTile=function(e,i){var o=this,r=t.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=t.getImage(this.map._transformRequest(r,t.ResourceType.Tile),function(r,a){if(delete e.request,e.aborted)e.state="unloaded",i(null);else if(r)e.state="errored",i(r);else if(a){o.map._refreshExpiredTiles&&e.setExpiryData(a),delete a.cacheControl,delete a.expires;var n=o.map.painter.context,s=n.gl;e.texture=o.map.painter.getTileTexture(a.width),e.texture?e.texture.update(a,{useMipmap:!0}):(e.texture=new t.Texture(n,a,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),n.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,n.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,n.extTextureFilterAnisotropicMax)),e.state="loaded",i(null)}})},i.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},i.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},i.prototype.hasTransition=function(){return!1},i}(t.Evented),S=function(e){function i(i,o,r,a){e.call(this,i,o,r,a),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({},o),this.encoding=o.encoding||"mapbox"}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},i.prototype.loadTile=function(e,i){var o=t.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=t.getImage(this.map._transformRequest(o,t.ResourceType.Tile),function(o,r){if(delete e.request,e.aborted)e.state="unloaded",i(null);else if(o)e.state="errored",i(o);else if(r){this.map._refreshExpiredTiles&&e.setExpiryData(r),delete r.cacheControl,delete r.expires;var a=t.browser.getImageData(r),n={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:a,encoding:this.encoding};e.workerID&&"expired"!==e.state||(e.workerID=this.dispatcher.send("loadDEMTile",n,function(t,o){t&&(e.state="errored",i(t)),o&&(e.dem=o,e.needsHillshadePrepare=!0,e.state="loaded",i(null))}.bind(this)))}}.bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},i.prototype._getNeighboringTiles=function(e){var i=e.canonical,o=Math.pow(2,i.z),r=(i.x-1+o)%o,a=0===i.x?e.wrap-1:e.wrap,n=(i.x+1+o)%o,s=i.x+1===o?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,a,i.z,r,i.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,i.z,n,i.y).key]={backfilled:!1},i.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,a,i.z,r,i.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,i.z,n,i.y-1).key]={backfilled:!1}),i.y+1<o&&(l[new t.OverscaledTileID(e.overscaledZ,a,i.z,r,i.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,i.z,n,i.y+1).key]={backfilled:!1}),l},i.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",this.dispatcher.send("removeDEMTile",{uid:t.uid,source:this.id},void 0,t.workerID)},i}(C),z=function(e){function i(i,o,r,a){e.call(this),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this.dispatcher=r,this.setEventedParent(a),this._data=o.data,this._options=t.extend({},o),this._collectResourceTiming=o.collectResourceTiming,this._resourceTiming=[],void 0!==o.maxzoom&&(this.maxzoom=o.maxzoom),o.type&&(this.type=o.type),o.attribution&&(this.attribution=o.attribution);var n=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:o.cluster||!1,geojsonVtOptions:{buffer:(void 0!==o.buffer?o.buffer:128)*n,tolerance:(void 0!==o.tolerance?o.tolerance:.375)*n,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:void 0!==o.clusterMaxZoom?Math.min(o.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:t.EXTENT,radius:(o.clusterRadius||50)*n,log:!1},clusterProperties:o.clusterProperties},o.workerOptions)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(i){if(i)e.fire(new t.ErrorEvent(i));else{var o={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(o.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new t.Event("data",o))}})},i.prototype.onAdd=function(t){this.map=t,this.load()},i.prototype.setData=function(e){var i=this;return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(e){if(e)i.fire(new t.ErrorEvent(e));else{var o={dataType:"source",sourceDataType:"content"};i._collectResourceTiming&&i._resourceTiming&&i._resourceTiming.length>0&&(o.resourceTiming=i._resourceTiming,i._resourceTiming=[]),i.fire(new t.Event("data",o))}}),this},i.prototype.getClusterExpansionZoom=function(t,e){return this.dispatcher.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e,this.workerID),this},i.prototype.getClusterChildren=function(t,e){return this.dispatcher.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e,this.workerID),this},i.prototype.getClusterLeaves=function(t,e,i,o){return this.dispatcher.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:i},o,this.workerID),this},i.prototype._updateWorkerData=function(e){var i=this,o=t.extend({},this.workerOptions),r=this._data;"string"==typeof r?(o.request=this.map._transformRequest(t.browser.resolveURL(r),t.ResourceType.Source),o.request.collectResourceTiming=this._collectResourceTiming):o.data=JSON.stringify(r),this.workerID=this.dispatcher.send(this.type+".loadData",o,function(t,r){i._removed||r&&r.abandoned||(i._loaded=!0,r&&r.resourceTiming&&r.resourceTiming[i.id]&&(i._resourceTiming=r.resourceTiming[i.id].slice(0)),i.dispatcher.send(i.type+".coalesce",{source:o.source},null,i.workerID),e(t))},this.workerID)},i.prototype.loadTile=function(e,i){var o=this,r=void 0===e.workerID?"loadTile":"reloadTile",a={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};e.workerID=this.dispatcher.send(r,a,function(t,a){return e.unloadVectorData(),e.aborted?i(null):t?i(t):(e.loadVectorData(a,o.map.painter,"reloadTile"===r),i(null))},this.workerID)},i.prototype.abortTile=function(t){t.aborted=!0},i.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},null,t.workerID)},i.prototype.onRemove=function(){this._removed=!0,this.dispatcher.send("removeSource",{type:this.type,source:this.id},null,this.workerID)},i.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},i.prototype.hasTransition=function(){return!1},i}(t.Evented),L=function(e){function i(t,i,o,r){e.call(this),this.id=t,this.dispatcher=o,this.coordinates=i.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this.setEventedParent(r),this.options=i}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.load=function(e,i){var o=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._transformRequest(this.url,t.ResourceType.Image),function(r,a){r?o.fire(new t.ErrorEvent(r)):a&&(o.image=a,e&&(o.coordinates=e),i&&i(),o._finishLoading())})},i.prototype.updateImage=function(t){var e=this;return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,function(){e.texture=null}),this):this},i.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},i.prototype.onAdd=function(t){this.map=t,this.load()},i.prototype.setCoordinates=function(e){var i=this;this.coordinates=e;var o=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){for(var i=1/0,o=1/0,r=-1/0,a=-1/0,n=0,s=e;n<s.length;n+=1){var l=s[n];i=Math.min(i,l.x),o=Math.min(o,l.y),r=Math.max(r,l.x),a=Math.max(a,l.y)}var c=r-i,u=a-o,h=Math.max(c,u),p=Math.max(0,Math.floor(-Math.log(h)/Math.LN2)),d=Math.pow(2,p);return new t.CanonicalTileID(p,Math.floor((i+r)/2*d),Math.floor((o+a)/2*d))}(o),this.minzoom=this.maxzoom=this.tileID.z;var r=o.map(function(t){return i.tileID.getTilePoint(t)._round()});return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(r[0].x,r[0].y,0,0),this._boundsArray.emplaceBack(r[1].x,r[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(r[3].x,r[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(r[2].x,r[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},i.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,i=e.gl;for(var o in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[o];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},i.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},i.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},i.prototype.hasTransition=function(){return!1},i}(t.Evented),P={vector:I,raster:C,"raster-dem":S,geojson:z,video:function(e){function i(t,i,o,r){e.call(this,t,i,o,r),this.roundZoom=!0,this.type="video",this.options=i}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.load=function(){var e=this,i=this.options;this.urls=[];for(var o=0,r=i.urls;o<r.length;o+=1){var a=r[o];this.urls.push(this.map._transformRequest(a,t.ResourceType.Source).url)}t.getVideo(this.urls,function(i,o){i?e.fire(new t.ErrorEvent(i)):o&&(e.video=o,e.video.loop=!0,e.video.addEventListener("playing",function(){e.map.triggerRepaint()}),e.map&&e.video.play(),e._finishLoading())})},i.prototype.getVideo=function(){return this.video},i.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},i.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,i=e.gl;for(var o in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[o];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},i.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},i.prototype.hasTransition=function(){return this.video&&!this.video.paused},i}(L),image:L,canvas:function(e){function i(i,o,r,a){e.call(this,i,o,r,a),o.coordinates?Array.isArray(o.coordinates)&&4===o.coordinates.length&&!o.coordinates.some(function(t){return!Array.isArray(t)||2!==t.length||t.some(function(t){return"number"!=typeof t})})||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'missing required property "coordinates"'))),o.animate&&"boolean"!=typeof o.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'optional "animate" property must be a boolean value'))),o.canvas?"string"==typeof o.canvas||o.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'missing required property "canvas"'))),this.options=o,this.animate=void 0===o.animate||o.animate}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.load=function(){this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing=!1},this._finishLoading())},i.prototype.getCanvas=function(){return this.canvas},i.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},i.prototype.onRemove=function(){this.pause()},i.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var i=this.map.painter.context,o=i.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(i,this.canvas,o.RGBA,{premultiply:!0}),this.tiles){var a=this.tiles[r];"loaded"!==a.state&&(a.state="loaded",a.texture=this.texture)}}},i.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},i.prototype.hasTransition=function(){return this._playing},i.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var i=e[t];if(isNaN(i)||i<=0)return!0}return!1},i}(L)},D=function(e,i,o,r){var a=new P[i.type](e,i,o,r);if(a.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+a.id);return t.bindAll(["load","abort","unload","serialize","prepare"],a),a};function R(e,i){var o=t.identity([]);return t.translate(o,o,[1,1,0]),t.scale(o,o,[.5*e.width,.5*e.height,1]),t.multiply(o,o,e.calculatePosMatrix(i.toUnwrapped()))}function M(t,e,i,o,r){var a=function(t,e,i){if(t)for(var o=0,r=t;o<r.length;o+=1){var a=e[r[o]];if(a&&a.source===i&&"fill-extrusion"===a.type)return!0}else for(var n in e){var s=e[n];if(s.source===i&&"fill-extrusion"===s.type)return!0}return!1}(o&&o.layers,e,t.id),n=r.maxPitchScaleFactor(),s=t.tilesIn(i,n,a);s.sort(A);for(var l=[],c=0,u=s;c<u.length;c+=1){var h=u[c];l.push({wrappedTileID:h.tileID.wrapped().key,queryResults:h.tile.queryRenderedFeatures(e,t._state,h.queryGeometry,h.cameraQueryGeometry,h.scale,o,r,n,R(t.transform,h.tileID))})}var p=function(t){for(var e={},i={},o=0,r=t;o<r.length;o+=1){var a=r[o],n=a.queryResults,s=a.wrappedTileID,l=i[s]=i[s]||{};for(var c in n)for(var u=n[c],h=l[c]=l[c]||{},p=e[c]=e[c]||[],d=0,_=u;d<_.length;d+=1){var f=_[d];h[f.featureIndex]||(h[f.featureIndex]=!0,p.push(f))}}return e}(l);for(var d in p)p[d].forEach(function(e){var i=e.feature,o=t.getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=o});return p}function A(t,e){var i=t.tileID,o=e.tileID;return i.overscaledZ-o.overscaledZ||i.canonical.y-o.canonical.y||i.wrap-o.wrap||i.canonical.x-o.canonical.x}var k=function(t,e){this.max=t,this.onRemove=e,this.reset()};k.prototype.reset=function(){for(var t in this.data)for(var e=0,i=this.data[t];e<i.length;e+=1){var o=i[e];o.timeout&&clearTimeout(o.timeout),this.onRemove(o.value)}return this.data={},this.order=[],this},k.prototype.add=function(t,e,i){var o=this,r=t.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);var a={value:e,timeout:void 0};if(void 0!==i&&(a.timeout=setTimeout(function(){o.remove(t,a)},i)),this.data[r].push(a),this.order.push(r),this.order.length>this.max){var n=this._getAndRemoveByKey(this.order[0]);n&&this.onRemove(n)}return this},k.prototype.has=function(t){return t.wrapped().key in this.data},k.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},k.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},k.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},k.prototype.remove=function(t,e){if(!this.has(t))return this;var i=t.wrapped().key,o=void 0===e?0:this.data[i].indexOf(e),r=this.data[i][o];return this.data[i].splice(o,1),r.timeout&&clearTimeout(r.timeout),0===this.data[i].length&&delete this.data[i],this.onRemove(r.value),this.order.splice(this.order.indexOf(i),1),this},k.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this};var B=function(t,e,i){this.context=t;var o=t.gl;this.buffer=o.createBuffer(),this.dynamicDraw=Boolean(i),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),o.bufferData(o.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?o.DYNAMIC_DRAW:o.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};B.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},B.prototype.updateData=function(t){var e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},B.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)};var O={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},F=function(t,e,i,o){this.length=e.length,this.attributes=i,this.itemSize=e.bytesPerElement,this.dynamicDraw=o,this.context=t;var r=t.gl;this.buffer=r.createBuffer(),t.bindVertexBuffer.set(this.buffer),r.bufferData(r.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};F.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},F.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},F.prototype.enableAttributes=function(t,e){for(var i=0;i<this.attributes.length;i++){var o=this.attributes[i],r=e.attributes[o.name];void 0!==r&&t.enableVertexAttribArray(r)}},F.prototype.setVertexAttribPointers=function(t,e,i){for(var o=0;o<this.attributes.length;o++){var r=this.attributes[o],a=e.attributes[r.name];void 0!==a&&t.vertexAttribPointer(a,r.components,t[O[r.type]],!1,this.itemSize,r.offset+this.itemSize*(i||0))}},F.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)};var U=function(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};U.prototype.get=function(){return this.current},U.prototype.set=function(t){},U.prototype.getDefault=function(){return this.default},U.prototype.setDefault=function(){this.set(this.default)};var N=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return t.Color.transparent},i.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},i}(U),Z=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 1},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)},e}(U),j=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)},e}(U),V=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return[!0,!0,!0,!0]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(U),q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)},e}(U),G=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 255},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)},e}(U),W=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},e.prototype.set=function(t){var e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)},e}(U),X=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)},e}(U),H=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}},e}(U),K=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return[0,1]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)},e}(U),Y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}},e}(U),J=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.LESS},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)},e}(U),Q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}},e}(U),$=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.ONE,t.ZERO]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)},e}(U),tt=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return t.Color.transparent},i.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},i}(U),et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.FUNC_ADD},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)},e}(U),it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}},e}(U),ot=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.BACK},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)},e}(U),rt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.CCW},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)},e}(U),at=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)},e}(U),nt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.TEXTURE0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)},e}(U),st=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(U),lt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}},e}(U),ct=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(U),ut=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}},e}(U),ht=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}},e}(U),pt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1},e}(U),dt=function(t){function e(e){t.call(this,e),this.vao=e.extVertexArrayObject}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)},e}(U),_t=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 4},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}},e}(U),ft=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}},e}(U),mt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}},e}(U),gt=function(t){function e(e,i){t.call(this,e),this.context=e,this.parent=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e}(U),vt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setDirty=function(){this.dirty=!0},e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e}(gt),yt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(gt),xt=function(t,e,i){this.context=t,this.width=e,this.height=i;var o=t.gl,r=this.framebuffer=o.createFramebuffer();this.colorAttachment=new vt(t,r),this.depthAttachment=new yt(t,r)};xt.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();e&&t.deleteTexture(e);var i=this.depthAttachment.get();i&&t.deleteRenderbuffer(i),t.deleteFramebuffer(this.framebuffer)};var bt=function(t,e,i){this.func=t,this.mask=e,this.range=i};bt.ReadOnly=!1,bt.ReadWrite=!0,bt.disabled=new bt(519,bt.ReadOnly,[0,1]);var wt=function(t,e,i,o,r,a){this.test=t,this.ref=e,this.mask=i,this.fail=o,this.depthFail=r,this.pass=a};wt.disabled=new wt({func:519,mask:0},0,0,7680,7680,7680);var Et=function(t,e,i){this.blendFunction=t,this.blendColor=e,this.mask=i};Et.disabled=new Et(Et.Replace=[1,0],t.Color.transparent,[!1,!1,!1,!1]),Et.unblended=new Et(Et.Replace,t.Color.transparent,[!0,!0,!0,!0]),Et.alphaBlended=new Et([1,771],t.Color.transparent,[!0,!0,!0,!0]);var Tt=function(t,e,i){this.enable=t,this.mode=e,this.frontFace=i};Tt.disabled=new Tt(!1,1029,2305),Tt.backCCW=new Tt(!0,1029,2305);var It=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new N(this),this.clearDepth=new Z(this),this.clearStencil=new j(this),this.colorMask=new V(this),this.depthMask=new q(this),this.stencilMask=new G(this),this.stencilFunc=new W(this),this.stencilOp=new X(this),this.stencilTest=new H(this),this.depthRange=new K(this),this.depthTest=new Y(this),this.depthFunc=new J(this),this.blend=new Q(this),this.blendFunc=new $(this),this.blendColor=new tt(this),this.blendEquation=new et(this),this.cullFace=new it(this),this.cullFaceSide=new ot(this),this.frontFace=new rt(this),this.program=new at(this),this.activeTexture=new nt(this),this.viewport=new st(this),this.bindFramebuffer=new lt(this),this.bindRenderbuffer=new ct(this),this.bindTexture=new ut(this),this.bindVertexBuffer=new ht(this),this.bindElementBuffer=new pt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new dt(this),this.pixelStoreUnpack=new _t(this),this.pixelStoreUnpackPremultiplyAlpha=new ft(this),this.pixelStoreUnpackFlipY=new mt(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&t.getExtension("OES_texture_half_float_linear")};It.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},It.prototype.createIndexBuffer=function(t,e){return new B(this,t,e)},It.prototype.createVertexBuffer=function(t,e,i){return new F(this,t,e,i)},It.prototype.createRenderbuffer=function(t,e,i){var o=this.gl,r=o.createRenderbuffer();return this.bindRenderbuffer.set(r),o.renderbufferStorage(o.RENDERBUFFER,t,e,i),this.bindRenderbuffer.set(null),r},It.prototype.createFramebuffer=function(t,e){return new xt(this,t,e)},It.prototype.clear=function(t){var e=t.color,i=t.depth,o=this.gl,r=0;e&&(r|=o.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==i&&(r|=o.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(i),this.depthMask.set(!0)),o.clear(r)},It.prototype.setCullFace=function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))},It.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},It.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},It.prototype.setColorMode=function(e){t.isEqual(e.blendFunction,Et.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)},It.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Ct=function(e){function i(i,o,r){var a=this;e.call(this),this.id=i,this.dispatcher=r,this.on("data",function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(a._sourceLoaded=!0),a._sourceLoaded&&!a._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(a.reload(),a.transform&&a.update(a.transform))}),this.on("error",function(){a._sourceErrored=!0}),this._source=D(i,o,r,this),this._tiles={},this._cache=new k(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._coveredTiles={},this._state=new t.SourceFeatureState}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},i.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},i.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},i.prototype.getSource=function(){return this._source},i.prototype.pause=function(){this._paused=!0},i.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},i.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},i.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,function(){})},i.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,function(){})},i.prototype.serialize=function(){return this._source.serialize()},i.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles)this._tiles[e].upload(t)},i.prototype.getIds=function(){return Object.keys(this._tiles).map(Number).sort(St)},i.prototype.getRenderableIds=function(e){var i=this,o=[];for(var r in this._tiles)this._isIdRenderable(+r,e)&&o.push(+r);return e?o.sort(function(e,o){var r=i._tiles[e].tileID,a=i._tiles[o].tileID,n=new t.Point(r.canonical.x,r.canonical.y)._rotate(i.transform.angle),s=new t.Point(a.canonical.x,a.canonical.y)._rotate(i.transform.angle);return r.overscaledZ-a.overscaledZ||s.y-n.y||s.x-n.x}):o.sort(St)},i.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)},i.prototype._isIdRenderable=function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())},i.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},i.prototype._reloadTile=function(t,e){var i=this._tiles[t];i&&("loading"!==i.state&&(i.state=e),this._loadTile(i,this._tileLoaded.bind(this,i,t,e)))},i.prototype._tileLoaded=function(e,i,o,r){if(r)return e.state="errored",void(404!==r.status?this._source.fire(new t.ErrorEvent(r,{tile:e})):this.update(this.transform));e.timeAdded=t.browser.now(),"expired"===o&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(i,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))},i.prototype._backfillDEM=function(t){for(var e=this.getRenderableIds(),i=0;i<e.length;i++){var o=e[i];if(t.neighboringTiles&&t.neighboringTiles[o]){var r=this.getTileByID(o);a(t,r),a(r,t)}}function a(t,e){t.needsHillshadePrepare=!0;var i=e.tileID.canonical.x-t.tileID.canonical.x,o=e.tileID.canonical.y-t.tileID.canonical.y,r=Math.pow(2,t.tileID.canonical.z),a=e.tileID.key;0===i&&0===o||Math.abs(o)>1||(Math.abs(i)>1&&(1===Math.abs(i+r)?i+=r:1===Math.abs(i-r)&&(i-=r)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,i,o),t.neighboringTiles&&t.neighboringTiles[a]&&(t.neighboringTiles[a].backfilled=!0)))}},i.prototype.getTile=function(t){return this.getTileByID(t.key)},i.prototype.getTileByID=function(t){return this._tiles[t]},i.prototype.getZoom=function(t){return t.zoom+t.scaleZoom(t.tileSize/this._source.tileSize)},i.prototype._retainLoadedChildren=function(t,e,i,o){for(var r in this._tiles){var a=this._tiles[r];if(!(o[r]||!a.hasData()||a.tileID.overscaledZ<=e||a.tileID.overscaledZ>i)){for(var n=a.tileID;a&&a.tileID.overscaledZ>e+1;){var s=a.tileID.scaledTo(a.tileID.overscaledZ-1);(a=this._tiles[s.key])&&a.hasData()&&(n=s)}for(var l=n;l.overscaledZ>e;)if(t[(l=l.scaledTo(l.overscaledZ-1)).key]){o[n.key]=n;break}}}},i.prototype.findLoadedParent=function(t,e){for(var i=t.overscaledZ-1;i>=e;i--){var o=t.scaledTo(i);if(!o)return;var r=String(o.key),a=this._tiles[r];if(a&&a.hasData())return a;if(this._cache.has(o))return this._cache.get(o)}},i.prototype.updateCacheSize=function(t){var e=(Math.ceil(t.width/this._source.tileSize)+1)*(Math.ceil(t.height/this._source.tileSize)+1),i=Math.floor(5*e),o="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,i):i;this._cache.setMaxSize(o)},i.prototype.handleWrapJump=function(t){var e=(t-(void 0===this._prevLng?t:this._prevLng))/360,i=Math.round(e);if(this._prevLng=t,i){var o={};for(var r in this._tiles){var a=this._tiles[r];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+i),o[a.tileID.key]=a}for(var n in this._tiles=o,this._timers)clearTimeout(this._timers[n]),delete this._timers[n];for(var s in this._tiles){var l=this._tiles[s];this._setTileReloadTimer(s,l)}}},i.prototype.update=function(e){var o=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var r;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?r=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(e){return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)}):(r=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(r=r.filter(function(t){return o._source.hasTile(t)}))):r=[];var a=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(e)),n=Math.max(a-i.maxOverzooming,this._source.minzoom),s=Math.max(a+i.maxUnderzooming,this._source.minzoom),l=this._updateRetainedTiles(r,a);if(zt(this._source.type)){for(var c={},u={},h=0,p=Object.keys(l);h<p.length;h+=1){var d=p[h],_=l[d],f=this._tiles[d];if(f&&!(f.fadeEndTime&&f.fadeEndTime<=t.browser.now())){var m=this.findLoadedParent(_,n);m&&(this._addTile(m.tileID),c[m.tileID.key]=m.tileID),u[d]=_}}for(var g in this._retainLoadedChildren(u,a,s,l),c)l[g]||(this._coveredTiles[g]=!0,l[g]=c[g])}for(var v in l)this._tiles[v].clearFadeHold();for(var y=0,x=t.keysDifference(this._tiles,l);y<x.length;y+=1){var b=x[y],w=this._tiles[b];w.hasSymbolBuckets&&!w.holdingForFade()?w.setHoldDuration(this.map._fadeDuration):w.hasSymbolBuckets&&!w.symbolFadeFinished()||this._removeTile(b)}}},i.prototype.releaseSymbolFadeTiles=function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)},i.prototype._updateRetainedTiles=function(t,e){for(var o={},r={},a=Math.max(e-i.maxOverzooming,this._source.minzoom),n=Math.max(e+i.maxUnderzooming,this._source.minzoom),s={},l=0,c=t;l<c.length;l+=1){var u=c[l],h=this._addTile(u);o[u.key]=u,h.hasData()||e<this._source.maxzoom&&(s[u.key]=u)}this._retainLoadedChildren(s,e,n,o);for(var p=0,d=t;p<d.length;p+=1){var _=d[p],f=this._tiles[_.key];if(!f.hasData()){if(e+1>this._source.maxzoom){var m=_.children(this._source.maxzoom)[0],g=this.getTile(m);if(g&&g.hasData()){o[m.key]=m;continue}}else{var v=_.children(this._source.maxzoom);if(o[v[0].key]&&o[v[1].key]&&o[v[2].key]&&o[v[3].key])continue}for(var y=f.wasRequested(),x=_.overscaledZ-1;x>=a;--x){var b=_.scaledTo(x);if(r[b.key])break;if(r[b.key]=!0,!(f=this.getTile(b))&&y&&(f=this._addTile(b)),f&&(o[b.key]=b,y=f.wasRequested(),f.hasData()))break}}}return o},i.prototype._addTile=function(e){var i=this._tiles[e.key];if(i)return i;(i=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,i),i.tileID=e,this._state.initializeTileState(i,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,i)));var o=Boolean(i);return o||(i=new t.Tile(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(i,this._tileLoaded.bind(this,i,e.key,i.state))),i?(i.uses++,this._tiles[e.key]=i,o||this._source.fire(new t.Event("dataloading",{tile:i,coord:i.tileID,dataType:"source"})),i):null},i.prototype._setTileReloadTimer=function(t,e){var i=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var o=e.getExpiryTimeout();o&&(this._timers[t]=setTimeout(function(){i._reloadTile(t,"expired"),delete i._timers[t]},o))},i.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},i.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},i.prototype.tilesIn=function(e,i,o){var r=this,a=[],n=this.transform;if(!n)return a;for(var s=o?n.getCameraQueryGeometry(e):e,l=e.map(function(t){return n.pointCoordinate(t)}),c=s.map(function(t){return n.pointCoordinate(t)}),u=this.getIds(),h=1/0,p=1/0,d=-1/0,_=-1/0,f=0,m=c;f<m.length;f+=1){var g=m[f];h=Math.min(h,g.x),p=Math.min(p,g.y),d=Math.max(d,g.x),_=Math.max(_,g.y)}for(var v=function(e){var o=r._tiles[u[e]];if(!o.holdingForFade()){var s=o.tileID,f=Math.pow(2,n.zoom-o.tileID.overscaledZ),m=i*o.queryPadding*t.EXTENT/o.tileSize/f,g=[s.getTilePoint(new t.MercatorCoordinate(h,p)),s.getTilePoint(new t.MercatorCoordinate(d,_))];if(g[0].x-m<t.EXTENT&&g[0].y-m<t.EXTENT&&g[1].x+m>=0&&g[1].y+m>=0){var v=l.map(function(t){return s.getTilePoint(t)}),y=c.map(function(t){return s.getTilePoint(t)});a.push({tile:o,tileID:s,queryGeometry:v,cameraQueryGeometry:y,scale:f})}}},y=0;y<u.length;y++)v(y);return a},i.prototype.getVisibleCoordinates=function(t){for(var e=this,i=this.getRenderableIds(t).map(function(t){return e._tiles[t].tileID}),o=0,r=i;o<r.length;o+=1){var a=r[o];a.posMatrix=this.transform.calculatePosMatrix(a.toUnwrapped())}return i},i.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(zt(this._source.type))for(var e in this._tiles){var i=this._tiles[e];if(void 0!==i.fadeEndTime&&i.fadeEndTime>=t.browser.now())return!0}return!1},i.prototype.setFeatureState=function(t,e,i){t=t||"_geojsonTileLayer",this._state.updateState(t,e,i)},i.prototype.removeFeatureState=function(t,e,i){t=t||"_geojsonTileLayer",this._state.removeFeatureState(t,e,i)},i.prototype.getFeatureState=function(t,e){return t=t||"_geojsonTileLayer",this._state.getState(t,e)},i}(t.Evented);function St(t,e){return t%32-e%32||e-t}function zt(t){return"raster"===t||"image"===t||"video"===t}function Lt(){return new t.window.Worker(Qo.workerUrl)}Ct.maxOverzooming=10,Ct.maxUnderzooming=3;var Pt=function(){this.active={}};Pt.prototype.acquire=function(t){if(!this.workers)for(this.workers=[];this.workers.length<Pt.workerCount;)this.workers.push(new Lt);return this.active[t]=!0,this.workers.slice()},Pt.prototype.release=function(t){delete this.active[t],0===Object.keys(this.active).length&&(this.workers.forEach(function(t){t.terminate()}),this.workers=null)};var Dt,Rt=Math.floor(t.browser.hardwareConcurrency/2);function Mt(e,i){var o={};for(var r in e)"ref"!==r&&(o[r]=e[r]);return t.refProperties.forEach(function(t){t in i&&(o[t]=i[t])}),o}function At(t){t=t.slice();for(var e=Object.create(null),i=0;i<t.length;i++)e[t[i].id]=t[i];for(var o=0;o<t.length;o++)"ref"in t[o]&&(t[o]=Mt(t[o],e[t[o].ref]));return t}Pt.workerCount=Math.max(Math.min(Rt,6),1);var kt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Bt(t,e,i){i.push({command:kt.addSource,args:[t,e[t]]})}function Ot(t,e,i){e.push({command:kt.removeSource,args:[t]}),i[t]=!0}function Ft(t,e,i,o){Ot(t,i,o),Bt(t,e,i)}function Ut(e,i,o){var r;for(r in e[o])if(e[o].hasOwnProperty(r)&&"data"!==r&&!t.isEqual(e[o][r],i[o][r]))return!1;for(r in i[o])if(i[o].hasOwnProperty(r)&&"data"!==r&&!t.isEqual(e[o][r],i[o][r]))return!1;return!0}function Nt(e,i,o,r,a,n){var s;for(s in i=i||{},e=e||{})e.hasOwnProperty(s)&&(t.isEqual(e[s],i[s])||o.push({command:n,args:[r,s,i[s],a]}));for(s in i)i.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t.isEqual(e[s],i[s])||o.push({command:n,args:[r,s,i[s],a]}))}function Zt(t){return t.id}function jt(t,e){return t[e.id]=e,t}var qt=function(t,e,i){var o=this.boxCells=[],r=this.circleCells=[];this.xCellCount=Math.ceil(t/i),this.yCellCount=Math.ceil(e/i);for(var a=0;a<this.xCellCount*this.yCellCount;a++)o.push([]),r.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};qt.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},qt.prototype.insert=function(t,e,i,o,r){this._forEachCell(e,i,o,r,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(o),this.bboxes.push(r)},qt.prototype.insertCircle=function(t,e,i,o){this._forEachCell(e-o,i-o,e+o,i+o,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(i),this.circles.push(o)},qt.prototype._insertBoxCell=function(t,e,i,o,r,a){this.boxCells[r].push(a)},qt.prototype._insertCircleCell=function(t,e,i,o,r,a){this.circleCells[r].push(a)},qt.prototype._query=function(t,e,i,o,r,a){if(i<0||t>this.width||o<0||e>this.height)return!r&&[];var n=[];if(t<=0&&e<=0&&this.width<=i&&this.height<=o){if(r)return!0;for(var s=0;s<this.boxKeys.length;s++)n.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var l=0;l<this.circleKeys.length;l++){var c=this.circles[3*l],u=this.circles[3*l+1],h=this.circles[3*l+2];n.push({key:this.circleKeys[l],x1:c-h,y1:u-h,x2:c+h,y2:u+h})}return a?n.filter(a):n}var p={hitTest:r,seenUids:{box:{},circle:{}}};return this._forEachCell(t,e,i,o,this._queryCell,n,p,a),r?n.length>0:n},qt.prototype._queryCircle=function(t,e,i,o,r){var a=t-i,n=t+i,s=e-i,l=e+i;if(n<0||a>this.width||l<0||s>this.height)return!o&&[];var c=[],u={hitTest:o,circle:{x:t,y:e,radius:i},seenUids:{box:{},circle:{}}};return this._forEachCell(a,s,n,l,this._queryCellCircle,c,u,r),o?c.length>0:c},qt.prototype.query=function(t,e,i,o,r){return this._query(t,e,i,o,!1,r)},qt.prototype.hitTest=function(t,e,i,o,r){return this._query(t,e,i,o,!0,r)},qt.prototype.hitTestCircle=function(t,e,i,o){return this._queryCircle(t,e,i,!0,o)},qt.prototype._queryCell=function(t,e,i,o,r,a,n,s){var l=n.seenUids,c=this.boxCells[r];if(null!==c)for(var u=this.bboxes,h=0,p=c;h<p.length;h+=1){var d=p[h];if(!l.box[d]){l.box[d]=!0;var _=4*d;if(t<=u[_+2]&&e<=u[_+3]&&i>=u[_+0]&&o>=u[_+1]&&(!s||s(this.boxKeys[d]))){if(n.hitTest)return a.push(!0),!0;a.push({key:this.boxKeys[d],x1:u[_],y1:u[_+1],x2:u[_+2],y2:u[_+3]})}}}var f=this.circleCells[r];if(null!==f)for(var m=this.circles,g=0,v=f;g<v.length;g+=1){var y=v[g];if(!l.circle[y]){l.circle[y]=!0;var x=3*y;if(this._circleAndRectCollide(m[x],m[x+1],m[x+2],t,e,i,o)&&(!s||s(this.circleKeys[y]))){if(n.hitTest)return a.push(!0),!0;var b=m[x],w=m[x+1],E=m[x+2];a.push({key:this.circleKeys[y],x1:b-E,y1:w-E,x2:b+E,y2:w+E})}}}},qt.prototype._queryCellCircle=function(t,e,i,o,r,a,n,s){var l=n.circle,c=n.seenUids,u=this.boxCells[r];if(null!==u)for(var h=this.bboxes,p=0,d=u;p<d.length;p+=1){var _=d[p];if(!c.box[_]){c.box[_]=!0;var f=4*_;if(this._circleAndRectCollide(l.x,l.y,l.radius,h[f+0],h[f+1],h[f+2],h[f+3])&&(!s||s(this.boxKeys[_])))return a.push(!0),!0}}var m=this.circleCells[r];if(null!==m)for(var g=this.circles,v=0,y=m;v<y.length;v+=1){var x=y[v];if(!c.circle[x]){c.circle[x]=!0;var b=3*x;if(this._circlesCollide(g[b],g[b+1],g[b+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[x])))return a.push(!0),!0}}},qt.prototype._forEachCell=function(t,e,i,o,r,a,n,s){for(var l=this._convertToXCellCoord(t),c=this._convertToYCellCoord(e),u=this._convertToXCellCoord(i),h=this._convertToYCellCoord(o),p=l;p<=u;p++)for(var d=c;d<=h;d++){var _=this.xCellCount*d+p;if(r.call(this,t,e,i,o,_,a,n,s))return}},qt.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},qt.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},qt.prototype._circlesCollide=function(t,e,i,o,r,a){var n=o-t,s=r-e,l=i+a;return l*l>n*n+s*s},qt.prototype._circleAndRectCollide=function(t,e,i,o,r,a,n){var s=(a-o)/2,l=Math.abs(t-(o+s));if(l>s+i)return!1;var c=(n-r)/2,u=Math.abs(e-(r+c));if(u>c+i)return!1;if(l<=s||u<=c)return!0;var h=l-s,p=u-c;return h*h+p*p<=i*i};var Gt=t.properties.layout;function Wt(e,i,o,r,a){var n=t.identity(new Float32Array(16));return i?(t.identity(n),t.scale(n,n,[1/a,1/a,1]),o||t.rotateZ(n,n,r.angle)):(t.scale(n,n,[r.width/2,-r.height/2,1]),t.translate(n,n,[1,-1,0]),t.multiply(n,n,e)),n}function Xt(e,i,o,r,a){var n=t.identity(new Float32Array(16));return i?(t.multiply(n,n,e),t.scale(n,n,[a,a,1]),o||t.rotateZ(n,n,-r.angle)):(t.scale(n,n,[1,-1,1]),t.translate(n,n,[-1,-1,0]),t.scale(n,n,[2/r.width,2/r.height,1])),n}function Ht(e,i){var o=[e.x,e.y,0,1];re(o,o,i);var r=o[3];return{point:new t.Point(o[0]/r,o[1]/r),signedDistanceFromCamera:r}}function Kt(t,e){var i=t[0]/t[3],o=t[1]/t[3];return i>=-e[0]&&i<=e[0]&&o>=-e[1]&&o<=e[1]}function Yt(e,i,o,r,a,n,s,l){var c=r?e.textSizeData:e.iconSizeData,u=t.evaluateSizeForZoom(c,o.transform.zoom,Gt.properties[r?"text-size":"icon-size"]),h=[256/o.width*2+1,256/o.height*2+1],p=r?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;p.clear();for(var d=e.lineVertexArray,_=r?e.text.placedSymbolArray:e.icon.placedSymbolArray,f=o.transform.width/o.transform.height,m=!1,g=0;g<_.length;g++){var v=_.get(g);if(v.hidden||v.writingMode===t.WritingMode.vertical&&!m)oe(v.numGlyphs,p);else{m=!1;var y=[v.anchorX,v.anchorY,0,1];if(t.transformMat4(y,y,i),Kt(y,h)){var x=.5+y[3]/o.transform.cameraToCenterDistance*.5,b=t.evaluateSizeForFeature(c,u,v),w=s?b*x:b/x,E=new t.Point(v.anchorX,v.anchorY),T=Ht(E,a).point,I={},C=$t(v,w,!1,l,i,a,n,e.glyphOffsetArray,d,p,T,E,I,f);m=C.useVertical,(C.notEnoughRoom||m||C.needsFlipping&&$t(v,w,!0,l,i,a,n,e.glyphOffsetArray,d,p,T,E,I,f).notEnoughRoom)&&oe(v.numGlyphs,p)}else oe(v.numGlyphs,p)}}r?e.text.dynamicLayoutVertexBuffer.updateData(p):e.icon.dynamicLayoutVertexBuffer.updateData(p)}function Jt(t,e,i,o,r,a,n,s,l,c,u,h){var p=s.glyphStartIndex+s.numGlyphs,d=s.lineStartIndex,_=s.lineStartIndex+s.lineLength,f=e.getoffsetX(s.glyphStartIndex),m=e.getoffsetX(p-1),g=ee(t*f,i,o,r,a,n,s.segment,d,_,l,c,u,h);if(!g)return null;var v=ee(t*m,i,o,r,a,n,s.segment,d,_,l,c,u,h);return v?{first:g,last:v}:null}function Qt(e,i,o,r){return e===t.WritingMode.horizontal&&Math.abs(o.y-i.y)>Math.abs(o.x-i.x)*r?{useVertical:!0}:(e===t.WritingMode.vertical?i.y<o.y:i.x>o.x)?{needsFlipping:!0}:null}function $t(e,i,o,r,a,n,s,l,c,u,h,p,d,_){var f,m=i/24,g=e.lineOffsetX*i,v=e.lineOffsetY*i;if(e.numGlyphs>1){var y=e.glyphStartIndex+e.numGlyphs,x=e.lineStartIndex,b=e.lineStartIndex+e.lineLength,w=Jt(m,l,g,v,o,h,p,e,c,n,d,!1);if(!w)return{notEnoughRoom:!0};var E=Ht(w.first.point,s).point,T=Ht(w.last.point,s).point;if(r&&!o){var I=Qt(e.writingMode,E,T,_);if(I)return I}f=[w.first];for(var C=e.glyphStartIndex+1;C<y-1;C++)f.push(ee(m*l.getoffsetX(C),g,v,o,h,p,e.segment,x,b,c,n,d,!1));f.push(w.last)}else{if(r&&!o){var S=Ht(p,a).point,z=e.lineStartIndex+e.segment+1,L=new t.Point(c.getx(z),c.gety(z)),P=Ht(L,a),D=P.signedDistanceFromCamera>0?P.point:te(p,L,S,1,a),R=Qt(e.writingMode,S,D,_);if(R)return R}var M=ee(m*l.getoffsetX(e.glyphStartIndex),g,v,o,h,p,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,c,n,d,!1);if(!M)return{notEnoughRoom:!0};f=[M]}for(var A=0,k=f;A<k.length;A+=1){var B=k[A];t.addDynamicAttributes(u,B.point,B.angle)}return{}}function te(t,e,i,o,r){var a=Ht(t.add(t.sub(e)._unit()),r).point,n=i.sub(a);return i.add(n._mult(o/n.mag()))}function ee(e,i,o,r,a,n,s,l,c,u,h,p,d){var _=r?e-i:e+i,f=_>0?1:-1,m=0;r&&(f*=-1,m=Math.PI),f<0&&(m+=Math.PI);for(var g=f>0?l+s:l+s+1,v=g,y=a,x=a,b=0,w=0,E=Math.abs(_);b+w<=E;){if((g+=f)<l||g>=c)return null;if(x=y,void 0===(y=p[g])){var T=new t.Point(u.getx(g),u.gety(g)),I=Ht(T,h);if(I.signedDistanceFromCamera>0)y=p[g]=I.point;else{var C=g-f;y=te(0===b?n:new t.Point(u.getx(C),u.gety(C)),T,x,E-b+1,h)}}b+=w,w=x.dist(y)}var S=(E-b)/w,z=y.sub(x),L=z.mult(S)._add(x);return L._add(z._unit()._perp()._mult(o*f)),{point:L,angle:m+Math.atan2(y.y-x.y,y.x-x.x),tileDistance:d?{prevTileDistance:g-f===v?0:u.gettileUnitDistanceFromAnchor(g-f),lastSegmentViewportDistance:E-b}:null}}var ie=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function oe(t,e){for(var i=0;i<t;i++){var o=e.length;e.resize(o+4),e.float32.set(ie,3*o)}}function re(t,e,i){var o=e[0],r=e[1];return t[0]=i[0]*o+i[4]*r+i[12],t[1]=i[1]*o+i[5]*r+i[13],t[3]=i[3]*o+i[7]*r+i[15],t}var ae=function(t,e,i){void 0===e&&(e=new qt(t.width+200,t.height+200,25)),void 0===i&&(i=new qt(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=i,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200};function ne(t,e,i){t[e+4]=i?1:0}function se(e,i,o){return i*(t.EXTENT/(e.tileSize*Math.pow(2,o-e.tileID.overscaledZ)))}ae.prototype.placeCollisionBox=function(t,e,i,o,r){var a=this.projectAndGetPerspectiveRatio(o,t.anchorPointX,t.anchorPointY),n=i*a.perspectiveRatio,s=t.x1*n+a.point.x,l=t.y1*n+a.point.y,c=t.x2*n+a.point.x,u=t.y2*n+a.point.y;return!this.isInsideGrid(s,l,c,u)||!e&&this.grid.hitTest(s,l,c,u,r)?{box:[],offscreen:!1}:{box:[s,l,c,u],offscreen:this.isOffscreen(s,l,c,u)}},ae.prototype.approximateTileDistance=function(t,e,i,o,r){var a=r?1:o/this.pitchfactor,n=t.lastSegmentViewportDistance*i;return t.prevTileDistance+n+(a-1)*n*Math.abs(Math.sin(e))},ae.prototype.placeCollisionCircles=function(e,i,o,r,a,n,s,l,c,u,h,p,d){var _=[],f=this.projectAnchor(c,a.anchorX,a.anchorY),m=l/24,g=a.lineOffsetX*l,v=a.lineOffsetY*l,y=new t.Point(a.anchorX,a.anchorY),x=Jt(m,s,g,v,!1,Ht(y,u).point,y,a,n,u,{},!0),b=!1,w=!1,E=!0,T=f.perspectiveRatio*r,I=1/(r*o),C=0,S=0;x&&(C=this.approximateTileDistance(x.first.tileDistance,x.first.angle,I,f.cameraDistance,p),S=this.approximateTileDistance(x.last.tileDistance,x.last.angle,I,f.cameraDistance,p));for(var z=0;z<e.length;z+=5){var L=e[z],P=e[z+1],D=e[z+2],R=e[z+3];if(!x||R<-C||R>S)ne(e,z,!1);else{var M=this.projectPoint(c,L,P),A=D*T;if(_.length>0){var k=M.x-_[_.length-4],B=M.y-_[_.length-3];if(A*A*2>k*k+B*B&&z+8<e.length){var O=e[z+8];if(O>-C&&O<S){ne(e,z,!1);continue}}}var F=z/5;_.push(M.x,M.y,A,F),ne(e,z,!0);var U=M.x-A,N=M.y-A,Z=M.x+A,j=M.y+A;if(E=E&&this.isOffscreen(U,N,Z,j),w=w||this.isInsideGrid(U,N,Z,j),!i&&this.grid.hitTestCircle(M.x,M.y,A,d)){if(!h)return{circles:[],offscreen:!1};b=!0}}}return{circles:b||!w?[]:_,offscreen:E}},ae.prototype.queryRenderedSymbols=function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var i=[],o=1/0,r=1/0,a=-1/0,n=-1/0,s=0,l=e;s<l.length;s+=1){var c=l[s],u=new t.Point(c.x+100,c.y+100);o=Math.min(o,u.x),r=Math.min(r,u.y),a=Math.max(a,u.x),n=Math.max(n,u.y),i.push(u)}for(var h={},p={},d=0,_=this.grid.query(o,r,a,n).concat(this.ignoredGrid.query(o,r,a,n));d<_.length;d+=1){var f=_[d],m=f.key;if(void 0===h[m.bucketInstanceId]&&(h[m.bucketInstanceId]={}),!h[m.bucketInstanceId][m.featureIndex]){var g=[new t.Point(f.x1,f.y1),new t.Point(f.x2,f.y1),new t.Point(f.x2,f.y2),new t.Point(f.x1,f.y2)];t.polygonIntersectsPolygon(i,g)&&(h[m.bucketInstanceId][m.featureIndex]=!0,void 0===p[m.bucketInstanceId]&&(p[m.bucketInstanceId]=[]),p[m.bucketInstanceId].push(m.featureIndex))}}return p},ae.prototype.insertCollisionBox=function(t,e,i,o,r){var a={bucketInstanceId:i,featureIndex:o,collisionGroupID:r};(e?this.ignoredGrid:this.grid).insert(a,t[0],t[1],t[2],t[3])},ae.prototype.insertCollisionCircles=function(t,e,i,o,r){for(var a=e?this.ignoredGrid:this.grid,n={bucketInstanceId:i,featureIndex:o,collisionGroupID:r},s=0;s<t.length;s+=4)a.insertCircle(n,t[s],t[s+1],t[s+2])},ae.prototype.projectAnchor=function(t,e,i){var o=[e,i,0,1];return re(o,o,t),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/o[3]*.5,cameraDistance:o[3]}},ae.prototype.projectPoint=function(e,i,o){var r=[i,o,0,1];return re(r,r,e),new t.Point((r[0]/r[3]+1)/2*this.transform.width+100,(-r[1]/r[3]+1)/2*this.transform.height+100)},ae.prototype.projectAndGetPerspectiveRatio=function(e,i,o){var r=[i,o,0,1];return re(r,r,e),{point:new t.Point((r[0]/r[3]+1)/2*this.transform.width+100,(-r[1]/r[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5}},ae.prototype.isOffscreen=function(t,e,i,o){return i<100||t>=this.screenRightBoundary||o<100||e>this.screenBottomBoundary},ae.prototype.isInsideGrid=function(t,e,i,o){return i>=0&&t<this.gridRightBoundary&&o>=0&&e<this.gridBottomBoundary};var le=function(t,e,i,o){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):o&&i?1:0,this.placed=i};le.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var ce=function(t,e,i,o,r){this.text=new le(t?t.text:null,e,i,r),this.icon=new le(t?t.icon:null,e,o,r)};ce.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var ue=function(t,e,i){this.text=t,this.icon=e,this.skipFade=i},he=function(t,e,i,o,r){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=i,this.bucketIndex=o,this.tileID=r},pe=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}};pe.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]};var de=function(t,e,i){this.transform=t.clone(),this.collisionIndex=new ae(this.transform),this.placements={},this.opacities={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new pe(i)};function _e(t,e,i){t.emplaceBack(e?1:0,i?1:0),t.emplaceBack(e?1:0,i?1:0),t.emplaceBack(e?1:0,i?1:0),t.emplaceBack(e?1:0,i?1:0)}de.prototype.placeLayerTile=function(e,i,o,r){var a=i.getBucket(e),n=i.latestFeatureIndex;if(a&&n&&e.id===a.layerIds[0]){var s=i.collisionBoxArray,l=a.layers[0].layout,c=Math.pow(2,this.transform.zoom-i.tileID.overscaledZ),u=i.tileSize/t.EXTENT,h=this.transform.calculatePosMatrix(i.tileID.toUnwrapped()),p=Wt(h,"map"===l.get("text-pitch-alignment"),"map"===l.get("text-rotation-alignment"),this.transform,se(i,1,this.transform.zoom)),d=Wt(h,"map"===l.get("icon-pitch-alignment"),"map"===l.get("icon-rotation-alignment"),this.transform,se(i,1,this.transform.zoom));this.retainedQueryData[a.bucketInstanceId]=new he(a.bucketInstanceId,n,a.sourceLayerIndex,a.index,i.tileID),this.placeLayerBucket(a,h,p,d,c,u,o,i.holdingForFade(),r,s)}},de.prototype.placeLayerBucket=function(e,i,o,r,a,n,s,l,c,u){var h=e.layers[0].layout,p=t.evaluateSizeForZoom(e.textSizeData,this.transform.zoom,t.properties.layout.properties["text-size"]),d=h.get("text-optional"),_=h.get("icon-optional"),f=h.get("text-allow-overlap"),m=h.get("icon-allow-overlap"),g=f&&(m||!e.hasIconData()||_),v=m&&(f||!e.hasTextData()||d),y=this.collisionGroups.get(e.sourceID);!e.collisionArrays&&u&&e.deserializeCollisionBoxes(u);for(var x=0;x<e.symbolInstances.length;x++){var b=e.symbolInstances.get(x);if(!c[b.crossTileID]){if(l){this.placements[b.crossTileID]=new ue(!1,!1,!1);continue}var w=!1,E=!1,T=!0,I=null,C=null,S=null,z=0,L=0,P=e.collisionArrays[x];P.textFeatureIndex&&(z=P.textFeatureIndex),P.textBox&&(w=(I=this.collisionIndex.placeCollisionBox(P.textBox,h.get("text-allow-overlap"),n,i,y.predicate)).box.length>0,T=T&&I.offscreen);var D=P.textCircles;if(D){var R=e.text.placedSymbolArray.get(b.horizontalPlacedTextSymbolIndex),M=t.evaluateSizeForFeature(e.textSizeData,p,R);C=this.collisionIndex.placeCollisionCircles(D,h.get("text-allow-overlap"),a,n,R,e.lineVertexArray,e.glyphOffsetArray,M,i,o,s,"map"===h.get("text-pitch-alignment"),y.predicate),w=h.get("text-allow-overlap")||C.circles.length>0,T=T&&C.offscreen}P.iconFeatureIndex&&(L=P.iconFeatureIndex),P.iconBox&&(E=(S=this.collisionIndex.placeCollisionBox(P.iconBox,h.get("icon-allow-overlap"),n,i,y.predicate)).box.length>0,T=T&&S.offscreen);var A=d||0===b.numGlyphVertices&&0===b.numVerticalGlyphVertices,k=_||0===b.numIconVertices;A||k?k?A||(E=E&&w):w=E&&w:E=w=E&&w,w&&I&&this.collisionIndex.insertCollisionBox(I.box,h.get("text-ignore-placement"),e.bucketInstanceId,z,y.ID),E&&S&&this.collisionIndex.insertCollisionBox(S.box,h.get("icon-ignore-placement"),e.bucketInstanceId,L,y.ID),w&&C&&this.collisionIndex.insertCollisionCircles(C.circles,h.get("text-ignore-placement"),e.bucketInstanceId,z,y.ID),this.placements[b.crossTileID]=new ue(w||g,E||v,T||e.justReloaded),c[b.crossTileID]=!0}}e.justReloaded=!1},de.prototype.commit=function(t,e){this.commitTime=e;var i=!1,o=t&&0!==this.fadeDuration?(this.commitTime-t.commitTime)/this.fadeDuration:1,r=t?t.opacities:{};for(var a in this.placements){var n=this.placements[a],s=r[a];s?(this.opacities[a]=new ce(s,o,n.text,n.icon),i=i||n.text!==s.text.placed||n.icon!==s.icon.placed):(this.opacities[a]=new ce(null,o,n.text,n.icon,n.skipFade),i=i||n.text||n.icon)}for(var l in r){var c=r[l];if(!this.opacities[l]){var u=new ce(c,o,!1,!1);u.isHidden()||(this.opacities[l]=u,i=i||c.text.placed||c.icon.placed)}}i?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)},de.prototype.updateLayerOpacities=function(t,e){for(var i={},o=0,r=e;o<r.length;o+=1){var a=r[o],n=a.getBucket(t);n&&a.latestFeatureIndex&&t.id===n.layerIds[0]&&this.updateBucketOpacities(n,i,a.collisionBoxArray)}},de.prototype.updateBucketOpacities=function(t,e,i){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexArray.clear(),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexArray.clear();var o=t.layers[0].layout,r=new ce(null,0,!1,!1,!0),a=o.get("text-allow-overlap"),n=o.get("icon-allow-overlap"),s=new ce(null,0,a&&(n||!t.hasIconData()||o.get("icon-optional")),n&&(a||!t.hasTextData()||o.get("text-optional")),!0);!t.collisionArrays&&i&&(t.hasCollisionBoxData()||t.hasCollisionCircleData())&&t.deserializeCollisionBoxes(i);for(var l=0;l<t.symbolInstances.length;l++){var c=t.symbolInstances.get(l),u=e[c.crossTileID],h=this.opacities[c.crossTileID];u?h=r:h||(h=s,this.opacities[c.crossTileID]=h),e[c.crossTileID]=!0;var p=c.numGlyphVertices>0||c.numVerticalGlyphVertices>0,d=c.numIconVertices>0;if(p){for(var _=we(h.text),f=(c.numGlyphVertices+c.numVerticalGlyphVertices)/4,m=0;m<f;m++)t.text.opacityVertexArray.emplaceBack(_);t.text.placedSymbolArray.get(c.horizontalPlacedTextSymbolIndex).hidden=h.text.isHidden(),c.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(c.verticalPlacedTextSymbolIndex).hidden=h.text.isHidden())}if(d){for(var g=we(h.icon),v=0;v<c.numIconVertices/4;v++)t.icon.opacityVertexArray.emplaceBack(g);t.icon.placedSymbolArray.get(l).hidden=h.icon.isHidden()}if(t.hasCollisionBoxData()||t.hasCollisionCircleData()){var y=t.collisionArrays[l];if(y){y.textBox&&_e(t.collisionBox.collisionVertexArray,h.text.placed,!1),y.iconBox&&_e(t.collisionBox.collisionVertexArray,h.icon.placed,!1);var x=y.textCircles;if(x&&t.hasCollisionCircleData())for(var b=0;b<x.length;b+=5){var w=u||0===x[b+4];_e(t.collisionCircle.collisionVertexArray,h.text.placed,w)}}}}t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexBuffer&&t.collisionBox.collisionVertexBuffer.updateData(t.collisionBox.collisionVertexArray),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexBuffer&&t.collisionCircle.collisionVertexBuffer.updateData(t.collisionCircle.collisionVertexArray)},de.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration},de.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},de.prototype.stillRecent=function(t){return this.commitTime+this.fadeDuration>t},de.prototype.setStale=function(){this.stale=!0};var fe=Math.pow(2,25),me=Math.pow(2,24),ge=Math.pow(2,17),ve=Math.pow(2,16),ye=Math.pow(2,9),xe=Math.pow(2,8),be=Math.pow(2,1);function we(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,i=Math.floor(127*t.opacity);return i*fe+e*me+i*ge+e*ve+i*ye+e*xe+i*be+e}var Ee=function(){this._currentTileIndex=0,this._seenCrossTileIDs={}};Ee.prototype.continuePlacement=function(t,e,i,o,r){for(;this._currentTileIndex<t.length;){var a=t[this._currentTileIndex];if(e.placeLayerTile(o,a,i,this._seenCrossTileIDs),this._currentTileIndex++,r())return!0}};var Te=function(t,e,i,o,r,a){this.placement=new de(t,r,a),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=o,this._done=!1};Te.prototype.isDone=function(){return this._done},Te.prototype.continuePlacement=function(e,i,o){for(var r=this,a=t.browser.now(),n=function(){var e=t.browser.now()-a;return!r._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var s=i[e[this._currentPlacementIndex]],l=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=l)&&(!s.maxzoom||s.maxzoom>l)){if(this._inProgressLayer||(this._inProgressLayer=new Ee),this._inProgressLayer.continuePlacement(o[s.source],this.placement,this._showCollisionBoxes,s,n))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Te.prototype.commit=function(t,e){return this.placement.commit(t,e),this.placement};var Ie=512/t.EXTENT/2,Ce=function(t,e,i){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=i;for(var o=0;o<e.length;o++){var r=e.get(o),a=r.key;this.indexedSymbolInstances[a]||(this.indexedSymbolInstances[a]=[]),this.indexedSymbolInstances[a].push({crossTileID:r.crossTileID,coord:this.getScaledCoordinates(r,t)})}};Ce.prototype.getScaledCoordinates=function(e,i){var o=i.canonical.z-this.tileID.canonical.z,r=Ie/Math.pow(2,o);return{x:Math.floor((i.canonical.x*t.EXTENT+e.anchorX)*r),y:Math.floor((i.canonical.y*t.EXTENT+e.anchorY)*r)}},Ce.prototype.findMatches=function(t,e,i){for(var o=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),r=0;r<t.length;r++){var a=t.get(r);if(!a.crossTileID){var n=this.indexedSymbolInstances[a.key];if(n)for(var s=this.getScaledCoordinates(a,e),l=0,c=n;l<c.length;l+=1){var u=c[l];if(Math.abs(u.coord.x-s.x)<=o&&Math.abs(u.coord.y-s.y)<=o&&!i[u.crossTileID]){i[u.crossTileID]=!0,a.crossTileID=u.crossTileID;break}}}}};var Se=function(){this.maxCrossTileID=0};Se.prototype.generate=function(){return++this.maxCrossTileID};var ze=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};ze.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var i in this.indexes){var o=this.indexes[i],r={};for(var a in o){var n=o[a];n.tileID=n.tileID.unwrapTo(n.tileID.wrap+e),r[n.tileID.key]=n}this.indexes[i]=r}this.lng=t},ze.prototype.addBucket=function(t,e,i){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var o=0;o<e.symbolInstances.length;o++)e.symbolInstances.get(o).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var r=this.usedCrossTileIDs[t.overscaledZ];for(var a in this.indexes){var n=this.indexes[a];if(Number(a)>t.overscaledZ)for(var s in n){var l=n[s];l.tileID.isChildOf(t)&&l.findMatches(e.symbolInstances,t,r)}else{var c=n[t.scaledTo(Number(a)).key];c&&c.findMatches(e.symbolInstances,t,r)}}for(var u=0;u<e.symbolInstances.length;u++){var h=e.symbolInstances.get(u);h.crossTileID||(h.crossTileID=i.generate(),r[h.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Ce(t,e.symbolInstances,e.bucketInstanceId),!0},ze.prototype.removeBucketCrossTileIDs=function(t,e){for(var i in e.indexedSymbolInstances)for(var o=0,r=e.indexedSymbolInstances[i];o<r.length;o+=1){var a=r[o];delete this.usedCrossTileIDs[t][a.crossTileID]}},ze.prototype.removeStaleBuckets=function(t){var e=!1;for(var i in this.indexes){var o=this.indexes[i];for(var r in o)t[o[r].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,o[r]),delete o[r],e=!0)}return e};var Le=function(){this.layerIndexes={},this.crossTileIDs=new Se,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Le.prototype.addLayer=function(t,e,i){var o=this.layerIndexes[t.id];void 0===o&&(o=this.layerIndexes[t.id]=new ze);var r=!1,a={};o.handleWrapJump(i);for(var n=0,s=e;n<s.length;n+=1){var l=s[n],c=l.getBucket(t);c&&t.id===c.layerIds[0]&&(c.bucketInstanceId||(c.bucketInstanceId=++this.maxBucketInstanceId),o.addBucket(l.tileID,c,this.crossTileIDs)&&(r=!0),a[c.bucketInstanceId]=!0)}return o.removeStaleBuckets(a)&&(r=!0),r},Le.prototype.pruneUnusedLayers=function(t){var e={};for(var i in t.forEach(function(t){e[t]=!0}),this.layerIndexes)e[i]||delete this.layerIndexes[i]};var Pe=function(e,i){return t.emitValidationErrors(e,i&&i.filter(function(t){return"source.canvas"!==t.identifier}))},De=t.pick(kt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Re=t.pick(kt,["setCenter","setZoom","setBearing","setPitch"]),Me=function(e){function i(o,r){var a=this;void 0===r&&(r={}),e.call(this),this.map=o,this.dispatcher=new w((Dt||(Dt=new Pt),Dt),this),this.imageManager=new h,this.glyphManager=new g(o._transformRequest,r.localIdeographFontFamily),this.lineAtlas=new b(256,512),this.crossTileSymbolIndex=new Le,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var n=this;this._rtlTextPluginCallback=i.registerForPluginAvailability(function(t){for(var e in n.dispatcher.broadcast("loadRTLTextPlugin",t.pluginURL,t.completionCallback),n.sourceCaches)n.sourceCaches[e].reload()}),this.on("data",function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=a.sourceCaches[t.sourceId];if(e){var i=e.getSource();if(i&&i.vectorLayerIds)for(var o in a._layers){var r=a._layers[o];r.source===i.id&&a._validateLayer(r)}}}})}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.loadURL=function(e,i){var o=this;void 0===i&&(i={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var r="boolean"==typeof i.validate?i.validate:!t.isMapboxURL(e);e=t.normalizeStyleURL(e,i.accessToken);var a=this.map._transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(a,function(e,i){o._request=null,e?o.fire(new t.ErrorEvent(e)):i&&o._load(i,r)})},i.prototype.loadJSON=function(e,i){var o=this;void 0===i&&(i={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame(function(){o._request=null,o._load(e,!1!==i.validate)})},i.prototype._load=function(e,i){var o=this;if(!i||!Pe(this,t.validateStyle(e))){for(var r in this._loaded=!0,this.stylesheet=e,e.sources)this.addSource(r,e.sources[r],{validate:!1});e.sprite?this._spriteRequest=function(e,i,o){var r,a,n,s=t.browser.devicePixelRatio>1?"@2x":"",l=t.getJSON(i(t.normalizeSpriteURL(e,s,".json"),t.ResourceType.SpriteJSON),function(t,e){l=null,n||(n=t,r=e,u())}),c=t.getImage(i(t.normalizeSpriteURL(e,s,".png"),t.ResourceType.SpriteImage),function(t,e){c=null,n||(n=t,a=e,u())});function u(){if(n)o(n);else if(r&&a){var e=t.browser.getImageData(a),i={};for(var s in r){var l=r[s],c=l.width,u=l.height,h=l.x,p=l.y,d=l.sdf,_=l.pixelRatio,f=new t.RGBAImage({width:c,height:u});t.RGBAImage.copy(e,f,{x:h,y:p},{x:0,y:0},{width:c,height:u}),i[s]={data:f,pixelRatio:_,sdf:d}}o(null,i)}}return{cancel:function(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null)}}}(e.sprite,this.map._transformRequest,function(e,i){if(o._spriteRequest=null,e)o.fire(new t.ErrorEvent(e));else if(i)for(var r in i)o.imageManager.addImage(r,i[r]);o.imageManager.setLoaded(!0),o.fire(new t.Event("data",{dataType:"style"}))}):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var a=At(this.stylesheet.layers);this._order=a.map(function(t){return t.id}),this._layers={};for(var n=0,s=a;n<s.length;n+=1){var l=s[n];(l=t.createStyleLayer(l)).setEventedParent(this,{layer:{id:l.id}}),this._layers[l.id]=l}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new x(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},i.prototype._validateLayer=function(e){var i=this.sourceCaches[e.source];if(i){var o=e.sourceLayer;if(o){var r=i.getSource();("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(o))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+o+'" does not exist on source "'+r.id+'" as specified by style layer "'+e.id+'"')))}}},i.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},i.prototype._serializeLayers=function(t){for(var e=[],i=0,o=t;i<o.length;i+=1){var r=o[i],a=this._layers[r];"custom"!==a.type&&e.push(a.serialize())}return e},i.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},i.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},i.prototype.update=function(e){if(this._loaded){var i=this._changed;if(this._changed){var o=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);for(var a in(o.length||r.length)&&this._updateWorkerLayers(o,r),this._updatedSources){var n=this._updatedSources[a];"reload"===n?this._reloadSource(a):"clear"===n&&this._clearSource(a)}for(var s in this._updatedPaintProps)this._layers[s].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}for(var l in this.sourceCaches)this.sourceCaches[l].used=!1;for(var c=0,u=this._order;c<u.length;c+=1){var h=u[c],p=this._layers[h];p.recalculate(e),!p.isHidden(e.zoom)&&p.source&&(this.sourceCaches[p.source].used=!0)}this.light.recalculate(e),this.z=e.zoom,i&&this.fire(new t.Event("data",{dataType:"style"}))}},i.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},i.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={}},i.prototype.setState=function(e){var i=this;if(this._checkLoaded(),Pe(this,t.validateStyle(e)))return!1;(e=t.clone(e)).layers=At(e.layers);var o=function(e,i){if(!e)return[{command:kt.setStyle,args:[i]}];var o=[];try{if(!t.isEqual(e.version,i.version))return[{command:kt.setStyle,args:[i]}];t.isEqual(e.center,i.center)||o.push({command:kt.setCenter,args:[i.center]}),t.isEqual(e.zoom,i.zoom)||o.push({command:kt.setZoom,args:[i.zoom]}),t.isEqual(e.bearing,i.bearing)||o.push({command:kt.setBearing,args:[i.bearing]}),t.isEqual(e.pitch,i.pitch)||o.push({command:kt.setPitch,args:[i.pitch]}),t.isEqual(e.sprite,i.sprite)||o.push({command:kt.setSprite,args:[i.sprite]}),t.isEqual(e.glyphs,i.glyphs)||o.push({command:kt.setGlyphs,args:[i.glyphs]}),t.isEqual(e.transition,i.transition)||o.push({command:kt.setTransition,args:[i.transition]}),t.isEqual(e.light,i.light)||o.push({command:kt.setLight,args:[i.light]});var r={},a=[];!function(e,i,o,r){var a;for(a in i=i||{},e=e||{})e.hasOwnProperty(a)&&(i.hasOwnProperty(a)||Ot(a,o,r));for(a in i)i.hasOwnProperty(a)&&(e.hasOwnProperty(a)?t.isEqual(e[a],i[a])||("geojson"===e[a].type&&"geojson"===i[a].type&&Ut(e,i,a)?o.push({command:kt.setGeoJSONSourceData,args:[a,i[a].data]}):Ft(a,i,o,r)):Bt(a,i,o))}(e.sources,i.sources,a,r);var n=[];e.layers&&e.layers.forEach(function(t){r[t.source]?o.push({command:kt.removeLayer,args:[t.id]}):n.push(t)}),o=o.concat(a),function(e,i,o){i=i||[];var r,a,n,s,l,c,u,h=(e=e||[]).map(Zt),p=i.map(Zt),d=e.reduce(jt,{}),_=i.reduce(jt,{}),f=h.slice(),m=Object.create(null);for(r=0,a=0;r<h.length;r++)n=h[r],_.hasOwnProperty(n)?a++:(o.push({command:kt.removeLayer,args:[n]}),f.splice(f.indexOf(n,a),1));for(r=0,a=0;r<p.length;r++)n=p[p.length-1-r],f[f.length-1-r]!==n&&(d.hasOwnProperty(n)?(o.push({command:kt.removeLayer,args:[n]}),f.splice(f.lastIndexOf(n,f.length-a),1)):a++,c=f[f.length-r],o.push({command:kt.addLayer,args:[_[n],c]}),f.splice(f.length-r,0,n),m[n]=!0);for(r=0;r<p.length;r++)if(s=d[n=p[r]],l=_[n],!m[n]&&!t.isEqual(s,l))if(t.isEqual(s.source,l.source)&&t.isEqual(s["source-layer"],l["source-layer"])&&t.isEqual(s.type,l.type)){for(u in Nt(s.layout,l.layout,o,n,null,kt.setLayoutProperty),Nt(s.paint,l.paint,o,n,null,kt.setPaintProperty),t.isEqual(s.filter,l.filter)||o.push({command:kt.setFilter,args:[n,l.filter]}),t.isEqual(s.minzoom,l.minzoom)&&t.isEqual(s.maxzoom,l.maxzoom)||o.push({command:kt.setLayerZoomRange,args:[n,l.minzoom,l.maxzoom]}),s)s.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?Nt(s[u],l[u],o,n,u.slice(6),kt.setPaintProperty):t.isEqual(s[u],l[u])||o.push({command:kt.setLayerProperty,args:[n,u,l[u]]}));for(u in l)l.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?Nt(s[u],l[u],o,n,u.slice(6),kt.setPaintProperty):t.isEqual(s[u],l[u])||o.push({command:kt.setLayerProperty,args:[n,u,l[u]]}))}else o.push({command:kt.removeLayer,args:[n]}),c=f[f.lastIndexOf(n)+1],o.push({command:kt.addLayer,args:[l,c]})}(n,i.layers,o)}catch(t){console.warn("Unable to compute style diff:",t),o=[{command:kt.setStyle,args:[i]}]}return o}(this.serialize(),e).filter(function(t){return!(t.command in Re)});if(0===o.length)return!1;var r=o.filter(function(t){return!(t.command in De)});if(r.length>0)throw new Error("Unimplemented: "+r.map(function(t){return t.command}).join(", ")+".");return o.forEach(function(t){"setTransition"!==t.command&&i[t.command].apply(i,t.args)}),this.stylesheet=e,!0},i.prototype.addImage=function(e,i){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,i),this.fire(new t.Event("data",{dataType:"style"}))},i.prototype.getImage=function(t){return this.imageManager.getImage(t)},i.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this.fire(new t.Event("data",{dataType:"style"}))},i.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},i.prototype.addSource=function(e,i,o){var r=this;if(void 0===o&&(o={}),this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!i.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(i).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(i.type)>=0&&this._validate(t.validateStyle.source,"sources."+e,i,null,o))){this.map&&this.map._collectResourceTiming&&(i.collectResourceTiming=!0);var a=this.sourceCaches[e]=new Ct(e,i,this.dispatcher);a.style=this,a.setEventedParent(this,function(){return{isSourceLoaded:r.loaded(),source:a.serialize(),sourceId:e}}),a.onAdd(this.map),this._changed=!0}},i.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var i in this._layers)if(this._layers[i].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+i+'" is using it.')));var o=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],o.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),o.setEventedParent(null),o.clearTiles(),o.onRemove&&o.onRemove(this.map),this._changed=!0},i.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},i.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},i.prototype.addLayer=function(e,i,o){void 0===o&&(o={}),this._checkLoaded();var r=e.id;if(this.getLayer(r))this.fire(new t.ErrorEvent(new Error('Layer with id "'+r+'" already exists on this map')));else{var a;if("custom"===e.type){if(Pe(this,t.validateCustomStyleLayer(e)))return;a=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(r,e.source),e=t.clone(e),e=t.extend(e,{source:r})),this._validate(t.validateStyle.layer,"layers."+r,e,{arrayIndex:-1},o))return;a=t.createStyleLayer(e),this._validateLayer(a),a.setEventedParent(this,{layer:{id:r}})}var n=i?this._order.indexOf(i):this._order.length;if(i&&-1===n)this.fire(new t.ErrorEvent(new Error('Layer with id "'+i+'" does not exist on this map.')));else{if(this._order.splice(n,0,r),this._layerOrderChanged=!0,this._layers[r]=a,this._removedLayers[r]&&a.source&&"custom"!==a.type){var s=this._removedLayers[r];delete this._removedLayers[r],s.type!==a.type?this._updatedSources[a.source]="clear":(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause())}this._updateLayer(a),a.onAdd&&a.onAdd(this.map)}}},i.prototype.moveLayer=function(e,i){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==i){var o=this._order.indexOf(e);this._order.splice(o,1);var r=i?this._order.indexOf(i):this._order.length;i&&-1===r?this.fire(new t.ErrorEvent(new Error('Layer with id "'+i+'" does not exist on this map.'))):(this._order.splice(r,0,e),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},i.prototype.removeLayer=function(e){this._checkLoaded();var i=this._layers[e];if(i){i.setEventedParent(null);var o=this._order.indexOf(e);this._order.splice(o,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=i,delete this._layers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],i.onRemove&&i.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},i.prototype.getLayer=function(t){return this._layers[t]},i.prototype.setLayerZoomRange=function(e,i,o){this._checkLoaded();var r=this.getLayer(e);r?r.minzoom===i&&r.maxzoom===o||(null!=i&&(r.minzoom=i),null!=o&&(r.maxzoom=o),this._updateLayer(r)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},i.prototype.setFilter=function(e,i,o){void 0===o&&(o={}),this._checkLoaded();var r=this.getLayer(e);if(r){if(!t.isEqual(r.filter,i))return null==i?(r.filter=void 0,void this._updateLayer(r)):void(this._validate(t.validateStyle.filter,"layers."+r.id+".filter",i,null,o)||(r.filter=t.clone(i),this._updateLayer(r)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},i.prototype.getFilter=function(e){return t.clone(this.getLayer(e).filter)},i.prototype.setLayoutProperty=function(e,i,o,r){void 0===r&&(r={}),this._checkLoaded();var a=this.getLayer(e);a?t.isEqual(a.getLayoutProperty(i),o)||(a.setLayoutProperty(i,o,r),this._updateLayer(a)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getLayoutProperty=function(e,i){var o=this.getLayer(e);if(o)return o.getLayoutProperty(i);this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style.")))},i.prototype.setPaintProperty=function(e,i,o,r){void 0===r&&(r={}),this._checkLoaded();var a=this.getLayer(e);a?t.isEqual(a.getPaintProperty(i),o)||(a.setPaintProperty(i,o,r)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},i.prototype.setFeatureState=function(e,i){this._checkLoaded();var o=e.source,r=e.sourceLayer,a=this.sourceCaches[o],n=parseInt(e.id,10);if(void 0!==a){var s=a.getSource().type;"geojson"===s&&r?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==s||r?isNaN(n)||n<0?this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided and non-negative."))):a.setFeatureState(r,n,i):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+o+"' does not exist in the map's style.")))},i.prototype.removeFeatureState=function(e,i){this._checkLoaded();var o=e.source,r=this.sourceCaches[o];if(void 0!==r){var a=r.getSource().type,n="vector"===a?e.sourceLayer:void 0,s=parseInt(e.id,10);"vector"!==a||n?e.id&&isNaN(s)||s<0?this.fire(new t.ErrorEvent(new Error("The feature id parameter must be non-negative."))):!i||e.id?r.removeFeatureState(n,s,i):this.fire(new t.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+o+"' does not exist in the map's style.")))},i.prototype.getFeatureState=function(e){this._checkLoaded();var i=e.source,o=e.sourceLayer,r=this.sourceCaches[i],a=parseInt(e.id,10);if(void 0!==r)if("vector"!==r.getSource().type||o){if(!(isNaN(a)||a<0))return r.getFeatureState(o,a);this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided and non-negative.")))}else this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));else this.fire(new t.ErrorEvent(new Error("The source '"+i+"' does not exist in the map's style.")))},i.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},i.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,function(t){return t.serialize()}),layers:this._serializeLayers(this._order)},function(t){return void 0!==t})},i.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},i.prototype._flattenAndSortRenderedFeatures=function(t){for(var e=this,i=function(t){return"fill-extrusion"===e._layers[t].type},o={},r=[],a=this._order.length-1;a>=0;a--){var n=this._order[a];if(i(n)){o[n]=a;for(var s=0,l=t;s<l.length;s+=1){var c=l[s][n];if(c)for(var u=0,h=c;u<h.length;u+=1){var p=h[u];r.push(p)}}}}r.sort(function(t,e){return e.intersectionZ-t.intersectionZ});for(var d=[],_=this._order.length-1;_>=0;_--){var f=this._order[_];if(i(f))for(var m=r.length-1;m>=0;m--){var g=r[m].feature;if(o[g.layer.id]<_)break;d.push(g),r.pop()}else for(var v=0,y=t;v<y.length;v+=1){var x=y[v][f];if(x)for(var b=0,w=x;b<w.length;b+=1){var E=w[b];d.push(E.feature)}}}return d},i.prototype.queryRenderedFeatures=function(e,i,o){i&&i.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",i.filter);var r={};if(i&&i.layers){if(!Array.isArray(i.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var a=0,n=i.layers;a<n.length;a+=1){var s=n[a],l=this._layers[s];if(!l)return this.fire(new t.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];r[l.source]=!0}}var c=[];for(var u in this.sourceCaches)i.layers&&!r[u]||c.push(M(this.sourceCaches[u],this._layers,e,i,o));return this.placement&&c.push(function(t,e,i,o,r,a){for(var n={},s=r.queryRenderedSymbols(i),l=[],c=0,u=Object.keys(s).map(Number);c<u.length;c+=1){var h=u[c];l.push(a[h])}l.sort(A);for(var p=function(){var e=_[d],i=e.featureIndex.lookupSymbolFeatures(s[e.bucketInstanceId],e.bucketIndex,e.sourceLayerIndex,o.filter,o.layers,t);for(var r in i){var a=n[r]=n[r]||[],l=i[r];l.sort(function(t,i){var o=e.featureSortOrder;if(o){var r=o.indexOf(t.featureIndex);return o.indexOf(i.featureIndex)-r}return i.featureIndex-t.featureIndex});for(var c=0,u=l;c<u.length;c+=1){var h=u[c];a.push(h)}}},d=0,_=l;d<_.length;d+=1)p();var f=function(i){n[i].forEach(function(o){var r=o.feature,a=t[i],n=e[a.source].getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=n})};for(var m in n)f(m);return n}(this._layers,this.sourceCaches,e,i,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(c)},i.prototype.querySourceFeatures=function(e,i){i&&i.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",i.filter);var o=this.sourceCaches[e];return o?function(t,e){for(var i=t.getRenderableIds().map(function(e){return t.getTileByID(e)}),o=[],r={},a=0;a<i.length;a++){var n=i[a],s=n.tileID.canonical.key;r[s]||(r[s]=!0,n.querySourceFeatures(o,e))}return o}(o,i):[]},i.prototype.addSourceType=function(t,e,o){return i.getSourceType(t)?o(new Error('A source type called "'+t+'" already exists.')):(i.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},o):o(null,null))},i.prototype.getLight=function(){return this.light.getLight()},i.prototype.setLight=function(e,i){void 0===i&&(i={}),this._checkLoaded();var o=this.light.getLight(),r=!1;for(var a in e)if(!t.isEqual(e[a],o[a])){r=!0;break}if(r){var n={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,i),this.light.updateTransitions(n)}},i.prototype._validate=function(e,i,o,r,a){return void 0===a&&(a={}),(!a||!1!==a.validate)&&Pe(this,e.call(t.validateStyle,t.extend({key:i,style:this.serialize(),value:o,styleSpec:t.styleSpec},r)))},i.prototype._remove=function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginAvailable",this._rtlTextPluginCallback),this.sourceCaches)this.sourceCaches[e].clearTiles();this.dispatcher.remove()},i.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},i.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},i.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},i.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},i.prototype._updatePlacement=function(e,i,o,r){for(var a=!1,n=!1,s={},l=0,c=this._order;l<c.length;l+=1){var u=c[l],h=this._layers[u];if("symbol"===h.type){if(!s[h.source]){var p=this.sourceCaches[h.source];s[h.source]=p.getRenderableIds(!0).map(function(t){return p.getTileByID(t)}).sort(function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)})}var d=this.crossTileSymbolIndex.addLayer(h,s[h.source],e.center.lng);a=a||d}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);var _=this._layerOrderChanged||0===o;if((_||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now()))&&(this.pauseablePlacement=new Te(e,this._order,_,i,o,r),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,s),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(this.placement,t.browser.now()),n=!0),a&&this.pauseablePlacement.placement.setStale()),n||a)for(var f=0,m=this._order;f<m.length;f+=1){var g=m[f],v=this._layers[g];"symbol"===v.type&&this.placement.updateLayerOpacities(v,s[v.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},i.prototype._releaseSymbolFadeTiles=function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()},i.prototype.getImages=function(t,e,i){this.imageManager.getImages(e.icons,i)},i.prototype.getGlyphs=function(t,e,i){this.glyphManager.getGlyphs(e.stacks,i)},i.prototype.getResource=function(e,i,o){return t.makeRequest(i,o)},i}(t.Evented);Me.getSourceType=function(t){return P[t]},Me.setSourceType=function(t,e){P[t]=e},Me.registerForPluginAvailability=t.registerForPluginAvailability;var Ae=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),ke=si("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Be=si("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Oe=si("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Fe=si("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvarying vec3 v_data;void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvarying vec3 v_data;void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/DEVICE_PIXEL_RATIO/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Ue=si("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ne=si("#pragma mapbox: define highp float weight\nuniform highp float u_intensity;varying vec2 v_extrude;\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nuniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;const highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Ze=si("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),je=si("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=a_extrude*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Ve=si("uniform float u_overscale_factor;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {float alpha=0.5;vec4 color=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {color=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {color*=.2;}float extrude_scale_length=length(v_extrude_scale);float extrude_length=length(v_extrude)*extrude_scale_length;float stroke_width=15.0*extrude_scale_length/u_overscale_factor;float radius=v_radius*extrude_scale_length;float distance_to_edge=abs(extrude_length-radius);float opacity_t=smoothstep(-stroke_width,0.0,-distance_to_edge);gl_FragColor=opacity_t*color;}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);highp float padding_factor=1.2;gl_Position.xy+=a_extrude*u_extrude_scale*padding_factor*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;v_radius=abs(a_extrude.y);v_extrude=a_extrude*padding_factor;v_extrude_scale=u_extrude_scale*u_camera_to_center_distance*collision_perspective_ratio;}"),qe=si("uniform highp vec4 u_color;void main() {gl_FragColor=u_color;}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ge=si("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),We=si("#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_pos;void main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Xe=si("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),He=si("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),Ke=si("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);}"),Ye=si("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec4 u_scale;uniform float u_vertical_gradient;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));}"),Je=si("uniform sampler2D u_image;uniform float u_opacity;varying vec2 v_pos;void main() {gl_FragColor=texture2D(u_image,v_pos)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Qe=si("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;return (data.r+data.g*256.0+data.b*256.0*256.0)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),$e=si("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),ti=si("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\n#define scale 0.015873016\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),ei=si("#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nuniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;void main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\n#define scale 0.015873016\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),ii=si("uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec4 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x,1.0);float x_b=mod(v_linesofar/pattern_size_b.x,1.0);float y_a=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_a.y+2.0)/2.0)/pattern_size_a.y);float y_b=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_b.y+2.0)/2.0)/pattern_size_b.y);vec2 pos_a=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,vec2(x_a,y_a));vec2 pos_b=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,vec2(x_b,y_b));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_gl_units_to_pixels;uniform mediump float u_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);}"),oi=si("uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),ri=si("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),ai=si("uniform sampler2D u_texture;\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_tex;varying float v_fade_opacity;void main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;\n#pragma mapbox: define lowp float opacity\nuniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_gl_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;void main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size[0],a_size[1],u_size_t)/256.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size[0]/256.0;} else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {size=u_size;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_gl_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),ni=si("#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nuniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;void main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nuniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_gl_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;void main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size[0],a_size[1],u_size_t)/256.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size[0]/256.0;} else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {size=u_size;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_gl_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=vec2(tex.x,tex.y);v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}");function si(t,e){var i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,o={};return{fragmentSource:t=t.replace(i,function(t,e,i,r,a){return o[a]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+a+"\nvarying "+i+" "+r+" "+a+";\n#else\nuniform "+i+" "+r+" u_"+a+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+a+"\n    "+i+" "+r+" "+a+" = u_"+a+";\n#endif\n"}),vertexSource:e=e.replace(i,function(t,e,i,r,a){var n="float"===r?"vec2":"vec4",s=a.match(/color/)?"color":n;return o[a]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+a+"\nuniform lowp float a_"+a+"_t;\nattribute "+i+" "+n+" a_"+a+";\nvarying "+i+" "+r+" "+a+";\n#else\nuniform "+i+" "+r+" u_"+a+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+a+" = a_"+a+";\n#else\n    "+i+" "+r+" "+a+" = u_"+a+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+a+" = unpack_mix_"+s+"(a_"+a+", a_"+a+"_t);\n#else\n    "+i+" "+r+" "+a+" = u_"+a+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+a+"\nuniform lowp float a_"+a+"_t;\nattribute "+i+" "+n+" a_"+a+";\n#else\nuniform "+i+" "+r+" u_"+a+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+i+" "+r+" "+a+" = a_"+a+";\n#else\n    "+i+" "+r+" "+a+" = u_"+a+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+i+" "+r+" "+a+" = unpack_mix_"+s+"(a_"+a+", a_"+a+"_t);\n#else\n    "+i+" "+r+" "+a+" = u_"+a+";\n#endif\n"})}}var li=Object.freeze({prelude:ke,background:Be,backgroundPattern:Oe,circle:Fe,clippingMask:Ue,heatmap:Ne,heatmapTexture:Ze,collisionBox:je,collisionCircle:Ve,debug:qe,fill:Ge,fillOutline:We,fillOutlinePattern:Xe,fillPattern:He,fillExtrusion:Ke,fillExtrusionPattern:Ye,extrusionTexture:Je,hillshadePrepare:Qe,hillshade:$e,line:ti,lineGradient:ei,linePattern:ii,lineSDF:oi,raster:ri,symbolIcon:ai,symbolSDF:ni}),ci=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};ci.prototype.bind=function(t,e,i,o,r,a,n,s){this.context=t;for(var l=this.boundPaintVertexBuffers.length!==o.length,c=0;!l&&c<o.length;c++)this.boundPaintVertexBuffers[c]!==o[c]&&(l=!0);var u=!this.vao||this.boundProgram!==e||this.boundLayoutVertexBuffer!==i||l||this.boundIndexBuffer!==r||this.boundVertexOffset!==a||this.boundDynamicVertexBuffer!==n||this.boundDynamicVertexBuffer2!==s;!t.extVertexArrayObject||u?this.freshBind(e,i,o,r,a,n,s):(t.bindVertexArrayOES.set(this.vao),n&&n.bind(),r&&r.dynamicDraw&&r.bind(),s&&s.bind())},ci.prototype.freshBind=function(t,e,i,o,r,a,n){var s,l=t.numAttributes,c=this.context,u=c.gl;if(c.extVertexArrayObject)this.vao&&this.destroy(),this.vao=c.extVertexArrayObject.createVertexArrayOES(),c.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=o,this.boundVertexOffset=r,this.boundDynamicVertexBuffer=a,this.boundDynamicVertexBuffer2=n;else{s=c.currentNumAttributes||0;for(var h=l;h<s;h++)u.disableVertexAttribArray(h)}e.enableAttributes(u,t);for(var p=0,d=i;p<d.length;p+=1)d[p].enableAttributes(u,t);a&&a.enableAttributes(u,t),n&&n.enableAttributes(u,t),e.bind(),e.setVertexAttribPointers(u,t,r);for(var _=0,f=i;_<f.length;_+=1){var m=f[_];m.bind(),m.setVertexAttribPointers(u,t,r)}a&&(a.bind(),a.setVertexAttribPointers(u,t,r)),o&&o.bind(),n&&(n.bind(),n.setVertexAttribPointers(u,t,r)),c.currentNumAttributes=l},ci.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var ui=function(e,i,o,r,a){var n=e.gl;this.program=n.createProgram();var s=o.defines().concat("#define DEVICE_PIXEL_RATIO "+t.browser.devicePixelRatio.toFixed(1));a&&s.push("#define OVERDRAW_INSPECTOR;");var l=s.concat(ke.fragmentSource,i.fragmentSource).join("\n"),c=s.concat(ke.vertexSource,i.vertexSource).join("\n"),u=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(u,l),n.compileShader(u),n.attachShader(this.program,u);var h=n.createShader(n.VERTEX_SHADER);n.shaderSource(h,c),n.compileShader(h),n.attachShader(this.program,h);for(var p=o.layoutAttributes||[],d=0;d<p.length;d++)n.bindAttribLocation(this.program,d,p[d].name);n.linkProgram(this.program),this.numAttributes=n.getProgramParameter(this.program,n.ACTIVE_ATTRIBUTES),this.attributes={};for(var _={},f=0;f<this.numAttributes;f++){var m=n.getActiveAttrib(this.program,f);m&&(this.attributes[m.name]=n.getAttribLocation(this.program,m.name))}for(var g=n.getProgramParameter(this.program,n.ACTIVE_UNIFORMS),v=0;v<g;v++){var y=n.getActiveUniform(this.program,v);y&&(_[y.name]=n.getUniformLocation(this.program,y.name))}this.fixedUniforms=r(e,_),this.binderUniforms=o.getUniforms(e,_)};function hi(e,i,o){var r=1/se(o,1,i.transform.tileZoom),a=Math.pow(2,o.tileID.overscaledZ),n=o.tileSize*Math.pow(2,i.transform.tileZoom)/a,s=n*(o.tileID.canonical.x+o.tileID.wrap*a),l=n*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_scale:[t.browser.devicePixelRatio,r,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[s>>16,l>>16],u_pixel_coord_lower:[65535&s,65535&l]}}ui.prototype.draw=function(t,e,i,o,r,a,n,s,l,c,u,h,p,d,_,f){var m,g=t.gl;for(var v in t.program.set(this.program),t.setDepthMode(i),t.setStencilMode(o),t.setColorMode(r),t.setCullFace(a),this.fixedUniforms)this.fixedUniforms[v].set(n[v]);d&&d.setUniforms(t,this.binderUniforms,h,{zoom:p});for(var y=(m={},m[g.LINES]=2,m[g.TRIANGLES]=3,m[g.LINE_STRIP]=1,m)[e],x=0,b=u.get();x<b.length;x+=1){var w=b[x],E=w.vaos||(w.vaos={});(E[s]||(E[s]=new ci)).bind(t,this,l,d?d.getPaintVertexBuffers():[],c,w.vertexOffset,_,f),g.drawElements(e,w.primitiveLength*y,g.UNSIGNED_SHORT,w.primitiveOffset*y*2)}};var pi=function(e,i,o){var r=i.style.light,a=r.properties.get("position"),n=[a.x,a.y,a.z],s=t.create();"viewport"===r.properties.get("anchor")&&t.fromRotation(s,-i.transform.angle),t.transformMat3(n,n,s);var l=r.properties.get("color");return{u_matrix:e,u_lightpos:n,u_lightintensity:r.properties.get("intensity"),u_lightcolor:[l.r,l.g,l.b],u_vertical_gradient:+o}},di=function(e,i,o,r,a,n){return t.extend(pi(e,i,o),hi(a,i,n),{u_height_factor:-Math.pow(2,r.overscaledZ)/n.tileSize/8})},_i=function(e,i,o){var r=t.create$1();t.ortho(r,0,e.width,e.height,0,0,1);var a=e.context.gl;return{u_matrix:r,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:o,u_opacity:i}},fi=function(t){return{u_matrix:t}},mi=function(e,i,o,r){return t.extend(fi(e),hi(o,i,r))},gi=function(t,e){return{u_matrix:t,u_world:e}},vi=function(e,i,o,r,a){return t.extend(mi(e,i,o,r),{u_world:a})},yi=function(t,e,i,o){var r,a,n=t.transform;if("map"===o.paint.get("circle-pitch-alignment")){var s=se(i,1,n.zoom);r=!0,a=[s,s]}else r=!1,a=n.pixelsToGLUnits;return{u_camera_to_center_distance:n.cameraToCenterDistance,u_scale_with_map:+("map"===o.paint.get("circle-pitch-scale")),u_matrix:t.translatePosMatrix(e.posMatrix,i,o.paint.get("circle-translate"),o.paint.get("circle-translate-anchor")),u_pitch_with_map:+r,u_extrude_scale:a}},xi=function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,i.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,i.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,i.u_overscale_factor)}},bi=function(t,e,i){var o=se(i,1,e.zoom),r=Math.pow(2,e.zoom-i.tileID.overscaledZ),a=i.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:o,u_extrude_scale:[e.pixelsToGLUnits[0]/(o*r),e.pixelsToGLUnits[1]/(o*r)],u_overscale_factor:a}},wi=function(t,e){return{u_matrix:t,u_color:e}},Ei=function(t){return{u_matrix:t}},Ti=function(t,e,i,o){return{u_matrix:t,u_extrude_scale:se(e,1,i),u_intensity:o}},Ci=function(t,e,i){var o=i.paint.get("hillshade-shadow-color"),r=i.paint.get("hillshade-highlight-color"),a=i.paint.get("hillshade-accent-color"),n=i.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===i.paint.get("hillshade-illumination-anchor")&&(n-=t.transform.angle);var s=!t.options.moving;return{u_matrix:t.transform.calculatePosMatrix(e.tileID.toUnwrapped(),s),u_image:0,u_latrange:zi(0,e.tileID),u_light:[i.paint.get("hillshade-exaggeration"),n],u_shadow:o,u_highlight:r,u_accent:a}},Si=function(e,i){var o=e.dem.stride,r=t.create$1();return t.ortho(r,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(r,r,[0,-t.EXTENT,0]),{u_matrix:r,u_image:1,u_dimension:[o,o],u_zoom:e.tileID.overscaledZ,u_maxzoom:i}};function zi(e,i){var o=Math.pow(2,i.canonical.z),r=i.canonical.y;return[new t.MercatorCoordinate(0,r/o).toLngLat().lat,new t.MercatorCoordinate(0,(r+1)/o).toLngLat().lat]}var Li=function(t,e,i){var o=t.transform;return{u_matrix:Ai(t,e,i),u_ratio:1/se(e,1,o.zoom),u_gl_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},Pi=function(e,i,o){return t.extend(Li(e,i,o),{u_image:0})},Di=function(e,i,o,r){var a=e.transform,n=Mi(i,a);return{u_matrix:Ai(e,i,o),u_texsize:i.imageAtlasTexture.size,u_ratio:1/se(i,1,a.zoom),u_image:0,u_scale:[t.browser.devicePixelRatio,n,r.fromScale,r.toScale],u_fade:r.t,u_gl_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]]}},Ri=function(e,i,o,r,a){var n=e.transform,s=e.lineAtlas,l=Mi(i,n),c="round"===o.layout.get("line-cap"),u=s.getDash(r.from,c),h=s.getDash(r.to,c),p=u.width*a.fromScale,d=h.width*a.toScale;return t.extend(Li(e,i,o),{u_patternscale_a:[l/p,-u.height/2],u_patternscale_b:[l/d,-h.height/2],u_sdfgamma:s.width/(256*Math.min(p,d)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:u.y,u_tex_y_b:h.y,u_mix:a.t})};function Mi(t,e){return 1/se(t,1,e.tileZoom)}function Ai(t,e,i){return t.translatePosMatrix(e.tileID.posMatrix,e,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}var ki=function(t,e,i,o,r){return{u_matrix:t,u_tl_parent:e,u_scale_parent:i,u_buffer_scale:1,u_fade_t:o.mix,u_opacity:o.opacity*r.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:r.paint.get("raster-brightness-min"),u_brightness_high:r.paint.get("raster-brightness-max"),u_saturation_factor:(n=r.paint.get("raster-saturation"),n>0?1-1/(1.001-n):-n),u_contrast_factor:(a=r.paint.get("raster-contrast"),a>0?1/(1-a):1+a),u_spin_weights:Bi(r.paint.get("raster-hue-rotate"))};var a,n};function Bi(t){t*=Math.PI/180;var e=Math.sin(t),i=Math.cos(t);return[(2*i+1)/3,(-Math.sqrt(3)*e-i+1)/3,(Math.sqrt(3)*e-i+1)/3]}var Oi=function(t,e,i,o,r,a,n,s,l,c){var u=r.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:u.cameraToCenterDistance,u_pitch:u.pitch/360*2*Math.PI,u_rotate_symbol:+i,u_aspect_ratio:u.width/u.height,u_fade_change:r.options.fadeDuration?r.symbolFadeChange:1,u_matrix:a,u_label_plane_matrix:n,u_gl_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+o,u_texsize:c,u_texture:0}},Fi=function(e,i,o,r,a,n,s,l,c,u,h){var p=a.transform;return t.extend(Oi(e,i,o,r,a,n,s,l,c,u),{u_gamma_scale:r?Math.cos(p._pitch)*p.cameraToCenterDistance:1,u_is_halo:+h})},Ui=function(t,e,i){return{u_matrix:t,u_opacity:e,u_color:i}},Ni=function(e,i,o,r,a,n){return t.extend(function(t,e,i,o){var r=i.imageManager.getPattern(t.from),a=i.imageManager.getPattern(t.to),n=i.imageManager.getPixelSize(),s=n.width,l=n.height,c=Math.pow(2,o.tileID.overscaledZ),u=o.tileSize*Math.pow(2,i.transform.tileZoom)/c,h=u*(o.tileID.canonical.x+o.tileID.wrap*c),p=u*o.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:r.tl,u_pattern_br_a:r.br,u_pattern_tl_b:a.tl,u_pattern_br_b:a.br,u_texsize:[s,l],u_mix:e.t,u_pattern_size_a:r.displaySize,u_pattern_size_b:a.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/se(o,1,i.transform.tileZoom),u_pixel_coord_upper:[h>>16,p>>16],u_pixel_coord_lower:[65535&h,65535&p]}}(r,n,o,a),{u_matrix:e,u_opacity:i})},Zi={fillExtrusion:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_lightpos:new t.Uniform3f(e,i.u_lightpos),u_lightintensity:new t.Uniform1f(e,i.u_lightintensity),u_lightcolor:new t.Uniform3f(e,i.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,i.u_vertical_gradient)}},fillExtrusionPattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_lightpos:new t.Uniform3f(e,i.u_lightpos),u_lightintensity:new t.Uniform1f(e,i.u_lightintensity),u_lightcolor:new t.Uniform3f(e,i.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,i.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,i.u_height_factor),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}},extrusionTexture:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world),u_image:new t.Uniform1i(e,i.u_image),u_opacity:new t.Uniform1f(e,i.u_opacity)}},fill:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}},fillPattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}},fillOutline:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world)}},fillOutlinePattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}},circle:function(e,i){return{u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,i.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,i.u_extrude_scale),u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}},collisionBox:xi,collisionCircle:xi,debug:function(e,i){return{u_color:new t.UniformColor(e,i.u_color),u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}},clippingMask:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}},heatmap:function(e,i){return{u_extrude_scale:new t.Uniform1f(e,i.u_extrude_scale),u_intensity:new t.Uniform1f(e,i.u_intensity),u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}},heatmapTexture:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world),u_image:new t.Uniform1i(e,i.u_image),u_color_ramp:new t.Uniform1i(e,i.u_color_ramp),u_opacity:new t.Uniform1f(e,i.u_opacity)}},hillshade:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_latrange:new t.Uniform2f(e,i.u_latrange),u_light:new t.Uniform2f(e,i.u_light),u_shadow:new t.UniformColor(e,i.u_shadow),u_highlight:new t.UniformColor(e,i.u_highlight),u_accent:new t.UniformColor(e,i.u_accent)}},hillshadePrepare:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_dimension:new t.Uniform2f(e,i.u_dimension),u_zoom:new t.Uniform1f(e,i.u_zoom),u_maxzoom:new t.Uniform1f(e,i.u_maxzoom)}},line:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_gl_units_to_pixels:new t.Uniform2f(e,i.u_gl_units_to_pixels)}},lineGradient:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_gl_units_to_pixels:new t.Uniform2f(e,i.u_gl_units_to_pixels),u_image:new t.Uniform1i(e,i.u_image)}},linePattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_texsize:new t.Uniform2f(e,i.u_texsize),u_ratio:new t.Uniform1f(e,i.u_ratio),u_image:new t.Uniform1i(e,i.u_image),u_gl_units_to_pixels:new t.Uniform2f(e,i.u_gl_units_to_pixels),u_scale:new t.Uniform4f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}},lineSDF:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_gl_units_to_pixels:new t.Uniform2f(e,i.u_gl_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,i.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,i.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,i.u_sdfgamma),u_image:new t.Uniform1i(e,i.u_image),u_tex_y_a:new t.Uniform1f(e,i.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,i.u_tex_y_b),u_mix:new t.Uniform1f(e,i.u_mix)}},raster:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_tl_parent:new t.Uniform2f(e,i.u_tl_parent),u_scale_parent:new t.Uniform1f(e,i.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,i.u_buffer_scale),u_fade_t:new t.Uniform1f(e,i.u_fade_t),u_opacity:new t.Uniform1f(e,i.u_opacity),u_image0:new t.Uniform1i(e,i.u_image0),u_image1:new t.Uniform1i(e,i.u_image1),u_brightness_low:new t.Uniform1f(e,i.u_brightness_low),u_brightness_high:new t.Uniform1f(e,i.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,i.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,i.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,i.u_spin_weights)}},symbolIcon:function(e,i){return{u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_gl_coord_matrix:new t.UniformMatrix4f(e,i.u_gl_coord_matrix),u_is_text:new t.Uniform1f(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texture:new t.Uniform1i(e,i.u_texture)}},symbolSDF:function(e,i){return{u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_gl_coord_matrix:new t.UniformMatrix4f(e,i.u_gl_coord_matrix),u_is_text:new t.Uniform1f(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texture:new t.Uniform1i(e,i.u_texture),u_gamma_scale:new t.Uniform1f(e,i.u_gamma_scale),u_is_halo:new t.Uniform1f(e,i.u_is_halo)}},background:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_opacity:new t.Uniform1f(e,i.u_opacity),u_color:new t.UniformColor(e,i.u_color)}},backgroundPattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_opacity:new t.Uniform1f(e,i.u_opacity),u_image:new t.Uniform1i(e,i.u_image),u_pattern_tl_a:new t.Uniform2f(e,i.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,i.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,i.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,i.u_pattern_br_b),u_texsize:new t.Uniform2f(e,i.u_texsize),u_mix:new t.Uniform1f(e,i.u_mix),u_pattern_size_a:new t.Uniform2f(e,i.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,i.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,i.u_scale_a),u_scale_b:new t.Uniform1f(e,i.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,i.u_tile_units_to_pixels)}}};function ji(e,i){for(var o=e.sort(function(t,e){return t.tileID.isLessThan(e.tileID)?-1:e.tileID.isLessThan(t.tileID)?1:0}),r=0;r<o.length;r++){var a={},n=o[r],s=o.slice(r+1);Vi(n.tileID.wrapped(),n.tileID,s,new t.OverscaledTileID(0,n.tileID.wrap+1,0,0,0),a),n.setMask(a,i)}}function Vi(e,i,o,r,a){for(var n=0;n<o.length;n++){var s=o[n];if(r.isLessThan(s.tileID))break;if(i.key===s.tileID.key)return;if(s.tileID.isChildOf(i)){for(var l=i.children(1/0),c=0;c<l.length;c++)Vi(e,l[c],o.slice(n),r,a);return}}var u=i.overscaledZ-e.overscaledZ,h=new t.CanonicalTileID(u,i.canonical.x-(e.canonical.x<<u),i.canonical.y-(e.canonical.y<<u));a[h.key]=a[h.key]||h}function qi(t,e,i,o,r){for(var a=t.context,n=a.gl,s=r?t.useProgram("collisionCircle"):t.useProgram("collisionBox"),l=0;l<o.length;l++){var c=o[l],u=e.getTile(c),h=u.getBucket(i);if(h){var p=r?h.collisionCircle:h.collisionBox;p&&s.draw(a,r?n.TRIANGLES:n.LINES,bt.disabled,wt.disabled,t.colorModeForRenderPass(),Tt.disabled,bi(c.posMatrix,t.transform,u),i.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,null,t.transform.zoom,null,null,p.collisionVertexBuffer)}}}var Gi=t.identity(new Float32Array(16)),Wi=t.properties.layout;function Xi(e,i,o,r,a,n,s,l,c,u,h,p){for(var d,_,f=e.context,m=f.gl,g=e.transform,v="map"===l,y="map"===c,x=v&&"point"!==o.layout.get("symbol-placement"),b=v&&!y&&!x,w=void 0!==o.layout.get("symbol-sort-key").constantOr(1),E=e.depthModeForSublayer(0,bt.ReadOnly),T=[],I=0,C=r;I<C.length;I+=1){var S=C[I],z=i.getTile(S),L=z.getBucket(o);if(L){var P=a?L.text:L.icon;if(P&&P.segments.get().length){var D=P.programConfigurations.get(o.id),R=a||L.sdfIcons,M=a?L.textSizeData:L.iconSizeData;d||(d=e.useProgram(R?"symbolSDF":"symbolIcon",D),_=t.evaluateSizeForZoom(M,g.zoom,Wi.properties[a?"text-size":"icon-size"])),f.activeTexture.set(m.TEXTURE0);var A=void 0,k=void 0,B=void 0;if(a)k=z.glyphAtlasTexture,B=m.LINEAR,A=z.glyphAtlasTexture.size;else{var O=1!==o.layout.get("icon-size").constantOr(0)||L.iconsNeedLinear,F=y||0!==g.pitch;k=z.imageAtlasTexture,B=R||e.options.rotating||e.options.zooming||O||F?m.LINEAR:m.NEAREST,A=z.imageAtlasTexture.size}var U=se(z,1,e.transform.zoom),N=Wt(S.posMatrix,y,v,e.transform,U),Z=Xt(S.posMatrix,y,v,e.transform,U);x&&Yt(L,S.posMatrix,e,a,N,Z,y,u);var j=e.translatePosMatrix(S.posMatrix,z,n,s),V=x?Gi:N,q=e.translatePosMatrix(Z,z,n,s,!0),G=R&&0!==o.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1),W={program:d,buffers:P,uniformValues:R?Fi(M.functionType,_,b,y,e,j,V,q,a,A,!0):Oi(M.functionType,_,b,y,e,j,V,q,a,A),atlasTexture:k,atlasInterpolation:B,isSDF:R,hasHalo:G};if(w)for(var X=0,H=P.segments.get();X<H.length;X+=1){var K=H[X];T.push({segments:new t.SegmentVector([K]),sortKey:K.sortKey,state:W})}else T.push({segments:P.segments,sortKey:0,state:W})}}}w&&T.sort(function(t,e){return t.sortKey-e.sortKey});for(var Y=0,J=T;Y<J.length;Y+=1){var Q=J[Y],$=Q.state;if($.atlasTexture.bind($.atlasInterpolation,m.CLAMP_TO_EDGE),$.isSDF){var tt=$.uniformValues;$.hasHalo&&(tt.u_is_halo=1,Hi($.buffers,Q.segments,o,e,$.program,E,h,p,tt)),tt.u_is_halo=0}Hi($.buffers,Q.segments,o,e,$.program,E,h,p,$.uniformValues)}}function Hi(t,e,i,o,r,a,n,s,l){var c=o.context,u=c.gl;r.draw(c,u.TRIANGLES,a,n,s,Tt.disabled,l,i.id,t.layoutVertexBuffer,t.indexBuffer,e,i.paint,o.transform.zoom,t.programConfigurations.get(i.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function Ki(t,e,i,o,r,a,n){var s,l,c,u,h,p=t.context.gl,d=i.paint.get("fill-pattern"),_=d&&d.constantOr(1),f=i.getCrossfadeParameters();n?(l=_&&!i.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=p.LINES):(l=_?"fillPattern":"fill",s=p.TRIANGLES);for(var m=0,g=o;m<g.length;m+=1){var v=g[m],y=e.getTile(v);if(!_||y.patternsLoaded()){var x=y.getBucket(i);if(x){var b=x.programConfigurations.get(i.id),w=t.useProgram(l,b);_&&(t.context.activeTexture.set(p.TEXTURE0),y.imageAtlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE),b.updatePatternPaintBuffers(f));var E=d.constantOr(null);if(E&&y.imageAtlas){var T=y.imageAtlas.patternPositions[E.to],I=y.imageAtlas.patternPositions[E.from];T&&I&&b.setConstantPatternPositions(T,I)}var C=t.translatePosMatrix(v.posMatrix,y,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"));if(n){u=x.indexBuffer2,h=x.segments2;var S=[p.drawingBufferWidth,p.drawingBufferHeight];c="fillOutlinePattern"===l&&_?vi(C,t,f,y,S):gi(C,S)}else u=x.indexBuffer,h=x.segments,c=_?mi(C,t,f,y):fi(C);w.draw(t.context,s,r,t.stencilModeForClipping(v),a,Tt.disabled,c,i.id,x.layoutVertexBuffer,u,h,i.paint,t.transform.zoom,b)}}}}function Yi(e,i){var o=e.context,r=o.gl,a=i.viewportFrame;if(e.depthRboNeedsClear&&e.setupOffscreenDepthRenderbuffer(),!a){var n=new t.Texture(o,{width:e.width,height:e.height,data:null},r.RGBA);n.bind(r.LINEAR,r.CLAMP_TO_EDGE),(a=i.viewportFrame=o.createFramebuffer(e.width,e.height)).colorAttachment.set(n.texture)}o.bindFramebuffer.set(a.framebuffer),a.depthAttachment.set(e.depthRbo),e.depthRboNeedsClear&&(o.clear({depth:1}),e.depthRboNeedsClear=!1),o.clear({color:t.Color.transparent}),o.setStencilMode(wt.disabled),o.setDepthMode(new bt(r.LEQUAL,bt.ReadWrite,[0,1])),o.setColorMode(e.colorModeForRenderPass())}function Ji(t,e,i){var o=e.viewportFrame;if(o){var r=t.context,a=r.gl;r.activeTexture.set(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,o.colorAttachment.get()),t.useProgram("extrusionTexture").draw(r,a.TRIANGLES,bt.disabled,wt.disabled,t.colorModeForRenderPass(),Tt.disabled,_i(t,i,0),e.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,e.paint,t.transform.zoom)}}function Qi(t,e,i,o,r,a){var n=t.context,s=n.gl,l=e.fbo;if(l){var c=t.useProgram("hillshade");n.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,l.colorAttachment.get());var u=Ci(t,e,i);e.maskedBoundsBuffer&&e.maskedIndexBuffer&&e.segments?c.draw(n,s.TRIANGLES,o,r,a,Tt.disabled,u,i.id,e.maskedBoundsBuffer,e.maskedIndexBuffer,e.segments):c.draw(n,s.TRIANGLES,o,r,a,Tt.disabled,u,i.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}function $i(e,i,o,r,a,n,s){var l=e.context,c=l.gl;if(i.dem&&i.dem.data){var u=i.dem.dim,h=i.dem.stride,p=i.dem.getPixels();if(l.activeTexture.set(c.TEXTURE1),l.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||e.getTileTexture(h),i.demTexture){var d=i.demTexture;d.update(p,{premultiply:!1}),d.bind(c.NEAREST,c.CLAMP_TO_EDGE)}else i.demTexture=new t.Texture(l,p,c.RGBA,{premultiply:!1}),i.demTexture.bind(c.NEAREST,c.CLAMP_TO_EDGE);l.activeTexture.set(c.TEXTURE0);var _=i.fbo;if(!_){var f=new t.Texture(l,{width:u,height:u,data:null},c.RGBA);f.bind(c.LINEAR,c.CLAMP_TO_EDGE),(_=i.fbo=l.createFramebuffer(u,u)).colorAttachment.set(f.texture)}l.bindFramebuffer.set(_.framebuffer),l.viewport.set([0,0,u,u]),e.useProgram("hillshadePrepare").draw(l,c.TRIANGLES,a,n,s,Tt.disabled,Si(i,r),o.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function to(e,i,o,r,a){var n=r.paint.get("raster-fade-duration");if(n>0){var s=t.browser.now(),l=(s-e.timeAdded)/n,c=i?(s-i.timeAdded)/n:-1,u=o.getSource(),h=a.coveringZoomLevel({tileSize:u.tileSize,roundZoom:u.roundZoom}),p=!i||Math.abs(i.tileID.overscaledZ-h)>Math.abs(e.tileID.overscaledZ-h),d=p&&e.refreshedUponExpiration?1:t.clamp(p?l:1-c,0,1);return e.refreshedUponExpiration&&l>=1&&(e.refreshedUponExpiration=!1),i?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}function eo(e,i,o){var r=e.context,a=r.gl,n=o.posMatrix,s=e.useProgram("debug"),l=bt.disabled,c=wt.disabled,u=e.colorModeForRenderPass(),h="$debug";s.draw(r,a.LINE_STRIP,l,c,u,Tt.disabled,wi(n,t.Color.red),h,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);for(var p=function(t,e,i,o){o=o||1;var r,a,n,s,l,c,u,h,p=[];for(r=0,a=t.length;r<a;r++)if(l=io[t[r]]){for(h=null,n=0,s=l[1].length;n<s;n+=2)-1===l[1][n]&&-1===l[1][n+1]?h=null:(c=e+l[1][n]*o,u=200-l[1][n+1]*o,h&&p.push(h.x,h.y,c,u),h={x:c,y:u});e+=l[0]*o}return p}(o.toString(),50,0,5),d=new t.StructArrayLayout2i4,_=new t.StructArrayLayout2ui4,f=0;f<p.length;f+=2)d.emplaceBack(p[f],p[f+1]),_.emplaceBack(f,f+1);for(var m=r.createVertexBuffer(d,Ae.members),g=r.createIndexBuffer(_),v=t.SegmentVector.simpleSegment(0,0,d.length/2,d.length/2),y=i.getTile(o).tileSize,x=t.EXTENT/(Math.pow(2,e.transform.zoom-o.overscaledZ)*y),b=[[-1,-1],[-1,1],[1,-1],[1,1]],w=0;w<b.length;w++){var E=b[w];s.draw(r,a.LINES,l,c,u,Tt.disabled,wi(t.translate([],n,[x*E[0],x*E[1],0]),t.Color.white),h,m,g,v)}s.draw(r,a.LINES,l,c,u,Tt.disabled,wi(n,t.Color.black),h,m,g,v)}var io={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]},oo={symbol:function(t,e,i,o){if("translucent"===t.renderPass){var r=wt.disabled,a=t.colorModeForRenderPass();0!==i.paint.get("icon-opacity").constantOr(1)&&Xi(t,e,i,o,!1,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),i.layout.get("icon-rotation-alignment"),i.layout.get("icon-pitch-alignment"),i.layout.get("icon-keep-upright"),r,a),0!==i.paint.get("text-opacity").constantOr(1)&&Xi(t,e,i,o,!0,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),i.layout.get("text-keep-upright"),r,a),e.map.showCollisionBoxes&&function(t,e,i,o){qi(t,e,i,o,!1),qi(t,e,i,o,!0)}(t,e,i,o)}},circle:function(t,e,i,o){if("translucent"===t.renderPass){var r=i.paint.get("circle-opacity"),a=i.paint.get("circle-stroke-width"),n=i.paint.get("circle-stroke-opacity");if(0!==r.constantOr(1)||0!==a.constantOr(1)&&0!==n.constantOr(1))for(var s=t.context,l=s.gl,c=t.depthModeForSublayer(0,bt.ReadOnly),u=wt.disabled,h=t.colorModeForRenderPass(),p=0;p<o.length;p++){var d=o[p],_=e.getTile(d),f=_.getBucket(i);if(f){var m=f.programConfigurations.get(i.id);t.useProgram("circle",m).draw(s,l.TRIANGLES,c,u,h,Tt.disabled,yi(t,d,_,i),i.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,i.paint,t.transform.zoom,m)}}}},heatmap:function(e,i,o,r){if(0!==o.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var a=e.context,n=a.gl,s=e.depthModeForSublayer(0,bt.ReadOnly),l=wt.disabled,c=new Et([n.ONE,n.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,i){var o=t.gl;t.activeTexture.set(o.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var r=i.heatmapFbo;if(r)o.bindTexture(o.TEXTURE_2D,r.colorAttachment.get()),t.bindFramebuffer.set(r.framebuffer);else{var a=o.createTexture();o.bindTexture(o.TEXTURE_2D,a),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),r=i.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4),function t(e,i,o,r){var a=e.gl;a.texImage2D(a.TEXTURE_2D,0,a.RGBA,i.width/4,i.height/4,0,a.RGBA,e.extTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:a.UNSIGNED_BYTE,null),r.colorAttachment.set(o),e.extTextureHalfFloat&&a.checkFramebufferStatus(a.FRAMEBUFFER)!==a.FRAMEBUFFER_COMPLETE&&(e.extTextureHalfFloat=null,r.colorAttachment.setDirty(),t(e,i,o,r))}(t,e,a,r)}}(a,e,o),a.clear({color:t.Color.transparent});for(var u=0;u<r.length;u++){var h=r[u];if(!i.hasRenderableParent(h)){var p=i.getTile(h),d=p.getBucket(o);if(d){var _=d.programConfigurations.get(o.id),f=e.useProgram("heatmap",_),m=e.transform.zoom;f.draw(a,n.TRIANGLES,s,l,c,Tt.disabled,Ti(h.posMatrix,p,m,o.paint.get("heatmap-intensity")),o.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,o.paint,e.transform.zoom,_)}}}a.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,i){var o=e.context,r=o.gl,a=i.heatmapFbo;if(a){o.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,a.colorAttachment.get()),o.activeTexture.set(r.TEXTURE1);var n=i.colorRampTexture;n||(n=i.colorRampTexture=new t.Texture(o,i.colorRamp,r.RGBA)),n.bind(r.LINEAR,r.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(o,r.TRIANGLES,bt.disabled,wt.disabled,e.colorModeForRenderPass(),Tt.disabled,function(e,i,o,r){var a=t.create$1();t.ortho(a,0,e.width,e.height,0,0,1);var n=e.context.gl;return{u_matrix:a,u_world:[n.drawingBufferWidth,n.drawingBufferHeight],u_image:o,u_color_ramp:r,u_opacity:i.paint.get("heatmap-opacity")}}(e,i,0,1),i.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,i.paint,e.transform.zoom)}}(e,o))},line:function(e,i,o,r){if("translucent"===e.renderPass){var a=o.paint.get("line-opacity"),n=o.paint.get("line-width");if(0!==a.constantOr(1)&&0!==n.constantOr(1)){var s=e.depthModeForSublayer(0,bt.ReadOnly),l=e.colorModeForRenderPass(),c=o.paint.get("line-dasharray"),u=o.paint.get("line-pattern"),h=u.constantOr(1),p=o.paint.get("line-gradient"),d=o.getCrossfadeParameters(),_=c?"lineSDF":h?"linePattern":p?"lineGradient":"line",f=e.context,m=f.gl,g=!0;if(p){f.activeTexture.set(m.TEXTURE0);var v=o.gradientTexture;if(!o.gradient)return;v||(v=o.gradientTexture=new t.Texture(f,o.gradient,m.RGBA)),v.bind(m.LINEAR,m.CLAMP_TO_EDGE)}for(var y=0,x=r;y<x.length;y+=1){var b=x[y],w=i.getTile(b);if(!h||w.patternsLoaded()){var E=w.getBucket(o);if(E){var T=E.programConfigurations.get(o.id),I=e.context.program.get(),C=e.useProgram(_,T),S=g||C.program!==I,z=u.constantOr(null);if(z&&w.imageAtlas){var L=w.imageAtlas.patternPositions[z.to],P=w.imageAtlas.patternPositions[z.from];L&&P&&T.setConstantPatternPositions(L,P)}var D=c?Ri(e,w,o,c,d):h?Di(e,w,o,d):p?Pi(e,w,o):Li(e,w,o);c&&(S||e.lineAtlas.dirty)?(f.activeTexture.set(m.TEXTURE0),e.lineAtlas.bind(f)):h&&(f.activeTexture.set(m.TEXTURE0),w.imageAtlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),T.updatePatternPaintBuffers(d)),C.draw(f,m.TRIANGLES,s,e.stencilModeForClipping(b),l,Tt.disabled,D,o.id,E.layoutVertexBuffer,E.indexBuffer,E.segments,o.paint,e.transform.zoom,T),g=!1}}}}}},fill:function(e,i,o,r){var a=o.paint.get("fill-color"),n=o.paint.get("fill-opacity");if(0!==n.constantOr(1)){var s=e.colorModeForRenderPass(),l=o.paint.get("fill-pattern").constantOr(1)||1!==a.constantOr(t.Color.transparent).a||1!==n.constantOr(0)?"translucent":"opaque";if(e.renderPass===l){var c=e.depthModeForSublayer(1,"opaque"===e.renderPass?bt.ReadWrite:bt.ReadOnly);Ki(e,i,o,r,c,s,!1)}if("translucent"===e.renderPass&&o.paint.get("fill-antialias")){var u=e.depthModeForSublayer(o.getPaintProperty("fill-outline-color")?2:0,bt.ReadOnly);Ki(e,i,o,r,u,s,!0)}}},"fill-extrusion":function(t,e,i,o){if(0!==i.paint.get("fill-extrusion-opacity"))if("offscreen"===t.renderPass){Yi(t,i);var r=new bt(t.context.gl.LEQUAL,bt.ReadWrite,[0,1]),a=wt.disabled,n=t.colorModeForRenderPass();!function(t,e,i,o,r,a,n){for(var s=t.context,l=s.gl,c=i.paint.get("fill-extrusion-pattern"),u=c.constantOr(1),h=i.getCrossfadeParameters(),p=0,d=o;p<d.length;p+=1){var _=d[p],f=e.getTile(_),m=f.getBucket(i);if(m){var g=m.programConfigurations.get(i.id),v=t.useProgram(u?"fillExtrusionPattern":"fillExtrusion",g);u&&(t.context.activeTexture.set(l.TEXTURE0),f.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),g.updatePatternPaintBuffers(h));var y=c.constantOr(null);if(y&&f.imageAtlas){var x=f.imageAtlas.patternPositions[y.to],b=f.imageAtlas.patternPositions[y.from];x&&b&&g.setConstantPatternPositions(x,b)}var w=t.translatePosMatrix(_.posMatrix,f,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor")),E=i.paint.get("fill-extrusion-vertical-gradient"),T=u?di(w,t,E,_,h,f):pi(w,t,E);v.draw(s,s.gl.TRIANGLES,r,a,n,Tt.backCCW,T,i.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,i.paint,t.transform.zoom,g)}}}(t,e,i,o,r,a,n)}else"translucent"===t.renderPass&&Ji(t,i,i.paint.get("fill-extrusion-opacity"))},hillshade:function(t,e,i,o){if("offscreen"===t.renderPass||"translucent"===t.renderPass){for(var r=t.context,a=e.getSource().maxzoom,n=t.depthModeForSublayer(0,bt.ReadOnly),s=wt.disabled,l=t.colorModeForRenderPass(),c=0,u=o;c<u.length;c+=1){var h=u[c],p=e.getTile(h);p.needsHillshadePrepare&&"offscreen"===t.renderPass?$i(t,p,i,a,n,s,l):"translucent"===t.renderPass&&Qi(t,p,i,n,s,l)}r.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,i,o){if("translucent"===t.renderPass&&0!==i.paint.get("raster-opacity"))for(var r=t.context,a=r.gl,n=e.getSource(),s=t.useProgram("raster"),l=wt.disabled,c=t.colorModeForRenderPass(),u=o.length&&o[0].overscaledZ,h=!t.options.moving,p=0,d=o;p<d.length;p+=1){var _=d[p],f=t.depthModeForSublayer(_.overscaledZ-u,1===i.paint.get("raster-opacity")?bt.ReadWrite:bt.ReadOnly,a.LESS),m=e.getTile(_),g=t.transform.calculatePosMatrix(_.toUnwrapped(),h);m.registerFadeDuration(i.paint.get("raster-fade-duration"));var v=e.findLoadedParent(_,0),y=to(m,v,e,i,t.transform),x=void 0,b=void 0,w="nearest"===i.paint.get("raster-resampling")?a.NEAREST:a.LINEAR;r.activeTexture.set(a.TEXTURE0),m.texture.bind(w,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),r.activeTexture.set(a.TEXTURE1),v?(v.texture.bind(w,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),x=Math.pow(2,v.tileID.overscaledZ-m.tileID.overscaledZ),b=[m.tileID.canonical.x*x%1,m.tileID.canonical.y*x%1]):m.texture.bind(w,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST);var E=ki(g,b||[0,0],x||1,y,i);n instanceof L?s.draw(r,a.TRIANGLES,f,l,c,Tt.disabled,E,i.id,n.boundsBuffer,t.quadTriangleIndexBuffer,n.boundsSegments):m.maskedBoundsBuffer&&m.maskedIndexBuffer&&m.segments?s.draw(r,a.TRIANGLES,f,l,c,Tt.disabled,E,i.id,m.maskedBoundsBuffer,m.maskedIndexBuffer,m.segments,i.paint,t.transform.zoom):s.draw(r,a.TRIANGLES,f,l,c,Tt.disabled,E,i.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,i){var o=i.paint.get("background-color"),r=i.paint.get("background-opacity");if(0!==r){var a=t.context,n=a.gl,s=t.transform,l=s.tileSize,c=i.paint.get("background-pattern");if(!t.isPatternMissing(c)){var u=c||1!==o.a||1!==r?"translucent":"opaque";if(t.renderPass===u){var h=wt.disabled,p=t.depthModeForSublayer(0,"opaque"===u?bt.ReadWrite:bt.ReadOnly),d=t.colorModeForRenderPass(),_=t.useProgram(c?"backgroundPattern":"background"),f=s.coveringTiles({tileSize:l});c&&(a.activeTexture.set(n.TEXTURE0),t.imageManager.bind(t.context));for(var m=i.getCrossfadeParameters(),g=0,v=f;g<v.length;g+=1){var y=v[g],x=t.transform.calculatePosMatrix(y.toUnwrapped()),b=c?Ni(x,r,t,c,{tileID:y,tileSize:l},m):Ui(x,r,o);_.draw(a,n.TRIANGLES,p,h,d,Tt.disabled,b,i.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}}}},debug:function(t,e,i){for(var o=0;o<i.length;o++)eo(t,e,i[o])},custom:function(t,e,i){var o=t.context,r=i.implementation;if("offscreen"===t.renderPass){var a=r.prerender;a&&(t.setCustomLayerDefaults(),a.call(r,o.gl,t.transform.customLayerMatrix()),o.setDirty(),t.setBaseState()),"3d"===r.renderingMode&&(t.setCustomLayerDefaults(),Yi(t,i),r.render(o.gl,t.transform.customLayerMatrix()),o.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass)if("3d"===r.renderingMode)Ji(t,i,1);else{t.setCustomLayerDefaults(),o.setColorMode(t.colorModeForRenderPass()),o.setStencilMode(wt.disabled);var n=t.depthModeForSublayer(0,bt.ReadOnly);o.setDepthMode(n),r.render(o.gl,t.transform.customLayerMatrix()),o.setDirty(),t.setBaseState(),o.bindFramebuffer.set(null)}}},ro=function(e,i){this.context=new It(e),this.transform=i,this._tileTextures={},this.setup(),this.numSublayers=Ct.maxUnderzooming+Ct.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new t.ProgramConfiguration,this.crossTileSymbolIndex=new Le};function ao(t,e){if(t.y>e.y){var i=t;t=e,e=i}return{x0:t.x,y0:t.y,x1:e.x,y1:e.y,dx:e.x-t.x,dy:e.y-t.y}}function no(t,e,i,o,r){var a=Math.max(i,Math.floor(e.y0)),n=Math.min(o,Math.ceil(e.y1));if(t.x0===e.x0&&t.y0===e.y0?t.x0+e.dy/t.dy*t.dx<e.x1:t.x1-e.dy/t.dy*t.dx<e.x0){var s=t;t=e,e=s}for(var l=t.dx/t.dy,c=e.dx/e.dy,u=t.dx>0,h=e.dx<0,p=a;p<n;p++){var d=l*Math.max(0,Math.min(t.dy,p+u-t.y0))+t.x0,_=c*Math.max(0,Math.min(e.dy,p+h-e.y0))+e.x0;r(Math.floor(_),Math.ceil(d),p)}}function so(t,e,i,o,r,a){var n,s=ao(t,e),l=ao(e,i),c=ao(i,t);s.dy>l.dy&&(n=s,s=l,l=n),s.dy>c.dy&&(n=s,s=c,c=n),l.dy>c.dy&&(n=l,l=c,c=n),s.dy&&no(c,s,o,r,a),l.dy&&no(c,l,o,r,a)}ro.prototype.resize=function(e,i){var o=this.context.gl;if(this.width=e*t.browser.devicePixelRatio,this.height=i*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var r=0,a=this.style._order;r<a.length;r+=1){var n=a[r];this.style._layers[n].resize()}this.depthRbo&&(o.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},ro.prototype.setup=function(){var e=this.context,i=new t.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(t.EXTENT,0),i.emplaceBack(0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(i,Ae.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var o=new t.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(t.EXTENT,0),o.emplaceBack(0,t.EXTENT),o.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(o,Ae.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var r=new t.StructArrayLayout4i8;r.emplaceBack(0,0,0,0),r.emplaceBack(t.EXTENT,0,t.EXTENT,0),r.emplaceBack(0,t.EXTENT,0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(r,t.rasterBoundsAttributes.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var a=new t.StructArrayLayout2i4;a.emplaceBack(0,0),a.emplaceBack(1,0),a.emplaceBack(0,1),a.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(a,Ae.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var n=new t.StructArrayLayout1ui2;n.emplaceBack(0),n.emplaceBack(1),n.emplaceBack(3),n.emplaceBack(2),n.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(n);var s=new t.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s);var l=this.context.gl;this.stencilClearMode=new wt({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO)},ro.prototype.clearStencil=function(){var e=this.context,i=e.gl,o=t.create$1();t.ortho(o,0,this.width,this.height,0,0,1),t.scale(o,o,[i.drawingBufferWidth,i.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,i.TRIANGLES,bt.disabled,this.stencilClearMode,Et.disabled,Tt.disabled,Ei(o),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},ro.prototype._renderTileClippingMasks=function(t){var e=this.context,i=e.gl;e.setColorMode(Et.disabled),e.setDepthMode(bt.disabled);var o=this.useProgram("clippingMask"),r=1;this._tileClippingMaskIDs={};for(var a=0,n=t;a<n.length;a+=1){var s=n[a],l=this._tileClippingMaskIDs[s.key]=r++;o.draw(e,i.TRIANGLES,bt.disabled,new wt({func:i.ALWAYS,mask:0},l,255,i.KEEP,i.KEEP,i.REPLACE),Et.disabled,Tt.disabled,Ei(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}},ro.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new wt({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},ro.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new Et([e.CONSTANT_COLOR,e.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Et.unblended:Et.alphaBlended},ro.prototype.depthModeForSublayer=function(t,e,i){var o=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new bt(i||this.context.gl.LEQUAL,e,[o,o])},ro.prototype.render=function(e,i){this.style=e,this.options=i,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.browser.now());var o=this.style._order,r=this.style.sourceCaches;for(var a in r){var n=r[a];n.used&&n.prepare(this.context)}var s,l={},c={},u={};for(var h in r){var p=r[h];l[h]=p.getVisibleCoordinates(),c[h]=l[h].slice().reverse(),u[h]=p.getVisibleCoordinates(!0).reverse()}for(var d in r){var _=r[d],f=_.getSource();if("raster"===f.type||"raster-dem"===f.type){for(var m=[],g=0,v=l[d];g<v.length;g+=1){var y=v[g];m.push(_.getTile(y))}ji(m,this.context)}}this.renderPass="offscreen",this.depthRboNeedsClear=!0;for(var x=0,b=o;x<b.length;x+=1){var w=b[x],E=this.style._layers[w];if(E.hasOffscreenPass()&&!E.isHidden(this.transform.zoom)){var T=c[E.source];("custom"===E.type||T.length)&&this.renderLayer(this,r[E.source],E,T)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:i.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this._showOverdrawInspector=i.showOverdrawInspector,this.depthRange=(e._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass="opaque",this.currentLayer=o.length-1;this.currentLayer>=0;this.currentLayer--){var I=this.style._layers[o[this.currentLayer]],C=r[I.source],S=l[I.source];I.source!==s&&C&&(this.clearStencil(),C.getSource().isTileClipped&&this._renderTileClippingMasks(S)),this.renderLayer(this,C,I,S),s=I.source}for(this.renderPass="translucent",this.currentLayer=0,s=null;this.currentLayer<o.length;this.currentLayer++){var z=this.style._layers[o[this.currentLayer]],L=r[z.source],P=("symbol"===z.type?u:c)[z.source];z.source!==s&&L&&(this.clearStencil(),L.getSource().isTileClipped&&this._renderTileClippingMasks(l[z.source])),this.renderLayer(this,L,z,P),s=z.source}if(this.options.showTileBoundaries)for(var D in r){oo.debug(this,r[D],l[D]);break}this.setCustomLayerDefaults()},ro.prototype.setupOffscreenDepthRenderbuffer=function(){var t=this.context;this.depthRbo||(this.depthRbo=t.createRenderbuffer(t.gl.DEPTH_COMPONENT16,this.width,this.height))},ro.prototype.renderLayer=function(t,e,i,o){i.isHidden(this.transform.zoom)||("background"===i.type||"custom"===i.type||o.length)&&(this.id=i.id,oo[i.type](t,e,i,o))},ro.prototype.translatePosMatrix=function(e,i,o,r,a){if(!o[0]&&!o[1])return e;var n=a?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(n){var s=Math.sin(n),l=Math.cos(n);o=[o[0]*l-o[1]*s,o[0]*s+o[1]*l]}var c=[a?o[0]:se(i,o[0],this.transform.zoom),a?o[1]:se(i,o[1],this.transform.zoom),0],u=new Float32Array(16);return t.translate(u,e,c),u},ro.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},ro.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},ro.prototype.isPatternMissing=function(t){if(!t)return!1;var e=this.imageManager.getPattern(t.from),i=this.imageManager.getPattern(t.to);return!e||!i},ro.prototype.useProgram=function(t,e){void 0===e&&(e=this.emptyProgramConfiguration),this.cache=this.cache||{};var i=""+t+(e.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[i]||(this.cache[i]=new ui(this.context,li[t],e,Zi[t],this._showOverdrawInspector)),this.cache[i]},ro.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},ro.prototype.setBaseState=function(){var t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)};var lo=function(e,i,o){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===o||o,this._minZoom=e||0,this._maxZoom=i||22,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}},co={minZoom:{configurable:!0},maxZoom:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerPoint:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};lo.prototype.clone=function(){var t=new lo(this._minZoom,this._maxZoom,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._calcMatrices(),t},co.minZoom.get=function(){return this._minZoom},co.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},co.maxZoom.get=function(){return this._maxZoom},co.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},co.renderWorldCopies.get=function(){return this._renderWorldCopies},co.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},co.worldSize.get=function(){return this.tileSize*this.scale},co.centerPoint.get=function(){return this.size._div(2)},co.size.get=function(){return new t.Point(this.width,this.height)},co.bearing.get=function(){return-this.angle/Math.PI*180},co.bearing.set=function(e){var i=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==i&&(this._unmodified=!1,this.angle=i,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},co.pitch.get=function(){return this._pitch/Math.PI*180},co.pitch.set=function(e){var i=t.clamp(e,0,60)/180*Math.PI;this._pitch!==i&&(this._unmodified=!1,this._pitch=i,this._calcMatrices())},co.fov.get=function(){return this._fov/Math.PI*180},co.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},co.zoom.get=function(){return this._zoom},co.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},co.center.get=function(){return this._center},co.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},lo.prototype.coveringZoomLevel=function(t){return(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize))},lo.prototype.getVisibleUnwrappedCoordinates=function(e){var i=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var o=this.pointCoordinate(new t.Point(0,0)),r=this.pointCoordinate(new t.Point(this.width,0)),a=this.pointCoordinate(new t.Point(this.width,this.height)),n=this.pointCoordinate(new t.Point(0,this.height)),s=Math.floor(Math.min(o.x,r.x,a.x,n.x)),l=Math.floor(Math.max(o.x,r.x,a.x,n.x)),c=s-1;c<=l+1;c++)0!==c&&i.push(new t.UnwrappedTileID(c,e));return i},lo.prototype.coveringTiles=function(e){var i=this.coveringZoomLevel(e),o=i;if(void 0!==e.minzoom&&i<e.minzoom)return[];void 0!==e.maxzoom&&i>e.maxzoom&&(i=e.maxzoom);var r=t.MercatorCoordinate.fromLngLat(this.center),a=Math.pow(2,i),n=new t.Point(a*r.x-.5,a*r.y-.5);return function(e,i,o,r){void 0===r&&(r=!0);var a=1<<e,n={};function s(i,s,l){var c,u,h,p;if(l>=0&&l<=a)for(c=i;c<s;c++)u=Math.floor(c/a),h=(c%a+a)%a,0!==u&&!0!==r||(p=new t.OverscaledTileID(o,u,e,h,l),n[p.key]=p)}var l=i.map(function(e){return new t.Point(e.x,e.y)._mult(a)});return so(l[0],l[1],l[2],0,a,s),so(l[2],l[3],l[0],0,a,s),Object.keys(n).map(function(t){return n[t]})}(i,[this.pointCoordinate(new t.Point(0,0)),this.pointCoordinate(new t.Point(this.width,0)),this.pointCoordinate(new t.Point(this.width,this.height)),this.pointCoordinate(new t.Point(0,this.height))],e.reparseOverscaled?o:i,this._renderWorldCopies).sort(function(t,e){return n.dist(t.canonical)-n.dist(e.canonical)})},lo.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},co.unmodified.get=function(){return this._unmodified},lo.prototype.zoomScale=function(t){return Math.pow(2,t)},lo.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},lo.prototype.project=function(e){var i=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(i)*this.worldSize)},lo.prototype.unproject=function(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()},co.point.get=function(){return this.project(this.center)},lo.prototype.setLocationAtPoint=function(e,i){var o=this.pointCoordinate(i),r=this.pointCoordinate(this.centerPoint),a=this.locationCoordinate(e),n=new t.MercatorCoordinate(a.x-(o.x-r.x),a.y-(o.y-r.y));this.center=this.coordinateLocation(n),this._renderWorldCopies&&(this.center=this.center.wrap())},lo.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},lo.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},lo.prototype.locationCoordinate=function(e){return t.MercatorCoordinate.fromLngLat(e)},lo.prototype.coordinateLocation=function(t){return t.toLngLat()},lo.prototype.pointCoordinate=function(e){var i=[e.x,e.y,0,1],o=[e.x,e.y,1,1];t.transformMat4(i,i,this.pixelMatrixInverse),t.transformMat4(o,o,this.pixelMatrixInverse);var r=i[3],a=o[3],n=i[0]/r,s=o[0]/a,l=i[1]/r,c=o[1]/a,u=i[2]/r,h=o[2]/a,p=u===h?0:(0-u)/(h-u);return new t.MercatorCoordinate(t.number(n,s,p)/this.worldSize,t.number(l,c,p)/this.worldSize)},lo.prototype.coordinatePoint=function(e){var i=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(i,i,this.pixelMatrix),new t.Point(i[0]/i[3],i[1]/i[3])},lo.prototype.getBounds=function(){return(new t.LngLatBounds).extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},lo.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},lo.prototype.setMaxBounds=function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},lo.prototype.calculatePosMatrix=function(e,i){void 0===i&&(i=!1);var o=e.key,r=i?this._alignedPosMatrixCache:this._posMatrixCache;if(r[o])return r[o];var a=e.canonical,n=this.worldSize/this.zoomScale(a.z),s=a.x+Math.pow(2,a.z)*e.wrap,l=t.identity(new Float64Array(16));return t.translate(l,l,[s*n,a.y*n,0]),t.scale(l,l,[n/t.EXTENT,n/t.EXTENT,1]),t.multiply(l,i?this.alignedProjMatrix:this.projMatrix,l),r[o]=new Float32Array(l),r[o]},lo.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},lo.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,i,o,r,a=-90,n=90,s=-180,l=180,c=this.size,u=this._unmodified;if(this.latRange){var h=this.latRange;a=t.mercatorYfromLat(h[1])*this.worldSize,e=(n=t.mercatorYfromLat(h[0])*this.worldSize)-a<c.y?c.y/(n-a):0}if(this.lngRange){var p=this.lngRange;s=t.mercatorXfromLng(p[0])*this.worldSize,i=(l=t.mercatorXfromLng(p[1])*this.worldSize)-s<c.x?c.x/(l-s):0}var d=this.point,_=Math.max(i||0,e||0);if(_)return this.center=this.unproject(new t.Point(i?(l+s)/2:d.x,e?(n+a)/2:d.y)),this.zoom+=this.scaleZoom(_),this._unmodified=u,void(this._constraining=!1);if(this.latRange){var f=d.y,m=c.y/2;f-m<a&&(r=a+m),f+m>n&&(r=n-m)}if(this.lngRange){var g=d.x,v=c.x/2;g-v<s&&(o=s+v),g+v>l&&(o=l-v)}void 0===o&&void 0===r||(this.center=this.unproject(new t.Point(void 0!==o?o:d.x,void 0!==r?r:d.y))),this._unmodified=u,this._constraining=!1}},lo.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var e=this._fov/2,i=Math.PI/2+this._pitch,o=Math.sin(e)*this.cameraToCenterDistance/Math.sin(Math.PI-i-e),r=this.point,a=r.x,n=r.y,s=1.01*(Math.cos(Math.PI/2-this._pitch)*o+this.cameraToCenterDistance),l=new Float64Array(16);t.perspective(l,this._fov,this.width/this.height,1,s),t.scale(l,l,[1,-1,1]),t.translate(l,l,[0,0,-this.cameraToCenterDistance]),t.rotateX(l,l,this._pitch),t.rotateZ(l,l,this.angle),t.translate(l,l,[-a,-n,0]),this.mercatorMatrix=t.scale([],l,[this.worldSize,this.worldSize,this.worldSize]),t.scale(l,l,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=l;var c=this.width%2/2,u=this.height%2/2,h=Math.cos(this.angle),p=Math.sin(this.angle),d=a-Math.round(a)+h*c+p*u,_=n-Math.round(n)+h*u+p*c,f=new Float64Array(l);if(t.translate(f,f,[d>.5?d-1:d,_>.5?_-1:_,0]),this.alignedProjMatrix=f,l=t.create$1(),t.scale(l,l,[this.width/2,-this.height/2,1]),t.translate(l,l,[1,-1,0]),this.pixelMatrix=t.multiply(new Float64Array(16),l,this.projMatrix),!(l=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=l,this._posMatrixCache={},this._alignedPosMatrixCache={}}},lo.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.Point(0,0)),i=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(i,i,this.pixelMatrix)[3]/this.cameraToCenterDistance},lo.prototype.getCameraPoint=function(){var e=this._pitch,i=Math.tan(e)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,i))},lo.prototype.getCameraQueryGeometry=function(e){var i=this.getCameraPoint();if(1===e.length)return[e[0],i];for(var o=i.x,r=i.y,a=i.x,n=i.y,s=0,l=e;s<l.length;s+=1){var c=l[s];o=Math.min(o,c.x),r=Math.min(r,c.y),a=Math.max(a,c.x),n=Math.max(n,c.y)}return[new t.Point(o,r),new t.Point(a,r),new t.Point(a,n),new t.Point(o,n),new t.Point(o,r)]},Object.defineProperties(lo.prototype,co);var uo=function(){var e,o,r,a;t.bindAll(["_onHashChange","_updateHash"],this),this._updateHash=(e=this._updateHashUnthrottled.bind(this),o=!1,r=0,a=function(){r=0,o&&(e(),r=setTimeout(a,300),o=!1)},function(){return o=!0,r||a(),r})};uo.prototype.addTo=function(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},uo.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},uo.prototype.getHashString=function(t){var e=this._map.getCenter(),i=Math.round(100*this._map.getZoom())/100,o=Math.ceil((i*Math.LN2+Math.log(512/360/.5))/Math.LN10),r=Math.pow(10,o),a=Math.round(e.lng*r)/r,n=Math.round(e.lat*r)/r,s=this._map.getBearing(),l=this._map.getPitch(),c="";return c+=t?"#/"+a+"/"+n+"/"+i:"#"+i+"/"+n+"/"+a,(s||l)&&(c+="/"+Math.round(10*s)/10),l&&(c+="/"+Math.round(l)),c},uo.prototype._onHashChange=function(){var e=t.window.location.hash.replace("#","").split("/");return e.length>=3&&(this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:+(e[3]||0),pitch:+(e[4]||0)}),!0)},uo.prototype._updateHashUnthrottled=function(){var e=this.getHashString();try{t.window.history.replaceState(t.window.history.state,"",e)}catch(t){}};var ho=function(e){function o(o,r,a,n){void 0===n&&(n={});var s=i.mousePos(r.getCanvasContainer(),a),l=r.unproject(s);e.call(this,o,t.extend({point:s,lngLat:l,originalEvent:a},n)),this._defaultPrevented=!1,this.target=r}e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o;var r={defaultPrevented:{configurable:!0}};return o.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(o.prototype,r),o}(t.Event),po=function(e){function o(o,r,a){var n=i.touchPos(r.getCanvasContainer(),a),s=n.map(function(t){return r.unproject(t)}),l=n.reduce(function(t,e,i,o){return t.add(e.div(o.length))},new t.Point(0,0)),c=r.unproject(l);e.call(this,o,{points:n,point:l,lngLats:s,lngLat:c,originalEvent:a}),this._defaultPrevented=!1}e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o;var r={defaultPrevented:{configurable:!0}};return o.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(o.prototype,r),o}(t.Event),_o=function(t){function e(e,i,o){t.call(this,e,{originalEvent:o}),this._defaultPrevented=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,i),e}(t.Event),fo=function(e){this._map=e,this._el=e.getCanvasContainer(),this._delta=0,t.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};fo.prototype.isEnabled=function(){return!!this._enabled},fo.prototype.isActive=function(){return!!this._active},fo.prototype.isZooming=function(){return!!this._zooming},fo.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},fo.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},fo.prototype.onWheel=function(e){if(this.isEnabled()){var i=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,o=t.browser.now(),r=o-(this._lastWheelEventTime||0);this._lastWheelEventTime=o,0!==i&&i%4.000244140625==0?this._type="wheel":0!==i&&Math.abs(i)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=i,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(r*i)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,i+=this._lastValue)),e.shiftKey&&i&&(i/=4),this._type&&(this._lastWheelEvent=e,this._delta-=i,this.isActive()||this._start(e)),e.preventDefault()}},fo.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(t)},fo.prototype._start=function(e){if(this._delta){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this._zooming=!0,this._map.fire(new t.Event("movestart",{originalEvent:e})),this._map.fire(new t.Event("zoomstart",{originalEvent:e})),this._finishTimeout&&clearTimeout(this._finishTimeout);var o=i.mousePos(this._el,e);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(o)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame))}},fo.prototype._onScrollFrame=function(){var e=this;if(this._frameId=null,this.isActive()){var i=this._map.transform;if(0!==this._delta){var o="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?1/450:.01,r=2/(1+Math.exp(-Math.abs(this._delta*o)));this._delta<0&&0!==r&&(r=1/r);var a="number"==typeof this._targetZoom?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(a*r))),"wheel"===this._type&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var n="number"==typeof this._targetZoom?this._targetZoom:i.zoom,s=this._startZoom,l=this._easing,c=!1;if("wheel"===this._type&&s&&l){var u=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),h=l(u);i.zoom=t.number(s,n,h),u<1?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):c=!0}else i.zoom=n,c=!0;i.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire(new t.Event("move",{originalEvent:this._lastWheelEvent})),this._map.fire(new t.Event("zoom",{originalEvent:this._lastWheelEvent})),c&&(this._active=!1,this._finishTimeout=setTimeout(function(){e._zooming=!1,e._map.fire(new t.Event("zoomend",{originalEvent:e._lastWheelEvent})),e._map.fire(new t.Event("moveend",{originalEvent:e._lastWheelEvent})),delete e._targetZoom},200))}},fo.prototype._smoothOutEasing=function(e){var i=t.ease;if(this._prevEase){var o=this._prevEase,r=(t.browser.now()-o.start)/o.duration,a=o.easing(r+.01)-o.easing(r),n=.27/Math.sqrt(a*a+1e-4)*.01,s=Math.sqrt(.0729-n*n);i=t.bezier(n,s,.25,1)}return this._prevEase={start:t.browser.now(),duration:e,easing:i},i};var mo=function(e,i){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=i.clickTolerance||1,t.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)};mo.prototype.isEnabled=function(){return!!this._enabled},mo.prototype.isActive=function(){return!!this._active},mo.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},mo.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},mo.prototype.onMouseDown=function(e){this.isEnabled()&&e.shiftKey&&0===e.button&&(t.window.document.addEventListener("mousemove",this._onMouseMove,!1),t.window.document.addEventListener("keydown",this._onKeyDown,!1),t.window.document.addEventListener("mouseup",this._onMouseUp,!1),i.disableDrag(),this._startPos=this._lastPos=i.mousePos(this._el,e),this._active=!0)},mo.prototype._onMouseMove=function(t){var e=i.mousePos(this._el,t);if(!(this._lastPos.equals(e)||!this._box&&e.dist(this._startPos)<this._clickTolerance)){var o=this._startPos;this._lastPos=e,this._box||(this._box=i.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var r=Math.min(o.x,e.x),a=Math.max(o.x,e.x),n=Math.min(o.y,e.y),s=Math.max(o.y,e.y);i.setTransform(this._box,"translate("+r+"px,"+n+"px)"),this._box.style.width=a-r+"px",this._box.style.height=s-n+"px"}},mo.prototype._onMouseUp=function(e){if(0===e.button){var o=this._startPos,r=i.mousePos(this._el,e);this._finish(),i.suppressClick(),o.x===r.x&&o.y===r.y?this._fireEvent("boxzoomcancel",e):this._map.fitScreenCoordinates(o,r,this._map.getBearing(),{linear:!0}).fire(new t.Event("boxzoomend",{originalEvent:e}))}},mo.prototype._onKeyDown=function(t){27===t.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",t))},mo.prototype._finish=function(){this._active=!1,t.window.document.removeEventListener("mousemove",this._onMouseMove,!1),t.window.document.removeEventListener("keydown",this._onKeyDown,!1),t.window.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(i.remove(this._box),this._box=null),i.enableDrag(),delete this._startPos,delete this._lastPos},mo.prototype._fireEvent=function(e,i){return this._map.fire(new t.Event(e,{originalEvent:i}))};var go=t.bezier(0,0,.25,1),vo=function(e,i){this._map=e,this._el=i.element||e.getCanvasContainer(),this._state="disabled",this._button=i.button||"right",this._bearingSnap=i.bearingSnap||0,this._pitchWithRotate=!1!==i.pitchWithRotate,t.bindAll(["onMouseDown","_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this)};vo.prototype.isEnabled=function(){return"disabled"!==this._state},vo.prototype.isActive=function(){return"active"===this._state},vo.prototype.enable=function(){this.isEnabled()||(this._state="enabled")},vo.prototype.disable=function(){if(this.isEnabled())switch(this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend"),this._pitchWithRotate&&this._fireEvent("pitchend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},vo.prototype.onMouseDown=function(e){if("enabled"===this._state){if("right"===this._button){if(this._eventButton=i.mouseButton(e),this._eventButton!==(e.ctrlKey?0:2))return}else{if(e.ctrlKey||0!==i.mouseButton(e))return;this._eventButton=0}i.disableDrag(),t.window.document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),t.window.document.addEventListener("mouseup",this._onMouseUp),t.window.addEventListener("blur",this._onBlur),this._state="pending",this._inertia=[[t.browser.now(),this._map.getBearing()]],this._startPos=this._lastPos=i.mousePos(this._el,e),this._center=this._map.transform.centerPoint,e.preventDefault()}},vo.prototype._onMouseMove=function(t){var e=i.mousePos(this._el,t);this._lastPos.equals(e)||(this._lastMoveEvent=t,this._lastPos=e,"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",t),this._fireEvent("movestart",t),this._pitchWithRotate&&this._fireEvent("pitchstart",t)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},vo.prototype._onDragFrame=function(){this._frameId=null;var e=this._lastMoveEvent;if(e){var i=this._map.transform,o=this._startPos,r=this._lastPos,a=.8*(o.x-r.x),n=-.5*(o.y-r.y),s=i.bearing-a,l=i.pitch-n,c=this._inertia,u=c[c.length-1];this._drainInertiaBuffer(),c.push([t.browser.now(),this._map._normalizeBearing(s,u[1])]),i.bearing=s,this._pitchWithRotate&&(this._fireEvent("pitch",e),i.pitch=l),this._fireEvent("rotate",e),this._fireEvent("move",e),delete this._lastMoveEvent,this._startPos=this._lastPos}},vo.prototype._onMouseUp=function(t){if(i.mouseButton(t)===this._eventButton)switch(this._state){case"active":this._state="enabled",i.suppressClick(),this._unbind(),this._deactivate(),this._inertialRotate(t);break;case"pending":this._state="enabled",this._unbind()}},vo.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend",t),this._pitchWithRotate&&this._fireEvent("pitchend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind()}},vo.prototype._unbind=function(){t.window.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0}),t.window.document.removeEventListener("mouseup",this._onMouseUp),t.window.removeEventListener("blur",this._onBlur),i.enableDrag()},vo.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._lastPos},vo.prototype._inertialRotate=function(t){var e=this;this._fireEvent("rotateend",t),this._drainInertiaBuffer();var i=this._map,o=i.getBearing(),r=this._inertia,a=function(){Math.abs(o)<e._bearingSnap?i.resetNorth({noMoveStart:!0},{originalEvent:t}):e._fireEvent("moveend",t),e._pitchWithRotate&&e._fireEvent("pitchend",t)};if(r.length<2)a();else{var n=r[0],s=r[r.length-1],l=r[r.length-2],c=i._normalizeBearing(o,l[1]),u=s[1]-n[1],h=u<0?-1:1,p=(s[0]-n[0])/1e3;if(0!==u&&0!==p){var d=Math.abs(u*(.25/p));d>180&&(d=180);var _=d/180;c+=h*d*(_/2),Math.abs(i._normalizeBearing(c,0))<this._bearingSnap&&(c=i._normalizeBearing(0,c)),i.rotateTo(c,{duration:1e3*_,easing:go,noMoveStart:!0},{originalEvent:t})}else a()}},vo.prototype._fireEvent=function(e,i){return this._map.fire(new t.Event(e,i?{originalEvent:i}:{}))},vo.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,i=t.browser.now();e.length>0&&i-e[0][0]>160;)e.shift()};var yo=t.bezier(0,0,.3,1),xo=function(e,i){this._map=e,this._el=e.getCanvasContainer(),this._state="disabled",this._clickTolerance=i.clickTolerance||1,t.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this)};xo.prototype.isEnabled=function(){return"disabled"!==this._state},xo.prototype.isActive=function(){return"active"===this._state},xo.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled")},xo.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("dragend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},xo.prototype.onMouseDown=function(e){"enabled"===this._state&&(e.ctrlKey||0!==i.mouseButton(e)||(i.addEventListener(t.window.document,"mousemove",this._onMove,{capture:!0}),i.addEventListener(t.window.document,"mouseup",this._onMouseUp),this._start(e)))},xo.prototype.onTouchStart=function(e){"enabled"===this._state&&(e.touches.length>1||(i.addEventListener(t.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),i.addEventListener(t.window.document,"touchend",this._onTouchEnd),this._start(e)))},xo.prototype._start=function(e){t.window.addEventListener("blur",this._onBlur),this._state="pending",this._startPos=this._mouseDownPos=this._lastPos=i.mousePos(this._el,e),this._inertia=[[t.browser.now(),this._startPos]]},xo.prototype._onMove=function(e){e.preventDefault();var o=i.mousePos(this._el,e);this._lastPos.equals(o)||"pending"===this._state&&o.dist(this._mouseDownPos)<this._clickTolerance||(this._lastMoveEvent=e,this._lastPos=o,this._drainInertiaBuffer(),this._inertia.push([t.browser.now(),this._lastPos]),"pending"===this._state&&(this._state="active",this._fireEvent("dragstart",e),this._fireEvent("movestart",e)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},xo.prototype._onDragFrame=function(){this._frameId=null;var t=this._lastMoveEvent;if(t){var e=this._map.transform;e.setLocationAtPoint(e.pointLocation(this._startPos),this._lastPos),this._fireEvent("drag",t),this._fireEvent("move",t),this._startPos=this._lastPos,delete this._lastMoveEvent}},xo.prototype._onMouseUp=function(t){if(0===i.mouseButton(t))switch(this._state){case"active":this._state="enabled",i.suppressClick(),this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind()}},xo.prototype._onTouchEnd=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind()}},xo.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("dragend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind()}},xo.prototype._unbind=function(){i.removeEventListener(t.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),i.removeEventListener(t.window.document,"touchend",this._onTouchEnd),i.removeEventListener(t.window.document,"mousemove",this._onMove,{capture:!0}),i.removeEventListener(t.window.document,"mouseup",this._onMouseUp),i.removeEventListener(t.window,"blur",this._onBlur)},xo.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._mouseDownPos,delete this._lastPos},xo.prototype._inertialPan=function(t){this._fireEvent("dragend",t),this._drainInertiaBuffer();var e=this._inertia;if(e.length<2)this._fireEvent("moveend",t);else{var i=e[e.length-1],o=e[0],r=i[1].sub(o[1]),a=(i[0]-o[0])/1e3;if(0===a||i[1].equals(o[1]))this._fireEvent("moveend",t);else{var n=r.mult(.3/a),s=n.mag();s>1400&&(s=1400,n._unit()._mult(s));var l=s/750,c=n.mult(-l/2);this._map.panBy(c,{duration:1e3*l,easing:yo,noMoveStart:!0},{originalEvent:t})}}},xo.prototype._fireEvent=function(e,i){return this._map.fire(new t.Event(e,i?{originalEvent:i}:{}))},xo.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,i=t.browser.now();e.length>0&&i-e[0][0]>160;)e.shift()};var bo=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onKeyDown"],this)};function wo(t){return t*(2-t)}bo.prototype.isEnabled=function(){return!!this._enabled},bo.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},bo.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},bo.prototype._onKeyDown=function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=0,i=0,o=0,r=0,a=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?i=-1:(t.preventDefault(),r=-1);break;case 39:t.shiftKey?i=1:(t.preventDefault(),r=1);break;case 38:t.shiftKey?o=1:(t.preventDefault(),a=-1);break;case 40:t.shiftKey?o=-1:(a=1,t.preventDefault());break;default:return}var n=this._map,s=n.getZoom(),l={duration:300,delayEndEvents:500,easing:wo,zoom:e?Math.round(s)+e*(t.shiftKey?2:1):s,bearing:n.getBearing()+15*i,pitch:n.getPitch()+10*o,offset:[100*-r,100*-a],center:n.getCenter()};n.easeTo(l,{originalEvent:t})}};var Eo=function(e){this._map=e,t.bindAll(["_onDblClick","_onZoomEnd"],this)};Eo.prototype.isEnabled=function(){return!!this._enabled},Eo.prototype.isActive=function(){return!!this._active},Eo.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Eo.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Eo.prototype.onTouchStart=function(t){var e=this;this.isEnabled()&&(t.points.length>1||(this._tapped?(clearTimeout(this._tapped),this._tapped=null,this._zoom(t)):this._tapped=setTimeout(function(){e._tapped=null},300)))},Eo.prototype.onDblClick=function(t){this.isEnabled()&&(t.originalEvent.preventDefault(),this._zoom(t))},Eo.prototype._zoom=function(t){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),{around:t.lngLat},t)},Eo.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)};var To=t.bezier(0,0,.15,1),Io=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)};Io.prototype.isEnabled=function(){return!!this._enabled},Io.prototype.enable=function(t){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around)},Io.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)},Io.prototype.disableRotation=function(){this._rotationDisabled=!0},Io.prototype.enableRotation=function(){this._rotationDisabled=!1},Io.prototype.onStart=function(e){if(this.isEnabled()&&2===e.touches.length){var o=i.mousePos(this._el,e.touches[0]),r=i.mousePos(this._el,e.touches[1]),a=o.add(r).div(2);this._startVec=o.sub(r),this._startAround=this._map.transform.pointLocation(a),this._gestureIntent=void 0,this._inertia=[],i.addEventListener(t.window.document,"touchmove",this._onMove,{passive:!1}),i.addEventListener(t.window.document,"touchend",this._onEnd)}},Io.prototype._getTouchEventData=function(t){var e=i.mousePos(this._el,t.touches[0]),o=i.mousePos(this._el,t.touches[1]),r=e.sub(o);return{vec:r,center:e.add(o).div(2),scale:r.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*r.angleWith(this._startVec)/Math.PI}},Io.prototype._onMove=function(e){if(2===e.touches.length){var i=this._getTouchEventData(e),o=i.vec,r=i.scale,a=i.bearing;if(!this._gestureIntent){var n=this._rotationDisabled&&1!==r||Math.abs(1-r)>.15;Math.abs(a)>10?this._gestureIntent="rotate":n&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new t.Event(this._gestureIntent+"start",{originalEvent:e})),this._map.fire(new t.Event("movestart",{originalEvent:e})),this._startVec=o)}this._lastTouchEvent=e,this._frameId||(this._frameId=this._map._requestRenderFrame(this._onTouchFrame)),e.preventDefault()}},Io.prototype._onTouchFrame=function(){this._frameId=null;var e=this._gestureIntent;if(e){var i=this._map.transform;this._startScale||(this._startScale=i.scale,this._startBearing=i.bearing);var o=this._getTouchEventData(this._lastTouchEvent),r=o.center,a=o.bearing,n=o.scale,s=i.pointLocation(r),l=i.locationPoint(s);"rotate"===e&&(i.bearing=this._startBearing+a),i.zoom=i.scaleZoom(this._startScale*n),i.setLocationAtPoint(this._startAround,l),this._map.fire(new t.Event(e,{originalEvent:this._lastTouchEvent})),this._map.fire(new t.Event("move",{originalEvent:this._lastTouchEvent})),this._drainInertiaBuffer(),this._inertia.push([t.browser.now(),n,r])}},Io.prototype._onEnd=function(e){i.removeEventListener(t.window.document,"touchmove",this._onMove,{passive:!1}),i.removeEventListener(t.window.document,"touchend",this._onEnd);var o=this._gestureIntent,r=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,o){this._map.fire(new t.Event(o+"end",{originalEvent:e})),this._drainInertiaBuffer();var a=this._inertia,n=this._map;if(a.length<2)n.snapToNorth({},{originalEvent:e});else{var s=a[a.length-1],l=a[0],c=n.transform.scaleZoom(r*s[1]),u=n.transform.scaleZoom(r*l[1]),h=c-u,p=(s[0]-l[0])/1e3,d=s[2];if(0!==p&&c!==u){var _=.15*h/p;Math.abs(_)>2.5&&(_=_>0?2.5:-2.5);var f=1e3*Math.abs(_/(12*.15)),m=c+_*f/2e3;m<0&&(m=0),n.easeTo({zoom:m,duration:f,easing:To,around:this._aroundCenter?n.getCenter():n.unproject(d),noMoveStart:!0},{originalEvent:e})}else n.snapToNorth({},{originalEvent:e})}}},Io.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,i=t.browser.now();e.length>2&&i-e[0][0]>160;)e.shift()};var Co={scrollZoom:fo,boxZoom:mo,dragRotate:vo,dragPan:xo,keyboard:bo,doubleClickZoom:Eo,touchZoomRotate:Io},So=function(e){function i(i,o){e.call(this),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=o.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.getCenter=function(){return this.transform.center},i.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},i.prototype.panBy=function(e,i,o){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},i),o)},i.prototype.panTo=function(e,i,o){return this.easeTo(t.extend({center:e},i),o)},i.prototype.getZoom=function(){return this.transform.zoom},i.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},i.prototype.zoomTo=function(e,i,o){return this.easeTo(t.extend({zoom:e},i),o)},i.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},i.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},i.prototype.getBearing=function(){return this.transform.bearing},i.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},i.prototype.rotateTo=function(e,i,o){return this.easeTo(t.extend({bearing:e},i),o)},i.prototype.resetNorth=function(e,i){return this.rotateTo(0,t.extend({duration:1e3},e),i),this},i.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},i.prototype.getPitch=function(){return this.transform.pitch},i.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},i.prototype.cameraForBounds=function(e,i){return e=t.LngLatBounds.convert(e),this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),0,i)},i.prototype._cameraForBoxAndBearing=function(e,i,o,r){if("number"==typeof(r=t.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},r)).padding){var a=r.padding;r.padding={top:a,bottom:a,right:a,left:a}}if(t.isEqual(Object.keys(r.padding).sort(function(t,e){return t<e?-1:t>e?1:0}),["bottom","left","right","top"])){var n=this.transform,s=n.project(t.LngLat.convert(e)),l=n.project(t.LngLat.convert(i)),c=s.rotate(-o*Math.PI/180),u=l.rotate(-o*Math.PI/180),h=new t.Point(Math.max(c.x,u.x),Math.max(c.y,u.y)),p=new t.Point(Math.min(c.x,u.x),Math.min(c.y,u.y)),d=h.sub(p),_=(n.width-r.padding.left-r.padding.right)/d.x,f=(n.height-r.padding.top-r.padding.bottom)/d.y;if(!(f<0||_<0)){var m=Math.min(n.scaleZoom(n.scale*Math.min(_,f)),r.maxZoom),g=t.Point.convert(r.offset),v=(r.padding.left-r.padding.right)/2,y=(r.padding.top-r.padding.bottom)/2,x=new t.Point(g.x+v,g.y+y).mult(n.scale/n.zoomScale(m));return{center:n.unproject(s.add(l).div(2).sub(x)),zoom:m,bearing:o}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}else t.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'")},i.prototype.fitBounds=function(t,e,i){return this._fitInternal(this.cameraForBounds(t,e),e,i)},i.prototype.fitScreenCoordinates=function(e,i,o,r,a){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e)),this.transform.pointLocation(t.Point.convert(i)),o,r),r,a)},i.prototype._fitInternal=function(e,i,o){return e?(i=t.extend(e,i)).linear?this.easeTo(i,o):this.flyTo(i,o):this},i.prototype.jumpTo=function(e,i){this.stop();var o=this.transform,r=!1,a=!1,n=!1;return"zoom"in e&&o.zoom!==+e.zoom&&(r=!0,o.zoom=+e.zoom),void 0!==e.center&&(o.center=t.LngLat.convert(e.center)),"bearing"in e&&o.bearing!==+e.bearing&&(a=!0,o.bearing=+e.bearing),"pitch"in e&&o.pitch!==+e.pitch&&(n=!0,o.pitch=+e.pitch),this.fire(new t.Event("movestart",i)).fire(new t.Event("move",i)),r&&this.fire(new t.Event("zoomstart",i)).fire(new t.Event("zoom",i)).fire(new t.Event("zoomend",i)),a&&this.fire(new t.Event("rotatestart",i)).fire(new t.Event("rotate",i)).fire(new t.Event("rotateend",i)),n&&this.fire(new t.Event("pitchstart",i)).fire(new t.Event("pitch",i)).fire(new t.Event("pitchend",i)),this.fire(new t.Event("moveend",i))},i.prototype.easeTo=function(e,i){var o=this;this.stop(),!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate&&(e.duration=0);var r=this.transform,a=this.getZoom(),n=this.getBearing(),s=this.getPitch(),l="zoom"in e?+e.zoom:a,c="bearing"in e?this._normalizeBearing(e.bearing,n):n,u="pitch"in e?+e.pitch:s,h=r.centerPoint.add(t.Point.convert(e.offset)),p=r.pointLocation(h),d=t.LngLat.convert(e.center||p);this._normalizeCenter(d);var _,f,m=r.project(p),g=r.project(d).sub(m),v=r.zoomScale(l-a);return e.around&&(_=t.LngLat.convert(e.around),f=r.locationPoint(_)),this._zooming=l!==a,this._rotating=n!==c,this._pitching=u!==s,this._prepareEase(i,e.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease(function(e){if(o._zooming&&(r.zoom=t.number(a,l,e)),o._rotating&&(r.bearing=t.number(n,c,e)),o._pitching&&(r.pitch=t.number(s,u,e)),_)r.setLocationAtPoint(_,f);else{var p=r.zoomScale(r.zoom-a),d=l>a?Math.min(2,v):Math.max(.5,v),y=Math.pow(d,1-e),x=r.unproject(m.add(g.mult(e*y)).mult(p));r.setLocationAtPoint(r.renderWorldCopies?x.wrap():x,h)}o._fireMoveEvents(i)},function(){e.delayEndEvents?o._easeEndTimeoutID=setTimeout(function(){return o._afterEase(i)},e.delayEndEvents):o._afterEase(i)},e),this},i.prototype._prepareEase=function(e,i){this._moving=!0,i||this.fire(new t.Event("movestart",e)),this._zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&this.fire(new t.Event("pitchstart",e))},i.prototype._fireMoveEvents=function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))},i.prototype._afterEase=function(e){var i=this._zooming,o=this._rotating,r=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,i&&this.fire(new t.Event("zoomend",e)),o&&this.fire(new t.Event("rotateend",e)),r&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))},i.prototype.flyTo=function(e,i){var o=this;this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var r=this.transform,a=this.getZoom(),n=this.getBearing(),s=this.getPitch(),l="zoom"in e?t.clamp(+e.zoom,r.minZoom,r.maxZoom):a,c="bearing"in e?this._normalizeBearing(e.bearing,n):n,u="pitch"in e?+e.pitch:s,h=r.zoomScale(l-a),p=r.centerPoint.add(t.Point.convert(e.offset)),d=r.pointLocation(p),_=t.LngLat.convert(e.center||d);this._normalizeCenter(_);var f=r.project(d),m=r.project(_).sub(f),g=e.curve,v=Math.max(r.width,r.height),y=v/h,x=m.mag();if("minZoom"in e){var b=t.clamp(Math.min(e.minZoom,a,l),r.minZoom,r.maxZoom),w=v/r.zoomScale(b-a);g=Math.sqrt(w/x*2)}var E=g*g;function T(t){var e=(y*y-v*v+(t?-1:1)*E*E*x*x)/(2*(t?y:v)*E*x);return Math.log(Math.sqrt(e*e+1)-e)}function I(t){return(Math.exp(t)-Math.exp(-t))/2}function C(t){return(Math.exp(t)+Math.exp(-t))/2}var S=T(0),z=function(t){return C(S)/C(S+g*t)},L=function(t){return v*((C(S)*(I(e=S+g*t)/C(e))-I(S))/E)/x;var e},P=(T(1)-S)/g;if(Math.abs(x)<1e-6||!isFinite(P)){if(Math.abs(v-y)<1e-6)return this.easeTo(e,i);var D=y<v?-1:1;P=Math.abs(Math.log(y/v))/g,L=function(){return 0},z=function(t){return Math.exp(D*g*t)}}if("duration"in e)e.duration=+e.duration;else{var R="screenSpeed"in e?+e.screenSpeed/g:+e.speed;e.duration=1e3*P/R}return e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=n!==c,this._pitching=u!==s,this._prepareEase(i,!1),this._ease(function(e){var h=e*P,d=1/z(h);r.zoom=1===e?l:a+r.scaleZoom(d),o._rotating&&(r.bearing=t.number(n,c,e)),o._pitching&&(r.pitch=t.number(s,u,e));var g=1===e?_:r.unproject(f.add(m.mult(L(h))).mult(d));r.setLocationAtPoint(r.renderWorldCopies?g.wrap():g,p),o._fireMoveEvents(i)},function(){return o._afterEase(i)},e),this},i.prototype.isEasing=function(){return!!this._easeFrameId},i.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var t=this._onEaseEnd;delete this._onEaseEnd,t.call(this)}return this},i.prototype._ease=function(e,i,o){!1===o.animate||0===o.duration?(e(1),i()):(this._easeStart=t.browser.now(),this._easeOptions=o,this._onEaseFrame=e,this._onEaseEnd=i,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},i.prototype._renderFrameCallback=function(){var e=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},i.prototype._normalizeBearing=function(e,i){e=t.wrap(e,-180,180);var o=Math.abs(e-i);return Math.abs(e-360-i)<o&&(e-=360),Math.abs(e+360-i)<o&&(e+=360),e},i.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var i=t.lng-e.center.lng;t.lng+=i>180?-360:i<-180?360:0}},i}(t.Evented),zo=function(e){void 0===e&&(e={}),this.options=e,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};zo.prototype.getDefaultPosition=function(){return"bottom-right"},zo.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=i.create("div","mapboxgl-ctrl-attrib-inner",this._container),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},zo.prototype.onRemove=function(){i.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},zo.prototype._updateEditLink=function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var i=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:t.config.ACCESS_TOKEN}];if(e){var o=i.reduce(function(t,e,o){return e.value&&(t+=e.key+"="+e.value+(o<i.length-1?"&":"")),t},"?");e.href=t.config.FEEDBACK_URL+"/"+o+(this._map._hash?this._map._hash.getHashString(!0):"")}},zo.prototype._updateData=function(t){!t||"metadata"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())},zo.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map(function(t){return"string"!=typeof t?"":t})):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var i=this._map.style.sourceCaches;for(var o in i){var r=i[o];if(r.used){var a=r.getSource();a.attribution&&t.indexOf(a.attribution)<0&&t.push(a.attribution)}}t.sort(function(t,e){return t.length-e.length}),(t=t.filter(function(e,i){for(var o=i+1;o<t.length;o++)if(t[o].indexOf(e)>=0)return!1;return!0})).length?(this._innerContainer.innerHTML=t.join(" | "),this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null}},zo.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Lo=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};Lo.prototype.onAdd=function(t){this._map=t,this._container=i.create("div","mapboxgl-ctrl");var e=i.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.href="https://www.mapbox.com/",e.setAttribute("aria-label","Mapbox logo"),e.setAttribute("rel","noopener"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Lo.prototype.onRemove=function(){i.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Lo.prototype.getDefaultPosition=function(){return"bottom-left"},Lo.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Lo.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},Lo.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}};var Po=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Po.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},Po.prototype.remove=function(t){for(var e=this._currentlyRunning,i=0,o=e?this._queue.concat(e):this._queue;i<o.length;i+=1){var r=o[i];if(r.id===t)return void(r.cancelled=!0)}},Po.prototype.run=function(){var t=this._currentlyRunning=this._queue;this._queue=[];for(var e=0,i=t;e<i.length;e+=1){var o=i[e];if(!o.cancelled&&(o.callback(),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Po.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Do=t.window.HTMLImageElement,Ro=t.window.HTMLElement,Mo={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,clickTolerance:3,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},Ao=function(o){function r(e){var r=this;if(null!=(e=t.extend({},Mo,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than minZoom");var a=new lo(e.minZoom,e.maxZoom,e.renderWorldCopies);o.call(this,a,e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new Po,this._controls=[],this._mapId=t.uniqueId();var n=e.transformRequest;if(this._transformRequest=n?function(t,e){return n(t,e)||{url:t}}:function(t){return{url:t}},"string"==typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error("Container '"+e.container+"' not found.")}else{if(!(e.container instanceof Ro))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return r._update(!1)}),this.on("moveend",function(){return r._update(!1)}),this.on("zoom",function(){return r._update(!0)}),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1)),function(t,e){var o=t.getCanvasContainer(),r=null,a=!1,n=null;for(var s in Co)t[s]=new Co[s](t,e),e.interactive&&e[s]&&t[s].enable(e[s]);i.addEventListener(o,"mouseout",function(e){t.fire(new ho("mouseout",t,e))}),i.addEventListener(o,"mousedown",function(r){a=!0,n=i.mousePos(o,r);var s=new ho("mousedown",t,r);t.fire(s),s.defaultPrevented||(e.interactive&&!t.doubleClickZoom.isActive()&&t.stop(),t.boxZoom.onMouseDown(r),t.boxZoom.isActive()||t.dragPan.isActive()||t.dragRotate.onMouseDown(r),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onMouseDown(r))}),i.addEventListener(o,"mouseup",function(e){var i=t.dragRotate.isActive();r&&!i&&t.fire(new ho("contextmenu",t,r)),r=null,a=!1,t.fire(new ho("mouseup",t,e))}),i.addEventListener(o,"mousemove",function(e){if(!t.dragPan.isActive()&&!t.dragRotate.isActive()){for(var i=e.target;i&&i!==o;)i=i.parentNode;i===o&&t.fire(new ho("mousemove",t,e))}}),i.addEventListener(o,"mouseover",function(e){for(var i=e.target;i&&i!==o;)i=i.parentNode;i===o&&t.fire(new ho("mouseover",t,e))}),i.addEventListener(o,"touchstart",function(i){var o=new po("touchstart",t,i);t.fire(o),o.defaultPrevented||(e.interactive&&t.stop(),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onTouchStart(i),t.touchZoomRotate.onStart(i),t.doubleClickZoom.onTouchStart(o))},{passive:!1}),i.addEventListener(o,"touchmove",function(e){t.fire(new po("touchmove",t,e))},{passive:!1}),i.addEventListener(o,"touchend",function(e){t.fire(new po("touchend",t,e))}),i.addEventListener(o,"touchcancel",function(e){t.fire(new po("touchcancel",t,e))}),i.addEventListener(o,"click",function(r){var a=i.mousePos(o,r);(a.equals(n)||a.dist(n)<e.clickTolerance)&&t.fire(new ho("click",t,r))}),i.addEventListener(o,"dblclick",function(e){var i=new ho("dblclick",t,e);t.fire(i),i.defaultPrevented||t.doubleClickZoom.onDblClick(i)}),i.addEventListener(o,"contextmenu",function(e){var i=t.dragRotate.isActive();a||i?a&&(r=e):t.fire(new ho("contextmenu",t,e)),(t.dragRotate.isEnabled()||t.listens("contextmenu"))&&e.preventDefault()}),i.addEventListener(o,"wheel",function(i){e.interactive&&t.stop();var o=new _o("wheel",t,i);t.fire(o),o.defaultPrevented||t.scrollZoom.onWheel(i)},{passive:!1})}(this,e),this._hash=e.hash&&(new uo).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new zo({customAttribution:e.customAttribution})),this.addControl(new Lo,e.logoPosition),this.on("style.load",function(){r.transform.unmodified&&r.jumpTo(r.style.stylesheet)}),this.on("data",function(e){r._update("style"===e.dataType),r.fire(new t.Event(e.dataType+"data",e))}),this.on("dataloading",function(e){r.fire(new t.Event(e.dataType+"dataloading",e))})}o&&(r.__proto__=o),r.prototype=Object.create(o&&o.prototype),r.prototype.constructor=r;var a={showTileBoundaries:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0}};return r.prototype._getMapId=function(){return this._mapId},r.prototype.addControl=function(e,i){if(void 0===i&&e.getDefaultPosition&&(i=e.getDefaultPosition()),void 0===i&&(i="top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var o=e.onAdd(this);this._controls.push(e);var r=this._controlPositions[i];return-1!==i.indexOf("bottom")?r.insertBefore(o,r.firstChild):r.appendChild(o),this},r.prototype.removeControl=function(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var i=this._controls.indexOf(e);return i>-1&&this._controls.splice(i,1),e.onRemove(this),this},r.prototype.resize=function(e){var i=this._containerDimensions(),o=i[0],r=i[1];return this._resizeCanvas(o,r),this.transform.resize(o,r),this.painter.resize(o,r),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e)).fire(new t.Event("resize",e)).fire(new t.Event("moveend",e)),this},r.prototype.getBounds=function(){return this.transform.getBounds()},r.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},r.prototype.setMaxBounds=function(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()},r.prototype.setMinZoom=function(t){if((t=null==t?0:t)>=0&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},r.prototype.getMinZoom=function(){return this.transform.minZoom},r.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},r.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},r.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update()},r.prototype.getMaxZoom=function(){return this.transform.maxZoom},r.prototype.project=function(e){return this.transform.locationPoint(t.LngLat.convert(e))},r.prototype.unproject=function(e){return this.transform.pointLocation(t.Point.convert(e))},r.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},r.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isZooming()},r.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},r.prototype.on=function(t,e,i){var r=this;if(void 0===i)return o.prototype.on.call(this,t,e);var a=function(){var o;if("mouseenter"===t||"mouseover"===t){var a=!1;return{layer:e,listener:i,delegates:{mousemove:function(o){var n=r.getLayer(e)?r.queryRenderedFeatures(o.point,{layers:[e]}):[];n.length?a||(a=!0,i.call(r,new ho(t,r,o.originalEvent,{features:n}))):a=!1},mouseout:function(){a=!1}}}}if("mouseleave"===t||"mouseout"===t){var n=!1;return{layer:e,listener:i,delegates:{mousemove:function(o){(r.getLayer(e)?r.queryRenderedFeatures(o.point,{layers:[e]}):[]).length?n=!0:n&&(n=!1,i.call(r,new ho(t,r,o.originalEvent)))},mouseout:function(e){n&&(n=!1,i.call(r,new ho(t,r,e.originalEvent)))}}}}return{layer:e,listener:i,delegates:(o={},o[t]=function(t){var o=r.getLayer(e)?r.queryRenderedFeatures(t.point,{layers:[e]}):[];o.length&&(t.features=o,i.call(r,t),delete t.features)},o)}}();for(var n in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(a),a.delegates)this.on(n,a.delegates[n]);return this},r.prototype.off=function(t,e,i){if(void 0===i)return o.prototype.off.call(this,t,e);if(this._delegatedListeners&&this._delegatedListeners[t])for(var r=this._delegatedListeners[t],a=0;a<r.length;a++){var n=r[a];if(n.layer===e&&n.listener===i){for(var s in n.delegates)this.off(s,n.delegates[s]);return r.splice(a,1),this}}return this},r.prototype.queryRenderedFeatures=function(e,i){if(!this.style)return[];var o;if(void 0!==i||void 0===e||e instanceof t.Point||Array.isArray(e)||(i=e,e=void 0),i=i||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||"number"==typeof e[0])o=[t.Point.convert(e)];else{var r=t.Point.convert(e[0]),a=t.Point.convert(e[1]);o=[r,new t.Point(a.x,r.y),a,new t.Point(r.x,a.y),r]}return this.style.queryRenderedFeatures(o,i,this.transform)},r.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},r.prototype.setStyle=function(t,e){return(!e||!1!==e.diff&&!e.localIdeographFontFamily)&&this.style&&t?(this._diffStyle(t,e),this):this._updateStyle(t,e)},r.prototype._updateStyle=function(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new Me(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)},r.prototype._diffStyle=function(e,i){var o=this;if("string"==typeof e){var r=t.normalizeStyleURL(e),a=this._transformRequest(r,t.ResourceType.Style);t.getJSON(a,function(e,r){e?o.fire(new t.ErrorEvent(e)):r&&o._updateDiff(r,i)})}else"object"==typeof e&&this._updateDiff(e,i)},r.prototype._updateDiff=function(e,i){try{this.style.setState(e)&&this._update(!0)}catch(o){t.warnOnce("Unable to perform style diff: "+(o.message||o.error||o)+".  Rebuilding the style from scratch."),this._updateStyle(e,i)}},r.prototype.getStyle=function(){if(this.style)return this.style.serialize()},r.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},r.prototype.addSource=function(t,e){return this.style.addSource(t,e),this._update(!0)},r.prototype.isSourceLoaded=function(e){var i=this.style&&this.style.sourceCaches[e];if(void 0!==i)return i.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+e+"'")))},r.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var i=t[e]._tiles;for(var o in i){var r=i[o];if("loaded"!==r.state&&"errored"!==r.state)return!1}}return!0},r.prototype.addSourceType=function(t,e,i){return this.style.addSourceType(t,e,i)},r.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0)},r.prototype.getSource=function(t){return this.style.getSource(t)},r.prototype.addImage=function(e,i,o){void 0===o&&(o={});var r=o.pixelRatio;void 0===r&&(r=1);var a=o.sdf;if(void 0===a&&(a=!1),i instanceof Do){var n=t.browser.getImageData(i),s=n.width,l=n.height,c=n.data;this.style.addImage(e,{data:new t.RGBAImage({width:s,height:l},c),pixelRatio:r,sdf:a})}else{if(void 0===i.width||void 0===i.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var u=i.width,h=i.height,p=i.data;this.style.addImage(e,{data:new t.RGBAImage({width:u,height:h},new Uint8Array(p)),pixelRatio:r,sdf:a})}},r.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},r.prototype.removeImage=function(t){this.style.removeImage(t)},r.prototype.loadImage=function(e,i){t.getImage(this._transformRequest(e,t.ResourceType.Image),i)},r.prototype.listImages=function(){return this.style.listImages()},r.prototype.addLayer=function(t,e){return this.style.addLayer(t,e),this._update(!0)},r.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0)},r.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0)},r.prototype.getLayer=function(t){return this.style.getLayer(t)},r.prototype.setFilter=function(t,e,i){return void 0===i&&(i={}),this.style.setFilter(t,e,i),this._update(!0)},r.prototype.setLayerZoomRange=function(t,e,i){return this.style.setLayerZoomRange(t,e,i),this._update(!0)},r.prototype.getFilter=function(t){return this.style.getFilter(t)},r.prototype.setPaintProperty=function(t,e,i,o){return void 0===o&&(o={}),this.style.setPaintProperty(t,e,i,o),this._update(!0)},r.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},r.prototype.setLayoutProperty=function(t,e,i,o){return void 0===o&&(o={}),this.style.setLayoutProperty(t,e,i,o),this._update(!0)},r.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},r.prototype.setLight=function(t,e){return void 0===e&&(e={}),this.style.setLight(t,e),this._update(!0)},r.prototype.getLight=function(){return this.style.getLight()},r.prototype.setFeatureState=function(t,e){return this.style.setFeatureState(t,e),this._update()},r.prototype.removeFeatureState=function(t,e){return this.style.removeFeatureState(t,e),this._update()},r.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},r.prototype.getContainer=function(){return this._container},r.prototype.getCanvasContainer=function(){return this._canvasContainer},r.prototype.getCanvas=function(){return this._canvas},r.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]},r.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},r.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=i.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=i.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=i.create("canvas","mapboxgl-canvas",e),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var o=this._containerDimensions();this._resizeCanvas(o[0],o[1]);var r=this._controlContainer=i.create("div","mapboxgl-control-container",t),a=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(t){a[t]=i.create("div","mapboxgl-ctrl-"+t,r)})},r.prototype._resizeCanvas=function(e,i){var o=t.window.devicePixelRatio||1;this._canvas.width=o*e,this._canvas.height=o*i,this._canvas.style.width=e+"px",this._canvas.style.height=i+"px"},r.prototype._setupPainter=function(){var i=t.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},e.webGLContextAttributes),o=this._canvas.getContext("webgl",i)||this._canvas.getContext("experimental-webgl",i);o?(this.painter=new ro(o,this.transform),t.webpSupported.testSupport(o)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},r.prototype._contextLost=function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))},r.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))},r.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},r.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this},r.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},r.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},r.prototype._render=function(){this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run();var e=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var i=this.transform.zoom,o=t.browser.now();this.style.zoomHistory.update(i,o);var r=new t.EvaluationParameters(i,{now:o,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),a=r.crossFadingFactor();1===a&&a===this._crossFadingFactor||(e=!0,this._crossFadingFactor=a),this.style.update(r)}return this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||e)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),this},r.prototype.remove=function(){this._hash&&this._hash.remove();for(var e=0,i=this._controls;e<i.length;e+=1)i[e].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var o=this.painter.context.gl.getExtension("WEBGL_lose_context");o&&o.loseContext(),ko(this._canvasContainer),ko(this._controlContainer),ko(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this.fire(new t.Event("remove"))},r.prototype.triggerRepaint=function(){var e=this;this.style&&!this._frame&&(this._frame=t.browser.frame(function(){e._frame=null,e._render()}))},r.prototype._onWindowOnline=function(){this._update()},r.prototype._onWindowResize=function(){this._trackResize&&this.resize()._update()},a.showTileBoundaries.get=function(){return!!this._showTileBoundaries},a.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},a.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},a.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},a.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},a.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},a.repaint.get=function(){return!!this._repaint},a.repaint.set=function(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())},a.vertices.get=function(){return!!this._vertices},a.vertices.set=function(t){this._vertices=t,this._update()},Object.defineProperties(r.prototype,a),r}(So);function ko(t){t.parentNode&&t.parentNode.removeChild(t)}var Bo={showCompass:!0,showZoom:!0},Oo=function(e){var o=this;this.options=t.extend({},Bo,e),this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this.options.showZoom&&(this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom in",function(){return o._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom out",function(){return o._map.zoomOut()})),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset bearing to north",function(){return o._map.resetNorth()}),this._compassArrow=i.create("span","mapboxgl-ctrl-compass-arrow",this._compass))};function Fo(e,i,o){if(e=new t.LngLat(e.lng,e.lat),i){var r=new t.LngLat(e.lng-360,e.lat),a=new t.LngLat(e.lng+360,e.lat),n=o.locationPoint(e).distSqr(i);o.locationPoint(r).distSqr(i)<n?e=r:o.locationPoint(a).distSqr(i)<n&&(e=a)}for(;Math.abs(e.lng-o.center.lng)>180;){var s=o.locationPoint(e);if(s.x>=0&&s.y>=0&&s.x<=o.width&&s.y<=o.height)break;e.lng>o.center.lng?e.lng-=360:e.lng+=360}return e}Oo.prototype._rotateCompassArrow=function(){var t="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=t},Oo.prototype.onAdd=function(t){return this._map=t,this.options.showCompass&&(this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new vo(t,{button:"left",element:this._compass}),i.addEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.enable()),this._container},Oo.prototype.onRemove=function(){i.remove(this._container),this.options.showCompass&&(this._map.off("rotate",this._rotateCompassArrow),i.removeEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.disable(),delete this._handler),delete this._map},Oo.prototype._createButton=function(t,e,o){var r=i.create("button",t,this._container);return r.type="button",r.title=e,r.setAttribute("aria-label",e),r.addEventListener("click",o),r};var Uo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function No(t,e,i){var o=t.classList;for(var r in Uo)o.remove("mapboxgl-"+i+"-anchor-"+r);o.add("mapboxgl-"+i+"-anchor-"+e)}var Zo,jo=function(e){function o(o,r){if(e.call(this),(o instanceof t.window.HTMLElement||r)&&(o=t.extend({element:o},r)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick"],this),this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._draggable=o&&o.draggable||!1,this._state="inactive",o&&o.element)this._element=o.element,this._offset=t.Point.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=i.create("div");var a=i.createNS("http://www.w3.org/2000/svg","svg");a.setAttributeNS(null,"height","41px"),a.setAttributeNS(null,"width","27px"),a.setAttributeNS(null,"viewBox","0 0 27 41");var n=i.createNS("http://www.w3.org/2000/svg","g");n.setAttributeNS(null,"stroke","none"),n.setAttributeNS(null,"stroke-width","1"),n.setAttributeNS(null,"fill","none"),n.setAttributeNS(null,"fill-rule","evenodd");var s=i.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");var l=i.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");for(var c=0,u=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];c<u.length;c+=1){var h=u[c],p=i.createNS("http://www.w3.org/2000/svg","ellipse");p.setAttributeNS(null,"opacity","0.04"),p.setAttributeNS(null,"cx","10.5"),p.setAttributeNS(null,"cy","5.80029008"),p.setAttributeNS(null,"rx",h.rx),p.setAttributeNS(null,"ry",h.ry),l.appendChild(p)}var d=i.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"fill",this._color);var _=i.createNS("http://www.w3.org/2000/svg","path");_.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),d.appendChild(_);var f=i.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"opacity","0.25"),f.setAttributeNS(null,"fill","#000000");var m=i.createNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),f.appendChild(m);var g=i.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"transform","translate(6.0, 7.0)"),g.setAttributeNS(null,"fill","#FFFFFF");var v=i.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"transform","translate(8.0, 8.0)");var y=i.createNS("http://www.w3.org/2000/svg","circle");y.setAttributeNS(null,"fill","#000000"),y.setAttributeNS(null,"opacity","0.25"),y.setAttributeNS(null,"cx","5.5"),y.setAttributeNS(null,"cy","5.5"),y.setAttributeNS(null,"r","5.4999962");var x=i.createNS("http://www.w3.org/2000/svg","circle");x.setAttributeNS(null,"fill","#FFFFFF"),x.setAttributeNS(null,"cx","5.5"),x.setAttributeNS(null,"cy","5.5"),x.setAttributeNS(null,"r","5.4999962"),v.appendChild(y),v.appendChild(x),s.appendChild(l),s.appendChild(d),s.appendChild(f),s.appendChild(g),s.appendChild(v),a.appendChild(s),this._element.appendChild(a),this._offset=t.Point.convert(o&&o.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._popup=null}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},o.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),delete this._map),i.remove(this._element),this._popup&&this._popup.remove(),this},o.prototype.getLngLat=function(){return this._lngLat},o.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},o.prototype.getElement=function(){return this._element},o.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat)}return this},o.prototype._onMapClick=function(t){var e=t.originalEvent.target,i=this._element;this._popup&&(e===i||i.contains(e))&&this.togglePopup()},o.prototype.getPopup=function(){return this._popup},o.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},o.prototype._update=function(t){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=Fo(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),t&&"moveend"!==t.type||(this._pos=this._pos.round()),i.setTransform(this._element,Uo[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px)"),No(this._element,this._anchor,"marker"))},o.prototype.getOffset=function(){return this._offset},o.prototype.setOffset=function(e){return this._offset=t.Point.convert(e),this._update(),this},o.prototype._onMove=function(e){this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))},o.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"},o.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},o.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},o.prototype.isDraggable=function(){return this._draggable},o}(t.Evented),Vo={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},qo=function(e){function o(i){e.call(this),this.options=t.extend({},Vo,i),t.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.onAdd=function(e){var o;return this._map=e,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),o=this._setupUI,void 0!==Zo?o(Zo):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then(function(t){Zo="denied"!==t.state,o(Zo)}):(Zo=!!t.window.navigator.geolocation,o(Zo)),this._container},o.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),i.remove(this._container),this._map=void 0},o.prototype._onSuccess=function(e){if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()},o.prototype._updateCamera=function(e){var i=new t.LngLat(e.coords.longitude,e.coords.latitude),o=e.coords.accuracy;this._map.fitBounds(i.toBounds(o),this.options.fitBoundsOptions,{geolocateSource:!0})},o.prototype._updateMarker=function(t){t?this._userLocationDotMarker.setLngLat([t.coords.longitude,t.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},o.prototype._onError=function(e){if(this.options.trackUserLocation)if(1===e.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()},o.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},o.prototype._setupUI=function(e){var o=this;!1!==e?(this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this._geolocateButton=i.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=i.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new jo(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(e){e.geolocateSource||"ACTIVE_LOCK"!==o._watchState||(o._watchState="BACKGROUND",o._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),o._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),o.fire(new t.Event("trackuserlocationend")))})):t.warnOnce("Geolocation support is not available, the GeolocateControl will not be visible.")},o.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},o.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},o}(t.Evented),Go={maxWidth:100,unit:"metric"},Wo=function(e){this.options=t.extend({},Go,e),t.bindAll(["_onMove","setUnit"],this)};function Xo(t,e,i){var o,r,a,n,s,l,c=i&&i.maxWidth||100,u=t._container.clientHeight/2,h=(o=t.unproject([0,u]),r=t.unproject([c,u]),a=Math.PI/180,n=o.lat*a,s=r.lat*a,l=Math.sin(n)*Math.sin(s)+Math.cos(n)*Math.cos(s)*Math.cos((r.lng-o.lng)*a),6371e3*Math.acos(Math.min(l,1)));if(i&&"imperial"===i.unit){var p=3.2808*h;p>5280?Ho(e,c,p/5280,"mi"):Ho(e,c,p,"ft")}else i&&"nautical"===i.unit?Ho(e,c,h/1852,"nm"):Ho(e,c,h,"m")}function Ho(t,e,i,o){var r,a,n,s=(r=i,(a=Math.pow(10,(""+Math.floor(r)).length-1))*(n=(n=r/a)>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(t){var e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(n))),l=s/i;"m"===o&&s>=1e3&&(s/=1e3,o="km"),t.style.width=e*l+"px",t.innerHTML=s+o}Wo.prototype.getDefaultPosition=function(){return"bottom-left"},Wo.prototype._onMove=function(){Xo(this._map,this._container,this.options)},Wo.prototype.onAdd=function(t){return this._map=t,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Wo.prototype.onRemove=function(){i.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Wo.prototype.setUnit=function(t){this.options.unit=t,Xo(this._map,this._container,this.options)};var Ko=function(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl"};Ko.prototype.onAdd=function(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=i.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Ko.prototype.onRemove=function(){i.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Ko.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},Ko.prototype._setupUI=function(){var e=this._fullscreenButton=i.create("button",this._className+"-icon "+this._className+"-fullscreen",this._controlContainer);e.setAttribute("aria-label","Toggle fullscreen"),e.type="button",this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Ko.prototype._isFullscreen=function(){return this._fullscreen},Ko.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"))},Ko.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Yo={closeButton:!0,closeOnClick:!0,className:""},Jo=function(e){function o(i){e.call(this),this.options=t.extend(Object.create(Yo),i),t.bindAll(["_update","_onClickClose","remove"],this)}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.addTo=function(e){return this._map=e,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._map.on("remove",this.remove),this._update(),this.fire(new t.Event("open")),this},o.prototype.isOpen=function(){return!!this._map},o.prototype.remove=function(){return this._content&&i.remove(this._content),this._container&&(i.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),this._map.off("remove",this.remove),delete this._map),this.fire(new t.Event("close")),this},o.prototype.getLngLat=function(){return this._lngLat},o.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._update(),this},o.prototype.setText=function(e){return this.setDOMContent(t.window.document.createTextNode(e))},o.prototype.setHTML=function(e){var i,o=t.window.document.createDocumentFragment(),r=t.window.document.createElement("body");for(r.innerHTML=e;i=r.firstChild;)o.appendChild(i);return this.setDOMContent(o)},o.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},o.prototype._createContent=function(){this._content&&i.remove(this._content),this._content=i.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=i.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},o.prototype._update=function(){var e=this;if(this._map&&this._lngLat&&this._content){this._container||(this._container=i.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=i.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(t){return e._container.classList.add(t)})),this._map.transform.renderWorldCopies&&(this._lngLat=Fo(this._lngLat,this._pos,this._map.transform));var o=this._pos=this._map.project(this._lngLat),r=this.options.anchor,a=function e(i){if(i){if("number"==typeof i){var o=Math.round(Math.sqrt(.5*Math.pow(i,2)));return{center:new t.Point(0,0),top:new t.Point(0,i),"top-left":new t.Point(o,o),"top-right":new t.Point(-o,o),bottom:new t.Point(0,-i),"bottom-left":new t.Point(o,-o),"bottom-right":new t.Point(-o,-o),left:new t.Point(i,0),right:new t.Point(-i,0)}}if(i instanceof t.Point||Array.isArray(i)){var r=t.Point.convert(i);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:t.Point.convert(i.center||[0,0]),top:t.Point.convert(i.top||[0,0]),"top-left":t.Point.convert(i["top-left"]||[0,0]),"top-right":t.Point.convert(i["top-right"]||[0,0]),bottom:t.Point.convert(i.bottom||[0,0]),"bottom-left":t.Point.convert(i["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(i["bottom-right"]||[0,0]),left:t.Point.convert(i.left||[0,0]),right:t.Point.convert(i.right||[0,0])}}return e(new t.Point(0,0))}(this.options.offset);if(!r){var n,s=this._container.offsetWidth,l=this._container.offsetHeight;n=o.y+a.bottom.y<l?["top"]:o.y>this._map.transform.height-l?["bottom"]:[],o.x<s/2?n.push("left"):o.x>this._map.transform.width-s/2&&n.push("right"),r=0===n.length?"bottom":n.join("-")}var c=o.add(a[r]).round();i.setTransform(this._container,Uo[r]+" translate("+c.x+"px,"+c.y+"px)"),No(this._container,r,"popup")}},o.prototype._onClickClose=function(){this.remove()},o}(t.Evented),Qo={version:t.version,supported:e,setRTLTextPlugin:t.setRTLTextPlugin,Map:Ao,NavigationControl:Oo,GeolocateControl:qo,AttributionControl:zo,ScaleControl:Wo,FullscreenControl:Ko,Popup:Jo,Marker:jo,Style:Me,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return Pt.workerCount},set workerCount(t){Pt.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},workerUrl:""};return Qo}),mapboxgl}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkVisibilityConstraints=function(props){var constraints=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_mapState.MAPBOX_LIMITS;for(var constraintName in constraints){var type=constraintName.slice(0,3),propName=(s=constraintName.slice(3))[0].toLowerCase()+s.slice(1);if("min"===type&&props[propName]<constraints[constraintName])return!1;if("max"===type&&props[propName]>constraints[constraintName])return!1}var s;return!0};var _mapState=__webpack_require__(74)},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf3=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_assertThisInitialized2=_interopRequireDefault(__webpack_require__(12)),_defineProperty2=_interopRequireDefault(__webpack_require__(6)),_assert=_interopRequireDefault(__webpack_require__(117)),_transitionInterpolator=_interopRequireDefault(__webpack_require__(228)),_viewportMercatorProject=__webpack_require__(37),_transitionUtils=__webpack_require__(393),_mathUtils=__webpack_require__(147),VIEWPORT_TRANSITION_PROPS=["longitude","latitude","zoom","bearing","pitch"],REQUIRED_PROPS=["latitude","longitude","zoom","width","height"],LINEARLY_INTERPOLATED_PROPS=["bearing","pitch"],ViewportFlyToInterpolator=function(_TransitionInterpolat){function ViewportFlyToInterpolator(){var _getPrototypeOf2,_this;(0,_classCallCheck2.default)(this,ViewportFlyToInterpolator);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=(0,_possibleConstructorReturn2.default)(this,(_getPrototypeOf2=(0,_getPrototypeOf3.default)(ViewportFlyToInterpolator)).call.apply(_getPrototypeOf2,[this].concat(args))),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"propNames",VIEWPORT_TRANSITION_PROPS),_this}return(0,_inherits2.default)(ViewportFlyToInterpolator,_TransitionInterpolat),(0,_createClass2.default)(ViewportFlyToInterpolator,[{key:"initializeProps",value:function(startProps,endProps){for(var startViewportProps={},endViewportProps={},_i=0;_i<REQUIRED_PROPS.length;_i++){var key=REQUIRED_PROPS[_i],startValue=startProps[key],endValue=endProps[key];(0,_assert.default)((0,_transitionUtils.isValid)(startValue)&&(0,_transitionUtils.isValid)(endValue),"".concat(key," must be supplied for transition")),startViewportProps[key]=startValue,endViewportProps[key]=(0,_transitionUtils.getEndValueByShortestPath)(key,startValue,endValue)}for(var _i2=0;_i2<LINEARLY_INTERPOLATED_PROPS.length;_i2++){var _key2=LINEARLY_INTERPOLATED_PROPS[_i2],_startValue=startProps[_key2]||0,_endValue=endProps[_key2]||0;startViewportProps[_key2]=_startValue,endViewportProps[_key2]=(0,_transitionUtils.getEndValueByShortestPath)(_key2,_startValue,_endValue)}return{start:startViewportProps,end:endViewportProps}}},{key:"interpolateProps",value:function(startProps,endProps,t){for(var viewport=(0,_viewportMercatorProject.flyToViewport)(startProps,endProps,t),_i3=0;_i3<LINEARLY_INTERPOLATED_PROPS.length;_i3++){var key=LINEARLY_INTERPOLATED_PROPS[_i3];viewport[key]=(0,_mathUtils.lerp)(startProps[key],endProps[key],t)}return viewport}}]),ViewportFlyToInterpolator}(_transitionInterpolator.default);exports.default=ViewportFlyToInterpolator},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _slicedToArray2=_interopRequireDefault(__webpack_require__(11)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_assertThisInitialized2=_interopRequireDefault(__webpack_require__(12)),_defineProperty2=_interopRequireDefault(__webpack_require__(6)),_viewportMercatorProject=_interopRequireDefault(__webpack_require__(37)),_assert=_interopRequireDefault(__webpack_require__(117)),_transitionInterpolator=_interopRequireDefault(__webpack_require__(228)),_transitionUtils=__webpack_require__(393),_mathUtils=__webpack_require__(147),VIEWPORT_TRANSITION_PROPS=["longitude","latitude","zoom","bearing","pitch"],LinearInterpolator=function(_TransitionInterpolat){function LinearInterpolator(){var _this,opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,_classCallCheck2.default)(this,LinearInterpolator),_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(LinearInterpolator).call(this)),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"around",void 0),Array.isArray(opts)&&(opts={transitionProps:opts}),_this.propNames=opts.transitionProps||VIEWPORT_TRANSITION_PROPS,opts.around&&(_this.around=opts.around),_this}return(0,_inherits2.default)(LinearInterpolator,_TransitionInterpolat),(0,_createClass2.default)(LinearInterpolator,[{key:"initializeProps",value:function(startProps,endProps){var startViewportProps={},endViewportProps={};if(this.around){startViewportProps.around=this.around;var aroundLngLat=new _viewportMercatorProject.default(startProps).unproject(this.around);Object.assign(endViewportProps,endProps,{around:new _viewportMercatorProject.default(endProps).project(aroundLngLat),aroundLngLat:aroundLngLat})}var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.propNames[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var key=_step.value,startValue=startProps[key],endValue=endProps[key];(0,_assert.default)((0,_transitionUtils.isValid)(startValue)&&(0,_transitionUtils.isValid)(endValue),"".concat(key," must be supplied for transition")),startViewportProps[key]=startValue,endViewportProps[key]=(0,_transitionUtils.getEndValueByShortestPath)(key,startValue,endValue)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return{start:startViewportProps,end:endViewportProps}}},{key:"interpolateProps",value:function(startProps,endProps,t){var viewport={},_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=this.propNames[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var key=_step2.value;viewport[key]=(0,_mathUtils.lerp)(startProps[key],endProps[key],t)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}if(endProps.around){var _getMapCenterByLngLat=new _viewportMercatorProject.default(Object.assign({},endProps,viewport)).getMapCenterByLngLatPosition({lngLat:endProps.aroundLngLat,pos:(0,_mathUtils.lerp)(startProps.around,endProps.around,t)}),_getMapCenterByLngLat2=(0,_slicedToArray2.default)(_getMapCenterByLngLat,2),longitude=_getMapCenterByLngLat2[0],latitude=_getMapCenterByLngLat2[1];viewport.longitude=longitude,viewport.latitude=latitude}return viewport}}]),LinearInterpolator}(_transitionInterpolator.default);exports.default=LinearInterpolator},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _slicedToArray2=_interopRequireDefault(__webpack_require__(11)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_get2=_interopRequireDefault(__webpack_require__(16)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_assertThisInitialized2=_interopRequireDefault(__webpack_require__(12)),_defineProperty2=_interopRequireDefault(__webpack_require__(6)),_propTypes=_interopRequireDefault(__webpack_require__(32)),_baseControl=_interopRequireDefault(__webpack_require__(53)),propTypes=Object.assign({},_baseControl.default.propTypes,{draggable:_propTypes.default.bool,onDrag:_propTypes.default.func,onDragEnd:_propTypes.default.func,onDragStart:_propTypes.default.func,offsetLeft:_propTypes.default.number,offsetTop:_propTypes.default.number}),defaultProps=Object.assign({},_baseControl.default.defaultProps,{draggable:!1}),DraggableControl=function(_BaseControl){function DraggableControl(props){var _this;return(0,_classCallCheck2.default)(this,DraggableControl),_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(DraggableControl).call(this,props)),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_onDragStart",function(event){var _this$props=_this.props,draggable=_this$props.draggable,captureDrag=_this$props.captureDrag;if((draggable||captureDrag)&&event.stopPropagation(),draggable){var dragPos=_this._getDragEventPosition(event),dragOffset=_this._getDragEventOffset(event);_this.setState({dragPos:dragPos,dragOffset:dragOffset}),_this._setupDragEvents(),_this.props.onDragStart&&(event.lngLat=_this._getDragLngLat(dragPos,dragOffset),_this.props.onDragStart(event))}}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_onDrag",function(event){event.stopPropagation();var dragPos=_this._getDragEventPosition(event);_this.setState({dragPos:dragPos}),_this.props.onDrag&&(event.lngLat=_this._getDragLngLat(dragPos,_this.state.dragOffset),_this.props.onDrag(event))}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_onDragEnd",function(event){var _this$state=_this.state,dragPos=_this$state.dragPos,dragOffset=_this$state.dragOffset;event.stopPropagation(),_this.setState({dragPos:null,dragOffset:null}),_this._removeDragEvents(),_this.props.onDragEnd&&(event.lngLat=_this._getDragLngLat(dragPos,dragOffset),_this.props.onDragEnd(event))}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_onDragCancel",function(event){event.stopPropagation(),_this.setState({dragPos:null,dragOffset:null}),_this._removeDragEvents()}),_this.state={dragPos:null,dragOffset:null},_this}return(0,_inherits2.default)(DraggableControl,_BaseControl),(0,_createClass2.default)(DraggableControl,[{key:"componentWillUnmount",value:function(){(0,_get2.default)((0,_getPrototypeOf2.default)(DraggableControl.prototype),"componentWillUnmount",this).call(this),this._removeDragEvents()}},{key:"_setupDragEvents",value:function(){var eventManager=this._context.eventManager;eventManager&&(this._dragEvents={panmove:this._onDrag,panend:this._onDragEnd,pancancel:this._onDragCancel},eventManager.on(this._dragEvents))}},{key:"_removeDragEvents",value:function(){var eventManager=this._context.eventManager;eventManager&&this._dragEvents&&(eventManager.off(this._dragEvents),this._dragEvents=null)}},{key:"_getDragEventPosition",value:function(event){var _event$offsetCenter=event.offsetCenter;return[_event$offsetCenter.x,_event$offsetCenter.y]}},{key:"_getDragEventOffset",value:function(event){var _event$center=event.center,x=_event$center.x,y=_event$center.y,rect=this._containerRef.current.getBoundingClientRect();return[rect.left-x,rect.top-y]}},{key:"_getDraggedPosition",value:function(dragPos,dragOffset){return[dragPos[0]+dragOffset[0],dragPos[1]+dragOffset[1]]}},{key:"_getDragLngLat",value:function(dragPos,dragOffset){var _this$props2=this.props,offsetLeft=_this$props2.offsetLeft,offsetTop=_this$props2.offsetTop,_this$_getDraggedPosi=this._getDraggedPosition(dragPos,dragOffset),_this$_getDraggedPosi2=(0,_slicedToArray2.default)(_this$_getDraggedPosi,2),x=_this$_getDraggedPosi2[0],y=_this$_getDraggedPosi2[1];return this._context.viewport.unproject([x-offsetLeft,y-offsetTop])}}]),DraggableControl}(_baseControl.default);exports.default=DraggableControl,(0,_defineProperty2.default)(DraggableControl,"propTypes",propTypes),(0,_defineProperty2.default)(DraggableControl,"defaultProps",defaultProps)},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _slicedToArray2=_interopRequireDefault(__webpack_require__(11)),_classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_get2=_interopRequireDefault(__webpack_require__(16)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_assertThisInitialized2=_interopRequireDefault(__webpack_require__(12)),_defineProperty2=_interopRequireDefault(__webpack_require__(6)),_react=__webpack_require__(8),_propTypes=_interopRequireDefault(__webpack_require__(32)),_baseControl=_interopRequireDefault(__webpack_require__(53)),_dynamicPosition=__webpack_require__(884),propTypes=Object.assign({},_baseControl.default.propTypes,{className:_propTypes.default.string,longitude:_propTypes.default.number.isRequired,latitude:_propTypes.default.number.isRequired,altitude:_propTypes.default.number,offsetLeft:_propTypes.default.number,offsetTop:_propTypes.default.number,tipSize:_propTypes.default.number,closeButton:_propTypes.default.bool,closeOnClick:_propTypes.default.bool,anchor:_propTypes.default.oneOf(Object.keys(_dynamicPosition.ANCHOR_POSITION)),dynamicPosition:_propTypes.default.bool,sortByDepth:_propTypes.default.bool,onClose:_propTypes.default.func}),defaultProps=Object.assign({},_baseControl.default.defaultProps,{className:"",altitude:0,offsetLeft:0,offsetTop:0,tipSize:10,anchor:"bottom",dynamicPosition:!0,sortByDepth:!1,closeButton:!0,closeOnClick:!0,onClose:function(){}}),Popup=function(_BaseControl){function Popup(props){var _this;return(0,_classCallCheck2.default)(this,Popup),_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Popup).call(this,props)),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_onClick",function(evt){_this.props.captureClick&&evt.stopPropagation(),"click"!==evt.type||!_this.props.closeOnClick&&"mapboxgl-popup-close-button"!==evt.target.className||_this.props.onClose()}),_this._closeOnClick=!1,_this._contentRef=(0,_react.createRef)(),_this}return(0,_inherits2.default)(Popup,_BaseControl),(0,_createClass2.default)(Popup,[{key:"componentDidMount",value:function(){(0,_get2.default)((0,_getPrototypeOf2.default)(Popup.prototype),"componentDidMount",this).call(this),this.forceUpdate()}},{key:"_getPosition",value:function(x,y){var viewport=this._context.viewport,_this$props=this.props,anchor=_this$props.anchor,dynamicPosition=_this$props.dynamicPosition,tipSize=_this$props.tipSize,content=this._contentRef.current;return content&&dynamicPosition?(0,_dynamicPosition.getDynamicPosition)({x:x,y:y,anchor:anchor,padding:tipSize,width:viewport.width,height:viewport.height,selfWidth:content.clientWidth,selfHeight:content.clientHeight}):anchor}},{key:"_getContainerStyle",value:function(x,y,z,positionType){var viewport=this._context.viewport,_this$props2=this.props,offsetLeft=_this$props2.offsetLeft,offsetTop=_this$props2.offsetTop,sortByDepth=_this$props2.sortByDepth,anchorPosition=_dynamicPosition.ANCHOR_POSITION[positionType],style={position:"absolute",left:x+offsetLeft,top:y+offsetTop,transform:"translate(".concat(100*-anchorPosition.x,"%, ").concat(100*-anchorPosition.y,"%)")};return sortByDepth?(z>1||z<-1||x<0||x>viewport.width||y<0||y>viewport.height?style.display="none":style.zIndex=Math.floor((1-z)/2*1e5),style):style}},{key:"_renderTip",value:function(positionType){var tipSize=this.props.tipSize;return(0,_react.createElement)("div",{key:"tip",className:"mapboxgl-popup-tip",style:{borderWidth:tipSize}})}},{key:"_renderContent",value:function(){var _this$props3=this.props,closeButton=_this$props3.closeButton,children=_this$props3.children,onClick=this._context.eventManager?null:this._onClick;return(0,_react.createElement)("div",{key:"content",ref:this._contentRef,className:"mapboxgl-popup-content",onClick:onClick},[closeButton&&(0,_react.createElement)("button",{key:"close-button",className:"mapboxgl-popup-close-button",type:"button"},"×"),children])}},{key:"_render",value:function(){var _this$props4=this.props,className=_this$props4.className,longitude=_this$props4.longitude,latitude=_this$props4.latitude,altitude=_this$props4.altitude,_this$_context$viewpo=this._context.viewport.project([longitude,latitude,altitude]),_this$_context$viewpo2=(0,_slicedToArray2.default)(_this$_context$viewpo,3),x=_this$_context$viewpo2[0],y=_this$_context$viewpo2[1],z=_this$_context$viewpo2[2],positionType=this._getPosition(x,y),containerStyle=this._getContainerStyle(x,y,z,positionType);return(0,_react.createElement)("div",{className:"mapboxgl-popup mapboxgl-popup-anchor-".concat(positionType," ").concat(className),style:containerStyle,ref:this._containerRef},[this._renderTip(positionType),this._renderContent()])}}]),Popup}(_baseControl.default);exports.default=Popup,(0,_defineProperty2.default)(Popup,"propTypes",propTypes),(0,_defineProperty2.default)(Popup,"defaultProps",defaultProps)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDynamicPosition=function(_ref){var x=_ref.x,y=_ref.y,width=_ref.width,height=_ref.height,selfWidth=_ref.selfWidth,selfHeight=_ref.selfHeight,anchor=_ref.anchor,_ref$padding=_ref.padding,padding=void 0===_ref$padding?0:_ref$padding,_ANCHOR_POSITION$anch=ANCHOR_POSITION[anchor],anchorX=_ANCHOR_POSITION$anch.x,anchorY=_ANCHOR_POSITION$anch.y,top=y-anchorY*selfHeight,bottom=top+selfHeight;if(top<padding)for(;top<padding&&anchorY>=.5;)anchorY-=.5,top+=.5*selfHeight;else if(bottom>height-padding)for(;bottom>height-padding&&anchorY<=.5;)anchorY+=.5,bottom-=.5*selfHeight;var left=x-anchorX*selfWidth,right=left+selfWidth,xStep=.5;.5===anchorY&&(anchorX=Math.floor(anchorX),xStep=1);if(left<padding)for(;left<padding&&anchorX>=xStep;)anchorX-=xStep,left+=xStep*selfWidth;else if(right>width-padding)for(;right>width-padding&&anchorX<=1-xStep;)anchorX+=xStep,right-=xStep*selfWidth;return ANCHOR_TYPES.find(function(positionType){var anchorPosition=ANCHOR_POSITION[positionType];return anchorPosition.x===anchorX&&anchorPosition.y===anchorY})||anchor},exports.ANCHOR_POSITION=void 0;var ANCHOR_POSITION={top:{x:.5,y:0},"top-left":{x:0,y:0},"top-right":{x:1,y:0},bottom:{x:.5,y:1},"bottom-left":{x:0,y:1},"bottom-right":{x:1,y:1},left:{x:0,y:.5},right:{x:1,y:.5}};exports.ANCHOR_POSITION=ANCHOR_POSITION;var ANCHOR_TYPES=Object.keys(ANCHOR_POSITION)},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_assertThisInitialized2=_interopRequireDefault(__webpack_require__(12)),_defineProperty2=_interopRequireDefault(__webpack_require__(6)),_globals=__webpack_require__(226),_propTypes=_interopRequireDefault(__webpack_require__(32)),_baseControl=_interopRequireDefault(__webpack_require__(53)),_react=__webpack_require__(8),_mapboxgl=_interopRequireDefault(__webpack_require__(227)),propTypes=Object.assign({},_baseControl.default.propTypes,{className:_propTypes.default.string,container:_propTypes.default.object}),defaultProps=Object.assign({},_baseControl.default.defaultProps,{className:"",container:null}),FullscreenControl=function(_BaseControl){function FullscreenControl(props){var _this;return(0,_classCallCheck2.default)(this,FullscreenControl),_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(FullscreenControl).call(this,props)),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_onFullscreenChange",function(){var nextState=!_this._mapboxFullscreenControl._fullscreen;_this._mapboxFullscreenControl._fullscreen=nextState,_this.setState({isFullscreen:nextState})}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_onClickFullscreen",function(){_this._mapboxFullscreenControl._onClickFullscreen()}),_this._mapboxFullscreenControl=null,_this.state={isFullscreen:!1},_this}return(0,_inherits2.default)(FullscreenControl,_BaseControl),(0,_createClass2.default)(FullscreenControl,[{key:"componentDidMount",value:function(){var container=this.props.container||this._context.mapContainer;this._mapboxFullscreenControl=new _mapboxgl.default.FullscreenControl({container:container}),this.setState({showButton:this._mapboxFullscreenControl._checkFullscreenSupport()}),_globals.document.addEventListener(this._mapboxFullscreenControl._fullscreenchange,this._onFullscreenChange)}},{key:"componentWillUnmount",value:function(){_globals.document.removeEventListener(this._mapboxFullscreenControl._fullscreenchange,this._onFullscreenChange)}},{key:"_renderButton",value:function(type,label,callback,children){return(0,_react.createElement)("button",{key:type,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-".concat(type),type:"button",title:label,onClick:callback,children:children})}},{key:"_render",value:function(){if(!this.state.showButton)return null;var className=this.props.className,type=this.state.isFullscreen?"shrink":"fullscreen";return(0,_react.createElement)("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group ".concat(className),ref:this._containerRef},[this._renderButton(type,"Toggle fullscreen",this._onClickFullscreen)])}}]),FullscreenControl}(_baseControl.default);exports.default=FullscreenControl,(0,_defineProperty2.default)(FullscreenControl,"propTypes",propTypes),(0,_defineProperty2.default)(FullscreenControl,"defaultProps",defaultProps)},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_assertThisInitialized2=_interopRequireDefault(__webpack_require__(12)),_defineProperty2=_interopRequireDefault(__webpack_require__(6)),_react=__webpack_require__(8),_propTypes=_interopRequireDefault(__webpack_require__(32)),_viewportMercatorProject=_interopRequireDefault(__webpack_require__(37)),_mapboxgl=_interopRequireDefault(__webpack_require__(227)),_baseControl=_interopRequireDefault(__webpack_require__(53)),_marker=_interopRequireDefault(__webpack_require__(395)),_mapState=_interopRequireDefault(__webpack_require__(74)),_transitionManager=_interopRequireDefault(__webpack_require__(149)),_geolocateUtils=__webpack_require__(887),LINEAR_TRANSITION_PROPS=Object.assign({},_transitionManager.default.defaultProps,{transitionDuration:500}),propTypes=Object.assign({},_baseControl.default.propTypes,{className:_propTypes.default.string,style:_propTypes.default.object,positionOptions:_propTypes.default.object,fitBoundsOptions:_propTypes.default.object,trackUserLocation:_propTypes.default.bool,showUserLocation:_propTypes.default.bool,onViewStateChange:_propTypes.default.func,onViewportChange:_propTypes.default.func}),defaultProps=Object.assign({},_baseControl.default.defaultProps,{className:"",style:{},positionOptions:null,fitBoundsOptions:null,trackUserLocation:!1,showUserLocation:!0,onViewStateChange:function(){},onViewportChange:function(){}}),GeolocateControl=function(_BaseControl){function GeolocateControl(props){var _this;return(0,_classCallCheck2.default)(this,GeolocateControl),_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(GeolocateControl).call(this,props)),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_containerRef",(0,_react.createRef)()),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_geolocateButtonRef",(0,_react.createRef)()),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_markerRef",(0,_react.createRef)()),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_setupMapboxGeolocateControl",function(supportsGeolocation){if(supportsGeolocation){var controlOptions={};["positionOptions","fitBoundsOptions","trackUserLocation","showUserLocation"].forEach(function(prop){prop in _this.props&&null!==_this.props[prop]&&(controlOptions[prop]=_this.props[prop])}),_this._mapboxGeolocateControl=new _mapboxgl.default.GeolocateControl(controlOptions),_this._mapboxGeolocateControl._watchState="OFF",_this._mapboxGeolocateControl._geolocateButton=_this._geolocateButtonRef.current,_this._mapboxGeolocateControl._updateMarker=_this._updateMarker,_this._mapboxGeolocateControl._updateCamera=_this._updateCamera,_this._mapboxGeolocateControl._setup=!0}else console.warn("Geolocation support is not available, the GeolocateControl will not be visible.")}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_onClickGeolocate",function(){return _this._mapboxGeolocateControl.trigger()}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_updateMarker",function(position){position&&_this.setState({markerPosition:position.coords})}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_getBounds",function(position){var center=new _mapboxgl.default.LngLat(position.coords.longitude,position.coords.latitude),radius=position.coords.accuracy,bounds=center.toBounds(radius);return[[bounds._ne.lng,bounds._ne.lat],[bounds._sw.lng,bounds._sw.lat]]}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_updateCamera",function(position){var viewport=_this._context.viewport,bounds=_this._getBounds(position),_fitBounds=new _viewportMercatorProject.default(viewport).fitBounds(bounds),longitude=_fitBounds.longitude,latitude=_fitBounds.latitude,zoom=_fitBounds.zoom,newViewState=Object.assign({},viewport,{longitude:longitude,latitude:latitude,zoom:zoom}),mapState=new _mapState.default(newViewState),viewState=Object.assign({},mapState.getViewportProps(),LINEAR_TRANSITION_PROPS);_this.props.onViewStateChange({viewState:viewState}),_this.props.onViewportChange(viewState)}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_renderButton",function(type,label,callback,children){return(0,_react.createElement)("button",{key:type,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-".concat(type),ref:_this._geolocateButtonRef,type:"button",title:label,onClick:callback,children:children})}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_renderMarker",function(){var showUserLocation=_this.props.showUserLocation,markerPosition=_this.state.markerPosition;return showUserLocation&&markerPosition?(0,_react.createElement)(_marker.default,{key:"location-maker",ref:_this._markerRef,className:"mapboxgl-user-location-dot",longitude:markerPosition.longitude,latitude:markerPosition.latitude,onContextMenu:function(e){return e.preventDefault()},captureDrag:!1,captureDoubleClick:!1}):null}),_this.state={supportsGeolocation:null,markerPosition:null},_this}return(0,_inherits2.default)(GeolocateControl,_BaseControl),(0,_createClass2.default)(GeolocateControl,[{key:"componentDidMount",value:function(){var _this2=this;(0,_geolocateUtils.isGeolocationSupported)().then(function(result){_this2.setState({supportsGeolocation:result}),_this2._setupMapboxGeolocateControl(result)})}},{key:"componentDidUpdate",value:function(){var markerRef=this._markerRef.current;this._mapboxGeolocateControl&&markerRef&&(this._mapboxGeolocateControl._dotElement=markerRef._containerRef.current)}},{key:"componentWillUnmount",value:function(){var geolocationWatchID=this._mapboxGeolocateControl._geolocationWatchID;void 0!==geolocationWatchID&&(window.navigator.geolocation.clearWatch(geolocationWatchID),this._mapboxGeolocateControl._geolocationWatchID=void 0)}},{key:"_render",value:function(){if(!this.state.supportsGeolocation)return null;var _this$props=this.props,className=_this$props.className,style=_this$props.style;return(0,_react.createElement)("div",null,[this._renderMarker(),(0,_react.createElement)("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group ".concat(className),ref:this._containerRef,style:style,onContextMenu:function(e){return e.preventDefault()}},this._renderButton("geolocate","Geolocate",this._onClickGeolocate))])}}]),GeolocateControl}(_baseControl.default);exports.default=GeolocateControl,(0,_defineProperty2.default)(GeolocateControl,"propTypes",propTypes),(0,_defineProperty2.default)(GeolocateControl,"defaultProps",defaultProps)},function(module,exports,__webpack_require__){"use strict";var supported;Object.defineProperty(exports,"__esModule",{value:!0}),exports.isGeolocationSupported=function(){if(void 0!==supported)return Promise.resolve(supported);if(void 0!==window.navigator.permissions)return window.navigator.permissions.query({name:"geolocation"}).then(function(p){return supported="denied"!==p.state});return supported=Boolean(window.navigator.geolocation),Promise.resolve(supported)}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_assertThisInitialized2=_interopRequireDefault(__webpack_require__(12)),_defineProperty2=_interopRequireDefault(__webpack_require__(6)),_react=__webpack_require__(8),_propTypes=_interopRequireDefault(__webpack_require__(32)),_baseControl=_interopRequireDefault(__webpack_require__(53)),_mapState=_interopRequireDefault(__webpack_require__(74)),_mapController=__webpack_require__(229),_deprecateWarn=_interopRequireDefault(__webpack_require__(394)),propTypes=Object.assign({},_baseControl.default.propTypes,{className:_propTypes.default.string,onViewStateChange:_propTypes.default.func,onViewportChange:_propTypes.default.func,showCompass:_propTypes.default.bool,showZoom:_propTypes.default.bool}),defaultProps=Object.assign({},_baseControl.default.defaultProps,{className:"",onViewStateChange:function(){},onViewportChange:function(){},showCompass:!0,showZoom:!0}),NavigationControl=function(_BaseControl){function NavigationControl(props){var _this;return(0,_classCallCheck2.default)(this,NavigationControl),_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(NavigationControl).call(this,props)),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_onZoomIn",function(){_this._updateViewport({zoom:_this._context.viewport.zoom+1})}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_onZoomOut",function(){_this._updateViewport({zoom:_this._context.viewport.zoom-1})}),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_onResetNorth",function(){_this._updateViewport({bearing:0,pitch:0})}),(0,_deprecateWarn.default)(props),_this}return(0,_inherits2.default)(NavigationControl,_BaseControl),(0,_createClass2.default)(NavigationControl,[{key:"_updateViewport",value:function(opts){var viewport=this._context.viewport,mapState=new _mapState.default(Object.assign({},viewport,opts)),viewState=Object.assign({},mapState.getViewportProps(),_mapController.LINEAR_TRANSITION_PROPS);this.props.onViewStateChange({viewState:viewState}),this.props.onViewportChange(viewState)}},{key:"_renderCompass",value:function(){var bearing=this._context.viewport.bearing;return(0,_react.createElement)("span",{className:"mapboxgl-ctrl-compass-arrow",style:{transform:"rotate(".concat(-bearing,"deg)")}})}},{key:"_renderButton",value:function(type,label,callback,children){return(0,_react.createElement)("button",{key:type,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-".concat(type),type:"button",title:label,onClick:callback,children:children})}},{key:"_render",value:function(){var _this$props=this.props,className=_this$props.className,showCompass=_this$props.showCompass,showZoom=_this$props.showZoom;return(0,_react.createElement)("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group ".concat(className),ref:this._containerRef},[showZoom&&this._renderButton("zoom-in","Zoom In",this._onZoomIn),showZoom&&this._renderButton("zoom-out","Zoom Out",this._onZoomOut),showCompass&&this._renderButton("compass","Reset North",this._onResetNorth,this._renderCompass())])}}]),NavigationControl}(_baseControl.default);exports.default=NavigationControl,(0,_defineProperty2.default)(NavigationControl,"propTypes",propTypes),(0,_defineProperty2.default)(NavigationControl,"defaultProps",defaultProps)},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_assertThisInitialized2=_interopRequireDefault(__webpack_require__(12)),_defineProperty2=_interopRequireDefault(__webpack_require__(6)),_react=__webpack_require__(8),_propTypes=_interopRequireDefault(__webpack_require__(32)),_baseControl=_interopRequireDefault(__webpack_require__(53)),_globals=__webpack_require__(226),propTypes=Object.assign({},_baseControl.default.propTypes,{redraw:_propTypes.default.func.isRequired}),CanvasOverlay=function(_BaseControl){function CanvasOverlay(props){var _this;return(0,_classCallCheck2.default)(this,CanvasOverlay),_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(CanvasOverlay).call(this,props)),(0,_defineProperty2.default)((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),"_redraw",function(){var ctx=_this._ctx;if(ctx){var pixelRatio=_globals.window.devicePixelRatio||1;ctx.save(),ctx.scale(pixelRatio,pixelRatio);var _this$_context=_this._context,viewport=_this$_context.viewport,isDragging=_this$_context.isDragging;_this.props.redraw({width:viewport.width,height:viewport.height,ctx:ctx,isDragging:isDragging,project:viewport.project.bind(viewport),unproject:viewport.unproject.bind(viewport)}),ctx.restore()}}),_this}return(0,_inherits2.default)(CanvasOverlay,_BaseControl),(0,_createClass2.default)(CanvasOverlay,[{key:"componentDidMount",value:function(){this._canvas=this._containerRef.current,this._ctx=this._canvas.getContext("2d"),this._redraw()}},{key:"_render",value:function(){var pixelRatio=_globals.window.devicePixelRatio||1,_this$_context$viewpo=this._context.viewport,width=_this$_context$viewpo.width,height=_this$_context$viewpo.height;return this._redraw(),(0,_react.createElement)("canvas",{ref:this._containerRef,width:width*pixelRatio,height:height*pixelRatio,style:{width:"".concat(width,"px"),height:"".concat(height,"px"),position:"absolute",left:0,top:0}})}}]),CanvasOverlay}(_baseControl.default);exports.default=CanvasOverlay,CanvasOverlay.displayName="CanvasOverlay",CanvasOverlay.propTypes=propTypes,CanvasOverlay.defaultProps={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_react=__webpack_require__(8),_propTypes=_interopRequireDefault(__webpack_require__(32)),_baseControl=_interopRequireDefault(__webpack_require__(53)),propTypes=Object.assign({},_baseControl.default.propTypes,{redraw:_propTypes.default.func.isRequired,style:_propTypes.default.object}),HTMLOverlay=function(_BaseControl){function HTMLOverlay(){return(0,_classCallCheck2.default)(this,HTMLOverlay),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(HTMLOverlay).apply(this,arguments))}return(0,_inherits2.default)(HTMLOverlay,_BaseControl),(0,_createClass2.default)(HTMLOverlay,[{key:"_render",value:function(){var _this$_context=this._context,viewport=_this$_context.viewport,isDragging=_this$_context.isDragging,style=Object.assign({position:"absolute",left:0,top:0,width:viewport.width,height:viewport.height},this.props.style);return(0,_react.createElement)("div",{ref:this._containerRef,style:style},this.props.redraw({width:viewport.width,height:viewport.height,isDragging:isDragging,project:viewport.project.bind(viewport),unproject:viewport.unproject.bind(viewport)}))}}]),HTMLOverlay}(_baseControl.default);exports.default=HTMLOverlay,HTMLOverlay.displayName="HTMLOverlay",HTMLOverlay.propTypes=propTypes,HTMLOverlay.defaultProps={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(0);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(1)),_createClass2=_interopRequireDefault(__webpack_require__(2)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(4)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(3)),_inherits2=_interopRequireDefault(__webpack_require__(5)),_react=__webpack_require__(8),_propTypes=_interopRequireDefault(__webpack_require__(32)),_baseControl=_interopRequireDefault(__webpack_require__(53)),propTypes=Object.assign({},_baseControl.default.propTypes,{redraw:_propTypes.default.func.isRequired,style:_propTypes.default.object}),SVGOverlay=function(_BaseControl){function SVGOverlay(){return(0,_classCallCheck2.default)(this,SVGOverlay),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(SVGOverlay).apply(this,arguments))}return(0,_inherits2.default)(SVGOverlay,_BaseControl),(0,_createClass2.default)(SVGOverlay,[{key:"_render",value:function(){var _this$_context=this._context,viewport=_this$_context.viewport,isDragging=_this$_context.isDragging,style=Object.assign({position:"absolute",left:0,top:0},this.props.style);return(0,_react.createElement)("svg",{width:viewport.width,height:viewport.height,ref:this._containerRef,style:style},this.props.redraw({width:viewport.width,height:viewport.height,isDragging:isDragging,project:viewport.project.bind(viewport),unproject:viewport.unproject.bind(viewport)}))}}]),SVGOverlay}(_baseControl.default);exports.default=SVGOverlay,SVGOverlay.displayName="SVGOverlay",SVGOverlay.propTypes=propTypes,SVGOverlay.defaultProps={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1}},function(module,exports,__webpack_require__){!function(exports,d3Interpolate,d3Color){"use strict";function colors(specifier){for(var n=specifier.length/6|0,colors=new Array(n),i=0;i<n;)colors[i]="#"+specifier.slice(6*i,6*++i);return colors}var category10=colors("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Accent=colors("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Dark2=colors("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Paired=colors("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Pastel1=colors("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Pastel2=colors("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Set1=colors("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Set2=colors("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Set3=colors("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function ramp(scheme){return d3Interpolate.interpolateRgbBasis(scheme[scheme.length-1])}var scheme=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(colors),BrBG=ramp(scheme),scheme$1=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(colors),PRGn=ramp(scheme$1),scheme$2=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(colors),PiYG=ramp(scheme$2),scheme$3=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(colors),PuOr=ramp(scheme$3),scheme$4=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(colors),RdBu=ramp(scheme$4),scheme$5=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(colors),RdGy=ramp(scheme$5),scheme$6=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(colors),RdYlBu=ramp(scheme$6),scheme$7=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(colors),RdYlGn=ramp(scheme$7),scheme$8=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(colors),Spectral=ramp(scheme$8),scheme$9=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(colors),BuGn=ramp(scheme$9),scheme$a=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(colors),BuPu=ramp(scheme$a),scheme$b=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(colors),GnBu=ramp(scheme$b),scheme$c=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(colors),OrRd=ramp(scheme$c),scheme$d=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(colors),PuBuGn=ramp(scheme$d),scheme$e=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(colors),PuBu=ramp(scheme$e),scheme$f=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(colors),PuRd=ramp(scheme$f),scheme$g=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(colors),RdPu=ramp(scheme$g),scheme$h=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(colors),YlGnBu=ramp(scheme$h),scheme$i=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(colors),YlGn=ramp(scheme$i),scheme$j=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(colors),YlOrBr=ramp(scheme$j),scheme$k=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(colors),YlOrRd=ramp(scheme$k),scheme$l=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(colors),Blues=ramp(scheme$l),scheme$m=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(colors),Greens=ramp(scheme$m),scheme$n=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(colors),Greys=ramp(scheme$n),scheme$o=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(colors),Purples=ramp(scheme$o),scheme$p=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(colors),Reds=ramp(scheme$p),scheme$q=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(colors),Oranges=ramp(scheme$q),cubehelix=d3Interpolate.interpolateCubehelixLong(d3Color.cubehelix(300,.5,0),d3Color.cubehelix(-240,.5,1)),warm=d3Interpolate.interpolateCubehelixLong(d3Color.cubehelix(-100,.75,.35),d3Color.cubehelix(80,1.5,.8)),cool=d3Interpolate.interpolateCubehelixLong(d3Color.cubehelix(260,.75,.35),d3Color.cubehelix(80,1.5,.8)),c=d3Color.cubehelix(),c$1=d3Color.rgb(),pi_1_3=Math.PI/3,pi_2_3=2*Math.PI/3;function ramp$1(range){var n=range.length;return function(t){return range[Math.max(0,Math.min(n-1,Math.floor(t*n)))]}}var viridis=ramp$1(colors("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),magma=ramp$1(colors("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),inferno=ramp$1(colors("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),plasma=ramp$1(colors("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));exports.schemeCategory10=category10,exports.schemeAccent=Accent,exports.schemeDark2=Dark2,exports.schemePaired=Paired,exports.schemePastel1=Pastel1,exports.schemePastel2=Pastel2,exports.schemeSet1=Set1,exports.schemeSet2=Set2,exports.schemeSet3=Set3,exports.interpolateBrBG=BrBG,exports.schemeBrBG=scheme,exports.interpolatePRGn=PRGn,exports.schemePRGn=scheme$1,exports.interpolatePiYG=PiYG,exports.schemePiYG=scheme$2,exports.interpolatePuOr=PuOr,exports.schemePuOr=scheme$3,exports.interpolateRdBu=RdBu,exports.schemeRdBu=scheme$4,exports.interpolateRdGy=RdGy,exports.schemeRdGy=scheme$5,exports.interpolateRdYlBu=RdYlBu,exports.schemeRdYlBu=scheme$6,exports.interpolateRdYlGn=RdYlGn,exports.schemeRdYlGn=scheme$7,exports.interpolateSpectral=Spectral,exports.schemeSpectral=scheme$8,exports.interpolateBuGn=BuGn,exports.schemeBuGn=scheme$9,exports.interpolateBuPu=BuPu,exports.schemeBuPu=scheme$a,exports.interpolateGnBu=GnBu,exports.schemeGnBu=scheme$b,exports.interpolateOrRd=OrRd,exports.schemeOrRd=scheme$c,exports.interpolatePuBuGn=PuBuGn,exports.schemePuBuGn=scheme$d,exports.interpolatePuBu=PuBu,exports.schemePuBu=scheme$e,exports.interpolatePuRd=PuRd,exports.schemePuRd=scheme$f,exports.interpolateRdPu=RdPu,exports.schemeRdPu=scheme$g,exports.interpolateYlGnBu=YlGnBu,exports.schemeYlGnBu=scheme$h,exports.interpolateYlGn=YlGn,exports.schemeYlGn=scheme$i,exports.interpolateYlOrBr=YlOrBr,exports.schemeYlOrBr=scheme$j,exports.interpolateYlOrRd=YlOrRd,exports.schemeYlOrRd=scheme$k,exports.interpolateBlues=Blues,exports.schemeBlues=scheme$l,exports.interpolateGreens=Greens,exports.schemeGreens=scheme$m,exports.interpolateGreys=Greys,exports.schemeGreys=scheme$n,exports.interpolatePurples=Purples,exports.schemePurples=scheme$o,exports.interpolateReds=Reds,exports.schemeReds=scheme$p,exports.interpolateOranges=Oranges,exports.schemeOranges=scheme$q,exports.interpolateCubehelixDefault=cubehelix,exports.interpolateRainbow=function(t){(t<0||t>1)&&(t-=Math.floor(t));var ts=Math.abs(t-.5);return c.h=360*t-100,c.s=1.5-1.5*ts,c.l=.8-.9*ts,c+""},exports.interpolateWarm=warm,exports.interpolateCool=cool,exports.interpolateSinebow=function(t){var x;return t=(.5-t)*Math.PI,c$1.r=255*(x=Math.sin(t))*x,c$1.g=255*(x=Math.sin(t+pi_1_3))*x,c$1.b=255*(x=Math.sin(t+pi_2_3))*x,c$1+""},exports.interpolateViridis=viridis,exports.interpolateMagma=magma,exports.interpolateInferno=inferno,exports.interpolatePlasma=plasma,Object.defineProperty(exports,"__esModule",{value:!0})}(exports,__webpack_require__(223),__webpack_require__(224))},,function(module,exports,__webpack_require__){!function(exports){"use strict";var EOL={},EOF={},QUOTE=34,NEWLINE=10,RETURN=13;function objectConverter(columns){return new Function("d","return {"+columns.map(function(name,i){return JSON.stringify(name)+": d["+i+"]"}).join(",")+"}")}function dsv(delimiter){var reFormat=new RegExp('["'+delimiter+"\n\r]"),DELIMITER=delimiter.charCodeAt(0);function parseRows(text,f){var t,rows=[],N=text.length,I=0,n=0,eof=N<=0,eol=!1;function token(){if(eof)return EOF;if(eol)return eol=!1,EOL;var i,c,j=I;if(text.charCodeAt(j)===QUOTE){for(;I++<N&&text.charCodeAt(I)!==QUOTE||text.charCodeAt(++I)===QUOTE;);return(i=I)>=N?eof=!0:(c=text.charCodeAt(I++))===NEWLINE?eol=!0:c===RETURN&&(eol=!0,text.charCodeAt(I)===NEWLINE&&++I),text.slice(j+1,i-1).replace(/""/g,'"')}for(;I<N;){if((c=text.charCodeAt(i=I++))===NEWLINE)eol=!0;else if(c===RETURN)eol=!0,text.charCodeAt(I)===NEWLINE&&++I;else if(c!==DELIMITER)continue;return text.slice(j,i)}return eof=!0,text.slice(j,N)}for(text.charCodeAt(N-1)===NEWLINE&&--N,text.charCodeAt(N-1)===RETURN&&--N;(t=token())!==EOF;){for(var row=[];t!==EOL&&t!==EOF;)row.push(t),t=token();f&&null==(row=f(row,n++))||rows.push(row)}return rows}function formatRow(row){return row.map(formatValue).join(delimiter)}function formatValue(text){return null==text?"":reFormat.test(text+="")?'"'+text.replace(/"/g,'""')+'"':text}return{parse:function(text,f){var convert,columns,rows=parseRows(text,function(row,i){if(convert)return convert(row,i-1);columns=row,convert=f?function(columns,f){var object=objectConverter(columns);return function(row,i){return f(object(row),i,columns)}}(row,f):objectConverter(row)});return rows.columns=columns||[],rows},parseRows:parseRows,format:function(rows,columns){return null==columns&&(columns=function(rows){var columnSet=Object.create(null),columns=[];return rows.forEach(function(row){for(var column in row)column in columnSet||columns.push(columnSet[column]=column)}),columns}(rows)),[columns.map(formatValue).join(delimiter)].concat(rows.map(function(row){return columns.map(function(column){return formatValue(row[column])}).join(delimiter)})).join("\n")},formatRows:function(rows){return rows.map(formatRow).join("\n")}}}var csv=dsv(","),csvParse=csv.parse,csvParseRows=csv.parseRows,csvFormat=csv.format,csvFormatRows=csv.formatRows,tsv=dsv("\t"),tsvParse=tsv.parse,tsvParseRows=tsv.parseRows,tsvFormat=tsv.format,tsvFormatRows=tsv.formatRows;exports.dsvFormat=dsv,exports.csvParse=csvParse,exports.csvParseRows=csvParseRows,exports.csvFormat=csvFormat,exports.csvFormatRows=csvFormatRows,exports.tsvParse=tsvParse,exports.tsvParseRows=tsvParseRows,exports.tsvFormat=tsvFormat,exports.tsvFormatRows=tsvFormatRows,Object.defineProperty(exports,"__esModule",{value:!0})}(exports)},function(module,exports,__webpack_require__){var f;module.exports=((f=function(){function e(a){return c.appendChild(a.dom),a}function u(a){for(var d=0;d<c.children.length;d++)c.children[d].style.display=d===a?"block":"none";l=a}var l=0,c=document.createElement("div");c.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",c.addEventListener("click",function(a){a.preventDefault(),u(++l%c.children.length)},!1);var k=(performance||Date).now(),g=k,a=0,r=e(new f.Panel("FPS","#0ff","#002")),h=e(new f.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var t=e(new f.Panel("MB","#f08","#201"));return u(0),{REVISION:16,dom:c,addPanel:e,showPanel:u,begin:function(){k=(performance||Date).now()},end:function(){a++;var c=(performance||Date).now();if(h.update(c-k,200),c>g+1e3&&(r.update(1e3*a/(c-g),100),g=c,a=0,t)){var d=performance.memory;t.update(d.usedJSHeapSize/1048576,d.jsHeapSizeLimit/1048576)}return c},update:function(){k=this.end()},domElement:c,setMode:u}}).Panel=function(e,f,l){var c=1/0,k=0,g=Math.round,a=g(window.devicePixelRatio||1),r=80*a,h=48*a,t=3*a,v=2*a,d=3*a,m=15*a,n=74*a,p=30*a,q=document.createElement("canvas");q.width=r,q.height=h,q.style.cssText="width:80px;height:48px";var b=q.getContext("2d");return b.font="bold "+9*a+"px Helvetica,Arial,sans-serif",b.textBaseline="top",b.fillStyle=l,b.fillRect(0,0,r,h),b.fillStyle=f,b.fillText(e,t,v),b.fillRect(d,m,n,p),b.fillStyle=l,b.globalAlpha=.9,b.fillRect(d,m,n,p),{dom:q,update:function(h,w){c=Math.min(c,h),k=Math.max(k,h),b.fillStyle=l,b.globalAlpha=1,b.fillRect(0,0,r,m),b.fillStyle=f,b.fillText(g(h)+" "+e+" ("+g(c)+"-"+g(k)+")",t,v),b.drawImage(q,d+a,m,n-a,p,d,m,n-a,p),b.fillRect(d+n-a,m,a,p),b.fillStyle=l,b.globalAlpha=.9,b.fillRect(d+n-a,m,a,g((1-h/w)*p))}}},f)},,,function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(__webpack_require__(899)),__export(__webpack_require__(397));var cluster_1=__webpack_require__(900);exports.clusterLocations=cluster_1.clusterLocations},function(module,exports,__webpack_require__){"use strict";var __values=this&&this.__values||function(o){var m="function"==typeof Symbol&&o[Symbol.iterator],i=0;return m?m.call(o):{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}}},__read=this&&this.__read||function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar};Object.defineProperty(exports,"__esModule",{value:!0});var d3_array_1=__webpack_require__(396),types_1=__webpack_require__(397);exports.buildIndex=function(clusterLevels){var e_1,_a,e_2,_b,e_3,_c,nodesByZoom=new Map,clustersById=new Map,minZoomByLocationId=new Map;try{for(var clusterLevels_1=__values(clusterLevels),clusterLevels_1_1=clusterLevels_1.next();!clusterLevels_1_1.done;clusterLevels_1_1=clusterLevels_1.next()){var _d=clusterLevels_1_1.value,zoom=_d.zoom,nodes=_d.nodes;nodesByZoom.set(zoom,nodes);try{for(var nodes_1=__values(nodes),nodes_1_1=nodes_1.next();!nodes_1_1.done;nodes_1_1=nodes_1.next()){var node=nodes_1_1.value;if(types_1.isCluster(node))clustersById.set(node.id,node);else{var id=node.id,mz=minZoomByLocationId.get(id);(null==mz||mz>zoom)&&minZoomByLocationId.set(id,zoom)}}}catch(e_2_1){e_2={error:e_2_1}}finally{try{nodes_1_1&&!nodes_1_1.done&&(_b=nodes_1.return)&&_b.call(nodes_1)}finally{if(e_2)throw e_2.error}}}}catch(e_1_1){e_1={error:e_1_1}}finally{try{clusterLevels_1_1&&!clusterLevels_1_1.done&&(_a=clusterLevels_1.return)&&_a.call(clusterLevels_1)}finally{if(e_1)throw e_1.error}}var _e=__read(d3_array_1.extent(clusterLevels,function(cl){return cl.zoom}),2),minZoom=_e[0],maxZoom=_e[1];if(null==minZoom||null==maxZoom)throw new Error("Could not determine minZoom or maxZoom");var leavesToClustersByZoom=new Map,_loop_1=function(cluster){var zoom=cluster.zoom,leavesToClusters=leavesToClustersByZoom.get(zoom);leavesToClusters||(leavesToClusters=new Map,leavesToClustersByZoom.set(zoom,leavesToClusters)),function visitClusterLeaves(cluster,visit){var e_4,_a;try{for(var _b=__values(cluster.children),_c=_b.next();!_c.done;_c=_b.next()){var childId=_c.value,child=clustersById.get(childId);child?visitClusterLeaves(child,visit):visit(childId)}}catch(e_4_1){e_4={error:e_4_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_4)throw e_4.error}}}(cluster,function(leafId){leavesToClusters.set(leafId,cluster)})};try{for(var _f=__values(clustersById.values()),_g=_f.next();!_g.done;_g=_f.next())_loop_1(_g.value)}catch(e_3_1){e_3={error:e_3_1}}finally{try{_g&&!_g.done&&(_c=_f.return)&&_c.call(_f)}finally{if(e_3)throw e_3.error}}function findClusterFor(locationId,zoom){var leavesToClusters=leavesToClustersByZoom.get(zoom);if(leavesToClusters){var cluster=leavesToClusters.get(locationId);return cluster?cluster.id:void 0}}return{availableZoomLevels:clusterLevels.map(function(cl){return+cl.zoom}).sort(function(a,b){return d3_array_1.ascending(a,b)}),getClusterNodesFor:function(zoom){if(void 0!==zoom)return nodesByZoom.get(zoom)},getClusterById:function(clusterId){return clustersById.get(clusterId)},getMinZoomForLocation:function(locationId){return minZoomByLocationId.get(locationId)||minZoom},expandCluster:function(cluster,targetZoom){void 0===targetZoom&&(targetZoom=maxZoom);var ids=[],visit=function(c,expandedIds){var e_5,_a;if(targetZoom>c.zoom)try{for(var _b=__values(c.children),_c=_b.next();!_c.done;_c=_b.next()){var childId=_c.value,child=clustersById.get(childId);child?visit(child,expandedIds):expandedIds.push(childId)}}catch(e_5_1){e_5={error:e_5_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_5)throw e_5.error}}else expandedIds.push(c.id)};return visit(cluster,ids),ids},findClusterFor:findClusterFor,aggregateFlows:function(flows,zoom,_a,options){var e_6,_b,getFlowOriginId=_a.getFlowOriginId,getFlowDestId=_a.getFlowDestId,getFlowMagnitude=_a.getFlowMagnitude;if(void 0===options&&(options={}),zoom>maxZoom)return flows;var result=[],aggFlowsByKey=new Map,makeKey=function(origin,dest){return origin+":"+dest},_c=options.flowCountsMapReduce,flowCountsMapReduce=void 0===_c?{map:getFlowMagnitude,reduce:function(acc,count){return(acc||0)+count}}:_c;try{for(var flows_1=__values(flows),flows_1_1=flows_1.next();!flows_1_1.done;flows_1_1=flows_1.next()){var flow=flows_1_1.value,origin_1=getFlowOriginId(flow),dest=getFlowDestId(flow),originCluster=findClusterFor(origin_1,zoom)||origin_1,destCluster=findClusterFor(dest,zoom)||dest,key=makeKey(originCluster,destCluster);if(originCluster===origin_1&&destCluster===dest)result.push(flow);else{var aggregateFlow=aggFlowsByKey.get(key);aggregateFlow?aggregateFlow.count=flowCountsMapReduce.reduce(aggregateFlow.count,flowCountsMapReduce.map(flow)):(aggregateFlow={origin:originCluster,dest:destCluster,count:flowCountsMapReduce.map(flow),aggregate:!0},result.push(aggregateFlow),aggFlowsByKey.set(key,aggregateFlow))}}}catch(e_6_1){e_6={error:e_6_1}}finally{try{flows_1_1&&!flows_1_1.done&&(_b=flows_1.return)&&_b.call(flows_1)}finally{if(e_6)throw e_6.error}}return result}}},exports.makeLocationWeightGetter=function(flows,_a){var e_7,_b,getFlowOriginId=_a.getFlowOriginId,getFlowDestId=_a.getFlowDestId,getFlowMagnitude=_a.getFlowMagnitude,locationTotals={incoming:new Map,outgoing:new Map};try{for(var flows_2=__values(flows),flows_2_1=flows_2.next();!flows_2_1.done;flows_2_1=flows_2.next()){var flow=flows_2_1.value,origin_2=getFlowOriginId(flow),dest=getFlowDestId(flow),count=getFlowMagnitude(flow);locationTotals.incoming.set(dest,(locationTotals.incoming.get(dest)||0)+count),locationTotals.outgoing.set(origin_2,(locationTotals.outgoing.get(dest)||0)+count)}}catch(e_7_1){e_7={error:e_7_1}}finally{try{flows_2_1&&!flows_2_1.done&&(_b=flows_2.return)&&_b.call(flows_2)}finally{if(e_7)throw e_7.error}}return function(id){return Math.max(Math.abs(locationTotals.incoming.get(id)||0),Math.abs(locationTotals.outgoing.get(id)||0))}},exports.findAppropriateZoomLevel=function(availableZoomLevels,targetZoom){if(!availableZoomLevels.length)throw new Error("No available zoom levels");return availableZoomLevels[Math.min(d3_array_1.bisectLeft(availableZoomLevels,Math.floor(targetZoom)),availableZoomLevels.length-1)]}},function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__read=this&&this.__read||function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__values=this&&this.__values||function(o){var m="function"==typeof Symbol&&o[Symbol.iterator],i=0;return m?m.call(o):{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}}},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var d3_array_1=__webpack_require__(396),kdbush_1=__importDefault(__webpack_require__(901)),defaultOptions={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,makeClusterName:function(id,numPoints){},makeClusterId:function(id){return"{["+id+"]}"}};function isLeafPoint(p){return null!=p.index}function isClusterPoint(p){return null!=p.id}function createCluster(x,y,id,numPoints,weight){return{x:x,y:y,zoom:1/0,id:id,parentId:-1,numPoints:numPoints,weight:weight}}function cluster(points,zoom,tree,options){for(var e_2,_a,clusters=[],r=options.radius/(options.extent*Math.pow(2,zoom)),i=0;i<points.length;i++){var p=points[i];if(!(p.zoom<=zoom)){p.zoom=zoom;var neighborIds=tree.within(p.x,p.y,r),weight=p.weight||1,numPoints=isClusterPoint(p)?p.numPoints:1,wx=p.x*weight,wy=p.y*weight,id=(i<<5)+(zoom+1);try{for(var neighborIds_1=__values(neighborIds),neighborIds_1_1=neighborIds_1.next();!neighborIds_1_1.done;neighborIds_1_1=neighborIds_1.next()){var neighborId=neighborIds_1_1.value,b=tree.points[neighborId];if(!(b.zoom<=zoom)){b.zoom=zoom;var weight2=b.weight||1,numPoints2=b.numPoints||1;wx+=b.x*weight2,wy+=b.y*weight2,weight+=weight2,numPoints+=numPoints2,b.parentId=id}}}catch(e_2_1){e_2={error:e_2_1}}finally{try{neighborIds_1_1&&!neighborIds_1_1.done&&(_a=neighborIds_1.return)&&_a.call(neighborIds_1)}finally{if(e_2)throw e_2.error}}1===numPoints?clusters.push(p):(p.parentId=id,clusters.push(createCluster(wx/weight,wy/weight,id,numPoints,weight)))}}return clusters}function xLng(x){return 360*(x-.5)}function yLat(y){var y2=(180-360*y)*Math.PI/180;return 360*Math.atan(Math.exp(y2))/Math.PI-90}function latY(lat){var sin=Math.sin(lat*Math.PI/180),y=.5-.25*Math.log((1+sin)/(1-sin))/Math.PI;return y<0?0:y>1?1:y}function getX(p){return p.x}function getY(p){return p.y}exports.isLeafPoint=isLeafPoint,exports.isClusterPoint=isClusterPoint,exports.clusterLocations=function(locations,locationAccessors,getLocationWeight,options){for(var e_1,_a,lng,getLocationCentroid=locationAccessors.getLocationCentroid,getLocationId=locationAccessors.getLocationId,opts=__assign({},defaultOptions,options),minZoom=opts.minZoom,maxZoom=opts.maxZoom,nodeSize=opts.nodeSize,makeClusterName=opts.makeClusterName,makeClusterId=opts.makeClusterId,trees=new Array(maxZoom+1),clusters=new Array,i=0;i<locations.length;i++){var _b=__read(getLocationCentroid(locations[i]),2),x=_b[0],y=_b[1];clusters.push({x:(lng=x,lng/360+.5),y:latY(y),weight:getLocationWeight(getLocationId(locations[i])),zoom:1/0,index:i,parentId:-1})}trees[maxZoom+1]=new kdbush_1.default(clusters,getX,getY,nodeSize,Float32Array);for(var z=maxZoom;z>=minZoom;z--)clusters=cluster(clusters,z,trees[z+1],opts),trees[z]=new kdbush_1.default(clusters,getX,getY,nodeSize,Float32Array);if(0===trees.length)return[];for(var numbersOfClusters=trees.map(function(d){return d.points.length}),maxAvailZoom=numbersOfClusters.indexOf(numbersOfClusters[numbersOfClusters.length-1]),minAvailZoom=Math.min(maxAvailZoom,numbersOfClusters.lastIndexOf(numbersOfClusters[0])),clusterLevels=new Array,zoom=minAvailZoom;zoom<=maxAvailZoom;zoom++){var childrenByParent=void 0,tree=trees[zoom];zoom<maxAvailZoom&&(childrenByParent=d3_array_1.rollup(trees[zoom+1].points,function(points){return points.map(function(p){return p.id?makeClusterId(p.id):getLocationId(locations[p.index])})},function(point){return point.parentId}));var nodes=[];try{for(var _c=__values(tree.points),_d=_c.next();!_d.done;_d=_c.next()){var point=_d.value,numPoints=(x=point.x,y=point.y,point.numPoints);if(isLeafPoint(point)){var location_1=locations[point.index];nodes.push({id:getLocationId(location_1),zoom:zoom,centroid:getLocationCentroid(location_1)})}else if(isClusterPoint(point)){var id=point.id,children=childrenByParent&&childrenByParent.get(id);if(!children)throw new Error("Cluster "+id+" doesn't have children");var cluster_1={id:makeClusterId(id),name:makeClusterName(id,numPoints),zoom:zoom,centroid:[xLng(x),yLat(y)],children:children};nodes.push(cluster_1)}}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_d&&!_d.done&&(_a=_c.return)&&_a.call(_c)}finally{if(e_1)throw e_1.error}}clusterLevels.push({zoom:zoom,nodes:nodes})}return clusterLevels}},function(module,exports,__webpack_require__){module.exports=function(){"use strict";function sortKD(ids,coords,nodeSize,left,right,depth){if(!(right-left<=nodeSize)){var m=left+right>>1;!function select(ids,coords,k,left,right,inc){for(;right>left;){if(right-left>600){var n=right-left+1,m=k-left+1,z=Math.log(n),s=.5*Math.exp(2*z/3),sd=.5*Math.sqrt(z*s*(n-s)/n)*(m-n/2<0?-1:1),newLeft=Math.max(left,Math.floor(k-m*s/n+sd)),newRight=Math.min(right,Math.floor(k+(n-m)*s/n+sd));select(ids,coords,k,newLeft,newRight,inc)}var t=coords[2*k+inc],i=left,j=right;for(swapItem(ids,coords,left,k),coords[2*right+inc]>t&&swapItem(ids,coords,left,right);i<j;){for(swapItem(ids,coords,i,j),i++,j--;coords[2*i+inc]<t;)i++;for(;coords[2*j+inc]>t;)j--}coords[2*left+inc]===t?swapItem(ids,coords,left,j):swapItem(ids,coords,++j,right),j<=k&&(left=j+1),k<=j&&(right=j-1)}}(ids,coords,m,left,right,depth%2),sortKD(ids,coords,nodeSize,left,m-1,depth+1),sortKD(ids,coords,nodeSize,m+1,right,depth+1)}}function swapItem(ids,coords,i,j){swap(ids,i,j),swap(coords,2*i,2*j),swap(coords,2*i+1,2*j+1)}function swap(arr,i,j){var tmp=arr[i];arr[i]=arr[j],arr[j]=tmp}function sqDist(ax,ay,bx,by){var dx=ax-bx,dy=ay-by;return dx*dx+dy*dy}var defaultGetX=function(p){return p[0]},defaultGetY=function(p){return p[1]},KDBush=function(points,getX,getY,nodeSize,ArrayType){void 0===getX&&(getX=defaultGetX),void 0===getY&&(getY=defaultGetY),void 0===nodeSize&&(nodeSize=64),void 0===ArrayType&&(ArrayType=Float64Array),this.nodeSize=nodeSize,this.points=points;for(var IndexArrayType=points.length<65536?Uint16Array:Uint32Array,ids=this.ids=new IndexArrayType(points.length),coords=this.coords=new ArrayType(2*points.length),i=0;i<points.length;i++)ids[i]=i,coords[2*i]=getX(points[i]),coords[2*i+1]=getY(points[i]);sortKD(ids,coords,nodeSize,0,ids.length-1,0)};return KDBush.prototype.range=function(minX,minY,maxX,maxY){return function(ids,coords,minX,minY,maxX,maxY,nodeSize){for(var x,y,stack=[0,ids.length-1,0],result=[];stack.length;){var axis=stack.pop(),right=stack.pop(),left=stack.pop();if(right-left<=nodeSize)for(var i=left;i<=right;i++)x=coords[2*i],y=coords[2*i+1],x>=minX&&x<=maxX&&y>=minY&&y<=maxY&&result.push(ids[i]);else{var m=Math.floor((left+right)/2);x=coords[2*m],y=coords[2*m+1],x>=minX&&x<=maxX&&y>=minY&&y<=maxY&&result.push(ids[m]);var nextAxis=(axis+1)%2;(0===axis?minX<=x:minY<=y)&&(stack.push(left),stack.push(m-1),stack.push(nextAxis)),(0===axis?maxX>=x:maxY>=y)&&(stack.push(m+1),stack.push(right),stack.push(nextAxis))}}return result}(this.ids,this.coords,minX,minY,maxX,maxY,this.nodeSize)},KDBush.prototype.within=function(x,y,r){return function(ids,coords,qx,qy,r,nodeSize){for(var stack=[0,ids.length-1,0],result=[],r2=r*r;stack.length;){var axis=stack.pop(),right=stack.pop(),left=stack.pop();if(right-left<=nodeSize)for(var i=left;i<=right;i++)sqDist(coords[2*i],coords[2*i+1],qx,qy)<=r2&&result.push(ids[i]);else{var m=Math.floor((left+right)/2),x=coords[2*m],y=coords[2*m+1];sqDist(x,y,qx,qy)<=r2&&result.push(ids[m]);var nextAxis=(axis+1)%2;(0===axis?qx-r<=x:qy-r<=y)&&(stack.push(left),stack.push(m-1),stack.push(nextAxis)),(0===axis?qx+r>=x:qy+r>=y)&&(stack.push(m+1),stack.push(right),stack.push(nextAxis))}}return result}(this.ids,this.coords,x,y,r,this.nodeSize)},KDBush}()}]]);
//# sourceMappingURL=vendors~main.51d833075dee4e959609.bundle.js.map